{"meta":{"title":"æœ¨ç“œç…²é¸¡è„š's blog","subtitle":"å…¬ä¼—å·ï¼šITé‚£ä¸ªå°ç¬”è®°","description":null,"author":"æœ¨ç“œç…²é¸¡è„š","url":"http://yournotes.cn","root":"/"},"pages":[{"title":"","date":"2025-04-17T08:34:52.043Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"baidu_verify_code-6ih5lLBPBc.html","permalink":"http://yournotes.cn/baidu_verify_code-6ih5lLBPBc.html","excerpt":"","text":"874a2cdb47e0257a8e788a1cb273ce4f"},{"title":"è¯´è¯´","date":"2021-04-08T13:48:25.000Z","updated":"2025-04-17T08:34:52.025Z","comments":false,"path":"artitalk/index.html","permalink":"http://yournotes.cn/artitalk/index.html","excerpt":"","text":"new Artitalk({ appId: 'QQMg3jxS8pGF0Rtc5A3g9WDu-MdYXbMMI', appKey: 'Td165vac7Xep12Tgxxi6Daev', shuoPla: 'è¯´ç‚¹å•¥....' })"},{"title":"æˆ‘çš„ç›¸å†Œ","date":"2021-04-07T13:27:44.000Z","updated":"2025-04-17T08:34:51.956Z","comments":true,"path":"Gallery/index.html","permalink":"http://yournotes.cn/Gallery/index.html","excerpt":"","text":"å£ç´™ æ”¶è—çš„ä¸€äº›å£ç´™ æ‘„å½± è«åå…¶å¦™çš„éšæ‹ ç”»ç”» åœ¨ç”»äº›å•¥ é£Ÿç‰© åœ¨åƒäº›å•¥"},{"title":"å‹æƒ…é“¾æ¥","date":"2021-04-07T11:19:14.000Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"link/index.html","permalink":"http://yournotes.cn/link/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2021-04-07T11:11:33.000Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"categories/index.html","permalink":"http://yournotes.cn/categories/index.html","excerpt":"","text":""},{"title":"","date":"2025-04-17T08:34:52.043Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"photos/data.json","permalink":"http://yournotes.cn/photos/data.json","excerpt":"","text":"{\"list\":[{\"date\":\"2020-9\",\"arr\":{\"text\":[\"geté¸¡è›‹é…±æ²¹ç„–é¢\"],\"type\":[\"image\"],\"month\":9,\"link\":[\"2020-9_geté¸¡è›‹é…±æ²¹ç„–é¢.jpg\"],\"year\":2020}},{\"date\":\"2020-8\",\"arr\":{\"text\":[\"é²œè™¾é¦„é¥¨\"],\"type\":[\"image\"],\"month\":8,\"link\":[\"2020-8_é²œè™¾é¦„é¥¨.jpg\"],\"year\":2020}},{\"date\":\"2020-6\",\"arr\":{\"text\":[\"\",\"å¯\",\" \"],\"type\":[\"image\",\"image\",\"image\"],\"month\":6,\"link\":[\"2020-6_.jpg\",\"2020-6_å¯.jpg\",\"2020-6_ .jpg\"],\"year\":2020}},{\"date\":\"2019-12\",\"arr\":{\"text\":[\"\"],\"type\":[\"image\"],\"month\":12,\"link\":[\"2019-12_.jpg\"],\"year\":2019}}]}"},{"title":"ç›¸å†Œ","slug":"photos","date":"2025-04-17T08:34:52.043Z","updated":"2025-04-17T08:34:52.043Z","comments":false,"path":"photos/index.html","permalink":"http://yournotes.cn/photos/index.html","excerpt":"","text":"Photos Video å›¾ç‰‡æ­£åœ¨åŠ è½½ä¸­â€¦ (function() { var loadScript = function(path) { var $script = document.createElement('script') document.getElementsByTagName('body')[0].appendChild($script) $script.setAttribute('src', path) } setTimeout(function() { loadScript('./ins.js') }, 0) })()"},{"title":"","date":"2025-04-17T08:34:52.043Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"photos/ins.css","permalink":"http://yournotes.cn/photos/ins.css","excerpt":"","text":"#post-instagram{ padding: 30px; } #post-instagram .article-entry{ padding-right: 0; } .instagram{ position: relative; min-height: 500px; } .instagram img { width: 100%; } .instagram .year { font-size: 16px; } .instagram .open-ins{ padding: 10px 0; color: #cdcdcd; } .instagram .open-ins:hover{ color: #657b83; } .instagram .year{ display: inline; } .instagram .thumb { width: 25%; height: 0; padding-bottom: 25%; position: relative; display: inline-block; text-align: center; background: #ededed; outline: 1px solid #ddd; } .instagram .thumb a { position: relative; } .instagram .album h1 em{ font-style: normal; font-size: 14px; margin-left: 10px; } .instagram .album ul{ display: flex; flex-wrap: wrap; clear: both; width: 100%; text-align: left; } .instagram .album li{ list-style: none; display: inline-block; box-sizing: border-box; padding: 0 5px; margin-bottom: -10px; height: 0; width: 25%; position: relative; padding-bottom: 25%; } .instagram .album li:before{ display: none; } .instagram .album div.img-box{ position: absolute; width: 90%; height: 90%; -webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); -moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); } .instagram .album div.img-box img{ width: 100%; height: 100%; position: absolute; z-index: 2; } .instagram .album div.img-box .img-bg{ position: absolute; top: 0; left: 0; bottom: 0px; width: 100%; margin: -5px; padding: 5px; -webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); -moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); -webkit-transition: all 0.15s ease-out 0.1s; -moz-transition: all 0.15s ease-out 0.1s; -o-transition: all 0.15s ease-out 0.1s; transition: all 0.15s ease-out 0.1s; opacity: 0.2; cursor: pointer; display: block; z-index: 3; } .instagram .album div.img-box .icon { font-size: 14px; position: absolute; left: 50%; top: 50%; margin-left: -7px; margin-top: -7px; color: #999; z-index: 1; } .instagram .album div.img-box .img-bg:hover{ opacity: 0; } .photos-btn-wrap { border-bottom: 1px solid #e5e5e5; margin-bottom: 20px; } .photos-btn { font-size: 16px; color: #333; margin-bottom: -4px; padding: 5px 8px 3px; } .photos-btn.active { color: #08c; border: 1px solid #e5e5e5; border-bottom: 5px solid #fff; } @media screen and (max-width:600px) { .instagram .thumb { width: 50%; padding-bottom: 50%; } .instagram .album li { width: 100%; position: relative; padding-bottom: 100%; text-align: center; } .instagram .album div.img-box{ margin: 0; width: 90%; height: 90%; } }"},{"title":"","date":"2025-04-17T08:34:52.043Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"photos/ins.js","permalink":"http://yournotes.cn/photos/ins.js","excerpt":"","text":"/******/ (function(modules) { // webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if (installedModules[moduleId]) /******/ return installedModules[moduleId].exports; /******/ /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ exports: {}, /******/ id: moduleId, /******/ loaded: false /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.loaded = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = \"/dist/\"; /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ function(module, exports, __webpack_require__) { 'use strict'; __webpack_require__(1); var _view = __webpack_require__(2); var _view2 = _interopRequireDefault(_view); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } /** * @name impush-client * @description è¿™ä¸ªé¡¹ç›®è®©æˆ‘å‘å®¶è‡´å¯Œâ€¦ * @date 2016-12-1 */ var _collection = []; var _count = 0; var searchData; function addMask(elem) { var rect = elem.getBoundingClientRect(); var style = getComputedStyle(elem, null); var mask = document.createElement('i'); mask.className = 'icon-film'; mask.style.color = '#fff'; mask.style.fontSize = '26px'; mask.style.position = 'absolute'; mask.style.right = '10px'; mask.style.bottom = '10px'; mask.style.zIndex = 1; elem.parentNode.appendChild(mask); } var createVideoIncon = function createVideoIncon() { var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]'); for (var i = 0, len = $videoImg.length; i < len; i++) { addMask($videoImg[i]); } }; var render = function render(res) { var ulTmpl = \"\"; for (var j = 0, len2 = res.list.length; j < len2; j++) { var data = res.list[j].arr; var liTmpl = \"\"; for (var i = 0, len = data.link.length; i < len; i++) { var minSrc = 'https://gitee.com/Jasper-zh/photos/raw/master/min_photos/' + data.link[i]; var src = 'https://gitee.com/Jasper-zh/photos/raw/master/photos/' + data.link[i]; var type = data.type[i]; var target = src + (type === 'video' ? '.mp4' : '.jpg'); src += ''; liTmpl += '\\ \\ \\ \\ ' + data.text[i] + '\\ '; } ulTmpl = ulTmpl + '' + data.year + 'å¹´' + data.month + 'æœˆ\\ ' + liTmpl + '\\ '; } document.querySelector('.instagram').innerHTML = '' + ulTmpl + ''; createVideoIncon(); _view2.default.init(); }; var replacer = function replacer(str) { var arr = str.split(\"/\"); return \"/assets/ins/\" + arr[arr.length - 1]; }; var ctrler = function ctrler(data) { var imgObj = {}; for (var i = 0, len = data.length; i < len; i++) { var y = data[i].y; var m = data[i].m; var src = replacer(data[i].src); var text = data[i].text; var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m); if (imgObj[key]) { imgObj[key].srclist.push(src); imgObj[key].text.push(text); } else { imgObj[key] = { year: y, month: m, srclist: [src], text: [text] }; } } render(imgObj); }; function loadData(success) { if (!searchData) { var xhr = new XMLHttpRequest(); xhr.open('GET', './data.json?t=' + +new Date(), true); xhr.onload = function() { if (this.status >= 200 && this.status < 300) { var res = JSON.parse(this.response); searchData = res; success(searchData); } else { console.error(this.statusText); } }; xhr.onerror = function() { console.error(this.statusText); }; xhr.send(); } else { success(searchData); } } var Ins = { init: function init() { loadData(function(data) { render(data); }); } }; Ins.init(); // export default impush; /***/ }, /* 1 */ /***/ function(module, exports, __webpack_require__) { /* WEBPACK VAR INJECTION */ (function(global) { 'use strict'; var inViewport = __webpack_require__(3); var lazyAttrs = ['data-src']; global.lzld = lazyload(); // Provide libs using getAttribute early to get the good src // and not the fake data-src replaceGetAttribute('Image'); replaceGetAttribute('IFrame'); function registerLazyAttr(attr) { if (indexOf.call(lazyAttrs, attr) === -1) { lazyAttrs.push(attr); } } function lazyload(opts) { opts = merge({ 'offset': 333, 'src': 'data-src', 'container': false }, opts || {}); if (typeof opts.src === 'string') { registerLazyAttr(opts.src); } var elts = []; function show(elt) { var src = findRealSrc(elt); if (src) { elt.src = src; } elt.setAttribute('data-lzled', true); elts[indexOf.call(elts, elt)] = null; } function findRealSrc(elt) { if (typeof opts.src === 'function') { return opts.src(elt); } return elt.getAttribute(opts.src); } function register(elt) { elt.onload = null; elt.removeAttribute('onload'); elt.onerror = null; elt.removeAttribute('onerror'); if (indexOf.call(elts, elt) === -1) { inViewport(elt, opts, show); } } return register; } function replaceGetAttribute(elementName) { var fullname = 'HTML' + elementName + 'Element'; if (fullname in global === false) { return; } var original = global[fullname].prototype.getAttribute; global[fullname].prototype.getAttribute = function(name) { if (name === 'src') { var realSrc; for (var i = 0, max = lazyAttrs.length; i < max; i++) { realSrc = original.call(this, lazyAttrs[i]); if (realSrc) { break; } } return realSrc || original.call(this, name); } // our own lazyloader will go through theses lines // because we use getAttribute(opts.src) return original.call(this, name); }; } function merge(defaults, opts) { for (var name in defaults) { if (opts[name] === undefined) { opts[name] = defaults[name]; } } return opts; } // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html function indexOf(value) { for (var i = this.length; i-- && this[i] !== value;) {} return i; } module.exports = lazyload; // export default impush; /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ }, /* 2 */ /***/ function(module, exports) { 'use strict'; var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) { // parse slide data (url, title, size ...) from DOM elements // (children of gallerySelector) var parseThumbnailElements = function parseThumbnailElements(el) { el = el.parentNode.parentNode; var thumbElements = el.getElementsByClassName('thumb'), numNodes = thumbElements.length, items = [], figureEl, linkEl, size, type, // video or not target, item; for (var i = 0; i < numNodes; i++) { figureEl = thumbElements[i]; // // include only element nodes if (figureEl.nodeType !== 1) { continue; } linkEl = figureEl.children[0]; // size = linkEl.getAttribute('data-size').split('x'); type = linkEl.getAttribute('data-type'); target = linkEl.getAttribute('data-target'); // create slide object item = { src: linkEl.getAttribute('href'), w: parseInt(size[0], 10), h: parseInt(size[1], 10) }; if (figureEl.children.length > 1) { item.title = figureEl.children[1].innerHTML; } if (linkEl.children.length > 0) { item.msrc = linkEl.children[0].getAttribute('src'); item.type = type; item.target = target; item.html = ''; if (type === 'video') { //item.src = null; } } item.el = figureEl; // save link to element for getThumbBoundsFn items.push(item); } return items; }; // find nearest parent element var closest = function closest(el, fn) { return el && (fn(el) ? el : closest(el.parentNode, fn)); }; // triggers when user clicks on thumbnail var onThumbnailsClick = function onThumbnailsClick(e) { e = e || window.event; e.preventDefault ? e.preventDefault() : e.returnValue = false; var eTarget = e.target || e.srcElement; // find root element of slide var clickedListItem = closest(eTarget, function(el) { return el.tagName && el.tagName.toUpperCase() === 'FIGURE'; }); if (!clickedListItem) { return; } // find index of clicked item by looping through all child nodes // alternatively, you may define index via data- attribute var clickedGallery = clickedListItem.parentNode, // childNodes = clickedListItem.parentNode.childNodes, // numChildNodes = childNodes.length, childNodes = document.getElementsByClassName('thumb'), numChildNodes = childNodes.length, nodeIndex = 0, index; for (var i = 0; i < numChildNodes; i++) { if (childNodes[i].nodeType !== 1) { continue; } if (childNodes[i] === clickedListItem) { index = nodeIndex; break; } nodeIndex++; } if (index >= 0) { // open PhotoSwipe if valid index found openPhotoSwipe(index, clickedGallery); } return false; }; // parse picture index and gallery index from URL (#&pid=1&gid=2) var photoswipeParseHash = function photoswipeParseHash() { var hash = window.location.hash.substring(1), params = {}; if (hash.length < 5) { return params; } var vars = hash.split('&'); for (var i = 0; i < vars.length; i++) { if (!vars[i]) { continue; } var pair = vars[i].split('='); if (pair.length < 2) { continue; } params[pair[0]] = pair[1]; } if (params.gid) { params.gid = parseInt(params.gid, 10); } return params; }; var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) { var pswpElement = document.querySelectorAll('.pswp')[0], gallery, options, items; items = parseThumbnailElements(galleryElement); // define options (if needed) options = { // define gallery index (for URL) galleryUID: galleryElement.getAttribute('data-pswp-uid'), getThumbBoundsFn: function getThumbBoundsFn(index) { // See Options -> getThumbBoundsFn section of documentation for more info var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail pageYScroll = window.pageYOffset || document.documentElement.scrollTop, rect = thumbnail.getBoundingClientRect(); return { x: rect.left, y: rect.top + pageYScroll, w: rect.width }; } }; // PhotoSwipe opened from URL if (fromURL) { if (options.galleryPIDs) { // parse real index when custom PIDs are used // http://photoswipe.com/documentation/faq.html#custom-pid-in-url for (var j = 0; j < items.length; j++) { if (items[j].pid == index) { options.index = j; break; } } } else { // in URL indexes start from 1 options.index = parseInt(index, 10) - 1; } } else { options.index = parseInt(index, 10); } // exit if index not found if (isNaN(options.index)) { return; } if (disableAnimation) { options.showAnimationDuration = 0; } // Pass data to PhotoSwipe and initialize it gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options); gallery.init(); var $tempVideo; var stopVideoHandle = function stopVideoHandle() { if ($tempVideo) { $tempVideo.remove(); $tempVideo = null; } }; var changeHandle = function changeHandle() { var item = gallery.currItem; stopVideoHandle(); if (item.type === 'video') { var $ctn = item.container; var style = $ctn.getElementsByClassName('pswp__img')[0].style; var $video = document.createElement('video'); $video.setAttribute('autoplay', 'autoplay'); $video.setAttribute('controls', 'controls'); $video.setAttribute('src', item.target); $video.style.width = style.width; $video.style.height = style.height; $video.style.position = 'absolute'; $video.style.zIndex = 2; $tempVideo = $video; $ctn.appendChild($video); } }; gallery.listen('initialZoomIn', changeHandle); gallery.listen('afterChange', changeHandle); gallery.listen('initialZoomOut', stopVideoHandle); }; // loop through all gallery elements and bind events var galleryElements = document.querySelectorAll(gallerySelector); for (var i = 0, l = galleryElements.length; i < l; i++) { galleryElements[i].setAttribute('data-pswp-uid', i + 1); galleryElements[i].onclick = onThumbnailsClick; } // Parse URL and open gallery if it contains #&pid=3&gid=1 var hashData = photoswipeParseHash(); if (hashData.pid && hashData.gid) { openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true); } }; var Viewer = function() { function init() { initPhotoSwipeFromDOM('.photos'); } return { init: init }; }(); module.exports = Viewer; /***/ }, /* 3 */ /***/ function(module, exports) { /* WEBPACK VAR INJECTION */ (function(global) { module.exports = inViewport; var instances = []; var supportsMutationObserver = typeof global.MutationObserver === 'function'; function inViewport(elt, params, cb) { var opts = { container: global.document.body, offset: 0 }; if (params === undefined || typeof params === 'function') { cb = params; params = {}; } var container = opts.container = params.container || opts.container; var offset = opts.offset = params.offset || opts.offset; for (var i = 0; i < instances.length; i++) { if (instances[i].container === container) { return instances[i].isInViewport(elt, offset, cb); } } return instances[ instances.push(createInViewport(container)) - 1 ].isInViewport(elt, offset, cb); } function addEvent(el, type, fn) { if (el.attachEvent) { el.attachEvent('on' + type, fn); } else { el.addEventListener(type, fn, false); } } function debounce(func, wait, immediate) { var timeout; return function() { var context = this, args = arguments; var callNow = immediate && !timeout; clearTimeout(timeout); timeout = setTimeout(later, wait); if (callNow) func.apply(context, args); function later() { timeout = null; if (!immediate) func.apply(context, args); } }; } // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708 var contains = function() { if (!global.document) { return true; } return global.document.documentElement.compareDocumentPosition ? function(a, b) { return !!(a.compareDocumentPosition(b) & 16); } : global.document.documentElement.contains ? function(a, b) { return a !== b && (a.contains ? a.contains(b) : false); } : function(a, b) { while (b = b.parentNode) { if (b === a) { return true; } } return false; }; } function createInViewport(container) { var watches = createWatches(); var scrollContainer = container === global.document.body ? global : container; var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15); addEvent(scrollContainer, 'scroll', debouncedCheck); if (scrollContainer === global) { addEvent(global, 'resize', debouncedCheck); } if (supportsMutationObserver) { observeDOM(watches, container, debouncedCheck); } // failsafe check, every 200ms we check for visible images // usecase: a hidden parent containing eleements // when the parent becomes visible, we have no event that the children // became visible setInterval(debouncedCheck, 150); function isInViewport(elt, offset, cb) { if (!cb) { return isVisible(elt, offset); } var remote = createRemote(elt, offset, cb); remote.watch(); return remote; } function createRemote(elt, offset, cb) { function watch() { watches.add(elt, offset, cb); } function dispose() { watches.remove(elt); } return { watch: watch, dispose: dispose }; } function watchInViewport(elt, offset, cb) { if (isVisible(elt, offset)) { watches.remove(elt); cb(elt); } } function isVisible(elt, offset) { if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) { return false; } // Check if the element is visible // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js if (!elt.offsetWidth || !elt.offsetHeight) { return false; } var eltRect = elt.getBoundingClientRect(); var viewport = {}; if (container === global.document.body) { viewport = { top: -offset, left: -offset, right: global.document.documentElement.clientWidth + offset, bottom: global.document.documentElement.clientHeight + offset }; } else { var containerRect = container.getBoundingClientRect(); viewport = { top: containerRect.top - offset, left: containerRect.left - offset, right: containerRect.right + offset, bottom: containerRect.bottom + offset }; } // The element must overlap with the visible part of the viewport var visible = ( (eltRect.right > viewport.left) && (eltRect.left < viewport.right) && (eltRect.bottom > viewport.top) && (eltRect.top < viewport.bottom) ); return visible; } return { container: container, isInViewport: isInViewport }; } function createWatches() { var watches = []; function add(elt, offset, cb) { if (!isWatched(elt)) { watches.push([elt, offset, cb]); } } function remove(elt) { var pos = indexOf(elt); if (pos !== -1) { watches.splice(pos, 1); } } function indexOf(elt) { for (var i = watches.length - 1; i >= 0; i--) { if (watches[i][0] === elt) { return i; } } return -1; } function isWatched(elt) { return indexOf(elt) !== -1; } function checkAll(cb) { return function() { for (var i = watches.length - 1; i >= 0; i--) { cb.apply(this, watches[i]); } }; } return { add: add, remove: remove, isWatched: isWatched, checkAll: checkAll }; } function observeDOM(watches, container, cb) { var observer = new MutationObserver(watch); var filter = Array.prototype.filter; var concat = Array.prototype.concat; observer.observe(container, { childList: true, subtree: true, // changes like style/width/height/display will be catched attributes: true }); function watch(mutations) { // some new DOM nodes where previously watched // we should check their positions if (mutations.some(knownNodes) === true) { setTimeout(cb, 0); } } function knownNodes(mutation) { var nodes = concat.call([], Array.prototype.slice.call(mutation.addedNodes), mutation.target ); return filter.call(nodes, watches.isWatched).length > 0; } } /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ } /******/ ]);"},{"title":"","date":"2025-04-17T08:34:52.043Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"photos/lazyload.min.js","permalink":"http://yournotes.cn/photos/lazyload.min.js","excerpt":"","text":"/*! * An jQuery | zepto plugin for lazy loading images. * author -> jieyou * see https://github.com/jieyou/lazyload * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD) * use component's throttle https://github.com/component/throttle (MIT) */ !function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});"},{"title":"æˆ‘çš„æ­Œå•","date":"2021-04-07T11:45:10.000Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"music/index.html","permalink":"http://yournotes.cn/music/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2021-04-07T11:16:33.000Z","updated":"2025-04-17T08:34:52.043Z","comments":true,"path":"tags/index.html","permalink":"http://yournotes.cn/tags/index.html","excerpt":"","text":""},{"title":"","date":"2025-09-21T07:30:05.032Z","updated":"2025-09-21T07:06:00.184Z","comments":true,"path":"assets/other/index.html","permalink":"http://yournotes.cn/assets/other/index.html","excerpt":"","text":"user Agreement document.documentElement.style.fontSize = 8 + 'px'; PennyNoteç”¨æˆ·æœåŠ¡åè®® æ›´æ–°æ—¥æœŸï¼š2024å¹´12æœˆ19æ—¥ é‡è¦è¯´æ˜ï¼šè¯·æ‚¨ä»”ç»†é˜…è¯»æœ¬åè®®çš„å…¨éƒ¨å†…å®¹ï¼Œç‰¹åˆ«æ˜¯å­—ä½“åŠ ç²—éƒ¨åˆ†ã€‚å¦‚æ‚¨å¯¹æœ¬åè®®å†…å®¹æœ‰ç–‘é—®ï¼Œè¯·å‹¿è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚å¦‚æ‚¨ä½¿ç”¨PennyNoteæœåŠ¡å³è§†ä¸ºæ‚¨å·²é˜…è¯»å¹¶åŒæ„æœ¬åè®®çš„çº¦æŸã€‚ 1. å…³äºæˆ‘ä»¬ æ„Ÿè°¢æ‚¨é€‰æ‹©ä½¿ç”¨PennyNoteæ™ºèƒ½è®°è´¦åº”ç”¨ã€‚ PennyNoteæ˜¯ç”±æˆ‘ä»¬å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾æ™ºèƒ½è®°è´¦ç†è´¢åº”ç”¨ï¼ˆä»¥ä¸‹ç®€ç§°\"æˆ‘ä»¬\"æˆ–\"PennyNote\"ï¼‰ï¼Œè‡´åŠ›äºä¸ºç”¨æˆ·æä¾›ä¾¿æ·ã€å®‰å…¨çš„ä¸ªäººè´¢åŠ¡ç®¡ç†æœåŠ¡ã€‚ æœ¬ç”¨æˆ·æœåŠ¡åè®®æ˜¯æˆ‘ä»¬ä¸ç”¨æˆ·ï¼ˆä»¥ä¸‹ç®€ç§°\"æ‚¨\"ï¼‰å…³äºä½¿ç”¨PennyNoteæœåŠ¡æ‰€è®¢ç«‹çš„æœ‰æ•ˆåè®®ã€‚ 2. åè®®èŒƒå›´ã€ç›®çš„åŠç¡®è®¤æ–¹å¼ æœ¬ç”¨æˆ·æœåŠ¡åè®®åŠé™„å±åè®®ï¼Œä»¥åŠé¡µé¢å±•ç¤ºçš„å•é¡¹åè®®æˆ–è§„åˆ™ã€æ“ä½œæç¤ºï¼ˆä»¥ä¸‹åˆç§°ä¸º\"æœ¬åè®®\"ï¼‰æ˜¯æˆ‘ä»¬ä¸ºæ‚¨æä¾›PennyNoteæœåŠ¡æ‰€ä¾æ®çš„æ¡æ¬¾ï¼Œä¸å¯åˆ†å‰²ï¼Œæ‚¨éœ€åŒæ—¶éµå®ˆã€‚ è¯·æ‚¨ä»”ç»†é˜…è¯»æœ¬åè®®çš„å…¨éƒ¨å†…å®¹ï¼Œç‰¹åˆ«æ˜¯å­—ä½“åŠ ç²—éƒ¨åˆ†ã€‚ å¦‚æ‚¨å¯¹æœ¬åè®®å†…å®¹åŠé¡µé¢æç¤ºä¿¡æ¯æœ‰ç–‘é—®ï¼Œè¯·å‹¿è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚å¦‚æ‚¨ä½¿ç”¨PennyNoteæœåŠ¡å³è§†ä¸ºæ‚¨å·²é˜…è¯»å¹¶åŒæ„æœ¬åè®®çš„çº¦æŸã€‚ å¦‚æœæ‚¨ä¸åŒæ„æœ¬åè®®çš„ä»»æ„å†…å®¹ï¼Œæˆ–æ— æ³•å‡†ç¡®ç†è§£æ¡æ¬¾å†…å®¹ï¼Œè¯·åœæ­¢ä½¿ç”¨ï¼Œä¸è¦è¿›è¡Œåç»­æ“ä½œã€‚ 3. ä½¿ç”¨æœ¬æœåŠ¡çš„è¦æ±‚ 3.1 æ‚¨å…·å¤‡å®Œå…¨æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œæ–¹å¯ä½¿ç”¨PennyNoteæœåŠ¡ï¼Œè‹¥æ‚¨ä¸ºæ— æ°‘äº‹è¡Œä¸ºèƒ½åŠ›æˆ–ä¸ºé™åˆ¶æ°‘äº‹è¡Œä¸ºèƒ½åŠ›ï¼Œè¯·å‘ŠçŸ¥æ‚¨çš„ç›‘æŠ¤äººï¼Œåœ¨æ‚¨ç›‘æŠ¤äººçš„æŒ‡å¯¼ä¸‹é˜…è¯»æœ¬åè®®ï¼Œå¹¶åœ¨å–å¾—æ‚¨ç›‘æŠ¤äººåŒæ„çš„å‰æä¸‹ä½¿ç”¨PennyNoteæœåŠ¡ï¼› 3.2 æ‚¨æ˜ç¡®å£°æ˜å’Œä¿è¯ï¼šæ‚¨å…·å¤‡è¶³å¤Ÿçš„æ³•å¾‹æƒåˆ©æˆ–æˆæƒæ¥ç­¾ç½²å’Œå±¥è¡Œæœ¬åè®®ï¼›æ‚¨å¯¹äºæœ¬åè®®çš„ç­¾ç½²å’Œå±¥è¡Œä¸ä¼šå¯¹æ‚¨é¡»å±¥è¡Œçš„ä»»ä½•å…¶ä»–åè®®ã€å®‰æ’é€ æˆå†²çªæˆ–å¯¼è‡´è¿çº¦ï¼› 3.3 å¦‚æ‚¨æ‰€å±çš„å›½å®¶æˆ–åœ°åŒºæ’é™¤æœ¬åè®®çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ï¼Œåˆ™æ‚¨åº”ç«‹å³åœæ­¢ä½¿ç”¨PennyNoteæœåŠ¡ï¼Œå¦åˆ™ï¼Œæ‚¨ç»§ç»­ä½¿ç”¨PennyNoteæœåŠ¡è§†ä¸ºæ‚¨åŒæ„æ‰¿æ‹…ç›¸å…³çš„æ³•å¾‹é£é™©æˆ–æ³•å¾‹è´£ä»»ã€‚ 4. æœåŠ¡å†…å®¹ PennyNoteæ˜¯æˆ‘ä»¬é€šè¿‡äº’è”ç½‘ï¼ˆå«ç§»åŠ¨äº’è”ç½‘ï¼‰ä¸ºæ‚¨æä¾›çš„æ™ºèƒ½è®°è´¦ç†è´¢æœåŠ¡å¹³å°ï¼Œæ‚¨å¯é€šè¿‡è¯¥å¹³å°äº«å—ä»¥ä¸‹æœåŠ¡ï¼š 4.1 è´¦å•ç®¡ç†æœåŠ¡ï¼šè®°å½•ã€ç¼–è¾‘ã€åˆ é™¤ä¸ªäººæ”¶æ”¯è´¦å•ï¼Œæ”¯æŒå¤šç§åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†ï¼› 4.2 è´¦æˆ·ç®¡ç†æœåŠ¡ï¼šç®¡ç†ä¸ªäººè´¢åŠ¡è´¦æˆ·ï¼ŒåŒ…æ‹¬ç°é‡‘ã€é“¶è¡Œå¡ã€ä¿¡ç”¨å¡ç­‰å¤šç§è´¦æˆ·ç±»å‹ï¼› 4.3 ç»Ÿè®¡åˆ†ææœåŠ¡ï¼šæä¾›æ”¶æ”¯ç»Ÿè®¡ã€è¶‹åŠ¿åˆ†æã€å›¾è¡¨å±•ç¤ºç­‰è´¢åŠ¡åˆ†æåŠŸèƒ½ï¼› 4.4 æ•°æ®åŒæ­¥æœåŠ¡ï¼šæ”¯æŒæœ¬åœ°æ•°æ®å­˜å‚¨å’Œäº‘ç«¯æ•°æ®åŒæ­¥ï¼Œç¡®ä¿æ•°æ®å®‰å…¨å¤‡ä»½ï¼› 4.5 å…¶ä»–å¢å€¼æœåŠ¡ï¼šåŒ…æ‹¬æ•°æ®å¯¼å‡ºã€æŠ¥è¡¨ç”Ÿæˆç­‰è¾…åŠ©åŠŸèƒ½ã€‚ 5. ç”¨æˆ·ä½¿ç”¨è§„åˆ™ 5.1 æ‚¨åœ¨ä½¿ç”¨PennyNoteæ—¶ï¼Œè¯·ç¡®ä¿è¾“å…¥çš„è´¦å•ä¿¡æ¯çœŸå®ã€å‡†ç¡®ï¼› 5.2 æ‚¨åº”å¦¥å–„ä¿ç®¡æ‚¨çš„è®¾å¤‡ï¼Œé¿å…ä»–äººæœªç»æˆæƒä½¿ç”¨æ‚¨çš„è®°è´¦æ•°æ®ï¼› 5.3 æ‚¨ç†è§£å¹¶åŒæ„ï¼ŒPennyNoteä»…ä½œä¸ºè®°è´¦å·¥å…·ï¼Œä¸æä¾›æŠ•èµ„å»ºè®®ï¼› 5.4 è¯·å‹¿æ¶æ„åˆ·å–æˆ–æ»¥ç”¨æœåŠ¡åŠŸèƒ½ï¼Œå½±å“å…¶ä»–ç”¨æˆ·æ­£å¸¸ä½¿ç”¨ã€‚ 6. å…è´£å£°æ˜ æˆ‘ä»¬åŸºäºäº’è”ç½‘æä¾›æœåŠ¡ï¼Œç”±äºç½‘ç»œæ•…éšœã€ç³»ç»Ÿç»´æŠ¤ç­‰åŸå› ï¼Œå¯èƒ½å¯¼è‡´PennyNoteæœåŠ¡æš‚æ—¶ä¸­æ–­ï¼Œæˆ‘ä»¬å°†å°½åŠ›æ¢å¤æ­£å¸¸æœåŠ¡ã€‚ æˆ‘ä»¬å¯¹ä»¥ä¸‹æƒ…å½¢ä¸æ‰¿æ‹…è´£ä»»ï¼š ï¼ˆ1ï¼‰ ç½‘ç»œæ•…éšœæˆ–ç³»ç»Ÿç»´æŠ¤å¯¼è‡´çš„æœåŠ¡ä¸­æ–­ï¼› ï¼ˆ2ï¼‰ æ‚¨çš„è®¾å¤‡æˆ–ç½‘ç»œç¯å¢ƒé—®é¢˜ï¼› ï¼ˆ3ï¼‰ æ‚¨æ“ä½œä¸å½“å¯¼è‡´çš„æ•°æ®é—®é¢˜ï¼› ï¼ˆ4ï¼‰ å…¶ä»–æˆ‘ä»¬æ— æ³•æ§åˆ¶çš„æƒ…å½¢ã€‚ 7. ç”¨æˆ·ç¦æ­¢æ€§è§„å®š æ‚¨åœ¨ä½¿ç”¨PennyNoteæ—¶ï¼Œè¯·éµå®ˆä»¥ä¸‹è§„å®šï¼š ï¼ˆ1ï¼‰ ä¸å¾—æ¶æ„åˆ·å–æˆ–æ»¥ç”¨æœåŠ¡åŠŸèƒ½ï¼› ï¼ˆ2ï¼‰ ä¸å¾—åˆ©ç”¨æœ¬è½¯ä»¶è¿›è¡Œä»»ä½•è¿æ³•æ´»åŠ¨ï¼› å¦‚å› æ‚¨è¿åä¸Šè¿°è§„å®šï¼Œæˆ‘ä»¬æœ‰æƒæš‚åœæˆ–ç»ˆæ­¢ä¸ºæ‚¨æä¾›æœåŠ¡ã€‚ 8. å¯¹æœ¬åè®®çš„ä¿®è®¢ æˆ‘ä»¬æœ‰æƒåœ¨å¿…è¦æ—¶ä¿®æ”¹æœ¬åè®®æ¡æ¬¾ï¼Œæ‚¨å¯ä»¥åœ¨PennyNoteçš„æœ€æ–°ç‰ˆæœ¬ä¸­æŸ¥é˜…ç›¸å…³åè®®æ¡æ¬¾ã€‚ æ›´æ–°åçš„åè®®æ¡æ¬¾ä¸€æ—¦å…¬å¸ƒå³ä»£æ›¿åŸæ¥çš„åè®®æ¡æ¬¾ï¼Œæˆ‘ä»¬ä¼šåœ¨æœåŠ¡é¡µé¢ä¸ŠåŠæ—¶å‘å¸ƒå¯¹æœ¬åè®®çš„å˜æ›´ã€‚è‹¥å¯¹æœ¬åè®®çš„ä¿®è®¢ä¼šä¸¥é‡å½±å“æ‚¨æˆ–ä¸¥é‡é™åˆ¶æ‚¨å¯¹æœ¬æœåŠ¡çš„è®¿é—®æˆ–ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¼šåœ¨å˜æ›´ä¹‹å‰çš„åˆç†æ—¶é—´å†…é€šçŸ¥æ‚¨ã€‚å¯¹äºä¸ºäº†æ»¡è¶³å®‰å…¨ã€æ³•å¾‹æˆ–ç›‘ç®¡è¦æ±‚è€Œå¯¹æœ¬æœåŠ¡ä½œå‡ºçš„ä¿®è®¢ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•æ»¡è¶³å‰è¿°çš„é¢„å‘Šæ—¶é—´è¦æ±‚ï¼Œä½†æˆ‘ä»¬ä¼šå°½å¿«é€šçŸ¥æ‚¨ã€‚ æœ¬åè®®æ¡æ¬¾å˜æ›´åï¼Œå¦‚æœæ‚¨ä¸æ¥å—ä¿®æ”¹åçš„åè®®ï¼Œè¯·ç«‹å³åœæ­¢ä½¿ç”¨æœ¬æœåŠ¡ï¼›å¦‚æœæ‚¨ç»§ç»­è®¿é—®æˆ–ä½¿ç”¨æœ¬æœåŠ¡ï¼Œå³è¢«è§†ä¸ºæ‚¨å·²æ¥å—ä¿®æ”¹åçš„åè®®ã€‚ 9. é€‚ç”¨æ³•å¾‹åŠç®¡è¾– æœ¬åè®®çš„è®¢ç«‹ã€æ‰§è¡Œã€è§£é‡ŠåŠäº‰è®®çš„è§£å†³å‡é€‚ç”¨ä¸­åäººæ°‘å…±å’Œå›½æ³•å¾‹ã€‚ æ‚¨åŒæ„ï¼Œæœ¬åè®®ç­¾è®¢åœ°ä¸ºä¸­å›½åŒ—äº¬å¸‚ã€‚ åœ¨åˆåŒå±¥è¡Œè¿‡ç¨‹ä¸­åŒæ–¹å¦‚å‘ç”Ÿçº çº·ï¼Œåº”åå•†è§£å†³ï¼›åå•†ä¸æˆçš„ï¼ŒåŒæ–¹åº”å‘åè®®ç­¾è®¢åœ°æœ‰ç®¡è¾–æƒçš„äººæ°‘æ³•é™¢ä»¥è¯‰è®¼çš„æ–¹å¼è§£å†³ã€‚ 10. æ•°æ®å®‰å…¨ä¸éšç§ä¿æŠ¤ 10.1 æ•°æ®æ”¶é›†ï¼šæˆ‘ä»¬ä»…æ”¶é›†æ‚¨ä¸»åŠ¨æä¾›çš„è®°è´¦æ•°æ®ï¼Œç”¨äºä¸ºæ‚¨æä¾›è®°è´¦æœåŠ¡ã€‚ 10.2 æ•°æ®å­˜å‚¨ï¼šæ‚¨çš„æ•°æ®å°†å®‰å…¨å­˜å‚¨åœ¨æœ¬åœ°è®¾å¤‡å’Œäº‘ç«¯æœåŠ¡å™¨ä¸­ã€‚ 10.3 æ•°æ®ä½¿ç”¨ï¼šæˆ‘ä»¬ä¸ä¼šå°†æ‚¨çš„ä¸ªäººè´¢åŠ¡æ•°æ®ç”¨äºå…¶ä»–å•†ä¸šç›®çš„æˆ–å‘ç¬¬ä¸‰æ–¹å‡ºå”®ã€‚ 10.4 æ•°æ®åŒæ­¥ï¼šæ‚¨å¯ä»¥é€‰æ‹©æ˜¯å¦å¯ç”¨äº‘ç«¯åŒæ­¥åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®åœ¨å¤šè®¾å¤‡é—´åŒæ­¥ã€‚ 10.5 æ•°æ®åˆ é™¤ï¼šæ‚¨å¯ä»¥éšæ—¶åˆ é™¤æ‚¨çš„è´¦æˆ·å’Œæ•°æ®ï¼Œåˆ é™¤åå°†æ— æ³•æ¢å¤ã€‚ 11. æœåŠ¡ç»ˆæ­¢ 11.1 ç”¨æˆ·ç»ˆæ­¢ï¼šæ‚¨å¯ä»¥éšæ—¶åœæ­¢ä½¿ç”¨PennyNoteæœåŠ¡ã€‚ 11.2 æœåŠ¡ç»ˆæ­¢ï¼šå¦‚æ‚¨è¿åæœ¬åè®®æ¡æ¬¾ï¼Œæˆ‘ä»¬æœ‰æƒæš‚åœæˆ–ç»ˆæ­¢ä¸ºæ‚¨æä¾›æœåŠ¡ã€‚ 12. è”ç³»æˆ‘ä»¬ å¦‚æ‚¨å¯¹æœ¬åè®®æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š é‚®ç®±ï¼šzhanghao9031@outlook.com åœ¨çº¿å®¢æœï¼šé€šè¿‡PennyNoteåº”ç”¨å†…çš„\"è”ç³»æˆ‘ä»¬\"åŠŸèƒ½ åé¦ˆæ¸ é“ï¼šé€šè¿‡åº”ç”¨å†…çš„\"æ„è§åé¦ˆ\"åŠŸèƒ½ æˆ‘ä»¬å°†åœ¨æ”¶åˆ°æ‚¨çš„å’¨è¯¢åå°½å¿«å›å¤ã€‚ * { margin: 0; font-size: 16px; color: rgba(0, 0, 0, 0.9); } body { max-width: 860px; margin: auto; padding: 2rem 2rem 5rem 2rem; } ul { padding: 0; list-style: none; } a { color: #0a59f7; cursor: pointer; text-decoration: none; } #icon { font-size: 0; text-align: center; } #icon svg { width: 4rem; height: 4rem; } #privacyName { margin: 2rem 0 0.5rem; text-align: center; font-size: 18px; } #update-time { text-align: center; span { font-size: 14px; } } .font-secondary { color: rgba(0, 0, 0, 0.6); } .icon-emphasize { color: rgba(10, 89, 247, 1); } h5 { word-break: break-all; margin-top: 3rem; margin-bottom: 1rem; } p { word-break: break-all; line-height: 1.4; } @media (prefers-color-scheme: dark) { body { background-color: #000000; } .font-secondary { color: rgba(255, 255, 255, 0.6); } .icon-emphasize { color: rgba(82, 145, 255, 1); } }"},{"title":"tools","date":"2022-09-01T14:04:23.000Z","updated":"2025-10-16T06:11:36.717Z","comments":true,"path":"tools/index.html","permalink":"http://yournotes.cn/tools/index.html","excerpt":"","text":"å·¥å…· - åœ¨çº¿å½•å± body { margin: 0; padding: 20px; font-family: Arial, sans-serif; } .start-screen-recording-mid { margin: 50px; } .rec-dot { display: inline-block; width: 12px; height: 12px; background-color: red; border-radius: 50%; margin-right: 8px; animation: blink 1.5s infinite; } @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } } åœ¨çº¿å½•å±"},{"title":"wallpaper","date":"2021-04-07T13:38:58.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"Gallery/wallpaper/index.html","permalink":"http://yournotes.cn/Gallery/wallpaper/index.html","excerpt":"","text":""},{"title":"","date":"2025-04-17T08:34:51.956Z","updated":"2025-04-17T08:34:51.956Z","comments":true,"path":"Gallery/eating/index.html","permalink":"http://yournotes.cn/Gallery/eating/index.html","excerpt":"","text":""},{"title":"daily","date":"2022-03-21T01:38:58.000Z","updated":"2025-04-17T08:34:51.956Z","comments":true,"path":"Gallery/daily/index.html","permalink":"http://yournotes.cn/Gallery/daily/index.html","excerpt":"","text":"#article-container .timeline .timeline-item .timeline-item-content { background: #e4f3fd00 !important; } 2022 11-20 07-17 07-10 07-06 07-04 04-09 04-05 03-20"},{"title":"","date":"2025-04-17T08:34:51.956Z","updated":"2025-04-17T08:34:51.956Z","comments":true,"path":"Gallery/Painting/index.html","permalink":"http://yournotes.cn/Gallery/Painting/index.html","excerpt":"","text":""}],"posts":[{"title":"PennyCooking - æ™ºæ…§å¨æˆ¿ä¸é£Ÿè°±ç®¡ç† | ä½¿ç”¨å¸®åŠ©ä¸æŠ€æœ¯æ”¯æŒ","slug":"pennycooking_support","date":"2026-01-12T07:52:06.000Z","updated":"2026-01-12T08:01:52.047Z","comments":true,"path":"2026/01/12/pennycooking_support/","link":"","permalink":"http://yournotes.cn/2026/01/12/pennycooking_support/","excerpt":"","text":"PennyCooking - è®©çƒ¹é¥ªæ›´ç®€å•ã€æ›´æœ‰æ¡ç†æ¬¢è¿ä½¿ç”¨ PennyCookingï¼è¿™æ˜¯ä¸€æ¬¾ä¸“æ³¨äºã€Œé£Ÿè°±ç®¡ç†ã€é£Ÿæè®°å½•ã€ç”¨é¤è®°å½•ã€çš„æ™ºæ…§å¨æˆ¿åº”ç”¨ï¼Œå¸®åŠ©ä½ æŠŠåšèœè¿™ä»¶äº‹ä»â€œä¸´æ—¶æƒ³èµ·â€å˜æˆâ€œéšæ—¶å¯æ‰§è¡Œâ€ã€‚ ğŸ“± åº”ç”¨ç®€ä»‹PennyCooking å¸®ä½ æŠŠå¨æˆ¿é‡Œçš„ä¿¡æ¯æ•´ç†æ¸…æ¥šï¼šæœ‰å“ªäº›é£Ÿè°±ã€å®¶é‡Œæœ‰å“ªäº›é£Ÿæã€æœ€è¿‘åƒäº†ä»€ä¹ˆã€å“ªäº›å¿«è¿‡æœŸã€ä¸‹ä¸€é¡¿åšä»€ä¹ˆã€‚ä½ ä¹Ÿå¯ä»¥å’Œå®¶äººå…±äº«ä¸€ä¸ªâ€œå®¶åº­å¨æˆ¿â€ï¼Œä¸€èµ·ç»´æŠ¤é£Ÿè°±ä¸é£Ÿæåº“å­˜ã€‚ âœ¨ æ ¸å¿ƒåŠŸèƒ½ ğŸ³ é£Ÿè°±ç®¡ç†ï¼šåˆ›å»º&#x2F;ç¼–è¾‘é£Ÿè°±ï¼Œè®°å½•é£Ÿæã€æ­¥éª¤ä¸å›¾ç‰‡ï¼ŒæŒ‰éš¾åº¦ä¸åˆ†ç±»ç®¡ç† ğŸ§Š é£Ÿæ&#x2F;å†°ç®±ç®¡ç†ï¼šè®°å½•åº“å­˜ä¸åˆ†ç±»ï¼Œå‡å°‘é‡å¤è´­ä¹°ä¸æµªè´¹ ğŸ“ ç”¨é¤è®°å½•ï¼šè®°å½•æ¯å¤©åƒäº†ä»€ä¹ˆï¼Œæ–¹ä¾¿å›é¡¾ä¸ç»Ÿè®¡ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­å…±äº«ï¼šåˆ›å»ºå®¶åº­å¨æˆ¿ï¼Œä¸å®¶äººå…±äº«é£Ÿè°±ä¸é£Ÿæï¼ˆé‚€è¯·ç åŠ å…¥ï¼‰ ğŸ”‘ é£Ÿè°±åˆ†äº«ç ï¼šç”Ÿæˆåˆ†äº«ç ï¼ŒæŠŠé£Ÿè°±åˆ†äº«ç»™æœ‹å‹ï¼›è¾“å…¥åˆ†äº«ç å³å¯å¯¼å…¥ ğŸ† æˆå°±ç³»ç»Ÿï¼šé€šè¿‡æ—¥å¸¸ä½¿ç”¨è§£é”ç§°å·&#x2F;å‹‹ç« ï¼Œè®°å½•ä½ çš„æˆé•¿ ğŸ“– ä½¿ç”¨æŒ‡å—ï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰1. åˆ›å»ºæˆ–å¯¼å…¥é£Ÿè°± æ–°å»ºé£Ÿè°±ï¼šæ·»åŠ æ ‡é¢˜ã€é£Ÿæä¸æ­¥éª¤ï¼Œä¿å­˜å³å¯ å¯¼å…¥é£Ÿè°±ï¼šåœ¨â€œå¯¼å…¥&#x2F;æ·»åŠ â€å…¥å£è¾“å…¥ åˆ†äº«ç ï¼Œä¸€é”®å¯¼å…¥ 2. è®°å½•é£Ÿæåº“å­˜ åœ¨â€œé£Ÿæ&#x2F;å†°ç®±â€é¡µé¢æ·»åŠ é£Ÿæ å»ºè®®æŒ‰åˆ†ç±»è®°å½•ï¼ˆè”¬èœ&#x2F;è‚‰ç±»&#x2F;æµ·é²œ&#x2F;è°ƒæ–™ç­‰ï¼‰ï¼Œä¾¿äºæŸ¥æ‰¾ä¸æ•´ç† 3. è®°å½•ç”¨é¤ åœ¨â€œç”¨é¤è®°å½•â€ä¸­è®°å½•ä½ å½“å¤©åƒäº†ä»€ä¹ˆ ç”¨äºå›é¡¾é¥®é£Ÿä¹ æƒ¯ï¼Œä¹Ÿæ–¹ä¾¿ä»¥åå¤åˆ»å¥½åƒçš„é‚£ä¸€é¤ 4. å®¶åº­å…±äº«ï¼ˆå®¶åº­å¨æˆ¿ï¼‰ åˆ›å»ºå®¶åº­å¨æˆ¿åï¼Œä½ çš„é£Ÿè°±ä¸é£Ÿæåº“å¯ä»¥é‚€è¯·å®¶äººä¸€èµ·ç»´æŠ¤ å®¶äººé€šè¿‡é‚€è¯·ç åŠ å…¥åï¼Œå¯å…±åŒç¼–è¾‘å…±äº«æ•°æ® â“ å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰1) åˆ†äº«ç æ˜¯ä»€ä¹ˆï¼Ÿå®‰å…¨å—ï¼Ÿåˆ†äº«ç ç”¨äºè·¨ç”¨æˆ·åˆ†äº«ä¸å¯¼å…¥é£Ÿè°±ã€‚å¯¼å…¥åä¼šåœ¨ä½ çš„è´¦å·&#x2F;æœ¬åœ°ç”Ÿæˆä¸€ä»½æ–°çš„é£Ÿè°±æ•°æ®ï¼Œä¾¿äºä½ åç»­è‡ªç”±ä¿®æ”¹ã€‚ 2) æ¢æ‰‹æœºåæ•°æ®ä¼šä¸¢å—ï¼Ÿå¦‚æœä½ ä½¿ç”¨ç™»å½•ä¸åŒæ­¥åŠŸèƒ½ï¼Œæ¢è®¾å¤‡åç™»å½•å³å¯æ¢å¤æ•°æ®ã€‚è‹¥ä»…ç¦»çº¿ä½¿ç”¨ï¼Œåˆ™æ•°æ®ä¿å­˜åœ¨è®¾å¤‡æœ¬åœ°ï¼ˆå»ºè®®å®šæœŸå¤‡ä»½ï¼‰ã€‚ 3) å®¶åº­å…±äº«é‡Œï¼Œè°èƒ½çœ‹åˆ°æˆ‘çš„æ•°æ®ï¼Ÿå®¶åº­å…±äº«åªé’ˆå¯¹ä½ åŠ å…¥çš„â€œå®¶åº­å¨æˆ¿â€æ•°æ®ã€‚ä½ çš„ä¸ªäººæ•°æ®ä¸ç”¨é¤è®°å½•é»˜è®¤ä»å½’ä½ ä¸ªäººç®¡ç†ï¼ˆä»¥åº”ç”¨å†…å®é™…åŠŸèƒ½ä¸ºå‡†ï¼‰ã€‚ 4) ä¼šå‘˜è´­ä¹°åæ€ä¹ˆæ¢å¤ï¼Ÿåœ¨ iOS ä¸Šé€šå¸¸å¯ä»¥é€šè¿‡ â€œæ¢å¤è´­ä¹° &#x2F; Restore Purchasesâ€ï¼ˆå¦‚æœåº”ç”¨å†…æä¾›ï¼‰æˆ–é‡æ–°ç™»å½•åŒä¸€ Apple ID æ¥æ¢å¤æƒç›Šã€‚ 5) å¦‚ä½•å–æ¶ˆè®¢é˜…ï¼Ÿåœ¨ iPhone&#x2F;iPadï¼š æ‰“å¼€ è®¾ç½® â†’ ç‚¹å‡»ä½ çš„ Apple ID â†’ è®¢é˜… â†’ æ‰¾åˆ° PennyCooking â†’ å–æ¶ˆè®¢é˜… å–æ¶ˆååœ¨å½“å‰è®¡è´¹å‘¨æœŸç»“æŸå‰ä»å¯ä½¿ç”¨æƒç›Šï¼Œå…·ä½“ä»¥ Apple çš„è®¢é˜…è§„åˆ™ä¸ºå‡†ã€‚ ğŸ’³ è®¢é˜…ä¸ä»˜è´¹è¯´æ˜PennyCooking å¯èƒ½æä¾›ä¸åŒçš„ä¼šå‘˜é€‰é¡¹ï¼ˆå¦‚æœˆåº¦&#x2F;å¹´åº¦&#x2F;æ°¸ä¹…ï¼‰ã€‚ä»·æ ¼ä»¥ App Store å±•ç¤ºä¸ºå‡†ã€‚ è®¢é˜…ä¼šåœ¨åˆ°æœŸå‰è‡ªåŠ¨ç»­è®¢ï¼ˆé™¤éæå‰å–æ¶ˆï¼‰ è´­ä¹°ä¸ç»­è®¢ç”± Apple å¤„ç†å¹¶åœ¨ä½ çš„ Apple ID ä¸­ç®¡ç† ğŸ”’ éšç§è¯´æ˜æˆ‘ä»¬é‡è§†ä½ çš„éšç§ä¸æ•°æ®å®‰å…¨ï¼š ä»…åœ¨æä¾›æ ¸å¿ƒåŠŸèƒ½æ‰€éœ€èŒƒå›´å†…å¤„ç†æ•°æ® ç™»å½•ä¸åŒæ­¥åŠŸèƒ½éœ€è¦ç½‘ç»œè¿æ¥ è‹¥ä½ ä¸ä½¿ç”¨ç™»å½•ä¸åŒæ­¥åŠŸèƒ½ï¼Œéƒ¨åˆ†æ•°æ®å¯èƒ½ä»…å­˜å‚¨åœ¨æœ¬æœº å¦‚éœ€éšç§ç›¸å…³å’¨è¯¢æˆ–æ•°æ®å¤„ç†è¯·æ±‚ï¼Œè¯·é€šè¿‡ä¸‹æ–¹é‚®ç®±è”ç³»ã€‚ ğŸ§¾ è´¦æˆ·ä¸æ•°æ®åˆ é™¤ç”³è¯·å¦‚ä½ å¸Œæœ›åˆ é™¤è´¦æˆ·æˆ–æ¸…é™¤äº‘ç«¯æ•°æ®ï¼Œè¯·é‚®ä»¶è”ç³»å¹¶æä¾›ï¼š è´¦å·ï¼ˆå¦‚æ³¨å†Œé‚®ç®±&#x2F;æ‰‹æœºå·ï¼ŒæŒ‰å®é™…æƒ…å†µï¼‰ ä½ çš„è¯·æ±‚ï¼ˆåˆ é™¤è´¦æˆ·&#x2F;åˆ é™¤äº‘ç«¯æ•°æ®&#x2F;å¯¼å‡ºæ•°æ®ç­‰ï¼‰ è®¾å¤‡ä¸åº”ç”¨ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ æˆ‘ä»¬å°†åœ¨åˆç†æ—¶é—´å†…å¤„ç†ä½ çš„è¯·æ±‚ã€‚ ğŸ’¬ è”ç³»ä¸åé¦ˆå¦‚ä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬ï¼š é‚®ç®±ï¼šzhanghao9031@outlook.com åé¦ˆï¼šä¹Ÿå¯ä»¥åœ¨æœ¬æ–‡ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€ï¼ˆå¦‚æœä½ å¼€å¯äº†è¯„è®ºï¼‰ ä¸ºäº†æ›´å¿«å®šä½é—®é¢˜ï¼Œå»ºè®®ä½ æä¾›ï¼š è®¾å¤‡å‹å·ä¸ iOS ç‰ˆæœ¬ åº”ç”¨ç‰ˆæœ¬å· é—®é¢˜æè¿°ä¸å¤ç°æ­¥éª¤ æˆªå›¾&#x2F;å½•å±ï¼ˆå¦‚æ–¹ä¾¿ï¼‰ ğŸ“± ç³»ç»Ÿè¦æ±‚ iOSï¼šiOS 13.0 åŠä»¥ä¸Šç‰ˆæœ¬ æœ€åæ›´æ–°æ—¶é—´ï¼š2026å¹´01æœˆ12æ—¥","categories":[{"name":"ç‹¬ç«‹åº”ç”¨","slug":"ç‹¬ç«‹åº”ç”¨","permalink":"http://yournotes.cn/categories/%E7%8B%AC%E7%AB%8B%E5%BA%94%E7%94%A8/"}],"tags":[{"name":"PennyCooking","slug":"PennyCooking","permalink":"http://yournotes.cn/tags/PennyCooking/"},{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"http://yournotes.cn/tags/%E9%A3%9F%E8%B0%B1/"},{"name":"çƒ¹é¥ª","slug":"çƒ¹é¥ª","permalink":"http://yournotes.cn/tags/%E7%83%B9%E9%A5%AA/"}]},{"title":"PennyNote - æ™ºèƒ½è®°è´¦åº”ç”¨ | ä½¿ç”¨å¸®åŠ©ä¸æŠ€æœ¯æ”¯æŒ","slug":"pennynote_support","date":"2025-10-15T16:00:00.000Z","updated":"2026-01-12T07:55:46.193Z","comments":true,"path":"2025/10/16/pennynote_support/","link":"","permalink":"http://yournotes.cn/2025/10/16/pennynote_support/","excerpt":"","text":"PennyNote - è®©è®°è´¦å˜å¾—ç®€å•æœ‰è¶£ ğŸ’°æ¬¢è¿ä½¿ç”¨ PennyNoteï¼è¿™æ˜¯ä¸€æ¬¾è½»æ¾ã€æ™ºèƒ½çš„è®°è´¦åº”ç”¨ï¼Œå¸®åŠ©ä½ è½»æ¾ç®¡ç†æ¯ä¸€ç¬”æ”¶æ”¯ï¼Œè®©è´¢åŠ¡ç®¡ç†å˜å¾—ç®€å•æ˜äº†ã€‚ ğŸ“± åº”ç”¨ç®€ä»‹PennyNote æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ä¸ªäººè´¢åŠ¡ç®¡ç†åº”ç”¨ï¼Œä¸“æ³¨äºæä¾›ç®€æ´ã€é«˜æ•ˆçš„è®°è´¦ä½“éªŒã€‚æ— è®ºæ˜¯æ—¥å¸¸æ¶ˆè´¹ã€è¿˜æ˜¯é¢„ç®—è§„åˆ’ï¼ŒPennyNote éƒ½èƒ½å¸®ä½ æ¸…æ™°æŒæ¡è´¢åŠ¡çŠ¶å†µã€‚ âœ¨ æ ¸å¿ƒåŠŸèƒ½ ğŸ¯ æ™ºèƒ½è®°è´¦ - å¿«é€Ÿè®°å½•æ¯ä¸€ç¬”æ”¶æ”¯ï¼Œæ”¯æŒå¤šç§åˆ†ç±» ğŸ“Š æ•°æ®ç»Ÿè®¡ - ç›´è§‚çš„å›¾è¡¨å±•ç¤ºï¼Œè®©ä½ çš„è´¢åŠ¡çŠ¶å†µä¸€ç›®äº†ç„¶ ğŸ’¡ è´¢åŠ¡åˆ†æ - æ™ºèƒ½åˆ†ææ¶ˆè´¹ä¹ æƒ¯ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç†èµ„é‡‘ ğŸ“… è´¦å•ç®¡ç† - æŒ‰æ—¥æœŸã€åˆ†ç±»æŸ¥çœ‹è´¦å•ï¼Œè½»æ¾å›é¡¾å†å²è®°å½• ğŸ¦ å¤šè´¦æˆ·æ”¯æŒ - ç®¡ç†å¤šä¸ªè´¦æˆ·ï¼Œåˆ†ç±»æ¸…æ™° ğŸ”’ æ•°æ®å®‰å…¨ - æœ¬åœ°å­˜å‚¨ï¼Œä¿æŠ¤ä½ çš„éšç§å®‰å…¨ ğŸ“– ä½¿ç”¨æŒ‡å—å¿«é€Ÿå¼€å§‹ æ·»åŠ è´¦å• ç‚¹å‡»ä¸»é¡µé¢ä¸­é—´çš„â€+â€æŒ‰é’® é€‰æ‹©æ”¶å…¥æˆ–æ”¯å‡º è¾“å…¥é‡‘é¢ã€é€‰æ‹©åˆ†ç±» æ·»åŠ å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰ ç‚¹å‡»ä¿å­˜ å°åŠ©æ‰‹ é•¿å®‰ä¸»é¡µä¸­é—´â€œ+â€æŒ‰é’®è¿›è¡Œè¯­éŸ³äº¤äº’ èŠå¤©é¡µé¢è¿›è¡Œå°åŠ©æ‰‹å¯¹è¯ é€šè¿‡å¿«é€Ÿè¯­éŸ³å’ŒèŠå¤©è¿›è¡Œè®°è´¦ä»¥åŠèŠå¤©åˆ†æ æŸ¥çœ‹ç»Ÿè®¡ åœ¨åº•éƒ¨å¯¼èˆªæ é€‰æ‹©â€ç»Ÿè®¡â€ æŸ¥çœ‹æœˆåº¦ã€å¹´åº¦æ”¶æ”¯æƒ…å†µ åˆ†æå„ç±»åˆ«æ”¯å‡ºå æ¯” ç®¡ç†è´¦æˆ· åœ¨â€æˆ‘çš„â€é¡µé¢ç®¡ç†è´¦æˆ·ä¿¡æ¯ å¯ä»¥åˆ›å»ºå¤šä¸ªè´¦æˆ·åˆ†åˆ«è®°å½• ä¸»è¦åŠŸèƒ½è¯´æ˜ğŸ’¸ è®°è´¦åŠŸèƒ½ æ”¯æŒå¿«é€Ÿè®°å½•æ”¯å‡ºå’Œæ”¶å…¥ ä¸°å¯Œçš„åˆ†ç±»å›¾æ ‡ï¼ˆé¤é¥®ã€è´­ç‰©ã€äº¤é€šç­‰ï¼‰ è‡ªå®šä¹‰åˆ†ç±»å’Œå¤‡æ³¨ æ”¯æŒæ—¥æœŸé€‰æ‹© ğŸ“ˆ æ•°æ®ç»Ÿè®¡ æœˆåº¦æ”¶æ”¯æ±‡æ€» æ”¯å‡ºåˆ†ç±»åˆ†æ æ”¶æ”¯è¶‹åŠ¿å›¾è¡¨ æ—¥å‡æ¶ˆè´¹ç»Ÿè®¡ ğŸ—‚ï¸ è´¦å•ç®¡ç† æŒ‰æ—¶é—´çº¿æŸ¥çœ‹æ‰€æœ‰è´¦å• æ”¯æŒæœç´¢å’Œç­›é€‰ ç¼–è¾‘å’Œåˆ é™¤è´¦å• è´¦å•è¯¦æƒ…æŸ¥çœ‹ â“ å¸¸è§é—®é¢˜ FAQ1. æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿâ€‹ PennyNote å¯ä»¥é€‰æ‹©ç¦»çº¿ä½¿ç”¨æˆ–è€…ç™»å½•ä½¿ç”¨ï¼Œç¦»çº¿æ•°æ®å­˜å‚¨åœ¨ä½ çš„è®¾å¤‡æœ¬åœ°ï¼Œç™»å½•å¯è¿›è¡ŒåŒ æ­¥åˆ°æœåŠ¡å™¨ï¼Œä¾›åœ¨æ–°è®¾å¤‡ç™»å½•åŒæ­¥å·²æœ‰æ•°æ®ã€‚ 2. å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿâ€‹ ç›®å‰ç‰ˆæœ¬æ”¯æŒæœ¬åœ°æ•°æ®å­˜å‚¨ä»¥åŠå¯¼å‡ºã€‚å»ºè®®å®šæœŸä½¿ç”¨ç³»ç»ŸåŒæ­¥åŠŸèƒ½æˆ–è€…å¯¼å‡ºã€‚ 3. å¦‚ä½•ä¿®æ”¹æˆ–åˆ é™¤è´¦å•ï¼Ÿâ€‹ åœ¨è´¦å•åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”è´¦å•ï¼Œå‘å·¦æ»‘åŠ¨å³å¯çœ‹åˆ°åˆ é™¤é€‰é¡¹ï¼Œæˆ–è€…ç‚¹å‡»è´¦å•é¡¹åœ¨è¯¦æƒ…è¿›è¡Œç¼–è¾‘ æˆ–è€…åˆ é™¤ã€‚ ğŸ’¬ è”ç³»ä¸åé¦ˆâ€‹ æˆ‘ä»¬éå¸¸é‡è§†æ‚¨çš„æ„è§å’Œå»ºè®®ï¼å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æœ‰ä»»ä½•å»ºè®®ï¼Œæ¬¢è¿ é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š ğŸ“§ è”ç³»æ–¹å¼ é‚®ç®±ï¼šzhang hao9031@outlook.com åé¦ˆæ¸ é“ï¼šåœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä¼šåŠæ—¶å›å¤ ğŸ› é—®é¢˜åé¦ˆâ€‹ å¦‚æœé‡åˆ°Bugæˆ–æŠ€æœ¯é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š è®¾å¤‡å‹å·å’Œç³»ç»Ÿç‰ˆæœ¬ åº”ç”¨ç‰ˆæœ¬å· é—®é¢˜è¯¦ç»†æè¿° é‡ç°æ­¥éª¤ï¼ˆå¦‚æœå¯èƒ½ï¼‰ ğŸ‰ æ›´æ–°æ—¥å¿—Version 1.0 ğŸŠ é¦–æ¬¡å‘å¸ƒ âœ¨ åŸºç¡€è®°è´¦åŠŸèƒ½ ğŸ“Š æ•°æ®ç»Ÿè®¡ä¸åˆ†æ ğŸ¨ ç¾è§‚çš„ç”¨æˆ·ç•Œé¢ ğŸ”’ æœ¬åœ°æ•°æ®å­˜å‚¨ ğŸ“± ä¸‹è½½ä¸æ”¯æŒ å¹³å°æ”¯æŒï¼šiOS 13.0 åŠä»¥ä¸Šç‰ˆæœ¬ åº”ç”¨å¤§å°ï¼šçº¦ 60 MB ä»·æ ¼ï¼šå…è´¹ â€‹ æ„Ÿè°¢æ‚¨é€‰æ‹© PennyNoteï¼è®©æˆ‘ä»¬ä¸€èµ·å¼€å¯æ™ºèƒ½è®°è´¦ä¹‹æ—…ï¼ğŸ’ª ğŸ’¡ å°è´´å£«ï¼šå…»æˆæ¯å¤©è®°è´¦çš„ä¹ æƒ¯ï¼Œäº†è§£è‡ªå·±çš„æ¶ˆè´¹æ¨¡å¼ï¼Œæ˜¯ç†è´¢çš„ç¬¬ä¸€æ­¥ï¼ â€‹ æœ€åæ›´æ–°æ—¶é—´ï¼š2025å¹´10æœˆ16æ—¥","categories":[{"name":"ç‹¬ç«‹åº”ç”¨","slug":"ç‹¬ç«‹åº”ç”¨","permalink":"http://yournotes.cn/categories/%E7%8B%AC%E7%AB%8B%E5%BA%94%E7%94%A8/"}],"tags":[{"name":"PennyNote","slug":"PennyNote","permalink":"http://yournotes.cn/tags/PennyNote/"},{"name":"è®°è´¦","slug":"è®°è´¦","permalink":"http://yournotes.cn/tags/%E8%AE%B0%E8%B4%A6/"}]},{"title":"Langchainæ¥å…¥LlamaIndex Retriever","slug":"Langchainæ¥å…¥LlamaIndex Retriever","date":"2025-03-26T09:56:47.000Z","updated":"2025-04-17T09:22:39.297Z","comments":true,"path":"2025/03/26/Langchainæ¥å…¥LlamaIndex Retriever/","link":"","permalink":"http://yournotes.cn/2025/03/26/Langchain%E6%8E%A5%E5%85%A5LlamaIndex%20Retriever/","excerpt":"","text":"å‰è¨€Langchainå’ŒLlamaIndexéƒ½æ˜¯åœ¨ æ„å»ºLLMåº”ç”¨å½“ä¸­æœ€å¸¸ç”¨çš„ä¸¤ä¸ªåº“ï¼Œä½†æ˜¯ä»–ä»¬çš„ä¾§é‡ç‚¹ä¸ä¸€æ ·ï¼š Langchainä¾§é‡äºæ„å»ºæ›´å¤æ‚çš„LLMåº”ç”¨æµç¨‹ï¼Œå› ä¸ºè¶³å¤Ÿè‡ªå®šä¹‰ï¼Œå¸®ä½ è§£å†³äº†å›´ç»•å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„åŸºç¡€çš„è„æ´»ã€‚ LlamaIndexæ˜¯å¯ä»¥æ›´å¿«é€Ÿçš„åŸºäºæ–‡æ¡£è¿›è¡Œé—®ç­”ï¼Œå°è£…åº¦æ›´é«˜ï¼Œä¾§é‡ç‚¹åœ¨äºå¿«é€Ÿé›†æˆæ•°æ®å’Œå¤§æ¨¡å‹ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºä¸€ä¸ªRAGç³»ç»Ÿã€‚ ä¸ºä»€ä¹ˆè¦é‡‡ç”¨Langchainå’ŒLlamaIndexç›¸ç»“åˆçš„æ–¹å¼ï¼Œå› ä¸ºLangchainæ›´ååŸºç¡€å±‚å¯ä»¥å¾ˆæ–¹ä¾¿æ‰©å±•æˆ–è€…å¯¹æ¥å…¶ä»–æœåŠ¡ï¼Œå› æ­¤æ•´ä¸ªå¤§æ¨¡å‹çš„ç¼–æ’äº¤äº’ä¾ç„¶ç”±Langchainè¿›è¡Œï¼Œä½†æ˜¯LlamaIndexæ“…é•¿ä»€ä¹ˆï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯æ–‡æ¡£çš„åŠ è½½å’Œæ£€ç´¢ï¼Œé™¤äº†å®˜æ–¹æä¾›çš„ä¸€äº›åŸºç¡€åŠ è½½åº“æˆ–è€…æ£€ç´¢å™¨ï¼ŒèƒŒåè¿˜æœ‰ä¸€ä¸ªLlamaHubçš„ç¤¾åŒºåº“ã€‚æä¾›äº†æ›´å¤šçš„è§£æå™¨æˆ–è€…æ£€ç´¢å™¨ï¼Œå¯ä»¥æ–¹ä¾¿æ¥å…¥LlamaIndexä½¿ç”¨ã€‚ é‚£ä¹ˆç°åœ¨æ€è·¯å¾ˆæ˜ç¡®ï¼Œæ•´ä¸ªå¤§æ¨¡å‹åº”ç”¨çš„é“¾è·¯æµç¨‹ç”±Langchainæ„å»ºï¼ŒåŒ…æ‹¬æç¤ºè¯ã€åŒ…æ‹¬å¯¹å¤§æ¨¡å‹è¿›è¡Œäº¤äº’ã€åŒ…æ‹¬åç»­å„ç§å„æ ·çš„åŠŸèƒ½ï¼Œè€Œé“¾è·¯ä¸­å¦‚æœæœ‰éœ€è¦æŸ¥æ‰¾çŸ¥è¯†åº“ï¼ˆæˆ–è€…æ„å»ºçŸ¥è¯†åº“ï¼‰ï¼Œç”±LlamaIndexè¿›è¡Œå¤„ç†ã€‚å› æ­¤å¯èƒ½éœ€è¦æŠŠLlamaIndexçš„æ£€ç´¢å™¨åŒ…æ‹¬æ£€ç´¢è¿‡ç¨‹ï¼Œå¯¹æ¥åˆ°Langchainçš„æ£€ç´¢å™¨ç±»å‹å½“ä¸­ã€‚ å®ç°é¦–å…ˆæˆ‘ä»¬ä¾ç„¶æ˜¯é€šè¿‡LlamaIndexæ„å»ºç´¢å¼•ï¼Œç„¶åç”Ÿæˆæ£€ç´¢å™¨ã€‚ ç¬¬äºŒæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰ç±»æ¥ç»§æ‰¿Langchainçš„æ£€ç´¢å™¨åŸºç±»ï¼Œé€šè¿‡æˆ‘ä»¬çš„LlamaIndexæ¥å®ç°å®ƒçš„æ–¹æ³•ï¼Œå¹¶ä¸”ä»¥Langchainçš„æ–‡æ¡£ç±»å‹è¿”å› è‡ªå®šä¹‰Langchainæ£€ç´¢å™¨123456789101112131415161718192021222324252627282930313233343536373839from typing import Any, Listfrom pydantic import Fieldfrom langchain_core.retrievers import BaseRetrieverfrom langchain_core.documents import Document as LangchainDocumentfrom config.config import SIMILARITY_TOP_Kfrom logger import get_loggerlogger = get_logger(__name__)class LlamaIndexRetriever(BaseRetriever): index_retriever: Any = Field(default=None, description=&quot;LlamaIndex retriever instance&quot;) def __init__(self, index_retriever: Any, **kwargs): super().__init__(**kwargs) self.index_retriever = index_retriever def _get_relevant_documents(self, query: str) -&gt; List[LangchainDocument]: # æ‰“å°æŸ¥è¯¢æ—¶çš„ç»´åº¦ logger.info(f&quot;æŸ¥è¯¢æ—¶çš„ç»´åº¦: &#123;self.index_retriever._vector_store._faiss_index.d&#125;&quot;) logger.info(f&quot;æŸ¥è¯¢å‘é‡: &#123;self.index_retriever._vector_store._faiss_index.ntotal&#125;&quot;) nodes = self.index_retriever.retrieve(query) logger.info(f&quot;æ£€ç´¢åˆ°çš„èŠ‚ç‚¹æ•°é‡: &#123;len(nodes)&#125;&quot;) return [ LangchainDocument( page_content=node.text, metadata=node.metadata ) for node in nodes ] async def _aget_relevant_documents(self, query: str) -&gt; List[LangchainDocument]: return self._get_relevant_documents(query)def get_retriever(index): &quot;&quot;&quot;åˆ›å»ºæ£€ç´¢å™¨&quot;&quot;&quot; index_retriever = index.as_retriever(similarity_top_k=SIMILARITY_TOP_K) return LlamaIndexRetriever(index_retriever=index_retriever) æ„å»ºæ£€ç´¢&amp;é—®ç­”é“¾ç®€å•æ„å»ºé€šè¿‡å‰é¢è·å–åˆ°äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ£€ç´¢å™¨ï¼Œå¯ä»¥é€šè¿‡from_chain_type()çš„æ–¹å¼æ„å»ºchain 1234567ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ä¸­æ–‡åŠ©æ‰‹å‚è€ƒèµ„æ–™ï¼š&#123;context&#125;è¯·æ ¹æ®å‚è€ƒèµ„æ–™ï¼Œå‡†ç¡®è‡ªç„¶çš„å›ç­”ç”¨æˆ·å½“å‰çš„é—®é¢˜ï¼š&#123;query&#125; 12345678# å•queryäº¤äº’qa_chain = RetrievalQA.from_chain_type( llm=llm, retriever=retriever, chain_type=&quot;stuff&quot;, chain_type_kwargs=&#123;&quot;prompt&quot;: prompt_template&#125;, return_source_documents=True) 1qa_chain.invoke(&#123;&quot;query&quot;:&quot;ä½ å¥½&quot;&#125;) è¿™æ ·çš„æ–¹å¼å°±å·²ç»å¯ä»¥ä½¿ç”¨äº†æ•ˆæœè¿˜æŒºå¥½ï¼ŒåŒæ—¶é€šè¿‡ return_source_documents&#x3D;True ï¼Œ èƒ½å¤Ÿè¿”å›æ£€ç´¢è¿‡ç¨‹çš„æ–‡æ¡£åˆ—è¡¨ã€‚ è¿™æ ·çš„æ–¹å¼å±€é™åœ¨äºåªèƒ½å•æ¬¡queryäº¤äº’ï¼Œåœ¨è¿™æ ·çš„æ–¹å¼æƒ…å†µä¸‹ä½ çš„æç¤ºè¯æ¨¡æ¿åªèƒ½æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯context ä¸€ä¸ªéšä¾¿å«å•¥ï¼ˆquestionï¼‰ contextæ˜¯å†…å®šçš„ï¼Œä»–ä¼šæŠŠæ£€ç´¢å™¨çš„èµ„æ–™æ”¾åˆ°contextä¸­ï¼Œä¸éœ€è¦ä½ ä¼ ã€‚å¦å¤–ä¸€ä¸ªå‚æ•°å°±æ˜¯ä½ ä¼ å…¥çš„å«å•¥åéƒ½å¯ä»¥ã€‚ä»–ä¼šæ‹¿å»è¿›è¡Œæ£€ç´¢ï¼Œç„¶åå†è¿›è¡ŒLLMé—®ç­” å½“ä½¿ç”¨è¿™ç§æ–¹å¼æ—¶æˆ‘ä»¬æ— æ³•è¿›è¡Œå¤šè½®å¯¹è¯çš„è¾“å…¥ï¼Œå› ä¸ºåªèƒ½è¾“å…¥ä¸€ä¸ªquery. å®ƒæ—¢è¿›è¡Œæ£€ç´¢ä¹Ÿè¿›è¡Œé—®ç­”. æµ“ç¼©ä¸Šä¸‹æ–‡æ„å»º123456789101112131415161718192021222324# å¤šqueryä½†æ˜¯æµ“ç¼©ä¸Šä¸‹æ–‡# æ„å»ºèŠå¤© Promptchat_prompt = ChatPromptTemplate.from_messages([ SystemMessage(content=&#x27;&#x27;&#x27; ## ä½ çš„è§’è‰² ä½ æ˜¯ä¸€æ™ºèƒ½ä¸­æ–‡åŠ©æ‰‹ ## ä½ çš„ä»»åŠ¡ ä»¥äº²åˆ‡ä¸“ä¸šçš„è¯­æ°”å®Œæˆä»¥ä¸‹èŒè´£ï¼šxxx ## çŸ¥è¯†åº“ ä»¥ä¸‹æ˜¯æŸ¥è¯¢æ‰€å¾—åˆ°çš„çŸ¥è¯†åº“å†…å®¹ï¼š\\n &#123;conntent&#125; &#x27;&#x27;&#x27;), HumanMessage(content=&quot;&#123;question&#125;&quot;)])# æ„å»ºé“¾qa_chain = ConversationalRetrievalChain.from_llm( llm=llm, retriever=retriever, condense_question_prompt=chat_prompt, return_source_documents=True) é€šè¿‡ConversationalRetrievalChainçš„æ–¹å¼ï¼Œè™½ç„¶å¯ä»¥ç´¯è®¡æ¶ˆæ¯åˆ—è¡¨ï¼Œä¹Ÿå°±æ›´æ–°chat_promptæ¶ˆæ¯åˆ—è¡¨çš„æ–¹å¼ï¼Œå¯ä»¥ç´¯è®¡å¤šæ¡æ¶ˆæ¯ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼æ˜¯ä¸€ç§æµ“ç¼©çš„æ–¹å¼ï¼Œæ‰€ä»¥è™½ç„¶æ”¯æŒæ¶ˆæ¯å†å²è€Œä¸æ˜¯åªèƒ½å•æ¡ï¼Œä½†æ˜¯æ•ˆæœå¾ˆå·®ã€‚ è‡ªå®šä¹‰æ„å»ºä¸Šé¢éƒ½æ˜¯æ›²çº¿æ•‘å›½ï¼Œæ­£å¸¸æ¥è¯´åº”è¯¥ä¸ä¼šç”¨ï¼Œé€šè¿‡è‡ªå®šä¹‰çš„æ–¹å¼æ‰æ˜¯æœ€ç®€å•çš„ï¼Œä¹Ÿæ˜¯æ»¡è¶³å¤§å¤šéœ€è¦çš„ 1234567891011121314# ä»æ£€ç´¢å™¨ä¸­æ‹¿ä¸Šä¸‹æ–‡docs = retriever.get_relevant_documents(query)context = &quot;\\n\\n&quot;.join([doc.page_content for doc in docs])qa_llm_chain = LLMChain( llm=llm, prompt=prompt_template)result = qa_llm_chain.invoke(&#123; &quot;query&quot;: query, &quot;chat_history&quot;: chat_history, &quot;context&quot;: context&#125;) é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä¸ç”¨èµ°å®ƒçš„æ£€ç´¢å™¨chainï¼Œå°±ä¸€ä¸ªæ­£å¸¸chainï¼Œå®Œå…¨è‡ªå®šä¹‰æ„å»ºæç¤ºè¯ï¼Œè‡ªå·±è°ƒç”¨æ£€ç´¢å¾—åˆ°æ–‡æ¡£ã€è‡ªå·±ç»„è£…æ¶ˆæ¯åˆ—è¡¨ ã€‚è‡ªå®šä¹‰æ‹¼æ¥åˆ°æç¤ºè¯æ¨¡æ¿å³å¯ã€‚ æ€»ç»“æ­£å¸¸éƒ½æ˜¯ä½¿ç”¨æœ€åçš„æ–¹å¼ï¼Œä¹Ÿä¸éœ€è¦è‡ªå®šä¹‰æ£€ç´¢å™¨ç±»ã€‚ä»–è¿™ç§é…åˆæ£€ç´¢å™¨çš„æ„å»ºé“¾å¯èƒ½æ˜¯å¿«é€Ÿæ„å»ºragçš„æ–¹å¼å§ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šæƒ³è¦è‡ªå®šä¹‰ç¨‹åº¦æˆ–è€…æŒæ§ç¨‹åº¦è¶Šé«˜å°±è¶ŠååŸç”Ÿä¸€ç‚¹å»å†™ã€‚","categories":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"}],"tags":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"}]},{"title":"Langchainæµå¼é—®é¢˜","slug":"Langchainæµå¼é—®é¢˜","date":"2025-03-25T09:56:47.000Z","updated":"2025-04-17T09:11:59.125Z","comments":true,"path":"2025/03/25/Langchainæµå¼é—®é¢˜/","link":"","permalink":"http://yournotes.cn/2025/03/25/Langchain%E6%B5%81%E5%BC%8F%E9%97%AE%E9%A2%98/","excerpt":"","text":"å‰è¨€æ„å»ºå¥½chainï¼Œæ­£å¸¸runæˆ–è€…invokeæ²¡é—®é¢˜ä½†æ˜¯æµå¼ä¸€ç›´æ˜¯è¿æ¥åç­‰åŠå¤©å•æ¬¡å°±è¾“å‡ºå®Œæ¯•äº† 123456789async for chunk in qa_llm_chain.astream(&#123; &quot;query&quot;: query, &quot;chat_history&quot;: chat_history, &quot;context&quot;: context, &quot;tone&quot;: tone&#125;): # æ‰“å° chunk çš„å†…å®¹å’Œç±»å‹ logger.info(f&quot;chunk type: &#123;type(chunk)&#125;&quot;) logger.info(f&quot;chunk content: &#123;chunk&#125;&quot;) è§£å†³æŒºå¥‡æ€ªçš„ï¼ŒæŒ‰ç†æ¥è¯´åº”è¯¥æ˜¯å¯ä»¥çš„ã€‚ä¸€ç›´å¥½åƒè§£å†³ä¸äº†ï¼Œæœ€ç»ˆæ˜¯é€‰æ‹©ç›´æ¥é€šè¿‡llmè°ƒç”¨ï¼Œè€Œä¸æ˜¯chainçš„æ–¹å¼ 12345678910111213# æ‰‹åŠ¨æ„é€  prompt æ–‡æœ¬prompt_str = prompt_template.format( query=query, chat_history=chat_history, context=context, tone=tone) async for chunk in llm.astream(prompt_str): # æ‰“å° chunk çš„å†…å®¹å’Œç±»å‹ logger.info(f&quot;chunk type: &#123;type(chunk)&#125;&quot;) logger.info(f&quot;chunk content: &#123;chunk&#125;&quot;) æ€»ç»“ç­‰æœ‰æ—¶é—´äº†è¿™å—åœ°æ–¹å†å›æ¥çœ‹çœ‹ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯chainçš„astreamæ˜¯å‡æµå¼ï¼Œè¿˜æ˜¯è¯´ä½¿ç”¨æ–¹å¼ä¸Šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ç›®å‰è§£å†³æ˜¯ç›´æ¥é€šè¿‡llmè°ƒç”¨å°±okäº†ã€‚","categories":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"}],"tags":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"}]},{"title":"RAGé«˜çº§æŠ€æœ¯ä¸æœ€ä½³å®è·µ","slug":"RAGé«˜çº§æŠ€æœ¯ä¸æœ€ä½³å®è·µ","date":"2025-03-23T09:56:47.000Z","updated":"2025-04-17T08:34:52.001Z","comments":true,"path":"2025/03/23/RAGé«˜çº§æŠ€æœ¯ä¸æœ€ä½³å®è·µ/","link":"","permalink":"http://yournotes.cn/2025/03/23/RAG%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/","excerpt":"","text":"RAGæŠ€æœ¯æ ‘![[Pasted image 20250323163322.png]] RAGç ”ç©¶çš„æŠ€æœ¯æ ‘ä¸»è¦æ¶‰åŠé¢„è®­ç»ƒï¼ˆPre-trainingï¼‰- å¾®è°ƒï¼ˆFine-tuningï¼‰- æ¨ç†ï¼ˆInferenceï¼‰ç­‰é˜¶æ®µ éšç€LLMçš„å‡ºç°ï¼ŒRAGçš„ç ”ç©¶æœ€åˆä¾§é‡äºåˆ©ç”¨LLMså¼ºå¤§çš„ä¸Šä¸‹æ–‡å­¦ä¹ èƒ½åŠ›ï¼Œä¸»è¦é›†ä¸­åœ¨æ¨ç†é˜¶æ®µã€‚ éšåè¿›ä¸€æ­¥æ·±å…¥ï¼Œé€æ¸ä¸LLMsçš„æ¨¡å‹å¾®è°ƒé˜¶æ®µæ›´åŠ èåˆã€‚ç ”ç©¶äººå‘˜ä¹Ÿåœ¨æ¢ç´¢é€šè¿‡æ£€ç´¢å¢å¼ºæŠ€æœ¯æ¥æå‡é¢„è®­ç»ƒé˜¶æ®µè¯­è¨€æ¨¡å‹çš„æ€§èƒ½ å›é¡¾NativeRAGè¿‡ç¨‹ï¼šindexingï¼šå¦‚ä½•æ›´å¥½çš„æŠŠçŸ¥è¯†å­˜èµ·æ¥ ï¼ˆåˆ†å‰²ã€embeddingã€å­˜å…¥ï¼‰retrievalï¼šå¦‚ä½•åœ¨å¤§é‡çš„çŸ¥è¯†ä¸­ï¼Œæ‰¾åˆ°ä¸€éƒ¨åˆ†æœ‰ç”¨çš„ï¼Œç»™æ¨¡å‹å‚è€ƒgenerationï¼šå¦‚ä½•ç»“åˆç”¨æˆ·çš„æé—®å’Œæ£€ç´¢çš„çŸ¥è¯†ï¼Œè®©æ¨¡å‹ç”Ÿæˆæœ‰ç”¨çš„ç­”æ¡ˆ Qwen-Agentä¹‹å‰ä½¿ç”¨äº†cozeæˆ–è€…å®Œå…¨è‡ªå·±ç¼–ç å»ä½¿ç”¨äº†RAGï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨Qwen-Agentè¿™æ ·çš„å·¥å…·åº“æ¥æ›´å¥½çš„åº”ç”¨ä¸ŠRAG![[Pasted image 20250319183148.png]] Qwen-Agentæ„å»ºçš„æ™ºèƒ½ä½“åŒ…å«ä¸‰ä¸ªå¤æ‚çš„çº§åˆ«ï¼Œæ¯ä¸€å±‚éƒ½å»ºç«‹åœ¨å‰ä¸€å±‚çš„åŸºç¡€ä¸Šï¼š çº§åˆ«ä¸€ï¼šæ£€ç´¢å¤„ç†å¤§ä¸Šä¸‹æ–‡æ—¶é‡‡ç”¨RAGè¿›è¡Œåˆ†å‰²ï¼ŒæŒ‘æˆ˜åœ¨äºå¦‚ä½•å®šä½æœ€ç›¸å…³çš„å¿«æ­¥éª¤1ï¼šæŒ‡å¯¼èŠå¤©æ¨¡å‹å°†ç”¨æˆ·æŸ¥è¯¢ä¸­çš„æŒ‡ä»¤ä¸éæŒ‡ä»¤ä¿¡æ¯åˆ†å¼€æ­¥éª¤2ï¼šè¦æ±‚èŠå¤©æ¨¡å‹ä»æŸ¥è¯¢çš„éƒ¨åˆ†ä¿¡æ¯æ¨åˆ°å‡ºæ›´å¤šçš„è¯­è¨€å…³é”®å­—æ­¥éª¤3ï¼šè¿ç”¨BM25è¿™ä¸€ä¼ ç»Ÿçš„åŸºäºå…³é”®å­—æ£€ç´¢çš„æ–¹æ³•æ‰¾åˆ°ä¸æå–å…³é”®å­—æœ€ç›¸å…³çš„å— çº§åˆ«äºŒï¼šåˆ†å—é˜…è¯»ç›´æ¥RAGå¾ˆå¿«ï¼Œä½†æ˜¯åœ¨ç›¸å…³å—ä¸ç”¨æˆ·æŸ¥è¯¢çš„å…³é”®è¯é‡å åº¦ä¸è¶³æ—¶å¤±æ•ˆ&#x3D;&gt;å¯¼è‡´è¿™äº›ç›¸å…³çš„å—æœªè¢«æ£€ç´¢åˆ°å°½ç®¡æˆ‘ä»¬ä¼šä½¿ç”¨åˆ°å‘é‡æ£€ç´¢æ¥ç¼“è§£è¿™ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å®é™…æ•ˆæœæœ‰é™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªå±€é™ï¼Œæˆ‘ä»¬é‡‡ç”¨ä¸€ç§æš´åŠ›ç­–ç•¥ï¼š æ­¥éª¤1ï¼šå¯¹äºæ¯ä¸ªchunkè®©èŠå¤©æ¨¡å‹è¯„ä¼°ä¸ç”¨æˆ·æŸ¥è¯¢çš„ç›¸å…³æ€§ï¼Œä¸ç›¸å¹²åˆ™è¾“å‡ºæ— ï¼Œå¦åˆ™è¾“å‡º æ­¥éª¤2ï¼šå–å‡ºé‚£äº›éâ€œæ— â€çš„å¥å­ï¼Œç”¨ä»–ä»¬ä½œä¸ºæœç´¢çš„æŸ¥è¯¢è¯ï¼Œé€šè¿‡BM25åŒ¹é…å‡ºæœ€ç›¸å…³çš„å—ï¼ˆæ€»ç»“æœæ§åˆ¶åœ¨ä¸Šä¸‹æ–‡é™åˆ¶æ•°é‡å†…ï¼‰ æ­¥éª¤3ï¼šåŸºäºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼Œå’Œé€šå¸¸çš„RAGç›¸åŒ çº§åˆ«ä¸‰ï¼šé€æ­¥æ¨ç†åœ¨åŸºäºæ–‡æ¡£çš„é—®é¢˜å›ç­”ä¸­ï¼Œä¸€ä¸ªå…¸å‹çš„æŒ‘æˆ˜æ˜¯å¤šè·³æ¨ç†ã€‚ä¾‹å¦‚ï¼šâ€œä¸ç¬¬äº”äº¤å“æ›²â€åˆ›ä½œä¸åŒä¸€ä¸–çºªçš„äº¤é€šå·¥å…·æ˜¯ä»€ä¹ˆï¼Ÿå®é™…ä¸Šä»–éœ€è¦å…ˆæ‰¾åˆ°ç¬¬äº”äº¤å“æ›²æ˜¯å“ªä¸ªä¸–çºªï¼Ÿè¿™ä¸ªé—®é¢˜è§£å†³åçŸ¥é“æ˜¯åä¹ä¸–çºªï¼Œå†å¯»æ‰¾19ä¸–çºªäº§ç”Ÿäº†ä»€ä¹ˆäº¤é€šå·¥å…·ã€‚å®é™…ä¸Šè¿™æ˜¯ä¸€ä¸ªå¾ªç¯çš„Agentçš„è¿‡ç¨‹ï¼Œç›´åˆ°æœ€ç»ˆå¾—åˆ°ç»“æœ è¯„æµ‹ç»“æœ![[Pasted image 20250319190718.png]] ![[Pasted image 20250319190744.png]] ä»£ç ç¤ºä¾‹https://github.com/Jasper-zh/agi_study/tree/main/embeding/rag/qwen_agent RAFTæ–¹æ³•å…¨ç§°ï¼šRetrieval Augmented Fine Tuning åœ¨RAFTä¹‹å‰æˆ‘ä»¬ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼æ¥è®©å¤§æ¨¡å‹ç¬¦åˆé¢„æœŸï¼š åŸºç¡€çš„RAG Fine-Tuneå¾®è°ƒ å¯¹äºå‰è€…ï¼Œå°±æ˜¯ä¸ç”¨å­¦ä¹ ç›´æ¥ç»™å¤§æ¨¡å‹è¿›è¡Œä¸€ä¸ªå¼€å·è€ƒè¯•ï¼Œå¯ä»¥å‚è€ƒçŸ¥è¯†ï¼›å¯¹äºåè€…å°±æ˜¯å…ˆå»å­¦ä¹ ç„¶åé—­å·è€ƒè¯•ã€‚ é‚£ä¹ˆéƒ½å­˜åœ¨ä¸€äº›ä¼˜ç¼ºç‚¹å¯èƒ½æ˜¯æ•ˆæœä¸Šçš„å¯èƒ½æ˜¯æˆæœ¬ä¸Šçš„ï¼Œé‚£ä¹ˆRAFTå°±æ˜¯ç»“åˆäº†è¿™ä¸¤ç§ã€‚å¸¦ç€å¼€å·çš„æƒ…å†µä¸‹è¿›è¡Œè®­ç»ƒï¼Œè®©å¤§æ¨¡å‹å¯¹çŸ¥è¯†åº“é‡Œé¢çŸ¥è¯†ç›¸å…³çš„æ¦‚å¿µæ›´ç†Ÿæ‚‰ï¼Œç›¸å½“äºä»ç„¶æ˜¯RAGçš„å¼€å·è€ƒè¯•ï¼Œä½†æ˜¯å¯¹äºæ—è¾¹çš„è¯¾æœ¬æ›´ç†Ÿæ‚‰ï¼Œå¯¹äºæŸ¥æ‰¾çš„çŸ¥è¯†åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ›´å‡†ã€‚ ![[Pasted image 20250319164825.png]] ![[Pasted image 20250319165406.png]] å¤§æ¦‚å¯¹äºRAFTè®­ç»ƒçš„è¯ï¼Œæ ·æœ¬æ•°é‡å¯ä»¥ä¸€åƒä¸ªå·®ä¸å¤šäº†ï¼Œå°½é‡åˆ—ä¸¾æ‰€æœ‰åœºæ™¯ç±»å‹çš„ä¾‹å­å¹³å‡ä¸€ç‚¹ RAGé«˜æ•ˆå¬å›æ”¹è¿›æ£€ç´¢ç®—æ³•åˆ©ç”¨çŸ¥è¯†å›¾è°±ä¸­çš„è¯­ä¹‰ä¿¡æ¯å’Œå®ä½“å…³ç³»ï¼Œå¢å¼ºå¯¹æŸ¥è¯¢å’Œæ–‡æ¡£çš„ç†è§£ï¼Œæå‡å¬å›çš„ç›¸å…³æ€§ å¼•å…¥é‡æ’åºï¼ˆRerankingï¼‰é‡æ’åºæ¨¡å‹ï¼šå¯¹å¬å›ç»“æœè¿›è¡Œé‡æ–°æ’åºï¼Œæé«˜é—®é¢˜å’Œæ–‡æ¡£çš„ç›¸å…³æ€§ã€‚å¸¸è§çš„é‡æ’åºæ¨¡å‹æœ‰BGE-Rerankå’ŒCohere Rerank æ··åˆæ£€ç´¢ï¼šç»“åˆå‘é‡æ£€ç´¢å’Œå…³é”®å­—æ£€ç´¢è¿›è¡Œå½’ä¸€åŒ–å¤„ç† ä¼˜åŒ–æŸ¥è¯¢æ‰©å±•ç›¸ä¼¼è¯­ä¹‰æ”¹å†™ï¼šä½¿ç”¨å¤§æ¨¡å‹å°†ç”¨æˆ·é—®é¢˜æ”¹å†™æˆå¤šä¸ªè¯­ä¹‰ç›¸è¿‘çš„æŸ¥è¯¢ï¼Œæé«˜å¬å›å¤šæ ·æ€§ã€‚ä¾‹å¦‚Langchainçš„MultiQueryRetriever åŒå‘æ”¹å†™å°†æŸ¥è¯¢æ”¹æˆæ–‡æ¡£ï¼Œæˆ–è€…å°†æ–‡æ¡£æ”¹æˆæŸ¥è¯¢ï¼Œç¼“è§£çŸ­æ–‡æœ¬å‘é‡åŒ–æ•ˆæœå·®çš„é—®é¢˜![[Pasted image 20250319174149.png]] ç´¢å¼•æ‰©å±• ç¦»æ•£ç´¢å¼•æ‰©å±•ï¼šä½¿ç”¨å…³é”®å­—æŠ½å–ã€å®ä½“è¯†åˆ«ç­‰æŠ€æœ¯ç”Ÿæˆç¦»æ•£ç´¢å¼•ï¼Œä¸å‘é‡æ£€ç´¢äº’è¡¥ï¼Œæé«˜å¬å›å‡†ç¡®æ€§ã€‚ ![[Pasted image 20250319175056.png]] è¿ç»­ç´¢å¼•æ‰©å±•ï¼šç»“åˆå¤šç§å‘é‡æ¨¡å‹ï¼ˆå¦‚OpenAIçš„Adaã€æ™ºæºçš„BGEï¼‰è¿›è¡Œå¤šè·¯å¬å›ï¼Œå–é•¿è¡¥çŸ­ æ··åˆç´¢å¼•å¬å›ï¼šå°†BM25ç­‰ç¦»æ•£ç´¢å¼•ä¸å‘é‡ç´¢å¼•ç»“åˆï¼Œé€šè¿‡Ensemble Retrieverå®ç°æ··åˆå¬å›ï¼Œæå‡å¬å›å¤šæ ·æ€§ Small-to-Bigï¼šä»¥æ–‡æ¡£çš„æ‘˜è¦ä½œä¸ºç´¢å¼•ï¼Œå…ˆæ£€ç´¢å‡ºæ‘˜è¦å†è¡¥å……ä¿¡æ¯ï¼ˆå› ä¸ºç›®å‰å¤§æ¨¡å‹å¯¹äºä¸Šä¸‹æ–‡çš„å°ºå¯¸è¿˜æ˜¯æŒºå¤§çš„ï¼Œæ‰€ä»¥ä¸€ç¯‡å‡ ä¸‡å­—ç»™å¤§æ¨¡å‹è¿›è¡Œæ€»ç»“åˆ†ææ¯”RAGçš„åˆ†å‰²æ›´åŠ æœ‰æ•ˆç‡ï¼Œå› æ­¤å­˜åœ¨è¿™æ ·çš„ç­–ç•¥ç›´æ¥æ£€ç´¢å°è§„æ¨¡çš„å†…å®¹ï¼ŒåŒ¹é…ä¸Šåå¯ä»¥è´´å‡ºå¤§è§„æ¨¡çš„å†…å®¹ï¼‰ä¹Ÿæ˜¯æ¯”è¾ƒä¸é”™çš„ç­–ç•¥ã€‚ GraphRAGä½¿ç”¨çŸ¥è¯†å›¾è°±æ¥æ¨ç†å¤æ‚ä¿¡æ¯æ—¶æ˜¾è‘—æå‡é—®ç­”æ€§èƒ½ï¼Œä½†æ˜¯ç”±äºå‰æœŸéœ€è¦ä¾èµ–å¤§æ¨¡å‹æ¥è¿›è¡Œæ„å»ºå›¾è°±å› æ­¤éœ€è¦å¯¹äºå¤§æ¨¡å‹æœ¬èº«çš„èƒ½åŠ›æœ‰ä¸€å®šçš„è¦æ±‚ä¸”æ¶ˆè€—é‡å¤§ï¼Œè™½ç„¶æ–°ç‰ˆæœ¬å·²ç»å¥½äº†å¾ˆå¤šä½†æ˜¯ä»ç„¶è¿˜æ˜¯æ¶ˆè€—å¾ˆå¤§ï¼Œæ‰€ä»¥éœ€è¦é€‰æ‹©æ€§ä»·æ¯”é«˜ä¸€äº›çš„æ¨¡å‹ã€‚ ä»ç„¶æ˜¯åˆ†ä¸‰ä¸ªæ­¥éª¤ï¼šç´¢å¼•ã€æŸ¥è¯¢ã€å›ç­”ï¼ˆæç¤ºè¯ï¼‰ç´¢å¼•ï¼š é™¤äº†åˆ†å‰²ä¹‹å¤–ï¼Œé¢å¤–ä»åˆ†å‰²å†…å®¹å»åˆ†æå»ºå®ä½“æ¥é€šè¿‡Leidenç®—æ³•æ„å»ºçŸ¥è¯†å›¾è°±ï¼Œæ„å»ºæ¯ä¸ªåˆ†ç±»ç¤¾åŒºä»¥åŠå®ä½“çš„æ‘˜è¦æ€»ç»“æŸ¥è¯¢ï¼š å…¨å±€æœç´¢globalé€šè¿‡æ£€ç´¢åˆ†ç±»å»åŒ¹é…è¿”å›ä¸‹é¢çš„æ‰€æœ‰å®ä½“ã€localå±€éƒ¨æœç´¢ç›´æ¥æœç´¢å®ä½“ã€DRIFTè·å–çš„å®ä½“çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ ï¼›è¿½æ±‚å®Œæ•´çš„ä¿¡æ¯åˆ™é€‰ç”¨å…¨å±€æœç´¢ æœ¬æ¥ç®€å•è¯•ä¸€ä¸‹ç»“æœæŠŠæˆ‘tokenä½™é¢å¹²å®Œäº†ï¼Œä¹Ÿå°±å…­ç¯‡æ–‡æ¡£ã€‚æ„å»ºè¿‡ç¨‹ä¼šç”Ÿæˆä¸€äº›çŸ¥è¯†å›¾è°±çš„è¡¨æ¯”å¦‚å®ä½“ä¿¡æ¯ã€ç¤¾åŒºæŠ¥å‘Šå•¥çš„ ç¤¾åŒºåˆ—è¡¨ ç¤¾åŒºæŠ¥å‘Š æ–‡æ¡£åˆ—è¡¨ å®ä½“åˆ—è¡¨ èŠ‚ç‚¹è¡¨ å…³ç³»å®ä½“è¡¨ åˆ‡åˆ†åŒºå—è¡¨ äºæ˜¯ä¹æˆ‘åˆé€šè¿‡æœ¬åœ°éƒ¨ç½²çš„æ–¹å¼æ¥å¯¹æ¥ï¼Œå¥½åƒæˆ‘çš„ç”µè„‘æ˜¾å¡æœ‰ç‚¹åƒäº†ï¼Œä¸ƒä¸ªæ–‡æœ¬å¤§æ¦‚æ˜¯æœ‰ä¸‰ä¸‡å­—ï¼Œä½“ä¼šåˆ°äº†æ„å»ºçŸ¥è¯†å›¾è°±æ•°æ®çš„è¿‡ç¨‹è¿™ä¹ˆæ…¢ã€‚ä¼°è®¡å¾—ä¸ªæŠŠå°æ—¶å®Œæˆ![[Pasted image 20250326123210.png]] ç”Ÿæˆå®Œåå°±å¯ä»¥åŸºäºçŸ¥è¯†å›¾è°±è¿›è¡ŒRAGé—®ç­”äº† 1graphrag query --root ./input --method local --query &quot;æœ‰å“ªäº›äº§å“å•Šä»‹ç»ä¸€ä¸‹&quot; æ€»ä½“æ¥è¯´è¿™ç§æ–¹å¼ç®—æ˜¯é€šè¿‡ç­–ç•¥æé«˜äº†å¬å›çš„å‡†ç¡®æ€§ä½†éœ€è¦çš„ç®—åŠ›å¾ˆå¤§ æ€»ç»“ç›®å‰æ¥è¯´æ²¡æœ‰å“ªä¸€ç§æ–¹å¼å°±æ˜¯æœ€å¥½ï¼Œä¸€èˆ¬é‡‡ç”¨â€MVPéªŒè¯â†’æ¸è¿›å¢å¼ºâ€è·¯å¾„ï¼šå…ˆç”¨Qwen-Agentæ­å»ºåŸºç¡€æµç¨‹ï¼Œé’ˆå¯¹bad caseé€æ­¥å¼•å…¥RAFTå¾®è°ƒæˆ–GraphRAGç»„ä»¶ï¼ŒåŒæ—¶é€šè¿‡æ£€ç´¢ç®—æ³•ä¼˜åŒ–ï¼ˆå¦‚é‡æ’åº+æ··åˆæ£€ç´¢ï¼‰é™ä½åæœŸè¿­ä»£æˆæœ¬ã€‚æ£€ç´¢ç¯èŠ‚çš„ä¼˜åŒ–ä»æ˜¯æ ¸å¿ƒçªç ´å£ï¼Œæ··åˆæ£€ç´¢ã€æŸ¥è¯¢åŒå‘æ”¹å†™ã€Small-to-Bigç­‰ç­–ç•¥å·²è¯æ˜å±€éƒ¨æœ€ä¼˜è§£çš„å­˜åœ¨ï¼Œä½†å°šæœªå½¢æˆé€šç”¨èŒƒå¼ï¼Œå¯ä»¥æŒç»­å…³æ³¨ã€‚","categories":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"}],"tags":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"}]},{"title":"LlamaIndexå¯¹äºå‘é‡åº“çš„æŒä¹…åŒ–ä¸åŠ è½½","slug":"LlamaIndexå¯¹äºå‘é‡åº“çš„æŒä¹…åŒ–ä¸åŠ è½½","date":"2025-03-19T09:56:47.000Z","updated":"2025-04-17T09:11:45.491Z","comments":true,"path":"2025/03/19/LlamaIndexå¯¹äºå‘é‡åº“çš„æŒä¹…åŒ–ä¸åŠ è½½/","link":"","permalink":"http://yournotes.cn/2025/03/19/LlamaIndex%E5%AF%B9%E4%BA%8E%E5%90%91%E9%87%8F%E5%BA%93%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E4%B8%8E%E5%8A%A0%E8%BD%BD/","excerpt":"","text":"å‰è¨€ä¹‹å‰ä½¿ç”¨LlamaIndexåšRAGç¯èŠ‚çš„æ–‡æ¡£åŠ è½½å’Œæ£€ç´¢ï¼Œä½¿ç”¨Faissä½œä¸ºå‘é‡åº“ã€‚çŸ¥è¯†åº“æ„å»ºè¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ï¼Œå†æ¬¡åŠ è½½è¿›è¡Œæ£€ç´¢æ—¶å‡ºç°ç»´åº¦ä¸åŒ¹é…çš„æƒ…å†µã€‚ 12345678query_result = self._vector_store.query(query, **self._kwargs) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^File &quot;D:\\MySpace\\dev\\python\\3.11\\Lib\\site-packages\\llama_index\\vector_stores\\faiss\\base.py&quot;, line 195, in query dists, indices = self._faiss_index.search( ^^^^^^^^^^^^^^^^^^^^^^^^^File &quot;D:\\MySpace\\dev\\python\\3.11\\Lib\\site-packages\\faiss\\class_wrappers.py&quot;, line 329, in replacement_search assert d == self.d ^^^^^^^^^^^ è¿™ä¸ªæ˜¯ç”±äºLlamaIndexè¿›è¡ŒVectorStoreIndexæŒä¹…åŒ–æ—¶ï¼Œé‡Œé¢çš„è¯åµŒå…¥æ¨¡å‹æ˜¯ä¸ä¼šä¿å­˜çš„ï¼Œ å½“ä»æŒä¹…åŒ–æ–‡ä»¶è¿›è¡ŒåŠ è½½æ—¶ï¼Œä»ç„¶éœ€è¦æ˜¾ç¤ºçš„ä¼ å…¥è¯åµŒå…¥æ¨¡å‹ï¼Œå¦åˆ™ä¼šé‡‡ç”¨é»˜è®¤çš„ç¼–ç æ–¹å¼ï¼Œä¼šå’Œä¹‹å‰å­˜å…¥çš„å‘é‡ç»´åº¦ä¸ä¸€æ · æ„å»ºç´¢å¼•&amp;æŒä¹…åŒ–123456789101112131415161718192021# åˆå§‹åŒ– FAISS å‘é‡å­˜å‚¨# ç”±äºæˆ‘è¿™é‡Œä½¿ç”¨BGE-M3ä½œä¸ºè¯åµŒå…¥æ¨¡å‹ï¼Œæ‰€ä»¥ç»´åº¦è®¾ç½®ä¸ºVECTOR_DIMENSION = 1024faiss_index = IndexFlatL2(VECTOR_DIMENSION) faiss_vector_store = FaissVectorStore(faiss_index=faiss_index)# åˆ›å»ºå­˜å‚¨ä¸Šä¸‹æ–‡ (æ„å»ºç´¢å¼•æ—¶ä¸è¦é…ç½®ç›®å½•)storage_context = StorageContext.from_defaults(vector_store=faiss_vector_store)# åˆ›å»ºç´¢å¼•index = VectorStoreIndex.from_documents( docs, storage_context=storage_context, embed_model=embed_model, show_progress=True)# æŒä¹…åŒ–ç´¢å¼•(é€šè¿‡è¯­æ³•ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå¹¶ä¸åŒ…å«embed_modelï¼Œåªæœ‰storage_context)index.storage_context.persist(persist_dir=str(VECTOR_STORE_PATH01)) æœ¬åœ°å­˜å‚¨åŠ è½½ç´¢å¼•12345678# ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç´¢å¼•... ï¼ˆå¦‚æœæ˜¯ç‰¹å®šçš„å‘é‡åº“ï¼Œå¯èƒ½éœ€è¦å…ˆç”¨å¯¹åº”çš„åº“å»åŠ è½½å‘é‡å­˜å‚¨ï¼‰faiss_vector_store = FaissVectorStore.from_persist_dir(str(VECTOR_STORE_PATH01))storage_context = StorageContext.from_defaults(vector_store=faiss_vector_store, persist_dir=str(VECTOR_STORE_PATH01))# åŠ è½½index é™¤äº†æœ¬åœ°çš„storage_context è¿˜è¦ä¼ å…¥ embed_model (å¦åˆ™æ£€ç´¢æ—¶ä¸çŸ¥é“ç”¨ä»€ä¹ˆå¯¹queryç¼–ç )index = load_index_from_storage(storage_context=storage_context,embed_model=embed_model)","categories":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"}],"tags":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"}]},{"title":"RAGæŠ€æœ¯ä¸åº”ç”¨","slug":"RAGæŠ€æœ¯ä¸åº”ç”¨","date":"2025-03-14T09:56:47.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2025/03/14/RAGæŠ€æœ¯ä¸åº”ç”¨/","link":"","permalink":"http://yournotes.cn/2025/03/14/RAG%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8/","excerpt":"","text":"1ã€å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„ä¸‰ç§æ¨¡å¼é¦–å…ˆè¦æåˆ°è¿›è¡Œå¤§æ¨¡å‹åº”ç”¨è®¾è®¡æ—¶å¯èƒ½ä¼šç”¨åˆ°ä¸‰ç§æ–¹å¼ã€‚ åˆ†åˆ«æ˜¯ ã€æç¤ºå·¥ç¨‹ ã€RAG ã€å¾®è°ƒã€‘ é‚£ä¹ˆè¿™ä¸‰ç§åˆ†åˆ«åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‘¢ï¼Ÿ ä¸€èˆ¬æ¥è¯´æ˜¯éœ€è¦æœ‰ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚å½“å›ç­”å‡ºç°é—®é¢˜ï¼Œå…ˆæ€è€ƒæç¤ºè¯æ˜¯å¦ä¸å¤Ÿå‡†ç¡®ï¼Œç„¶åæ‰è€ƒè™‘æ˜¯å¦çŸ¥è¯†ä¿¡æ¯ä¸å…·å¤‡ï¼ˆæ¯”å¦‚ä¸€äº›å†…éƒ¨ç§æœ‰ä¿¡æ¯ï¼‰ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæç¤ºè¯å·²ç»éå¸¸å‡†ç¡®ï¼Œéœ€è¦çš„çŸ¥è¯†ä¹Ÿé€šè¿‡RAGè¿›è¡Œäº†æä¾›ä½†è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ­¤æ—¶è¯´æ˜å¤§æ¨¡å‹èƒ½åŠ›è¿˜ä¸å¤Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦å¾®è°ƒäº†æˆ–è€…æ¢å¤§æ¨¡å‹ å¾®è°ƒæˆæœ¬å¾ˆé«˜æ‰€ä»¥åŸºæœ¬ä¸Šåº”è¯¥ä¼˜å…ˆåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šä¼˜åŒ–ï¼Œå¾®è°ƒçš„æˆæœ¬ä½“ç°åœ¨ï¼šé¦–å…ˆæ•°æ®é›†çš„å»ºç«‹å°±å¾ˆè€—äººåŠ›ï¼Œè€Œä¸”ç‰¹å®šæ•°æ®å¤šäº†è¿˜ä¼šå¯¼è‡´ç ´åå¤§æ¨¡å‹åŸæœ‰çš„èƒ½åŠ›æœ‰è¿™ç§é£é™©ã€‚ä»¥åŠéœ€è¦çš„ç¡¬ä»¶æˆæœ¬ã€‚ 2ã€ä»€ä¹ˆæ˜¯RAG å›åˆ°æ­£é¢˜é‚£ä¹ˆä»€ä¹ˆæ˜¯RAGå‘¢ï¼Ÿ RAGå…¨ç§°Retrieval-Augmented Generation ç¿»è¯‘è¿‡æ¥å°±æ˜¯ æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œæ˜¯ä¸€ç§ç»“åˆä¿¡æ¯æ£€ç´¢ï¼ˆRetrievalï¼‰å’Œæ–‡æœ¬ç”Ÿæˆ(Gen)çš„æŠ€æœ¯ ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ è§£å†³çŸ¥è¯†çš„æ—¶æ•ˆæ€§ å‡å°‘æ¨¡å‹å¹»è§‰ æå‡ä¸“ä¸šé¢†åŸŸçš„å›ç­”è´¨é‡ 2.1 RAGæ„å»ºçš„æ­¥éª¤step1 æ•°æ®é¢„å¤„ç†çŸ¥è¯†åº“æ„å»ºï¼šæ”¶é›†å¹¶æ•´ç†æ–‡æ¡£ã€ç½‘é¡µã€æ•°æ®ç­‰å¤šå…ƒæ•°æ®ï¼Œæ„å»ºå¤–éƒ¨çŸ¥è¯†åº“ æ–‡æ¡£åˆ†å—ï¼šå°†æ–‡æ¡£åˆ†ä¸ºåˆé€‚çš„å¤§å°ï¼ˆæŒºé‡è¦ï¼‰ å‘é‡åŒ–å¤„ç†ï¼šä½¿ç”¨åˆé€‚çš„åµŒå…¥æ¨¡å‹ ï¼ˆä¸€èˆ¬ç°åœ¨ç”¨BAAIçš„BGE-M3ï¼‰ step2 æ£€ç´¢é˜¶æ®µæŸ¥è¯¢å¤„ç†ï¼šå°†ç”¨é—®é¢˜è½¬åŒ–ä¸ºå‘é‡ï¼Œåœ¨å‘é‡æ•°æ®åº“è¿›è¡Œç›¸ä¼¼åº¦æ£€ç´¢ top-k é‡æ’åºï¼šå¯¹æ£€ç´¢ç»“æœè¿›è¡Œç›¸å…³æ€§æ’åºï¼Œé€‰æ‹©æœ€ç›¸å…³çš„ step3 ç”Ÿæˆé˜¶æ®µä¸Šä¸‹æ–‡ç»„è£…ï¼šé€šè¿‡è®¾è®¡æç¤ºè¯å°†æ£€ç´¢ä¿¡æ¯å’Œç”¨æˆ·é—®é¢˜ç»“åˆï¼Œå½¢æˆå¢å¼ºçš„ä¸Šä¸‹æ–‡è¾“å…¥ ç”Ÿæˆå›ç­”ï¼šå¤§è¯­è¨€æ¨¡å‹åŸºäºå¢åŠ çœ‹içš„ä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆå›ç­”ã€‚ RAGçš„æœ¬è´¨ä¸Šé‡æ„äº†æ–°çš„æç¤ºè¯ï¼š LLM &#x3D;&gt; æ¨ç†å¼•æ“ å¤§è„‘ çŸ¥è¯†åº“ &#x3D;&gt; å¤–æŒ‚ ç¡¬ç›˜ è®°äº‹æœ¬ 3ã€NativeRAGåˆšåˆšæ•´ä¸ªæ­¥éª¤çš„å®ç°å°±æ˜¯NativeRAGï¼Œä¹Ÿæ˜¯æœ€åŸºç¡€çš„RAGã€‚ä¹‹åè¿˜æœ‰ä¸€äº›å˜ä½“æ¯”å¦‚å›¾è°±çš„ æ¯”è¾ƒå¥½ç”¨çš„çº¿ä¸Šçš„äº§å“æœ‰NotebookLM å¯ä»¥åˆ›å»ºå¤šä¸ªRAGåº”ç”¨ï¼Œæ¯ä¸ªåº”ç”¨å®ƒå¯ä»¥ä¸€å…±ä¼ å…¥äº”åä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªå¯ä»¥ä¸¤ç™¾å…†ï¼Œç„¶åä»–å°±åªæ ¹æ®è¿™äº›çŸ¥è¯†æ¥è¿›è¡Œå›ç­”ã€‚ è¿™æ ·ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œä¼ å…¥ä½ è‡ªå·±æ‰‹ä¸ŠæŸä¸ªæ–¹å‘çš„è´¨é‡å¥½èµ„æ–™æˆ–è€…ä¸€äº›ç›¸å…³çš„ä¹¦ç±æ²¡æ—¶é—´è‡ªå·±æ¶ˆåŒ–ï¼ˆYoutubeè§†é¢‘é“¾æ¥ä¹Ÿå¯ä»¥ï¼‰ï¼Œç„¶åå®ƒå°±å˜æˆè¿™ä¸ªé¢†åŸŸçš„ä¸“ä¸šåŠ©æ‰‹äº†ï¼Œä»åˆ«çš„åœ°æ–¹é—®å¯èƒ½æœ‰å¾ˆå¤šé”™è¯¯ï¼Œä½†è¿™ä¸ªå°±æ˜¯ä»ä½ è‡ªå·±çš„èµ„æ–™åº“å½“ä¸­å›ç­”é—®é¢˜ï¼Œéå¸¸å¥½ç”¨æ¨èæ¨èã€‚ å›½å†…çš„è¿™ç§äº§å“ç»“æ„çš„æœ‰è…¾è®¯çš„ imacopilotï¼Œæ¯”è¾ƒNotebookLMè´¨é‡å®é™…ä½“éªŒå¼±ä¸€ç‚¹![[Pasted image 20250317123706.png]] å³ä½¿é€šè¿‡ç›¸åŒçš„å¤§æ¨¡å‹ï¼ŒåŠ ä¸ŠNotebookLMçš„RAGè¿›è¡Œæç¤ºç»„è£…ä¹‹åä¼šç­‰åˆ°æ›´å‡†ç¡®çš„æ¨ç†ç»“æœï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å‡ºå‚è€ƒå“ªä¸€ç¯‡çš„REKï¼Œæ–¹ä¾¿åŒ»ç”Ÿå¿«é€Ÿè¿›è¡ŒéªŒè¯å®ƒçš„æ­£ç¡®æ€§ åœ¨ä½¿ç”¨ä¸Šä½ é™¤äº†ç”¨æ¥æ„å»ºçŸ¥è¯†åº“åŠ©æ‰‹ï¼ˆå¾€ä¸€ä¸ªåº”ç”¨åœ¨é•¿æœŸçš„ä½¿ç”¨ä¸­æ…¢æ…¢çš„è¡¥å……èµ„æ–™ï¼Œæ¯•ç«Ÿ50ä¸ªè¿˜æ˜¯æŒºå¤šçš„ï¼Œä¸€æœ¬ä¹¦çš„pdfå°±ç®—ä¸€ä¸ªï¼‰ï¼Œè¯¥åº”ç”¨åœ¨è¿™ä¸ªçŸ¥è¯†æ–¹å‘è¶Šæ¥è¶Šå¥½ç”¨ã€‚ é™¤æ­¤ä¹‹å¤–æœ‰äº›ä½ æ‡’å¾—çœ‹çš„ä¸œè¥¿æ¯”å¦‚å°±åªæœ‰ä¸€ç¯‡pdfçš„ä¿é™©ä»‹ç»ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶åº”ç”¨ï¼Œé—®ä¸€é—®ã€‚![[Pasted image 20250317125907.png]] ![[Pasted image 20250317130042.png]] 4ã€Embeddingæ¨¡å‹çš„é€‰æ‹©å…³äºæ¨¡å‹é€‰æ‹©å¯ä»¥åˆ°å¦‚ä¸‹çš„åœ°å€å»æŸ¥çœ‹å¯¹æ¯”ï¼Œç›®å‰æ¥è¯´çš„è¯è¯­è¨€èƒ½åŠ›æœ€å¥½çš„æ˜¯BGE-M3 huggingface.co&#x2F;spaces&#x2F;mteb&#x2F;leaderboard ![[Pasted image 20250317130519.png]] ![[Pasted image 20250317130726.png]] è¯•äº†ä¸€ä¸‹BGE-M3å’Œgte-Qwen2ï¼Œæ¡ˆä¾‹ä»£ç å¦‚ä¸‹åœ°å€ï¼šhttps://github.com/Jasper-zh/agi_study/tree/main/embeding/embedding_model 5ã€OpenAI + Faiss æ„å»º RAG PDFæ–‡æœ¬è¯»å–: ä½¿ç”¨çš„PyPDF2 å‘é‡æ•°æ®åº“çš„æ„å»ºï¼šä½¿ç”¨OpenAIçš„Embeddingæ¨¡å—è½¬å‘é‡ã€ä½¿ç”¨Faissè¿›è¡Œå­˜å‚¨çŸ¥è¯†åº“ è¯­ä¹‰æœç´¢ä¸é—®ç­”ï¼šä½¿ç”¨Faissæä¾›çš„å‡½æ•°è¿›è¡Œç›¸è¿‘æœç´¢ã€OpenAIè¿›è¡Œè¯­è¨€å›ç­” æˆæœ¬è·Ÿè¸ªä¸ç»“æœå±•ç¤ºï¼šä½¿ç”¨langchainçš„get_openai_callbackæ¥è§£ææœ¬æ¬¡è°ƒç”¨æˆæœ¬ï¼Œå‰é¢è®°å½•æ¯ä¸ªchunkçš„é¡µç ï¼Œæœ€ç»ˆå±•ç¤ºæ—¶å¯ä»¥é€šè¿‡chunkå»æ‰¾åˆ°å‚è€ƒé¡µç  ä»£ç å¦‚ä¸‹åœ°å€ï¼šhttps://github.com/Jasper-zh/agi_study/blob/main/embeding/rag/chatpdf-faiss.py ![[Pasted image 20250317164020.png]] 6ã€å¸¸è§é—®é¢˜6.1 å¦‚æœLLMå¯ä»¥å¤„ç†æ— é™ä¸Šä¸‹æ–‡äº†ï¼ŒRAGè¿˜æœ‰æ„ä¹‰ä¹ˆï¼Ÿæ•ˆç‡æˆæœ¬ï¼šRAGé€šè¿‡æ£€ç´¢ï¼Œå‡å°‘äº†è¾“å…¥tokençŸ¥è¯†æ›´æ–°ï¼šLLMçŸ¥è¯†æ˜¯æˆªæ­¢äºè®­ç»ƒæ•°æ®å¯è§£é‡Šæ€§ï¼šRAGçš„æ•°æ®æ˜¯é€æ˜çš„ï¼Œå¯æŸ¥çœ‹æ¥æºå®šåˆ¶åŒ–ï¼šå¯é’ˆå¯¹ç‰¹å®šé¢†åŸŸå®šåˆ¶æ•°æ®éšç§ï¼šå¯ä»¥åœ¨æœ¬åœ°ç§æœ‰æ•°æ®è¿›è¡Œæ£€ç´¢ï¼Œé¿å…ä¸Šä¼ äº‘ç«¯ &#x3D;&gt; ç»“åˆRAGçš„èƒ½åŠ›ï¼Œå¯ä»¥æå‡æ•´ä½“æ€§èƒ½ï¼Œæä¾›æ›´å…¨é¢ã€å‡†ç¡®çš„å›ç­”ã€‚ 6.2 å¦‚ä½•æå‡RAGè´¨é‡ï¼Ÿæ•°æ®å‡†å¤‡é˜¶æ®µé¢å¯¹çš„é—®é¢˜ -&gt; æ•°æ®è´¨é‡å·®ï¼šç‰¹åˆ«æ˜¯ä¸€äº›éç»“æ„æ•°æ®ç¼ºä¹è‰¯å¥½çš„ç®¡ç†ï¼ŒåŒ…å«å¾ˆå¤šè¿‡æ—¶ã€çŸ›ç›¾æˆ–è€…ä¸æ­£ç¡®çš„ä¿¡æ¯ å¤šæ¨¡æ€ä¿¡æ¯ï¼šæå–ã€å®šä¹‰å’Œç†è§£æ–‡æ¡£ä¸­çš„ä¸åŒå…ƒç´ å†…å®¹ï¼Œå¦‚æ ‡é¢˜ã€é…è‰²æ–¹æ¡ˆã€å›¾åƒå’Œæ ‡ç­¾ç­‰å­˜åœ¨æŒ‘æˆ˜ å¤æ‚çš„PDFæå–ï¼šPDFæ˜¯ä¸ºäººç±»é˜…è¯»è®¾è®¡çš„ï¼Œæœºå™¨è§£æèµ·æ¥éå¸¸å¤æ‚ å¦‚ä½•æå‡æ•°æ®å‡†å¤‡é˜¶æ®µçš„è´¨é‡ï¼Ÿ ç›®å‰ä¸¤ç§æ–¹å¼ï¼š æ„å»ºå®Œæ•´çš„æ•°æ®å‡†å¤‡æµç¨‹ æ™ºèƒ½æ–‡æ¡£æŠ€æœ¯ ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯åšå¥½ä»¥ä¸‹å‡ ç‚¹ï¼š æ•°æ®è¯„ä¼°ä¸åˆ†ç±» æ•°æ®å®¡è®¡ï¼šå…¨é¢å®¡æŸ¥ç°æœ‰æ•°æ®ï¼Œè¯†åˆ«æ•æ„Ÿã€è¿‡æ—¶ã€çŸ›ç›¾æˆ–è€…ä¸å‡†ç¡®çš„ä¿¡æ¯ æ•°æ®åˆ†ç±»ï¼šæŒ‰ç±»å‹ã€æ¥æºã€æ•æ„Ÿæ€§å’Œé‡è¦æ–°å¯¹æ•°æ®åšå¥½åˆ†ç±» æ•°æ®æ¸…æ´— å»é‡ï¼šå»é™¤é‡å¤æ•°æ® çº é”™ï¼šå‘ç°é”™è¯¯è¿›è¡Œä¿®æ­£æ¯”å¦‚æ ¼å¼é”™è¯¯æˆ–è€…æ‹¼å†™é”™è¯¯ æ›´æ–°ï¼šæ›¿æ¢è¿‡æ—¶çš„ä¿¡æ¯ï¼Œç¡®ä¿æ•°æ®æ—¶æ•ˆ ä¸€è‡´æ€§ï¼šè§£å†³æ•°æ®çŸ›ç›¾ï¼Œç¡®ä¿é€»è¾‘ä¸€è‡´ æ•æ„Ÿä¿¡æ¯å¤„ç† è¿›è¡Œè„±æ•ï¼Œç¡®ä¿åˆè§„ æ•°æ®æ ‡è®°ä¸æ ‡æ³¨ å…ƒæ•°æ®æ ‡è®°ï¼šæ·»åŠ å…ƒä¿¡æ¯ï¼Œå¦‚æ¥æºã€åˆ›å»ºæ—¶é—´ç­‰ å†…å®¹æ ‡æ³¨ï¼šå¯¹éç»“æ„åŒ–æ•°æ®è¿›è¡Œæ ‡æ³¨ï¼Œä¾¿äºåç»­æ£€ç´¢å’Œåˆ†æ æ•°æ®æ²»ç†æ¡†æ¶ åˆ¶å®šæ”¿ç­–ï¼šæ˜ç¡®æ•°æ®ç®¡ç†ã€è®¿é—®æ§åˆ¶å’Œæ›´æ–°æµç¨‹ è´£ä»»åˆ†é…ï¼šæŒ‡å®šæ•°æ®æ²»ç†è´Ÿè´£äººï¼Œç¡®ä¿æ”¿ç­–æ‰§è¡Œ ç›‘æ§ä¸å®¡è®¡ï¼šå®šæœŸç›‘æ§æ•°æ®è´¨é‡ï¼Œè¿›è¡Œå®¡è®¡ æ•°æ®æ²»ç†æ˜¯å¾ˆæ¼«é•¿å¾ˆèŠ±ç²¾åŠ›çš„ä¸€ä¸ªå·¥ä½œï¼Œä¸æ˜¯ä¸€æ¬¡æ€§å°±èƒ½å®Œæˆçš„ï¼Œéœ€è¦å¤šäººèŠ±æ—¶é—´æŒ‰ç…§æŒ‡åˆ¶å®šçš„æ ‡å‡†ä¸€ç›´å»ç»´æŠ¤ ç¬¬äºŒç§æ–¹å¼å°±æ˜¯æ™ºèƒ½æ–‡æ¡£æŠ€æœ¯ è¿™ç§æŠ€æœ¯ç›¸å½“äºæ˜¯æŠŠä¸åŒçš„æ–‡ä»¶ç±»å‹ï¼Œéƒ½èƒ½æŒ‰ç…§ç»Ÿä¸€çš„ç‰¹å¾ç©ºé—´å»è¡¨ç¤ºï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªå¤šæ¨¡æ€å¤§æ¨¡å‹ã€‚åœ¨è¿™æ ·çš„ç†è®ºä¸Šï¼Œå°±å¯ä»¥è§£å†³æ–‡æ¡£çš„å†…å®¹è¯»å–å’Œåˆ†å‰²çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯PDFçš„æ–‡å­—è¯»å–ã€‚ç›´æ¥é€šè¿‡æ–‡ä»¶å°±èƒ½çŸ¥é“å«ä¹‰è€Œä¸æ˜¯å–å‡ºæ–‡å­—å†ç»™è¯­è¨€æ¨¡å‹åˆ†æè¯­ä¹‰ã€‚ ![[Pasted image 20250317165331.png]] è¿™æ˜¯ä¸€ä¸ªè¿˜å¤„äºæ¯”è¾ƒæ–°çš„æ–¹å‘ï¼Œç›®å‰å·²çŸ¥çš„äº§å“æœ‰ LayoutLM çŸ¥è¯†æ£€ç´¢é˜¶æ®µä¸Šé¢è¯´å®Œäº†æ•°æ®å‡†å¤‡é˜¶æ®µçš„ç‚¹ï¼Œç°åœ¨è¯´è®²çŸ¥è¯†æ£€ç´¢é˜¶æ®µï¼Œé‚£ä¹ˆçŸ¥è¯†æ£€ç´¢é˜¶æ®µå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š å†…å®¹ç¼ºå¤±ï¼šæ£€ç´¢è¿‡ç¨‹ä¸­ç¡®å®å…³é”®å†…å®¹ï¼Œç³»ç»Ÿæä¾›ä¸å®Œæ•´ç¢ç‰‡åŒ–çš„ç­”æ¡ˆ &#x3D;&gt; é™ä½RAGçš„è´¨é‡ é”™è¿‡æ’åé å‰çš„æ–‡æ¡£ï¼šç”¨æˆ·æŸ¥è¯¢ç›¸å…³æ–‡æ¡£æ—¶è¢«æ£€ç´¢åˆ°ï¼Œä½†ç›¸å…³åº¦å¾ˆä½ï¼Œå¯¼è‡´ä¸æ»¡è¶³éœ€æ±‚ï¼Œå› ä¸ºåªç»è¿‡ä¸€æ¬¡top-kï¼Œè¿™ä¸ªkè®¾ç½®å¤šå°‘ä¹Ÿéœ€è¦é•¿æ—¶é—´ä½¿ç”¨ä»¥åŠè°ƒè¯•ç»éªŒ ä¸åœ¨ä¸Šä¸‹æ–‡ï¼šä»æ•°æ®åº“è¿”å›äº†åŒ…å«ç­”æ¡ˆçš„æ–‡æ¡£ï¼Œä½†æœªèƒ½å‡ºç°åœ¨æç¤ºè¯å½“ä¸­ï¼Œå¯èƒ½æ•°é‡å¤ªå¤§éœ€è¦è¿›è¡Œæ•´åˆ å¦‚ä½•æå‡çŸ¥è¯†æ£€ç´¢é˜¶æ®µçš„è´¨é‡ï¼Ÿ è½¬æ¢æ¾„æ¸…ç”¨æˆ·æ„å›¾ é‡‡ç”¨æ··åˆæ£€ç´¢å’Œé‡æ’ç­–ç•¥ ä¸¤ä¸ªç‚¹ç¬¬ä¸€ä¸ªå°±æ˜¯è¯¦ç»†åŒ–ç”¨æˆ·æ„å›¾ï¼Œå½“ç”¨æˆ·æ¯”è¾ƒå«ç³Šæ—¶ï¼Œå¯ä»¥ç»†åŒ–ç”¨æˆ·æ„å›¾å¯ä»¥ç»™ç”¨æˆ·ç¡®å®šä¹Ÿå¯ä»¥ç›´æ¥ç»†åŒ–åç›´æ¥æ£€ç´¢ ç¬¬äºŒä¸ªç‚¹å°±æ˜¯æ··åˆæ£€ç´¢å’Œé‡æ’ï¼Œæ„æ€å°±æ˜¯æ—¢è¿›è¡Œè¯­ä¹‰æ£€ç´¢ä¹Ÿè¿›è¡Œå…³é”®å­—åŒ¹é…æ£€ç´¢ï¼Œæˆ–è€…è¿›è¡Œç¬¬äºŒæ¬¡æ’åº ç­”æ¡ˆç”Ÿæˆé˜¶æ®µåœ¨è¿™ä¸ªé˜¶æ®µçš„é—®é¢˜å¯èƒ½å¦‚ä¸‹ï¼š æœªæå–ï¼šç­”æ¡ˆä¸æ‰€æä¾›çš„ä¸Šä¸‹æ–‡ä¸ç›¸ç¬¦ï¼Œå¯èƒ½ä¸Šä¸‹æ–‡å¤ªå¤šå­˜åœ¨å™ªéŸ³ï¼Œæˆ–è€…æœ‰å†²çªä¿¡æ¯ ä¸å®Œæ•´ï¼šå°½ç®¡èƒ½æ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆç­”æ¡ˆï¼Œä½†ä¿¡æ¯ç¼ºå¤±ä¼šå¯¼è‡´å›ç­”ä¸å®Œæ•´ æ ¼å¼é”™è¯¯ï¼šå½“æç¤ºè¯ä¸­çš„é™„åŠ æŒ‡ä»¤æ ¼å¼ä¸æ­£ç¡®æ—¶ï¼ŒLLMå¯èƒ½è¯¯è§£ä»è€Œå¯¼è‡´é”™è¯¯ç­”æ¡ˆ å¹»è§‰ï¼šå¤§æ¨¡å‹å¯èƒ½äº§ç”Ÿè¯¯å¯¼æ€§æˆ–è€…è™šå‡ä¿¡æ¯ å¦‚ä½•æå‡ç­”æ¡ˆé˜¶æ®µçš„è´¨é‡ æ”¹è¿›æç¤ºè¯æ¨¡æ¿ï¼šæ¯”å¦‚åˆ©ç”¨æ¨ç†æ¨¡å‹ DeepSeek-r1 ã€qwq å®æ–½åŠ¨æ€é˜²æŠ¤æ  æŠ›å¼€å‰é¢çš„é—®é¢˜ï¼Œä»…ä»…ç­”æ¡ˆé˜¶æ®µçš„æ•ˆæœå°±åªèƒ½æ˜¯æç¤ºè¯äº†ï¼ŒåŠ¨æ€é˜²æŠ¤æ ä¹Ÿæ˜¯æç¤ºè¯çš„ä¸€ç§æ–¹å¼ä¾‹å­å¦‚ä¸‹ï¼Œå¯ä»¥é€šè¿‡å¦å¤–çš„æ¨¡å‹å»åˆ†æéœ€è¦å›ç­”çš„è¦ç´ ï¼Œæ‹¼æ¥åˆ°æç¤ºè¯å½“ä¸­ ![[Pasted image 20250317171933.png]] ![[Pasted image 20250317172054.png]] ![[Pasted image 20250317172226.png]] 7ã€æ€»ç»“RAGæ˜¯ç›®å‰åº”ç”¨å®è·µæ•ˆæœæœ€å¥½çš„ä¸€ç§å¤§æ¨¡å‹çš„åº”ç”¨æ¶æ„ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ† æ•°æ®ã€å‘é‡åŒ–ã€æ£€ç´¢å›ç­”ã€‚å…¶ä¸­æœ€ä¸»è¦çš„éƒ¨åˆ†è¿˜æ˜¯æ•°æ®çš„å¤„ç†ï¼Œæƒ³è¦åšä¸€äº›ç»ƒä¹ çš„è¯å¯ä»¥åšç±»ä¼¼è°·æ­Œçš„NoteBookLMå¯ä»¥ä¸Šä¼ ä¸åŒç±»å‹æ–‡ä»¶ï¼ŒåŒæ—¶å›ç­”ä¼šæ˜¾ç¤ºå‚è€ƒæ¥æºæ–‡ä»¶","categories":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"}],"tags":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"}]},{"title":"Embeddingï¼šæ¨èç³»ç»Ÿä¸­ä»è¯è¢‹åˆ°å‘é‡ç©ºé—´çš„æŠ€æœ¯è·ƒè¿","slug":"Embeddingï¼šæ¨èç³»ç»Ÿä¸­ä»è¯è¢‹åˆ°å‘é‡ç©ºé—´çš„æŠ€æœ¯è·ƒè¿","date":"2025-03-12T09:56:47.000Z","updated":"2025-04-17T08:34:51.958Z","comments":true,"path":"2025/03/12/Embeddingï¼šæ¨èç³»ç»Ÿä¸­ä»è¯è¢‹åˆ°å‘é‡ç©ºé—´çš„æŠ€æœ¯è·ƒè¿/","link":"","permalink":"http://yournotes.cn/2025/03/12/Embedding%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BB%8E%E8%AF%8D%E8%A2%8B%E5%88%B0%E5%90%91%E9%87%8F%E7%A9%BA%E9%97%B4%E7%9A%84%E6%8A%80%E6%9C%AF%E8%B7%83%E8%BF%81/","excerpt":"","text":"1ã€ åŸºäºå†…å®¹æ¨è ä¾èµ–æ€§ä½ï¼Œä¸éœ€è¦åŠ¨æ€çš„ç”¨æˆ·è¡Œä¸ºï¼Œåªè¦æœ‰å†…å®¹å°±å¯ä»¥è¿›è¡Œæ¨è ç³»ç»Ÿä¸åŒé˜¶æ®µéƒ½å¯ä»¥ç”¨ï¼š ç³»ç»Ÿå†·å¯åŠ¨ï¼šå†…å®¹æ˜¯ä»»ä½•ç³»ç»Ÿå¤©ç”Ÿçš„å±æ€§ï¼Œå¯ä»¥ä»ä¸­æŒ–æ˜ç‰¹å¾ï¼Œå®ç°æ¨èç³»ç»Ÿçš„å†·å¯åŠ¨ã€‚ä¸€ä¸ªå¤æ‚çš„æ¨èç³»ç»Ÿéƒ½æ˜¯åŸºäºå†…å®¹æ¨èæˆé•¿èµ·æ¥ å•†å“å†·å¯åŠ¨ï¼šä¸è®ºä»€ä¹ˆé˜¶æ®µéƒ½ä¼šæœ‰æ–°å•†å“åŠ å…¥ï¼Œåªè¦å•†å“æœ‰å†…å®¹ä¿¡æ¯ï¼Œå°±å¯ä»¥å¸®ä»–è¿›è¡Œæ¨è æ•°æ®ä¸­å°è¶Šæ¥è¶Šæ˜¾ç¤ºå…¶ä»·å€¼ç»“æ„åŒ–æ•°æ® &#x3D;&gt; åˆ†æã€é¢„æµ‹ã€æ´å¯Ÿéç»“æ„åŒ–æ•°æ® &#x3D;&gt; æ£€ç´¢ã€æ¨èã€æ’°å†™ ä¸šåŠ¡é©±åŠ¨æ•°æ®æ•°æ®æµï¼šä¼ä¸šä¸­çš„æ•°æ®ä¸­å° &#x3D;&gt; ä¸Šå±‚ä¸šåŠ¡åˆ†æå®ç°è·¯å¾„ï¼šä¸šåŠ¡é©±åŠ¨ï¼Œç”±å„ä¸ªéƒ¨é—¨ã€å°ç»„å‘èµ·æŒ‡å®šæ•°æ®ï¼ˆç»“æ„åŒ–ã€éç»“æ„åŒ–ï¼‰ä»¥éƒ¨é—¨ä¸šåŠ¡ä¸ºå¯¼å‘ï¼Œè§„åˆ’ç»“æ„åŒ–æ•°æ®å’Œéç»“æ„åŒ–æ•°æ® [!note] åº”ç”¨å½¢å¼ä»¥æ™ºèƒ½ä½“å±•ç¤ºä¸ºä¸»ï¼Œéœ€è¦ç»“åˆå‘˜å·¥æƒé™ç®¡ç†å’Œæ•°æ®å®‰å…¨è€ƒè™‘åœ¨ç”¨æˆ·åœç•™çš„åœ°æ–¹è¿›è¡Œé›†æˆåŠå…¬IMï¼šä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ã€é£ä¹¦ä¼ä¸šOAã€SAPã€CRM [!note] PMOè§’è‰²AIåŠ©æ‰‹éœ€æ±‚æ”¶é›†ã€æ¨å¹¿ã€è¿è¥åé¦ˆã€å¼€å‘è¿­ä»£å®‰æ’ 1.1ã€ç‰¹å¾æå–å’Œä½™å¼¦ç›¸ä¼¼è¦æƒ³å®ç°è¿‘ä¼¼å†…å®¹æ¨èé¦–å…ˆæˆ‘ä»¬å°±è¦ç†è§£ç‰¹å¾å’Œè¿™ä¸ªä½™å¼¦ç›¸ä¼¼åº¦ä¸¤ä¸ªæ¦‚å¿µé¦–å…ˆä½™å¼¦ç›¸ä¼¼åº¦å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦å€¼ï¼šå®Œå…¨ç›¸åŒæ—¶ä¸º1ï¼Œå‚ç›´æ—¶ä¸º0ï¼Œç›¸åæ—¶ä¸º -1 æ€»ä¹‹ç›¸ä¼¼åº¦æ˜¯åœ¨[-1,1]èŒƒå›´ ![[Pasted image 20250313194407.png]] ![[Pasted image 20250313134831.png]] ä¸Šè¿°æ˜¯ä¸€ä¸ªç®€å•çš„åŸç†ç¤ºä¾‹å°±æ˜¯å¯¹äºè¯é¢‘TFçš„ä¸€ä¸ªç»Ÿè®¡ï¼Œå¯¹äºä¸¤ä¸ªå¥å­æå–äº†å…«ä¸ªç»´åº¦çš„ç‰¹å¾ï¼ˆ8ä¸ªè¯ï¼‰å¯¹äºå¯¹äºå…«ä¸ªç»´åº¦å¡«å…¥æ¯ä¸ªç»´åº¦çš„å€¼ï¼ˆæ¯ä¸ªè¯çš„é¢‘ç‡ï¼‰å°±å½¢æˆäº†ä¸€ä¸ªåºåˆ—æ¥è¡¨è¾¾è¿™ä¸ªå¥å­ï¼Œè¿™æ ·å°±å¯ä»¥è®¡ç®—ç›¸ä¼¼åº¦ã€‚ ä½†æ˜¯è¿™æ ·ç®€å•çš„æå–ç»´åº¦å°±ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚æŠŠå¥å­Açš„â€œå¤ªä¹±â€å’Œâ€œè§„èŒƒâ€ä½ç½®æ¢ä¸€ä¸‹ï¼Œæœ€ç»ˆå¾—åˆ°çš„åºåˆ—ä»ç„¶ä¸å˜ï¼Œå³ä½¿æ„æ€å·²ç»ç›¸åï¼Œå¾—åˆ°çš„ç»“æœå°±è¿˜æ˜¯ç›¸ä¼¼ã€‚è¿™ç§å¯ä»¥ç›´æ¥è¿›è¡Œæ¯”è¾ƒçš„æ–¹å¼å«åšè¯è¢‹æ¨¡å‹ 1.2 TF-IDFé™¤äº†ä½ç½®ä¹‹å¤–ï¼Œç‰¹å¾æå–æ—¶ï¼ŒæŸäº›ç‰¹å¾åœ¨æ‰€æœ‰æ ·æœ¬å‡æœ‰å‡ºç°ï¼Œå› æ­¤ä¸ºäº†å°½é‡å¿½ç•¥è¿™äº›ç‰¹å¾ï¼Œäºæ˜¯æœ‰äº†TF-IDFæ¨¡å‹ ![[Pasted image 20250313154401.png]] å½“ä¸€ä¸ªç‰¹å¾å³ä½¿é¢‘ç‡å¾ˆé«˜ä½†å¤§å®¶éƒ½æœ‰æ—¶ï¼Œè¿™ä¸ªç‰¹å¾çš„IDFå‡ ä¹å°±ä¸º0äº†ï¼Œä¸ä¼šåƒä¹‹å‰ä¸€æ ·å› ä¸ºé¢‘ç‡é«˜è€Œæ’åˆ°å‰é¢ã€‚ 1.3 N-Gramå¯¹äºä½ç½®å¯¹æ„æ€å½±å“å¤§çš„é—®é¢˜ï¼Œåˆæœ‰äº†N-Gramçš„è¯é¢‘ç»Ÿè®¡æ–¹å¼ï¼Œä¸»è¦æ˜¯åœ¨äºåˆ†å‰²ä¸Š ![[Pasted image 20250313140814.png]] è¿™æ ·å»åˆ†å‰²ä¼šäº§ç”Ÿæ›´å¤šçš„ç»´åº¦ï¼Œè‡ªç„¶ä¹Ÿèƒ½è¡¨è¾¾æ›´å¤šçš„ä¿¡æ¯ã€‚å‡è®¾ä¸€å¥è¯æ¯ä¸ªå­—æ˜¯ä¸€ä¸ªå­—æ¯ï¼Œé‚£ä¹ˆä¸ç®¡å¤šå°‘æ–‡æœ¬åˆ—è¡¨ï¼Œæœ€ç»ˆçš„ç‰¹å¾ä¹Ÿåªèƒ½å–å‡º26ä¸ªï¼Œè€Œå¦‚æœæ˜¯äºŒå…ƒæˆ–è€…ä¸‰å…ƒï¼Œå¯èƒ½äº§ç”Ÿçš„ç‰¹å¾å•ä½å°±ä¼šå¾ˆå¤šï¼ŒNå€¼æ¯æé«˜ä¸€ä¸ªï¼Œå¯èƒ½ç»´åº¦éƒ½æ˜¯çˆ†ç‚¸å¼çš„å¢é•¿ã€‚ 1.4 æ¡ˆä¾‹ [!capacities-body] è¥¿é›…å›¾é…’åº—æ•°æ®é›† https://github.com/susanli2016/Machine-Learning-with-Python/blob/master/Seattle_Hotels.csv![[Pasted image 20250313191444.png]] å­—æ®µï¼š name,address,desc éœ€æ±‚ï¼šåŸºäºç”¨æˆ·é€‰æ‹©çš„é…’åº—æ¨èç›¸ä¼¼åº¦é«˜çš„Top10ä¸ªå…¶ä»–é…’åº— æ–¹æ³•ï¼šè®¡ç®—å½“å‰é…’åº—çš„å‘é‡ç‰¹å¾ä¸æ•´ä¸ªé…’åº—ç‰¹å¾çŸ©é˜µçš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå–è¿‘ä¼¼åº¦æœ€å¤§çš„Top-kä¸ª ![[Pasted image 20250313142426.png]] [!check]+ ä»£ç åœ°å€ï¼šhttps://github.com/Jasper-zh/agi_study/tree/main/embeding/feature_extractor 2ã€Embeddingä¸Šè¿°ä½¿ç”¨çš„ç”¨æ¥æ¯”è¾ƒç›¸ä¼¼çš„æ–¹å¼ä¸ç®¡æ˜¯è¯è¢‹è¿˜æ˜¯TF-IDF,éƒ½ä¼šæœ‰ä¸€ä¸ªé—®é¢˜é‚£å°±æ˜¯ä¸€ä¸ªç»´åº¦åªè¡¨è¾¾ä¸€ä¸ªå…·ä½“çš„è¯ï¼Œé‚£ä¹ˆä¸€ä¸ªè¯­æ–™åº“å½¢æˆçš„è¿™ä¸ªè¡¨ç¤ºï¼Œç»´åº¦å°±ä¼šç‰¹åˆ«é«˜ï¼Œå½“å¯¹ä¸€ä¸ªæ–°çš„å¥å­æŒ‰ç…§è¿™ä¸ªè¡¨è¿›è¡Œè½¬åŒ–æ—¶ï¼Œå¾ˆå¤šè¯å¯èƒ½éƒ½æ²¡æœ‰ç”¨è¿‡ï¼Œç”¨å¾ˆé«˜ç»´æ¥è¡¨è¾¾è¿™ä¸ªå¥å­ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ç»´åº¦éƒ½æ˜¯0ï¼Œæ‰€ä»¥è¿™äº›æ–¹å¼ç©ºé—´åˆ©ç”¨ç‡å¤ªä½ã€‚ äºæ˜¯å°±æœ‰äº†Word Embedding åœ¨ç”¨ä¸€ä¸ªæ¯”è¾ƒå°çš„ç»´åº¦ä¸‹å°½å¯èƒ½è¡¨è¾¾å‡ºæ‰€æœ‰è¯çš„å…³ç³»ï¼Œè¿™æ ·æ¯ä¸ªç»´åº¦åˆ©ç”¨ç‡å¾ˆé«˜ï¼Œä¸ä¼šå‡ºç°ä¹‹å‰é‚£ç§å¾ˆå¤šç»´åº¦ç”¨ä¸åˆ°çš„æƒ…å†µã€‚ é‚£ä¹ˆå®é™…çš„å·¥å…·æ¯”å¦‚Word2vec![[Pasted image 20250314143216.png]] å®é™…ä¸Šå°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªç‰¹å¾ç©ºé—´ï¼Œæ»¡è¶³æ‰€æœ‰çš„è¾“å…¥ã€‚ä¸€å¼€å§‹å®šå¥½ç»´åº¦ï¼Œåˆå§‹åŒ–æ¯ä¸ªè¯çš„å‘é‡å€¼ã€‚ é‚£ä¹ˆæ ¸å¿ƒå°±æ˜¯åœ¨äºå¦‚ä½•é€šè¿‡éšè—å±‚ï¼Œå¾—åˆ°æ¯ä¸ªè¯çš„å‘é‡è¡¨ç¤ºå®ƒä»¬ä¹‹é—´ç›¸ä¼¼è®¡ç®—æœ€ç»ˆéƒ½èƒ½æ‹Ÿåˆå®é™…çš„æ¯ä¸ªå•è¯å’Œå…¶ä»–å•è¯çš„ä¸Šä¸‹æ–‡å…³è”åº¦ã€‚å…·ä½“å°±æ˜¯æ¶‰åŠåˆ°ä¼˜åŒ–ç®—æ³•ï¼Œä¸åœçš„è¿­ä»£è®¡ç®—è¯¯å·®ä¸åœçš„æ¢¯åº¦ä¸‹é™æ…¢æ…¢è¿™ä¸ªé»‘ç›’å­è¶Šæ¥è¶Šèƒ½æ‹Ÿåˆå®é™…æ•°æ®ï¼Œå°†è®­ç»ƒå¥½çš„å†…å®¹ä¿å­˜ä¸‹æ¥å³å¯ã€‚ è®­ç»ƒå¥½åé‚£ä¹ˆä½ åç»­çš„è¾“å…¥å°±èƒ½é€šè¿‡éšè—å±‚æ‰¾åˆ°å¯¹åº”çš„å‘é‡è¡¨ç¤ºã€‚ é‚£ä¹ˆéœ€è¦æ¯”è¾ƒçš„å¥å­å°±å¯ä»¥é€šè¿‡è¯åµŒå…¥çš„å‘é‡è½¬åŒ–æˆå¥å­çš„å‘é‡è¡¨ç¤ºï¼ˆç®€å•å¹³å‡ï¼Œæˆ–è€…ä»¥è¯åµŒå…¥ä½œä¸ºè¾“å…¥å†å»è®­ç»ƒä¸€ä¸ªå¥å­çš„æ¨¡å‹æ¯”å¦‚RNNã€Transformerï¼‰ [!check]+ Word2Vecä½¿ç”¨ï¼šhttps://github.com/Jasper-zh/agi_study/tree/main/embeding/word2vec 3ã€æ€»ç»“ä¸Šè¿°ä¸€å¼€å§‹æ˜¯æ²¡æœ‰ä½¿ç”¨è¯åµŒå…¥æ¥å»è¡¨è¾¾ä¸¤ä¸ªå¥å­çš„ç›¸ä¼¼æ€§ï¼Œè€Œæ˜¯é€‰æ‹©æ‰‹åŠ¨æ¥å»æå–ç‰¹å¾ï¼Œè¿›è¡Œç®€å•çš„æ¨¡å‹è®¡ç®—è¿›è¡Œç›¸ä¼¼åº¦æ¯”è¾ƒã€‚å†ä¹‹ååˆ™æ˜¯é€šè¿‡word embeddingçš„æ–¹å¼å¯¹è¯­æ–™åº“å»ºç«‹äº†ç‰¹å¾ç©ºé—´ã€‚ä»è¿™æ ·ä¸€ä¸ªè§’åº¦å»ç†è§£äº†ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼Œå†åˆ°ç°åœ¨çš„å¤§è¯­è¨€æ¨¡å‹é‚£ä¹ˆå®ƒå†…éƒ¨çš„è¿™ç§å‘é‡è½¬åŒ–æ›´åŠ å¤æ‚ï¼ŒåŒ…å«çš„ä¿¡æ¯é‡æ›´å¤§ï¼Œå±äºæ¨¡å‹å¥—æ¨¡å‹å¥—nå¤šå±‚ï¼Œæœ€ç»ˆé€šè¿‡åºå¤§çš„è¯­æ–™åº“è®­ç»ƒè€Œæˆã€‚åŸºæœ¬ä¸Šword embeddingè¿™ç§æ–¹å¼å¯ä»¥ç”¨åœ¨æ‰€æœ‰ç›¸ä¼¼æ¨èçš„åœºæ™¯ï¼Œä¸ç®¡æ˜¯æ¨èå•†å“è¿˜æ˜¯æ¨èå…¶ä»–å†…å®¹ï¼Œæ¯”å¦‚å•†å“æ¨èä¸€ä¸ªäººå…ˆè®¿é—®äº†ä»€ä¹ˆåè®¿é—®äº†ä»€ä¹ˆï¼Œå°±æ˜¯ä¼šå½¢æˆä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªå’Œæ–‡æœ¬æ˜¯ä¸€æ ·çš„ï¼ˆä¸€ä¸ªæ–‡å­—å‰é¢å¯èƒ½æ˜¯ä»€ä¹ˆå­—åé¢å¯èƒ½æ˜¯ä»€ä¹ˆå­—ï¼‰","categories":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"}],"tags":[{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"}]},{"title":"æŠ€æœ¯æ ˆå¯¼è‡´åç»­æµå¼å“åº”çš„å‘","slug":"æŠ€æœ¯æ ˆå¯¼è‡´åç»­æµå¼å“åº”çš„å‘","date":"2024-07-28T07:58:16.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2024/07/28/æŠ€æœ¯æ ˆå¯¼è‡´åç»­æµå¼å“åº”çš„å‘/","link":"","permalink":"http://yournotes.cn/2024/07/28/%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AF%BC%E8%87%B4%E5%90%8E%E7%BB%AD%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E7%9A%84%E5%9D%91/","excerpt":"","text":"[toc] å‰è¨€ä¹‹å‰æ— èŠåšäº†ä¸€æ¬¾å·¥å…·appï¼Œéœ€è¦ä½¿ç”¨åˆ°æµå¼å“åº” å› ä¸ºæƒ³ç€å¿«é€Ÿå¯åŠ¨ï¼Œæ‰€ä»¥é€‰æ‹©äº†å®¢æˆ·ç«¯ç”¨uniapp æœåŠ¡ç«¯ç”¨uncloudäº‘å¼€å‘ åæ¥åœ¨å®ç°unicloudæµå¼å“åº”ç»™uniappæ—¶ï¼Œå‘ç°æ²¡æ³•è‡ªå®šä¹‰å“åº”ï¼Œunicloudçš„å‡½æ•°åªèƒ½è¿”å›æ•°æ®ï¼Œå“åº”åŠ¨ä½œåªèƒ½ç”±æ¡†æ¶æ“ä½œï¼Œå°†ä½ äº‘å‡½æ•°å“åº”çš„æ•°æ®è¿›è¡Œsendã€‚ æ–¹æ¡ˆä¸€ï¼šUni-pushåæ¥æŸ¥å®˜ç½‘ï¼Œå‘ç°ä¹Ÿæ˜¯æœ‰è§£å†³æ–¹æ¡ˆå°±æ˜¯å¼€é€šä»–ä»¬æä¾›çš„uni-pushæœåŠ¡ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªä¿¡é“å¯¹è±¡ssechannel æˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯åˆ›å»ºä¿¡é“ï¼Œç»™ä¿¡é“ç»‘å®šç›‘å¬å‡ ç§ç›‘å¬äº‹ä»¶å‡½æ•°ï¼Œæ¯”å¦‚ä¿¡é“æ¥æ”¶æ¶ˆæ¯äº‹ä»¶ã€ä¿¡é“ç»“æŸäº‹ä»¶ã€‚ ç»‘å®šäº†äº‹ä»¶å‡½æ•°åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¿¡é“ä¼ ç»™åç«¯ï¼Œåç«¯æ‹¿åˆ°ååºåˆ—åŒ–åï¼Œå°±å¯ä»¥é€šè¿‡sendå‘é€æ¶ˆæ¯ï¼Œé€šè¿‡endç»“æŸä¿¡é“ è¿™æ ·åœ¨å®¢æˆ·ç«¯é‚£è¾¹çš„ä¸¤ä¸ªäº‹ä»¶å°±å¯ä»¥æ¥æ”¶åˆ°ã€‚ æ•´å¤©æ¥è¯´ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526// å®¢æˆ·ç«¯ä»£ç export default &#123; data() &#123;&#125;, onLoad() &#123;&#125;, methods: &#123; async testSSE() &#123; const channel = new uniCloud.SSEChannel() // åˆ›å»ºæ¶ˆæ¯é€šé“ channel.on(&#x27;message&#x27;, (message) =&gt; &#123; // ç›‘å¬messageäº‹ä»¶ console.log(&#x27;on message&#x27;, message); &#125;) channel.on(&#x27;end&#x27;, (message) =&gt; &#123; // ç›‘å¬endäº‹ä»¶ï¼Œå¦‚æœäº‘ç«¯æ‰§è¡Œendæ—¶ä¼ äº†messageï¼Œä¼šåœ¨å®¢æˆ·ç«¯endäº‹ä»¶å†…æ”¶åˆ°ä¼ é€’çš„æ¶ˆæ¯ console.log(&#x27;on end&#x27;, message); &#125;) await channel.open() // ç­‰å¾…é€šé“å¼€å¯ const res = await uniCloud.callFunction(&#123; name: &#x27;myapi&#x27;, data: &#123; channel: channel // è°ƒç”¨äº‘å‡½æ•°æ—¶ä¼ å…¥é€šé“å¯¹è±¡ &#125; &#125;) &#125; &#125;&#125; 123456789101112131415161718192021// äº‘å‡½æ•°myapiä»£ç exports.main = async (event, context) =&gt; &#123; const channel = uniCloud.deserializeSSEChannel(event.channel) await channel.write(&#123; a: 1 &#125;) await channel.write(&#123; a: 2 &#125;) await channel.write(&#123; a: 3 &#125;) await channel.write(&#123; a: 4 &#125;) await channel.end(&#123; a: 5 &#125;) return &#123;&#125;&#125;; åœ¨ä½¿ç”¨ä¹‹åï¼Œä¹Ÿæ˜¯å®ç°äº†æˆ‘çš„åŠŸèƒ½ï¼Œæ¥å£å®æ—¶å†™å…¥ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›¸å¯¹å®æ—¶æ¥æ”¶ã€‚ ä½†æ˜¯åæ¥å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå¯èƒ½æ˜¯ä¸”åå°æˆ–è€…é”å±ï¼Œæˆ–è€…å°±åœ¨ä½¿ç”¨ä¸­ï¼Œå„ç§å„æ ·çš„æƒ…å†µå§ï¼Œå¯èƒ½ä¼šå‡ºç°å®¢æˆ·ç«¯æ¥æ”¶ä¸åˆ°äº†çš„æƒ…å†µï¼Œè€Œä¸”ä¸€ä½†å‡ºç°äº†è¿™ç§æƒ…å†µåï¼Œå®¢æˆ·ç«¯å†ç¬¬äºŒæ¬¡ç¬¬ä¸‰æ¬¡è§¦å‘testSSEâ€¦..ä¹Ÿå°±æ˜¯åç»­ä½¿ç”¨å‡ä¸ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚testSSEè¢«è§¦å‘ï¼Œä¾ç„¶æ˜¯æ–°å»ºä¿¡é“ä¼ é€’ç»™åç«¯apiï¼Œapiä¾ç„¶è¿›è¡Œå†™å…¥æ²¡æœ‰ä»»ä½•å¼‚å¸¸ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å°±æ˜¯ç›‘å¬ä¸åˆ°ï¼Œåªèƒ½é‡å¯å°±å¥½äº†ã€‚ä¸€ä½†å‡ºç°é—®é¢˜åˆåªèƒ½é‡å¯ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯è¿™ä¸ªç»„ä»¶ä¾èµ–åœ¨å…¨å±€ä¸Šæœ‰ä»€ä¹ˆä¸œè¥¿ï¼Œä¸€ä½†æ–­å¼€å°±åªèƒ½é‡å¯äº†ã€‚ æ–¹æ¡ˆäºŒï¼šæ¥å£è¿ç§»è…¾è®¯äº‘å¼€å‘æ–­æ–­ç»­ç»­æŸ¥äº†å‡ å‘¨æ²¡è§£å†³ï¼Œæƒ³åˆ°è¿ç§»æ¥å£å§ï¼Œäºæ˜¯ä¹åˆ°è…¾è®¯äº‘ä¹Ÿæ˜¯å¼€äº†ä¸€ä¸ªäº‘å¼€å‘ï¼Œæ¥å£çš„é€»è¾‘ä»£ç éƒ½è°ƒé€šï¼Œå‡†å¤‡è¿›è¡Œæµå¼å“åº”æ—¶ï¼Œåˆåˆé‡åˆ°äº†ä¹‹å‰çš„é—®é¢˜ï¼Œå®ƒæ²¡ç»™æˆ‘åŸå§‹å“åº”å¯¹è±¡ï¼Œä¸èƒ½è¿›è¡Œè‡ªå®šä¹‰å“åº”ã€‚äºæ˜¯ä¹é—®äº†ä¸‹å®¢æˆ·å®¢æœè¯´ä¸æ”¯æŒï¼ˆè¿™ç‚¹æ¯”èµ·uncloudè¿˜æ˜¯å¾ˆå¥½çš„ï¼Œæœ‰æŠ€æœ¯åœ¨çº¿å¯ä»¥é—®ï¼‰ æ–¹æ¡ˆä¸‰ï¼šæ¥å£è¿ç§»Serverlessäºæ˜¯ä¹æˆ‘åˆå»å¼€é€šäº†serverlessä¹‹å‰æ²¡ç”¨è¿‡ï¼Œå‘ç°å®ƒå¥½åƒä»‹äºä¼ ç»Ÿå¼€å‘å’Œäº‘å¼€å‘ä¹‹é—´ï¼Œå®ƒçš„ä»£ç å°±æ˜¯åŸæŠ€æœ¯çš„ä»£ç ï¼Œæ¯”å¦‚ä½ é€‰ç€nodejs æˆ–è€… java å¾—åˆ°çš„å°±æ˜¯ä½ æ­£å¸¸å¼€å‘çš„ç›®å½•ç»“æ„ï¼Œä¸åƒäº‘å¼€å‘è¿˜ä¼šå°è£…ä¸€å±‚æœ‰ä¸€å®šå­¦ä¹ æˆæœ¬ã€‚å®ƒæ§åˆ¶å°å°±æ˜¯ä¸€ä¸ªåœ¨çº¿vscodeï¼Œä»£ç ä»¥åŠç›®å½•ç»“æ„å°±æ˜¯ä½ é€‰ç”¨çš„æŠ€æœ¯ï¼Œå†™å®Œç›´æ¥éƒ¨ç½²å°±è¡Œäº†ã€‚ä¼šç»™ä¸€ä¸ªå…¬ç½‘åœ°å€æ˜ å°„åˆ°ä½ çš„é¡¹ç›®æœåŠ¡ç«¯å£ã€‚å› ä¸ºå°±æ˜¯åŸä»£ç ä¸åƒäº‘å¼€å‘çš„å°è£…äº†ä¸€å±‚ï¼Œæ‰€ä»¥å¾ˆç®€å•å°±èƒ½å®ç°æµå¼å“åº”æ ‡å‡†æ¥å£ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆåç«¯æŠ€æœ¯æœ¬èº«éƒ½æ˜¯æ”¯æŒhttpå…¨éƒ¨ç±»å‹çš„ï¼Œåªæ˜¯äº‘å¼€å‘å°è£…äº†ä¸€å±‚æ²¡ç»™ä½ åŸresponseå¯¹è±¡ æœ¬æ¥ä»¥ä¸ºåˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°å®¢æˆ·ç«¯åˆä¸æ”¯æŒï¼Œæœ¬æ¥ä»æ¥æ²¡æœ‰æƒ³è¿‡å®¢æˆ·ç«¯ä¸æ”¯æŒçš„ï¼Œä»¥ä¸ºè§£å†³äº†æ¥å£å°±è¡Œäº†ã€‚ å®¢æˆ·ç«¯ä½¿ç”¨äº†ä¸‰ç§ï¼Œç¬¬ä¸€ç§uniappæä¾›çš„uni.requestæœ‰ä¸ªenableChunked: trueçš„é…ç½®å¼€å¯ï¼Œä½†æ˜¯å¥½åƒåªæ˜¯æ”¯æŒå°ç¨‹åºã€‚åˆ°appå°±æ‰¾ä¸åˆ°ç›‘å¬å‡½æ•° 123456789101112131415161718192021222324252627 const response = uni.request(&#123; url: &#x27;Your requested address&#x27;, // è¯·æ±‚åœ°å€ method: &quot;Request method&quot;, // ä½ çš„è¯·æ±‚æ–¹æ³• data: data, header: &#123; &quot;Accept&quot;: &#x27;text/event-stream&#x27;, &quot;Connection&quot;: &quot;keep-alive&quot; &#125;, responseType: &quot;text&quot;, enableChunked: true, // å¼€å¯æµä¼ è¾“ success: (res) =&gt; &#123; resolve(res) &#125;, fail: (err) =&gt; &#123; reject(err) &#125;, &#125;) // è¿”å›è¯·æ±‚å¤´ä¿¡æ¯ response.onHeadersReceived((e)=&gt;&#123; console.log(e); &#125;)// æˆåŠŸå›è°ƒ è¿”å›æµä¼ è¾“ä¿¡æ¯ è¿”å›arrayBufferresponse.onChunkReceived((e)=&#123; console.log(e);&#125;) ç¬¬äºŒç§æ˜¯fetchä¹Ÿæ˜¯jsè‡ªå¸¦çš„ï¼Œåœ¨uniappç¯å¢ƒè¿˜æ˜¯æ‰¾ä¸åˆ° ç¬¬ä¸‰ç§ç”¨xhrå®Œå…¨æ²¡ååº” 12345678910111213141516171819202122232425262728293031323334const xhr = new XMLHttpRequest();let buffer = &#x27;&#x27;;xhr.open(&#x27;POST&#x27;, url, true);xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/json&#x27;);xhr.setRequestHeader(&#x27;Accept&#x27;, &#x27;text/event-stream&#x27;);xhr.onprogress = function() &#123; const newData = xhr.responseText.substr(buffer.length); console.log(newData); buffer += newData; console.log(buffer);&#125;;xhr.onreadystatechange = function () &#123; if (xhr.readyState === XMLHttpRequest.LOADING) &#123; // å¤„ç† HTTP æ•°æ®å— console.log(xhr.responseText) &#125;&#125;xhr.onload = function() &#123; if (xhr.status === 200) &#123; resolve(buffer); &#125; else &#123; reject(new Error(`HTTP error! status: $&#123;xhr.status&#125;`)); &#125;&#125;;xhr.onerror = function() &#123; console.log(&quot;error&quot;)&#125;;xhr.send(data ? JSON.stringify(data) : null); åä¸¤ç§åŸºæœ¬ä¸Šå°±æ˜¯æƒ³å°è¯•ç”¨åŸç”Ÿjsçš„æ–¹å¼ï¼Œä¹Ÿæ˜¯å¤±è´¥å‘Šç»ˆ. æ–¹æ¡ˆå››ï¼šæ¢åè®®Websocketæ—¢ç„¶ä¸è¡Œçš„è¯ï¼ˆè™½ç„¶å¾ˆç¦»è°±ä¸åº”è¯¥ä¸æ”¯æŒçš„å‘€ï¼‰ï¼Œç°åœ¨å°±åªèƒ½ç”¨websocketäº†ï¼Œè¿™ä¸ªuniappå®¢æˆ·ç«¯åº”è¯¥æ”¯æŒå§ã€‚OKOKé‚£å†æŠŠæ¥å£æ”¹æˆwebsocketçš„ï¼Œç„¶åæŠŠè¾“å‡ºçš„åœ°æ–¹éƒ½æ›¿æ¢ã€‚ ç„¶åæ”¹ä¸‹å®¢æˆ·ç«¯è¿æ¥websocketï¼Œä¸åŒçš„å¹³å°uniæä¾›çš„æ¥å£å‡½æ•°å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œç›®å‰æµ‹è¯•åœ¨é¸¿è’™ä¸Šok 12345678910111213141516171819202122232425262728293031let socket = uni.connectSocket(&#123; url: &#x27;wss://you_api_url&#x27;, success: function (res) &#123; console.log(&#x27;WebSocket è¿æ¥åˆ›å»ºæˆåŠŸ&#x27;); &#125;, fail: function (err) &#123; console.error(&#x27;WebSocket è¿æ¥åˆ›å»ºå¤±è´¥&#x27;, err); &#125;, complete: function () &#123; console.log(&#x27;WebSocket è¿æ¥åˆ›å»ºå®Œæˆ&#x27;); &#125;&#125;);socket.onOpen(function () &#123; console.log(&quot;è¿æ¥åˆ°äº†&quot;) socket.send(&#123; data: &#x27;Hello from uni-app!&#x27; &#125;);&#125;);socket.onMessage(function (res) &#123; console.log(&#x27;æ”¶åˆ°æœåŠ¡å™¨å†…å®¹ï¼š&#x27; + JSON.stringify(res));&#125;);socket.onClose(function (res) &#123; console.log(&#x27;WebSocket å·²å…³é—­ï¼&#x27;);&#125;);// ç›‘å¬ WebSocket é”™è¯¯äº‹ä»¶socket.onError(function (res) &#123; console.error(&#x27;WebSocket è¿æ¥é”™è¯¯ï¼&#x27;);&#125;); æ€»ç»“æ€»ä½“æ¥è¯´æœ‰ç‚¹æ²™é›•ï¼Œæ—¢ç„¶ç”¨websocketçš„è¯ï¼Œé‚£ä¹‹å‰çš„äº‘å¼€å‘åç«¯ä¹Ÿåº”è¯¥å¯ä»¥ï¼Œç­‰äºè¯´ç»•äº†ä¸€å¤§åœˆæœ€ç»ˆå…¶å®ä¹Ÿå¯ä»¥ä¸è¿ç§»è¿™ä¸ªæ¥å£ã€‚ä½†é—®é¢˜æ˜¯æœ¬æ¥æˆ‘çš„éœ€è¦å¹¶ä¸æ˜¯ä¸€å®šè¦ç”¨websocketåªæ˜¯å•å‘æµå¼ä¼ è¾“å°±è¡Œäº†ï¼Œç°åœ¨å› ä¸ºå®¢æˆ·ç«¯çš„é—®é¢˜å¿…é¡»è¦ç”¨websocketï¼Œè¦æ˜¯ä¸€å¼€å§‹æ— è„‘ç”¨websocketåè€Œä¸ç”¨å¡é‚£ä¹ˆä¹…æœ‰ç‚¹é€—äº†","categories":[],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"SpringSecurityè¯¦è§£","slug":"SpringSecurityè¯¦è§£","date":"2022-08-25T06:11:53.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2022/08/25/SpringSecurityè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2022/08/25/SpringSecurity%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"ä¸€ã€SpringSecurityå…¥é—¨1.1 Spring Securityç®€ä»‹â€‹ Spring Securityæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶ã€‚å®ƒæ˜¯ç”¨äºä¿æŠ¤åŸºäº Springçš„åº”ç”¨ç¨‹åºçš„å®é™…æ ‡å‡†ã€‚Spring Securityæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè‡´åŠ›äºä¸ºJavaåº”ç”¨ç¨‹åºæä¾›èº«ä»½éªŒè¯å’Œæˆæƒã€‚ä¸æ‰€æœ‰Springé¡¹ç›®ä¸€æ ·ï¼ŒSpring Securityçš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥è½»æ¾æ‰©å±•ä»¥æ»¡è¶³è‡ªå®šä¹‰è¦æ±‚. å®˜ç½‘åœ°å€ï¼šhttps://spring.io/projects/spring-security 1.2 å®‰å…¨æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”ç›®å‰åœ¨æ•´ä¸ªJavaå¼€å‘çš„ç³»ç»Ÿä¸­,éœ€è¦ç”¨äºèº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶çš„æ¡†æ¶é™¤äº†Spring Security, è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯Apache shiroæ¡†æ¶. Shiro Shiroæ˜¯ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å¼€æºå®‰å…¨æ¡†æ¶ï¼Œèƒ½å¤Ÿéå¸¸æ¸…æ™°çš„å¤„ç†è®¤è¯ã€æˆæƒã€ç®¡ç†ä¼šè¯ä»¥åŠå¯†ç åŠ å¯†ã€‚å¦‚ä¸‹æ˜¯å®ƒæ‰€å…·æœ‰çš„ç‰¹ç‚¹ï¼š æ˜“äºç†è§£çš„ Java Security APIï¼› ç®€å•çš„èº«ä»½è®¤è¯ï¼ˆç™»å½•ï¼‰ï¼Œæ”¯æŒå¤šç§æ•°æ®æºï¼ˆLDAPï¼ŒJDBCï¼ŒKerberosï¼ŒActiveDirectoryç­‰ï¼‰ å¯¹è§’è‰²çš„ç®€å•çš„é‰´æƒï¼ˆè®¿é—®æ§åˆ¶ï¼‰ï¼Œæ”¯æŒç»†ç²’åº¦çš„é‰´æƒï¼› æ”¯æŒä¸€çº§ç¼“å­˜ï¼Œä»¥æå‡åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼› å†…ç½®çš„åŸºäº POJO ä¼ä¸šä¼šè¯ç®¡ç†ï¼Œé€‚ç”¨äº Web ä»¥åŠé Web çš„ç¯å¢ƒï¼› å¼‚æ„å®¢æˆ·ç«¯ä¼šè¯è®¿é—®ï¼› éå¸¸ç®€å•çš„åŠ å¯† APIï¼› ä¸è·Ÿä»»ä½•çš„æ¡†æ¶æˆ–è€…å®¹å™¨æ†ç»‘ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚ Spring Security é™¤äº†ä¸èƒ½è„±ç¦»Springï¼Œshiroçš„åŠŸèƒ½å®ƒéƒ½æœ‰ã€‚è€Œä¸”Spring Securityå¯¹Oauthã€OpenIDä¹Ÿæœ‰æ”¯æŒ,Shiroåˆ™éœ€è¦è‡ªå·±æ‰‹åŠ¨å®ç°ã€‚Spring Securityçš„æƒé™ç»†ç²’åº¦æ›´é«˜ã€‚ OAuthåœ¨â€å®¢æˆ·ç«¯â€ä¸â€æœåŠ¡æä¾›å•†â€ä¹‹é—´ï¼Œè®¾ç½®äº†ä¸€ä¸ªæˆæƒå±‚ï¼ˆauthorization layerï¼‰ã€‚â€å®¢æˆ·ç«¯â€ä¸èƒ½ç›´æ¥ç™»å½•â€æœåŠ¡æä¾›å•†â€ï¼Œåªèƒ½ç™»å½•æˆæƒå±‚ï¼Œä»¥æ­¤å°†ç”¨æˆ·ä¸å®¢æˆ·ç«¯åŒºåˆ†å¼€æ¥ã€‚â€å®¢æˆ·ç«¯â€ç™»å½•æˆæƒå±‚æ‰€ç”¨çš„ä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œä¸ç”¨æˆ·çš„å¯†ç ä¸åŒã€‚ç”¨æˆ·å¯ä»¥åœ¨ç™»å½•çš„æ—¶å€™ï¼ŒæŒ‡å®šæˆæƒå±‚ä»¤ç‰Œçš„æƒé™èŒƒå›´å’Œæœ‰æ•ˆæœŸã€‚â€œå®¢æˆ·ç«¯â€ç™»å½•æˆæƒå±‚ä»¥åï¼Œâ€æœåŠ¡æä¾›å•†â€æ ¹æ®ä»¤ç‰Œçš„æƒé™èŒƒå›´å’Œæœ‰æ•ˆæœŸï¼Œå‘â€å®¢æˆ·ç«¯â€å¼€æ”¾ç”¨æˆ·å‚¨å­˜çš„èµ„æ–™ã€‚ OpenID ç³»ç»Ÿçš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯èº«ä»½éªŒè¯ï¼Œå³å¦‚ä½•é€šè¿‡ URI æ¥è®¤è¯ç”¨æˆ·èº«ä»½ã€‚ç›®å‰çš„ç½‘ç«™éƒ½æ˜¯ä¾é ç”¨æˆ·åå’Œå¯†ç æ¥ç™»å½•è®¤è¯ï¼Œè¿™å°±æ„å‘³ç€å¤§å®¶åœ¨æ¯ä¸ªç½‘ç«™éƒ½éœ€è¦æ³¨å†Œç”¨æˆ·åå’Œå¯†ç ï¼Œå³ä¾¿ä½ ä½¿ç”¨çš„æ˜¯åŒæ ·çš„å¯†ç ã€‚å¦‚æœä½¿ç”¨ OpenID ï¼Œä½ çš„ç½‘ç«™åœ°å€ï¼ˆURIï¼‰å°±æ˜¯ä½ çš„ç”¨æˆ·åï¼Œè€Œä½ çš„å¯†ç å®‰å…¨çš„å­˜å‚¨åœ¨ä¸€ä¸ª OpenID æœåŠ¡ç½‘ç«™ä¸Šï¼ˆä½ å¯ä»¥è‡ªå·±å»ºç«‹ä¸€ä¸ª OpenID æœåŠ¡ç½‘ç«™ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸€ä¸ªå¯ä¿¡ä»»çš„ OpenID æœåŠ¡ç½‘ç«™æ¥å®Œæˆæ³¨å†Œï¼‰ã€‚ä¸OpenIDåŒå±æ€§çš„èº«ä»½è¯†åˆ«æœåŠ¡å•†è¿˜æœ‰â…¥eID,ClaimID,CardSpace,Rapleaf,Trufina ID Cardç­‰ï¼Œå…¶ä¸­â…¥eIDé€šç”¨è´¦æˆ·çš„åº”ç”¨æœ€ä¸ºå¹¿æ³› 1.3 Spring SecurityåŠŸèƒ½ç®€ä»‹ è®¤è¯: ç”¨æˆ·ç™»å½•, è§£å†³çš„æ˜¯â€ä½ æ˜¯è°?â€ æˆæƒ: åˆ¤æ–­ç”¨æˆ·æ‹¥æœ‰ä»€ä¹ˆæƒé™ï¼Œå¯ä»¥è®¿é—®ä»€ä¹ˆèµ„æº. è§£å†³çš„æ˜¯â€ä½ èƒ½å¹²ä»€ä¹ˆ?â€ å®‰å…¨é˜²æŠ¤ï¼Œé˜²æ­¢è·¨ç«™è¯·æ±‚ï¼Œsession æ”»å‡»ç­‰ 1.4 Spring Securityåº”ç”¨åœºæ™¯ ç”¨æˆ·ç™»å½•, ä¼ ç»ŸåŸºäºwebå¼€å‘çš„é¡¹ç›®çš„ç™»å½•åŠŸèƒ½. ç”¨æˆ·æˆæƒ, åœ¨ç³»ç»Ÿä¸­ç”¨æˆ·æ‹¥æœ‰å“ªäº›æ“ä½œæƒé™ å•ä¸€ç™»å½•, ä¸€ä¸ªè´¦å·åªèƒ½åœ¨åŒä¸€æ—¶é—´åªèƒ½åœ¨ä¸€ä¸ªåœ°æ–¹è¿›è¡Œç™»å½•, å¦‚æœåœ¨å…¶ä»–åœ°æ–¹è¿›è¡Œç¬¬äºŒæ¬¡ç™»å½•,åˆ™å‰”é™¤ä¹‹å‰ç™»å½•æ“ä½œ é›†æˆcas,åšå•ç‚¹ç™»å½•,å³å¤šä¸ªç³»ç»Ÿåªéœ€ç™»å½•ä¸€æ¬¡ï¼Œæ— éœ€é‡å¤ç™»å½• é›†æˆoauth2 ,åšç™»å½•æˆæƒ, å¯ä»¥ç”¨äºappç™»å½•å’Œç¬¬ä¸‰æ–¹ç™»å½•(QQ,å¾®ä¿¡ç­‰), ä¹Ÿå¯ä»¥å®ç°casçš„åŠŸèƒ½. 1.5 Spring Securityå…¥é—¨æ¡ˆä¾‹å¿«é€Ÿå¼€å§‹ 1.5.1 IDEAåˆ›å»ºå·¥ç¨‹ 1.5.2 ç¼–å†™Controller 123456789101112package cn.yournotes.security_demo.controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class HelloController &#123; @GetMapping(&quot;/hello&quot;) public String hello()&#123; return &quot;hello world&quot;; &#125;&#125; å¯åŠ¨æµ‹è¯• 1.5.3 åŠ å…¥Securityä¾èµ–1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt; å†æ¬¡å¯åŠ¨æµ‹è¯• æˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿä¸‹è¡¨å•é¡µé¢ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªç»“æ„ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š è¡¨å•çš„æäº¤æ–¹å¼æ˜¯postï¼Œæ¥å£åœ°å€æ˜¯/login æœ‰ä¸¤ä¸ªæ­£å¸¸çš„inputï¼Œä¸”inputå‚æ•°åç§°åˆ†åˆ«æ˜¯usernameå’Œpassword è¿˜æœ‰ä¸€ä¸ªéšè—åŸŸçš„inputï¼Œå‚æ•°åæ˜¯_csrf SpringBootå·²ç»ä¸ºSpringSecurityæä¾›äº†é»˜è®¤é…ç½®ï¼Œé»˜è®¤å·¥ç¨‹ä¸­æ‰€æœ‰èµ„æºéƒ½å¿…é¡»é€šè¿‡Securityè®¤è¯åæ‰èƒ½è®¿é—®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼æ­¤åˆ»å¹¶æ²¡æœ‰è¿æ¥æ•°æ®åº“ï¼Œä¹Ÿå¹¶æœªåœ¨å†…å­˜ä¸­æŒ‡å®šè®¤è¯ç”¨æˆ·ï¼Œå¦‚ä½•è®¤è¯å‘¢ï¼Ÿ å…¶å®SpringBootå·²ç»æä¾›äº†é»˜è®¤ç”¨æˆ·åuserï¼Œå¯†ç åœ¨é¡¹ç›®å¯åŠ¨æ—¶éšæœºç”Ÿæˆï¼Œå¦‚å›¾ï¼š è®¤è¯é€šè¿‡ç»§ç»­è®¿é—®å¤„ç†å™¨èµ„æº äºŒã€SpringSecurityè®¤è¯ è¯´æ˜ï¼šä¸ºæ–¹ä¾¿å­¦ä¹ ï¼Œè¿™é‡Œå·²ç»äº‹å…ˆä¸ºå‡†å¤‡å¥½ä¸€ä¸ªåŠæˆå“çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œè€Œæƒ³è¦å®Œå–„å¦ä¸€éƒ¨åˆ†ï¼Œå°±éœ€è¦ç”¨åˆ°ä»Šå¤©å­¦ä¹ çš„å†…å®¹SpringSecurityäº†ï¼ 2.1 ä¸‹è½½æ¡ˆä¾‹å…ˆä¸‹è½½ç›¸å…³èµ„æºä»£ç ä»¥åŠSQLï¼š å¯¼å…¥æ•°æ® åˆ›å»ºä¸ªæ•°æ®åº“security_managementç„¶åå¯¼å…¥ç´ æå½“ä¸­çš„sqlæ–‡ä»¶ï¼š å¯¼å…¥å·¥ç¨‹ å¯åŠ¨ 2.2 SpringSecurityè®¤è¯åŸºæœ¬åŸç†ä¸ä¸¤ç§æ–¹å¼ç°åœ¨åœ¨åˆå§‹é¡¹ç›®ä¸­æ˜¯æ²¡æœ‰è®¤è¯çš„ï¼Œç›´æ¥è¿›å…¥é¦–é¡µã€‚é‚£ä¹ˆç°åœ¨æˆ‘ä»¬ç»™å®ƒåŠ ä¸ŠSecurityä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt; 2.2.1 è¿‡æ»¤é“¾ä»‹ç»åœ¨ä½¿ç”¨SpringSecurityæ¡†æ¶ï¼Œè¯¥æ¡†æ¶ä¼šé»˜è®¤è‡ªåŠ¨åœ°æ›¿æˆ‘ä»¬å°†ç³»ç»Ÿä¸­çš„èµ„æºè¿›è¡Œä¿æŠ¤ï¼Œæ¯æ¬¡è®¿é—®èµ„æºçš„æ—¶å€™éƒ½å¿…é¡»ç»è¿‡ä¸€å±‚èº«ä»½çš„æ ¡éªŒï¼Œå¦‚æœé€šè¿‡äº†åˆ™é‡å®šå‘åˆ°æˆ‘ä»¬è¾“å…¥çš„urlä¸­ï¼Œå¦åˆ™è®¿é—®æ˜¯è¦è¢«æ‹’ç»çš„ã€‚é‚£ä¹ˆSpringSecurityæ¡†æ¶æ˜¯å¦‚ä½•å®ç°çš„å‘¢? Spring SecurityåŠŸèƒ½çš„å®ç°ä¸»è¦æ˜¯ç”±ä¸€ç³»åˆ—è¿‡æ»¤å™¨ç›¸äº’é…åˆå®Œæˆã€‚ä¹Ÿç§°ä¹‹ä¸ºè¿‡æ»¤å™¨é“¾. è¿‡æ»¤å™¨æ˜¯ä¸€ç§å…¸å‹çš„AOPæ€æƒ³ï¼Œä¸‹é¢ç®€å•äº†è§£ä¸‹è¿™äº›è¿‡æ»¤å™¨é“¾,åç»­å†æºç å‰–æä¸­åœ¨æ¶‰åŠåˆ°è¿‡æ»¤å™¨é“¾ä¹‹åå†ä»”ç»†è®²è§£. org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter æ ¹æ®è¯·æ±‚å°è£…è·å–WebAsyncManagerï¼Œä»WebAsyncManagerè·å–&#x2F;æ³¨å†Œçš„å®‰å…¨ä¸Šä¸‹æ–‡å¯è°ƒç”¨å¤„ç†æ‹¦æˆªå™¨ org.springframework.security.web.context.SecurityContextPersistenceFilter SecurityContextPersistenceFilterä¸»è¦æ˜¯ä½¿ç”¨SecurityContextRepositoryåœ¨sessionä¸­ä¿å­˜æˆ–æ›´æ–°ä¸€ä¸ªSecurityContextï¼Œå¹¶å°†SecurityContextç»™ä»¥åçš„è¿‡æ»¤å™¨ä½¿ç”¨ï¼Œæ¥ä¸ºåç»­fifilterå»ºç«‹æ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚SecurityContextä¸­å­˜å‚¨äº†å½“å‰ç”¨æˆ·çš„è®¤è¯ä»¥åŠæƒé™ä¿¡æ¯ã€‚ org.springframework.security.web.header.HeaderWriterFilter å‘è¯·æ±‚çš„Headerä¸­æ·»åŠ ç›¸åº”çš„ä¿¡æ¯,å¯åœ¨httpæ ‡ç­¾å†…éƒ¨ä½¿ç”¨security:headersæ¥æ§åˆ¶ org.springframework.security.web.csrf.CsrfFilter csrfåˆç§°è·¨åŸŸè¯·æ±‚ä¼ªé€ ï¼ŒSpringSecurityä¼šå¯¹æ‰€æœ‰postè¯·æ±‚éªŒè¯æ˜¯å¦åŒ…å«ç³»ç»Ÿç”Ÿæˆçš„csrfçš„tokenä¿¡æ¯ï¼Œå¦‚æœä¸åŒ…å«ï¼Œåˆ™æŠ¥é”™ã€‚èµ·åˆ°é˜²æ­¢csrfæ”»å‡»çš„æ•ˆæœã€‚ org.springframework.security.web.authentication.logout.LogoutFilter åŒ¹é…URLä¸º&#x2F;logoutçš„è¯·æ±‚ï¼Œå®ç°ç”¨æˆ·é€€å‡º,æ¸…é™¤è®¤è¯ä¿¡æ¯ã€‚ org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter è¡¨å•è®¤è¯æ“ä½œå…¨é è¿™ä¸ªè¿‡æ»¤å™¨ï¼Œé»˜è®¤åŒ¹é…URLä¸º&#x2F;loginä¸”å¿…é¡»ä¸ºPOSTè¯·æ±‚ã€‚ org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter å¦‚æœæ²¡æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè®¤è¯é¡µé¢ï¼Œåˆ™ç”±è¯¥è¿‡æ»¤å™¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤è®¤è¯é¡µé¢ã€‚ org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter ç”±æ­¤è¿‡æ»¤å™¨å¯ä»¥ç”Ÿäº§ä¸€ä¸ªé»˜è®¤çš„é€€å‡ºç™»å½•é¡µé¢ org.springframework.security.web.authentication.www.BasicAuthenticationFilter æ­¤è¿‡æ»¤å™¨ä¼šè‡ªåŠ¨è§£æHTTPè¯·æ±‚ä¸­å¤´éƒ¨åå­—ä¸ºAuthenticationï¼Œä¸”ä»¥Basicå¼€å¤´çš„å¤´ä¿¡æ¯ã€‚ org.springframework.security.web.savedrequest.RequestCacheAwareFilter é€šè¿‡HttpSessionRequestCacheå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªRequestCacheï¼Œç”¨äºç¼“å­˜HttpServletRequest org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter é’ˆå¯¹ServletRequestè¿›è¡Œäº†ä¸€æ¬¡åŒ…è£…ï¼Œä½¿å¾—requestå…·æœ‰æ›´åŠ ä¸°å¯Œçš„API org.springframework.security.web.authentication.AnonymousAuthenticationFilter å½“SecurityContextHolderä¸­è®¤è¯ä¿¡æ¯ä¸ºç©º,åˆ™ä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åç”¨æˆ·å­˜å…¥åˆ°SecurityContextHolderä¸­ã€‚spring securityä¸ºäº†å…¼å®¹æœªç™»å½•çš„è®¿é—®ï¼Œä¹Ÿèµ°äº†ä¸€å¥—è®¤è¯æµç¨‹ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªåŒ¿åçš„èº«ä»½ã€‚ org.springframework.security.web.session.SessionManagementFilter securityContextRepositoryé™åˆ¶åŒä¸€ç”¨æˆ·å¼€å¯å¤šä¸ªä¼šè¯çš„æ•°é‡ org.springframework.security.web.access.ExceptionTranslationFilter å¼‚å¸¸è½¬æ¢è¿‡æ»¤å™¨ä½äºæ•´ä¸ªspringSecurityFilterChainçš„åæ–¹ï¼Œç”¨æ¥è½¬æ¢æ•´ä¸ªé“¾è·¯ä¸­å‡ºç°çš„å¼‚å¸¸ org.springframework.security.web.access.intercept.FilterSecurityInterceptor è·å–æ‰€é…ç½®èµ„æºè®¿é—®çš„æˆæƒä¿¡æ¯ï¼Œæ ¹æ®SecurityContextHolderä¸­å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯æ¥å†³å®šå…¶æ˜¯å¦æœ‰æƒé™ã€‚ Spring Securityé»˜è®¤ä¼šåŠ è½½15ä¸ªè¿‡æ»¤å™¨, ä½†æ˜¯éšç€é…ç½®å¯ä»¥å¢åŠ æˆ–è€…åˆ é™¤ä¸€äº›è¿‡æ»¤å™¨. 2.2.2 è®¤è¯æ–¹å¼HttpBasicè®¤è¯ HttpBasicç™»å½•éªŒè¯æ¨¡å¼æ˜¯Spring Securityå®ç°ç™»å½•éªŒè¯æœ€ç®€å•çš„ä¸€ç§æ–¹å¼ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯æœ€ç®€é™‹çš„ä¸€ç§æ–¹å¼ã€‚å®ƒçš„ç›®çš„å¹¶ä¸æ˜¯ä¿éšœç™»å½•éªŒè¯çš„ç»å¯¹å®‰å…¨ï¼Œè€Œæ˜¯æä¾›ä¸€ç§â€œé˜²å›å­ä¸é˜²å°äººâ€çš„ç™»å½•éªŒè¯ã€‚ åœ¨ä½¿ç”¨çš„Spring Bootæ—©æœŸç‰ˆæœ¬ä¸º1.Xç‰ˆæœ¬,ä¾èµ–çš„Security 4.Xç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±æ— éœ€ä»»ä½•é…ç½®ï¼Œå¯åŠ¨é¡¹ç›®è®¿é—®åˆ™ä¼šå¼¹å‡ºé»˜è®¤çš„httpbasicè®¤è¯ã€‚ç°åœ¨ä½¿ç”¨çš„æ˜¯spring boot2.0ä»¥ä¸Šç‰ˆæœ¬ï¼ˆä¾èµ–Security5.Xç‰ˆæœ¬ï¼‰ï¼ŒHttpBasicä¸å†æ˜¯é»˜è®¤çš„éªŒè¯æ¨¡å¼ï¼Œåœ¨spring security 5.xé»˜è®¤çš„éªŒè¯æ¨¡å¼å·²ç»æ˜¯è¡¨å•æ¨¡å¼ã€‚ HttpBasicæ¨¡å¼è¦æ±‚ä¼ è¾“çš„ç”¨æˆ·åå¯†ç ä½¿ç”¨Base64æ¨¡å¼è¿›è¡ŒåŠ å¯†ã€‚å¦‚æœç”¨æˆ·åæ˜¯ â€œadminâ€ ï¼Œå¯†ç æ˜¯â€œ adminâ€,åˆ™å°†å­—ç¬¦ä¸²â€admin:adminâ€ ä½¿ç”¨Base64ç¼–ç ç®—æ³•åŠ å¯†ã€‚åŠ å¯†ç»“æœå¯èƒ½æ˜¯ï¼šYWtaW46YWRtaW4&#x3D;ã€‚HttpBasicæ¨¡å¼çœŸçš„æ˜¯éå¸¸ç®€å•åˆç®€é™‹çš„éªŒè¯æ¨¡å¼ï¼ŒBase64çš„åŠ å¯†ç®—æ³•æ˜¯å¯é€†çš„,æƒ³è¦ç ´è§£å¹¶ä¸éš¾. FormLoginè®¤è¯ Spring Securityçš„HttpBasicæ¨¡å¼ï¼Œè¯¥æ¨¡å¼æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯è¿›è¡Œäº†é€šè¿‡æºå¸¦Httpçš„Headerè¿›è¡Œç®€å•çš„ç™»å½•éªŒè¯ï¼Œè€Œä¸”æ²¡æœ‰å®šåˆ¶çš„ç™»å½•é¡µé¢ï¼Œæ‰€ä»¥ä½¿ç”¨åœºæ™¯æ¯”è¾ƒçª„ã€‚å¯¹äºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç³»ç»Ÿï¼Œä¸ç™»å½•éªŒè¯ç›¸å…³çš„é¡µé¢éƒ½æ˜¯é«˜åº¦å®šåˆ¶åŒ–çš„ï¼Œéå¸¸ç¾è§‚è€Œä¸”æä¾›å¤šç§ç™»å½•æ–¹å¼ã€‚è¿™å°±éœ€è¦Spring Securityæ”¯æŒæˆ‘ä»¬è‡ªå·±å®šåˆ¶ç™»å½•é¡µé¢, spring boot2.0ä»¥ä¸Šç‰ˆæœ¬ï¼ˆä¾èµ–Security 5.Xç‰ˆæœ¬ï¼‰é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªç™»å½•é¡µé¢. 2.3 è¡¨å•è®¤è¯2.3.1 è‡ªå®šä¹‰è¡¨å•ç™»å½•é¡µé¢ç¼–å†™SecurityConfigurationé…ç½®ç±» 123456789101112@Configurationpublic class SecurityConfiguration extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/login.html&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ &#125;&#125; å¯åŠ¨åè®¿é—®ä¼šå‘ç°æœ‰é—®é¢˜ï¼š é‡å®šå‘æ¬¡æ•°è¿‡å¤š åŸå› åœ¨äºæˆ‘ä»¬è®¾ç½®äº†å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè®¤è¯ï¼Œå› æ­¤è®¿é—®login.htmlèµ„æºæ—¶ä¹Ÿéœ€è¦è¿›è¡Œè®¤è¯è€Œè®¤è¯é¡µ åˆæ˜¯è®¿é—®login.htmlå› æ­¤é™·å…¥æ­»å¾ªç¯ã€‚å®ƒæœ¬èº«çš„ç™»å½•ä¸éœ€è¦é¢å¤–é…å°±ä¼šè¿‡æ»¤ï¼Œä½†æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„ç™»å½•é¡µå®ƒä¸ä¼šå¸®æˆ‘ä»¬å»è¿‡æ»¤æ‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ”¾è¡Œã€‚ 12345678910111213@Configurationpublic class SecurityConfiguration extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/login.html&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .antMatchers(&quot;/login.html&quot;).permitAll() //è¿™ä¸ªè¯·æ±‚å¼€å…è®¸ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ &#125;&#125; å†æ¬¡å¯åŠ¨ 404 å› ä¸ºåœ¨Springbootéƒ½æ˜¯è¯·æ±‚çš„æ–¹å¼pathéƒ½æ˜¯æ‰¾controllerï¼Œå®ƒä¸ä¼šå»èµ„æºæ–‡ä»¶å»åŠ è½½ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æˆæ¥å£è·¯å¾„åœ¨æ¥å£é‡Œé¢è¿”å›é¡µé¢ã€‚ åœ¨é¡¹ç›®é‡Œé¢å·²ç»æœ‰äº†è¿™ä¸ªæ¥å£ï¼Œé…ç½®æ–‡ä»¶é…ç½®äº†å‰ç¼€templatsä»¥åŠåç¼€.html å› æ­¤è¿”å›loginå°±å¯åœ¨èµ„æºæ–‡ä»¶æ‰¾åˆ°é¡µé¢ 12345678910111213@Configurationpublic class SecurityConfiguration extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .antMatchers(&quot;/toLoginPage&quot;).permitAll() //è¿™ä¸ªè¯·æ±‚å¼€å…è®¸ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ &#125;&#125; ä¿®æ”¹åå†æ¬¡å¯åŠ¨ï¼Œè¿™æ¬¡ä¼šå‡ºç°æ ·å¼ä¸¢å¤±çš„é—®é¢˜ æ ·å¼ä¸¢å¤± è¿™ä¸ªå¾ˆæ˜¾ç„¶å°±æ˜¯è¿™äº›èµ„æºè¯·æ±‚è¢«æ‹¦æˆªçš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Securityé…ç½®å½“ä¸­é€šè¿‡WebSecurityå»å¿½ç•¥æŒ‡å®šçš„å†…å®¹ä¸å‚ä¸å®‰å…¨æ§åˆ¶ã€‚ 123456789101112131415161718@Configurationpublic class SecurityConfiguration extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .antMatchers(&quot;/toLoginPage&quot;).permitAll() //è¿™ä¸ªè¯·æ±‚å¼€å…è®¸ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ &#125; @Override public void configure(WebSecurity web) throws Exception &#123; web.ignoring().antMatchers(&quot;/css/**&quot;, &quot;/images/**&quot;, &quot;/js/**&quot;, &quot;/favicon.ico&quot;); &#125;&#125; Spring Securityä¸­ï¼Œå®‰å…¨æ„å»ºå™¨HttpSecurityå’ŒWebSecurityçš„åŒºåˆ«æ˜¯ : WebSecurityä¸ä»…é€šè¿‡HttpSecurityå®šä¹‰æŸäº›è¯·æ±‚çš„å®‰å…¨æ§åˆ¶ï¼Œä¹Ÿé€šè¿‡å…¶ä»–æ–¹å¼å®šä¹‰å…¶ä»–æŸäº›è¯·æ±‚å¯ä»¥å¿½ç•¥å®‰å…¨æ§åˆ¶; HttpSecurityä»…ç”¨äºå®šä¹‰éœ€è¦å®‰å…¨æ§åˆ¶çš„è¯·æ±‚(å½“ç„¶HttpSecurityä¹Ÿå¯ä»¥æŒ‡å®šæŸäº›è¯·æ±‚ä¸éœ€è¦å®‰å…¨æ§åˆ¶); å¯ä»¥è®¤ä¸ºHttpSecurityæ˜¯WebSecurityçš„ä¸€éƒ¨åˆ†ï¼ŒWebSecurityæ˜¯åŒ…å«HttpSecurityçš„æ›´å¤§çš„ä¸€ä¸ªæ¦‚å¿µ; æ„å»ºç›®æ ‡ä¸åŒ WebSecurityæ„å»ºç›®æ ‡æ˜¯æ•´ä¸ªSpring Securityå®‰å…¨è¿‡æ»¤å™¨FilterChainProxy, HttpSecurityçš„æ„å»ºç›®æ ‡ä»…ä»…æ˜¯FilterChainProxyä¸­çš„ä¸€ä¸ªSecurityFilterChainã€‚ 2.3.2 è¡¨å•ç™»å½•åœ¨ä¸Šé¢è¿‡æ»¤å™¨é“¾ä¸­æˆ‘ä»¬çŸ¥é“æœ‰ä¸€ä¸ªè¿‡æ»¤å™¨å«åšUsernamePasswordAuthenticationFilteræ˜¯å¤„ç†è¡¨å•ç™»å½•çš„ï¼Œé‚£ä¹ˆç°åœ¨æ¥è§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªè¿‡æ»¤å™¨ã€‚ åœ¨æºç å½“ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¡¨å•ä¸­ä¸¤ä¸ªinputçš„nameåˆ†åˆ«æ˜¯usernameå’Œpasswordå‚æ•°ï¼Œè·¯å¾„ä¸º&#x2F;loginï¼Œæ–¹å¼æ˜¯POSTã€‚è¿™äº›éƒ½å¯ä»¥ä¿®æ”¹ä¸ºè‡ªå®šä¹‰çš„å€¼ 123456789101112131415@Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .loginProcessingUrl(&quot;/login&quot;) // ç™»å½•æ¥å£url .usernameParameter(&quot;username&quot;).passwordParameter(&quot;password&quot;) //è‡ªå®šä¹‰è¡¨å•name .successForwardUrl(&quot;/&quot;) //ç™»å½•æˆåŠŸè·³è½¬ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .antMatchers(&quot;/toLoginPage&quot;).permitAll() //è¿™ä¸ªè¯·æ±‚å¼€å…è®¸ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ // å…³é—­scrfé˜²æŠ¤ http.csrf().disable(); &#125; åç«¯å…³äºloginæ¥å£çš„å‚æ•°ã€è·¯å¾„ã€ç±»å‹å®šä¹‰å¥½åï¼Œé‚£ä¹ˆè‡ªå®šä¹‰é¡µé¢è¿›è¡Œå¯¹åº”çš„è¯·æ±‚å³å¯ã€‚ é…ç½®å®Œæˆé‡å¯è¿›è¡Œç™»å½•ç”¨æˆ·åuserã€å¯†ç åœ¨åç«¯æ§åˆ¶å°ç”Ÿæˆ ç™»å½•å®Œæˆå‘ç°è¿˜æ˜¯æœ‰æ–°é—®é¢˜ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯æ‹’ç»è¯·æ±‚ é—®é¢˜åœ¨äºï¼Œåœ¨é¦–é¡µæœ€ä¸‹é¢ä½¿ç”¨äº†iframe å‘ç°è¡Œå†…æ¡†æ¶iframeè¿™é‡Œå‡ºç°é—®é¢˜äº†. Spring Securityä¸‹ï¼ŒX-Frame-Optionsé»˜è®¤ä¸ºDENYï¼Œå…¶å®éSpringSecurityç¯å¢ƒä¸‹ï¼ŒX-Frame-Optionsçš„é»˜è®¤å¤§å¤šä¹Ÿæ˜¯DENYï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‹’ç»å½“å‰é¡µé¢åŠ è½½ä»»ä½•Frameé¡µé¢ï¼Œè®¾ç½®å«ä¹‰å¦‚ä¸‹ï¼š DENYï¼šæµè§ˆå™¨æ‹’ç»å½“å‰é¡µé¢åŠ è½½ä»»ä½•Frameé¡µé¢ æ­¤é€‰æ‹©æ˜¯é»˜è®¤çš„. SAMEORIGINï¼šframeé¡µé¢çš„åœ°å€åªèƒ½ä¸ºåŒæºåŸŸåä¸‹çš„é¡µé¢ é‚£ä¹ˆéœ€è¦å“åº”æ—¶éœ€è¦å…è®¸iframeçš„åŠ è½½ 1234567891011121314151617@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .loginProcessingUrl(&quot;/login&quot;) // ç™»å½•æ¥å£url .usernameParameter(&quot;username&quot;).passwordParameter(&quot;password&quot;) //è‡ªå®šä¹‰è¡¨å•name .successForwardUrl(&quot;/&quot;) //ç™»å½•æˆåŠŸè·³è½¬ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .antMatchers(&quot;/toLoginPage&quot;).permitAll() //è¿™ä¸ªè¯·æ±‚å¼€å…è®¸ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ // å…³é—­scrfé˜²æŠ¤ http.csrf().disable(); // å…è®¸iframeåŠ è½½é¡µé¢ http.headers().frameOptions().sameOrigin();&#125; 2.3.3 åŸºäºæ•°æ®åº“å®ç°è®¤è¯åŠŸèƒ½ç›®å‰è®¤è¯ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„ç”¨æˆ·åuserä»¥åŠè‡ªåŠ¨ç”Ÿæˆæ‰“å°åœ¨æ§åˆ¶å°çš„ç§˜å¯†ï¼Œé‚£ä¹ˆç°åœ¨è¦å°†ç”¨æˆ·å‡­è¯é…ç½®åœ¨æ•°æ®åº“ã€‚ å®ç°è¿™æ ·çš„åŠŸèƒ½å°±éœ€è¦å®ç°securityå½“ä¸­çš„UserDetailsServiceæ¥å£ï¼Œé‡å†™é‡Œé¢çš„loadUserByUsernameè¿›è¡Œè‡ªå®šä¹‰æ ¡éªŒå³å¯ã€‚ æ–¹æ³•ä¼ è¿›æ¥çš„å‚æ•°æ˜¯ç”¨æˆ·åï¼Œæ‹¿å»ç”¨è‡ªå·±çš„serviceå»æ•°æ®åº“æŸ¥å¤„ç”¨æˆ·å®ä½“ 1234567891011121314151617181920212223242526@Servicepublic class MyUserDetailsService implements UserDetailsService &#123; @Autowired UserService userService; @Override public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException &#123; UserVo user = userService.findByUsername(s); if(user == null)&#123; throw new UsernameNotFoundException(&quot;æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç”¨æˆ·å:&quot;+s); &#125; // å…ˆå£°æ˜ä¸€ä¸ªæƒé™é›†åˆ,æ„é€ å‡½æ•°å¿…é¡»ä¼ å€¼ä¸”ä¸èƒ½ä¸ºnull,ä¼ ä¸ªç©ºé›†åˆå³å¯ Collection&lt;? extends GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;(); // éœ€è¦è¿”å›ä¸€ä¸ªSpringSecurityçš„UserDetailså¯¹è±¡ UserDetails userDetails = new User( user.getUsername(), // ç”¨æˆ·å &quot;&#123;noop&#125;&quot;+user.getPassword(), //å¯†ç &#123;noop&#125;è¡¨ç¤ºä¸åŠ å¯† true, // ç”¨æˆ·æ˜¯å¦å¯ç”¨ trueå¯ç”¨ true, // ç”¨æˆ·æ˜¯å¦è¿‡æœŸ trueæ²¡è¿‡æœŸ true, // ç”¨æˆ·å‡­è¯æ˜¯å¦è¿‡æœŸ trueæ²¡è¿‡æœŸ true, // æ˜¯å¦é”å®š trueæœªé”å®š authorities ); return userDetails; &#125;&#125; å®šä¹‰å¥½æˆ‘ä»¬çš„è®¤è¯é€»è¾‘åï¼Œå°†è¿™ä¸ªé€»è¾‘é…ç½®åˆ°Securityå½“ä¸­ï¼Œä¸€æ ·è¿˜æ˜¯åœ¨SecurityConfigurationçš„configureé‡è½½æ–¹æ³•è¿›è¡Œé…ç½® 1234@Overrideprotected void configure(AuthenticationManagerBuilder auth) throws Exception &#123; auth.userDetailsService(myUserDetailsService);&#125; 2.3.4 å¯†ç åŠ å¯†è®¤è¯åœ¨åŸºäºæ•°æ®åº“å®Œæˆç”¨æˆ·ç™»å½•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å¯†ç æ˜¯æ˜æ–‡ï¼Œç»™å‡ºUserDetailsæ—¶å¯†ç ä½¿ç”¨äº†&#123;noop&#125;è¿›è¡Œæ ‡è®°ã€‚é‚£ä¹ˆä¸‹é¢å¯¹SpringSecurityä¸­å¯†ç ç¼–ç è¿›è¡Œä¸€äº›æ¢è®¨ã€‚ SpringSecurityå½“ä¸­PasswordEncoderå°±æ˜¯å¯¹æˆ‘ä»¬å¯†ç è¿›è¡Œç¼–ç çš„å·¥å…·æ¥å£ã€‚è¯¥æ¥å£æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼šä¸€ä¸ªæ˜¯åŒ¹é…éªŒè¯ã€‚å¦ä¸€ä¸ªæ˜¯å¯†ç ç¼–ç ã€‚ BCryptç®—æ³•ä»‹ç» ä»»ä½•åº”ç”¨è€ƒè™‘åˆ°å®‰å…¨ï¼Œç»ä¸èƒ½æ˜æ–‡çš„æ–¹å¼ä¿å­˜å¯†ç ã€‚å¯†ç åº”è¯¥é€šè¿‡å“ˆå¸Œç®—æ³•è¿›è¡ŒåŠ å¯†ã€‚ æœ‰å¾ˆå¤šæ ‡å‡†çš„ç®—æ³•æ¯”å¦‚SHAæˆ–è€…MD5ï¼Œç»“åˆsalt(ç›)æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ Spring Security æä¾›äº†BCryptPasswordEncoderç±»,å®ç°Springçš„PasswordEncoderæ¥å£ä½¿ç”¨BCryptå¼ºå“ˆå¸Œæ–¹æ³•æ¥åŠ å¯†å¯†ç ã€‚BCryptå¼ºå“ˆå¸Œæ–¹æ³• æ¯æ¬¡åŠ å¯†çš„ç»“æœéƒ½ä¸ä¸€æ ·,æ‰€ä»¥æ›´åŠ çš„å®‰å…¨ã€‚ bcryptç®—æ³•ç›¸å¯¹æ¥è¯´æ˜¯è¿ç®—æ¯”è¾ƒæ…¢çš„ç®—æ³•ï¼Œåœ¨å¯†ç å­¦ç•Œæœ‰å¥å¸¸è¯ï¼šè¶Šæ…¢çš„ç®—æ³•è¶Šå®‰å…¨ã€‚é»‘å®¢ç ´è§£æˆæœ¬è¶Šé«˜.é€šè¿‡saltå’Œconstè¿™ä¸¤ä¸ªå€¼æ¥å‡ç¼“åŠ å¯†è¿‡ç¨‹ï¼Œå®ƒçš„åŠ å¯†æ—¶é—´ï¼ˆç™¾msçº§ï¼‰è¿œè¿œè¶…è¿‡md5ï¼ˆå¤§æ¦‚1mså·¦å³ï¼‰ã€‚å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼ŒBcrypt çš„è®¡ç®—é€Ÿåº¦å¾ˆæ…¢ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ç®—æ…¢ã€‚bcryptæ˜¯å•å‘çš„ï¼Œè€Œä¸”ç»è¿‡saltå’Œcostçš„å¤„ç†ï¼Œä½¿å…¶å—æ”»å‡»ç ´è§£çš„æ¦‚ç‡å¤§å¤§é™ä½ï¼ŒåŒæ—¶ç ´è§£çš„éš¾åº¦ä¹Ÿæå‡ä¸å°‘ï¼Œç›¸å¯¹äºMD5ç­‰åŠ å¯†æ–¹å¼æ›´åŠ å®‰å…¨ï¼Œè€Œä¸”ä½¿ç”¨ä¹Ÿæ¯”è¾ƒç®€å• bcryptåŠ å¯†åçš„å­—ç¬¦ä¸²å½¢å¦‚ï¼š$2a$10$wouq9P/HNgvYj2jKtUN8rOJJNRVCWvn1XoWy55N3sCkEHZPo3lyWq å…¶ä¸­$æ˜¯åˆ†å‰²ç¬¦ï¼Œæ— æ„ä¹‰ï¼›2aæ˜¯bcryptåŠ å¯†ç‰ˆæœ¬å·ï¼›10æ˜¯constçš„å€¼ï¼›è€Œåçš„å‰22ä½æ˜¯saltå€¼ï¼›å†ç„¶åçš„å­—ç¬¦ä¸²å°±æ˜¯å¯†ç çš„å¯†æ–‡äº†ï¼›è¿™é‡Œçš„constå€¼å³ç”Ÿæˆsaltçš„è¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯10ï¼Œæ¨èå€¼12ã€‚ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨BCrypt PasswordEncoderæœ‰å¾ˆå¤šå®ç°ç±»å› æ­¤æ˜¯æä¾›äº†å·¥å‚æ–¹æ³•æ¨¡å¼å»åˆ›å»ºï¼Œé€šè¿‡æŒ‡å®šä¸åŒçš„å‚æ•°å¾—åˆ°ä¸åŒçš„å…·ä½“ç¼–ç å™¨ æ­¤å·¥å‚ç±»æ˜¯PasswordEncoderFactories ä¹‹å‰æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¯†ç ä½¿ç”¨çš„æ˜¯æ˜æ–‡çš„æ˜¯noop , ä»£è¡¨ä¸åŠ å¯†ä½¿ç”¨æ˜æ–‡å¯†ç , ç°åœ¨ç”¨BCryptåªéœ€è¦å°†noop æ¢æˆbcrypt å³å¯ &#123;noop&#125; æ”¹æˆ &#123;bcrypt&#125; åä¹Ÿè®°å¾—è¦å°†æ•°æ®åº“çš„å¯†ç æ”¹ä¸ºåŠ å¯†åçš„å¯†ç ï¼Œå¦åˆ™åœ¨è®¤è¯æ—¶å¯¹æ•°æ®åº“å¯†ç è¿›è¡Œè§£å¯†å°±å¯¹ä¸ä¸Šäº†ã€‚ æ—¢ç„¶æˆ‘ä»¬æŒ‡å®šäº†&#123;bcrypt&#125; ï¼Œé‚£å°±çœ‹çœ‹bcryptç¼–ç å™¨å¯¹æŒ‡å®šçš„å¯†ç è¿›è¡ŒåŠ å¯†çš„ç»“æœï¼Œå¤åˆ¶åˆ°æ•°æ®åº“å³å¯ ç™»å½•æˆåŠŸ 2.3.5 è·å–å½“å‰ç™»å½•ç”¨æˆ·åœ¨ä¼ ç»Ÿwebç³»ç»Ÿä¸­, æˆ‘ä»¬å°†ç™»å½•æˆåŠŸçš„ç”¨æˆ·æ”¾å…¥sessionä¸­, åœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥ä»sessionä¸­è·å–ç”¨æˆ·,é‚£ä¹ˆSpring Securityä¸­æˆ‘ä»¬å¦‚ä½•è·å–å½“å‰å·²ç»ç™»å½•çš„ç”¨æˆ·å‘¢? SecurityContextHolder ä¿ç•™ç³»ç»Ÿå½“å‰çš„å®‰å…¨ä¸Šä¸‹æ–‡SecurityContextï¼Œå…¶ä¸­å°±åŒ…æ‹¬å½“å‰ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯ã€‚ SecurityContext å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œè·å–å½“å‰ç»è¿‡èº«ä»½éªŒè¯çš„ä¸»ä½“æˆ–è€…èº«ä»½éªŒè¯è¯·æ±‚ä»¤ç‰Œ ä»£ç å®ç°ï¼š 123456@RequestMapping(&quot;/loginUser&quot;)@ResponseBodypublic UserDetails getCurrentUser()&#123; UserDetails userDetails = (UserDetails)SecurityContextHolder.getContext().getAuthentication().getPrincipal(); return userDetails;&#125; é™¤äº†ä¸Šè¿°æ–¹æ³•, Spring Security è¿˜æä¾›äº†2ç§æ–¹å¼å¯ä»¥è·å–. 123456789101112@RequestMapping(&quot;/loginUser01&quot;)@ResponseBodypublic UserDetails getCurrentUser(Authentication auth)&#123; UserDetails userDetails = (UserDetails)auth.getContext().getAuthentication().getPrincipal(); return userDetails;&#125;@RequestMapping(&quot;/loginUser02&quot;)@ResponseBodypublic UserDetails getCurrentUser(getCurrentUser(@AuthenticationPrincipal UserDetails userDetails)&#123; return userDetails;&#125; 2.3.6 remember me è®°ä½æˆ‘åœ¨å¤§å¤šæ•°ç½‘ç«™ä¸­ï¼Œéƒ½ä¼šå®ç°RememberMeè¿™ä¸ªåŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨ä¸‹ä¸€æ¬¡ç™»å½•æ—¶ç›´æ¥ç™»å½•ï¼Œé¿å…å†æ¬¡è¾“å…¥ç”¨æˆ·åä»¥åŠå¯†ç å»ç™»å½•,Spring Securityé’ˆå¯¹è¿™ä¸ªåŠŸèƒ½å·²ç»å¸®åŠ©æˆ‘ä»¬å®ç°ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹ä»–çš„åŸç†å›¾ï¼š 2.3.6.1 ç®€å•ç”ŸæˆTokenæ–¹æ³• Token&#x3D;MD5(username+åˆ†éš”ç¬¦+expiryTime+åˆ†éš”ç¬¦+password) æ³¨æ„: è¿™ç§æ–¹å¼ä¸æ¨èä½¿ç”¨, æœ‰ä¸¥é‡çš„å®‰å…¨é—®é¢˜. å°±æ˜¯å¯†ç ä¿¡æ¯åœ¨å‰ç«¯æµè§ˆå™¨cookieä¸­å­˜æ”¾. å¦‚æœcookieè¢«ç›—å–å¾ˆå®¹æ˜“ç ´è§£. ä»£ç å®ç°ï¼š å‰ç«¯çš„é€‰æ¡†æŒ‰é’® 123456&lt;div class=&quot;form-group&quot;&gt; &lt;div&gt; &lt;!--è®°ä½æˆ‘ nameä¸ºremember-me valueå€¼å¯é€‰true yes 1 on éƒ½è¡Œ--&gt; &lt;input type=&quot;checkbox&quot; name=&quot;remember-me&quot; value=&quot;true&quot;/&gt;è®°ä½æˆ‘ &lt;/div&gt;&lt;/div&gt; åç«¯å¼€å¯remember-meåŠŸèƒ½ 123.and().rememberMe()//å¼€å¯è®°ä½æˆ‘åŠŸèƒ½.tokenValiditySeconds(1209600)// tokenå¤±æ•ˆæ—¶é—´é»˜è®¤2å‘¨.rememberMeParameter(&quot;remember-me&quot;)// è‡ªå®šä¹‰è¡¨å•nameå€¼ ç™»å½•æ¥å£é…ç½®ä¸Šé¢ä¸€æ®µå³å¯å¼€å¯ 1234567891011121314151617181920@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .loginProcessingUrl(&quot;/login&quot;) // ç™»å½•æ¥å£url .usernameParameter(&quot;username&quot;).passwordParameter(&quot;password&quot;) //è‡ªå®šä¹‰è¡¨å•name .successForwardUrl(&quot;/&quot;) //ç™»å½•æˆåŠŸè·³è½¬ .and().rememberMe()//å¼€å¯è®°ä½æˆ‘åŠŸèƒ½ .tokenValiditySeconds(1209600)// tokenå¤±æ•ˆæ—¶é—´é»˜è®¤2å‘¨ .rememberMeParameter(&quot;remember-me&quot;)// è‡ªå®šä¹‰è¡¨å•nameå€¼ .and() .authorizeRequests() // é€‰æ‹©å“ªäº›è¯·æ±‚ .antMatchers(&quot;/toLoginPage&quot;).permitAll() //è¿™ä¸ªè¯·æ±‚å¼€å…è®¸ .anyRequest() // ä»»æ„è¯·æ±‚ .authenticated(); // é€‰æ‹©çš„è¯·æ±‚è¯·æ±‚éœ€è¦è®¤è¯ // å…³é—­scrfé˜²æŠ¤ http.csrf().disable(); // å…è®¸iframeåŠ è½½é¡µé¢ http.headers().frameOptions().sameOrigin();&#125; ç™»å½•æˆåŠŸäº§ç”Ÿä¸€æ¡cookie 2.3.6.2 æŒä¹…åŒ–çš„Tokenç”Ÿæˆæ–¹æ³• å­˜å…¥æ•°æ®åº“çš„TokenåŒ…å«ï¼š token: éšæœºç”Ÿæˆç­–ç•¥,æ¯æ¬¡è®¿é—®éƒ½ä¼šé‡æ–°ç”Ÿæˆ series: ç™»å½•åºåˆ—å·ï¼Œéšæœºç”Ÿæˆç­–ç•¥ã€‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•æ—¶ï¼Œè¯¥å€¼é‡æ–°ç”Ÿæˆã€‚ä½¿ç”¨remember-meåŠŸèƒ½ï¼Œè¯¥å€¼ä¿æŒä¸å˜ expiryTime: tokenè¿‡æœŸæ—¶é—´ã€‚ Token &#x3D; encode(series+token) ä»£ç å®ç° åç«¯é…ç½® åŒæ ·ä¹Ÿæ˜¯åœ¨SecurityConfigurationè¿›è¡Œé…ç½® 1234.and().rememberMe()//å¼€å¯è®°ä½æˆ‘åŠŸèƒ½.tokenValiditySeconds(1209600)// tokenå¤±æ•ˆæ—¶é—´é»˜è®¤2å‘¨.rememberMeParameter(&quot;remember-me&quot;)// è‡ªå®šä¹‰è¡¨å•nameå€¼.tokenRepository(getPersistentTokenRepository()) //è®¾ç½®tokençš„å­˜å‚¨åº“ 123456789101112131415@AutowiredDataSource dataSource;/** * æŒä¹…åŒ–token,è´Ÿè´£tokenä¸æ•°æ®åº“ä¹‹é—´çš„ç›¸å…³æ“ä½œ * * @return */@Beanpublic PersistentTokenRepository getPersistentTokenRepository() &#123; JdbcTokenRepositoryImpl tokenRepository = new JdbcTokenRepositoryImpl(); tokenRepository.setDataSource(dataSource); //è®¾ç½®æ•°æ®æº // å¯åŠ¨æ—¶åˆ›å»ºä¸€å¼ è¡¨, ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™åˆ›å»º, ç¬¬äºŒæ¬¡å¯åŠ¨çš„æ—¶å€™éœ€è¦æ³¨é‡Šæ‰, å¦ä¼šä¿å­˜ tokenRepository.setCreateTableOnStartup(true); return tokenRepository;&#125; é‡æ–°ç™»å½• è¡¨å·²åˆ›å»ºå°±å¯ä»¥æŠŠ tokenRepository.setCreateTableOnStartup(true)å»æ‰äº† å¯åŠ¨é¡¹ç›®é‡æ–°ç™»å½•ï¼Œæ•°æ®åº“ä¼šæ’å…¥è®°å½•ã€‚è¯´æ˜æŒä¹…åŒ–tokenæ–¹å¼å·²ç»ç”Ÿæ•ˆã€‚ Cookieçªƒå–ä¼ªé€ è®¿é—® ä½¿ç”¨ç½‘é¡µç™»å½•ç³»ç»Ÿï¼Œè®°å½•remember-meçš„å€¼ åœ¨postmanä¼ªé€ cookieï¼Œè¿›è¡Œè¯·æ±‚ å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œè€Œä¸æ˜¯æ‹¦æˆªåˆ°ç™»å½• å®‰å…¨éªŒè¯ å¦‚æœè¦ç¦æ­¢æ˜¯è®°ä½æˆ‘çš„tokenè¿›è¡Œè®¿é—®ï¼Œå¯ä»¥è¿›è¡Œæ§åˆ¶ 123456789101112@GetMapping(&quot;/&#123;id&#125;&quot;)@ResponseBodypublic UserVo getById(@PathVariable Integer id) &#123; //è·å–è®¤è¯ä¿¡æ¯ Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); // åˆ¤æ–­è®¤è¯ä¿¡æ¯æ˜¯å¦æ¥æºäºRememberMe if (RememberMeAuthenticationToken.class.isAssignableFrom(authentication.getClass())) &#123; throw new RememberMeAuthenticationException(&quot;è®¤è¯ä¿¡æ¯æ¥æºäº RememberMe,è¯·é‡æ–°ç™»å½•&quot;); &#125; UserVo user = userService.getById(id); return user;&#125; æ‰€ä»¥åœ¨é‡è¦çš„æ­¥éª¤æˆ‘ä»¬å¯ä»¥åŠ ä»¥æ§åˆ¶è®°ä½æˆ‘çš„è®¿é—® 2.3.7 è‡ªå®šä¹‰ç™»å½•çŠ¶æ€å¤„ç†åœ¨æŸäº›åœºæ™¯ä¸‹,ç”¨æˆ·ç™»å½•æˆåŠŸæˆ–å¤±è´¥çš„æƒ…å†µä¸‹ç”¨æˆ·éœ€è¦æ‰§è¡Œä¸€äº›åç»­æ“ä½œ,æ¯”å¦‚ç™»å½•æ—¥å¿—çš„æœé›†,æˆ–è€…åœ¨ç°åœ¨ç›®å‰å‰åç«¯åˆ†ç¦»çš„æƒ…å†µä¸‹ç”¨æˆ·ç™»å½•æˆåŠŸå’Œå¤±è´¥åéœ€è¦ç»™å‰å°é¡µé¢è¿”å›å¯¹åº”çš„é”™è¯¯ä¿¡æ¯, æœ‰å‰å°ä¸»å¯¼ç™»å½•æˆåŠŸæˆ–è€…å¤±è´¥çš„é¡µé¢è·³è½¬.è¿™ä¸ªæ—¶å€™éœ€è¦è¦åˆ°ç”¨åˆ°AuthenticationSuccessHandlerä¸AnthenticationFailureHandler. å®ç°AuthenticationSuccessHandleræ¥å£ï¼Œå¹¶é‡å†™onAnthenticationSuccesss()æ–¹æ³•. å®ç°AuthenticationFailureHandleræ¥å£ï¼Œå¹¶é‡å†™onAuthenticationFailure()æ–¹æ³•ï¼› ä»£ç å®ç° 12345678910111213141516171819@Servicepublic class MyAuthHandle implements AuthenticationSuccessHandler, AuthenticationFailureHandler &#123; private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy(); @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authentication) throws IOException, ServletException &#123; &#125; @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; System.out.println(&quot;ç™»å½•æˆåŠŸåç»­å¤„ç†....&quot;); //é‡å®šå‘åˆ°indexé¡µ redirectStrategy.sendRedirect(request, response, &quot;/&quot;); &#125; @Override public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException &#123; System.out.println(&quot;ç™»å½•å¤±è´¥åç»­å¤„ç†....&quot;); //é‡å®šå‘åˆ°loginé¡µ redirectStrategy.sendRedirect(request, response, &quot;/toLoginPage&quot;); &#125;&#125; åœ¨SecurityConfigurationé…ç½®ä¸Šè¿™äº›è‡ªå®šä¹‰å¤„ç† é…ç½®åœ¨ç™»å½•è¡¨å•åå³å¯ 12345678http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .loginProcessingUrl(&quot;/login&quot;) // ç™»å½•æ¥å£url .usernameParameter(&quot;username&quot;).passwordParameter(&quot;password&quot;) //è‡ªå®šä¹‰è¡¨å•name .successForwardUrl(&quot;/&quot;) //ç™»å½•æˆåŠŸè·³è½¬ .successHandler(myAuthHandle) .failureHandler(myAuthHandle) // ç•¥... é™¤äº†ç™»å½•æˆåŠŸç™»é™†å¤±è´¥è¿™äº›èŠ‚ç‚¹è¿˜æœ‰å…¶ä»–çš„å¾ˆå¤šèŠ‚ç‚¹éƒ½å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰å¤„ç† 123456789101112131415.and().formLogin() //å¼€å¯ç™»å½•.permitAll() //å…è®¸æ‰€æœ‰äººè®¿é—®.successHandler(myAuthHandle) // ç™»å½•æˆåŠŸé€»è¾‘å¤„ç†.failureHandler(myAuthHandle) // ç™»å½•å¤±è´¥é€»è¾‘å¤„ç†.and().logout() //å¼€å¯æ³¨é”€.permitAll() //å…è®¸æ‰€æœ‰äººè®¿é—®.logoutSuccessHandler(myAuthHandle) //æ³¨é”€é€»è¾‘å¤„ç†.deleteCookies(&quot;JSESSIONID&quot;) //åˆ é™¤cookie.and().exceptionHandling().accessDeniedHandler(myAuthHandle) //æƒé™ä¸è¶³çš„æ—¶å€™çš„é€»è¾‘å¤„ç†.authenticationEntryPoint(myAuthHandle) //æœªç™»å½•æ˜¯çš„é€»è¾‘å¤„ç† å„é˜¶æ®µå¤„ç†å™¨åˆ—ä¸¾å‡ ä¸ª é˜¶æ®µ å®ç°æ¥å£ é‡å†™æ–¹æ³• ç™»å½•æˆåŠŸæ—¶ AuthenticationSuccessHandler onAnthenticationSuccesss() ç™»å½•å¤±è´¥æ—¶ AuthenticationFailureHandler onAuthenticationFailure() æ³¨é”€æˆåŠŸæ—¶ LogoutSuccessHandler onLogoutSuccess() æ²¡æœ‰æƒé™æ—¶ AccessDeniedHandler handle() æ²¡æœ‰ç™»å½•æ—¶ AuthenticationEntryPoint commence() å‘ä¸Šé¢ä¸æ˜¯ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„ä¾‹å­ï¼Œå¦‚æœå‰åçš„åˆ†ç¦»ç»“åˆè¿™äº›è‡ªå®šä¹‰å¤„ç†å™¨å°±å¯ä»¥å®ç°ï¼Œæ¯”å¦‚ 1234567@Overridepublic void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException &#123; //ç™»å½•æˆåŠŸæ—¶è¿”å›ç»™å‰ç«¯çš„æ•°æ® ApiResult result = ApiResult.result(ApiCode.SUCCESS, &quot;ç™»å½•æˆåŠŸ&quot;, &quot;&quot;); response.setContentType(&quot;application/json;charset=utf-8&quot;); response.getWriter().write(JSON.toJSONString(result));&#125; 123456789101112131415@Overridepublic void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException e) throws IOException &#123; ApiResult result = null; if(e instanceof UsernameNotFoundException)&#123; result = ApiResult.result(ApiCode.FAIL_AUTH,&quot;ç”¨æˆ·åæ‰¾ä¸åˆ°&quot;,&quot;&quot;); &#125;else if(e instanceof BadCredentialsException)&#123; result = ApiResult.result(ApiCode.FAIL_AUTH,&quot;å¯†ç é”™è¯¯&quot;,&quot;&quot;); &#125;else &#123; result = ApiResult.fail(e.getMessage()); &#125; //å¤„ç†ç¼–ç æ–¹å¼ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç çš„æƒ…å†µ response.setContentType(&quot;text/json;charset=utf-8&quot;); //è¿”å›ç»™å‰å° response.getWriter().write(JSON.toJSONString(result));&#125; å°±ä¸ä¸€ä¸€ä¸¾ä¾‹äº†ï¼Œå®ç°æ¥å£é‡å†™å¥½æ–¹æ³•ï¼Œåœ¨SecurityConfigurationè¿›è¡Œé…ç½®å³å¯ 2.4 å›¾å½¢éªŒè¯ç 1å›¾å½¢éªŒè¯ç ä¸€èˆ¬æ˜¯é˜²æ­¢æ¶æ„ï¼Œäººçœ¼çœ‹èµ·æ¥éƒ½è´¹åŠ²ï¼Œä½•å†µæ˜¯æœºå™¨ã€‚ä¸å°‘ç½‘ç«™ä¸ºäº†é˜²æ­¢ç”¨æˆ·åˆ©ç”¨æœºå™¨äººè‡ªåŠ¨æ³¨å†Œã€ç™»å½•ã€çŒæ°´ï¼Œéƒ½é‡‡ç”¨äº†éªŒè¯ç æŠ€æœ¯ã€‚æ‰€è°“éªŒè¯ç ï¼Œå°±æ˜¯å°†ä¸€ä¸²éšæœºäº§ç”Ÿçš„æ•°å­—æˆ–ç¬¦å·ï¼Œç”Ÿæˆä¸€å¹…å›¾ç‰‡ï¼Œ å›¾ç‰‡é‡ŒåŠ ä¸Šä¸€äº›å¹²æ‰°,ã€‚ä¹Ÿæœ‰ç›®å‰éœ€è¦æ‰‹åŠ¨æ»‘åŠ¨çš„å›¾å½¢éªŒè¯ç ï¼Œè¿™ç§å¯ä»¥æœ‰ä¸“é—¨å»åšçš„ç¬¬ä¸‰æ–¹å¹³å°.ï¼šæ¯”å¦‚æéªŒ(https://www.geetest.com/), è¿™é‡Œä»‹ç»çš„ä¸»è¦é’ˆå¯¹å›¾å½¢éªŒè¯ç ã€‚ Spring Securityæ·»åŠ éªŒè¯ç å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š æ ¹æ®éšæœºæ•°ç”ŸæˆéªŒè¯ç å›¾ç‰‡ å°†éªŒè¯ç å›¾ç‰‡æ˜¾ç¤ºåˆ°ç™»å½•é¡µé¢ è®¤è¯æµä¸­åŠ å…¥éªŒè¯ç æ ¡éªŒ Spring Securityçš„è®¤è¯æ ¡éªŒæ˜¯ç”±UsernamePasswordAuthenticationFilterè¿‡æ»¤å™¨å®Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„éªŒè¯ç æ ¡éªŒé€»è¾‘åº”è¯¥åœ¨è¿™ä¸ªè¿‡æ»¤å™¨ä¹‹å‰ã€‚éªŒè¯ç é€šè¿‡åæ‰èƒ½åˆ°åç»­çš„æ“ä½œ. æµç¨‹å¦‚ä¸‹: ä»£ç å®ç°ï¼š è‡ªå®šä¹‰éªŒè¯ç è¿‡æ»¤å™¨ValidateCodeFilter 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package cn.yournotes.config;import cn.yournotes.controller.ValidateCodeController;import cn.yournotes.exception.ValidateCodeException;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.StringRedisTemplate;import org.springframework.stereotype.Component;import org.springframework.util.StringUtils;import org.springframework.web.bind.ServletRequestBindingException;import org.springframework.web.filter.OncePerRequestFilter;import javax.servlet.FilterChain;import javax.servlet.ServletException;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;/** * éªŒè¯ç éªŒè¯filter éœ€è¦ç»§æ‰¿OncePerRequestFilterç¡®ä¿åœ¨ä¸€æ¬¡è¯·æ±‚åªé€šè¿‡ä¸€æ¬¡filterï¼Œè€Œä¸ * éœ€è¦é‡å¤æ‰§è¡Œ */@Componentpublic class ValidateCodeFilter extends OncePerRequestFilter &#123; @Autowired MyAuthHandle myAuthHandle; @Autowired StringRedisTemplate stringRedisTemplate; @Override protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯ç™»å½•è¯·æ±‚,åªæœ‰ç™»å½•è¯·æ±‚æ‰å»æ ¡éªŒéªŒè¯ç  if (httpServletRequest.getRequestURI().equals(&quot;/login&quot;) &amp;&amp; httpServletRequest.getMethod().equalsIgnoreCase(&quot;post&quot;)) &#123; try &#123; validate(httpServletRequest); &#125; catch (ValidateCodeException e) &#123; myAuthHandle.onAuthenticationFailure(httpServletRequest, httpServletResponse, e); return; &#125; &#125; //å¦‚æœä¸æ˜¯ç™»å½•è¯·æ±‚ï¼Œç›´æ¥è°ƒç”¨åé¢çš„è¿‡æ»¤å™¨é“¾ filterChain.doFilter(httpServletRequest, httpServletResponse); &#125; private void validate(HttpServletRequest request) throws ValidateCodeException &#123; //è·å–ip String remoteAddr = request.getRemoteAddr(); //æ‹¼æ¥redisçš„key String redisKey = ValidateCodeController.REDIS_KEY_IMAGE_CODE + &quot;-&quot; + remoteAddr; //ä»redisä¸­è·å–imageCode String redisImageCode = stringRedisTemplate.boundValueOps(redisKey).get(); String imageCode = request.getParameter(&quot;imageCode&quot;); if (!StringUtils.hasText(imageCode)) &#123; throw new ValidateCodeException(&quot;éªŒè¯ç çš„å€¼ä¸èƒ½ä¸ºç©ºï¼&quot;); &#125; if (redisImageCode == null) &#123; throw new ValidateCodeException(&quot;éªŒè¯ç å·²è¿‡æœŸï¼&quot;); &#125; if (!redisImageCode.equals(imageCode)) &#123; throw new ValidateCodeException(&quot;éªŒè¯ç ä¸æ­£ç¡®ï¼&quot;); &#125; // ä»redisä¸­åˆ é™¤imageCode stringRedisTemplate.delete(redisKey); &#125;&#125; è‡ªå®šä¹‰å¼‚å¸¸ 12345public class ValidateCodeException extends AuthenticationException &#123; public ValidateCodeException(String msg)&#123; super(msg); &#125;&#125; éªŒè¯ç ç”Ÿæˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106import cn.yournotes.domain.ImageCode;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.StringRedisTemplate;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import javax.imageio.ImageIO;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.awt.*;import java.awt.image.BufferedImage;import java.io.IOException;import java.util.Random;import java.util.concurrent.TimeUnit;/** * å¤„ç†ç”ŸæˆéªŒè¯ç çš„è¯·æ±‚ */@RestController@RequestMapping(&quot;/code&quot;)public class ValidateCodeController &#123; public final static String REDIS_KEY_IMAGE_CODE = &quot;REDIS_KEY_IMAGE_CODE&quot;; public final static int expireIn = 60; // éªŒè¯ç æœ‰æ•ˆæ—¶é—´ 60s //ä½¿ç”¨sessionStrategyå°†ç”Ÿæˆçš„éªŒè¯ç å¯¹è±¡å­˜å‚¨åˆ°Sessionä¸­ï¼Œå¹¶é€šè¿‡IOæµå°†ç”Ÿæˆçš„å›¾ç‰‡è¾“å‡ºåˆ°ç™»å½•é¡µé¢ä¸Šã€‚ @Autowired public StringRedisTemplate stringRedisTemplate; @RequestMapping(&quot;/image&quot;) public void createCode(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; //è·å–è®¿é—®IP String remoteAddr = request.getRemoteAddr(); //ç”ŸæˆéªŒè¯ç å¯¹è±¡ ImageCode imageCode = createImageCode(); //ç”Ÿæˆçš„éªŒè¯ç å¯¹è±¡å­˜å‚¨åˆ°redisä¸­ KEYä¸ºREDIS_KEY_IMAGE_CODE+IPåœ°å€ stringRedisTemplate.boundValueOps(REDIS_KEY_IMAGE_CODE + &quot;-&quot; + remoteAddr) .set(imageCode.getCode(), expireIn, TimeUnit.SECONDS); //é€šè¿‡IOæµå°†ç”Ÿæˆçš„å›¾ç‰‡è¾“å‡ºåˆ°ç™»å½•é¡µé¢ä¸Š ImageIO.write(imageCode.getImage(), &quot;jpeg&quot;, response.getOutputStream()); &#125; /** * ç”¨äºç”ŸæˆéªŒè¯ç å¯¹è±¡ * * @return */ private ImageCode createImageCode() &#123; int width = 100; // éªŒè¯ç å›¾ç‰‡å®½åº¦ int height = 36; // éªŒè¯ç å›¾ç‰‡é•¿åº¦ int length = 4; // éªŒè¯ç ä½æ•° //åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å†²åŒºå›¾åƒå¯¹è±¡ BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB); //è·å¾—åœ¨å›¾åƒä¸Šç»˜å›¾çš„Graphicså¯¹è±¡ Graphics g = image.getGraphics(); Random random = new Random(); //è®¾ç½®é¢œè‰²ã€å¹¶éšæœºç»˜åˆ¶ç›´çº¿ g.setColor(getRandColor(200, 250)); g.fillRect(0, 0, width, height); g.setFont(new Font(&quot;Times New Roman&quot;, Font.ITALIC, 20)); g.setColor(getRandColor(160, 200)); for (int i = 0; i &lt; 155; i++) &#123; int x = random.nextInt(width); int y = random.nextInt(height); int xl = random.nextInt(12); int yl = random.nextInt(12); g.drawLine(x, y, x + xl, y + yl); &#125; //ç”Ÿæˆéšæœºæ•° å¹¶ç»˜åˆ¶ StringBuilder sRand = new StringBuilder(); for (int i = 0; i &lt; length; i++) &#123; String rand = String.valueOf(random.nextInt(10)); sRand.append(rand); g.setColor(new Color(20 + random.nextInt(110), 20 + random.nextInt(110), 20 + random.nextInt(110))); g.drawString(rand, 13 * i + 6, 16); &#125; g.dispose(); return new ImageCode(image, sRand.toString()); &#125; /** * è·å–éšæœºæ¼”ç¤º * * @param fc * @param bc * @return */ private Color getRandColor(int fc, int bc) &#123; Random random = new Random(); if (fc &gt; 255) &#123; fc = 255; &#125; if (bc &gt; 255) &#123; bc = 255; &#125; int r = fc + random.nextInt(bc - fc); int g = fc + random.nextInt(bc - fc); int b = fc + random.nextInt(bc - fc); return new Color(r, g, b); &#125;&#125; securityé…ç½® éœ€è¦é…ç½®ä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯åœ¨UsernamePasswordAuthenticationFilterä¹‹å‰éœ€è¦åŠ ä¸€ä¸ªè¿‡æ»¤å™¨è¿›è¡ŒéªŒè¯ç å¤„ç†ï¼Œç¬¬äºŒæ˜¯æ”¾è¡ŒéªŒè¯ç æ¥å£è®©å‰ç«¯è¯·æ±‚æ˜¾ç¤ºã€‚è®°å¾—æŠŠéªŒè¯ç æ¥å£åœ°å€æ”¾åˆ°htmlå›¾ç‰‡éªŒè¯ç å¤„ã€redisä¹Ÿé…ç½®å¥½ 123456789101112http.addFilterBefore(validateCodeFilter,UsernamePasswordAuthenticationFilter.class);http.formLogin() // å¼€å¯formLoginè®¤è¯ .loginPage(&quot;/toLoginPage&quot;) // è‡ªå®šä¹‰ç™»å½•é¡µ .loginProcessingUrl(&quot;/login&quot;) // ç™»å½•æ¥å£url .usernameParameter(&quot;username&quot;).passwordParameter(&quot;password&quot;) //è‡ªå®šä¹‰è¡¨å•name .successForwardUrl(&quot;/&quot;) //ç™»å½•æˆåŠŸè·³è½¬ .successHandler(myAuthHandle) .failureHandler(myAuthHandle) .and().logout().logoutUrl(&quot;/logout&quot;)//è®¾ç½®é€€å‡ºurl .logoutSuccessHandler(myAuthHandle)//è‡ªå®šä¹‰é€€å‡ºå¤„ç† .and().authorizeRequests() .antMatchers(&quot;/toLoginPage&quot;,&quot;/code/**&quot;).permitAll() 2.5 sessionç®¡ç†Spring Securityå¯ä»¥ä¸Spring Sessionåº“é…åˆä½¿ç”¨ï¼Œåªéœ€è¦åšä¸€äº›ç®€å•çš„é…ç½®å°±å¯ä»¥å®ç°ä¸€äº›åŠŸèƒ½ï¼Œå¦‚(ä¼šè¯è¿‡æœŸã€ä¸€ä¸ªè´¦å·åªèƒ½åŒæ—¶åœ¨çº¿ä¸€ä¸ªã€é›†ç¾¤sessionç­‰) 2.5.1 ä¼šè¯è¶…æ—¶ é…ç½®sessionä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º30åˆ†é’Ÿï¼Œæˆ‘ä»¬è®¾ç½®çŸ­äº›è¿›è¡Œæµ‹è¯•ï¼Œä½†æœ€å°åªèƒ½è®¾ç½®60s 1234# sessionè®¾ç½®# å½“sessionè¶…æ—¶å, é»˜è®¤è·³è½¬åˆ°ç™»å½•é¡µé¢.# é…ç½®sessionè¶…æ—¶æ—¶é—´server.servlet.session.timeout=60 è‡ªå®šä¹‰è®¾ç½®sessionè¶…æ—¶ååœ°å€ è®¾ç½®sessionç®¡ç†å’Œå¤±æ•ˆåè·³è½¬åœ°å€ 1234// è®¾ç½®sessionç®¡ç†// sessionæ— æ•ˆåè·³è½¬çš„è·¯å¾„,é»˜è®¤æ˜¯ç™»å½•é¡µé¢ã€‚// å‰åçš„åˆ†ç¦»çš„è¯å°±ä¸éœ€è¦é…ç½®è¿™äº›è·³è½¬çš„ç›¸å…³é…ç½®äº†http.sessionManagement().invalidSessionUrl(&quot;/toLoginPage&quot;) 2.5.2 å¹¶å‘æ§åˆ¶â€‹ å¹¶å‘æ§åˆ¶å³åŒä¸€ä¸ªè´¦å·åŒæ—¶åœ¨çº¿ä¸ªæ•°,åŒä¸€ä¸ªè´¦å·åŒæ—¶åœ¨çº¿ä¸ªæ•°å¦‚æœè®¾ç½®ä¸º1è¡¨ç¤ºï¼Œè¯¥è´¦å·åœ¨åŒä¸€æ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ç™»å½•ï¼Œå¦‚æœåŒä¸€ä¸ªè´¦å·åˆåœ¨å…¶å®ƒåœ°æ–¹ç™»å½•ï¼Œé‚£ä¹ˆå°±å°†ä¸Šæ¬¡ç™»å½•çš„ä¼šè¯è¿‡æœŸï¼Œå³åé¢çš„ç™»å½•ä¼šè¸¢æ‰å‰é¢çš„ç™»å½• ä¿®æ”¹è¶…æ—¶æ—¶é—´ 123#sessionè®¾ç½®#é…ç½®sessionè¶…æ—¶æ—¶é—´server.servlet.session.timeout=600 è®¾ç½®æœ€å¤§ä¼šè¯æ•°é‡ 1234http.sessionManagement()//è®¾ç½®sessionç®¡ç† .invalidSessionUrl(&quot;/toLoginPage&quot;)// sessionæ— æ•ˆåè·³è½¬çš„è·¯å¾„, é»˜è®¤æ˜¯ç™»å½•é¡µé¢ .maximumSessions(1)//è®¾ç½®sessionæœ€å¤§ä¼šè¯æ•°é‡ ,1åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç™»å½• .expiredUrl(&quot;/toLoginPage&quot;);//è®¾ç½®sessionè¿‡æœŸåè·³è½¬è·¯å¾„ ä½¿ç”¨ç¬¬äºŒä¸ªæµè§ˆå™¨å†è¿›è¡Œç™»å½•æ—¶ ï¼Œç¬¬ä¸€ä¸ªæµè§ˆå™¨ä¼šå¤±å»ç™»å½•ä¿¡æ¯è®¿é—®ä¼šè¿›å…¥ç™»å½•é¡µ é˜»æ­¢ç”¨æˆ·ç¬¬äºŒæ¬¡ç™»å½• sessionManagementä¹Ÿå¯ä»¥é…ç½® maxSessionsPreventsLoginï¼šbooleanå€¼ï¼Œå½“è¾¾åˆ°maximumSessionsè®¾ç½®çš„æœ€å¤§ä¼šè¯ä¸ªæ•°æ—¶é˜»æ­¢ç™»å½•ã€‚ 1234http.sessionManagement()//è®¾ç½®sessionç®¡ç† .invalidSessionUrl(&quot;/toLoginPage&quot;)// sessionæ— æ•ˆåè·³è½¬çš„è·¯å¾„, é»˜è®¤æ˜¯ç™»å½•é¡µé¢ .maximumSessions(1)//è®¾ç½®sessionæœ€å¤§ä¼šè¯æ•°é‡ ,1åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç™»å½• .expiredUrl(&quot;/toLoginPage&quot;);//è®¾ç½®sessionè¿‡æœŸåè·³è½¬è·¯å¾„ 2.5.3 é›†ç¾¤sessionå®é™…åœºæ™¯ä¸­ä¸€ä¸ªæœåŠ¡ä¼šè‡³å°‘æœ‰ä¸¤å°æœåŠ¡å™¨åœ¨æä¾›æœåŠ¡ï¼Œåœ¨æœåŠ¡å™¨å‰é¢ä¼šæœ‰ä¸€ä¸ªnginxåšè´Ÿè½½å‡è¡¡ï¼Œç”¨æˆ·è®¿é—®nginxï¼Œnginxå†å†³å®šå»è®¿é—®å“ªä¸€å°æœåŠ¡å™¨ã€‚å½“ä¸€å°æœåŠ¡å®•æœºäº†ä¹‹åï¼Œå¦ä¸€å°æœåŠ¡å™¨ä¹Ÿå¯ä»¥ç»§ç»­æä¾›æœåŠ¡ï¼Œä¿è¯æœåŠ¡ä¸ä¸­æ–­ã€‚å¦‚æœæˆ‘ä»¬å°†sessionä¿å­˜åœ¨Webå®¹å™¨(æ¯”å¦‚tomcat)ä¸­ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®è¢«åˆ†é…åˆ°æœåŠ¡å™¨1ä¸Šé¢éœ€è¦ç™»å½•ï¼Œå½“æŸäº›è®¿é—®çªç„¶è¢«åˆ†é…åˆ°æœåŠ¡å™¨äºŒä¸Šï¼Œå› ä¸ºæœåŠ¡å™¨äºŒä¸Šæ²¡æœ‰ç”¨æˆ·åœ¨æœåŠ¡å™¨ä¸€ä¸Šç™»å½•çš„ä¼šè¯sessionä¿¡æ¯ï¼ŒæœåŠ¡å™¨äºŒè¿˜ä¼šå†æ¬¡è®©ç”¨æˆ·ç™»å½•ï¼Œç”¨æˆ·å·²ç»ç™»å½•äº†è¿˜è®©ç™»å½•å°±æ„Ÿè§‰ä¸æ­£å¸¸äº†ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯æ˜¯ç”¨æˆ·ç™»å½•çš„ä¼šè¯ä¿¡æ¯ä¸èƒ½å†ä¿å­˜åˆ°WebæœåŠ¡å™¨ä¸­ï¼Œè€Œæ˜¯ä¿å­˜åˆ°ä¸€ä¸ªå•ç‹¬çš„åº“ (redisã€mongodbã€jdbcç­‰)ä¸­ï¼Œæ‰€æœ‰æœåŠ¡å™¨éƒ½è®¿é—®åŒä¸€ä¸ªåº“ï¼Œéƒ½ä»åŒä¸€ä¸ªåº“æ¥è·å–ç”¨æˆ·çš„sessionä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åœ¨æœåŠ¡å™¨ä¸€ä¸Šç™»å½•ï¼Œå°†ä¼šè¯ä¿¡æ¯ä¿å­˜åˆ°åº“ä¸­ï¼Œç”¨æˆ·çš„ä¸‹æ¬¡è¯·æ±‚è¢«åˆ†é…åˆ°æœåŠ¡å™¨äºŒï¼ŒæœåŠ¡å™¨äºŒä»åº“ä¸­æ£€æŸ¥sessionæ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ä¸ç”¨å†ç™»å½•äº†ï¼Œå¯ä»¥ç›´æ¥è®¿é—®æœåŠ¡äº†ã€‚ å¼•å…¥ä¾èµ– 12345&lt;!-- åŸºäºrediså®ç°sessionå…±äº« --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.session&lt;/groupId&gt; &lt;artifactId&gt;spring-session-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; è®¾ç½®sessionå­˜å‚¨ç±»å‹ 12#ä½¿ç”¨rediså…±äº«sessionspring.session.store-type=redis æµ‹è¯• 121. è®¾ç½®ä¸åŒç«¯å£å¯åŠ¨ä¸¤ä¸ªæœåŠ¡2. è®¿é—®ç¬¬ä¸€ä¸ªæœåŠ¡è¿›è¡Œç™»å½•ï¼Œç¬¬äºŒæœåŠ¡å°±å¯ä»¥ç›´æ¥è®¿é—® 2.6 csrfé˜²æŠ¤æœºåˆ¶2.6.1 ä»€ä¹ˆæ˜¯csrf?â€‹ CSRFï¼ˆCross-site request forgeryï¼‰ï¼Œä¸­æ–‡åç§°ï¼šè·¨ç«™è¯·æ±‚ä¼ªé€  â€‹ ä½ è¿™å¯ä»¥è¿™ä¹ˆç†è§£CSRFæ”»å‡»ï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚CSRFèƒ½å¤Ÿåšçš„äº‹æƒ…åŒ…æ‹¬ï¼šä»¥ä½ åä¹‰å‘é€é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç›—å–ä½ çš„è´¦å·ï¼Œç”šè‡³äºè´­ä¹°å•†å“ï¼Œè™šæ‹Ÿè´§å¸è½¬è´¦â€¦â€¦é€ æˆçš„é—®é¢˜åŒ…æ‹¬ï¼šä¸ªäººéšç§æ³„éœ²ä»¥åŠè´¢äº§å®‰å…¨ã€‚ â€‹ CSRFè¿™ç§æ”»å‡»æ–¹å¼åœ¨2000å¹´å·²ç»è¢«å›½å¤–çš„å®‰å…¨äººå‘˜æå‡ºï¼Œä½†åœ¨å›½å†…ï¼Œç›´åˆ°06å¹´æ‰å¼€å§‹è¢«å…³æ³¨ï¼Œ08å¹´ï¼Œå›½å†…å¤–çš„å¤šä¸ªå¤§å‹ç¤¾åŒºå’Œäº¤äº’ç½‘ç«™åˆ†åˆ«çˆ†å‡ºCSRFæ¼æ´ï¼Œå¦‚ï¼šNYTimes.comï¼ˆçº½çº¦æ—¶æŠ¥ï¼‰ã€Metafilterï¼ˆä¸€ä¸ªå¤§å‹çš„BLOGç½‘ç«™ï¼‰ï¼ŒYouTubeå’Œç™¾åº¦HIâ€¦â€¦è€Œç°åœ¨ï¼Œäº’è”ç½‘ä¸Šçš„è®¸å¤šç«™ç‚¹ä»å¯¹æ­¤æ¯«æ— é˜²å¤‡ï¼Œä»¥è‡³äºå®‰å…¨ä¸šç•Œç§°CSRFä¸ºâ€œæ²‰ç¡çš„å·¨äººâ€ã€‚ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œè¦å®Œæˆä¸€æ¬¡CSRFæ”»å‡»ï¼Œå—å®³è€…å¿…é¡»ä¾æ¬¡å®Œæˆä¸‰ä¸ªæ­¥éª¤ï¼š ç™»å½•å—ä¿¡ä»»ç½‘ç«™Aï¼Œå¹¶åœ¨æœ¬åœ°ç”ŸæˆCookieã€‚ åœ¨ä¸ç™»å‡ºAçš„æƒ…å†µä¸‹ï¼Œè®¿é—®å±é™©ç½‘ç«™Bã€‚ è§¦å‘ç½‘ç«™Bä¸­çš„ä¸€äº›å…ƒç´  2.6.3 CSRFçš„é˜²å¾¡ç­–ç•¥åœ¨ä¸šç•Œç›®å‰é˜²å¾¡ CSRF æ”»å‡»ä¸»è¦æœ‰ä¸‰ç§ç­–ç•¥ï¼šéªŒè¯ HTTP Referer å­—æ®µï¼›åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ  token å¹¶éªŒè¯ï¼›åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯ã€‚ éªŒè¯ HTTP Referer å­—æ®µ æ ¹æ® HTTP åè®®ï¼Œåœ¨ HTTP å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« Refererï¼Œå®ƒè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„æ¥æºåœ°å€ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®ä¸€ä¸ªå®‰å…¨å—é™é¡µé¢çš„è¯·æ±‚æ¥è‡ªäºåŒä¸€ä¸ªç½‘ç«™ï¼Œåœ¨åå°è¯·æ±‚éªŒè¯å…¶ Referer å€¼ï¼Œå¦‚æœæ˜¯ä»¥è‡ªèº«å®‰å…¨ç½‘ç«™å¼€å¤´çš„åŸŸåï¼Œåˆ™è¯´æ˜è¯¥è¯·æ±‚æ˜¯æ˜¯åˆæ³•çš„ã€‚å¦‚æœ Referer æ˜¯å…¶ä»–ç½‘ç«™çš„è¯ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯é»‘å®¢çš„ CSRF æ”»å‡»ï¼Œæ‹’ç»è¯¥è¯·æ±‚ã€‚ åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ  token å¹¶éªŒè¯ CSRF æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºé»‘å®¢å¯ä»¥å®Œå…¨ä¼ªé€ ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸­æ‰€æœ‰çš„ç”¨æˆ·éªŒè¯ä¿¡æ¯éƒ½æ˜¯å­˜åœ¨äº cookie ä¸­ï¼Œå› æ­¤é»‘å®¢å¯ä»¥åœ¨ä¸çŸ¥é“è¿™äº›éªŒè¯ä¿¡æ¯çš„æƒ…å†µä¸‹ç›´æ¥åˆ©ç”¨ç”¨æˆ·è‡ªå·±çš„cookie æ¥é€šè¿‡å®‰å…¨éªŒè¯ã€‚è¦æŠµå¾¡ CSRFï¼Œå…³é”®åœ¨äºåœ¨è¯·æ±‚ä¸­æ”¾å…¥é»‘å®¢æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¯¥ä¿¡æ¯ä¸å­˜åœ¨äº cookie ä¹‹ä¸­ã€‚å¯ä»¥åœ¨ HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„ tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨ç«¯å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ª tokenï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ token æˆ–è€… token å†…å®¹ä¸æ­£ç¡®ï¼Œåˆ™è®¤ä¸ºå¯èƒ½æ˜¯ CSRF æ”»å‡»è€Œæ‹’ç»è¯¥è¯·æ±‚ã€‚ åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯ è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨ token å¹¶è¿›è¡ŒéªŒè¯ï¼Œå’Œä¸Šä¸€ç§æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯æŠŠ token ä»¥å‚æ•°çš„å½¢å¼ç½®äº HTTP è¯·æ±‚ä¹‹ä¸­ï¼Œè€Œæ˜¯æŠŠå®ƒæ”¾åˆ° HTTP å¤´ä¸­è‡ªå®šä¹‰çš„å±æ€§é‡Œã€‚ 2.6.4 Securityä¸­çš„csrfé˜²å¾¡æœºåˆ¶org.springframework.security.web.csrf.CsrfFilter csrfåˆç§°è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ŒSpringSecurityä¼šå¯¹æ‰€æœ‰postè¯·æ±‚éªŒè¯æ˜¯å¦åŒ…å«ç³»ç»Ÿç”Ÿæˆçš„csrfçš„tokenä¿¡æ¯ï¼Œå¦‚æœä¸åŒ…å«ï¼Œåˆ™æŠ¥é”™ã€‚èµ·åˆ°é˜²æ­¢csrfæ”»å‡»çš„æ•ˆæœã€‚(1. ç”Ÿæˆtoken 2.éªŒè¯token) å¼€å¯csrfé˜²æŠ¤ 12//å¼€å¯csrfé˜²æŠ¤, å¯ä»¥è®¾ç½®å“ªäº›ä¸éœ€è¦é˜²æŠ¤http.csrf().ignoringAntMatchers(&quot;/user/xxx&quot;); é¡µé¢éœ€è¦æ·»åŠ tokenå€¼ 1&lt;input type=&quot;hidden&quot; th:name=&quot;$&#123;_csrf.parameterName&#125;&quot; th:value=&quot;$&#123;_csrf.token&#125;&quot;/&gt; è¿™æ ·ä½¿ç”¨çš„å‰ææ˜¯å‰åç«¯ä¸åˆ†ç¦»çš„é¡¹ç›®ï¼Œåœ¨åŒä¸€ä¸ªsessioné‡Œé¢å–tokeï¼Œæ¯æ¬¡éƒ½æ˜¯éšæœºç”Ÿæˆçš„å› æ­¤æ— æ³•ä¼ªé€ ã€‚å¦‚æœå‰åç«¯åˆ†ç¦»tokenå°±åˆéœ€è¦è¿œç¨‹è¯·æ±‚è·å–è€Œä¸æ˜¯ç›´æ¥åœ¨sessioné‡Œé¢å–è¿™åˆä¼šä¸å®‰å…¨ï¼Œå¦‚æœæ˜¯å‰åç«¯åˆ†ç¦»è¯¥æ€ä¹ˆè®¾è®¡è¿™ä¸ªæš‚æ—¶ä¸æ¢è®¨ã€‚ 2.7 è·¨åŸŸä¸CORS2.7.1 è·¨åŸŸâ€‹ è·¨åŸŸï¼Œå®è´¨ä¸Šæ˜¯æµè§ˆå™¨çš„ä¸€ç§ä¿æŠ¤å¤„ç†ã€‚å¦‚æœäº§ç”Ÿäº†è·¨åŸŸï¼ŒæœåŠ¡å™¨åœ¨è¿”å›ç»“æœæ—¶å°±ä¼šè¢«æµè§ˆå™¨æ‹¦æˆª(æ³¨æ„ï¼šæ­¤æ—¶è¯·æ±‚æ˜¯å¯ä»¥æ­£å¸¸å‘èµ·çš„ï¼Œåªæ˜¯æµè§ˆå™¨å¯¹å…¶è¿›è¡Œäº†æ‹¦æˆª)ï¼Œå¯¼è‡´å“åº”çš„å†…å®¹ä¸å¯ç”¨. äº§ç”Ÿè·¨åŸŸçš„å‡ ç§æƒ…å†µæœ‰ä¸€ä¸‹: åè®®ä¸åŒï¼ˆhttp&#x2F;httpsï¼‰ åŸŸåä¸åŒ ç«¯å£å·ä¸åŒ 2.7.2 è§£å†³è·¨åŸŸ JSONP æµè§ˆå™¨å…è®¸ä¸€äº›å¸¦srcå±æ€§çš„æ ‡ç­¾è·¨åŸŸï¼Œä¹Ÿå°±æ˜¯æŸäº›æ ‡ç­¾å±æ€§ä¸Šå†™urlåœ°å€æ˜¯ä¸ä¼šè·¨åŸŸäº§ç”Ÿè·¨åŸŸé—®é¢˜çš„ CORSè§£å†³è·¨åŸŸ CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†ï¼Œå…¨ç¨‹æ˜¯â€œè·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰. CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIEæµè§ˆå™¨ä¸èƒ½ä½äºIE10 æµè§ˆå™¨åœ¨å‘èµ·çœŸæ­£çš„è¯·æ±‚ä¹‹å‰ï¼Œä¼šå‘èµ·ä¸€ä¸ªOPTIONSç±»å‹çš„é¢„æ£€è¯·æ±‚ï¼Œç”¨äºè¯·æ±‚æœåŠ¡å™¨æ˜¯å¦å…è®¸è·¨åŸŸï¼Œåœ¨å¾—åˆ°è®¸å¯çš„æƒ…å†µä¸‹æ‰ä¼šå‘èµ·è¯·æ±‚ã€‚ 2.7.3 åŸºäºSpringSecurityçš„CORSæ”¯æŒ å£°æ˜è·¨åŸŸé…ç½®æº 1234567891011121314151617181920/** * è·¨åŸŸé…ç½®ä¿¡æ¯æº * * @return */public CorsConfigurationSource corsConfigurationSource() &#123; CorsConfiguration corsConfiguration = new CorsConfiguration(); // è®¾ç½®å…è®¸è·¨åŸŸçš„ç«™ç‚¹ corsConfiguration.addAllowedOrigin(&quot;*&quot;); // è®¾ç½®å…è®¸è·¨åŸŸçš„httpæ–¹æ³• corsConfiguration.addAllowedMethod(&quot;*&quot;); // è®¾ç½®å…è®¸è·¨åŸŸçš„è¯·æ±‚å¤´ corsConfiguration.addAllowedHeader(&quot;*&quot;); // å…è®¸å¸¦å‡­è¯ corsConfiguration.setAllowCredentials(true); // å¯¹æ‰€æœ‰çš„urlç”Ÿæ•ˆ UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource(); source.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration); return source;&#125; å¼€å¯è·¨åŸŸæ”¯æŒ 12//å…è®¸è·¨åŸŸhttp.cors().configurationSource(corsConfigurationSource()); ä¸‰ã€SpringSecurityæˆæƒ3.1 æˆæƒç®€ä»‹â€‹ åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­è¯´æ˜çš„éƒ½æ˜¯ç”¨æˆ·è®¤è¯, ä¸ç®¡æ˜¯ç”¨æˆ·åå¯†ç ,è¿˜æ˜¯å›¾å½¢éªŒè¯ç ç­‰,æœ€ç»ˆçš„ç›®çš„éƒ½æ˜¯ä¸€ä¸ª:è®©ç³»ç»ŸçŸ¥é“ä½ åˆ°åº•æ˜¯è°åœ¨è®¿é—®ä½ çš„ç³»ç»Ÿ, è§£å†³çš„é—®é¢˜æ˜¯, ä½ æ˜¯è°? è¿™éƒ¨åˆ†ä¸»è¦è®²è§£ä½ èƒ½åœ¨ç³»ç»Ÿä¸­åšä»€ä¹ˆäº‹æƒ…, é’ˆå¯¹è¿™ä¸ªæœ‰çš„å«åš: æˆæƒ, æœ‰çš„å«åš:é‰´æƒ, è¿˜æœ‰å«æƒé™æ§åˆ¶. æœ€ç»ˆçš„ç›®çš„å°±æ˜¯ä½ èƒ½åœ¨ç³»ç»Ÿä¸­èƒ½è¿‡åšä»€ä¹ˆ? 3.1.1 SpringSecurityå¯¹æˆæƒçš„å®šä¹‰ å®‰å…¨æ§åˆ¶é—®é¢˜å…¶å®å°±æ˜¯æ§åˆ¶æ˜¯å¦èƒ½è®¿é—®url 3.1.2 Spring SecurityæˆæƒåŸç† åœ¨æˆ‘ä»¬åº”ç”¨ç³»ç»Ÿé‡Œé¢ï¼Œå¦‚æœæƒ³è¦æ§åˆ¶ç”¨æˆ·æƒé™ï¼Œéœ€è¦æœ‰ä¸¤éƒ¨åˆ†æ•°æ® ç³»ç»Ÿé…ç½®ä¿¡æ¯æ•°æ®ï¼šè®°å½•ç³»ç»Ÿé‡Œé¢æœ‰å“ªäº›URLï¼Œæ¯ä¸ªURLéœ€è¦æ€æ ·çš„æƒé™ ç”¨æˆ·æƒé™ä¿¡æ¯ï¼šè¯·æ±‚ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ã€‚ ç³»ç»Ÿç”¨æˆ·å‘é€ä¸€ä¸ªè¯·æ±‚ï¼šç³»ç»Ÿé…ç½®ä¿¡æ¯å’Œç”¨æˆ·æƒé™ä¿¡æ¯ä½œå¯¹æ¯”ï¼Œå¦‚æœå¯¹æ¯”æˆåŠŸåˆ™å…è®¸è®¿é—®ã€‚ å½“ä¸€ä¸ªç³»ç»Ÿæˆæƒè§„åˆ™æ¯”è¾ƒç®€å•åŸºæœ¬ä¸å˜çš„æ—¶å€™ï¼Œç³»ç»Ÿçš„æƒé™é…ç½®å¯ä»¥å†™åˆ°æˆ‘ä»¬çš„ä»£ç å½“ä¸­å»ã€‚æ¯”å¦‚å‰å°é—¨æˆ·ç½‘ç«™ç­‰æƒé™æ¯”è¾ƒå•ä¸€ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„æˆæƒé…ç½®å³å¯å®Œæˆï¼Œå¦‚æœæƒé™å¤æ‚æ¯”å¦‚åŠå…¬OAï¼Œç”µå•†åå°ç®¡ç†ç³»ç»Ÿç­‰å°±ä¸èƒ½å†™åœ¨ä»£ç é‡Œé¢äº†ã€‚éœ€è¦è®¾è®¡RBACæƒé™æ¨¡å‹è®¾è®¡ã€‚ 3.2 SpringSecurityæˆæƒ3.2.1 å†…ç½®æƒé™è¡¨è¾¾å¼Spring Security ä½¿ç”¨Spring ELæ¥æ”¯æŒï¼Œä¸»è¦ç”¨äºWebè®¿é—®å’Œæ–¹æ³•å®‰å…¨ä¸Š, å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æ¥åˆ¤æ–­æ˜¯å¦å…·æœ‰è®¿é—®æƒé™. ä¸‹é¢æ˜¯Spring Securityå¸¸ç”¨çš„å†…ç½®è¡¨è¾¾å¼. ExpressionUrlAuthorizationConfigurerå®šä¹‰äº†æ‰€æœ‰çš„è¡¨è¾¾å¼ è¡¨è¾¾å¼ è¯´æ˜ permitAll ä»»ä½•äººéƒ½å…è®¸è®¿é—® denyAll ä»»ä½•äººéƒ½ä¸å…è®¸è®¿é—® anonymous åŒ¿åç”¨æˆ·å…è®¸è®¿é—® rememberMe è®°ä½æˆ‘çš„ç”¨æˆ·å¯ä»¥è®¿é—® authenticated æŒ‡å®šä»»ä½•ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·éƒ½å…è®¸è®¿é—®ï¼Œä¸åŒ…æ‹¬anonymous fullyAuthenticated æŒ‡å®šç”±ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·å…è®¸è®¿é—®,ä¸åŒ…å«anonymouså’ŒrememberMe hasRole(role) æŒ‡å®šéœ€è¦ç‰¹å®šçš„è§’è‰²çš„ç”¨æˆ·å…è®¸è®¿é—®, ä¼šè‡ªåŠ¨åœ¨è§’è‰²å‰é¢æ’å…¥â€™ROLE_â€™ hasAnyRole([role1,role2]) æŒ‡å®šéœ€è¦ä»»æ„ä¸€ä¸ªçš„è§’è‰²çš„ç”¨æˆ·å…è®¸è®¿é—®, ä¼šè‡ªåŠ¨åœ¨è§’è‰²å‰é¢æ’å…¥â€™ROLE_â€™ hasAuthority(authority) éœ€è¦æœ‰ç‰¹å®šçš„æƒé™å…è®¸è®¿é—® hasAnyAuthority([authority,authority]) éœ€è¦æœ‰å…¶ä¸­ä»»æ„ä¸€ä¸ªçš„æƒé™å…è®¸è®¿é—® hasIpAddress(ip) éœ€è¦ç‰¹å®šçš„IPåœ°å€å¯ä»¥è®¿é—® 3.2.2 URLå®‰å…¨è¡¨è¾¾å¼åŸºäºwebè®¿é—®ä½¿ç”¨è¡¨è¾¾å¼ä¿æŠ¤urlè¯·æ±‚è·¯å¾„. è®¾ç½®urlè®¿é—®æƒé™ 123456// è®¾ç½®/user/** è®¿é—®éœ€è¦ADMINè§’è‰²http.authorizeRequests().antMatchers(&quot;/user/**&quot;).hasRole(&quot;ADMIN&quot;);// è®¾ç½®/product/** è®¿é—®éœ€è¦PRODUCTè§’è‰²å’ŒIPåœ°å€ä¸º127.0.0.1. hasAnyRole(&quot;PRODUCT,ADMIN&quot;)http.authorizeRequests().antMatchers(&quot;/product/**&quot;).access(&quot;hasAnyRole(&#x27;ADMIN,PRODUCT&#x27;) and hasIpAddress(&#x27;127.0.0.1&#x27;)&quot;);// è®¾ç½®è‡ªå®šä¹‰æƒé™ä¸è¶³ä¿¡æ¯.http.exceptionHandling().accessDeniedHandler(myAuthHandle); è‡ªå®šä¹‰æƒé™ä¸è¶³å¤„ç†(åœ¨ä¹‹å‰ä¸Šé¢çš„è¡¨æ ¼åˆ—ä¸¾è¿‡äº†ï¼Œå®ç°AccessDeniedHandleré‡å†™handleæ–¹æ³•å³å¯,åœ¨ä¸Šä¸€æ­¥é…ä¸Šè‡ªå·±çš„å®ç°ç±»å³å¯ï¼‰ 123456@Overridepublic void handle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AccessDeniedException e) throws IOException, ServletException &#123; httpServletResponse.setStatus(HttpServletResponse.SC_FORBIDDEN); httpServletResponse.setContentType(&quot;text/html;charset=UTF-8&quot;); httpServletResponse.getWriter().write(&quot;æƒé™ä¸è¶³ï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;);&#125; è®¾ç½®ç”¨æˆ·å¯¹åº”çš„è§’è‰²æƒé™åœ¨è‡ªå®šä¹‰çš„UserDetailServiceå½“ä¸­è·å–Securityç”¨æˆ·å®ä½“çš„è¿‡ç¨‹é‡Œé¢ç»™ç”¨æˆ·å»åŠ æƒé™ 1234567// å…ˆå£°æ˜ä¸€ä¸ªæƒé™é›†åˆ,æ„é€ å‡½æ•°å¿…é¡»ä¼ å€¼ä¸”ä¸èƒ½ä¸ºnull,ä¼ ä¸ªç©ºé›†åˆå³å¯Collection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();if (&quot;admin&quot;.equalsIgnoreCase(user.getUsername())) &#123; authorities.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));&#125; else &#123; authorities.add(new SimpleGrantedAuthority(&quot;ROLE_PRODUCT&quot;));&#125; 3.2.3 åœ¨webå®‰å…¨è¡¨è¾¾å¼ä¸­å¼•ç”¨è‡ªå®šä¹‰Beanæˆæƒ è‡ªå®šä¹‰æˆæƒç±» 123456789101112131415161718192021222324252627282930@Componentpublic class MyAuthService &#123; /** * æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰å¯¹åº”çš„è®¿é—®æƒé™ * * @param authentication ç™»å½•ç”¨æˆ· * @param request è¯·æ±‚å¯¹è±¡ * @return */ public boolean check(Authentication authentication, HttpServletRequest request) &#123; User user = (User) authentication.getPrincipal(); // è·å–ç”¨æˆ·æ‰€æœ‰æƒé™ Collection&lt;GrantedAuthority&gt; authorities = user.getAuthorities(); // è·å–ç”¨æˆ·å String username = user.getUsername(); // å¦‚æœç”¨æˆ·åä¸ºadmin,åˆ™ä¸éœ€è¦è®¤è¯ if (username.equalsIgnoreCase(&quot;admin&quot;)) &#123; return true; &#125; else &#123; // å¾ªç¯ç”¨æˆ·çš„æƒé™, åˆ¤æ–­æ˜¯å¦æœ‰ROLE_ADMINæƒé™, æœ‰è¿”å›true for (GrantedAuthority authority : authorities) &#123; String role = authority.getAuthority(); if (&quot;ROLE_ADMIN&quot;.equals(role)) &#123; return true; &#125; &#125; &#125; return false; &#125;&#125; é…ç½®ç±» 1234//ä½¿ç”¨è‡ªå®šä¹‰Beanæˆæƒhttp.authorizeRequests() .antMatchers(&quot;/user/**&quot;) .access(&quot;@myAuthService.check(authentication,request)&quot;); è‹¥æˆæƒæ—¶è¿˜éœ€è¦å¯¹è·¯å¾„å˜é‡éœ€åˆ¤æ–­ 123456789101112131415/** * æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰å¯¹åº”çš„è®¿é—®æƒé™ * * @param authentication ç™»å½•ç”¨æˆ· * @param request è¯·æ±‚å¯¹è±¡ * @param id å‚æ•°ID * @return */public boolean check(Authentication authentication, HttpServletRequest request, Integer id) &#123; // ä¸¾ä¸ªä¾‹å­ if (id &gt; 10) &#123; return false; &#125; return true;&#125; 1234//ä½¿ç”¨è‡ªå®šä¹‰Beanæˆæƒ,å¹¶æºå¸¦è·¯å¾„å‚æ•°http.authorizeRequests() .antMatchers(&quot;/user/delete/&#123;id&#125;&quot;) .access(&quot;@myAuthorizationService.check(authentication,request,#id)&quot;); 3.2.4 Methodå®‰å…¨è¡¨è¾¾å¼å‘ä¸Šé¢é‚£æ ·é…çš„è¯ï¼Œä¸åŒçš„æ¥å£ä¸åŒçš„æƒé™é‚£ä¹ˆå°±è¦åœ¨http.authorizeRequestsé…ç½®å¾ˆå¤šæ¯”è¾ƒå¤æ‚ï¼Œspring securityæä¾›äº†4ç§æ³¨è§£åˆ†åˆ«æ˜¯@PreAuthorize @PostAuthorize @PreFilter @PostFilter å¼€å¯æ–¹æ³•çº§åˆ«çš„æ³¨è§£é…ç½® åœ¨securityé…ç½®ç±»ä¸­æ·»åŠ æ³¨è§£ 123@EnableGlobalMethodSecurity(prePostEnabled = true)//å¼€å¯æ³¨è§£æ”¯æŒ@Configurationpublic class SecurityConfiguration extends WebSecurityConfigurerAdapter &#123; åœ¨æ–¹æ³•ä¸Šä½¿ç”¨æ³¨è§£ä½¿ç”¨è¿™æ ·çš„æ–¹å¼å°±æ¯”ä¸Šé¢å°‘äº†secuirtyé…ç½®ç±»å½“ä¸­çš„é…ç½®å’Œè‡ªå®šä¹‰çš„æˆæƒç±» ProAuthorize æ³¨è§£é€‚åˆè¿›å…¥æ–¹æ³•å‰è¿›è¡Œæƒé™éªŒè¯ 123456789101112131415@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)@RequestMapping(&quot;/findAll&quot;)public String findAll(Model model) &#123; List&lt;UserVo&gt; userList = userService.list(); model.addAttribute(&quot;userList&quot;, userList); return &quot;user_list&quot;;&#125;@PreAuthorize(&quot;#id &lt; 10&quot;)@RequestMapping(&quot;/update/&#123;id&#125;&quot;)public String update(@PathVariable Integer id, Model model) &#123; UserVo user = userService.getById(id); model.addAttribute(&quot;user&quot;, user); return &quot;user_update&quot;;&#125; @PostAuthorize: åœ¨æ–¹æ³•æ‰§è¡Œååœ¨è¿›è¡Œæƒé™éªŒè¯ï¼Œé€‚åˆéªŒè¯å¸¦æœ‰è¿”å›å€¼çš„æƒé™ï¼ŒSpring ELæä¾›è¿”å›å¯¹è±¡èƒ½å¤Ÿåœ¨è¡¨è¾¾å¼è¯­è¨€ä¸­è·å–åˆ°è¿”å›å¯¹è±¡returnObject 12345678910111213@PostAuthorize(&quot;returnObject.username==authentication.principal.username&quot;)@GetMapping(&quot;/&#123;id&#125;&quot;)@ResponseBodypublic UserVo getById(@PathVariable Integer id) &#123; //è·å–è®¤è¯ä¿¡æ¯ Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); // åˆ¤æ–­è®¤è¯ä¿¡æ¯æ˜¯å¦æ¥æºäºRememberMe if (RememberMeAuthenticationToken.class.isAssignableFrom(authentication.getClass())) &#123; throw new RememberMeAuthenticationException(&quot;è®¤è¯ä¿¡æ¯æ¥æºäº RememberMe,è¯·é‡æ–°ç™»å½•&quot;); &#125; UserVo user = userService.getById(id); return user;&#125; @PreFilter: å¯ä»¥ç”¨æ¥å¯¹é›†åˆç±»å‹çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå°†ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å‰”é™¤é›†åˆ 123456789// è¿‡æ»¤å‡ºå¶æ•°çš„ï¼Œä¹Ÿå°±æ˜¯å‰”é™¤å¥‡æ•°çš„@PreFilter(filterTarget = &quot;ids&quot;,value = &quot;filterObject%2==0&quot;)@GetMapping(&quot;/delByIds&quot;)public String delByIds(@RequestParam(value = &quot;id&quot;) List&lt;Integer&gt; ids) &#123; for (Integer id : ids) &#123; System.out.println(id); &#125; return &quot;redirect:/user/findAll&quot;;&#125; @PostFilter: å¯ä»¥ç”¨æ¥å¯¹é›†åˆç±»å‹çš„è¿”å›å€¼è¿›è¡Œè¿‡æ»¤ï¼Œå°†ä¸ç¬¦åˆçš„å…ƒç´ å‰”é™¤é›†åˆ 12345678// è¿”å›åˆ—è¡¨å…ƒç´ IDä¸ºå¶æ•°çš„ä¿ç•™@PostFilter(&quot;filterObject.id%2 == 0&quot;)@RequestMapping(&quot;/findAllTOJson&quot;)@ResponseBodypublic List&lt;UserVo&gt; findAllTOJson() &#123; List&lt;UserVo&gt; userList = userService.list(); return userList;&#125; 3.3 åŸºäºæ•°æ®åº“çš„RBACæ•°æ®æ¨¡å‹â€‹ å›é¡¾ä¸Šé¢å†…å®¹ï¼Œç¬¬ä¸€åœ¨è‡ªå®šä¹‰äº§ç”Ÿsecuirtyç”¨æˆ·çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å»ç»™ç”¨æˆ·æ·»åŠ æƒé™å†™æ­»æˆ–è€…åœ¨æ•°æ®åº“æŸ¥å‡ºæ¥æ”¾è¿›å»ã€‚ç¬¬äºŒåœ¨ç”¨æˆ·è®¿é—®èµ„æºæ—¶æƒé™çš„æ ¡éªŒé€šè¿‡é…ç½®èµ„æºURLåŠ è‡ªå®šä¹‰æˆæƒå™¨è¿›è¡Œåˆ¤æ–­æˆ–è€…ç›´æ¥åœ¨èµ„æºä¸Šä½¿ç”¨æ³¨è§£è®©securityå»åˆ¤æ–­ç”¨æˆ·å’Œèµ„æºã€‚è¿™æ ·çš„æ–¹å¼ä»…ä»…é€‚åˆæƒé™å°‘çš„æƒ…å†µï¼Œå¦‚æœç³»ç»Ÿæƒé™ä¸æ˜¯åªæœ‰ä¸€ä¸ªä¸¤ä¸ªæƒé™å°±éœ€è¦è®¾è®¡æƒé™æ¨¡å‹äº†ã€‚ â€‹ æˆ‘ä»¬å¼€å‘ä¸€ä¸ªç³»ç»Ÿï¼Œå¿…ç„¶é¢ä¸´æƒé™æ§åˆ¶çš„é—®é¢˜ï¼Œä¸åŒçš„ç”¨æˆ·å…·æœ‰ä¸åŒçš„è®¿é—®ã€æ“ä½œã€æ•°æ®æƒé™ã€‚å½¢æˆç†è®ºçš„æƒé™æ§åˆ¶æ¨¡å‹æœ‰ï¼šè‡ªä¸»è®¿é—®æ§åˆ¶ï¼ˆDAC: Discretionary Access Controlï¼‰ã€å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMAC: Mandatory Access Controlï¼‰ã€åŸºäºå±æ€§çš„æƒé™éªŒè¯ï¼ˆABAC:Attribute-Based Access Controlï¼‰ç­‰ã€‚æœ€å¸¸è¢«å¼€å‘è€…ä½¿ç”¨ä¹Ÿæ˜¯ç›¸å¯¹æ˜“ç”¨ã€é€šç”¨çš„å°±æ˜¯RBACæƒé™æ¨¡å‹ï¼ˆRole-Based Access Controlï¼‰ 3.3.1 RBACæƒé™æ¨¡å‹ç®€ä»‹RBACæƒé™æ¨¡å‹ï¼ˆRole-Based Access Controlï¼‰å³ï¼šåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ã€‚æ¨¡å‹ä¸­æœ‰å‡ ä¸ªå…³é”®çš„æœ¯è¯­ï¼š ç”¨æˆ·ï¼šç³»ç»Ÿæ¥å£åŠè®¿é—®çš„æ“ä½œè€… æƒé™ï¼šèƒ½å¤Ÿè®¿é—®æŸæ¥å£æˆ–è€…åšæŸæ“ä½œçš„æˆæƒèµ„æ ¼ è§’è‰²ï¼šå…·æœ‰ä¸€ç±»ä¸€æ‰¹æƒé™çš„æ€»ç§° RBACæƒé™æ¨¡å‹æ ¸å¿ƒæˆæƒé€»è¾‘å¦‚ä¸‹ï¼š æŸç”¨æˆ·æ˜¯ä»€ä¹ˆè§’è‰²ï¼Ÿ æŸç”¨æˆ·å…·æœ‰ä»€ä¹ˆæƒé™ï¼Ÿ é€šè¿‡è§’è‰²å¯¹åº”çš„æƒé™æ¨å¯¼å‡ºç”¨æˆ·æƒé™ 3.3.2 RBACçš„æ¼”åŒ–è¿›ç¨‹ ç”¨æˆ·ä¸æƒé™ç›´æ¥å…³è” æƒ³åˆ°æƒé™æ§åˆ¶ï¼Œäººä»¬æœ€å…ˆæƒ³åˆ°çš„ä¸€å®šæ˜¯ç”¨æˆ·ä¸æƒé™ç›´æ¥å…³è”çš„æ¨¡å¼ï¼Œç®€å•åœ°è¯´å°±æ˜¯ï¼šæŸä¸ªç”¨æˆ·å…·æœ‰æŸäº›æƒé™ã€‚å¦‚å›¾ï¼š å¼ ä¸‰å…·æœ‰æ‰€æœ‰æƒé™å®ƒå¯èƒ½æ˜¯ä¸€ä¸ªè¶…çº§ç®¡ç†å‘˜ æå››,ç‹äº” å…·æœ‰æ·»åŠ å•†å“å’Œå®¡æ ¸å•†å“çš„æƒé™æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæ™®é€šä¸šåŠ¡å‘˜ è¿™ç§æ¨¡å‹èƒ½å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ç”¨æˆ·ä¸æƒé™ä¹‹é—´çš„å…³ç³»ï¼Œè¶³å¤Ÿç®€å•ã€‚ä½†åŒæ—¶ä¹Ÿå­˜åœ¨é—®é¢˜ï¼š ç°åœ¨ç”¨æˆ·æ˜¯å¼ ä¸‰ã€æå››ï¼Œç‹äº”ä»¥åéšç€äººå‘˜å¢åŠ ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·éƒ½éœ€è¦é‡æ–°æˆæƒ æ“ä½œäººå‘˜çš„ä»–çš„æƒé™å‘ç”Ÿå˜æ›´å,éœ€è¦å¯¹æ¯ä¸ªä¸€ä¸ªç”¨æˆ·é‡æ–°æˆäºˆæ–°çš„æƒé™ ç”¨æˆ·è§’è‰²å…³è” è¿™æ ·åªéœ€è¦ç»´æŠ¤è§’è‰²å’Œæƒé™ä¹‹é—´çš„å…³ç³»å°±å¯ä»¥äº†. å¦‚æœä¸šåŠ¡å‘˜çš„æƒé™å‘ç”Ÿå˜æ›´, åªéœ€è¦å˜åŠ¨ä¸šåŠ¡å‘˜è§’è‰²å’Œæƒé™ä¹‹å‰çš„å…³ç³»è¿›è¡Œç»´æŠ¤å°±å¯ä»¥äº†. ç”¨æˆ·å’Œæƒé™å°±åˆ†ç¦»å¼€æ¥äº†. å¦‚ä¸‹å›¾ 3.3.3 åŸºäºRBACè®¾è®¡æƒé™è¡¨ç»“æ„ ä¸€ä¸ªç”¨æˆ·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰² ä¸€ä¸ªè§’è‰²å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ‹¥æœ‰ ä¸€ä¸ªè§’è‰²æœ‰å¤šç§æƒé™ ä¸€ä¸ªæƒé™å±äºå¤šä¸ªè§’è‰² 3.3.4 åŸºäºSpring Securityå®ç°RBACæƒé™ç®¡ç† åŠ¨æ€æŸ¥è¯¢æ•°æ®åº“ä¸­ç”¨æˆ·åº”ç”¨çš„æƒé™ 123456789/** * æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢æƒé™ * * @param id * @return */@Select(&quot;SELECT p.* FROM t_permission p,t_role_permission rp,t_role r,t_user_role ur,t_user u &quot; + &quot;WHERE p.id = rp.PID AND rp.RID = r.id AND r.id = ur.RID AND ur.UID = u.id AND u.id =#&#123;id&#125;&quot;)List&lt;Permission&gt; findByUserId(Integer id); ç»™ç™»å½•ç”¨æˆ·æˆæƒ 12345678// å…ˆå£°æ˜ä¸€ä¸ªæƒé™é›†åˆ, å› ä¸ºæ„é€ æ–¹æ³•é‡Œé¢ä¸èƒ½ä¼ å…¥nullCollection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();// æŸ¥è¯¢ç”¨æˆ·å¯¹åº”æ‰€æœ‰æƒé™List&lt;Permission&gt; permissions = permissionService.findByUserId(user.getId());for (Permission permission : permissions) &#123; // æˆæƒ authorities.add(new SimpleGrantedAuthority(permission.getPermissionTag()));&#125; è®¾ç½®è®¿é—®æƒé™ 12345678// æŸ¥è¯¢æ•°æ®åº“æ‰€æœ‰æƒé™åˆ—è¡¨List&lt;Permission&gt; permissions = permissionService.list();for (Permission permission : permissions) &#123; //æ·»åŠ è¯·æ±‚æƒé™ http.authorizeRequests().antMatchers(permission.getPermissionUrl()).hasAuthority(permission.getPermissionTag());&#125;// è®¾ç½®è‡ªå®šä¹‰æƒé™ä¸è¶³ä¿¡æ¯.http.exceptionHandling().accessDeniedHandler(myAuthHandle); è¿™æ ·å°±å®Œæˆäº†åŠ¨æ€çš„æƒé™ç®¡ç†ï¼Œç¬¬ä¸€éƒ¨åˆ†åœ¨äº§ç”ŸSecurityç”¨æˆ·å®ä½“çš„serviceå½“ä¸­è¿›è¡Œå…³è”æŸ¥è¯¢ç»™å½“å‰ç”¨æˆ·å¡«å…¥æƒé™ã€‚ç¬¬äºŒéƒ¨åˆ†é…ç½®å„èµ„æºæƒé™ï¼šä»æ•°æ®åº“è·å–æƒé™ä¿¡æ¯å¹¶é…ç½®èµ„æºpathä¸å¯¹åº”æƒé™ã€‚ æ€»è€Œè¨€ä¹‹å¦‚æœæ˜¯ç®€å•çš„è®¤è¯é™åˆ¶å°±å¯ä»¥ä¹‹å‰æƒ³ä¹‹å‰ä¸€æ ·ç®€å•å†™æ­»é…ç½®åœ¨SecurityConfigurationæˆ–è€…é…ç½®åœ¨å„ä¸ªæ–¹æ³•ã€‚å¦åˆ™å°±å¯ä»¥ä½¿ç”¨å½“å‰çš„è®¾è®¡è¿›è¡Œæƒé™ç®¡ç†ã€‚ 3.4 åŸºäºé¡µé¢æ ‡ç­¾çš„æƒé™æ§åˆ¶â€‹ ç®€å•è®°ä¸‹å§ï¼Œä¹Ÿä¸å¸¸ç”¨äº† â€‹ åœ¨jspé¡µé¢æˆ–è€…thymeleafæ¨¡æ¿é¡µé¢ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨spring securityæä¾›çš„æƒé™æ ‡ç­¾æ¥è¿›è¡Œæƒé™æ§åˆ¶.è¦æƒ³ä½¿ç”¨thymeleafä¸ºSpringSecurityæä¾›çš„æ ‡ç­¾å±æ€§ï¼Œé¦–å…ˆéœ€è¦å¼•å…¥thymeleaf-extras-springsecurityä¾èµ–æ”¯æŒã€‚ åœ¨pom æ–‡ä»¶ä¸­çš„å¼•å…¥springsecurityçš„æ ‡ç­¾ä¾èµ–thymeleaf-extras-springsecurity5 123456&lt;!--æ·»åŠ thymeleafä¸ºSpringSecurityæä¾›çš„æ ‡ç­¾ ä¾èµ– --&gt;&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt; &lt;version&gt;3.0.4.RELEASE&lt;/version&gt;&lt;/dependency&gt; åœ¨htmlæ–‡ä»¶é‡Œé¢å£°æ˜ä½¿ç”¨ 12&lt;!DOCTYPE html&gt;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:sec=&quot;http://www.thymeleaf.org/extras/spring-security&quot;&gt; 3.4.1 å¸¸ç”¨SpringSecurityçš„æ ‡ç­¾å±æ€§ä»‹ç» åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»ç™»é™†è®¤è¯ï¼Œå¼•å·å†…çš„å‚æ•°å¿…é¡»æ˜¯isAuthenticated()ï¼Œsec:authorize&#x3D;â€isAuthenticated()â€ è·å¾—å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åï¼Œå¼•å·å†…çš„å‚æ•°å¿…é¡»æ˜¯nameï¼Œsec:authentication&#x3D;â€œnameâ€ åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šçš„æƒé™ã€‚å¼•å·å†…çš„å‚æ•°ä¸ºæƒé™çš„åç§°ï¼Œsec:authorize&#x3D;â€œhasRole(â€˜roleâ€™)â€ 3.4.2 SpringSecurityæ ‡ç­¾çš„ä½¿ç”¨1234567891011121314151617181920212223242526272829&lt;html&gt; &lt;head&gt;&lt;/head&gt; &lt;body&gt; &lt;div class=&quot;leftnav&quot;&gt; &lt;div class=&quot;leftnav-title&quot;&gt; &lt;div sec:authorize=&quot;isAuthenticated()&quot;&gt; &lt;span sec:authentication=&quot;name&quot;&gt;&lt;/span&gt; &lt;img src=&quot;images/y.jpg&quot; class=&quot;radius-circle rotate-hover&quot; height=&quot;50&quot; alt=&quot;&quot; /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasAuthority(&#x27;user:findAll&#x27;)&quot;&gt; &lt;h2&gt;&lt;span class=&quot;icon-user&quot;&gt;&lt;/span&gt;ç³»ç»Ÿç®¡ç†&lt;/h2&gt; &lt;ul style=&quot;display:block&quot;&gt; &lt;li&gt;&lt;a href=&quot;/user/findAll&quot; target=&quot;right&quot;&gt;&lt;span class=&quot;icon-caretright&quot;&gt; &lt;!--span--&gt;ç”¨æˆ·ç®¡ç†&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;javascript:void(0)&quot; onclick=&quot;toCors()&quot; target=&quot;right&quot;&gt; &lt;span class=&quot;icon-caret-right&quot;&gt;&lt;/span&gt;è·¨åŸŸæµ‹è¯•&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div sec:authorize=&quot;hasAuthority(&#x27;product:findAll&#x27;)&quot;&gt; &lt;h2&gt;&lt;span class=&quot;icon-pencil-square-o&quot;&gt;&lt;/span&gt;æ•°æ®ç®¡ç†&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;/product/findAll&quot; target=&quot;right&quot;&gt;&lt;span class=&quot;iconcaret-right&quot;&gt;&lt;/span&gt;å•†å“ç®¡ç†&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; å››ã€æºç åˆ†æ4.1 è¿‡æ»¤å™¨é“¾åŠ è½½æºç 4.1.1 è¿‡æ»¤å™¨åŠ è½½æµç¨‹åˆ†æåœ¨ä¸Šé¢ç¬¬äºŒéƒ¨åˆ†çš„æ—¶å€™è¯´springSecurityä¸­ä¸»è¦åŠŸèƒ½æ˜¯ç”±è¿‡æ»¤å™¨é“¾æ¥å®Œæˆçš„, é‚£ä¹ˆspring boot æ˜¯å¦‚ä½•åŠ è½½è¿™ä¸ªæµç¨‹çš„å‘¢? 4.1.2 è¿‡æ»¤å™¨é“¾åŠ è½½æµç¨‹æºç åˆ†æ spring bootå¯åŠ¨è‡ªåŠ¨é…ç½®ä¸­ä¼šåŠ è½½spring.factoriesæ–‡ä»¶, åœ¨æ–‡ä»¶ä¸­æœ‰å¯¹åº”é’ˆå¯¹Spring Securityçš„è¿‡æ»¤å™¨é“¾çš„é…ç½®ä¿¡æ¯ 12# å®‰å…¨è¿‡æ»¤å™¨è‡ªåŠ¨é…ç½®org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration SecurityFilterAutoConfigurationç±» 12345678@Configuration(proxyBeanMethods = false)@ConditionalOnWebApplication(type = Type.SERVLET)@EnableConfigurationProperties(&#123;SecurityProperties.class&#125;) //Securityé…ç½®ç±»@ConditionalOnClass(&#123;AbstractSecurityWebApplicationInitializer.class, SessionCreationPolicy.class&#125;)@AutoConfigureAfter(&#123;SecurityAutoConfiguration.class&#125;) //å½“å‰ç±»åŠ è½½å®Œæˆå åŠ è½½SecurityAutofigurationpublic class SecurityFilterAutoConfiguration &#123; ... &#125; ä¸»è¦ä¸¤ä¸ªéƒ¨åˆ†ç¬¬ä¸€åŠ è½½securityé…ç½®ï¼Œå½“ä¸­ä¼šæœ‰ä¸¤ä¸ªä¸œè¥¿ä¸€ä¸ªä¸€ä¸ªæ˜¯é»˜è®¤ç”¨æˆ·ä¿¡æ¯ã€ä¸€ä¸ªæ˜¯è¿‡æ»¤å™¨é“¾çš„ç»„å»º ç¬¬äºŒå°±æ˜¯éšåå»åŠ è½½çš„SecurityAutoConfigurationï¼Œå…¶ä¸­å¯¼å…¥äº†webçš„å®‰å…¨é…ç½®WebSecurityEnablerConfiguration.classï¼Œå¦‚ä¸‹ SecurityAutoConfigurationç±» 1234567891011121314@Configuration(proxyBeanMethods = false)@ConditionalOnClass(&#123;DefaultAuthenticationEventPublisher.class&#125;)@EnableConfigurationProperties(&#123;SecurityProperties.class&#125;)@Import(&#123;SpringBootWebSecurityConfiguration.class, WebSecurityEnablerConfiguration.class, SecurityDataConfiguration.class&#125;)//webå®‰å…¨å¯ç”¨é…ç½®public class SecurityAutoConfiguration &#123; public SecurityAutoConfiguration() &#123; &#125; @Bean @ConditionalOnMissingBean(&#123;AuthenticationEventPublisher.class&#125;) public DefaultAuthenticationEventPublisher authenticationEventPublisher(ApplicationEventPublisher publisher) &#123; return new DefaultAuthenticationEventPublisher(publisher); &#125;&#125; WebSecurityEnablerConfigurationç±» 123456789@Configuration(proxyBeanMethods = false)@ConditionalOnBean(&#123;WebSecurityConfigurerAdapter.class&#125;)@ConditionalOnMissingBean(name = &#123;&quot;springSecurityFilterChain&quot;&#125;)@ConditionalOnWebApplication(type = Type.SERVLET)@EnableWebSecuritypublic class WebSecurityEnablerConfiguration &#123; public WebSecurityEnablerConfiguration() &#123; &#125;&#125; @EnableWebSecurityæ³¨è§£æœ‰ä¸¤ä¸ªä½œç”¨ï¼š1: åŠ è½½äº†WebSecurityConfigurationé…ç½®ç±», é…ç½®å®‰å…¨è®¤è¯ç­–ç•¥ã€‚2: åŠ è½½äº†AuthenticationConfiguration é…ç½®çš„è®¤è¯ä¿¡æ¯ã€‚ WebSecurityConfigurationç±» åœ¨webSecurityConfigurationå½“ä¸­ç”Ÿæˆäº†è¿‡æ»¤å™¨é“¾ 1234567891011121314151617@Configuration(proxyBeanMethods = false)public class WebSecurityConfiguration implements ImportAware, BeanClassLoaderAware &#123; ... // springSecurityè¿‡æ»¤å™¨å£°æ˜ @Bean(name = &#123;&quot;springSecurityFilterChain&quot;&#125;) public Filter springSecurityFilterChain() throws Exception &#123; boolean hasConfigurers = this.webSecurityConfigurers != null &amp;&amp; !this.webSecurityConfigurers.isEmpty(); if (!hasConfigurers) &#123; WebSecurityConfigurerAdapter adapter = (WebSecurityConfigurerAdapter)this.objectObjectPostProcessor.postProcess(new WebSecurityConfigurerAdapter() &#123; &#125;); this.webSecurity.apply(adapter); &#125; return (Filter)this.webSecurity.build(); &#125; ...&#125; 4.2 è®¤è¯æµç¨‹æºç 4.2.1 è®¤è¯æµç¨‹åˆ†æâ€‹ åœ¨æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­, UsernamePasswordAuthenticationFilteræ˜¯æ¥å¤„ç†æ•´ä¸ªç”¨æˆ·è®¤è¯çš„æµç¨‹çš„, æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬ä¸»è¦é’ˆå¯¹ç”¨æˆ·è®¤è¯æ¥çœ‹ä¸‹æºç æ˜¯å¦‚ä½•å®ç°çš„? 4.2.2 è®¤è¯æµç¨‹æºç è·Ÿè¸ª UsernamePasswordAuthenticationFilter 1234567891011121314151617181920212223public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; // 1.æ£€æŸ¥æ˜¯å¦æ˜¯Postè¯·æ±‚ if (this.postOnly &amp;&amp; !request.getMethod().equals(&quot;POST&quot;)) &#123; throw new AuthenticationServiceException(&quot;Authentication method not supported: &quot; + request.getMethod()); &#125; else &#123; // 2.è·å–ç”¨æˆ·åå¯†ç  String username = this.obtainUsername(request); String password = this.obtainPassword(request); if (username == null) &#123; username = &quot;&quot;; &#125; if (password == null) &#123; password = &quot;&quot;; &#125; username = username.trim(); // 3.åˆ›å»ºAuthenticationTokenï¼Œæ­¤æ—¶æ˜¯æœªè®¤è¯çŠ¶æ€ UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(username, password); this.setDetails(request, authRequest); // 4.è°ƒç”¨AuthenticationManagerè¿›è¡Œè®¤è¯ return this.getAuthenticationManager().authenticate(authRequest); &#125;&#125; UsernamePasswordAuthenticationToken 123456public UsernamePasswordAuthenticationToken(Object principal, Object credentials) &#123; super((Collection)null); this.principal = principal; this.credentials = credentials; this.setAuthenticated(false);&#125; AuthenticationManagerâ€“&gt;ProviderManagerâ€“&gt;AbstractUserDetailsAuthenticationProvider 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public Authentication authenticate(Authentication authentication) throws AuthenticationException &#123; Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication, () -&gt; &#123; return this.messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.onlySupports&quot;, &quot;Only UsernamePasswordAuthenticationToken is supported&quot;); &#125;); // 1.è·å–ç”¨æˆ·å String username = this.determineUsername(authentication); // 2.å°è¯•ä»ç¼“å­˜ä¸­æå– boolean cacheWasUsed = true; UserDetails user = this.userCache.getUserFromCache(username); if (user == null) &#123; cacheWasUsed = false; try &#123; // æ£€ç´¢User user = this.retrieveUser(username, (UsernamePasswordAuthenticationToken)authentication); &#125; ... &#125; try &#123; // 4.è®¤è¯å‰æ£€æŸ¥userçŠ¶æ€ this.preAuthenticationChecks.check(user); // 5.é™„åŠ è®¤è¯æ£€æŸ¥çŠ¶æ€ this.additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken)authentication); &#125; catch (AuthenticationException var7) &#123; if (!cacheWasUsed) &#123; throw var7; &#125; cacheWasUsed = false; user = this.retrieveUser(username, (UsernamePasswordAuthenticationToken)authentication); this.preAuthenticationChecks.check(user); this.additionalAuthenticationChecks(user, (UsernamePasswordAuthenticationToken)authentication); &#125; // 6.è®¤è¯åæ£€æŸ¥userçŠ¶æ€ this.postAuthenticationChecks.check(user); if (!cacheWasUsed) &#123; this.userCache.putUserInCache(user); &#125; Object principalToReturn = user; if (this.forcePrincipalAsString) &#123; principalToReturn = user.getUsername(); &#125; // 7.åˆ›å»ºè®¤è¯æˆåŠŸçš„UsernamePasswordAuthenticationTokenå¹¶å°†è®¤è¯çŠ¶æ€è®¾ç½®æœªtrue return this.createSuccessAuthentication(principalToReturn, authentication, user);&#125; å…¶ä¸­retrieveUseræ–¹æ³• 1234567891011121314protected final UserDetails retrieveUser(String username, UsernamePasswordAuthenticationToken authentication) throws AuthenticationException &#123; this.prepareTimingAttackProtection(); try &#123; // è°ƒç”¨è‡ªå®šä¹‰UserDetailsServiceçš„loadUserByUsernameæ–¹æ³• UserDetails loadedUser = this.getUserDetailsService().loadUserByUsername(username); if (loadedUser == null) &#123; throw new InternalAuthenticationServiceException(&quot;UserDetailsService returned null, which is an interface contract violation&quot;); &#125; else &#123; return loadedUser; &#125; &#125; ...&#125; å…¶ä¸­additionalAuthenticationChecksæ–¹æ³• 1234567891011121314protected void additionalAuthenticationChecks(UserDetails userDetails, UsernamePasswordAuthenticationToken authentication) throws AuthenticationException &#123; if (authentication.getCredentials() == null) &#123; this.logger.debug(&quot;Failed to authenticate since no credentials provided&quot;); throw new BadCredentialsException(this.messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); &#125; else &#123; // 1.è·å–å‰ç«¯å¯†ç  String presentedPassword = authentication.getCredentials().toString(); // 2.ä¸æ•°æ®åº“å¯†ç è¿›è¡Œå¯¹æ¯” if (!this.passwordEncoder.matches(presentedPassword, userDetails.getPassword())) &#123; this.logger.debug(&quot;Failed to authenticate since password does not match stored value&quot;); throw new BadCredentialsException(this.messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;, &quot;Bad credentials&quot;)); &#125; &#125;&#125; AbstractAuthenticationProcessingFilterâ€“doFilteræ–¹æ³• 1234567891011121314151617181920212223242526private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; if (!this.requiresAuthentication(request, response)) &#123; chain.doFilter(request, response); &#125; else &#123; try &#123; // 1.è°ƒç”¨å­ç±»æ–¹æ³• Authentication authenticationResult = this.attemptAuthentication(request, response); if (authenticationResult == null) &#123; return; &#125; // 2.sessionç­–ç•¥éªŒè¯ this.sessionStrategy.onAuthentication(authenticationResult, request, response); if (this.continueChainBeforeSuccessfulAuthentication) &#123; chain.doFilter(request, response); &#125; // 3.æˆåŠŸèº«ä»½éªŒè¯ this.successfulAuthentication(request, response, chain, authenticationResult); &#125; catch (InternalAuthenticationServiceException var5) &#123; this.logger.error(&quot;An internal error occurred while trying to authenticate the user.&quot;, var5); this.unsuccessfulAuthentication(request, response, var5); &#125; catch (AuthenticationException var6) &#123; this.unsuccessfulAuthentication(request, response, var6); &#125; &#125;&#125; successfulAuthenticationæ–¹æ³• 1234567891011121314151617protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; SecurityContext context = SecurityContextHolder.createEmptyContext(); // 1.å°†è®¤è¯çš„ç”¨æˆ·æ”¾å…¥SecurityContextä¸­ context.setAuthentication(authResult); SecurityContextHolder.setContext(context); this.securityContextRepository.saveContext(context, request, response); if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Set SecurityContextHolder to %s&quot;, authResult)); &#125; // æ£€æŸ¥æ˜¯ä¸æ˜¯è®°ä½æˆ‘ this.rememberMeServices.loginSuccess(request, response, authResult); if (this.eventPublisher != null) &#123; this.eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent(authResult, this.getClass())); &#125; // 3.è°ƒç”¨è‡ªå®šä¹‰çš„MyAuthHandleçš„onAuthenticationSuccessæ–¹æ³• this.successHandler.onAuthenticationSuccess(request, response, authResult);&#125; 4.3 è®°ä½æˆ‘æµç¨‹æºç æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­ï¼ŒRememberMeAuthenticationFilteræ˜¯æ¥å¤„ç†è®°ä½æˆ‘ç”¨æˆ·è®¤è¯çš„æµç¨‹çš„, æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬ä¸»è¦é’ˆå¯¹è®°ä½æˆ‘çœ‹ä¸‹æºç æ˜¯å¦‚ä½•å®ç°çš„? 4.3.1 è®°ä½æˆ‘æµç¨‹åˆ†æ 4.3.2 è®°ä½æˆ‘æµç¨‹æºç è·Ÿè¸ª AbstractAuthenticationProcessingFilter â€“ã€‹ successfulAuthenticationæ–¹æ³• 1234567891011121314151617protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException &#123; SecurityContext context = SecurityContextHolder.createEmptyContext(); // 1.å°†è®¤è¯çš„ç”¨æˆ·æ”¾å…¥SecurityContextä¸­ context.setAuthentication(authResult); SecurityContextHolder.setContext(context); this.securityContextRepository.saveContext(context, request, response); if (this.logger.isDebugEnabled()) &#123; this.logger.debug(LogMessage.format(&quot;Set SecurityContextHolder to %s&quot;, authResult)); &#125; // æ£€æŸ¥æ˜¯ä¸æ˜¯è®°ä½æˆ‘ this.rememberMeServices.loginSuccess(request, response, authResult); if (this.eventPublisher != null) &#123; this.eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent(authResult, this.getClass())); &#125; // 3.è°ƒç”¨è‡ªå®šä¹‰çš„MyAuthHandleçš„onAuthenticationSuccessæ–¹æ³• this.successHandler.onAuthenticationSuccess(request, response, authResult);&#125; loginSuccessæ–¹æ³• â€”ã€‹onLoginSuccess 1234567891011121314151617protected void onLoginSuccess(HttpServletRequest request, HttpServletResponse response, Authentication successfulAuthentication) &#123; // 1.è·å–ç”¨æˆ·å String username = successfulAuthentication.getName(); this.logger.debug(LogMessage.format(&quot;Creating new persistent login for user %s&quot;, username)); // 2.åˆ›å»ºpersistenToken PersistentRememberMeToken persistentToken = new PersistentRememberMeToken(username, this.generateSeriesData(), this.generateTokenData(), new Date()); try &#123; // 3.æ’å…¥æ•°æ®åº“ this.tokenRepository.createNewToken(persistentToken); // 4.å†™å…¥æµè§ˆå™¨cookie this.addCookie(persistentToken, request, response); &#125; catch (Exception var7) &#123; this.logger.error(&quot;Failed to save persistent token &quot;, var7); &#125;&#125; RememberMeAuthenticationFilter 1234567891011121314151617181920212223242526private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; if (SecurityContextHolder.getContext().getAuthentication() != null) &#123; this.logger.debug(LogMessage.of(() -&gt; &#123; return &quot;SecurityContextHolder not populated with remember-me token, as it already contained: &#x27;&quot; + SecurityContextHolder.getContext().getAuthentication() + &quot;&#x27;&quot;; &#125;)); chain.doFilter(request, response); &#125; else &#123; // 1.æ£€æŸ¥æ˜¯æ˜¯å¦è®°ä½æˆ‘ï¼Œå¦‚æœæ˜¯å®Œæˆè‡ªåŠ¨ç™»å½• Authentication rememberMeAuth = this.rememberMeServices.autoLogin(request, response); if (rememberMeAuth != null) &#123; try &#123; // 2.è°ƒç”¨authenticationManagerå†æ¬¡è®¤è¯ rememberMeAuth = this.authenticationManager.authenticate(rememberMeAuth); SecurityContext context = SecurityContextHolder.createEmptyContext(); // 3.å°†è®¤è¯çš„ç”¨æˆ·åœ¨é‡æ–°æ”¾å…¥SecurityContextä¸­ context.setAuthentication(rememberMeAuth); SecurityContextHolder.setContext(context); this.onSuccessfulAuthentication(request, response, rememberMeAuth); ... &#125; ... &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ chain.doFilter(request, response); &#125;&#125; å…¶ä¸­autoLoginæ–¹æ³• 123456789101112131415161718192021222324252627282930public final Authentication autoLogin(HttpServletRequest request, HttpServletResponse response) &#123; // 1.è·å–rememberMeCookie String rememberMeCookie = this.extractRememberMeCookie(request); // 2.æ£€æŸ¥æ˜¯å¦å­˜åœ¨ if (rememberMeCookie == null) &#123; return null; &#125; else &#123; this.logger.debug(&quot;Remember-me cookie detected&quot;); if (rememberMeCookie.length() == 0) &#123; this.logger.debug(&quot;Cookie was empty&quot;); this.cancelCookie(request, response); return null; &#125; else &#123; try &#123; // 3.è§£ç Cookie String[] cookieTokens = this.decodeCookie(rememberMeCookie); // 4.æ ¹æ®cookieå®Œæˆè‡ªåŠ¨ç™»å½• UserDetails user = this.processAutoLoginCookie(cookieTokens, request, response); // 5.æ£€æŸ¥userçŠ¶æ€ this.userDetailsChecker.check(user); this.logger.debug(&quot;Remember-me cookie accepted&quot;); // 6. åˆ›å»ºè®¤è¯æˆåŠŸçš„RememberMeAuthenticationTokenå¹¶å°†è®¤è¯çŠ¶æ€è®¾ç½®ä¸ºtrue return this.createSuccessfulAuthentication(request, user); &#125; ... this.cancelCookie(request, response); return null; &#125; &#125;&#125; proccessAutoLoginCookieæ–¹æ³• 1234567891011121314151617181920212223242526272829protected UserDetails processAutoLoginCookie(String[] cookieTokens, HttpServletRequest request, HttpServletResponse response) &#123; if (cookieTokens.length != 2) &#123; throw new InvalidCookieException... &#125; else &#123; // 1.è·å–ç³»åˆ—ç å’Œtoken String presentedSeries = cookieTokens[0]; String presentedToken = cookieTokens[1]; // 2.æ ¹æ®tokenå»æ•°æ®åº“ä¸­æŸ¥è¯¢ PersistentRememberMeToken token = this.tokenRepository.getTokenForSeries(presentedSeries); if (token == null) &#123; ... &#125; else &#123; ... // 3.åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„token PersistentRememberMeToken newToken = new PersistentRememberMeToken(token.getUsername(), token.getSeries(), this.generateTokenData(), new Date()); try &#123; // 4.ä¿®æ”¹æ•°æ®åº“tokenä¿¡æ¯ this.tokenRepository.updateToken(newToken.getSeries(), newToken.getTokenValue(), newToken.getDate()); // 5. å†™å…¥æµè§ˆå™¨ this.addCookie(newToken, request, response); &#125; catch (Exception var9) &#123; ... &#125; // 6.æ ¹æ®ç”¨æˆ·åè°ƒç”¨UserDetailsServiceæŸ¥è¯¢UserDetail return this.getUserDetailsService().loadUserByUsername(token.getUsername()); &#125; &#125;&#125; 4.4 CSRFæµç¨‹æºç åœ¨æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­, CsrfFilteræ˜¯èµ·åˆ°csrfé˜²æŠ¤çš„, æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬ä¸»è¦é’ˆå¯¹è®°ä½æˆ‘çœ‹ä¸‹æºç æ˜¯å¦‚ä½•å®ç°çš„? CSRFæµç¨‹åˆ†æ 3.4.2 CSRFæºç æµç¨‹è·Ÿè¸ª Csrfilter 123456789101112131415161718192021222324252627282930313233343536373839protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException &#123; request.setAttribute(HttpServletResponse.class.getName(), response); // 1.å–å‡ºtoken CsrfToken csrfToken = this.tokenRepository.loadToken(request); boolean missingToken = csrfToken == null; if (missingToken) &#123; // 2.å¦‚æœæ²¡æœ‰tokenå°±é‡æ–°ç”Ÿæˆtoken csrfToken = this.tokenRepository.generateToken(request); this.tokenRepository.saveToken(csrfToken, request, response); &#125; // 3.å°†csrfTokenå€¼æ”¾å…¥requeståŸŸä¸­ request.setAttribute(CsrfToken.class.getName(), csrfToken); request.setAttribute(csrfToken.getParameterName(), csrfToken); // 4.åŒ¹é…è¯·æ±‚æ˜¯å¦ä¸ºpostè¯·æ±‚ï¼Œå¦åˆ™æ”¾è¡Œ if (!this.requireCsrfProtectionMatcher.matches(request)) &#123; if (this.logger.isTraceEnabled()) &#123; this.logger.trace(&quot;Did not protect against CSRF since request did not match &quot; + this.requireCsrfProtectionMatcher); &#125; filterChain.doFilter(request, response); &#125; else &#123; String actualToken = request.getHeader(csrfToken.getHeaderName()); if (actualToken == null) &#123; // 5.ä»requestè¯·æ±‚å‚æ•°ä¸­å–å‡ºcsrfToken actualToken = request.getParameter(csrfToken.getParameterName()); &#125; // 6.åŒ¹é…ä¸¤ä¸ªtokenæ˜¯å¦ç›¸ç­‰ if (!equalsConstantTime(csrfToken.getToken(), actualToken)) &#123; this.logger.debug(LogMessage.of(() -&gt; &#123; return &quot;Invalid CSRF token found for &quot; + UrlUtils.buildFullRequestUrl(request); &#125;)); AccessDeniedException exception = !missingToken ? new InvalidCsrfTokenException(csrfToken, actualToken) : new MissingCsrfTokenException(actualToken); this.accessDeniedHandler.handle(request, response, (AccessDeniedException)exception); &#125; else &#123; // 7.å¦‚æœç›¸ç­‰åˆ™æ”¾è¡Œ filterChain.doFilter(request, response); &#125; &#125;&#125; â€‹ 4.5 æˆæƒæµç¨‹æºç åœ¨æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­ï¼ŒFilterSecurityInterceptoræ˜¯æ¥å¤„ç†æ•´ä¸ªç”¨æˆ·æˆæƒæµç¨‹çš„ï¼Œä¹Ÿæ˜¯è·ç¦»ç”¨æˆ·APIæœ€åä¸€ä¸ªéå¸¸é‡è¦çš„è¿‡æ»¤å™¨é“¾ï¼Œå› æ­¤ä¸‹é¢é’ˆå¯¹ç”¨æˆ·æˆæƒçœ‹ä¸‹æºç æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ 4.5.1 æˆæƒæµç¨‹åˆ†æ AffirmativeBased (åŸºäºè‚¯å®š) ï¼š ä¸€ç¥¨é€šè¿‡æƒ ConsensusBasedï¼ˆåŸºäºå…±è¯†ï¼‰ï¼šèµæˆç¥¨å¤šäºåå¯¹ç¥¨åˆ™é€šè¿‡ï¼Œåå¯¹å¤šä½™èµæˆæŠ›å‡ºAccessDeniedException UnanimousBasedï¼ˆåŸºäºä¸€è‡´ï¼‰ï¼šä¸€ç¥¨å¦å†³æƒ 4.5.2 æˆæƒæµç¨‹æºç è·Ÿè¸ª FilterSecurityInterceptor 1234567891011121314151617181920212223public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; this.invoke(new FilterInvocation(request, response, chain));&#125;/*------------*/public void invoke(FilterInvocation filterInvocation) throws IOException, ServletException &#123; if (this.isApplied(filterInvocation) &amp;&amp; this.observeOncePerRequest) &#123; filterInvocation.getChain().doFilter(filterInvocation.getRequest(), filterInvocation.getResponse()); &#125; else &#123; if (filterInvocation.getRequest() != null &amp;&amp; this.observeOncePerRequest) &#123; filterInvocation.getRequest().setAttribute(&quot;__spring_security_filterSecurityInterceptor_filterApplied&quot;, Boolean.TRUE); &#125; // å‰ç½®è°ƒç”¨ InterceptorStatusToken token = super.beforeInvocation(filterInvocation); try &#123; filterInvocation.getChain().doFilter(filterInvocation.getRequest(), filterInvocation.getResponse()); &#125; finally &#123; super.finallyInvocation(token); &#125; // åç½®è°ƒç”¨ super.afterInvocation(token, (Object)null); &#125;&#125; AbstractSecurityInterceptorçš„beforeInvocationæ–¹æ³• 12345678910111213141516171819202122protected InterceptorStatusToken beforeInvocation(Object object) &#123; Assert.notNull(object, &quot;Object was null&quot;); if (!this.getSecureObjectClass().isAssignableFrom(object.getClass())) &#123; ... &#125; else &#123; // 1.è·å–securityçš„ç³»ç»Ÿé…ç½®æƒé™ Collection&lt;ConfigAttribute&gt; attributes = this.obtainSecurityMetadataSource().getAttributes(object); if (CollectionUtils.isEmpty(attributes)) &#123; ... &#125; else &#123; ... // 2.è·å–ç”¨æˆ·è®¤è¯ä¿¡æ¯ Authentication authenticated = this.authenticateIfRequired(); if (this.logger.isTraceEnabled()) &#123; this.logger.trace(LogMessage.format(&quot;Authorizing %s with attributes %s&quot;, object, attributes)); &#125; // 3.è°ƒç”¨å†³ç­–ç®¡ç†å™¨ï¼Œæ— æƒé™åˆ™æŠ›å‡ºaccessDeniedExceptionè®©ExceptionTranslationFilteræ•è· this.attemptAuthorization(object, attributes, authenticated); ... &#125; &#125;&#125; attemptAuthoriztionâ€“&gt;AffirmativeBaseçš„decideæ–¹æ³• 1234567891011121314151617181920212223public void decide(Authentication authentication, Object object, Collection&lt;ConfigAttribute&gt; configAttributes) throws AccessDeniedException &#123; int deny = 0; Iterator var5 = this.getDecisionVoters().iterator(); while(var5.hasNext()) &#123; AccessDecisionVoter voter = (AccessDecisionVoter)var5.next(); int result = voter.vote(authentication, object, configAttributes); // ä¸€ç¥¨å¦å†³ switch(result) &#123; case -1: ++deny; break; case 1: return; &#125; &#125; if (deny &gt; 0) &#123; throw new AccessDeniedException(this.messages.getMessage(&quot;AbstractAccessDecisionManager.accessDenied&quot;, &quot;Access is denied&quot;)); &#125; else &#123; this.checkAllowIfAllAbstainDecisions(); &#125;&#125; ExceptionTranslationFilter 1234567891011121314151617181920212223242526private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; try &#123; // 1.è°ƒç”¨ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨å³FilterSecurityInterceptor chain.doFilter(request, response); &#125; catch (IOException var7) &#123; throw var7; &#125; catch (Exception var8) &#123; Throwable[] causeChain = this.throwableAnalyzer.determineCauseChain(var8); RuntimeException securityException = (AuthenticationException)this.throwableAnalyzer.getFirstThrowableOfType(AuthenticationException.class, causeChain); // 2.æ•è·FilterSecurityInterceptorå¹¶åˆ¤æ–­å¼‚å¸¸ç±»å‹ if (securityException == null) &#123; securityException = (AccessDeniedException)this.throwableAnalyzer.getFirstThrowableOfType(AccessDeniedException.class, causeChain); &#125; if (securityException == null) &#123; this.rethrow(var8); &#125; if (response.isCommitted()) &#123; throw new ServletException(&quot;Unable to handle the Spring Security Exception because the response is already committed.&quot;, var8); &#125; // 3.å¦‚æœæ˜¯AccessDeniedExceptionå¼‚å¸¸åˆ™å¤„ç†Spring Securityå¼‚å¸¸ this.handleSpringSecurityException(request, response, chain, (RuntimeException)securityException); &#125;&#125; handleSpringSecuirtyExceptionæ–¹æ³• 1234567891011121314151617181920212223242526272829303132private void handleSpringSecurityException(HttpServletRequest request, HttpServletResponse response, FilterChain chain, RuntimeException exception) throws IOException, ServletException &#123; if (exception instanceof AuthenticationException) &#123; this.handleAuthenticationException(request, response, chain, (AuthenticationException)exception); &#125; else if (exception instanceof AccessDeniedException) &#123; this.handleAccessDeniedException(request, response, chain, (AccessDeniedException)exception); &#125;&#125;private void handleAuthenticationException(HttpServletRequest request, HttpServletResponse response, FilterChain chain, AuthenticationException exception) throws ServletException, IOException &#123; this.logger.trace(&quot;Sending to authentication entry point since authentication failed&quot;, exception); this.sendStartAuthentication(request, response, chain, exception);&#125;private void handleAccessDeniedException(HttpServletRequest request, HttpServletResponse response, FilterChain chain, AccessDeniedException exception) throws ServletException, IOException &#123; Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); boolean isAnonymous = this.authenticationTrustResolver.isAnonymous(authentication); if (!isAnonymous &amp;&amp; !this.authenticationTrustResolver.isRememberMe(authentication)) &#123; if (this.logger.isTraceEnabled()) &#123; this.logger.trace(LogMessage.format(&quot;Sending %s to access denied handler since access is denied&quot;, authentication), exception); &#125; this.accessDeniedHandler.handle(request, response, exception); &#125; else &#123; if (this.logger.isTraceEnabled()) &#123; this.logger.trace(LogMessage.format(&quot;Sending %s to authentication entry point since access is denied&quot;, authentication), exception); &#125; this.sendStartAuthentication(request, response, chain, new InsufficientAuthenticationException(this.messages.getMessage(&quot;ExceptionTranslationFilter.insufficientAuthentication&quot;, &quot;Full authentication is required to access this resource&quot;))); &#125;&#125;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š268.ç¼ºå¤±çš„æ•°å­—","slug":"268.ç¼ºå¤±çš„æ•°å­—","date":"2022-06-20T03:18:18.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2022/06/20/268.ç¼ºå¤±çš„æ•°å­—/","link":"","permalink":"http://yournotes.cn/2022/06/20/268.%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ç»™å®šä¸€ä¸ªåŒ…å« [0, n] ä¸­ n ä¸ªæ•°çš„æ•°ç»„ nums ï¼Œæ‰¾å‡º [0, n] è¿™ä¸ªèŒƒå›´å†…æ²¡æœ‰å‡ºç°åœ¨æ•°ç»„ä¸­çš„é‚£ä¸ªæ•°ã€‚ é¢˜ç›®åœ°å€ï¼šhttps://leetcode.cn/problems/missing-number/ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnums = [3,0,1]è¾“å‡ºï¼š2è§£é‡Šï¼šn = 3ï¼Œå› ä¸ºæœ‰ 3 ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ•°å­—éƒ½åœ¨èŒƒå›´ [0,3] å†…ã€‚2 æ˜¯ä¸¢å¤±çš„æ•°å­—ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‡ºç°åœ¨ nums ä¸­ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šnums = [0,1]è¾“å‡ºï¼š2è§£é‡Šï¼šn = 2ï¼Œå› ä¸ºæœ‰ 2 ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ•°å­—éƒ½åœ¨èŒƒå›´ [0,2] å†…ã€‚2 æ˜¯ä¸¢å¤±çš„æ•°å­—ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‡ºç°åœ¨ nums ä¸­ã€‚ ç¤ºä¾‹ 3ï¼š 123è¾“å…¥ï¼šnums = [9,6,4,2,3,5,7,0,1]è¾“å‡ºï¼š8è§£é‡Šï¼šn = 9ï¼Œå› ä¸ºæœ‰ 9 ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ•°å­—éƒ½åœ¨èŒƒå›´ [0,9] å†…ã€‚8 æ˜¯ä¸¢å¤±çš„æ•°å­—ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‡ºç°åœ¨ nums ä¸­ã€‚ ç¤ºä¾‹ 4ï¼š 123è¾“å…¥ï¼šnums = [0]è¾“å‡ºï¼š1è§£é‡Šï¼šn = 1ï¼Œå› ä¸ºæœ‰ 1 ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ•°å­—éƒ½åœ¨èŒƒå›´ [0,1] å†…ã€‚1 æ˜¯ä¸¢å¤±çš„æ•°å­—ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‡ºç°åœ¨ nums ä¸­ã€‚ æç¤ºï¼š 1234n == nums.length1 &lt;= n &lt;= 1040 &lt;= nums[i] &lt;= nnums ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½ ç‹¬ä¸€æ— äºŒ è¿›é˜¶ï¼š ä½ èƒ½å¦å®ç°çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€ä»…ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜? é¢˜è§£ä¸€ä¹Ÿå°±æ˜¯æœ‰ä»0åˆ°nå…±n+1ä¸ªæ•°å­—: 0 1 2 ... n ç»™å‡ºçš„æ•°ç»„æ˜¯å®ƒä»¬ä¹‹é—´çš„nä¸ªæ•°ï¼Œç¼ºå°‘ä¸€ä¸ªè¦æ‰¾å‡ºæ¥ã€‚ï¼ˆnä¸ªæ•°æ˜¯æ— åºçš„ï¼‰ å¦‚æœæ˜¯æœ‰åºçš„é‚£ä¹ˆå“ªä¸ªä½ç½®çš„æ•°æ¯”å‰ä¸€ä¸ªä½ç½®çš„æ•°å¤§2ï¼Œé‚£ä¹ˆè¯´æ˜ç¼ºå°‘äº†ä¸€ä¸ªæ•°å­—ï¼Œä¸”æ•°å­—çš„å€¼å’Œä½ç½®æ ‡ç›¸ç­‰ã€‚ å¦‚æœæ’åºå»åšå¾ˆæ˜¾ç„¶å¤šæ­¤ä¸€ä¸¾ï¼Œæˆ‘ä»¬è¦çš„åªæ˜¯é‚£ä¸ªæ•°å­—ï¼Œæ’åºçš„æ¶ˆè€—æ›´å¤§èµ°äº†å¼¯è·¯ã€‚è¿™ç»„æ•°å­—æœ¬èº«æ˜¯ä¸€ç»„è¿ç»­çš„æ•°å­—åªæ˜¯æ— åºçš„æ‘†æ”¾äº†ä¸”ç¼ºå°‘ä¸€ä¸ªã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥å‡†å¤‡ä¸€ä¸ªåŸæ¥çš„å¡æ§½ï¼ˆn + 1ä¸ªä½ç½®ï¼‰ï¼Œå°†ä»–ä»¬ä¸€ä¸€æ”¾è¿›å»ï¼Œæœ€åå“ªä¸ªä½ç½®ç•™ç©ºé‚£ä¹ˆå°±ç¼ºè¿™ä¸ªæ•°å­— å®ç°å½“ä¸­å®¹å™¨ç”¨ä»€ä¹ˆéƒ½å¯ä»¥æˆ‘é‡‡ç”¨çš„æ•°ç»„ï¼Œåˆ›å»ºä¸€ä¸ªn+1çš„å¡æ§½ï¼Œåˆå§‹åŒ–é‡Œé¢éƒ½æ˜¯0ï¼Œå› æ­¤åªéœ€è¦æŠŠæœ‰å€¼çš„æ”¹ä¸º1ï¼Œå®Œæˆåå‰©ä¸‹åªæœ‰ä¸€ä¸ªä½ç½®ä¸º0ï¼Œè¿™ä¸ªä½ç½®å³æ˜¯ç¼ºå¤±çš„æ•°å­—ã€‚ 12345678910111213public int missingNumber(int[] nums) &#123; byte[] arr = new byte[nums.length + 1]; for(int i = 0; i &lt; nums.length; i++)&#123; int num = nums[i]; arr[num] = 1; &#125; for(int i = 0; i &lt; arr.length; i++)&#123; if(arr[i] == 0)&#123; return i; &#125; &#125; return -1;&#125; å› ä¸ºæˆ‘ä»¬çš„æ•°ç»„åªå­˜0&#x2F;1ï¼ŒèŠ‚çº¦ç©ºé—´æ‰€ä»¥ä½¿ç”¨byteç±»å‹ï¼ˆå› ä¸ºJavaé‡Œé¢æ²¡æœ‰æ›´å°çš„ç±»å‹äº†)ï¼Œåˆæƒ³åˆ°å¯ä»¥ç”¨ä¸€ä¸ªæ•°å­—çš„æ¯ä¸€ä½æ¥å­˜0&#x2F;1å°±ä¸éœ€è¦æ•°ç»„äº†ã€‚ä½†æœ€å¤§çš„longä¹Ÿåªæœ‰64ä½ï¼Œé¢˜ç›®å½“ä¸­çš„næœ€å¤§æ˜¯104.éœ€è¦105ä¸ªä½ç½®ã€‚ å½“å‰é¢˜è§£ç©ºé—´å¤æ‚åº¦è¾¾åˆ°äº†n.æ»¡è¶³ä¸äº†è¿›é˜¶çš„è¦æ±‚ã€‚ é¢˜è§£äºŒä»€ä¹ˆæ–¹æ³•å¯ä»¥åœ¨å½“å‰ç»™å‡ºçš„æ•°ç»„å†…éƒ¨ç›´æ¥å¾—åˆ°ç¼ºå¤±è°å‘¢ã€‚ ä¸€æ®µè¿ç»­çš„æ•°å­—å †åœ¨ä¸€èµ·ï¼Œåªå°‘ä¸€ä¸ªâ€¦è¿ç»­çš„æ•°å­—ï¼Ÿ æ±‚å’Œâ€¦å¯¹å°±æ˜¯æ±‚å’Œï¼Œ0åˆ°nçš„æ•°å­—çš„å’Œå‡å»å½“å‰æ•°ç»„æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œå·®æ˜¯å¤šå°‘å°±æ˜¯å¤šå‡ºæ¥çš„æ•°å­—ã€‚ 12// 0åˆ°næ•°å­—çš„å’Œ(1+n) * n / 2 ä»£ç ï¼š 123456789public int missingNumber(int[] nums) &#123; int len = nums.length; int expect = (1 + len) * len / 2; for(int i = 0; i &lt; len; i++)&#123; // å‡å»æ¯ä¸ªæ•°å­— expect -= nums[i]; &#125; return expect;&#125; é¢˜è§£ä¸‰è™½ç„¶è§£å‡ºäº†è§‰å¾—æ¯”è¾ƒæ»¡æ„çš„ç­”æ¡ˆï¼Œä½†ç¡®å®æœ‰é¢„æ„Ÿæ˜¯æœ‰æ›´å¥½çš„è§£æ³•ï¼Œä»0åˆ°nè¿ç»­çš„æ•°å­—ç´¢å¼•å°±æ˜¯å®ƒä»¬çš„å€¼æ²¡å¿…è¦é¢å¤–å»å­˜å‚¨è®°å½•ä»€ä¹ˆï¼Œå¯èƒ½æ€§æ½œè—çš„å·²çŸ¥æ¡ä»¶å¤ªå¤šäº†å¾ˆæœ‰å¯èƒ½æ²¡æœ‰ç”¨ä¸Šã€‚ ç¼ºå°‘ä¸€ä¸ªæ•°å­—çš„æ•°ç»„å’ŒåŸæ¥çš„å®Œæ•´çš„n + 1çš„æ•°å­—ã€‚åˆåœ¨ä¸€èµ·å°±æ˜¯ä¸€å †æ•°å­—æ¯ä¸ªéƒ½æ˜¯ä¸€å¯¹ä¸”åªæœ‰ä¸€ä¸ªè½å•ï¼Œè¿™ä¹ˆä¸€å †æ•°å­—è¿›è¡Œç´¯è®¡å¼‚æˆ–æœ€ç»ˆåŒåŒç›¸æ¶ˆå°±å¯ä»¥å¾—åˆ°å”¯ä¸€çš„æ•°å­—ã€‚ æˆ‘ä»¬ä¸éœ€è¦é¢å¤–çš„å»åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„åˆæˆæ•°ç»„ï¼Œå› ä¸ºæ•°å­—å’Œä¸‹æ ‡ä¸€ä¸€å¯¹åº”ï¼Œå¾ªç¯ä¸€æ¬¡0åˆ°nå³å¯å¾—åˆ°åŸæ¥çš„è¿™äº›æ•°å­—è¿›è¡Œå¼‚æˆ–ï¼Œå†å¯¹æä¾›çš„æ•°ç»„è¿›è¡Œå¼‚æˆ–å³å¯ã€‚ 12345678910public int missingNumber(int[] nums) &#123; int res = 0; for (int i = 0; i &lt;= nums.length; i++)&#123; res ^= i; &#125; for (int i : nums) &#123; res ^= i; &#125; return res;&#125; æ€»ç»“è¿™é¢˜æ˜¯å½“å‰åˆé›†æœ€åä¸€ä¸ªåˆ†ç±»å…¶ä»–ä¹Ÿæ˜¯æœ€åä¸€é¢˜ä½†å®ƒçš„ç±»å‹åå‘ä¸æ•°ç»„ï¼Œå¯ä»¥å›é¡¾æ•°ç»„çš„ä¸€äº›å¸¸è§„æ“ä½œæ¯”å¦‚æ’åºã€å“ˆå¸Œã€åŸåœ°äº¤æ¢ç­‰å°†åŸæœ¬æ•°ç»„è¿›è¡Œæ•´ç†å¾—åˆ°æ–°æ•°ç»„çš„æ‰‹æ®µ. å¼‚æˆ–é¢˜è§£å‚è€ƒäº†å®˜æ–¹è§£é¢˜ï¼Œæƒ³åˆ°äº†è‡ªå·±çš„æ›¾ç»çš„æ€»ç»“å¼‚æˆ–è¿ç®—æ‰¾å”¯ä¸€ï¼Œå´åœ¨æ­¤é¢˜æ²¡æœ‰è‡ªä¸»å‘ç°ã€‚æ²¡æœ‰å……åˆ†çš„åˆ©ç”¨å·²çŸ¥çš„æ•°åˆ—ä¸å‚æ•°æ•°ç»„çš„å…³ç³»ã€‚è¿™å’Œ2020å¹´9æœˆ21å·è§£çš„åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ å¼‚æ›²åŒå·¥ã€‚ åˆçº§åˆé›†å…¨éƒ¨é¢˜è§£åˆ°æ­¤å°±å®Œç»“äº†ï¼ŒåŸè®¡åˆ’åŠå¹´åˆ°ç°åœ¨ä¸¤å¹´äº†æ‰å®Œæˆï¼Œå¤ªè¿‡äºæ‡ˆæ€ äº†ã€‚åˆé›†è¿‡åå¯¹æ•°ç»„ã€é“¾è¡¨ä»¥åŠæ ‘ä»ç”Ÿç–åˆ°ç°åœ¨ç¡®å®æœ‰äº†æ›´å¤šçš„äº†è§£å†æ¬¡é¢å¯¹æ—¶å……æ»¡äº†æ›´å¤šçš„æ€è·¯ã€‚ä½†æ•°æ®ç»“æ„ä»æœ‰å¾…åŠ å¼ºï¼Œç®—æ³•æ€æƒ³éœ€ä½“ç³»å­¦ä¹ ã€‚å› æ­¤ä¸ä¼šç«‹é©¬å¼€å¯ä¸‹ä¸€åˆé›†çš„é¢˜è§£ç³»åˆ—ï¼Œç¬¬ä¸€æ˜¯æœ‰å…¶ä»–æ–¹å‘çš„å†…å®¹éœ€è¦å­¦ä¹ å’Œè¾“å‡ºï¼Œç¬¬äºŒæ˜¯åœ¨ç®—æ³•è¿™è¾¹å¼€å§‹è¿›è¡Œç³»ç»Ÿçš„å­¦ä¹ è¾“å…¥å¸Œæœ›æ—¥åå¯ä»¥å¸¦æ¥æ›´å¥½çš„å†…å®¹ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š20.æœ‰æ•ˆæ‹¬å·","slug":"20.æœ‰æ•ˆæ‹¬å·","date":"2022-05-30T04:48:09.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2022/05/30/20.æœ‰æ•ˆæ‹¬å·/","link":"","permalink":"http://yournotes.cn/2022/05/30/20.%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-parentheses ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚ æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚ å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šs = &quot;()&quot;è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šs = &quot;()[]&#123;&#125;&quot;è¾“å‡ºï¼štrue ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šs = &quot;(]&quot;è¾“å‡ºï¼šfalse ç¤ºä¾‹ 4ï¼š 12è¾“å…¥ï¼šs = &quot;([)]&quot;è¾“å‡ºï¼šfalse ç¤ºä¾‹ 5ï¼š 12è¾“å…¥ï¼šs = &quot;&#123;[]&#125;&quot;è¾“å‡ºï¼štrue é¢˜è§£ä¸€è¦æ»¡è¶³æ‹¬å·çš„è§„åˆ™ï¼Œé‚£ä¹ˆä¸€ä¸ªæ‹¬å·é‡Œé¢ä¸èƒ½æœ‰æ®‹ç¼ºçš„æ‹¬å·ã€‚ é‚£ä¹ˆå¯¹äº&#123;[]&#125; å®ƒæ˜¯ä¸€ä¸ªæ‹¬å·ä¸”åŒ…å«ä¸€ä¸ªå­æ‹¬å·ï¼Œå¦‚æœå½“å½“å‰æ‹¬å·å®Œæ•´æ—¶ï¼Œå­æ‹¬å·ä»ä¸å®Œæ•´å³ä¸ºfalse. æˆ‘ä»¬å¯ä»¥ç”¨åŒ…å«è‡ªå·±å’Œå­èŠ‚ç‚¹çš„ç»“æ„æ¥å»è®°å½•ï¼Œå°±æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œè¦å¿…é¡»æŒ‰ç…§é¡ºåºä¸€ä¸ªä¸€ä¸ªåŒ¹é…å®Œæˆï¼Œå¦åˆ™å°±false 123class Node&#123; Node child;&#125; éå†åˆ°ä¸€ä¸ªå·¦æ‹¬å·ï¼Œé‚£ä¹ˆå°±äº§ç”Ÿäº†ä¸€ä¸ªnode,ä¹‹åè¦ä¹ˆäº§ç”Ÿnodeä½œä¸ºchildè¦ä¹ˆæ˜¯æ¶ˆé™¤ã€‚ç›´åˆ°æœ€åæ²¡æœ‰node 1234567891011([)]1 #å·¦æ‹¬å· 1 2 #åˆä¸€ä¸ªå·¦æ‹¬å· 1 fail #å‡ºç°å³æ‹¬å·ä½†ä¸åŒ¹é… &#123;[]&#125;1 #å·¦æ‹¬å· 1 2 #åˆä¸€ä¸ªå·¦æ‹¬å· 1 #å‡ºç°å³æ‹¬å·åŒ¹é…æ¶ˆé™¤success #å‡ºç°å³æ‹¬å·åŒ¹é…æ¶ˆé™¤ï¼Œæœ€åä¸€ä¸ªä¹Ÿæ¶ˆé™¤äº† è¿˜æ˜¯ç”»ä¸ªåŠ¨å›¾å§ æ€»è€Œè¨€ä¹‹ï¼Œå¦‚æœæ˜¯å·¦æ‹¬å·å°±åŠ åˆ°åˆ—è¡¨å½“ä¸­ï¼Œå¦‚æœæ˜¯å³æ‹¬å·å°±è¦å’Œæœ€å¤´ä¸Šçš„ä¸€ä¸ªè¿›è¡Œæ¯”è¾ƒï¼Œèƒ½é…ä¸Šå°±æ¶ˆé™¤å¦åˆ™falseï¼Œæœ€åæ¶ˆé™¤å®Œæ¯•ä¸€ä¸ªéƒ½ä¸å‰©åˆ™æ»¡è¶³true ä»£ç ä¸€ï¼š 1234567891011121314151617181920212223242526272829303132333435363738class Node&#123; char value; Node next; Node(char value)&#123; this.value = value; &#125;&#125;public boolean isValid(String s) &#123; // 1.æ‹¬å·æ•°æ® Map&lt;Character,Integer&gt; left = new HashMap(); left.put(&#x27;(&#x27;,1); left.put(&#x27;[&#x27;,2); left.put(&#x27;&#123;&#x27;,3); Map&lt;Character,Integer&gt; right = new HashMap(); right.put(&#x27;)&#x27;,1); right.put(&#x27;]&#x27;,2); right.put(&#x27;&#125;&#x27;,3); // 2.è‡ªå®šä¹‰é“¾è¡¨ Node cur = null; // 3.éå†å¤„ç† for(int i = 0; i &lt; s.length(); i++)&#123; char c = s.charAt(i); // å¦‚æœå·¦æ‹¬å·åŠ èŠ‚ç‚¹ï¼Œå³æ‹¬å·çœ‹æ˜¯å¦èƒ½æ¶ˆé™¤ if(left.containsKey(c))&#123; // å…¥åˆ— Node pre = new Node(c); pre.next = cur; cur = pre; &#125;else if(cur != null &amp;&amp; right.get(c).equals(left.get(cur.value)))&#123; // æ¶ˆé™¤ cur = cur.next; &#125;else&#123; return false; &#125; &#125; boolean result = cur == null ? true : false; return result;&#125; è¿™é‡Œç›¸å½“äºæˆ‘ä»¬è‡ªå·±å»å®ç°äº†ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ¯æ¬¡åªèƒ½æ‹¿åˆ°å¤´éƒ¨ï¼Œå½“å¤´éƒ¨æ¶ˆé™¤æˆ‘ä»¬å¯ä»¥æ‹¿åˆ°å¤´éƒ¨çš„å‰ä¸€ä¸ªï¼ˆnextï¼‰ï¼Œé€šè¿‡å¤´æ’çš„æ–¹å¼æ¥å®ç°ã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ç”¨æˆ‘ä»¬è¯­è¨€æä¾›çš„ç°æœ‰çš„æ•°æ®ç»“æ„çš„åº“ç±»ï¼Œæ¯”å¦‚JAVAé‡Œæœ‰æ ˆçš„å®ç°Stackã€‚æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å°è£…å¥½çš„æ ˆç»“æ„æˆ‘ä»¬ç›´æ¥æ‹¿æ¥ç”¨pushã€popç­‰æ¥å®Œæˆæˆ‘ä»¬çš„é€»è¾‘ï¼Œä¸å¿…å®ç°åŸºç¡€çš„èŠ‚ç‚¹åŠ å…¥ã€æ¶ˆé™¤ç­‰æ“ä½œçš„å…·ä½“èŠ‚ç‚¹å…³ç³»çš„å®ç°ã€‚ ä»£ç äºŒï¼š 12345678910111213141516171819202122232425public boolean isValid(String s)&#123; // 1.æ‹¬å·æ•°æ® Map&lt;Character,Integer&gt; left = new HashMap(); left.put(&#x27;(&#x27;,1); left.put(&#x27;[&#x27;,2); left.put(&#x27;&#123;&#x27;,3); Map&lt;Character,Integer&gt; right = new HashMap(); right.put(&#x27;)&#x27;,1); right.put(&#x27;]&#x27;,2); right.put(&#x27;&#125;&#x27;,3); // 2.æ ˆ Stack&lt;Character&gt; stack = new Stack&lt;&gt;(); // 3.éå†å¤„ç† for(int i = 0; i &lt; s.length(); i++)&#123; char c = s.charAt(i); // åˆ¤å®šå·¦æ‹¬å·è¿˜æ˜¯å³æ‹¬å· if(left.containsKey(c))&#123; stack.push(c); &#125;else if(stack.isEmpty() || !right.get(c).equals(left.get(stack.pop())))&#123; return false; &#125; &#125; boolean result = stack.empty() ? true : false; return result;&#125; ä»£ç é€»è¾‘éƒ½æ˜¯å¤§å·®ä¸å·®ï¼Œä½†å¯¹äºæ‹¬å·çš„åŒ¹é…æˆ‘ä»¬æ˜¯ç”¨mapå­˜å‚¨ï¼Œä¸”æ˜æ˜¾æ„Ÿåˆ°æœ‰å†—ä½™ã€‚éƒ½ç”¨å€¼æ¥å»åŒ¹é…æ„Ÿè§‰è‡ªå·±æœ‰ç‚¹è„‘ç˜«äº†ï¼Œç›´æ¥key-valueåŒ¹é…å°±è¡Œå°‘ä¸€ä¸ªè·å–å€¼çš„æ­¥éª¤äº†ã€‚ ä»£ç ä¸‰ï¼š 1234567891011121314151617181920public boolean isValid(String s)&#123; // 1.æ‹¬å·æ•°æ® Map&lt;Character,Character&gt; map = new HashMap(); map.put(&#x27;(&#x27;,&#x27;)&#x27;); map.put(&#x27;[&#x27;,&#x27;]&#x27;); map.put(&#x27;&#123;&#x27;,&#x27;&#125;&#x27;); // 2.æ ˆ Stack&lt;Character&gt; stack = new Stack&lt;&gt;(); // 3.éå†å¤„ç† for(int i = 0; i &lt; s.length(); i++)&#123; char c = s.charAt(i); // åˆ¤å®šå·¦æ‹¬å·è¿˜æ˜¯å³æ‹¬å· if(map.containsKey(c))&#123; stack.push(c); &#125;else if(stack.isEmpty() || !map.get(stack.pop()).equals(c))&#123; return false; &#125; &#125; return stack.empty();&#125; åœ¨æœ‰é™çš„æ¡ä»¶èŒƒå›´ï¼Œæˆ‘ä»¬è¦è¿½æ±‚æ›´é«˜çš„æ•ˆç‡éè¦é’»è¿™ä¸ªç‰›è§’å°–çš„è¯ï¼Œæ˜¯æœ‰å›ºå®šæ–¹å¼å°±æ˜¯æ‰‹åŠ¨åˆ—ä¸¾ã€‚å½“ç„¶å…¶å®æ²¡å¿…è¦ï¼Œä¸¾ä¾‹ä¸‹ï¼š ä»£ç å››ï¼š 123456789101112public boolean isValid(String s)&#123; Stack&lt;Character&gt; stack=new Stack&lt;&gt;(); for(int i=0;i&lt;s.length();i++)&#123; char c=s.charAt(i); if(c==&#x27;(&#x27;||c==&#x27;[&#x27;||c==&#x27;&#123;&#x27;)&#123; stack.push(c); &#125;else if(stack.isEmpty()||c==&#x27;)&#x27;&amp;&amp;stack.pop()!=&#x27;(&#x27;||c==&#x27;]&#x27;&amp;&amp;stack.pop()!=&#x27;[&#x27;||c==&#x27;&#125;&#x27;&amp;&amp;stack.pop()!=&#x27;&#123;&#x27;)&#123; return false; &#125; &#125; return stack.empty();&#125; é‚£ä¹ˆæœ‰ä¸ªé—®é¢˜ï¼Œéš¾é“å°±æ²¡æœ‰ä¸€ç§æ–¹æ—¢å¯ä»¥ç›´æ¥æ¯”è¾ƒå¾—å‡ºæ˜¯å¦æ˜¯ä¸€å¯¹ï¼ˆä¸éœ€è¦å»ºç«‹æ˜ å°„åŠ æ‰«æçš„æ–¹å¼ï¼‰ï¼Œåˆä¸æ˜¯æ‰‹åŠ¨å»æŠŠæƒ…å†µéƒ½åˆ—å‡ºæ¥ã€‚ é‚£å°±æ˜¯asciiç ï¼Œå¥½åƒå¾ˆæœ‰é“ç†ï¼Œasciiä¸å°±æ˜¯å¤©ç„¶çš„å­—ç¬¦æ˜ å°„å…³ç³»ä¹ˆï¼Œæˆ‘ä»¬æ‹¿è¿™ä¸ªæ˜ å°„çš„å€¼èƒ½ä¸èƒ½åˆ¤æ–­å‘¢ã€‚ é‚£ä¹ˆå»æ‰¾äº†ä¸€ä¸‹asciiç ï¼Œå¯ä»¥å¾—åˆ°ç»“è®ºåœ¨è¿™å…­ä¸ªç¬¦å·ç»„æˆçš„å­—ç¬¦ä¸²å½“ä¸­ï¼Œå®ƒä»¬ä¹‹é—´çš„å·®å€¼æ˜¯1æˆ–è€…2ï¼Œé‚£ä¹ˆåªæœ‰æ˜¯ä¸€å¯¹æ‹¬å·æ‰èƒ½å‡ºç°ã€‚æˆ‘ä»¬ä¹‹å‰è‡ªå·±é€šè¿‡mapæ„å»ºæ˜ å°„å…³ç³»ç°åœ¨å…¶å®å­—ç¬¦æœ¬èº«å°±æœ‰æ˜ å°„å†…å®¹ä¸”å…¶å®å¯ä»¥åˆ¤æ–­å‡ºæ¥ ä»£ç äº” 12345678910111213141516public boolean isValid(String s)&#123; Stack&lt;Character&gt; stack=new Stack&lt;&gt;(); for(int i=0;i&lt;s.length();i++)&#123; char c=s.charAt(i); if(c==&#x27;(&#x27;||c==&#x27;[&#x27;||c==&#x27;&#123;&#x27;)&#123; stack.push(c); &#125;else if(stack.empty())&#123; return false; &#125;else if(c-stack.peek()==1 || c-stack.peek()==2)&#123; stack.pop(); &#125;else&#123; return false; &#125; &#125; return stack.empty();&#125; é¢˜è§£äºŒé¢˜è§£äºŒæ˜¯åœ¨çœ‹äº†å®˜æ–¹è¯„è®ºåŒºäº†è§£çš„å¦ä¸€ç§æ€è·¯ï¼Œæ˜¯ä»å­—ç¬¦ä¸²ç€æ‰‹çš„ 123456789public boolean isValid(String s) &#123; while(true)&#123; int l=s.length(); s=s.replace(&quot;()&quot;,&quot;&quot;); s=s.replace(&quot;&#123;&#125;&quot;,&quot;&quot;); s=s.replace(&quot;[]&quot;,&quot;&quot;); if(s.length()==l)&#123;return l==0;&#125; &#125;&#125; å®ƒæ•ˆç‡å¯èƒ½ä¸é«˜ï¼Œä½†ç¡®å®æ²¡æƒ³åˆ°è¿™ä¸ªæ€è·¯ã€‚å®ƒæ•ˆç‡ä½çš„é—®é¢˜åœ¨äºæ¯æ¬¡éœ€è¦éå†ä¸‰æ¬¡å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…æ›¿æ¢ï¼Œç¡®å®æ¯æ¬¡éƒ½éå†æ•´ä¸ªä¸²è¿›è¡Œæ›¿æ¢å®Œå®Œå…¨å…¨çš„æé«˜äº†ä¸€ä¸ªç»´åº¦å˜æˆ2æ¬¡æ–¹äº†ç›¸å½“äºæ˜¯èµ°äº†å¼¯è·¯å±äºæš´åŠ›è§£æ³•ã€‚ æ€»ç»“è™½ç„¶ä¸éš¾ä½†å…¶å®è¿˜æ˜¯æœ‰æŒºå¤šæœ‰è¶£çš„æƒ³æ³•ï¼Œå…³äºæé«˜æ•ˆç‡çš„å®šå¼ä»¥åŠä¸¤ä¸ªå­—ç¬¦åŒ¹é…æ¯”è¾ƒçš„æ ¸å¿ƒç”±å»ºç«‹æ˜ å°„è½¬ç§»åˆ°å¤©ç„¶æ˜ å°„asciiç çš„ï¼Œåœ¨åŸæœ‰ä½“ä¼šçš„æƒ…å†µä¸‹ç›¸å½“äºå†ä¸€æ¬¡åŠ æ·±äº†å°è±¡æŠ½å–å‡ºæ€ç»´æ–¹å¼ã€‚æ­¤é¢˜ç¬¬ä¸€æ˜¯ä¸€ä¸ªè§£å†³è¿‡ç¨‹çš„æ€è·¯ç¬¬äºŒæ˜¯è¿‡ç¨‹çŸ¥é“äº†ä½†åœ¨ç»†èŠ‚æ­¥éª¤é‡Œé¢æ˜¯å¦‚ä½•åˆ¤æ–­åŒ¹é…è¿™åˆä¼šå¼•å‘å¾ˆå¤šæ€è€ƒï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯mapæ˜ å°„è¿›è¡ŒåŒ¹é…ä¸¤ä¸ªå­—ç¬¦ï¼Œå°†æ²¡æœ‰å…³ç³»çš„ä¸¤ä¸ªå­—ç¬¦å…³è”ï¼Œä½†æˆ‘ä»¬è‡ªå·±å»ºç«‹æ˜ å°„ç¡®å®å¯ä»¥æœ‰æ›´å¤šçš„æ‰©å±•ï¼Œä½†æˆ‘ä»¬æœ‰æ²¡æœ‰è€ƒè™‘å­—ç¬¦æœ¬èº«å°±å­˜åœ¨æ˜ å°„ï¼Œå¤©ç„¶çš„æ˜ å°„èƒ½ä¸èƒ½ä¸ºæˆ‘æ‰€ç”¨è¿™æ˜¯ä¸“æ³¨ä¸€ç‚¹çš„æ—¶å€™å¯ä»¥è€ƒè™‘åˆ°çš„ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"é£å¹éº¦æµª","slug":"é£å¹éº¦æµª","date":"2022-04-20T08:53:18.000Z","updated":"2025-04-17T08:34:52.025Z","comments":true,"path":"2022/04/20/é£å¹éº¦æµª/","link":"","permalink":"http://yournotes.cn/2022/04/20/%E9%A3%8E%E5%90%B9%E9%BA%A6%E6%B5%AA/","excerpt":"","text":"ã€Šé£å¹éº¦æµªã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ğŸ‘‰","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"Elasticsearchè¯¦è§£","slug":"Lucene&Elasticsearch","date":"2022-03-22T03:58:17.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2022/03/22/Lucene&Elasticsearch/","link":"","permalink":"http://yournotes.cn/2022/03/22/Lucene&Elasticsearch/","excerpt":"","text":"è¶…é•¿è­¦å‘Šï¼ï¼ï¼å–„ç”¨ç›®å½•ï¼ï¼ï¼ [TOC] ä¸€ã€ä»€ä¹ˆæ˜¯å…¨æ–‡æ£€ç´¢1.1 æ•°æ®åˆ†ç±»æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„æ•°æ®æ€»ä½“åˆ†ä¸ºä¸¤ç§ï¼šç»“æ„åŒ–æ•°æ®å’Œéç»“æ„åŒ–æ•°æ®ã€‚ **ç»“æ„åŒ–æ•°æ®ï¼š**æŒ‡å…·æœ‰å›ºå®šæ ¼å¼æˆ–æœ‰é™é•¿åº¦çš„æ•°æ®ï¼Œå¦‚æ•°æ®åº“ï¼Œå…ƒæ•°æ®ç­‰ã€‚ **éç»“æ„åŒ–æ•°æ®ï¼š**æŒ‡ä¸å®šé•¿æˆ–æ— å›ºå®šæ ¼å¼çš„æ•°æ®ï¼Œå¦‚é‚®ä»¶ï¼Œword æ–‡æ¡£ç­‰ç£ç›˜ä¸Šçš„æ–‡ä»¶ 1.2 ç»“æ„åŒ–æ•°æ®æœç´¢å¸¸è§çš„ç»“æ„åŒ–æ•°æ®ä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ åœ¨æ•°æ®åº“ä¸­æœç´¢å¾ˆå®¹æ˜“å®ç°ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨ sqlè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œä¸”èƒ½å¾ˆå¿«çš„å¾—åˆ°æŸ¥è¯¢ç»“æœ ä¸ºä»€ä¹ˆæ•°æ®åº“æœç´¢å¾ˆå®¹æ˜“ï¼Ÿ å› ä¸ºæ•°æ®åº“ä¸­çš„æ•°æ®å­˜å‚¨æ˜¯æœ‰è§„å¾‹çš„ï¼Œæœ‰è¡Œæœ‰åˆ—è€Œä¸”æ•°æ®æ ¼å¼ã€æ•°æ®é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ 1.3 éç»“æ„åŒ–æ•°æ®æŸ¥è¯¢æ–¹æ³•1.3.1 é¡ºåºæ‰«ææ³•ï¼ˆSerial Scanningï¼‰ç”¨æˆ·æœç´¢ â†’ æ–‡ä»¶ æ‰€è°“é¡ºåºæ‰«æï¼Œæ¯”å¦‚è¦æ‰¾å†…å®¹åŒ…å«æŸä¸€ä¸ªå­—ç¬¦ä¸²çš„æ–‡ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ä¸€ä¸ªæ–‡æ¡£çš„çœ‹ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ–‡æ¡£ï¼Œä»å¤´çœ‹åˆ°å°¾ï¼Œå¦‚æœæ­¤æ–‡æ¡£åŒ…å«æ­¤å­—ç¬¦ä¸²ï¼Œåˆ™æ­¤æ–‡æ¡£ä¸ºæˆ‘ä»¬è¦æ‰¾çš„æ–‡ä»¶ï¼Œæ¥ç€çœ‹ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œç›´åˆ°æ‰«æå®Œæ‰€æœ‰çš„æ–‡ä»¶ã€‚å¦‚åˆ©ç”¨ windows çš„æœç´¢ä¹Ÿå¯ä»¥æœç´¢æ–‡ä»¶å†…å®¹ï¼Œåªæ˜¯ç›¸å½“çš„æ…¢ã€‚ 1.3.2 å…¨æ–‡æ£€ç´¢ï¼ˆFull-text Searchï¼‰ç”¨æˆ·é€šè¿‡æŸ¥è¯¢ç´¢å¼•åº“ â†’ ç”Ÿæˆç´¢å¼• â†’ æ–‡æ¡£ å…¨æ–‡æ£€ç´¢æ˜¯æŒ‡è®¡ç®—æœºç´¢å¼•ç¨‹åºé€šè¿‡æ‰«ææ–‡ç« ä¸­çš„æ¯ä¸€ä¸ªè¯ï¼Œå¯¹æ¯ä¸€ä¸ªè¯å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼ŒæŒ‡æ˜è¯¥è¯åœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°å’Œä½ç½®ï¼Œå½“ç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œæ£€ç´¢ç¨‹åºå°±æ ¹æ®äº‹å…ˆå»ºç«‹çš„ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¹¶å°†æŸ¥æ‰¾çš„ç»“æœåé¦ˆç»™ç”¨æˆ·çš„æ£€ç´¢æ–¹æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºé€šè¿‡å­—å…¸çš„ç›®å½•æŸ¥å­—çš„è¿‡ç¨‹ã€‚ å°†éç»“æ„åŒ–æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†ä¿¡æ¯æå–å‡ºæ¥ï¼Œé‡æ–°ç»„ç»‡ï¼Œä½¿å…¶å˜å¾—æœ‰ä¸€å®šç»“æ„ï¼Œç„¶åå¯¹æ­¤æœ‰ä¸€å®šç»“æ„çš„æ•°æ®è¿›è¡Œæœç´¢ï¼Œä»è€Œè¾¾åˆ°æœç´¢ç›¸å¯¹è¾ƒå¿«çš„ç›®çš„ã€‚è¿™éƒ¨åˆ†ä»éç»“æ„åŒ–æ•°æ®ä¸­æå–å‡ºçš„ç„¶åé‡æ–°ç»„ç»‡çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ç§°ä¹‹ç´¢å¼•ã€‚ ä¾‹å¦‚ï¼šå­—å…¸ã€‚å­—å…¸çš„æ‹¼éŸ³è¡¨å’Œéƒ¨é¦–æ£€å­—è¡¨å°±ç›¸å½“äºå­—å…¸çš„ç´¢å¼•ï¼Œå¯¹æ¯ä¸€ä¸ªå­—çš„è§£é‡Šæ˜¯éç»“æ„åŒ–çš„ï¼Œå¦‚æœå­—å…¸æ²¡æœ‰éŸ³èŠ‚è¡¨å’Œéƒ¨é¦–æ£€å­—è¡¨ï¼Œåœ¨èŒ«èŒ«è¾æµ·ä¸­æ‰¾ä¸€ä¸ªå­—åªèƒ½é¡ºåºæ‰«æã€‚ç„¶è€Œå­—çš„æŸäº›ä¿¡æ¯å¯ä»¥æå–å‡ºæ¥è¿›è¡Œç»“æ„åŒ–å¤„ç†ï¼Œæ¯”å¦‚è¯»éŸ³ï¼Œå°±æ¯”è¾ƒç»“æ„åŒ–ï¼Œåˆ†å£°æ¯å’ŒéŸµæ¯ï¼Œåˆ†åˆ«åªæœ‰å‡ ç§å¯ä»¥ä¸€ä¸€åˆ—ä¸¾ï¼Œäºæ˜¯å°†è¯»éŸ³æ‹¿å‡ºæ¥æŒ‰ä¸€å®šçš„é¡ºåºæ’åˆ—ï¼Œæ¯ä¸€é¡¹è¯»éŸ³éƒ½æŒ‡å‘æ­¤å­—çš„è¯¦ç»†è§£é‡Šçš„é¡µæ•°ã€‚æˆ‘ä»¬æœç´¢æ—¶æŒ‰ç»“æ„åŒ–çš„æ‹¼éŸ³æœåˆ°è¯»éŸ³ï¼Œç„¶åæŒ‰å…¶æŒ‡å‘çš„é¡µæ•°ï¼Œä¾¿å¯æ‰¾åˆ°æˆ‘ä»¬çš„éç»“æ„åŒ–æ•°æ®â€”â€”ä¹Ÿå³å¯¹å­—çš„è§£é‡Šã€‚ è¿™ç§å…ˆå»ºç«‹ç´¢å¼•ï¼Œå†å¯¹ç´¢å¼•è¿›è¡Œæœç´¢çš„è¿‡ç¨‹å°±å«å…¨æ–‡æ£€ç´¢(Full-Text Search) ã€‚è™½ç„¶åˆ›å»ºç´¢å¼•çš„è¿‡ç¨‹ä¹Ÿæ˜¯éå¸¸è€—æ—¶çš„ï¼Œä½†æ˜¯ç´¢å¼•ä¸€æ—¦åˆ›å»ºå°±å¯ä»¥å¤šæ¬¡ä½¿ç”¨ï¼Œå…¨æ–‡æ£€ç´¢ä¸»è¦å¤„ç†çš„æ˜¯æŸ¥è¯¢ï¼Œæ‰€ä»¥è€—æ—¶é—´åˆ›å»ºç´¢å¼•æ˜¯å€¼å¾—çš„ã€‚ å»ºç«‹ç´¢å¼• æ£€ç´¢ç´¢å¼• 1.4 å¦‚ä½•å®ç°å…¨æ–‡ç´¢å¼•å¯ä»¥ä½¿ç”¨ Lucene å®ç°å…¨æ–‡æ£€ç´¢ã€‚Lucene æ˜¯ apache ä¸‹çš„ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å…¨æ–‡æ£€ç´¢å¼•æ“å·¥å…·åŒ…ã€‚æä¾›äº†å®Œæ•´çš„æŸ¥è¯¢å¼•æ“å’Œç´¢å¼•å¼•æ“ï¼Œéƒ¨åˆ†æ–‡æœ¬åˆ†æå¼•æ“ï¼ˆè‹±æ–‡ä¸å¾·æ–‡ä¸¤ç§è¥¿æ–¹è¯­è¨€ï¼‰ã€‚Lucene çš„ç›®çš„æ˜¯ä¸ºè½¯ä»¶å¼€å‘äººå‘˜æä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨çš„å·¥å…·åŒ…ï¼Œä»¥æ–¹ä¾¿çš„åœ¨ç›®æ ‡ç³»ç»Ÿä¸­å®ç°å…¨æ–‡æ£€ç´¢çš„åŠŸèƒ½ã€‚ Luceneé€‚ç”¨åœºæ™¯ï¼š åœ¨åº”ç”¨ä¸­ä¸ºæ•°æ®åº“ä¸­çš„æ•°æ®æä¾›å…¨æ–‡æ£€ç´¢å®ç°ã€‚ å¼€å‘ç‹¬ç«‹çš„æœç´¢å¼•æ“æœåŠ¡ã€ç³»ç»Ÿ Luceneçš„ç‰¹æ€§ï¼š 1ï¼‰ç¨³å®šã€ç´¢å¼•æ€§èƒ½é«˜ æ¯å°æ—¶èƒ½å¤Ÿç´¢å¼•150GBä»¥ä¸Šçš„æ•°æ® å¯¹å†…å­˜çš„è¦æ±‚å°ï¼Œåªéœ€è¦1MBçš„å †å†…å­˜ å¢é‡ç´¢å¼•å’Œæ‰¹é‡ç´¢å¼•ä¸€æ ·å¿« ç´¢å¼•çš„å¤§å°çº¦ä¸ºç´¢å¼•æ–‡æœ¬å¤§å°çš„20%~30% 2ï¼‰é«˜æ•ˆã€å‡†ç¡®ã€é«˜æ€§èƒ½çš„æœç´¢ç®—æ³• è‰¯å¥½çš„æœç´¢æ’åº å¼ºå¤§çš„æŸ¥è¯¢æ–¹å¼æ”¯æŒï¼šçŸ­è¯­æŸ¥è¯¢ã€é€šé…ç¬¦æŸ¥è¯¢ã€ä¸´è¿‘æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ç­‰ æ”¯æŒå­—æ®µæœç´¢ï¼ˆå¦‚æ ‡é¢˜ã€ä½œè€…ã€å†…å®¹ï¼‰ å¯æ ¹æ®ä»»æ„å­—æ®µæ’åº æ”¯æŒå¤šä¸ªç´¢å¼•æŸ¥è¯¢ç»“æœåˆå¹¶ æ”¯æŒæ›´æ–°æ“ä½œå’ŒæŸ¥è¯¢æ“ä½œåŒæ—¶è¿›è¡Œ æ”¯æŒé«˜äº®ã€joinã€åˆ†ç»„ç»“æœåŠŸèƒ½ é€Ÿåº¦å¿« å¯æ‰©å±•æ’åºæ¨¡å—ï¼Œå†…ç½®åŒ…å«å‘é‡ç©ºé—´æ¨¡å‹ã€BM25æ¨¡å‹å¯é€‰ å¯é…ç½®å­˜å‚¨å¼•æ“ 3ï¼‰è·¨å¹³å° çº¯javaç¼–å†™ ä½œä¸ºApacheå¼€æºè®¸å¯ä¸‹çš„å¼€æºé¡¹ç›®ï¼Œä½ å¯ä»¥åœ¨å•†ä¸šæˆ–å¼€æºé¡¹ç›®ä¸­ä½¿ç”¨ Luceneæœ‰å¤šç§è¯­è¨€å®ç°ç‰ˆï¼ˆå¦‚Cï¼ŒC++ã€Pythonç­‰ï¼‰ï¼Œä¸ä»…ä»…æ˜¯JAVA Luceneæ¶æ„ï¼š 1.5 å…¨æ–‡æ£€ç´¢çš„åº”ç”¨åœºæ™¯å¯¹äºæ•°æ®é‡å¤§ã€æ•°æ®ç»“æ„ä¸å›ºå®šçš„æ•°æ®å¯é‡‡ç”¨å…¨æ–‡æ£€ç´¢æ–¹å¼æœç´¢ï¼Œ å•æœºè½¯ä»¶çš„æœç´¢ï¼šwordã€markdown ç«™å†…æœç´¢ï¼šäº¬ä¸œã€æ·˜å®ã€æ‹‰å‹¾ï¼Œç´¢å¼•æºæ˜¯æ•°æ®åº“ æœç´¢å¼•æ“ï¼šç™¾åº¦ã€Googleï¼Œç´¢å¼•æºæ˜¯çˆ¬è™«ç¨‹åºæŠ“å–çš„æ•°æ® äºŒã€Lucenceå®ç°å…¨æ–‡æ£€ç´¢çš„æµç¨‹è¯´æ˜2.1 ç´¢å¼•å’Œæœç´¢æµç¨‹å›¾ 1ã€ç»¿è‰²è¡¨ç¤ºç´¢å¼•è¿‡ç¨‹ï¼Œå¯¹è¦æœç´¢çš„åŸå§‹å†…å®¹è¿›è¡Œç´¢å¼•æ„å»ºä¸€ä¸ªç´¢å¼•åº“ï¼Œç´¢å¼•è¿‡ç¨‹åŒ…æ‹¬ï¼š ç¡®å®šåŸå§‹å†…å®¹å³è¦æœç´¢çš„å†…å®¹â€“&gt;é‡‡é›†æ–‡æ¡£â€“&gt;åˆ›å»ºæ–‡æ¡£â€“&gt;åˆ†ææ–‡æ¡£â€“&gt;ç´¢å¼•æ–‡æ¡£ 2ã€çº¢è‰²è¡¨ç¤ºæœç´¢è¿‡ç¨‹ï¼Œä»ç´¢å¼•åº“ä¸­æœç´¢å†…å®¹ï¼Œæœç´¢è¿‡ç¨‹åŒ…æ‹¬ï¼š ç”¨æˆ·é€šè¿‡æœç´¢ç•Œé¢â€“&gt;åˆ›å»ºæŸ¥è¯¢â€“&gt;æ‰§è¡Œæœç´¢ï¼Œä»ç´¢å¼•åº“æœç´¢â€“&gt;æ¸²æŸ“æœç´¢ç»“æœ 2.2 åˆ›å»ºç´¢å¼•2.2.1 æ ¸å¿ƒæ¦‚å¿µDocumentï¼š ç”¨æˆ·æä¾›çš„æºæ˜¯ä¸€æ¡æ¡è®°å½•ï¼Œå®ƒä»¬å¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶ã€å­—ç¬¦ä¸²æˆ–è€…æ•°æ®åº“è¡¨çš„ä¸€æ¡è®°å½•ç­‰ç­‰ã€‚ä¸€æ¡è®°å½•ç»è¿‡ç´¢å¼•ä¹‹åï¼Œå°±æ˜¯ä»¥ä¸€ä¸ªDocumentçš„å½¢å¼å­˜å‚¨åœ¨ç´¢å¼•æ–‡ä»¶ä¸­çš„ã€‚ç”¨æˆ·è¿›è¡Œæœç´¢ï¼Œä¹Ÿæ˜¯ä»¥Documentåˆ—è¡¨çš„å½¢å¼è¿”å›ã€‚ Fieldï¼š ä¸€ä¸ªDocumentå¯ä»¥åŒ…å«å¤šä¸ªä¿¡æ¯åŸŸï¼Œä¾‹å¦‚ä¸€ç¯‡æ–‡ç« å¯ä»¥åŒ…å«â€œæ ‡é¢˜â€ã€â€œæ­£æ–‡â€ã€â€œæœ€åä¿®æ”¹æ—¶é—´â€ç­‰ä¿¡æ¯åŸŸï¼Œè¿™äº›ä¿¡æ¯åŸŸå°±æ˜¯é€šè¿‡Fieldåœ¨Documentä¸­å­˜å‚¨çš„ã€‚ Fieldæœ‰ä¸¤ä¸ªå±æ€§å¯é€‰ï¼šå­˜å‚¨å’Œç´¢å¼•ã€‚é€šè¿‡å­˜å‚¨å±æ€§ä½ å¯ä»¥æ§åˆ¶æ˜¯å¦å¯¹è¿™ä¸ªFieldè¿›è¡Œå­˜å‚¨ï¼›é€šè¿‡ç´¢å¼•å±æ€§ä½ å¯ä»¥æ§åˆ¶æ˜¯å¦å¯¹è¯¥Fieldè¿›è¡Œç´¢å¼•ã€‚ å¦‚æœå¯¹æ ‡é¢˜å’Œæ­£æ–‡è¿›è¡Œå…¨æ–‡æœç´¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠç´¢å¼•å±æ€§è®¾ç½®ä¸ºçœŸï¼ŒåŒæ—¶æˆ‘ä»¬å¸Œæœ›èƒ½ç›´æ¥ä»æœç´¢ç»“æœä¸­æå–æ–‡ç« æ ‡é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæ ‡é¢˜åŸŸçš„å­˜å‚¨å±æ€§è®¾ç½®ä¸ºçœŸï¼Œä½†æ˜¯ç”±äºæ­£æ–‡åŸŸå¤ªå¤§äº†ï¼Œæˆ‘ä»¬ä¸ºäº†ç¼©å°ç´¢å¼•æ–‡ä»¶å¤§å°ï¼Œå°†æ­£æ–‡åŸŸçš„å­˜å‚¨å±æ€§è®¾ç½®ä¸ºå‡ï¼Œå½“éœ€è¦æ—¶å†ç›´æ¥è¯»å–æ–‡ä»¶ï¼›æˆ‘ä»¬åªæ˜¯å¸Œæœ›èƒ½ä»æœç´¢è§£æœä¸­æå–æœ€åä¿®æ”¹æ—¶é—´ï¼Œä¸éœ€è¦å¯¹å®ƒè¿›è¡Œæœç´¢ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæœ€åä¿®æ”¹æ—¶é—´åŸŸçš„å­˜å‚¨å±æ€§è®¾ç½®ä¸ºçœŸï¼Œç´¢å¼•å±æ€§è®¾ç½®ä¸ºå‡ã€‚ä¸Šé¢çš„ä¸‰ä¸ªåŸŸæ¶µç›–äº†ä¸¤ä¸ªå±æ€§çš„ä¸‰ç§ç»„åˆï¼Œè¿˜æœ‰ä¸€ç§å…¨ä¸ºå‡çš„æ²¡æœ‰ç”¨åˆ°ï¼Œäº‹å®ä¸ŠFieldä¸å…è®¸ä½ é‚£ä¹ˆè®¾ç½®ï¼Œå› ä¸ºæ—¢ä¸å­˜å‚¨åˆä¸ç´¢å¼•çš„åŸŸæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ Termï¼š Termæ˜¯æœç´¢çš„æœ€å°å•ä½ï¼Œå®ƒè¡¨ç¤ºæ–‡æ¡£çš„ä¸€ä¸ªè¯è¯­ï¼ŒTermç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå®ƒè¡¨ç¤ºçš„è¯è¯­å’Œè¿™ä¸ªè¯è¯­æ‰€å‡ºç°çš„Fieldçš„åç§°ã€‚ 2.2.2 å¤§è‡´æ­¥éª¤ä»¥æˆ‘çš„åšå®¢ç½‘ç«™ æœ¨ç“œç…²é¸¡è„šâ€˜blog çš„æœç´¢ä¸ºä¾‹ï¼Œåœ¨ç½‘ç«™ä¸Šè¾“å…¥å…³é”®å­—æœç´¢æ˜¾ç¤ºçš„å†…å®¹ä¸æ˜¯ç›´æ¥ä»æ•°æ®åº“ä¸­æ¥çš„ï¼Œè€Œæ˜¯ä»ç´¢å¼•åº“ä¸­è·å–çš„ï¼Œç½‘ç«™çš„ç´¢å¼•æ•°æ®éœ€è¦æå‰åˆ›å»ºçš„ã€‚ä»¥ä¸‹æ˜¯åˆ›å»ºçš„è¿‡ç¨‹ï¼š ç¬¬ä¸€æ­¥ï¼šè·å¾—åŸå§‹æ–‡æ¡£ï¼šå°±æ˜¯ä»mysqlæ•°æ®åº“ä¸­é€šè¿‡sqlè¯­å¥æŸ¥è¯¢éœ€è¦åˆ›å»ºç´¢å¼•çš„æ•°æ® ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ–‡æ¡£å¯¹è±¡ï¼ˆDocumentï¼‰ï¼ŒæŠŠæŸ¥è¯¢çš„å†…å®¹æ„å»ºæˆluceneèƒ½è¯†åˆ«çš„Documentå¯¹è±¡ï¼Œè·å–åŸå§‹å†…å®¹çš„ç›®çš„æ˜¯ä¸ºäº†ç´¢å¼•ï¼Œåœ¨ç´¢å¼•å‰éœ€è¦å°†åŸå§‹å†…å®¹åˆ›å»ºæˆæ–‡æ¡£ï¼Œæ–‡æ¡£ä¸­åŒ…æ‹¬ä¸€ä¸ªä¸€ä¸ªçš„åŸŸï¼ˆFieldï¼‰ï¼Œè¿™ä¸ªåŸŸå¯¹åº”å°±æ˜¯è¡¨ä¸­çš„åˆ—ã€‚ æ³¨æ„ï¼šæ¯ä¸ª Document å¯ä»¥æœ‰å¤šä¸ª Fieldï¼Œä¸åŒçš„ Document å¯ä»¥æœ‰ä¸åŒçš„ Fieldï¼ŒåŒä¸€ä¸ªDocumentå¯ä»¥æœ‰ç›¸åŒçš„ Fieldï¼ˆåŸŸåå’ŒåŸŸå€¼éƒ½ç›¸åŒï¼‰ã€‚æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç¼–å·ï¼Œå°±æ˜¯æ–‡æ¡£ idã€‚ ç¬¬ä¸‰æ­¥ï¼šåˆ†ææ–‡æ¡£ å°†åŸå§‹å†…å®¹åˆ›å»ºä¸ºåŒ…å«åŸŸï¼ˆFieldï¼‰çš„æ–‡æ¡£ï¼ˆdocumentï¼‰ï¼Œéœ€è¦å†å¯¹åŸŸä¸­çš„å†…å®¹è¿›è¡Œåˆ†æï¼Œåˆ†æçš„è¿‡ç¨‹æ˜¯ç»è¿‡å¯¹åŸå§‹æ–‡æ¡£æå–å•è¯ã€å°†å­—æ¯è½¬ä¸ºå°å†™ã€å»é™¤æ ‡ç‚¹ç¬¦å·ã€å»é™¤åœç”¨è¯ç­‰è¿‡ç¨‹ç”Ÿæˆæœ€ç»ˆçš„è¯­æ±‡å•å…ƒï¼Œå¯ä»¥å°†è¯­æ±‡å•å…ƒç†è§£ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å•è¯ã€‚ 123æœ¨ç“œç…²é¸¡è„šâ€™blogs -ã€‹ æœ¨ç“œ é¸¡è„š blogs åˆ†å¥½çš„è¯ä¼šç»„æˆç´¢å¼•åº“ä¸­æœ€å°çš„å•å…ƒï¼štermï¼Œä¸€ä¸ªtermç”±åŸŸåå’Œè¯ç»„æˆ **ç¬¬å››æ­¥ï¼š**åˆ›å»ºç´¢å¼• å¯¹æ‰€æœ‰æ–‡æ¡£åˆ†æå¾—å‡ºçš„è¯­æ±‡å•å…ƒè¿›è¡Œç´¢å¼•ï¼Œç´¢å¼•çš„ç›®çš„æ˜¯ä¸ºäº†æœç´¢ï¼Œæœ€ç»ˆè¦å®ç°åªæœç´¢è¢«ç´¢å¼•çš„è¯­æ±‡å•å…ƒä»è€Œæ‰¾åˆ° Documentï¼ˆæ–‡æ¡£ï¼‰ã€‚ æ³¨æ„ï¼š**åˆ›å»ºç´¢å¼•æ˜¯å¯¹è¯­æ±‡å•å…ƒç´¢å¼•**ï¼Œé€šè¿‡è¯è¯­æ‰¾æ–‡æ¡£ï¼Œè¿™ç§ç´¢å¼•çš„ç»“æ„å« **å€’æ’ç´¢å¼•ç»“æ„**ã€‚å€’æ’ç´¢å¼•ç»“æ„æ˜¯æ ¹æ®å†…å®¹ï¼ˆè¯è¯­ï¼‰æ‰¾æ–‡æ¡£ï¼Œå€’æ’ç´¢å¼•ç»“æ„ä¹Ÿå«åå‘ç´¢å¼•ç»“æ„ï¼ŒåŒ…æ‹¬ç´¢å¼•å’Œæ–‡æ¡£ä¸¤éƒ¨åˆ†ï¼Œç´¢å¼•å³è¯æ±‡è¡¨ï¼Œå®ƒçš„è§„æ¨¡è¾ƒå°ï¼Œè€Œæ–‡æ¡£é›†åˆè¾ƒå¤§ã€‚ 2.3 å€’æ’ç´¢å¼•å€’æ’ç´¢å¼•è®°å½•æ¯ä¸ªè¯æ¡å‡ºç°åœ¨å“ªäº›æ–‡æ¡£ï¼ŒåŠåœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ï¼Œå¯ä»¥æ ¹æ®è¯æ¡å¿«é€Ÿå®šä½åˆ°åŒ…å«è¿™ä¸ªè¯æ¡çš„æ–‡æ¡£åŠå‡ºç°çš„ä½ç½®ã€‚ æ–‡æ¡£ï¼šç´¢å¼•åº“ä¸­çš„æ¯ä¸€æ¡åŸå§‹æ•°æ®ï¼Œä¾‹å¦‚ä¸€ä¸ªå•†å“ä¿¡æ¯ã€ä¸€ä¸ªèŒä½ä¿¡æ¯ è¯æ¡ï¼šåŸå§‹æ•°æ®æŒ‰ç…§åˆ†è¯ç®—æ³•è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ°çš„æ¯ä¸€ä¸ªè¯ åˆ›å»ºå€’æ’ç´¢å¼•ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š 1ï¼‰åˆ›å»ºæ–‡æ¡£åˆ—è¡¨ luceneé¦–å…ˆå¯¹åŸå§‹æ–‡æ¡£æ•°æ®è¿›è¡Œç¼–å·ï¼ˆDocIDï¼‰ï¼Œå½¢æˆåˆ—è¡¨ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡æ¡£åˆ—è¡¨ 2ï¼‰åˆ›å»ºå€’æ’ç´¢å¼•åˆ—è¡¨ å¯¹æ–‡æ¡£ä¸­æ•°æ®è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ°è¯æ¡ï¼ˆåˆ†è¯åçš„ä¸€ä¸ªåˆä¸€ä¸ªè¯ï¼‰ã€‚å¯¹è¯æ¡è¿›è¡Œç¼–å·ï¼Œä»¥è¯æ¡åˆ›å»ºç´¢å¼•ã€‚ç„¶åè®°å½•ä¸‹åŒ…å«è¯¥è¯æ¡çš„æ‰€æœ‰æ–‡æ¡£ç¼–å·ï¼ˆåŠå…¶å®ƒä¿¡æ¯ï¼‰ã€‚ æœç´¢çš„è¿‡ç¨‹ï¼š å½“ç”¨æˆ·è¾“å…¥ä»»æ„çš„è¯æ¡æ—¶ï¼Œé¦–å…ˆå¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ°ç”¨æˆ·è¦æœç´¢çš„æ‰€æœ‰è¯æ¡ï¼Œç„¶åæ‹¿ç€è¿™äº›è¯æ¡å»å€’æ’ç´¢å¼•åˆ—è¡¨ä¸­è¿›è¡ŒåŒ¹é…ã€‚æ‰¾åˆ°è¿™äº›è¯æ¡å°±èƒ½æ‰¾åˆ°åŒ…å«è¿™äº›è¯æ¡çš„æ‰€æœ‰æ–‡æ¡£çš„ç¼–å·ã€‚ç„¶åæ ¹æ®è¿™äº›ç¼–å·å»æ–‡æ¡£åˆ—è¡¨ä¸­æ‰¾åˆ°æ–‡æ¡£ 2.4 æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢ç´¢å¼•ä¹Ÿæ˜¯æœç´¢çš„è¿‡ç¨‹ã€‚æœç´¢å°±æ˜¯ç”¨æˆ·è¾“å…¥å…³é”®å­—ï¼Œä»ç´¢å¼•ï¼ˆindexï¼‰ä¸­è¿›è¡Œæœç´¢çš„è¿‡ç¨‹ã€‚æ ¹æ®å…³é”®å­—æœç´¢ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„æ–‡æ¡£ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç”¨æˆ·æ¥å£ï¼ˆç”¨æˆ·è¾“å…¥å…³é”®å­—çš„åœ°æ–¹ï¼‰ ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæŸ¥è¯¢ æŒ‡å®šæŸ¥è¯¢çš„åŸŸåå’Œå…³é”®å­— ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡ŒæŸ¥è¯¢ ç¬¬å››æ­¥ï¼šæ¸²æŸ“ç»“æœ ï¼ˆç»“æœå†…å®¹æ˜¾ç¤ºåˆ°é¡µé¢ä¸Š å…³é”®å­—éœ€è¦é«˜äº®ï¼‰ ä¸‰ã€Lucenceå®æˆ˜3.1 éœ€æ±‚è¯´æ˜ç”ŸæˆèŒä½ä¿¡æ¯ç´¢å¼•åº“ï¼Œä»ç´¢å¼•åº“æ£€ç´¢æ•°æ® åŸºç¡€æ•°æ®ï¼šåˆ›å»ºæ•°æ®åº“å¯¼å…¥job-info.sql https://www.aliyundrive.com/s/wtZQfJYqYHi 3.2 å‡†å¤‡å¼€å‘ç¯å¢ƒ1ï¼‰å¼•å…¥ä¾èµ– 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;artifactId&gt;ES&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.6.RELEASE&lt;/version&gt; &lt;/parent&gt; &lt;dependencies&gt; &lt;!--webæ¨¡å—--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æµ‹è¯•æ¨¡å—--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--lombok--&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.18.4&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!--mybatis plus--&gt; &lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.3.2&lt;/version&gt; &lt;/dependency&gt; &lt;!--pojoæŒä¹…åŒ–--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.persistence&lt;/groupId&gt; &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;/dependency&gt; &lt;!--mysqlé©±åŠ¨--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.27&lt;/version&gt; &lt;/dependency&gt; &lt;!--Luceneæ ¸å¿ƒåŒ…ä»¥åŠåˆ†è¯åŒ…--&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-core&lt;/artifactId&gt; &lt;version&gt;4.10.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt; &lt;artifactId&gt;lucene-analyzers-common&lt;/artifactId&gt; &lt;version&gt;4.10.3&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; 2ï¼‰applicationé…ç½® 123456789101112131415server: port: 8080spring: application: name: es datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://xxx.xxx.xxx:3306/es?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=UTC username: root password: 1234mybatis-plus: configuration: map-underscore-to-camel-case: true 3ï¼‰åˆ›å»ºå®ä½“ç±» 12345678910111213141516171819202122232425import lombok.Data;import javax.persistence.Id;import javax.persistence.Table;/** * @author hao * @date 2022/3/16 12:01 */@Data@Table(name = &quot;job_info&quot;)public class JobInfo &#123; @Id private long id; private String companyName; private String companyAddr; private String companyInfo; private String jobName; private String jobAddr; private String jobInfo; private long salaryMin; private long salaryMax; private String url; private String time;&#125; 4ï¼‰åˆ›å»ºmapper 1234567891011import com.baomidou.mybatisplus.core.mapper.BaseMapper;import com.hao.pojo.JobInfo;import org.apache.ibatis.annotations.Mapper;/** * @author hao * @date 2022/3/16 12:02 */@Mapperpublic interface JobInfoMapper extends BaseMapper&lt;JobInfo&gt; &#123;&#125; 5ï¼‰åˆ›å»ºservice 12345678910111213141516@Servicepublic class JobInfoServiceImpl implements JobInfoService &#123; @Autowired JobInfoMapper jobInfoMapper; @Override public JobInfo selectById(Long id) &#123; return jobInfoMapper.selectById(id); &#125; @Override public List&lt;JobInfo&gt; selectAll() &#123; QueryWrapper&lt;JobInfo&gt; query = new QueryWrapper&lt;&gt;(); return jobInfoMapper.selectList(query); &#125;&#125; 6ï¼‰è¿›è¡Œæµ‹è¯• 123456789101112@RunWith(SpringRunner.class)@SpringBootTest(classes = EsApplication.class)public class TestApplication &#123; @Autowired JobInfoService jobInfoService; @Test public void test()&#123; List&lt;JobInfo&gt; jobInfos = jobInfoService.selectAll(); System.out.println(jobInfos); &#125;&#125; 3.3 åˆ›å»ºç´¢å¼•åœ¨å•å…ƒæµ‹è¯•å½“ä¸­ï¼Œè¿›è¡ŒLuceneçš„ä½¿ç”¨æµ‹è¯• 123456789101112131415161718192021222324252627282930@Testpublic void testCreateIndex() throws Exception &#123; // 1ã€æŒ‡å®šç´¢å¼•æ–‡ä»¶å­˜å‚¨çš„ä½ç½® D:\\class\\index Directory directory = FSDirectory.open(new File(&quot;D:\\\\class\\\\index&quot;)); // 2ã€é…ç½®ç‰ˆæœ¬å’Œåˆ†è¯å™¨ Analyzer analyzer = new StandardAnalyzer(); //æ ‡å‡†åˆ†è¯å™¨ IndexWriterConfig config = new IndexWriterConfig(Version.LATEST, analyzer); // 3ã€åˆ›å»ºä¸€ä¸ªç”¨æ¥åˆ›å»ºç´¢å¼•çš„å¯¹è±¡ IndexWriter indexWriter = new IndexWriter(directory, config); indexWriter.deleteAll(); //å…ˆåˆ é™¤ç´¢å¼• // 4ã€è·å–åŸå§‹æ•°æ® List&lt;JobInfo&gt; jobInfoList = jobInfoService.selectAll(); // æœ‰å¤šå°‘çš„æ•°æ®å°±åº”è¯¥æ„å»ºå¤šå°‘luceneçš„æ–‡æ¡£å¯¹è±¡document for (JobInfo jobInfo : jobInfoList) &#123; Document document = new Document(); // åŸŸå å€¼ æºæ•°æ®æ˜¯å¦å­˜å‚¨ document.add(new LongField(&quot;id&quot;, jobInfo.getId(), Field.Store.YES)); document.add(new TextField(&quot;companyName&quot;, jobInfo.getCompanyName(), Field.Store.YES)); document.add(new TextField(&quot;companyAddr&quot;, jobInfo.getCompanyAddr(), Field.Store.YES)); document.add(new TextField(&quot;jobName&quot;, jobInfo.getJobName(), Field.Store.YES)); document.add(new TextField(&quot;jobAddr&quot;, jobInfo.getJobAddr(), Field.Store.YES)); document.add(new LongField(&quot;salary&quot;, jobInfo.getSalaryMax(), Field.Store.YES)); document.add(new StringField(&quot;url&quot;, jobInfo.getUrl(), Field.Store.YES)); // StringField ä¸éœ€è¦åˆ†è¯æ—¶ä½¿ç”¨ ä¸¾ä¾‹ï¼šurl ã€ç”µè¯å·ç ã€èº«ä»½è¯å· indexWriter.addDocument(document); &#125; // å…³é—­èµ„æº indexWriter.close();&#125; ç”Ÿæˆçš„ç´¢å¼•ç›®å½•ï¼šD:\\class\\index ç´¢å¼•(Index)ï¼š åœ¨Luceneä¸­ä¸€ä¸ªç´¢å¼•æ˜¯æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ã€‚ å¦‚ä¸‹å›¾ï¼ŒåŒä¸€æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰çš„æ–‡ä»¶æ„æˆä¸€ä¸ªLuceneç´¢å¼•ã€‚ æ®µ(Segment)ï¼š æŒ‰å±‚æ¬¡ä¿å­˜äº†ä»ç´¢å¼•ä¸€ç›´åˆ°è¯çš„åŒ…å«å…³ç³»ï¼šç´¢å¼•(Index) â€“&gt; æ®µ(segment) â€“&gt; æ–‡æ¡£(Document) â€“&gt; åŸŸ(Field) â€“&gt; è¯(Term) ä¹Ÿå³æ­¤ç´¢å¼•åŒ…å«äº†é‚£äº›æ®µï¼Œæ¯ä¸ªæ®µåŒ…å«äº†é‚£äº›æ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£åŒ…å«äº†é‚£äº›åŸŸï¼Œæ¯ä¸ªåŸŸåŒ…å«äº†é‚£äº›è¯ã€‚ ä¸€ä¸ªç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªæ®µï¼Œæ®µä¸æ®µä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œæ·»åŠ æ–°æ–‡æ¡£å¯ä»¥ç”Ÿæˆæ–°çš„æ®µï¼Œä¸åŒçš„æ®µå¯ä»¥åˆå¹¶ã€‚ å¦‚ä¸Šå›¾ï¼Œå…·æœ‰ç›¸åŒå‰ç¼€æ–‡ä»¶çš„å±åŒä¸€ä¸ªæ®µï¼Œå›¾ä¸­å…±ä¸€ä¸ªæ®µ â€œ_0â€ ã€‚ segments.genå’Œsegments_1æ˜¯æ®µçš„å…ƒæ•°æ®æ–‡ä»¶ï¼Œä¹Ÿå³å®ƒä»¬ä¿å­˜äº†æ®µçš„å±æ€§ä¿¡æ¯ã€‚ Fieldçš„ç‰¹æ€§ï¼š Document(æ–‡æ¡£)æ˜¯Field(åŸŸ)çš„æ‰¿è½½ä½“, ä¸€ä¸ªDocumentç”±å¤šä¸ªFieldç»„æˆ. Fieldç”±åç§°å’Œå€¼ä¸¤éƒ¨åˆ†ç»„æˆ,Fieldçš„å€¼æ˜¯è¦ç´¢å¼•çš„å†…å®¹,ä¹Ÿæ˜¯è¦æœç´¢çš„å†…å®¹. æ˜¯å¦åˆ†è¯(tokenized) æ˜¯: å°†Fieldçš„å€¼è¿›è¡Œåˆ†è¯å¤„ç†, åˆ†è¯çš„ç›®çš„æ˜¯ä¸ºäº†ç´¢å¼•. å¦‚: å•†å“åç§°, å•†å“æè¿°. è¿™äº›å†…å®¹ç”¨æˆ·ä¼šé€šè¿‡è¾“å…¥å…³é”®è¯è¿›è¡ŒæŸ¥è¯¢, ç”±äºå†…å®¹å¤šæ ·, éœ€è¦è¿›è¡Œåˆ†è¯å¤„ç†å»ºç«‹ç´¢å¼•. å¦: ä¸åšåˆ†è¯å¤„ç†. å¦‚: è®¢å•ç¼–å·, èº«ä»½è¯å·, æ˜¯ä¸€ä¸ªæ•´ä½“, åˆ†è¯ä»¥åå°±å¤±å»äº†æ„ä¹‰, æ•…ä¸éœ€è¦åˆ†è¯. æ˜¯å¦ç´¢å¼• æ˜¯: å°†Fieldå†…å®¹è¿›è¡Œåˆ†è¯å¤„ç†åå¾—åˆ°çš„è¯(æˆ–æ•´ä½“Fieldå†…å®¹)å»ºç«‹ç´¢å¼•, å­˜å‚¨åˆ°ç´¢å¼•åŸŸ. ç´¢å¼•çš„ç›®çš„æ˜¯ä¸ºäº†æœç´¢. å¦‚: å•†å“åç§°, å•†å“æè¿°éœ€è¦åˆ†è¯å»ºç«‹ç´¢å¼•. è®¢å•ç¼–å·, èº«ä»½è¯å·ä½œä¸ºæ•´ä½“å»ºç«‹ç´¢å¼•. åªè¦å¯èƒ½ä½œä¸ºç”¨æˆ·æŸ¥è¯¢æ¡ä»¶çš„è¯, éƒ½éœ€è¦ç´¢å¼•. å¦: ä¸ç´¢å¼•. å¦‚: å•†å“å›¾ç‰‡è·¯å¾„, ä¸ä¼šä½œä¸ºæŸ¥è¯¢æ¡ä»¶, ä¸éœ€è¦å»ºç«‹ç´¢å¼•. æ˜¯å¦å­˜å‚¨ æ˜¯: å°†Fieldå€¼ä¿å­˜åˆ°Documentä¸­. å¦‚: å•†å“åç§°, å•†å“ä»·æ ¼. å‡¡æ˜¯å°†æ¥åœ¨æœç´¢ç»“æœé¡µé¢å±•ç°ç»™ç”¨æˆ·çš„å†…å®¹,éƒ½éœ€è¦å­˜å‚¨. å¦: ä¸å­˜å‚¨. å¦‚: å•†å“æè¿°. å†…å®¹å¤šæ ¼å¼å¤§, ä¸éœ€è¦ç›´æ¥åœ¨æœç´¢ç»“æœé¡µé¢å±•ç°, ä¸åšå­˜å‚¨. éœ€è¦çš„æ—¶å€™å¯ä»¥ä»å…³ç³»æ•°æ®åº“å–. å¸¸ç”¨çš„Fieldç±»å‹ 3.4 æŸ¥è¯¢ç´¢å¼•æµ‹è¯•æŸ¥è¯¢ 123456789101112131415161718192021222324252627@Testpublic void testQueryIndex() throws Exception &#123; // 1ã€æŒ‡å®šç´¢å¼•æ–‡ä»¶å­˜å‚¨çš„ä½ç½® D:\\class\\index Directory directory = FSDirectory.open(new File(&quot;D:\\\\class\\\\index&quot;)); // 2ã€ åˆ›å»ºä¸€ä¸ªç”¨æ¥åŠ è½½ç´¢å¼•çš„å¯¹è±¡ IndexReader indexReader = DirectoryReader.open(directory); // 3ã€ åˆ›å»ºä¸€ä¸ªç”¨æ¥æŸ¥è¯¢ç´¢å¼•çš„å¯¹è±¡ IndexSearcher indexSearcher = new IndexSearcher(indexReader); // ä½¿ç”¨termæŸ¥è¯¢ï¼šæŒ‡å®šæŸ¥è¯¢çš„åŸŸåå¯¹åº”å€¼çš„å…³é”®å­— Query query = new TermQuery(new Term(&quot;companyName&quot;, &quot;åŒ—äº¬&quot;)); TopDocs topDocs = indexSearcher.search(query, 100); //ç¬¬äºŒä¸ªå‚æ•°ï¼šæœ€å¤šæ˜¾ç¤ºå¤š å°‘æ¡æ•°æ® int totalHits = topDocs.totalHits; //æŸ¥è¯¢çš„æ€»æ•°é‡ System.out.println(&quot;ç¬¦åˆæ¡ä»¶çš„æ€»æ•°:&quot; + totalHits); ScoreDoc[] scoreDocs = topDocs.scoreDocs; //è·å–å‘½ä¸­çš„æ–‡æ¡£ å­˜å‚¨çš„æ˜¯æ–‡æ¡£çš„id for (ScoreDoc scoreDoc : scoreDocs) &#123; int docID = scoreDoc.doc; // æ ¹æ®idæŸ¥è¯¢æ–‡æ¡£ Document document = indexSearcher.doc(docID); System.out.println(&quot;id:&quot; + document.get(&quot;id&quot;)); System.out.println(&quot;companyName:&quot; + document.get(&quot;companyName&quot;)); System.out.println(&quot;companyAddr:&quot; + document.get(&quot;companyAddr&quot;)); System.out.println(&quot;salary:&quot; + document.get(&quot;salary&quot;)); System.out.println(&quot;url:&quot; + document.get(&quot;url&quot;)); System.out.println(&quot;***********************************************************&quot;); &#125;&#125; æŸ¥çœ‹ç»“æœä½ ä¼šå‘ç°ï¼Œå±…ç„¶æ²¡æœ‰æ•°æ®ï¼Œå¦‚æœæŠŠæŸ¥è¯¢çš„å…³é”®å­—â€œåŒ—äº¬â€é‚£é‡Œæ”¹ä¸ºâ€œåŒ—â€æˆ–â€œäº¬â€å°±å¯ä»¥ï¼ŒåŸå› æ˜¯å› ä¸ºä¸­æ–‡ä¼šä¸€ä¸ªå­—ä¸€ä¸ªå­—çš„åˆ†è¯ï¼ˆç´¢å¼•é‡Œé¢æ²¡æœ‰â€œåŒ—äº¬â€è¿™ä¸ªè¯æ¡ï¼‰ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¯ä»¥åˆç†åˆ†è¯çš„åˆ†è¯å™¨ï¼Œå…¶ä¸­æœ€æœ‰åçš„IKAnalyzeråˆ†è¯å™¨ 3.5 ä¸­æ–‡åˆ†è¯å™¨çš„ä½¿ç”¨1ï¼‰å¯¼å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.janeluo&lt;/groupId&gt; &lt;artifactId&gt;ikanalyzer&lt;/artifactId&gt; &lt;version&gt;2012_u6&lt;/version&gt;&lt;/dependency&gt; 2ï¼‰æ·»åŠ é…ç½®æ–‡ä»¶ 3ï¼‰åˆ›å»ºç´¢å¼•æ—¶ä½¿ç”¨IKanalyzer æŠŠåŸæ¥çš„ç´¢å¼•æ•°æ®åˆ é™¤ï¼Œå°†æ ‡å‡†åˆ†è¯å™¨æ¢æˆIKåˆ†è¯å™¨å†é‡æ–°ç”Ÿäº§ç´¢å¼•æ–‡ä»¶ï¼Œå†ä½¿ç”¨å…³é”®å­—â€œåŒ—äº¬â€å°±å¯ä»¥æŸ¥è¯¢åˆ°ç»“æœäº† è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªå¤§å‹ç½‘ç«™ä¸­çš„ç´¢å¼•æ•°æ®ä¼šå¾ˆåºå¤§çš„ï¼Œæ‰€ä»¥ä½¿ç”¨luceneè¿™ç§åŸç”Ÿçš„å†™ä»£ç çš„æ–¹å¼å°±ä¸åˆé€‚äº†ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©ä¸€ä¸ªæˆç†Ÿçš„é¡¹ç›®æˆ–è½¯ä»¶æ¥å®ç°ï¼Œç›®å‰æ¯”è¾ƒæœ‰åæ˜¯solrå’ŒelasticSearchï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ elasticSearchçš„ä½¿ç”¨ã€‚ å››ã€Elasticsearchä»‹ç»ä¸å®‰è£…Elasticsearchæ˜¯ä¸€ä¸ªéœ€è¦å®‰è£…é…ç½®çš„è½¯ä»¶ã€‚ ELKæŠ€æœ¯æ ˆè¯´æ˜ Elasticæœ‰ä¸€æ¡å®Œæ•´çš„äº§å“çº¿ï¼šElasticsearchã€Logstashã€Kibanaç­‰ï¼Œå‰é¢è¯´çš„ä¸‰ä¸ªå°±æ˜¯å¤§å®¶å¸¸è¯´çš„ELKæŠ€æœ¯æ ˆï¼ˆå¼€æºå®æ—¶æ—¥å¿—åˆ†æå¹³å°ï¼‰ã€‚ Logstash çš„ä½œç”¨å°±æ˜¯ä¸€ä¸ªæ•°æ®æ”¶é›†å™¨ï¼Œå°†å„ç§æ ¼å¼å„ç§æ¸ é“çš„æ•°æ®é€šè¿‡å®ƒæ”¶é›†è§£æä¹‹åæ ¼å¼åŒ–è¾“å‡ºåˆ°Elasticsearch ï¼Œæœ€åå†ç”± Kibana æä¾›çš„æ¯”è¾ƒå‹å¥½çš„ Web ç•Œé¢è¿›è¡Œæ±‡æ€»ã€åˆ†æã€æœç´¢ã€‚ ELK å†…éƒ¨å®é™…å°±æ˜¯ä¸ªç®¡é“ç»“æ„ï¼Œæ•°æ®ä» Logstash åˆ° Elasticsearch å†åˆ° Kibana åšå¯è§†åŒ–å±•ç¤ºã€‚è¿™ä¸‰ä¸ªç»„ä»¶å„è‡ªä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œæ¯”å¦‚ Logstash ä¸ä»…å¯ä»¥å°†æ•°æ®è¾“å‡ºåˆ°Elasticsearch ï¼Œä¹Ÿå¯ä»¥åˆ°æ•°æ®åº“ã€ç¼“å­˜ç­‰ 4.1 ç®€ä»‹4.1.1 ElasticElasticå®˜ç½‘ï¼šhttps://www.elastic.co/cn/ Elasticå…¬å¸æœ‰ä¸€æ¡å®Œæ•´çš„äº§å“çº¿ï¼šElasticsearchã€Logstashã€Kibanaç­‰ï¼Œå‰é¢è¯´çš„ä¸‰ä¸ªå°±æ˜¯å¤§å®¶å¸¸è¯´çš„ELKæŠ€æœ¯æ ˆã€‚ 4.1.2 ElasticsearchElasticsearchå®˜ç½‘ï¼šhttps://www.elastic.co/cn/products/elasticsearch åŠŸèƒ½ï¼š åˆ†å¸ƒå¼çš„æœç´¢å¼•æ“ï¼šç™¾åº¦ã€Googleã€ç«™å†…æœç´¢ å…¨æ–‡æ£€ç´¢ï¼šæä¾›æ¨¡ç³Šæœç´¢ç­‰è‡ªåŠ¨åº¦å¾ˆé«˜çš„æŸ¥è¯¢æ–¹å¼ï¼Œå¹¶è¿›è¡Œç›¸å…³æ€§æ’åï¼Œé«˜äº®ç­‰åŠŸèƒ½ æ•°æ®åˆ†æå¼•æ“ï¼ˆåˆ†ç»„èšåˆï¼‰ï¼šç”µå•†ç½‘ç«™â€”ä¸€å‘¨å†…æ‰‹æœºé”€é‡Top10 å¯¹æµ·é‡æ•°æ®è¿›è¡Œè¿‘ä¹å®æ—¶å¤„ç†ï¼šæ°´å¹³æ‰©å±•ï¼Œæ¯ç§’é’Ÿå¯å¤„ç†æµ·é‡äº‹ä»¶ï¼ŒåŒæ—¶èƒ½å¤Ÿè‡ªåŠ¨ç®¡ç†ç´¢å¼•å’ŒæŸ¥è¯¢åœ¨é›†ç¾¤ä¸­çš„åˆ†å¸ƒæ–¹å¼ï¼Œä»¥å®ç°æå…¶æµç•…çš„æ“ä½œã€‚ å¦‚ä¸Šæ‰€è¿°ï¼ŒElasticsearchå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š é«˜é€Ÿã€æ‰©å±•æ€§ã€æœ€ç›¸å…³çš„æœç´¢ç»“æœ åˆ†å¸ƒå¼ï¼šèŠ‚ç‚¹å¯¹å¤–è¡¨ç°å¯¹ç­‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä½œä¸ºå…¥é—¨ï¼ŒåŠ å…¥èŠ‚ç‚¹è‡ªåŠ¨è´Ÿè½½å‡è¡¡ JSONï¼šè¾“å…¥è¾“å‡ºæ ¼å¼æ˜¯JSON Restfulé£æ ¼ï¼Œä¸€åˆ‡APIéƒ½éµå¾ªReståŸåˆ™ï¼Œå®¹æ˜“ä¸Šæ‰‹ è¿‘å®æ—¶æœç´¢ï¼Œæ•°æ®æ›´æ–°åœ¨Elasticsearchä¸­å‡ ä¹æ˜¯å®Œå…¨åŒæ­¥çš„ï¼Œæ•°æ®æ£€ç´¢è¿‘ä¹å®æ—¶ å®‰è£…æ–¹ä¾¿ï¼šæ²¡æœ‰å…¶å®ƒä¾èµ–ï¼Œä¸‹è½½åå®‰è£…å¾ˆæ–¹ä¾¿ï¼Œç®€å•ä¿®æ”¹å‡ ä¸ªå‚æ•°å°±å¯ä»¥æ­å»ºé›†ç¾¤ æ”¯æŒè¶…å¤§æ•°æ®ï¼šå¯ä»¥æ‰©å±•åˆ°PBçº§åˆ«çš„ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ® 4.1.3 ç‰ˆæœ¬æˆ‘è¿™è¾¹ç›´æ¥ç”¨æ¯”è¾ƒæ–°çš„8.0.0https://www.elastic.co/cn/downloads/past-releases/elasticsearch-8-0-0 4.2 å®‰è£…å’Œé…ç½®ä¸ºäº†å¿«é€Ÿçœ‹åˆ°æ•ˆæœæˆ‘ä»¬ç›´æ¥åœ¨æœ¬åœ°windowä¸‹å®‰è£…Elasticsearchã€‚ç¯å¢ƒè¦æ±‚ï¼šJDK11åŠä»¥ä¸Šç‰ˆæœ¬ 1ï¼‰ä¸‹è½½è§£å‹ å®ƒè¿™ä¸ªç‰ˆæœ¬è¿˜è‡ªå¸¦äº†JDKï¼Œå¦‚æœç”µè„‘é…ç½®JAVA_HOMEçš„ç¯å¢ƒå˜é‡é‚£å°±ä½¿ç”¨JAVA_HOMEçš„ã€‚å¦‚æœæ²¡é…é‚£å°±ä½¿ç”¨è‡ªå¸¦çš„ã€‚å¦‚æœæœ‰JAVA_HOME ä¹Ÿå¯ä»¥å†é…ç½®ä¸ªES_JAVA_HOMEï¼ˆesä¼˜å…ˆä½¿ç”¨ï¼‰æŒ‡å‘è‡ªå¸¦è¿™ä¸ªï¼ˆè‡ªå¸¦çš„JDKç‰ˆæœ¬æ˜¯æœ€é€‚é…çš„ï¼‰ 2ï¼‰ä¿®æ”¹é…ç½® ä¿®æ”¹ç´¢å¼•æ•°æ®å’Œæ—¥å¿—æ•°æ®å­˜å‚¨çš„è·¯å¾„ æ‰“å¼€æ³¨é‡Š ä¿®æ”¹ç´¢å¼•æ•°æ®å­˜å‚¨è·¯å¾„ï¼Œä»¥åŠæ—¥å¿—è·¯å¾„ 3ï¼‰è¿›å…¥binç›®å½•å¯åŠ¨bat å¦‚æœå¯åŠ¨çš„å¤±è´¥çš„è¯ï¼Œå¾ˆå¤§å¯èƒ½æ˜¯éœ€è¦ä¿®æ”¹è™šæ‹Ÿæœºå†…å­˜çš„å¤§å°ï¼Œä¸è¿‡æ–°ç‰ˆæœ¬åº”è¯¥ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜é»˜è®¤çš„å°±å¯ä»¥ã€‚-Xmså¯åŠ¨æ—¶åˆ†é…çš„å†…å­˜è¶Šå¤§ç›¸å¯¹æ¥è¯´å¿«å½“ç„¶ä¹Ÿè¦ç»“åˆä½ è‡ªèº«æœºå™¨çš„å†…å­˜æƒ…å†µï¼Œ-Xmxè¿è¡ŒæœŸé—´æœ€å¤§ä¹Ÿåªç»™å®ƒåˆ†é…çš„ç©ºé—´ï¼Œå®é™…è¶…è¿‡äº†å°±ä¼šå†…å­˜æº¢å‡º åˆ°configä¸­æ‰¾åˆ°jvm.optionsè¿›è¡Œä¿®æ”¹ 4.3 è®¿é—® å¯ä»¥çœ‹åˆ°ç»‘å®šäº†ä¸¤ä¸ªç«¯å£: 9300ï¼šé›†ç¾¤èŠ‚ç‚¹é—´é€šè®¯æ¥å£ï¼Œæ¥æ”¶tcpåè®® 9200ï¼šå®¢æˆ·ç«¯è®¿é—®æ¥å£ï¼Œæ¥æ”¶Httpåè®® æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼šhttp://127.0.0.1:9200 ç„¶åå‘ç°ä¸€ç›´è®¿é—®ä¸äº†localhost:9200ï¼Œæ˜¯å› ä¸ºé¦–æ¬¡å¯åŠ¨ä¼šå¼€å¯ä¸€äº›é…ç½®ã€‚å¦‚ä¸‹æ˜¯ä»å®˜ç½‘æˆªå›¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å»å…³æ‰æˆ–è€…ä½¿ç”¨httpsè®¿é—®ã€‚ 1received plaintext http traffic on an https channel, closing connection Netty4HttpChannel&#123;localAddress=/[0:0:0:0:0:0:0:1]:9200, remoteAddress=/[0:0:0:0:0:0:0:1]:59093&#125; ç¬¬äºŒå°±æ˜¯elasticçš„å¯†ç åœ¨æ§åˆ¶å°éœ€è¦æ‰¾åˆ°ï¼Œç„¶åå‘ç°æ­»æ´»æ‰¾ä¸åˆ°ï¼ˆå› ä¸ºåªæœ‰ç¬¬ä¸€æ¬¡æ‰ä¼šæœ‰ï¼‰ã€‚ è®¿é—® https://127.0.0.1:9200 ç”¨æˆ·åï¼šelastic å¯†ç ï¼šma9Uxd7nRUycKSBxFGbC ï¼ˆæ§åˆ¶å°ä¸Šçš„ï¼‰ 4.4 å®‰è£…Kibana4.4.1 ä»€ä¹ˆæ˜¯Kibanahttps://www.elastic.co/cn/kibana/ Kibanaæ˜¯ä¸€ä¸ªåŸºäºNode.jsçš„Elasticsearchç´¢å¼•åº“æ•°æ®ç»Ÿè®¡å·¥å…·ï¼Œå¯ä»¥åˆ©ç”¨Elasticsearchçš„èšåˆåŠŸèƒ½ï¼Œç”Ÿæˆå„ç§å›¾è¡¨ï¼Œå¦‚æŸ±å½¢å›¾ï¼Œçº¿çŠ¶å›¾ï¼Œé¥¼å›¾ç­‰ã€‚ è€Œä¸”è¿˜æä¾›äº†æ“ä½œElasticsearchç´¢å¼•æ•°æ®çš„æ§åˆ¶å°ï¼Œå¹¶ä¸”æä¾›äº†ä¸€å®šçš„APIæç¤ºï¼Œéå¸¸æœ‰åˆ©äºæˆ‘ä»¬å­¦ä¹ Elasticsearchçš„è¯­æ³•ã€‚ 4.4.2 å®‰è£…å› ä¸ºKibanaä¾èµ–äºnodeï¼Œéœ€è¦åœ¨windowsä¸‹å…ˆå®‰è£…Node.jsã€‚æˆ‘è‡ªå·±çš„nodeç‰ˆæœ¬16.13.0 ç„¶åä¸‹è½½kibanaï¼Œç‰ˆæœ¬å’Œelasticsearchä¿æŒä¸€è‡´ã€‚æˆ‘å°±ç”¨8.0.0 https://www.elastic.co/cn/downloads/past-releases#kibana 4.4.3 é…ç½®è¿è¡Œè¿›å…¥å®‰è£…ç›®å½•ä¸‹çš„configç›®å½•ï¼Œé…ç½®kibana.yml å½“ä¸­çš„ elasticsearch.hosts ä¸ºè‡ªå·±çš„elasticsearchæœåŠ¡åœ°å€ åœ¨å®‰è£…ç›®å½•binä¸‹ï¼Œä½¿ç”¨kibana.batå¯åŠ¨ã€‚ 4.4.4 æ§åˆ¶å°æ§åˆ¶å°å¯è§é»˜è®¤ç«¯å£æ˜¯5601 å»è®¿é—®çœ‹çœ‹ http://localhost:5601 è®¿é—®è¿›å»ä¹‹åï¼Œå®ƒæ˜¯è¦è¿›è¡Œä¸€ä¸ªä¸elasticsearchçš„è®¤è¯çš„é…ç½®ï¼Œè¦è¾“å…¥tokenï¼Œä¹Ÿå°±æ˜¯é¦–æ¬¡å¯åŠ¨elasticsearchç»ˆç«¯ç”Ÿæˆçš„ å¡«å…¥tokenç¡®å®šä¹‹åï¼Œå¼¹å‡ºä¸ªéªŒè¯ç ã€‚è¿™æ—¶è¿™ä¸ªéªŒè¯ç ä¼šåœ¨kibanaçš„æ§åˆ¶å°æ˜¾ç¤ºè¾“å‡ºï¼Œä¹Ÿå¯ä»¥å‘ä¸Šé¢æç¤ºçš„ä½¿ç”¨ kibana-verification-code.batè·å– æˆ‘è¿™è¾¹æœ‰ä¸ªæ˜¯tokenå¤±æ•ˆäº†ï¼Œæ‰€ä»¥å°±é€šè¿‡æ‰‹åŠ¨é…ç½®ç™»å½• éœ€è¦å…ˆé€šè¿‡elasticsearchç”Ÿæˆä¸€ä¸ªkibnana_systemçš„å¯†ç  1bin/elasticsearch-reset-password -u kibana_system å¯ä»¥å°†è¿™ä¸ªå¯†ç é…ç½®åˆ°ï¼Œkibanaå½“ä¸­ å¡«å…¥å¯†ç ä¹‹åå°±å¯ä»¥é…ç½®é€šè¿‡äº†ï¼Œç„¶åæ­£å¼è¿›å…¥åˆ°äº†ç™»å½•ç•Œé¢ï¼Œç»ˆäºå¯ä»¥ä½¿ç”¨ç®¡ç†å‘˜elasticç”¨æˆ·è¿›è¡Œç™»å½•äº†ã€‚ è¿™æ—¶ä¹Ÿå¯ä»¥æŠŠelasticçš„å¯†ç æ”¹æ‰äº† ç°åœ¨è¿™ä¸ªç‰ˆæœ¬ç¡®å®å’Œä»¥å‰ç•Œé¢å·®è·æŒºå¤§ 4.5 å®‰è£…ikåˆ†è¯å™¨Luceneçš„IKåˆ†è¯å™¨æ—©åœ¨2012å¹´å·²ç»æ²¡æœ‰ç»´æŠ¤äº†ï¼Œç°åœ¨æˆ‘ä»¬è¦ä½¿ç”¨çš„æ˜¯åœ¨å…¶åŸºç¡€ä¸Šç»´æŠ¤å‡çº§çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”å¼€å‘ä¸ºElasticsearchçš„é›†æˆæ’ä»¶äº†ï¼Œä¸Elasticsearchä¸€èµ·ç»´æŠ¤å‡çº§ï¼Œç‰ˆæœ¬ä¹Ÿä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä¸‹è½½8.0.0çš„ https://github.com/medcl/elasticsearch-analysis-ik/releases ä¸‹è½½è§£å‹åˆ°elasticsearchçš„plugså½“ä¸­å¹¶é‡å‘½åä¸ºik é‡æ–°å¯åŠ¨elasticsearchå³å¯ æµ‹è¯• å…ˆä¸ç®¡è¿™ä¸ªæŸ¥è¯¢è¯­æ³•ï¼Œå…ˆæµ‹è¯•ä¸‹ åœ¨kibanaæ§åˆ¶å°è¾“å…¥ä¸‹é¢çš„è¯·æ±‚ï¼š 12345GET /_analyze&#123; &quot;analyzer&quot;: &quot;ik_max_word&quot;, &quot;text&quot;: &quot;æˆ‘æ˜¯ä¸­å›½äºº&quot;&#125; è¿è¡Œå¾—åˆ°ç»“æœå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;æˆ‘&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 1, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 1, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;ä¸­å›½äºº&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;ä¸­å›½&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 4, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;å›½äºº&quot;, &quot;start_offset&quot; : 3, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 4 &#125; ]&#125; ä¸Šé¢ä½¿ç”¨äº† ik_max_wordï¼Œå¯¹å†…å®¹çš„åˆ†è¯æ˜¯æœ€å¤§åŒ–ã€‚å†æµ‹è¯•ä¸‹ ik_smart 12345GET /_analyze&#123; &quot;analyzer&quot;: &quot;ik_smart&quot;, &quot;text&quot;: &quot;æˆ‘æ˜¯ä¸­å›½äºº&quot;&#125; ç»“æœï¼š 12345678910111213141516171819202122232425&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;æˆ‘&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 1, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 1, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;ä¸­å›½äºº&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125; ]&#125; ik_smartæ¨¡å¼æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„è¯†åˆ«ï¼Œä¸ä¼šå°†è¯­ä¹‰ä¸­çš„è¯å› ä¸ºæ°å¥½å…¶ä¸­çš„å­—å’Œè¯å‰æˆ–è€…åçš„å­—ä¹Ÿå¥½åƒèƒ½ç»„æˆè¯è€Œå»ç”Ÿæˆè¿™ä¸ªè¯æ¡ 4.6 Headæ’ä»¶4.6.1 elasticsearch-headç®€ä»‹elasticsearch-headæ˜¯ä¸€ä¸ªç•Œé¢åŒ–çš„é›†ç¾¤æ“ä½œå’Œç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¯¹é›†ç¾¤è¿›è¡Œå‚»ç“œå¼æ“ä½œã€‚ä½ å¯ä»¥é€šè¿‡æ’ä»¶æŠŠå®ƒé›†æˆåˆ°esï¼ˆé¦–é€‰æ–¹å¼ï¼‰,ä¹Ÿå¯ä»¥å®‰è£…æˆä¸€ä¸ªç‹¬ç«‹webappã€‚ es-headä¸»è¦æœ‰ä¸‰ä¸ªæ–¹é¢çš„æ“ä½œï¼š æ˜¾ç¤ºé›†ç¾¤çš„æ‹“æ‰‘,å¹¶ä¸”èƒ½å¤Ÿæ‰§è¡Œç´¢å¼•å’ŒèŠ‚ç‚¹çº§åˆ«æ“ä½œ æœç´¢æ¥å£èƒ½å¤ŸæŸ¥è¯¢é›†ç¾¤ä¸­åŸå§‹jsonæˆ–è¡¨æ ¼æ ¼å¼çš„æ£€ç´¢æ•°æ® èƒ½å¤Ÿå¿«é€Ÿè®¿é—®å¹¶æ˜¾ç¤ºé›†ç¾¤çš„çŠ¶æ€ å®˜æ–¹çš„æ–‡æ¡£ï¼š https://github.com/mobz/elasticsearch-head 4.6.2 å®‰è£…è¿™ä¸ªå°±ä¸ç”¨ å¤šè¯´ï¼Œè°·æ­Œæµè§ˆå™¨æˆ–è€…ç«ç‹éƒ½å¯ä»¥åœ¨è°·æ­Œæ’ä»¶å•†åº—æœç´¢åç§°å®‰è£…å³å¯ï¼ˆç§‘å­¦ä¸Šç½‘ï¼‰ https://chrome.google.com/webstore/category/extensions ç•Œé¢å¦‚ä¸‹ æ€»ä¹‹å’Œkibanaä¸€æ ·éƒ½æ˜¯ä½œä¸ºElasticsearchçš„æ§åˆ¶é¢æ¿ï¼Œä¸è¿‡è¿™ä¸ªå¯ä»¥æ›´æ–¹ä¾¿çš„æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ã€‚ äº”ã€ä½¿ç”¨Kibanaå¯¹ç´¢å¼•åº“æ“ä½œ5.1 åŸºæœ¬æ¦‚å¿µ5.1.1 èŠ‚ç‚¹ã€é›†ç¾¤ã€åˆ†ç‰‡åŠå‰¯æœ¬1ï¼‰èŠ‚ç‚¹ï¼ˆnodeï¼‰ ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªElasticsearchçš„å®ä¾‹ åœ¨æœåŠ¡å™¨ä¸Šå¯åŠ¨Elasticsearchä¹‹åï¼Œå°±æ‹¥æœ‰äº†ä¸€ä¸ªèŠ‚ç‚¹ã€‚å¦‚æœåœ¨å¦ä¸€å°æœåŠ¡å™¨ä¸Šå¯åŠ¨Elasticsearchï¼Œè¿™å°±æ˜¯å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚ç”šè‡³å¯ä»¥é€šè¿‡å¯åŠ¨å¤šä¸ªElasticsearchè¿›ç¨‹ï¼Œåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šæ‹¥æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚ 2ï¼‰é›†ç¾¤ï¼ˆclusterï¼‰ å¤šä¸ªååŒå·¥ä½œçš„ElasticsearchèŠ‚ç‚¹çš„é›†åˆè¢«ç§°ä¸ºé›†ç¾¤ã€‚ åœ¨å¤šèŠ‚ç‚¹çš„é›†ç¾¤ä¸Šï¼ŒåŒæ ·çš„æ•°æ®å¯ä»¥åœ¨å¤šå°æœåŠ¡å™¨ä¸Šä¼ æ’­ã€‚è¿™æœ‰åŠ©äºæ€§èƒ½ã€‚è¿™åŒæ ·æœ‰åŠ©äºç¨³å®šæ€§ï¼Œå¦‚æœæ¯ä¸ªåˆ†ç‰‡è‡³å°‘æœ‰ä¸€ä¸ªå‰¯æœ¬åˆ†ç‰‡ï¼Œé‚£ä¹ˆä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å®•æœºåï¼ŒElasticsearchä¾ç„¶å¯ä»¥è¿›è¡ŒæœåŠ¡ï¼Œè¿”å›æ‰€æœ‰æ•°æ®ã€‚ ä½†æ˜¯å®ƒä¹Ÿæœ‰ç¼ºç‚¹ï¼šå¿…é¡»ç¡®å®šèŠ‚ç‚¹ä¹‹é—´èƒ½å¤Ÿè¶³å¤Ÿå¿«é€Ÿåœ°é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿè„‘è£‚æ•ˆåº”ï¼ˆé›†ç¾¤çš„2ä¸ªéƒ¨åˆ†ä¸èƒ½å½¼æ­¤äº¤æµï¼Œéƒ½è®¤ä¸ºå¯¹æ–¹å®•æœºäº†ï¼‰ã€‚ 3ï¼‰åˆ†ç‰‡ï¼ˆshardï¼‰ ç´¢å¼•å¯èƒ½ä¼šå­˜å‚¨å¤§é‡æ•°æ®ï¼Œè¿™äº›æ•°æ®å¯èƒ½è¶…è¿‡å•ä¸ªèŠ‚ç‚¹çš„ç¡¬ä»¶é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œåäº¿ä¸ªæ–‡æ¡£çš„å•ä¸ªç´¢å¼•å ç”¨äº†1TBçš„ç£ç›˜ç©ºé—´ï¼Œå¯èƒ½ä¸é€‚åˆå•ä¸ªèŠ‚ç‚¹çš„ç£ç›˜ï¼Œæˆ–è€…å¯èƒ½å¤ªæ…¢è€Œæ— æ³•å•ç‹¬æ»¡è¶³æ¥è‡ªå•ä¸ªèŠ‚ç‚¹çš„æœç´¢è¯·æ±‚ã€‚ ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼ŒElasticsearchæä¾›äº†å°†ç´¢å¼•ç»†åˆ†ä¸ºå¤šä¸ªç¢ç‰‡çš„åŠŸèƒ½ã€‚åˆ›å»ºç´¢å¼•æ—¶ï¼Œåªéœ€å®šä¹‰æ‰€éœ€çš„åˆ†ç‰‡æ•°é‡å³å¯ã€‚æ¯ä¸ªåˆ†ç‰‡æœ¬èº«å°±æ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨ä¸”ç‹¬ç«‹çš„â€œç´¢å¼•â€ï¼Œå¯ä»¥æ‰˜ç®¡åœ¨ç¾¤é›†ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šã€‚ åˆ†ç‰‡å¾ˆé‡è¦ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š å®ƒå…è®¸æ‚¨æ°´å¹³åˆ†å‰²&#x2F;ç¼©æ”¾å†…å®¹é‡ å®ƒå…è®¸æ‚¨è·¨ç¢ç‰‡ï¼ˆå¯èƒ½åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼‰åˆ†å¸ƒå’Œå¹¶è¡ŒåŒ–æ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½&#x2F;ååé‡ åˆ†ç‰‡å¦‚ä½•åˆ†å¸ƒä»¥åŠå…¶æ–‡æ¡£å¦‚ä½•èšåˆå›åˆ°æœç´¢è¯·æ±‚ä¸­çš„æœºåˆ¶å®Œå…¨ç”±Elasticsearchç®¡ç†ï¼Œå¹¶ä¸”å¯¹æ‚¨ä½œä¸ºç”¨æˆ·æ˜¯é€æ˜çš„ã€‚ åœ¨éšæ—¶å¯èƒ½å‘ç”Ÿæ•…éšœçš„ç½‘ç»œ&#x2F;äº‘ç¯å¢ƒä¸­ï¼Œéå¸¸æœ‰ç”¨ï¼Œå¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨æ•…éšœè½¬ç§»æœºåˆ¶ï¼Œä»¥é˜²ç¢ç‰‡&#x2F;èŠ‚ç‚¹å› æŸç§åŸå› è„±æœºæˆ–æ¶ˆå¤±ã€‚ä¸ºæ­¤ï¼ŒElasticsearchå…è®¸æ‚¨å°†ç´¢å¼•åˆ†ç‰‡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬åˆ¶ä½œä¸ºæ‰€è°“çš„å‰¯æœ¬åˆ†ç‰‡ï¼ˆç®€ç§°å‰¯æœ¬ï¼‰ã€‚ 4ï¼‰å‰¯æœ¬ï¼ˆreplicaï¼‰ åˆ†ç‰‡å¤„ç†å…è®¸ç”¨æˆ·æ¨é€è¶…è¿‡å•æœºå®¹é‡çš„æ•°æ®è‡³Elasticsearché›†ç¾¤ã€‚å‰¯æœ¬åˆ™è§£å†³äº†è®¿é—®å‹åŠ›è¿‡å¤§æ—¶å•æœºæ— æ³•å¤„ç†æ‰€æœ‰è¯·æ±‚çš„é—®é¢˜ã€‚ åˆ†ç‰‡å¯ä»¥æ˜¯ä¸»åˆ†ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å‰¯æœ¬åˆ†ç‰‡ï¼Œå…¶ä¸­å‰¯æœ¬åˆ†ç‰‡æ˜¯ä¸»åˆ†ç‰‡çš„å®Œæ•´å‰¯æœ¬ã€‚å‰¯æœ¬åˆ†ç‰‡ç”¨äºæœç´¢ï¼Œæˆ–è€…æ˜¯åœ¨åŸæœ‰çš„ä¸»åˆ†ç‰‡ä¸¢å¤±åæˆä¸ºæ–°çš„ä¸»åˆ†ç‰‡ã€‚ æ³¨æ„ï¼šå¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ”¹å˜æ¯ä¸ªåˆ†ç‰‡çš„å‰¯æœ¬åˆ†ç‰‡çš„æ•°é‡ï¼Œå› ä¸ºå‰¯æœ¬åˆ†ç‰‡æ€»æ˜¯å¯ä»¥è¢«åˆ›å»ºå’Œç§»é™¤çš„ã€‚è¿™å¹¶ä¸é€‚ç”¨äºç´¢å¼•åˆ’åˆ†ä¸ºä¸»åˆ†ç‰‡çš„æ•°é‡ï¼Œåœ¨åˆ›å»ºç´¢å¼•ä¹‹å‰ï¼Œå¿…é¡»å†³å®šä¸»åˆ†ç‰‡çš„æ•°é‡ã€‚è¿‡å°‘çš„åˆ†ç‰‡å°†é™åˆ¶å¯æ‰©å±•æ€§ï¼Œä½†æ˜¯è¿‡å¤šçš„åˆ†ç‰‡ä¼šå½±å“æ€§èƒ½ã€‚é»˜è®¤è®¾ç½®çš„5ä»½æ˜¯ä¸€ä¸ªä¸é”™çš„å¼€å§‹ã€‚ 5.1.2 æ–‡æ¡£ã€ç±»å‹ã€ç´¢å¼•åŠæ˜ å°„1ï¼‰æ–‡æ¡£ï¼ˆdocumentï¼‰ Elasticsearchæ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å’Œæœç´¢æ•°æ®çš„æœ€å°å•ä½æ˜¯æ–‡æ¡£ã€‚ åœ¨Elasticsearchä¸­æ–‡æ¡£æœ‰å‡ ä¸ªé‡è¦çš„å±æ€§ã€‚ å®ƒæ˜¯è‡ªæˆ‘åŒ…å«çš„ã€‚ä¸€ç¯‡æ–‡æ¡£åŒæ—¶åŒ…å«å­—æ®µå’Œå®ƒä»¬çš„å–å€¼ã€‚ å®ƒå¯ä»¥æ˜¯å±‚æ¬¡çš„ã€‚æ–‡æ¡£ä¸­è¿˜åŒ…å«æ–°çš„æ–‡æ¡£ï¼Œå­—æ®µè¿˜å¯ä»¥åŒ…å«å…¶ä»–å­—æ®µå’Œå–å€¼ã€‚ä¾‹å¦‚ï¼Œâ€œlocationâ€å­—æ®µå¯ä»¥åŒæ—¶åŒ…å«â€œcityâ€å’Œâ€œstreetâ€œä¸¤ä¸ªå­—æ®µã€‚ å®ƒæ‹¥æœ‰çµæ´»çš„ç»“æ„ã€‚æ–‡æ¡£ä¸ä¾èµ–äºé¢„å…ˆå®šä¹‰çš„æ¨¡å¼ã€‚å¹¶éæ‰€æœ‰çš„æ–‡æ¡£éƒ½éœ€è¦æ‹¥æœ‰ç›¸åŒçš„å­—æ®µï¼Œå®ƒä»¬ä¸å—é™äºåŒä¸€ä¸ªæ¨¡å¼ã€‚ 2ï¼‰ç±»å‹ï¼ˆtypeï¼‰ ç±»å‹æ˜¯æ–‡æ¡£çš„é€»è¾‘å®¹å™¨ï¼Œç±»ä¼¼äºè¡¨æ ¼æ˜¯è¡Œçš„å®¹å™¨ã€‚åœ¨ä¸åŒçš„ç±»å‹ä¸­ï¼Œæœ€å¥½æ”¾å…¥ä¸åŒç»“æ„çš„æ–‡æ¡£ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªç±»å‹å®šä¹‰èšä¼šæ—¶çš„åˆ†ç»„ï¼Œè€Œå¦ä¸€ä¸ªç±»å‹å®šä¹‰äººä»¬å‚åŠ çš„æ´»åŠ¨ã€‚ 3ï¼‰ç´¢å¼•ï¼ˆindexï¼‰ ç´¢å¼•æ˜¯æ˜ å°„ç±»å‹çš„å®¹å™¨ã€‚ä¸€ä¸ªElasticsearchç´¢å¼•æ˜¯ç‹¬ç«‹çš„å¤§é‡çš„æ–‡æ¡£é›†åˆã€‚ æ¯ä¸ªç´¢å¼•å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„åŒç»„æ–‡ä»¶ä¸­ï¼Œç´¢å¼•å­˜å‚¨äº†æ‰€æœ‰æ˜ å°„ç±»å‹çš„å­—æ®µï¼Œè¿˜æœ‰ä¸€äº›è®¾ç½®ã€‚ 4ï¼‰æ˜ å°„ï¼ˆmappingï¼‰ æ‰€æœ‰æ–‡æ¡£åœ¨å†™å…¥ç´¢å¼•å‰éƒ½å°†è¢«åˆ†æï¼Œç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€äº›å‚æ•°ï¼Œå†³å®šå¦‚ä½•å°†è¾“å…¥æ–‡æœ¬åˆ†å‰²ä¸ºè¯æ¡ï¼Œå“ªäº›è¯æ¡åº”è¯¥è¢«è¿‡æ»¤æ‰ï¼Œæˆ–å“ªäº›é™„åŠ å¤„ç†æœ‰å¿…è¦è¢«è°ƒç”¨ï¼ˆæ¯”å¦‚ç§»é™¤HTMLæ ‡ç­¾ï¼‰ã€‚è¿™å°±æ˜¯æ˜ å°„æ‰®æ¼”çš„è§’è‰²ï¼šå­˜å‚¨åˆ†æé“¾æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚ Elasticsearchä¹Ÿæ˜¯åŸºäºLuceneçš„å…¨æ–‡æ£€ç´¢åº“ï¼Œæœ¬è´¨ä¹Ÿæ˜¯å­˜å‚¨æ•°æ®ï¼Œå¾ˆå¤šæ¦‚å¿µä¸MySQLç±»ä¼¼çš„ã€‚ å¯¹æ¯”å…³ç³»ï¼š å…¨æ–‡æ£€ç´¢ å…³ç³»å‹æ•°æ®åº“ ç´¢å¼•åº“ï¼ˆindicesï¼‰ Database æ•°æ®åº“ ç±»å‹ï¼ˆtypeï¼‰ Table æ•°æ®è¡¨ æ–‡æ¡£ï¼ˆdocumentï¼‰ Row è¡Œ åŸŸå­—æ®µï¼ˆFieldï¼‰ Columns åˆ— æ˜ å°„é…ç½®ï¼ˆmappingsï¼‰ æ¯ä¸ªåˆ—çš„çº¦æŸï¼ˆç±»å‹ã€é•¿åº¦ï¼‰ è¯¦ç»†è¯´æ˜ï¼š æ¦‚å¿µ è¯´æ˜ ç´¢å¼•åº“ï¼ˆindicesï¼‰ indicesæ˜¯indexçš„å¤æ•°ï¼Œä»£è¡¨è®¸å¤šç´¢å¼• ç´¢å¼•/ç±»å‹ï¼ˆtypeï¼‰ ç±»å‹æ˜¯æ¨¡æ‹Ÿmysqlä¸­çš„tableæ¦‚å¿µï¼Œä¸€ä¸ªç´¢å¼•åº“ä¸‹å¯ä»¥æœ‰ä¸åŒç±»å‹çš„ç´¢å¼•ï¼ˆç›®å‰ 6.Xä»¥åçš„ç‰ˆæœ¬åªèƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼‰ï¼Œç±»ä¼¼æ•°æ®åº“ä¸­çš„è¡¨æ¦‚å¿µã€‚æ•°æ®åº“è¡¨ä¸­æœ‰è¡¨ ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¡¨ä¸­æ¯ä¸ªå­—æ®µçš„çº¦æŸä¿¡æ¯ï¼›ç´¢å¼•åº“çš„ç±»å‹ä¸­å¯¹åº”è¡¨ç»“æ„çš„å«åšæ˜ å°„(mapping) ï¼Œç”¨æ¥å®šä¹‰æ¯ä¸ªå­—æ®µçš„çº¦æŸã€‚ æ–‡æ¡£ï¼ˆdocumentï¼‰ å­˜å…¥ç´¢å¼•åº“åŸå§‹çš„æ•°æ®ã€‚æ¯”å¦‚æ¯ä¸€æ¡å•†å“ä¿¡æ¯ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ åŸŸå­—æ®µï¼ˆFieldï¼‰ æ–‡æ¡£ä¸­çš„å±æ€§ æ˜ å°„é…ç½®ï¼ˆmappingsï¼‰ å­—æ®µçš„æ•°æ®ç±»å‹ã€å±æ€§ã€æ˜¯å¦ç´¢å¼•ã€æ˜¯å¦å­˜å‚¨ç­‰ç‰¹æ€§ 5.2 åˆ›å»ºç´¢å¼•5.2.1 è¯­æ³•Elasticsearché‡‡ç”¨Resté£æ ¼APIï¼Œå› æ­¤å…¶APIå°±æ˜¯ä¸€æ¬¡httpè¯·æ±‚ï¼Œä½ å¯ä»¥ç”¨ä»»ä½•å·¥å…·å‘èµ·httpè¯·æ±‚ åˆ›å»ºç´¢å¼•çš„è¯·æ±‚æ ¼å¼ï¼š è¯·æ±‚æ–¹å¼ï¼šPUT è¯·æ±‚è·¯å¾„ï¼š&#x2F;ç´¢å¼•å è¯·æ±‚å‚æ•°ï¼šjsonæ ¼å¼ 12345&#123; &quot;settings&quot;: &#123; &quot;å±æ€§å&quot;: &quot;å±æ€§å€¼&quot; &#125; &#125; settingsï¼šå°±æ˜¯ç´¢å¼•åº“è®¾ç½®ï¼Œå…¶ä¸­å¯ä»¥å®šä¹‰ç´¢å¼•åº“çš„å„ç§å±æ€§ï¼Œç›®å‰æˆ‘ä»¬å¯ä»¥ä¸è®¾ç½®ï¼Œéƒ½èµ°é»˜è®¤ã€‚ 5.2.3 ä½¿ç”¨Kibanaåˆ›å»ºkibanaçš„æ§åˆ¶å°ï¼Œå¯ä»¥å¯¹httpè¯·æ±‚è¿›è¡Œç®€åŒ–ï¼Œç¤ºä¾‹ï¼š ç›¸å½“äºæ˜¯çœå»äº†elasticsearchçš„æœåŠ¡å™¨åœ°å€ï¼Œè€Œä¸”è¿˜æœ‰è¯­æ³•æç¤ºï¼Œéå¸¸èˆ’æœã€‚ 5.3 æŸ¥çœ‹ç´¢å¼•åº“ è¯­æ³• Getè¯·æ±‚å¯ä»¥å¸®æˆ‘ä»¬æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯ï¼Œæ ¼å¼ï¼š 1GET /ç´¢å¼•å 5.4 åˆ é™¤ç´¢å¼• è¯­æ³• 1DELETE /ç´¢å¼•å å†æ¬¡æŸ¥çœ‹å°±æ‰¾ä¸åˆ°äº† æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨headæ’ä»¶æ¥å‘ä¸ªè¯·æ±‚ç©ä¸‹ è¿™ä¸ªæŸ¥è¯¢ç´¢å¼•çš„æ¥å£æ˜¯GETè¯·æ±‚ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨æµè§ˆå™¨éƒ½å¯ä»¥å‘é€ å…­ã€ä½¿ç”¨Kibanaå¯¹ç±»å‹åŠæ˜ å°„æ“ä½œæœ‰äº† ç´¢å¼•åº“ ï¼Œç­‰äºæœ‰äº†æ•°æ®åº“ä¸­çš„ database ã€‚æ¥ä¸‹æ¥å°±éœ€è¦ç´¢å¼•åº“ä¸­çš„ ç±»å‹ äº†ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­çš„è¡¨ ã€‚åˆ›å»ºæ•°æ®åº“è¡¨éœ€è¦è®¾ç½®å­—æ®µçº¦æŸï¼Œç´¢å¼•åº“ä¹Ÿä¸€æ ·ï¼Œåœ¨åˆ›å»ºç´¢å¼•åº“çš„ç±»å‹æ—¶ï¼Œéœ€è¦çŸ¥é“è¿™ä¸ªç±»å‹ä¸‹æœ‰å“ªäº›å­—æ®µï¼Œæ¯ä¸ªå­—æ®µæœ‰å“ªäº›çº¦æŸä¿¡æ¯ï¼Œè¿™å°±å«åš å­—æ®µæ˜ å°„(mapping) æ³¨æ„ï¼šElasticsearch7.xå–æ¶ˆäº†ç´¢å¼•typeç±»å‹çš„è®¾ç½®ï¼Œä¸å…è®¸æŒ‡å®šç±»å‹ï¼Œé»˜è®¤ä¸º_docï¼Œä½†å­—æ®µä»ç„¶æ˜¯æœ‰çš„ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®å­—æ®µçš„çº¦æŸä¿¡æ¯ï¼Œå«åšå­—æ®µæ˜ å°„ï¼ˆmappingï¼‰ å­—æ®µçš„çº¦æŸæˆ‘ä»¬åœ¨å­¦ä¹ Luceneä¸­æˆ‘ä»¬éƒ½è§åˆ°è¿‡ï¼ŒåŒ…æ‹¬åˆ°ä¸é™äºï¼š å­—æ®µçš„æ•°æ®ç±»å‹ æ˜¯å¦è¦å­˜å‚¨ æ˜¯å¦è¦ç´¢å¼• æ˜¯å¦åˆ†è¯ åˆ†è¯å™¨æ˜¯ä»€ä¹ˆ ä¸€èµ·æ¥çœ‹ä¸‹åˆ›å»ºçš„è¯­æ³• 6.1 åˆ›å»ºå­—æ®µæ˜ å°„ è¯­æ³• è¯·æ±‚æ–¹å¼ä¾ç„¶æ˜¯PUT å¦‚æœç‰ˆæœ¬æ˜¯6ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¦‚ä¸Šå›¾ï¼Œç»™æŒ‡å®šç´¢å¼•åˆ›å»ºä¸€ä¸ªç±»å‹ï¼Œä¸”å®šä¹‰ç±»å‹å½“ä¸­æœ‰å“ªäº›å­—æ®µï¼Œå­—æ®µçš„çº¦æŸç­‰ç­‰ã€‚å…¶å®åœ¨6ç‰ˆæœ¬å½“ä¸­è™½ç„¶å¯ä»¥æŒ‡å®šç±»å‹åï¼Œä½†ä¸€ä¸ªç´¢å¼•ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªç±»å‹ã€‚åœ¨7ç‰ˆæœ¬ä¹‹åå°†è¿™ä¸ªç±»å‹å®Œå…¨å–æ¶ˆã€‚å³ä½¿æ˜¯å¤è€ç‰ˆæœ¬å¤šç±»å‹æ˜ å°„å­—æ®µä¹Ÿæ˜¯å±äºç´¢å¼•ï¼ˆå› ä¸ºç¬¬äºŒä¸ªç±»å‹ä¸èƒ½åˆ›å»ºå·²ç»å­˜åœ¨çš„å­—æ®µï¼‰ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•ç›¸å½“äºè¡¨ï¼Œç±»å‹åªä¸è¿‡æ˜¯æŒ‰åˆ—åˆ†è¡¨è€Œå·²ï¼Œå®Œå…¨çš„ä¸åŒç»“æ„çš„å®ä½“åº”åˆ†åˆ«åˆ›å»ºç´¢å¼•ã€‚ ç°åœ¨æˆ‘ä½¿ç”¨çš„æ˜¯8ç‰ˆæœ¬ï¼Œæ²¡æœ‰ç±»å‹åæŒ‡å®šã€‚åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ç›´æ¥æŒ‡å®šç´¢å¼•çš„å­—æ®µæ˜ å°„å³å¯ã€‚goodsç´¢å¼•ä¸‹å°±æ˜¯mapping 12345678910111213141516171819PUT /goods&#123; &quot;mappings&quot;: &#123; &quot;properties&quot;: &#123; &quot;good_id&quot;: &#123; &quot;type&quot;: &quot;long&quot; &#125;, &quot;good_name&quot;: &#123; &quot;type&quot;: &quot;text&quot;, &quot;index&quot;: true, &quot;analyzer&quot;:&quot;ik_max_word&quot; &#125;, &quot;good_img&quot;: &#123; &quot;type&quot;: &quot;keyword&quot;, &quot;index&quot;: false &#125; &#125; &#125;&#125; å·²ç»åˆ›å»ºäº†ç´¢å¼•ï¼Œæ€ä¹ˆæ·»åŠ å­—æ®µå‘¢ ä¸Šé¢æˆ‘ä»¬æ˜¯ç›´æ¥åœ¨åˆ›å»ºä¸€ä¸ªç´¢å¼•æ—¶æŒ‡å®šäº†å­—æ®µæ˜ å°„ï¼Œä½†å¦‚æœå·²ç»åˆ›å»ºäº†ç´¢å¼•ï¼Œç°åœ¨è¦å»ç»™å·²å­˜åœ¨çš„ç´¢å¼•æ·»åŠ å­—æ®µå¯é€šè¿‡å¦‚ä¸‹æ¥å£è¿›è¡Œ 12345678PUT /goods/_mapping&#123; &quot;properties&quot;: &#123; &quot;price&quot;: &#123; &quot;type&quot;: &quot;float&quot; &#125; &#125;&#125; 6.2 æŸ¥è¯¢æ˜ å°„å…³ç³» è¯­æ³• 1GET /ç´¢å¼•å/_mapping å¦‚æœæ˜¯6ç‰ˆæœ¬åŠä»¥ä¸‹ç‰ˆæœ¬è¿˜å¯ä»¥æŒ‡å®šç±»å‹å 1GET /ç´¢å¼•å/_mapping/ç±»å‹å ç¤ºä¾‹ 1GET /jasper/_mapping 6.3 æ˜ å°„å±æ€§è¯¦è§£6.3.1 typeElasticsearchä¸­æ”¯æŒçš„æ•°æ®ç±»å‹éå¸¸ä¸°å¯Œï¼š ä¸‹é¢é“¾æ¥ä¸ºå®˜ç½‘çš„å…¨éƒ¨ç±»å‹ä»‹ç» https://www.elastic.co/guide/en/elasticsearch/reference/8.0/mapping-types.html ä¸€çº§åˆ†ç±» äºŒçº§åˆ†ç±» å…·ä½“ç±»å‹ ä»‹ç» æ ¸å¿ƒç±»å‹ å­—ç¬¦ä¸²ç±»å‹ text,keyword ç»“æ„åŒ–æœç´¢ï¼Œå…¨æ–‡æ–‡æœ¬æœç´¢ã€èšåˆã€æ’åºç­‰ æ•´æ•°ç±»å‹ interger,long,short,byte å­—æ®µçš„é•¿åº¦è¶ŠçŸ­ï¼Œç´¢å¼•å’Œæœç´¢çš„æ•ˆç‡è¶Šé«˜ æµ®ç‚¹å‹ double,float.half_float,scaled_float å¸ƒå°”å‹ boolean æ—¥æœŸå‹ date èŒƒå›´å‹ range äºŒè¿›åˆ¶ç±»å‹ binary è¯¥binaryç±»å‹æ¥å—äºŒè¿›åˆ¶å€¼ä½œä¸ºBase64ç¼–ç çš„å­—ç¬¦ä¸²ã€‚è¯¥å­—æ®µé»˜è®¤çš„æƒ…å†µä¸‹ä¸å­˜å‚¨ï¼ˆstoreï¼‰,å¹¶ä¸”ä¸å¯æœç´¢ å¤åˆç±»å‹ æ•°ç»„ç±»å‹ array å¯¹è±¡ç±»å‹ object ç”¨äºå•ä¸ªJSONå¯¹è±¡ åµŒå¥—ç±»å‹ nested ç”¨äºJSONå¯¹è±¡æ•°ç»„ åœ°ç†ç±»å‹ åœ°ç†åæ ‡ç±»å‹ geo_point ç»çº¬åº¦ åœ°ç†åœ°å›¾ geo_shape ç”¨äºå¤šè¾¹å½¢ç­‰å¤æ‚å½¢çŠ¶ ç‰¹æ®Šç±»å‹ IPç±»å‹ ip ç”¨äºIPv4å’ŒIPv6 åœ°ç†åœ°å›¾ geo_shape ç”¨äºå¤šè¾¹å½¢ç­‰å¤æ‚å½¢çŠ¶ åœ°ç†åœ°å›¾ geo_shape ç”¨äºå¤šè¾¹å½¢ç­‰å¤æ‚å½¢çŠ¶ æå‡ ä¸ªå…³é”®çš„ï¼š å­—ç¬¦ä¸²ç±»å‹åˆåˆ†ä¸¤ç§ï¼š textï¼šä½¿ç”¨æ–‡æœ¬æ•°æ®ç±»å‹çš„å­—æ®µï¼Œå®ƒä»¬ä¼šè¢«åˆ†è¯ï¼Œæ–‡æœ¬å­—æ®µä¸ç”¨äºæ’åºï¼Œå¾ˆå°‘ç”¨äºèšåˆï¼Œå¦‚æ–‡ç« æ ‡é¢˜ã€æ­£æ–‡ã€‚ keywordï¼šå…³é”®å­—æ•°æ®ç±»å‹ï¼Œç”¨äºç´¢å¼•ç»“æ„åŒ–å†…å®¹çš„å­—æ®µï¼Œä¸ä¼šè¢«åˆ†è¯ï¼Œå¿…é¡»å®Œæ•´åŒ¹é…çš„å†…å®¹ï¼Œå¦‚é‚®ç®±ï¼Œèº«ä»½è¯å·ã€‚æ”¯æŒèšåˆ è¿™ä¸¤ç§ç±»å‹éƒ½æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œä½†æœ‰çš„æ—¶å€™ï¼Œå¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²å­—æ®µï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›ä»–ä¸¤ç§éƒ½æ”¯æŒï¼Œæ­¤æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å…¶å¤šå­—æ®µç‰¹æ€§ 123456789101112&quot;properties&quot;:&#123; &quot;title&quot;:&#123; &quot;type&quot;:&quot;text&quot;, &quot;analyzer&quot;:&quot;ik_max_word&quot;, &quot;fields&quot;:&#123; &quot;sort&quot;:&#123; &quot;type&quot;:&quot;keyword&quot; &#125; &#125;, &quot;index&quot;:true &#125;&#125; Numericalï¼šæ•°å€¼ç±»å‹ï¼Œåˆ†ä¸¤ç±» åŸºæœ¬æ•°æ®ç±»å‹ï¼šlongã€intergerã€shortã€byteã€doubleã€floatã€half_float double åŒç²¾åº¦64ä½ float å•ç²¾åº¦32ä½ half_float åŠç²¾åº¦16ä½ æµ®ç‚¹æ•°çš„é«˜ç²¾åº¦ç±»å‹ï¼šscaled_float å¸¦æœ‰ç¼©æ”¾å› å­çš„ç¼©æ”¾ç±»å‹æµ®ç‚¹æ•°ï¼Œä¾é ä¸€ä¸ª long æ•°å­—ç±»å‹é€šè¿‡ä¸€ä¸ªå›ºå®šçš„( double ç±» å‹)ç¼©æ”¾å› æ•°è¿›è¡Œç¼©æ”¾. éœ€è¦æŒ‡å®šä¸€ä¸ªç²¾åº¦å› å­ï¼Œæ¯”å¦‚10æˆ–100ã€‚elasticsearchä¼šæŠŠçœŸå®å€¼ä¹˜ä»¥è¿™ä¸ªå› å­åå­˜å‚¨ï¼Œå–å‡ºæ—¶å†è¿˜åŸã€‚ Dateï¼šæ—¥æœŸç±»å‹ elasticsearchå¯ä»¥å¯¹æ—¥æœŸæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²å­˜å‚¨ï¼Œä½†æ˜¯å»ºè®®æˆ‘ä»¬å­˜å‚¨ä¸ºæ¯«ç§’å€¼ï¼Œå­˜å‚¨ä¸ºlongï¼ŒèŠ‚çœç©ºé—´ã€‚ Arrayæ•°ç»„ç±»å‹ è¿›è¡ŒåŒ¹é…æ—¶ï¼Œä»»æ„ä¸€ä¸ªå…ƒç´ æ»¡è¶³ï¼Œéƒ½è®¤ä¸ºæ»¡è¶³ æ’åºæ—¶ï¼Œå¦‚æœå‡åºåˆ™ç”¨æ•°ç»„ä¸­çš„æœ€å°å€¼æ¥æ’åºï¼Œå¦‚æœé™åºåˆ™ç”¨æ•°ç»„ä¸­çš„æœ€å¤§å€¼æ¥æ’åº Objectï¼šå¯¹è±¡ 6.3.1 indexindexå½±å“å­—æ®µçš„ç´¢å¼•æƒ…å†µã€‚ trueï¼šå­—æ®µä¼šè¢«ç´¢å¼•ï¼Œåˆ™å¯ä»¥ç”¨æ¥è¿›è¡Œæœç´¢è¿‡æ»¤ã€‚é»˜è®¤å€¼å°±æ˜¯trueï¼Œåªæœ‰å½“æŸä¸€ä¸ªå­—æ®µçš„indexå€¼è®¾ç½®ä¸ºtrueæ—¶ï¼Œæ£€ç´¢ESæ‰å¯ä»¥ä½œä¸ºæ¡ä»¶å»æ£€ç´¢ã€‚ falseï¼šå­—æ®µä¸ä¼šè¢«ç´¢å¼•ï¼Œä¸èƒ½ç”¨æ¥æœç´¢ indexçš„é»˜è®¤å€¼å°±æ˜¯trueï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸è¿›è¡Œä»»ä½•é…ç½®ï¼Œæ‰€æœ‰å­—æ®µéƒ½ä¼šè¢«ç´¢å¼•ã€‚ ä½†æ˜¯æœ‰äº›å­—æ®µæ˜¯æˆ‘ä»¬ä¸å¸Œæœ›è¢«ç´¢å¼•çš„ï¼Œæ¯”å¦‚å•†å“çš„å›¾ç‰‡ä¿¡æ¯ï¼ˆURLï¼‰ï¼Œå°±éœ€è¦æ‰‹åŠ¨è®¾ç½®indexä¸ºfalseã€‚ 6.3.2 storeæ˜¯å¦å°†æ•°æ®è¿›è¡Œé¢å¤–å­˜å‚¨ã€‚ åœ¨å­¦ä¹ luceneæ—¶ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœä¸€ä¸ªå­—æ®µçš„storeè®¾ç½®ä¸ºfalseï¼Œé‚£ä¹ˆåœ¨æ–‡æ¡£åˆ—è¡¨ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªå­—æ®µçš„å€¼ï¼Œç”¨æˆ·çš„æœç´¢ç»“æœä¸­ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚ ä½†æ˜¯åœ¨Elasticsearchä¸­ï¼Œå³ä¾¿storeè®¾ç½®ä¸ºfalseï¼Œä¹Ÿå¯ä»¥æœç´¢åˆ°ç»“æœã€‚ åŸå› æ˜¯Elasticsearchåœ¨åˆ›å»ºæ–‡æ¡£ç´¢å¼•æ—¶ï¼Œä¼šå°†æ–‡æ¡£ä¸­çš„åŸå§‹æ•°æ®å¤‡ä»½ï¼Œä¿å­˜åˆ°ä¸€ä¸ªå«åš _source çš„å±æ€§ä¸­ã€‚è€Œä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿‡æ»¤ _source æ¥é€‰æ‹©å“ªäº›è¦æ˜¾ç¤ºï¼Œå“ªäº›ä¸æ˜¾ç¤ºã€‚ è€Œå¦‚æœè®¾ç½®storeä¸ºtrueï¼Œå°±ä¼šåœ¨ _source ä»¥å¤–é¢å¤–å­˜å‚¨ä¸€ä»½æ•°æ®ï¼Œå¤šä½™ï¼Œå› æ­¤ä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šå°†storeè®¾ç½®ä¸ºfalseï¼Œäº‹å®ä¸Šï¼Œstoreçš„é»˜è®¤å€¼å°±æ˜¯falseã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯¹ store æŸä¸ªé¢†åŸŸå¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„æ–‡æ¡£åŒ…å«ä¸€ä¸ª title ï¼Œä¸€ä¸ªdate å’Œä¸€ä¸ªéå¸¸å¤§çš„ content å­—æ®µï¼Œåˆ™å¯èƒ½åªæƒ³æ£€ç´¢the title å’Œthe date è€Œä¸å¿…ä»ä¸€ä¸ªå¤§ _sourceå­—æ®µä¸­æå–è¿™äº›å­—æ®µï¼š 1234567891011121314151617181920PUT my_index&#123; &quot;mappings&quot;:&#123; &quot;_doc&quot;:&#123; &quot;properties&quot;:&#123; &quot;title&quot;:&#123; &quot;type&quot;:&quot;text&quot;, &quot;store&quot;:true &#125;, &quot;date&quot;:&#123; &quot;type&quot;:&quot;date&quot;, &quot;store&quot;:true &#125;, &quot;content&quot;:&#123; &quot;type&quot;:&quot;text&quot; &#125; &#125; &#125; &#125;&#125; 6.3.3 boostç½‘ç«™æƒé‡:ç½‘ç«™æƒé‡æ˜¯æŒ‡æœç´¢å¼•æ“ç»™ç½‘ç«™ï¼ˆåŒ…æ‹¬ç½‘é¡µï¼‰èµ‹äºˆä¸€å®šçš„æƒå¨å€¼ï¼Œå¯¹ç½‘ç«™ï¼ˆå«ç½‘é¡µï¼‰æƒå¨çš„è¯„ä¼°è¯„ä»·ã€‚ä¸€ ä¸ªç½‘ç«™æƒé‡è¶Šé«˜ï¼Œåœ¨æœç´¢å¼•æ“æ‰€å çš„ä»½é‡è¶Šå¤§ï¼Œåœ¨æœç´¢å¼•æ“æ’åå°±è¶Šå¥½ã€‚æé«˜ç½‘ç«™æƒé‡ï¼Œä¸ä½†åˆ©äºç½‘ç«™ï¼ˆåŒ…æ‹¬ç½‘ é¡µï¼‰åœ¨æœç´¢å¼•æ“çš„æ’åæ›´é å‰ï¼Œè¿˜èƒ½æé«˜æ•´ç«™çš„æµé‡ï¼Œæé«˜ç½‘ç«™ä¿¡ä»»åº¦ã€‚æ‰€ä»¥æé«˜ç½‘ç«™çš„æƒé‡å…·æœ‰ç›¸å½“é‡è¦çš„æ„ ä¹‰ã€‚ æƒé‡å³ç½‘ç«™åœ¨SEOä¸­çš„é‡è¦æ€§ï¼Œæƒå¨æ€§ã€‚è‹±æ–‡ï¼šPage Strengthã€‚1ã€æƒé‡ä¸ç­‰äºæ’å 2ã€æƒé‡å¯¹æ’åæœ‰ç€ éå¸¸å¤§çš„å½±å“ 3ã€æ•´ç«™æƒé‡çš„æé«˜æœ‰åˆ©äºå†…é¡µçš„æ’åã€‚ æƒé‡ï¼Œæ–°å¢æ•°æ®æ—¶ï¼Œå¯ä»¥æŒ‡å®šè¯¥æ•°æ®çš„æƒé‡ï¼Œæƒé‡è¶Šé«˜ï¼Œå¾—åˆ†è¶Šé«˜ï¼Œæ’åè¶Šé å‰ã€‚ 12345678910111213141516PUT my_index&#123; &quot;mappings&quot;:&#123; &quot;_doc&quot;:&#123; &quot;properties&quot;:&#123; &quot;title&quot;:&#123; &quot;type&quot;:&quot;text&quot;, &quot;boost&quot;:2 &#125;, &quot;content&quot;:&#123; &quot;type&quot;:&quot;text&quot; &#125; &#125; &#125; &#125;&#125; title å­—æ®µä¸Šçš„åŒ¹é…é¡¹çš„æƒé‡æ˜¯å­—æ®µä¸Šçš„åŒ¹é…é¡¹çš„æƒé‡çš„ä¸¤å€ content ï¼Œé»˜è®¤ boost å€¼ä¸º 1.0 ã€‚æå‡ä»…é€‚ç”¨äºTermæŸ¥è¯¢ï¼ˆä¸æå‡prefixï¼Œrangeå’Œæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ã€‚ ä¸ƒã€ä½¿ç”¨Kibanaå¯¹æ–‡æ¡£æ“ä½œæ–‡æ¡£ï¼Œå³ç´¢å¼•åº“ä¸­æŸä¸ªç±»å‹ä¸‹çš„æ•°æ®ï¼Œä¼šæ ¹æ®è§„åˆ™åˆ›å»ºç´¢å¼•ï¼Œå°†æ¥ç”¨æ¥æœç´¢ã€‚å¯ä»¥ç±»æ¯”åšæ•°æ®åº“ä¸­çš„æ¯ä¸€è¡Œæ•°æ®ã€‚ 7.1 æ–°å¢æ–‡æ¡£7.1.1 æ–°å¢å¹¶éšæœºç”Ÿæˆidé€šè¿‡POSTè¯·æ±‚ï¼Œå¯ä»¥å‘ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç´¢å¼•åº“ä¸­æ·»åŠ æ–‡æ¡£æ•°æ®ã€‚ è¯­æ³•ï¼šå¦‚æœæ˜¯6ç‰ˆæœ¬æŠŠ_docæ¢æˆç±»å‹åï¼ˆåœ¨å–æ¶ˆäº†ç±»å‹çš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç”¨ _doc ä»£æ›¿ç›¸å½“äºé»˜è®¤ç±»å‹ï¼‰ 1234POST /ç´¢å¼•å/_doc&#123; â€œkey&quot;:&quot;value&quot;&#125; 7.2 æŸ¥çœ‹æ–‡æ¡£æ ¹æ®resté£æ ¼ï¼Œæ–°å¢æ˜¯postï¼ŒæŸ¥è¯¢åº”è¯¥æ˜¯getï¼Œä¸è¿‡æŸ¥è¯¢ä¸€èˆ¬éƒ½éœ€è¦æ¡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠåˆšåˆšç”Ÿæˆæ•°æ®çš„idå¸¦ä¸Šã€‚ é€šè¿‡kibanaæŸ¥çœ‹æ•°æ®ï¼š 1GET /ç´¢å¼•/_doc/æ–‡æ¡£id _source ï¼šæºæ–‡æ¡£ä¿¡æ¯ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨é‡Œé¢ã€‚ _id ï¼šè¿™æ¡æ–‡æ¡£çš„å”¯ä¸€æ ‡ç¤º è‡ªåŠ¨ç”Ÿæˆçš„id,é•¿åº¦ä¸º20ä¸ªå­—ç¬¦ï¼ŒURLå®‰å…¨ï¼Œbase64ç¼–ç ï¼ŒGUIDï¼ˆå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰,åˆ†å¸ƒå¼ç³»ç»Ÿå¹¶è¡Œç”Ÿæˆæ—¶ä¸å¯èƒ½ä¼šå‘ç”Ÿå†²çª åœ¨å®é™…å¼€å‘ä¸­ä¸å»ºè®®ä½¿ç”¨ESç”Ÿæˆçš„IDï¼Œå¤ªé•¿ä¸”ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œæ£€ç´¢æ—¶æ•ˆç‡ä½ã€‚å»ºè®®ï¼šå°†æ•°æ®è¡¨ä¸­å”¯ä¸€çš„IDï¼Œä½œä¸ºESçš„æ–‡æ¡£ID 7.3 æ–°å¢æ–‡æ¡£å¹¶è‡ªå®šä¹‰idå¦‚æœæˆ‘ä»¬æƒ³è¦è‡ªå·±æ–°å¢çš„æ—¶å€™æŒ‡å®šidï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š 1234POST /ç´¢å¼•å/_doc/æ–‡æ¡£id&#123; ...&#125; ç¤ºä¾‹ï¼š 7.4 ä¿®æ”¹æ•°æ®PUTï¼šä¿®æ”¹æ–‡æ¡£ POSTï¼šæ–°å¢æ–‡æ¡£ æŠŠåˆšæ‰æ–°å¢çš„è¯·æ±‚æ–¹å¼æ”¹ä¸ºPUTï¼Œå°±æ˜¯ä¿®æ”¹äº†ã€‚ä¸è¿‡ä¿®æ”¹å¿…é¡»æŒ‡å®šæ–‡æ¡£id idå¯¹åº”æ–‡æ¡£å­˜åœ¨ï¼Œåˆ™ä¿®æ”¹ idå¯¹åº”æ–‡æ¡£ä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢ ç¤ºä¾‹1ï¼š æŒ‡å®šæ–‡æ¡£id 002ä¸å­˜åœ¨ï¼Œåˆ™PUTä¼šæ–°å¢ ç¤ºä¾‹2ï¼š æŒ‡å®šçš„002å­˜åœ¨åˆ™æ˜¯ä¿®æ”¹ 7.5 åˆ é™¤æ•°æ® è¯­æ³• 1DELETE /ç´¢å¼•å/ç±»å‹å/idå€¼ ç¤ºä¾‹ 7.6 æ™ºèƒ½åˆ¤æ–­åˆšåˆšæˆ‘ä»¬åœ¨æ–°å¢æ•°æ®æ—¶ï¼Œæ·»åŠ çš„å­—æ®µéƒ½æ˜¯æå‰åœ¨ç±»å‹ä¸­å®šä¹‰è¿‡çš„ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ çš„å­—æ®µå¹¶æ²¡æœ‰æå‰å®šä¹‰è¿‡ï¼Œèƒ½å¤ŸæˆåŠŸå—ï¼Ÿ äº‹å®ä¸ŠElasticsearchéå¸¸æ™ºèƒ½ï¼Œä½ ä¸éœ€è¦ç»™ç´¢å¼•åº“è®¾ç½®ä»»ä½•mappingæ˜ å°„ï¼Œå®ƒä¹Ÿå¯ä»¥æ ¹æ®ä½ è¾“å…¥çš„æ•°æ®æ¥åˆ¤æ–­ç±»å‹ï¼ŒåŠ¨æ€æ·»åŠ æ•°æ®æ˜ å°„ã€‚ æµ‹è¯•ä¸€ä¸‹ï¼š descä¸dateéƒ½æ˜¯æ²¡æœ‰åœ¨æ˜ å°„é‡Œé…ç½®è¿‡çš„ çœ‹ä¸‹ç°åœ¨goodsç´¢å¼•çš„æ˜ å°„æƒ…å†µ æ·»åŠ äº†ä¸¤æ¡æ˜ å°„ï¼Œä¸”è¿ç±»å‹éƒ½è‡ªåŠ¨è¯†åˆ«äº†ã€‚ä¸€èˆ¬ä¼šé€‰æ‹©åŒç±»å‹ä¸­æœ€å¤§çš„ï¼Œæ¯”å¦‚ä½ çš„å­—æ®µå€¼æ˜¯æ•´å‹ï¼Œé‚£ä¹ˆè‡ªåŠ¨æ·»åŠ æ˜ å°„æ—¶ä¼šé…ç½®æˆlongç±»å‹ å½“æ˜¯å­—ç¬¦ä¸²ç±»å‹æ—¶ï¼ŒESæ— æ³•æ™ºèƒ½åˆ¤æ–­å°±ä¼šä¸¤ä¸ªç±»å‹éƒ½è®¾ç½® 123456789&quot;desc&quot; : &#123; &quot;type&quot; : &quot;text&quot;, &quot;fields&quot; : &#123; &quot;keyword&quot; : &#123; &quot;type&quot; : &quot;keyword&quot;, &quot;ignore_above&quot; : 256 &#125; &#125;&#125;, è¿™ç§æ™ºèƒ½æ˜ å°„ï¼Œåº•å±‚åŸç†æ˜¯åŠ¨æ€æ¨¡æ¿æ˜ å°„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿®æ”¹è¿™ç§æ™ºèƒ½æ˜ å°„çš„è§„åˆ™ï¼Œå…¶å®åªè¦ä¿®æ”¹åŠ¨æ€æ¨¡æ¿å³å¯ï¼ 7.7 åŠ¨æ€æ˜ å°„æ¨¡æ¿ 1ï¼‰æ¨¡æ¿åç§°ï¼Œéšä¾¿èµ· 2ï¼‰åŒ¹é…æ¡ä»¶ï¼Œå‡¡æ˜¯ç¬¦åˆæ¡ä»¶çš„æœªå®šä¹‰å­—æ®µï¼Œéƒ½ä¼šæŒ‰ç…§è¿™ä¸ªè§„åˆ™æ¥æ˜ å°„ 3ï¼‰æ˜ å°„è§„åˆ™ï¼ŒåŒ¹é…æˆåŠŸåçš„æ˜ å°„è§„åˆ™ ä¸¾ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰æœªæ˜ å°„çš„stringç±»å‹æ•°æ®è‡ªåŠ¨æ˜ å°„ä¸ºkeywordç±»å‹ï¼š 123456789101112131415PUT /goods/_mapping&#123; &quot;dynamic_templates&quot;:[ &#123; &quot;strings&quot;:&#123; &quot;match_mapping_type&quot;:&quot;string&quot;, &quot;mapping&quot;:&#123; &quot;type&quot;:&quot;keyword&quot;, &quot;index&quot;:false, &quot;store&quot;:true &#125; &#125; &#125; ]&#125; å¦‚å›¾ç»™goodsç´¢å¼•çš„æ˜ å°„é…ç½®äº†åä¸ºstringsçš„åŠ¨æ€æ˜ å°„æ¨¡æ¿ï¼Œè§„åˆ™æ˜¯åªè¦æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå°±å°†å…¶è®¾ç½®ä¸ºkeywordç±»å‹ä¸”ç»§ç»­é¢å¤–å­˜å‚¨å¹¶ä¸éœ€è¦ç´¢å¼• æµ‹è¯• æ–°å¢æ–‡æ¡£äº§ç”Ÿçš„æ–°å­—æ®µï¼Œé…è‡ªåŠ¨æ·»åŠ æ˜ å°„ä¸”å’Œæˆ‘ä»¬è®¾å®šçš„ä¸€æ ·è€Œä¸æ˜¯é»˜è®¤çš„textä¸keywordå…±å­˜ å…«ã€æŸ¥è¯¢ï¼ˆé‡ç‚¹ï¼‰8.1 åŸºç¡€æŸ¥è¯¢ åŸºæœ¬è¯­æ³• 12345678GET /ç´¢å¼•å/_search &#123; &quot;query&quot;:&#123; &quot;æŸ¥è¯¢ç±»å‹&quot;:&#123; &quot;æŸ¥è¯¢æ¡ä»¶&quot;:&quot;æŸ¥è¯¢æ¡ä»¶å€¼&quot; &#125; &#125; &#125; è¿™é‡Œçš„queryä»£è¡¨ä¸€ä¸ªæŸ¥è¯¢å¯¹è±¡ï¼Œé‡Œé¢å¯ä»¥æœ‰ä¸åŒçš„æŸ¥è¯¢å±æ€§ æŸ¥è¯¢ç±»å‹ï¼š ä¾‹å¦‚ï¼š match_all ï¼Œ match ï¼Œ term ï¼Œ range ç­‰ç­‰ æŸ¥è¯¢æ¡ä»¶ï¼šæŸ¥è¯¢æ¡ä»¶ä¼šæ ¹æ®ç±»å‹çš„ä¸åŒï¼Œå†™æ³•ä¹Ÿæœ‰å·®å¼‚ï¼Œåé¢è¯¦ç»†è®²è§£ 8.1.1 æŸ¥è¯¢æ‰€æœ‰ï¼ˆmatch_allï¼‰ ç¤ºä¾‹ 123456GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;&#125; queryï¼šä»£è¡¨æŸ¥è¯¢å¯¹è±¡ match_allï¼šä»£è¡¨æŸ¥è¯¢æ‰€æœ‰ **tookï¼š**æŸ¥è¯¢èŠ±è´¹æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ **time_outï¼š**æ˜¯å¦è¶…æ—¶ **_shardsï¼š**åˆ†ç‰‡ä¿¡æ¯ **hitsï¼š**æœç´¢ç»“æœæ€»è§ˆå¯¹è±¡ **totalï¼š**æœç´¢åˆ°çš„æ€»æ¡æ•° **max_scoreï¼š**æ‰€æœ‰ç»“æœä¸­æ–‡æ¡£å¾—åˆ†çš„æœ€é«˜åˆ† **hitsï¼š**æœç´¢ç»“æœçš„æ–‡æ¡£å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€æ¡æœç´¢åˆ°çš„æ–‡æ¡£ä¿¡æ¯ **_indexï¼š**ç´¢å¼•åº“ **_typeï¼š**æ–‡æ¡£ç±»å‹ **_idï¼š**æ–‡æ¡£id **_scoreï¼š**æ–‡æ¡£å¾—åˆ† **_sourceï¼š**æ–‡æ¡£çš„æºæ•°æ® æ–‡æ¡£å¾—åˆ†ï¼šä½¿ç”¨ESæ—¶ï¼Œå¯¹äºæŸ¥è¯¢å‡ºçš„æ–‡æ¡£æ— ç–‘ä¼šæœ‰æ–‡æ¡£ç›¸ä¼¼åº¦ä¹‹åˆ«ã€‚è€Œç†æƒ³çš„æ’åºæ˜¯å’ŒæŸ¥è¯¢æ¡ä»¶ç›¸å…³æ€§è¶Šé«˜æ’åºè¶Šé å‰ï¼Œè€Œè¿™ä¸ªæ’åºçš„ä¾æ®å°±æ˜¯_score 8.1.2 åŒ¹é…æŸ¥è¯¢ï¼ˆmatchï¼‰orå…³ç³» match ç±»å‹æŸ¥è¯¢ï¼Œä¼šæŠŠæŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ï¼Œç„¶åè¿›è¡ŒæŸ¥è¯¢,å¤šä¸ªè¯æ¡ä¹‹é—´æ˜¯orçš„å…³ç³» 12345678GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;good_name&quot;: &quot;å°ç±³&quot; &#125; &#125;&#125; åŒ¹é…good_nameâ€å°ç±³â€œå¾ˆæ˜¾ç„¶æ˜¯å¯ä»¥åŒ¹é…åˆ°ä¹‹å‰çš„ä¸¤æ¡æ•°æ®ã€‚ä½†ä¸èƒ½ä½“ç³»åˆ†è¯åŒ¹é…æœ€ååœ¨orçš„å…³ç³»ã€‚æˆ‘ä»¬è¿™æ¬¡åŒ¹é…å°ç±³proçœ‹æ•ˆæœ å°ç±³åŒ¹é…åˆ°äº†ä¸¤æ¡ï¼ŒproåŒ¹é…åˆ°äº†ä¸€æ¡ã€‚ä¸€å…±ä¸‰æ¡æ•°æ® andå…³ç³» æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ›´ç²¾ç¡®æŸ¥æ‰¾ï¼šæ¯”å¦‚åœ¨ç”µå•†å¹³å°ç²¾ç¡®æœç´¢å•†å“æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªå…³ç³»ï¼ˆæŸ¥è¯¢æ¡ä»¶åˆ‡åˆ†è¯ä¹‹åçš„å…³ç³»ï¼‰å˜æˆ and ï¼ˆæ—¢è¦æ»¡è¶³ä½ ï¼Œåˆè¦æ»¡è¶³æˆ‘ï¼‰ï¼Œå¯ä»¥è¿™æ ·åšï¼š 1234567891011GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;good_name&quot;: &#123; &quot;query&quot;: &quot;å°ç±³pro&quot; , &quot;operator&quot;: &quot;and&quot; &#125; &#125; &#125;&#125; è¿™æ ·ä¹Ÿå°±æ˜¯ä¸€æ¡æ–‡æ¡£çš„good_nameå­—æ®µçš„å€¼åˆ†è¯åå¾—åŒæ—¶æ‹¥æœ‰å°ç±³ä»¥åŠproè¯æ¡æ‰èƒ½è¢«æ£€ç´¢ï¼Œå½“å‰æ˜¯æ²¡æœ‰çš„ 8.1.3 è¯æ¡åŒ¹é…ï¼ˆtermï¼‰term æŸ¥è¯¢è¢«ç”¨äºç²¾ç¡®å€¼åŒ¹é…ï¼Œè¿™äº›ç²¾ç¡®å€¼å¯èƒ½æ˜¯æ•°å­—ã€æ—¶é—´ã€å¸ƒå°”æˆ–è€…é‚£äº›æœªåˆ†è¯çš„å­—ç¬¦ä¸². åæ­£ä¸€å¥è¯ï¼Œä¸å¯¹æœç´¢è¯è¿›è¡Œåˆ†è¯ï¼Œå°±ç”¨å®Œæ•´çš„æœç´¢è¯åŒ¹é…ç´¢å¼•è¯æ¡ å¦‚æœæœç´¢å°ç±³å°±ç”¨å°ç±³å»åŒ¹é…ï¼Œé¢„è®¡åŒ¹é…2æ¡ï¼Œå¦‚æœæœç´¢æ‰‹æœºå°ç±³ï¼Œå°±å»åŒ¹é…æ‰‹æœºå°ç±³è¿™ä¸ªè¯æ¡å¾ˆæ˜¾ç„¶æŸ¥ä¸åˆ°ã€‚å› ä¸ºæ–‡æ¡£çš„å±æ€§å€¼å³ä½¿åŒ…å«æ‰‹æœºå°ç±³ä½†ä¹Ÿä¼šå˜æˆæ‰‹æœº å°ç±³ ä¸¤ä¸ªè¯æ¡ã€‚ 12345678GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;term&quot;: &#123; &quot;good_name&quot;: &quot;æ‰‹æœºå°ç±³&quot; &#125; &#125;&#125; å› æ­¤å¦‚æœæˆ‘ç”¨termæŸ¥è¯¢æ˜¯ä¸åˆ†è¯çš„ï¼Œé‚£ä¹ˆæ–‡æ¡£çš„å­—æ®µå†…å®¹æ˜¯åˆ†è¯çš„å°±æ²¡æœ‰æ„ä¹‰ã€‚æ‰€ä»¥æ‰è¯´ä¸€èˆ¬ç”¨è¿™ä¸ªæŸ¥çš„å­—æ®µéƒ½æ˜¯ä¸åˆ†è¯çš„æ¯”å¦‚æ•°å­—æˆ–è€…keywordè¿™ç§å­—æ®µ 8.1.4 å¸ƒå°”ç»„åˆï¼ˆboolï¼‰bool æŠŠå„ç§å…¶å®ƒæŸ¥è¯¢é€šè¿‡ must ï¼ˆä¸ï¼‰ã€ must_not ï¼ˆéï¼‰ã€ should ï¼ˆæˆ–ï¼‰çš„æ–¹å¼è¿›è¡Œç»„åˆ 12345678910111213141516171819202122GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;bool&quot;: &#123; &quot;must&quot;: [ &#123;&quot;match&quot;: &#123; &quot;good_name&quot;: &quot;å°ç±³&quot; &#125;&#125; ], &quot;must_not&quot;: [ &#123;&quot;match&quot;: &#123; &quot;good_name&quot;: &quot;æ‰‹æœº&quot; &#125;&#125; ], &quot;should&quot;: [ &#123;&quot;match&quot;: &#123; &quot;good_name&quot;: &quot;pro&quot; &#125;&#125; ] &#125; &#125;&#125; åŒ¹é…åˆ°å°ç±³çš„æ˜¯å¿…é¡»çš„ï¼ŒåŒ¹é…æ‰‹æœºè¯æ¡çš„å¿…é¡»æ²¡æœ‰ï¼Œpro æœ‰å’Œæ²¡æœ‰éƒ½å¯ä»¥ã€‚æœ€åå¾—åˆ°çš„å°±æ˜¯æ•°ç å°ç±³12è€Œä¸ä¼šæœ‰æ‰‹æœºå°ç±³ 8.1.5 èŒƒå›´æŸ¥è¯¢ï¼ˆrangeï¼‰rangeæŸ¥è¯¢æ‰¾å‡ºé‚£äº›è½åœ¨æŒ‡å®šåŒºé—´å†…çš„æ•°å­—æˆ–è€…æ—¶é—´ 1234567891011GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;range&quot;: &#123; &quot;price&quot;: &#123; &quot;gte&quot;: 4000, &quot;lt&quot;: 5000 &#125; &#125; &#125;&#125; rangeæŸ¥è¯¢å…è®¸çš„æ“ä½œç¬¦ æ“ä½œç¬¦ è¯´æ˜ gt å¤§äº gte å¤§äºç­‰äº lt å°äº lte å°äºç­‰äº 8.1.6 æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆfuzzyï¼‰fuzzyæŸ¥è¯¢æ˜¯termæŸ¥è¯¢çš„æ¨¡ç³Šç­‰ä»·ï¼Œå¾ˆå°‘ç›´æ¥ä½¿ç”¨å®ƒ å®ƒå…è®¸ç”¨æˆ·æœç´¢è¯æ¡ä¸å®é™…è¯æ¡çš„æ‹¼å†™å‡ºç°åå·®ï¼Œä½†æ˜¯åå·®çš„ç¼–è¾‘è·ç¦»ä¸å¾—è¶…è¿‡1ï¼š 12345678GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;fuzzy&quot;: &#123; &quot;good_name&quot;: &quot;å°ç±³1&quot; &#125; &#125;&#125; å’Œtermä¸€æ ·ä¸åˆ†è¯æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯æŸ¥å°ç±³1ï¼Œè¯æ¡é‡Œé¢æ²¡æœ‰ä½†æœ€ç›¸ä¼¼çš„æ˜¯å°ç±³,è¯¯å·®æ˜¯1å¯ä»¥ç®—ï¼Œé‚£å°±æ˜¯åŒ¹é…åˆ°å…·æœ‰å°ç±³çš„document 8.2 ç»“æœè¿‡æ»¤é»˜è®¤æƒ…å†µä¸‹ï¼Œelasticsearchåœ¨æœç´¢çš„ç»“æœä¸­ï¼Œä¼šæŠŠæ–‡æ¡£ä¸­ä¿å­˜åœ¨ _source çš„æ‰€æœ‰å­—æ®µéƒ½è¿”å›ã€‚ å¦‚æœæˆ‘ä»¬åªæƒ³è·å–å…¶ä¸­çš„éƒ¨åˆ†å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ  _source çš„è¿‡æ»¤ 8.2.1 ç›´æ¥æŒ‡å®šå­—æ®µç¤ºä¾‹ 1234567GET /goods/_search&#123; &quot;_source&quot;: [&quot;good_name&quot;,&quot;price&quot;], &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;&#125; 8.2.2 æŒ‡å®šincludeså’Œexcludesæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ includesï¼šæ¥æŒ‡å®šæƒ³è¦æ˜¾ç¤ºçš„å­—æ®µ excludesï¼šæ¥æŒ‡å®šä¸æƒ³è¦æ˜¾ç¤ºçš„å­—æ®µ 123456789GET /goods/_search&#123; &quot;_source&quot;: &#123; &quot;includes&quot;: [&quot;good_name&quot;] &#125;, &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;&#125; 8.3 è¿‡æ»¤Elasticsearch ä½¿ç”¨çš„æŸ¥è¯¢è¯­è¨€ï¼ˆDSLï¼‰æ‹¥æœ‰ä¸€å¥—æŸ¥è¯¢ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥ä»¥æ— é™ç»„åˆçš„æ–¹å¼è¿›è¡Œæ­é…ã€‚è¿™å¥—ç»„ä»¶å¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹ä½¿ç”¨ï¼šè¿‡æ»¤æƒ…å†µï¼ˆfiltering contextï¼‰å’ŒæŸ¥è¯¢æƒ…å†µï¼ˆquery contextï¼‰ã€‚ å¦‚ä½•é€‰æ‹©æŸ¥è¯¢ä¸è¿‡æ»¤ é€šå¸¸çš„è§„åˆ™æ˜¯ï¼Œä½¿ç”¨æŸ¥è¯¢ï¼ˆqueryï¼‰è¯­å¥æ¥è¿›è¡Œ å…¨æ–‡ æœç´¢æˆ–è€…å…¶å®ƒä»»ä½•éœ€è¦å½±å“ ç›¸å…³æ€§å¾—åˆ† çš„æœç´¢ã€‚é™¤æ­¤ä»¥å¤–çš„æƒ…å†µéƒ½ä½¿ç”¨è¿‡æ»¤ï¼ˆfilters)ã€‚ 8.3.1 æ¡ä»¶æŸ¥è¯¢ä¸­è¿›è¡Œè¿‡æ»¤æ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä¼šå½±å“åˆ°æ–‡æ¡£çš„è¯„åˆ†åŠæ’åã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æŸ¥è¯¢ç»“æœä¸­è¿›è¡Œè¿‡æ»¤ï¼Œå¹¶ä¸”ä¸å¸Œæœ›è¿‡æ»¤æ¡ä»¶å½±å“è¯„åˆ†ï¼Œé‚£ä¹ˆå°±ä¸è¦æŠŠè¿‡æ»¤æ¡ä»¶ä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ¥ç”¨ã€‚è€Œæ˜¯ä½¿ç”¨ filter æ–¹å¼ï¼š 12345678910111213141516171819202122GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;bool&quot;: &#123; &quot;must&quot;: [ &#123;&quot;match&quot;: &#123; &quot;good_name&quot;: &quot;å°ç±³&quot; &#125;&#125; ], &quot;filter&quot;: [ &#123; &quot;range&quot;: &#123; &quot;price&quot;: &#123; &quot;gte&quot;: 4000, &quot;lte&quot;: 5000 &#125; &#125; &#125; ] &#125; &#125;&#125; 8.3.2 æ— æ¡ä»¶æŸ¥è¯¢ï¼Œç›´æ¥è¿‡æ»¤å¦‚æœä¸€æ¬¡æŸ¥è¯¢åªæœ‰è¿‡æ»¤ï¼Œæ²¡æœ‰æŸ¥è¯¢æ¡ä»¶ï¼Œä¸å¸Œæœ›è¿›è¡Œè¯„åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ constant_score å–ä»£åªæœ‰filter è¯­å¥çš„ bool æŸ¥è¯¢ã€‚åœ¨æ€§èƒ½ä¸Šæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä½†å¯¹äºæé«˜æŸ¥è¯¢ç®€æ´æ€§å’Œæ¸…æ™°åº¦æœ‰å¾ˆå¤§å¸®åŠ©ã€‚ 123456789101112GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;constant_score&quot;: &#123; &quot;filter&quot;: &#123; &quot;term&quot;: &#123; &quot;good_name&quot;: &quot;å°ç±³&quot; &#125; &#125; &#125; &#125;&#125; 8.4 æ’åº8.4.1 å•ä¸ªå­—æ®µæ’åºsort å¯ä»¥è®©æˆ‘ä»¬æŒ‰ç…§ä¸åŒçš„å­—æ®µè¿›è¡Œæ’åºï¼Œå¹¶ä¸”é€šè¿‡ order æŒ‡å®šæ’åºçš„æ–¹å¼ 123456789GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;, &quot;sort&quot;: [ &#123; &quot;price&quot;: &#123; &quot;order&quot;: &quot;asc&quot;&#125; &#125; ]&#125; 8.4.2 å¤šå­—æ®µæ’åºå‡å®šæˆ‘ä»¬æƒ³è¦ç»“åˆä½¿ç”¨ priceå’Œ _scoreï¼ˆå¾—åˆ†ï¼‰ è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶ä¸”åŒ¹é…çš„ç»“æœé¦–å…ˆæŒ‰ç…§ä»·æ ¼æ’åºï¼Œç„¶åæŒ‰ç…§ç›¸å…³æ€§å¾—åˆ†æ’åºï¼šï¼ˆå®‰è£…å…ˆåé¡ºåºè¿›è¡Œä»¥priceæ’åºï¼Œåœ¨priceç›¸åŒçš„å…ˆåé¡ºåºå†ç”± _scoreå†³å®šï¼‰ 123456789101112GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;good_name&quot;: &quot;å°ç±³æ‰‹æœºpro&quot; &#125; &#125;, &quot;sort&quot;: [ &#123;&quot;price&quot;: &#123; &quot;order&quot;: &quot;asc&quot; &#125;&#125;, &#123;&quot;_score&quot;: &#123; &quot;order&quot;: &quot;desc&quot; &#125;&#125; ]&#125; 8.5 åˆ†é¡µElasticsearchä¸­æ•°æ®éƒ½å­˜å‚¨åœ¨åˆ†ç‰‡ä¸­ï¼Œå½“æ‰§è¡Œæœç´¢æ—¶æ¯ä¸ªåˆ†ç‰‡ç‹¬ç«‹æœç´¢åï¼Œæ•°æ®å†ç»è¿‡æ•´åˆè¿”å›ã€‚é‚£ä¹ˆï¼Œå¦‚æœè¦å®ç°åˆ†é¡µæŸ¥è¯¢è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ elasticsearchçš„åˆ†é¡µä¸mysqlæ•°æ®åº“éå¸¸ç›¸ä¼¼ï¼Œéƒ½æ˜¯æŒ‡å®šä¸¤ä¸ªå€¼ï¼š fromï¼šç›®æ ‡æ•°æ®çš„åç§»å€¼ï¼ˆå¼€å§‹ä½ç½®ï¼‰ï¼Œé»˜è®¤fromä¸º0 sizeï¼šæ¯é¡µå¤§å° 12345678GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;, &quot;from&quot;: 0, &quot;size&quot;: 2&#125; 8.6 é«˜äº®é«˜äº®åŸç†ï¼š * æœåŠ¡ç«¯æœç´¢æ•°æ®ï¼Œå¾—åˆ°æœç´¢ç»“æœ * æŠŠæœç´¢ç»“æœä¸­ï¼Œæœç´¢å…³é”®å­—éƒ½åŠ ä¸Šçº¦å®šå¥½çš„æ ‡ç­¾ * å‰ç«¯é¡µé¢æå‰å†™å¥½æ ‡ç­¾çš„CSSæ ·å¼ï¼Œå³å¯é«˜äº® elasticsearchä¸­å®ç°é«˜äº®çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼š åœ¨ä½¿ç”¨matchæŸ¥è¯¢çš„åŒæ—¶ï¼Œåœ¨æŸ¥è¯¢å¤–åŠ ä¸Šä¸€ä¸ªhighlightå±æ€§ï¼š pre_tagsï¼šå‰ç½®æ ‡ç­¾ post_tagsï¼šåç½®æ ‡ç­¾ fieldsï¼šéœ€è¦é«˜äº®çš„å­—æ®µ ä¹ã€èšåˆaggregationsèšåˆå¯ä»¥è®©æˆ‘ä»¬æå…¶æ–¹ä¾¿çš„å®ç°å¯¹æ•°æ®çš„ç»Ÿè®¡ã€åˆ†æã€‚ä¾‹å¦‚ï¼š ä»€ä¹ˆå“ç‰Œçš„æ‰‹æœºæœ€å—æ¬¢è¿ï¼Ÿ è¿™äº›æ‰‹æœºçš„å¹³å‡ä»·æ ¼ã€æœ€é«˜ä»·æ ¼ã€æœ€ä½ä»·æ ¼ï¼Ÿ è¿™äº›æ‰‹æœºæ¯æœˆçš„é”€å”®æƒ…å†µå¦‚ä½•ï¼Ÿ å®ç°è¿™äº›ç»Ÿè®¡åŠŸèƒ½çš„æ¯”æ•°æ®åº“çš„sqlè¦æ–¹ä¾¿çš„å¤šï¼Œè€Œä¸”æŸ¥è¯¢é€Ÿåº¦éå¸¸å¿«ï¼Œå¯ä»¥å®ç°è¿‘å®æ—¶æœç´¢æ•ˆæœã€‚ 9.1 åŸºæœ¬æ¦‚å¿µElasticsearchä¸­çš„èšåˆï¼ŒåŒ…å«å¤šç§ç±»å‹ï¼Œæœ€å¸¸ç”¨çš„ä¸¤ç§ï¼Œä¸€ä¸ªå« æ¡¶ ï¼Œä¸€ä¸ªå«åº¦é‡ï¼š æ¡¶ï¼ˆbucketï¼‰ç±»ä¼¼äº group by æ¡¶çš„ä½œç”¨ï¼Œæ˜¯æŒ‰ç…§æŸç§æ–¹å¼å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œæ¯ä¸€ç»„æ•°æ®åœ¨ESä¸­ç§°ä¸ºä¸€ä¸ª æ¡¶ ï¼Œä¾‹å¦‚æˆ‘ä»¬æ ¹æ®å›½ç±å¯¹äººåˆ’åˆ†ï¼Œå¯ä»¥å¾—åˆ° ä¸­å›½æ¡¶ ã€ è‹±å›½æ¡¶ ï¼Œ æ—¥æœ¬æ¡¶ â€¦â€¦æˆ–è€…æˆ‘ä»¬æŒ‰ç…§å¹´é¾„æ®µå¯¹äººè¿›è¡Œåˆ’åˆ†ï¼š010,1020,2030,3040ç­‰ã€‚ Elasticsearchä¸­æä¾›çš„åˆ’åˆ†æ¡¶çš„æ–¹å¼æœ‰å¾ˆå¤šï¼š Date Histogram Aggregationï¼šæ ¹æ®æ—¥æœŸé˜¶æ¢¯åˆ†ç»„ï¼Œä¾‹å¦‚ç»™å®šé˜¶æ¢¯ä¸ºå‘¨ï¼Œä¼šè‡ªåŠ¨æ¯å‘¨åˆ†ä¸ºä¸€ç»„ Histogram Aggregationï¼šæ ¹æ®æ•°å€¼é˜¶æ¢¯åˆ†ç»„ï¼Œä¸æ—¥æœŸç±»ä¼¼ï¼Œéœ€è¦çŸ¥é“åˆ†ç»„çš„é—´éš”ï¼ˆintervalï¼‰ Terms Aggregationï¼šæ ¹æ®è¯æ¡å†…å®¹åˆ†ç»„ï¼Œè¯æ¡å†…å®¹å®Œå…¨åŒ¹é…çš„ä¸ºä¸€ç»„ Range Aggregationï¼šæ•°å€¼å’Œæ—¥æœŸçš„èŒƒå›´åˆ†ç»„ï¼ŒæŒ‡å®šå¼€å§‹å’Œç»“æŸï¼Œç„¶åæŒ‰æ®µåˆ†ç»„ â€¦. ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å‘ç°bucket aggregations åªè´Ÿè´£å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ä¸è¿›è¡Œè®¡ç®—ï¼Œå› æ­¤å¾€å¾€bucketä¸­å¾€å¾€ä¼šåµŒå¥—å¦ä¸€ç§èšåˆï¼šmetrics aggregationså³åº¦é‡ åº¦é‡ï¼ˆmetricsï¼‰ ç›¸å½“äºèšåˆçš„ç»“æœ åˆ†ç»„å®Œæˆä»¥åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå¯¹ç»„ä¸­çš„æ•°æ®è¿›è¡Œèšåˆè¿ç®—ï¼Œä¾‹å¦‚æ±‚å¹³å‡å€¼ã€æœ€å¤§ã€æœ€å°ã€æ±‚å’Œç­‰ï¼Œè¿™äº›åœ¨ESä¸­ç§°ä¸º åº¦é‡ æ¯”è¾ƒå¸¸ç”¨çš„ä¸€äº›åº¦é‡èšåˆæ–¹å¼ Avg Aggregationï¼šæ±‚å¹³å‡å€¼ Max Aggregationï¼šæ±‚æœ€å¤§å€¼ Min Aggregationï¼šæ±‚æœ€å°å€¼ Percentiles Aggregationï¼šæ±‚ç™¾åˆ†æ¯” Stats Aggregationï¼šåŒæ—¶è¿”å›avgã€maxã€minã€sumã€countç­‰ Sum Aggregationï¼šæ±‚å’Œ Top hits Aggregationï¼šæ±‚å‰å‡  Value Count Aggregationï¼šæ±‚æ€»æ•° â€¦ ä¸ºäº†æµ‹è¯•èšåˆï¼Œæˆ‘ä»¬å…ˆæ‰¹é‡å¯¼å…¥ä¸€äº›æ•°æ® åˆ›å»ºç´¢å¼•ï¼š 12345678910111213PUT /car &#123; &quot;mappings&quot;: &#123; &quot;properties&quot;: &#123; &quot;color&quot;: &#123; &quot;type&quot;: &quot;keyword&quot; &#125;, &quot;make&quot;: &#123; &quot;type&quot;: &quot;keyword&quot; &#125; &#125; &#125; &#125; æ³¨æ„ï¼šåœ¨ESä¸­ï¼Œéœ€è¦è¿›è¡Œèšåˆã€æ’åºã€è¿‡æ»¤çš„å­—æ®µå…¶å¤„ç†æ–¹å¼æ¯”è¾ƒç‰¹æ®Šï¼Œå› æ­¤ä¸èƒ½è¢«åˆ†è¯ï¼Œå¿…é¡»ä½¿ç”¨keyword æˆ– æ•°å€¼ç±»å‹ ã€‚è¿™é‡Œæˆ‘ä»¬å°†colorå’Œmakeè¿™ä¸¤ä¸ªæ–‡å­—ç±»å‹çš„å­—æ®µè®¾ç½®ä¸ºkeywordç±»å‹ï¼Œè¿™ä¸ªç±»å‹ä¸ä¼šè¢«åˆ†è¯ï¼Œå°†æ¥å°±å¯ä»¥å‚ä¸èšåˆ å¯¼å…¥æ•°æ®ï¼Œè¿™é‡Œæ˜¯é‡‡ç”¨æ‰¹å¤„ç†çš„APIï¼Œç›´æ¥å¤åˆ¶åˆ°kibanaè¿è¡Œå³å¯ï¼š æ³¨æ„ï¼šåœ¨6ç‰ˆæœ¬æˆ–è€…ä¹‹å‰ æ¥å£æ˜¯/index/type/_bulk,åœ¨æˆ‘å½“å‰ç‰ˆæœ¬å¹¶ä¸æ˜¯æŠŠç±»å‹åæ¢æˆ_docè€Œæ˜¯ç›´æ¥å–æ¶ˆï¼Œè¦ä¿è¯å¥‡æ•°è¡Œæ˜¯åˆ†éš”ç¬¦å¶æ•°è¡Œä¸ºæ•°æ®è¡Œ 1234567891011121314151617POST /car/_bulk&#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 10000, &quot;color&quot; : &quot;çº¢&quot;, &quot;make&quot; : &quot;æœ¬ç”°&quot;, &quot;sold&quot; : &quot;2020-10-28&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 20000, &quot;color&quot; : &quot;çº¢&quot;, &quot;make&quot; : &quot;æœ¬ç”°&quot;, &quot;sold&quot; : &quot;2020-11-05&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 30000, &quot;color&quot; : &quot;ç»¿&quot;, &quot;make&quot; : &quot;ç¦ç‰¹&quot;, &quot;sold&quot; : &quot;2020-05-18&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 15000, &quot;color&quot; : &quot;è“&quot;, &quot;make&quot; : &quot;ä¸°ç”°&quot;, &quot;sold&quot; : &quot;2020-07-02&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 12000, &quot;color&quot; : &quot;ç»¿&quot;, &quot;make&quot; : &quot;ä¸°ç”°&quot;, &quot;sold&quot; : &quot;2020-08-19&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 20000, &quot;color&quot; : &quot;çº¢&quot;, &quot;make&quot; : &quot;æœ¬ç”°&quot;, &quot;sold&quot; : &quot;2020-11-05&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 80000, &quot;color&quot; : &quot;çº¢&quot;, &quot;make&quot; : &quot;å®é©¬&quot;, &quot;sold&quot; : &quot;2020-01-01&quot; &#125; &#123; &quot;index&quot;: &#123;&#125;&#125; &#123; &quot;price&quot; : 25000, &quot;color&quot; : &quot;è“&quot;, &quot;make&quot; : &quot;ç¦ç‰¹&quot;, &quot;sold&quot; : &quot;2020-02-12&quot; &#125; 9.2 èšåˆä¸ºæ¡¶é¦–å…ˆï¼Œæˆ‘ä»¬æŒ‰ç…§ æ±½è½¦çš„é¢œè‰² coloræ¥ åˆ’åˆ†æ¡¶ ï¼ŒæŒ‰ç…§é¢œè‰²åˆ†æ¡¶ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨TermAggregationç±»å‹ï¼ŒæŒ‰ç…§é¢œè‰²çš„åç§°æ¥åˆ†æ¡¶ã€‚ è¯­æ³• 12345678GET /car/_search&#123; &quot;aggs&quot;: &#123; &quot;NAME&quot;: &#123; &quot;AGG_TYPE&quot;: &#123;&#125; &#125; &#125;&#125; ç¤ºä¾‹ sizeï¼š æŸ¥è¯¢æ¡æ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º0ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å…³å¿ƒæœç´¢åˆ°çš„æ•°æ®ï¼Œåªå…³å¿ƒèšåˆç»“æœï¼Œæé«˜æ•ˆç‡ aggsï¼šå£°æ˜è¿™æ˜¯ä¸€ä¸ªèšåˆæŸ¥è¯¢ï¼Œæ˜¯aggregationsçš„ç¼©å†™ popular_colorsï¼šæŒ‡å®šçš„åˆ†ç»„ç»“æœåç§°ï¼Œè‡ªå®šä¹‰ termsï¼šèšåˆçš„ç±»å‹ï¼ŒtermsåŒ¹é… fieldï¼šåˆ’åˆ†æ¡¶çš„ä¾èµ–å­—æ®µ hitsï¼šæŸ¥è¯¢ç»“æœä¸ºç©ºï¼Œå› ä¸ºæˆ‘ä»¬è®¾ç½®äº†sizeä¸º0 aggregationsï¼šèšåˆçš„ç»“æœ popular_colorsï¼šæˆ‘ä»¬å®šä¹‰çš„èšåˆåç§° bucketsï¼šæŸ¥æ‰¾åˆ°çš„æ¡¶ï¼Œæ¯ä¸ªä¸åŒçš„colorå­—æ®µå€¼éƒ½ä¼šå½¢æˆä¸€ä¸ªæ¡¶ keyï¼šè¿™ä¸ªæ¡¶å¯¹åº”çš„colorå­—æ®µçš„å€¼ doc_countï¼šè¿™ä¸ªæ¡¶ä¸­çš„æ–‡æ¡£æ•°é‡ é€šè¿‡èšåˆçš„ç»“æœæˆ‘ä»¬å‘ç°ï¼Œç›®å‰çº¢è‰²çš„å°è½¦æ¯”è¾ƒç•…é”€ 9.3 æ¡¶ç±»åº¦é‡å‰é¢çš„ä¾‹å­å‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªæ¡¶é‡Œé¢çš„æ–‡æ¡£æ•°é‡ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚ ä½†é€šå¸¸ï¼Œæˆ‘ä»¬çš„åº”ç”¨éœ€è¦æä¾›æ›´å¤æ‚çš„æ–‡æ¡£åº¦é‡ã€‚ ä¾‹å¦‚ï¼Œæ¯ç§é¢œè‰²æ±½è½¦çš„å¹³å‡ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Elasticsearch ä½¿ç”¨å“ªä¸ªå­—æ®µ ï¼Œ ä½¿ç”¨ä½•ç§åº¦é‡æ–¹å¼ è¿›è¡Œè¿ç®—ï¼Œè¿™äº›ä¿¡æ¯è¦åµŒå¥—åœ¨ æ¡¶å†…ï¼Œ åº¦é‡ çš„è¿ç®—ä¼šåŸºäº æ¡¶ å†…çš„æ–‡æ¡£è¿›è¡Œ ç°åœ¨ï¼Œæˆ‘ä»¬ä¸ºåˆšåˆšçš„èšåˆç»“æœæ·»åŠ  æ±‚ä»·æ ¼å¹³å‡å€¼çš„åº¦é‡ï¼š 123456789101112131415161718GET /car/_search&#123; &quot;size&quot;: 0, &quot;aggs&quot;: &#123; &quot;popular_colors&quot;: &#123; &quot;terms&quot;: &#123; &quot;field&quot;: &quot;color&quot; &#125;, &quot;aggs&quot;: &#123; &quot;avg_price&quot;: &#123; &quot;avg&quot;: &#123; &quot;field&quot;: &quot;price&quot; &#125; &#125; &#125; &#125; &#125;&#125; **aggsï¼š**æˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªaggs(popular_colors)ä¸­æ·»åŠ æ–°çš„aggsã€‚å¯è§åº¦é‡ä¹Ÿæ˜¯ä¸€ä¸ªèšåˆ **avg_priceï¼š**èšåˆçš„åç§° **avgï¼š**åº¦é‡çš„ç±»å‹ï¼Œè¿™é‡Œæ˜¯æ±‚å¹³å‡å€¼ **fieldï¼š**åº¦é‡è¿ç®—çš„å­—æ®µ å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ¡¶ä¸­éƒ½æœ‰è‡ªå·±çš„ avg_price å­—æ®µï¼Œè¿™æ˜¯åº¦é‡èšåˆçš„ç»“æœ åã€Elasticsearché›†ç¾¤10.1 å•ç‚¹çš„é—®é¢˜å•ç‚¹çš„elasticsearchå­˜åœ¨å“ªäº›å¯èƒ½å‡ºç°çš„é—®é¢˜å‘¢ï¼Ÿ å•å°æœºå™¨å­˜å‚¨å®¹é‡æœ‰é™ï¼Œæ— æ³•å®ç°é«˜å­˜å‚¨ å•æœåŠ¡å™¨å®¹æ˜“å‡ºç°å•ç‚¹æ•…éšœï¼Œæ— æ³•å®ç°é«˜å¯ç”¨ å•æœåŠ¡çš„å¹¶å‘å¤„ç†èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•å®ç°é«˜å¹¶å‘ æ‰€ä»¥ï¼Œä¸ºäº†åº”å¯¹è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹elasticsearchæ­å»ºé›†ç¾¤ 10.2 é›†ç¾¤çš„ç»“æ„10.2.1 æ•°æ®åˆ†ç‰‡é¦–å…ˆï¼Œæˆ‘ä»¬é¢ä¸´çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ•°æ®é‡å¤ªå¤§ï¼Œå•ç‚¹å­˜å‚¨é‡æœ‰é™çš„é—®é¢˜ã€‚ å¤§å®¶è§‰å¾—åº”è¯¥å¦‚ä½•è§£å†³ï¼Ÿ æ²¡é”™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®æ‹†åˆ†æˆå¤šä»½ï¼Œæ¯ä¸€ä»½å­˜å‚¨åˆ°ä¸åŒæœºå™¨èŠ‚ç‚¹ï¼ˆnodeï¼‰ï¼Œä»è€Œå®ç°å‡å°‘æ¯ä¸ªèŠ‚ç‚¹æ•°æ®é‡çš„ç›®çš„ã€‚è¿™å°±æ˜¯æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œä¹Ÿå«åšï¼š æ•°æ®åˆ†ç‰‡ï¼ˆShardï¼‰ ã€‚ å‡å¦‚åªæœ‰ä¸‰ä¸ªåˆ†ç‰‡ï¼Œå¯ä»¥å°†æ¯ä¸€ä¸ªåˆ†ç‰‡æ”¾åœ¨ä¸åŒçš„é›†ç¾¤èŠ‚ç‚¹ï¼Œä»¥æ­¤å®ç°å­˜å‚¨ 10.2.2 æ•°æ®å¤‡ä»½æ•°æ®åˆ†ç‰‡è§£å†³äº†æµ·é‡æ•°æ®å­˜å‚¨çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå‡ºç°å•ç‚¹æ•…éšœï¼Œé‚£ä¹ˆåˆ†ç‰‡æ•°æ®å°±ä¸å†å®Œæ•´ï¼Œè¿™åˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ æ²¡é”™ï¼Œå°±åƒå¤§å®¶ä¸ºäº†å¤‡ä»½æ‰‹æœºæ•°æ®ï¼Œä¼šé¢å¤–å­˜å‚¨ä¸€ä»½åˆ°ç§»åŠ¨ç¡¬ç›˜ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªåˆ†ç‰‡æ•°æ®è¿›è¡Œå¤‡ä»½ï¼Œå­˜å‚¨åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œè¿™å°±æ˜¯æ•°æ®å¤‡ä»½ï¼Œä¹Ÿå« æ•°æ®å‰¯æœ¬ï¼ˆreplicaï¼‰ ã€‚ æ•°æ®å¤‡ä»½å¯ä»¥ä¿è¯é«˜å¯ç”¨ï¼Œä½†æ˜¯æ¯ä¸ªåˆ†ç‰‡å¤‡ä»½ä¸€ä»½ï¼Œæ‰€éœ€è¦çš„èŠ‚ç‚¹æ•°é‡å°±ä¼šç¿»ä¸€å€ï¼Œæˆæœ¬å®åœ¨æ˜¯å¤ªé«˜äº†ï¼ ä¸ºäº†åœ¨é«˜å¯ç”¨å’Œæˆæœ¬é—´å¯»æ±‚å¹³è¡¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š é¦–å…ˆå¯¹æ•°æ®åˆ†ç‰‡ï¼Œå­˜å‚¨åˆ°ä¸åŒèŠ‚ç‚¹ ç„¶åå¯¹æ¯ä¸ªåˆ†ç‰‡è¿›è¡Œå¤‡ä»½ï¼Œæ”¾åˆ°å¯¹æ–¹èŠ‚ç‚¹ï¼Œå®Œæˆäº’ç›¸å¤‡ä»½ è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘æ‰€éœ€è¦çš„æœåŠ¡èŠ‚ç‚¹æ•°é‡ï¼Œå¦‚å›¾ï¼Œæˆ‘ä»¬ä»¥3åˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡å¤‡ä»½ä¸€ä»½ä¸ºä¾‹ï¼š ä¸‰ä¸ªåˆ†ç‰‡0ã€1ã€2åˆ†åˆ«å­˜åœ¨ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹å­˜çš„åˆ†ç‰‡0çš„å¤‡ä»½åœ¨èŠ‚ç‚¹2ä¹Ÿå­˜ä¸€ä¸ªã€‚èŠ‚ç‚¹2å­˜çš„åˆ†ç‰‡1çš„å¤‡ä»½åœ¨èŠ‚ç‚¹3å­˜ä¸€ä»½ï¼ŒèŠ‚ç‚¹3å­˜çš„åˆ†ç‰‡2çš„å¤‡ä»½åœ¨èŠ‚ç‚¹1å­˜ä¸€ä»½ã€‚ åœ¨è¿™ä¸ªé›†ç¾¤ä¸­ï¼Œå¦‚æœå‡ºç°å•èŠ‚ç‚¹æ•…éšœï¼Œå¹¶ä¸ä¼šå¯¼è‡´æ•°æ®ç¼ºå¤±ï¼Œæ‰€ä»¥ä¿è¯äº†é›†ç¾¤çš„é«˜å¯ç”¨ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†èŠ‚ç‚¹ä¸­æ•°æ®å­˜å‚¨é‡ã€‚å¹¶ä¸”å› ä¸ºæ˜¯å¤šä¸ªèŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œå› æ­¤ç”¨æˆ·è¯·æ±‚ä¹Ÿä¼šåˆ†å‘åˆ°ä¸åŒæœåŠ¡å™¨ï¼Œå¹¶å‘èƒ½åŠ›ä¹Ÿå¾—åˆ°äº†ä¸€å®šçš„æå‡ã€‚ 10.3 é›†ç¾¤æ­å»ºé›†ç¾¤éœ€è¦å¤šå°æœºå™¨ï¼Œæˆ‘ä»¬è¿™é‡Œç”¨ä¸€å°æœºå™¨æ¥æ¨¡æ‹Ÿï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ä¸€å°æœºå™¨ä¸­éƒ¨ç½²å¤šä¸ªelasticsearchèŠ‚ç‚¹ï¼Œæ¯ä¸ªelasticsearchçš„ç«¯å£éƒ½å¿…é¡»ä¸ä¸€æ ·ã€‚ ä¸€å°æœºå™¨è¿›è¡Œæ¨¡æ‹Ÿï¼šå°†æˆ‘ä»¬çš„ESçš„å®‰è£…åŒ…å¤åˆ¶ä¸‰ä»½ï¼Œä¿®æ”¹ç«¯å£å·ï¼Œdataå’Œlogå­˜æ”¾ä½ç½®çš„ä¸åŒã€‚ å®é™…å¼€å‘ä¸­ï¼šå°†æ¯ä¸ªESèŠ‚ç‚¹æ”¾åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚ æˆ‘ä»¬è®¡åˆ’é›†ç¾¤åç§°ä¸ºï¼šlagou-elasticï¼Œéƒ¨ç½²3ä¸ªelasticsearchèŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯ï¼š node-01ï¼šhttpç«¯å£9201ï¼ŒTCPç«¯å£9301 node-02ï¼šhttpç«¯å£9202ï¼ŒTCPç«¯å£9302 node-03ï¼šhttpç«¯å£9203ï¼ŒTCPç«¯å£9303 httpï¼šè¡¨ç¤ºä½¿ç”¨httpåè®®è¿›è¡Œè®¿é—®æ—¶ä½¿ç”¨ç«¯å£ï¼Œelasticsearch-headã€kibanaã€postmanè¯·æ±‚ç«¯å£å·æ˜¯9200ã€‚ tcpï¼šé›†ç¾¤é—´çš„å„ä¸ªèŠ‚ç‚¹è¿›è¡Œé€šè®¯çš„ç«¯å£ï¼Œé»˜è®¤9300 1ï¼‰å¤åˆ¶ä¸‰ä¸ªESå‡ºæ¥ 2ï¼‰ä¿®æ”¹æ¯ä¸ªèŠ‚ç‚¹é…ç½® ä¸‰ä¸ªèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶å‡ ä¹ä¸€è‡´ï¼Œé™¤äº†ï¼šnode.nameã€path.dataã€path.logã€http.portã€transport.port 123456789cluster.name: MY_SOME_ESnode.name: ES01path.data: C:\\Users\\hao\\MySpace\\utils\\Elasticsearch\\elasticsearch-9201\\datas\\datapath.logs: C:\\Users\\hao\\MySpace\\utils\\Elasticsearch\\elasticsearch-9201\\datas\\lognetwork.host: 0.0.0.0http.port: 9201transport.port: 9301discovery.seed_hosts: [&quot;127.0.0.1:9301&quot;, &quot;127.0.0.1:9302&quot;, &quot;127.0.0.1:9303&quot;]cluster.initial_master_nodes: [&quot;ES01&quot;,&quot;ES02&quot;,&quot;ES03&quot;] 3ï¼‰å¯åŠ¨é›†ç¾¤ æŠŠä¸‰ä¸ªèŠ‚ç‚¹åˆ†åˆ«å¯åŠ¨ ä½¿ç”¨headæ’ä»¶æŸ¥çœ‹ï¼š 10.4 æµ‹è¯•é›†ç¾¤ä¸­åˆ›å»ºç´¢å¼•åº“å¯ä»¥é€šè¿‡headæ’ä»¶ç•Œé¢åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç”¨ä¸Šé¢å­¦ä¹ çš„å‘½ä»¤ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåˆ†ç‰‡æ•°ä¸º3å‰¯æœ¬ä¸º1çš„ç´¢å¼•å³å¯ 1234567PUT /hao&#123; &quot;settings&quot;: &#123; &quot;number_of_shards&quot;: 3, &quot;number_of_replicas&quot;: 1 &#125; &#125; é€šè¿‡chromeæµè§ˆå™¨çš„headæŸ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°åˆ†ç‰‡çš„å­˜å‚¨ç»“æ„ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒES01ä¿å­˜äº†0åˆ†ç‰‡ä»¥åŠ1åˆ†ç‰‡çš„å‰¯æœ¬ï¼ŒES02ä¿å­˜äº†2åˆ†ç‰‡ä»¥åŠ0åˆ†ç‰‡çš„å‰¯æœ¬ï¼ŒES03ä¿å­˜äº†1åˆ†ç‰‡ä»¥åŠ2åˆ†ç‰‡çš„å‰¯æœ¬ 10.5 é›†ç¾¤çš„å·¥ä½œåŸç†10.5.1 shadä¸replicaæœºåˆ¶ï¼ˆ1ï¼‰ä¸€ä¸ªindexåŒ…å«å¤šä¸ªshard,ä¹Ÿå°±æ˜¯ä¸€ä¸ªindexå­˜åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Š ï¼ˆ2ï¼‰æ¯ä¸ªshardéƒ½æ˜¯ä¸€ä¸ªæœ€å°å·¥ä½œå•å…ƒï¼Œæ‰¿è½½éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚æœ‰ä¸‰å°æœåŠ¡å™¨,ç°åœ¨æœ‰ä¸‰æ¡æ•°æ®,è¿™ä¸‰æ¡æ•°æ®åœ¨ä¸‰å°æœåŠ¡å™¨ä¸Šå„æ–¹ä¸€æ¡. ï¼ˆ3ï¼‰å¢å‡èŠ‚ç‚¹æ—¶ï¼Œshardä¼šè‡ªåŠ¨åœ¨nodesä¸­è´Ÿè½½å‡è¡¡ ï¼ˆ4ï¼‰primary shardï¼ˆä¸»åˆ†ç‰‡ï¼‰å’Œreplica shardï¼ˆå‰¯æœ¬åˆ†ç‰‡ï¼‰ï¼Œæ¯ä¸ªdocumentè‚¯å®šåªå­˜åœ¨äºæŸä¸€ä¸ªprimary shardä»¥åŠå…¶å¯¹åº”çš„replica shardä¸­ï¼Œä¸å¯èƒ½å­˜åœ¨äºå¤šä¸ªprimary shard ï¼ˆ5ï¼‰replica shardæ˜¯primary shardçš„å‰¯æœ¬ï¼Œè´Ÿè´£å®¹é”™ï¼Œä»¥åŠæ‰¿æ‹…è¯»è¯·æ±‚è´Ÿè½½ ï¼ˆ6ï¼‰primary shardçš„æ•°é‡åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™å°±å›ºå®šäº†ï¼Œreplica shardçš„æ•°é‡å¯ä»¥éšæ—¶ä¿®æ”¹ ï¼ˆ7ï¼‰primary shardçš„é»˜è®¤æ•°é‡æ˜¯5ï¼Œreplicaé»˜è®¤æ˜¯1ï¼ˆæ¯ä¸ªä¸»åˆ†ç‰‡ä¸€ä¸ªå‰¯æœ¬åˆ†ç‰‡ï¼‰ï¼Œé»˜è®¤æœ‰10ä¸ªshardï¼Œ5ä¸ªprimary shardï¼Œ5ä¸ªreplica shard ï¼ˆ8ï¼‰primary shardä¸èƒ½å’Œè‡ªå·±çš„replica shardæ”¾åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆå¦åˆ™èŠ‚ç‚¹å®•æœºï¼Œprimary shardå’Œå‰¯æœ¬éƒ½ä¸¢å¤±ï¼Œèµ·ä¸åˆ°å®¹é”™çš„ä½œç”¨ï¼‰ï¼Œä½†æ˜¯å¯ä»¥å’Œå…¶ä»–primary shardçš„replica shardæ”¾åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Š 10.5.2 é›†ç¾¤å†™å…¥æ•°æ® å®¢æˆ·ç«¯é€‰æ‹©ä¸€ä¸ªnodeå‘é€è¯·æ±‚è¿‡å»ï¼Œè¿™ä¸ªnodeå°±æ˜¯coordinating node (åè°ƒèŠ‚ç‚¹) coordinating nodeï¼Œå¯¹documentè¿›è¡Œè·¯ç”±ï¼Œå°†è¯·æ±‚è½¬å‘ç»™å¯¹åº”çš„nodeã€‚ï¼ˆæ ¹æ®ä¸€å®šçš„ç®—æ³•é€‰æ‹©å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œå­˜å‚¨ï¼‰ å®é™…ä¸Šçš„nodeä¸Šçš„primary shardå¤„ç†è¯·æ±‚ï¼Œå°†æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ï¼Œç„¶åå°†æ•°æ®åŒæ­¥åˆ°replica node coordinating nodeï¼Œå¦‚æœå‘ç°primary nodeå’Œæ‰€æœ‰çš„replica nodeéƒ½æå®šä¹‹åï¼Œå°±ä¼šè¿”å›è¯·æ±‚åˆ°å®¢æˆ·ç«¯ è¿™ä¸ªè·¯ç”±ç®€å•çš„è¯´å°±æ˜¯å–æ¨¡ç®—æ³•,æ¯”å¦‚è¯´ç°åœ¨æœ‰3å¤ªæœåŠ¡å™¨,è¿™ä¸ªæ—¶å€™ä¼ è¿‡æ¥çš„idæ˜¯5,é‚£ä¹ˆ5%3&#x3D;2,å°±æ”¾åœ¨ç¬¬2å°æœåŠ¡å™¨ 10.5.3 ESæŸ¥è¯¢æ•°æ®æŸ¥è¯¢æœ‰ä¸ªç®—æ³•å«å€’æ’åº:ç®€å•çš„è¯´å°±æ˜¯:é€šè¿‡åˆ†è¯æŠŠè¯è¯­å‡ºç°çš„idè¿›è¡Œè®°å½•ä¸‹æ¥,å†æŸ¥è¯¢çš„æ—¶å€™å…ˆå»æŸ¥åˆ°å“ªäº›idåŒ…å«è¿™ä¸ªæ•°æ®,ç„¶åå†æ ¹æ®idæŠŠæ•°æ®æŸ¥å‡ºæ¥ æŸ¥è¯¢è¿‡ç¨‹ å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚ç»™coordinate node åè°ƒèŠ‚ç‚¹å°†æœç´¢çš„è¯·æ±‚è½¬å‘ç»™æ‰€æœ‰çš„shardå¯¹åº”çš„primary shard æˆ–replica shard query phaseï¼ˆæŸ¥è¯¢é˜¶æ®µï¼‰ï¼šæ¯ä¸€ä¸ªshard å°†è‡ªå·±æœç´¢çš„ç»“æœï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ä¸€äº›å”¯ä¸€æ ‡è¯†ï¼‰ï¼Œè¿”å›ç»™åè°ƒèŠ‚ç‚¹ï¼Œæœ‰åè°ƒèŠ‚ç‚¹è¿›è¡Œæ•°æ®çš„åˆå¹¶ï¼Œæ’åºï¼Œåˆ†é¡µç­‰æ“ä½œï¼Œäº§å‡ºæœ€åçš„ç»“æœ fetch phaseï¼ˆè·å–é˜¶æ®µï¼‰ ï¼Œæ¥ç€ç”±åè°ƒèŠ‚ç‚¹ï¼Œæ ¹æ®å”¯ä¸€æ ‡è¯†å»å„ä¸ªèŠ‚ç‚¹è¿›è¡Œæ‹‰å–æ•°æ®ï¼Œæœ€ç»ˆè¿”å›ç»™å®¢æˆ·ç«¯ åä¸€ã€JAVAå®¢æˆ·ç«¯åä¸€ç« èŠ‚ä¸‹é¢æ‰€æœ‰æµ‹è¯•çš„ä»£ç ï¼Œå·²ä¸Šä¼ gihubåœ°å€å¦‚ä¸‹ï¼š https://github.com/Jasper-zh/Elasticsearch_Client_Test 11.1 å®¢æˆ·ç«¯ä»‹ç»åœ¨elasticsearchå®˜ç½‘ä¸­æä¾›äº†å„ç§è¯­è¨€çš„å®¢æˆ·ç«¯ï¼šhttps://www.elastic.co/guide/en/elasticsearch/client/index.html è¿›å»é€‰ä¸‹å…¶ä»–ç‰ˆæœ¬ï¼Œæˆ‘æ˜¯8.0.0 ç°åœ¨çš„ç‰ˆæœ¬æ˜¯å·²ç»ä¸æ¨èä½¿ç”¨ High Level REST Clientï¼Œè€Œæ”¯æŒ Java_API_Clientã€‚æˆ‘è¿™é‡Œå°±ä½¿ç”¨Java_API_Clientçš„æ–¹å¼ï¼ˆHigh Level REST Clientå¸‚é¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šæ•™ç¨‹äº†ï¼‰ Java Api Clientæ–‡æ¡£ https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/7.17/index.html 11.2 åˆ›å»ºDemoå·¥ç¨‹11.2.1 åˆå§‹åŒ–é¡¹ç›®åˆ›å»ºä¸€ä¸ªç©ºç™½mavenå·¥ç¨‹ï¼Œå®‰è£…æ–‡æ¡£å¼•å…¥ä¾èµ– 123456789101112&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;co.elastic.clients&lt;/groupId&gt; &lt;artifactId&gt;elasticsearch-java&lt;/artifactId&gt; &lt;version&gt;8.0.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.12.3&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 11.2.2 è·å–API_Clientå‚ç…§æ–‡æ¡£é…ç½®è®¤è¯åˆ›å»ºAPI_Client 123456789101112131415161718192021public static ElasticsearchClient getClient()&#123; // 1.åˆ›å»ºå‡­è¯ CredentialsProvider credentialsProvider = new BasicCredentialsProvider(); credentialsProvider.setCredentials(AuthScope.ANY, new UsernamePasswordCredentials(&quot;elastic&quot;, &quot;eA95WVi0HZarqp*LwoOa&quot;)); // 2.è·å–restå®¢æˆ·ç«¯ï¼Œè®¤è¯ä¹Ÿåœ¨è¿™éƒ¨åˆ†è§£å†³ RestClientBuilder builder = RestClient.builder(new HttpHost(&quot;127.0.0.1&quot;,9201)) .setHttpClientConfigCallback(new RestClientBuilder.HttpClientConfigCallback() &#123; @Override public HttpAsyncClientBuilder customizeHttpClient( HttpAsyncClientBuilder httpClientBuilder) &#123; return httpClientBuilder .setDefaultCredentialsProvider(credentialsProvider); &#125; &#125;); RestClient restClient = builder.build(); // 3.è·å–transportå®¢æˆ·ç«¯ ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper()); // 4.è·å– api å®¢æˆ·ç«¯ ElasticsearchClient client = new ElasticsearchClient(transport); return client;&#125; 11.3 ç´¢å¼•æ“ä½œä¸Šé¢è·å–åˆ°ElasticsearchClientï¼Œå°±å¯ä»¥å°è¯•å»åˆ›å»ºç´¢å¼•äº†ç´¢å¼•è¿™ä¸ªä¸œè¥¿æ­£å¸¸æƒ…å†µæ˜¯ç›´æ¥åœ¨elasticsearchä¸Šåˆ›å»ºå®šä¹‰å¥½è€Œä¸æ˜¯åœ¨ç¨‹åºä¸­ï¼Œæ‰€ä»¥ä¸»è¦å‚è€ƒä¸Šé¢ç›´æ¥ä½¿ç”¨elasticsearchè¯­æ³•åˆ›å»º 1client.indices().create(c -&gt; c.index(&quot;user&quot;)); æ³¨æ„ï¼šè¿™é‡Œç”±ä¸€ä¸ªé—®é¢˜å°±å°±æ˜¯ESä¸€ç›´é»˜è®¤æ˜¯å¼€å¯çš„sslï¼Œåœ¨ä¸Šé¢çš„å­¦ä¹ ä½¿ç”¨å½“ä¸­ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨httpsè®¿é—®ï¼Œåœ¨ç°åœ¨çš„è¿™ä¸ªå®¢æˆ·ç«¯æ„æˆå½“ä¸­åˆ›å»ºçš„RestClientæ˜¯è¯·æ±‚æ—¶æ˜¯httpå› æ­¤æœ€ç»ˆå‘é€è¯·æ±‚ä¼šå‡ºç°Connetion is closed çš„å¼‚å¸¸.æˆ‘è¿™é‡Œå°†xpack.security.http.ssl:å…³äº†é‡æ–°å¯åŠ¨äº†ES headæ’ä»¶æŸ¥çœ‹ æˆåŠŸåˆ›å»ºç´¢å¼•ï¼Œé»˜è®¤çš„ä¸åˆ†ç‰‡å’Œ1ä¸ªå‰¯æœ¬ã€‚é‚£è¿™æ˜¯ç®€å•çš„åˆ›å»ºç´¢å¼•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å»åˆ›å»ºç´¢å¼•æ—¶é…ç½®fieldåŸŸä¸settingè®¾ç½®ã€‚å°±å’Œæ•°æ®åº“åˆ›å»ºè¡¨åŒæ—¶é…ç½®å­—æ®µå’Œå…¶ä»–è®¾ç½®ä¿¡æ¯ã€‚è™½ç„¶ä¸ä¼šä¸€èˆ¬ç”¨ç¨‹åºåˆ›å»ºä½†è¿˜æ˜¯æ¼”ç¤ºè®°å½•ä¸‹ã€‚é¡ºä¾¿è®°å½•ä¸‹æ‰¾æ¥å£çš„è¿‡ç¨‹ å®˜æ–¹æ¥å£æ–‡æ¡£ï¼šhttps://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.1.0/index.html æºç åœ°å€ï¼šhttps://github.com/elastic/elasticsearch-java/ é€šè¿‡ElasticsearchClientçš„Indiceså®é™…ä¸Šæ˜¯æ‹¿åˆ°äº†ElasticsearchIndicesClient ElasticsearchIndicesClientçš„createæ–¹æ³•æ˜¯æœ‰é‡è½½ä¸¤ä¸ªï¼Œä¹Ÿå°±æ˜¯ä¼ å…¥CreateIndexRequestå¯¹è±¡ï¼Œåˆ›å»ºè¿™ä¸ªå¯¹è±¡éœ€ä½¿ç”¨å…¶æ„é€ å™¨è¿›è¡Œåˆ›å»ºï¼Œç¬¬äºŒä¸ªæ–¹æ³•å°±æ˜¯é€šè¿‡å‡½æ•°å¼æ¥å£é‚£ä¹ˆæˆ‘ä»¬åªç”¨å†™æ„é€ å™¨æ„é€ é“¾å³å¯ï¼Œå®ƒçš„æ–¹æ³•é‡Œé¢ä¼šä¼ å…¥æ„é€ å™¨æ‰§è¡Œæˆ‘ä»¬çš„æ„é€ é“¾å¾—åˆ°CreateIndexRequestå†è°ƒç”¨ä¹‹å‰çš„createæ–¹æ³•ã€‚ ç¬¬äºŒä¸ªæ–¹æ³•å°±æ˜¯ä¸ºäº†è®©ç¬¬ä¸€ä¸ªæ–¹æ³•å¯ä»¥å†™çš„æ›´æ–¹ä¾¿æä¾›äº†å‡½æ•°å¼æ¥å£ç›´æ¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ ä¹Ÿå°±æ˜¯é€šè¿‡æ„é€ å™¨CreateIndexRequestBuilderè°ƒç”¨index(â€œuserâ€)åˆ›å»ºçš„CreateIndexRequest çœ‹çœ‹æ„é€ å™¨æ˜¯æ€ä¹ˆåˆ›å»ºçš„CreateIndexRequestå¯¹è±¡ ![carbon20220322 (2)](https://gitee-imagehost.oss-cn-beijing.aliyuncs.com/image_host/carbon20220322 (2).png) å°±æ˜¯ä¸€ä¸ªå†ç®€åŒ–ç‰ˆä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ„é€ å™¨çš„å†™æ³•ï¼Œä»è¿™ä¸ªæ„é€ å™¨çš„ä»£ç ä¸­ä¹Ÿèƒ½çŸ¥é“é™¤äº†æŒ‡å®šindexåçš„å±æ€§ä¹‹å¤–è¿˜æœ‰å„ç§å„æ ·çš„å±æ€§åŒ…æ‹¬æ˜ å°„æˆ–è€…è®¾ç½®ç­‰ç­‰ã€‚ åœ¨åˆ›å»ºæ—¶è¦é…ç½®æ˜ å°„ï¼Œé‚£ä¹ˆå°±é€šè¿‡mappingsæ–¹æ³•ä¼ å…¥TypeMappingå³å¯. é‚£ä¹ˆTypeMappingä¹Ÿæ˜¯é€šè¿‡å®ƒçš„æ„é€ å™¨è¿›è¡Œæ„å»ºä¸”æä¾›äº†å‡½æ•°å¼æ¥å£çš„æ–¹æ³• æ„å»ºé¡¹ä¸­å…¶ä¸­è¿™ä¸‰ä¸ªæ˜¯é…ç½®å­—æ®µä¿¡æ¯çš„ã€‚åŒ…å«ä¸¤ä¸ªå‚æ•°å…¶ä¸­ä¸€ä¸ªæ˜¯å­—æ®µåStringç±»å‹å¦ä¸€ä¸ªæ˜¯è¿™ä¸ªå­—æ®µçš„ä¸€äº›é…ç½®æ˜¯Propertyç±»å‹ã€‚ Propertyå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œä¹Ÿæä¾›äº†æ„é€ å™¨ã€‚ç›´æ¥ä½¿ç”¨Propertyçš„æ„é€ å™¨å»åˆ›å»ºï¼Œä¸”ä¹Ÿæä¾›äº†å‡½æ•°å¼æ¥å£å‚æ•°ï¼Œå°±ç›´æ¥ä½¿ç”¨lambdaå»æ‰§è¡Œæ„é€ é“¾å³å¯ã€‚ å¦‚ä¸‹ç¤ºä¾‹ï¼šåˆ›å»ºäº†ä¸€ä¸ªåä¸ºproductçš„ç´¢å¼•ä¸”æœ‰ä¸€ä¸ªâ€œnameâ€çš„æ˜ å°„å­—æ®µï¼Œå­—æ®µçš„å±æ€§è®¾ç½®äº†index(trueï¼‰æ˜¯å¦ç´¢å¼•ã€‚ 1client.indices().create(c -&gt; c.index(&quot;product&quot;).mappings(t -&gt; t.properties(&quot;name&quot;, p -&gt; p.text(text -&gt; text.index(true))))); ![carbon20220322 (3)](https://gitee-imagehost.oss-cn-beijing.aliyuncs.com/image_host/carbon20220322 (3)-16479309196482.png) è¿™ç§å½¢å¼ç”¨çš„å°‘çš„è¯å†™èµ·æ¥ä¼šæœ‰ç‚¹ç»•ï¼Œå®é™…ä¸Šå°±æ˜¯å…ˆç´¢å¼•åº“åä»¥åŠæ˜ å°„ï¼Œç„¶ååœ¨æ˜ å°„é‡Œé¢é…ç½®typeMappingså®é™…æ˜¯åŒ…å«å„ä¸ªpropertyï¼Œå¯¹äºpropertyé‡Œé¢é™¤äº†å­—æ®µåç§°è¿˜æœ‰å­—æ®µçš„é…ç½®å¯¹è±¡ï¼Œtextè®¾ç½®å®Œindexè¿˜å¯ä»¥ç»§ç»­è®¾ç½®åˆ†è¯å™¨analyzerâ€¦. é™¤äº†æ·»åŠ è¿˜æœ‰åˆ é™¤ä»¥åŠç´¢å¼•å…¶ä»–çš„é…ç½®æ“ä½œä¹Ÿéƒ½å¯ä»¥åœ¨å®˜æ–¹Javaæ–‡æ¡£ä¸­ElasticsearchIndicesClientç±»æ‰¾åˆ°çœ‹å°±ä¸ä¸€ä¸€æ¼”ç¤ºäº† åŸºæœ¬ä¸Šå®ƒæä¾›çš„æ¥å£å¯¹è±¡åŸºæœ¬ä¸Šéƒ½æ˜¯å®Œå…¨åº”ç”¨äº†lambdaä»¥åŠæ„é€ å™¨ã€‚å› ä¸ºä¹‹å‰å†™è¿‡ä¸€ç¯‡è®¾è®¡æ¨¡å¼å½“ä¸­çš„æ„é€ å™¨ï¼Œå› æ­¤ä»£ç çœ‹çš„è¿˜æ˜¯æ¯”è¾ƒèˆ’é€‚çš„ï¼Œèƒ½å¤Ÿgetåˆ°å®ƒçš„ä¸€ä¸ªä»£ç è®¾è®¡ 11.4 æ–‡æ¡£æ“ä½œæ ¹æ®ä¸Šé¢çš„ä¸€äº›å‘½åè§„åˆ™è¿™é‡Œå¯ä»¥çŒœæµ‹ä¸€ä¸‹å®ƒçš„æ–‡æ¡£æ“ä½œå¯èƒ½æ˜¯ç”±ä¸€ä¸ªå«åšElasticsearchDocsClienï¼Œå»æ–‡æ¡£çœ‹ä¸€ä¸‹ å®é™…ä¸Šä¸æ˜¯çš„ï¼Œå°±æ˜¯ElasticsearchClientæä¾›çš„æ“ä½œ å®ƒè¿™ä¸Šé¢æœ‰å¾ˆå¤šï¼Œæˆ‘å°±æŠŠå…³äºæ·»åŠ ã€åˆ é™¤ã€è·å–ã€æ›´æ–°ä»¥åŠæ‰¹é‡åˆ—å‡ºæ¥æ¼”ç¤ºä¸‹ã€‚ 11.4.1 æ·»åŠ æ–‡æ¡£å…ˆçœ‹ä¸‹æ·»åŠ ï¼Œä½¿ç”¨indexæ–¹æ³•ä¼ å…¥IndexRequestå¯¹è±¡ï¼ŒåŒæ ·ä½¿ç”¨æ„é€ å™¨ï¼Œä¸”è¿™ä¸ªæ–¹æ³•ä¹Ÿæä¾›å‡½æ•°å¼æ¥å£ï¼Œå†™ä¸€ä¸ªæ„é€ é“¾å³å¯ã€‚ é‚£ä¹ˆå°±çœ‹ä¸‹IndexRequestæœ‰å“ªäº›å±æ€§éœ€è¦æä¾›ï¼Œçœ‹ä¸‹æ„é€ å™¨æä¾›çš„å±æ€§æ–¹æ³•ã€‚ æ²¡æœ‰å¤šå°‘ï¼Œé¡¹ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨Kibanaå»æ·»åŠ æ–‡æ¡£å°±æ˜¯ä½¿ç”¨POSTè¯·æ±‚ç„¶åæ¥ç´¢å¼•åç„¶åï¼ˆ_doc ç±»å‹æ²¡æœ‰äº†ï¼‰è¿˜æœ‰æŒ‡å®šæ–‡æ¡£idï¼Œæœ€åå°±è¯·æ±‚ä½“äº†ä¹Ÿå°±æ˜¯å®ä½“ å¯¹åº”åˆ°è¿™é‡Œé€šè¿‡index(String)æŒ‡å®šç´¢å¼• id(String) æŒ‡å®šidã€‚é‚£ä¹ˆdocument(TDocument) å³ä½œä¸ºè¯·æ±‚å¤´ 1client.index(indexRequestBuild -&gt; indexRequestBuild.index(&quot;product&quot;).id(&quot;001&quot;).document(new Product(&quot;å°ç±³12&quot;,4699))); headæ’ä»¶æŸ¥çœ‹ï¼Œå·²ç»æˆåŠŸæ’å…¥æ•°æ® 11.4.2 è·å–æ–‡æ¡£ç„¶åçœ‹ä¸€ä¸‹GETçš„ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯å·®ä¸å¤šå®ƒçš„ä½¿ç”¨è¿˜æ˜¯æŒºç»Ÿä¸€çš„ã€‚å°±æ˜¯ä¸¤ä¸ªå‚æ•°ä¸€ä¸ªæ˜¯GetRequestå¯¹è±¡é‡Œé¢å¾ˆå¤šå‚æ•°æˆ‘ä»¬æŒ‡å®šç´¢å¼•ä»¥åŠæ–‡æ¡£idå³å¯ï¼Œç¬¬äºŒå°±æ˜¯æ•°æ®å°è£…Javaçš„classå¯¹è±¡. 123GetResponse&lt;Product&gt; response = client.get(getRequestBuild -&gt; getRequestBuild.index(&quot;product&quot;).id(&quot;001&quot;),product.class);System.out.println(response.source()); 11.4.3 ä¿®æ”¹æ–‡æ¡£ä¿®æ”¹æ–‡æ¡£ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨indexæ–¹æ³•ï¼Œå®ƒå³æ˜¯æ·»åŠ ä¹Ÿæ˜¯æ›´æ–°ï¼Œidå­˜åœ¨åˆ™æ˜¯æ›´æ–°ï¼Œæˆ‘ä»¬å°†åˆšåˆšçš„å°ç±³12æ›´æ–°ä¸‹åç§° 1client.index(indexRequestBuild -&gt; indexRequestBuild.index(&quot;product&quot;).id(&quot;001&quot;).document(new Product(&quot;å°ç±³å…¨æ–°ç‰ˆæœ¬ 15&quot;,4699))); æˆåŠŸå®Œæˆæ›´æ–° ä¹Ÿæä¾›äº†updateæ–¹æ³•ä¸“ä¸ºä¿®æ”¹æ“ä½œ å¯¹äºindex()æ–¹æ³•è€Œè¨€æ˜¯å®ƒçš„æ›´æ–°æ˜¯å…¨é‡æ›´æ–°ï¼Œå¯¹äºupdateæ–¹æ³•å®ƒæä¾›äº†å¤šç§æ›´æ–°é…ç½®ï¼šæ™®é€šçš„doc()æ˜¯æä¾›äº†éƒ¨åˆ†æ›´æ–°ä¹Ÿå¯ä»¥è®¾ç½®docAsUpsertç­‰ç­‰ã€‚å½“æ–‡æ¡£idä¸å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ä½¿ç”¨upset()æ–¹æ³•å°±å¯ä»¥æ›´æ–°æˆ–æ·»åŠ äº†ã€‚ ç¤ºä¾‹ æ›´æ–°å‚æ•°Productå¯¹è±¡å±æ€§nameä¸ºç©º priceä¸º2999. å®Œæˆæ›´æ–°ånameä¸ºåŸæ¥å€¼ä»…æ›´æ–°price 1client.update(updateRequestBuild -&gt; updateRequestBuild.index(&quot;product&quot;).id(&quot;001&quot;).doc(new Product(2999)), Product.class); 11.4.4 åˆ é™¤æ–‡æ¡£å†™äº†ä¸Šé¢å‡ æ¡ä¹‹ååˆ é™¤æ“ä½œéƒ½ä¼°è®¡ä¸ç”¨å…·ä½“çœ‹æ–‡æ¡£å³å¯çŒœå‡ºäº† 12// æ„é€ å™¨çš„å‚æ•°åå°±ä¸åƒä¸Šé¢å†™é‚£ä¹ˆå…·ä½“äº†ç›´æ¥ç”¨bè¡¨ç¤ºclient.delete(b -&gt; b.index(&quot;product&quot;).id(&quot;001&quot;)); 11.4.5 æ‰¹é‡æ“ä½œ å¯¹äºBulkRequestæ¥è¯´ä¸»è¦å°±æ˜¯æ“ä½œä¸€ä¸ªå“ªä¸ªç´¢å¼•index(String)ï¼ŒäºŒæ˜¯è¯·æ±‚ä½“å“ªäº›å†…å®¹ä¹Ÿå°±æ˜¯operations é‚£ä¹ˆoperationsé‡Œé¢å°±æ˜¯å„ä¸ªBulkOperationï¼Œä¹Ÿå°±æ˜¯æ‰¹é‡é‡Œé¢æ¯ä¸ªå®ä½“çš„ä¿¡æ¯æ˜¯åœ¨BulkOperationã€‚é‚£å°±çœ‹çœ‹å®ƒå‘—ï¼š BulkOperationå†…éƒ¨çš„å±æ€§æ˜¯åŒ…å«å„ç§å¢åˆ æ”¹å¯¹è±¡ï¼Œè€Œå¢åˆ æ”¹å¯¹è±¡é‡Œé¢å°±æ˜¯å®ä½“ã€‚ æ¥ä¸‹æ¥å°±è¯•ä¸€è¯• æˆ‘å…ˆå‡†å¤‡3æ¡æ•°æ®ï¼Œç„¶åå®Œæˆæ‰¹é‡è¿›è¡Œ5ä¸ªBulkOperationæ“ä½œï¼Œåˆ†ä¸º3ä¸ªæ·»åŠ 2ä¸ªåˆ é™¤1ä¸ªä¿®æ”¹ 12345678910111213public static void bulkDoc() throws IOException &#123; ArrayList&lt;BulkOperation&gt; list = new ArrayList&lt;&gt;(); list.add(new BulkOperation.Builder().create(b -&gt; b.id(&quot;004&quot;).document(new Product(&quot;å†°ç®±&quot;, 2999))).build()); list.add(new BulkOperation.Builder().create(b -&gt; b.id(&quot;005&quot;).document(new Product(&quot;ç”µè§†&quot;, 3299))).build()); list.add(new BulkOperation.Builder().create(b -&gt; b.id(&quot;006&quot;).document(new Product(&quot;æŠ•å½±ä»ª&quot;, 3999))).build()); list.add(new BulkOperation.Builder().delete(b -&gt; b.id(&quot;001&quot;)).build()); list.add(new BulkOperation.Builder().delete(b -&gt; b.id(&quot;002&quot;)).build()); boolean add = list.add(new BulkOperation.Builder().index(b -&gt; b.id(&quot;003&quot;).document(new Product(&quot;ä½³èƒ½M6II&quot;, 6900))).build()); // clientæ‰§è¡Œbulkä¼ å…¥operationså¯¹è±¡ EsClientUtil.getClient().bulk(b -&gt; b.index(&quot;product&quot;).operations(list)); // å…³é—­client EsClientUtil.closeClient();&#125; æ·»åŠ äº†004åˆ°006ã€åˆ é™¤äº†001å’Œ002ã€ä»¥åŠä¿®æ”¹äº†003çš„nameä»¥åŠprice headæ’ä»¶æŸ¥çœ‹ï¼šä¸é¢„æœŸä¸€è‡´ 11.5 æŸ¥è¯¢æ•°æ®clientçš„searchæ–¹æ³•ç”¨æ¥è¿›è¡ŒæŸ¥è¯¢ ä¸»è¦æ˜¯æ„å»ºæŸ¥è¯¢è¯·æ±‚å¯¹è±¡SearchRequestï¼Œçœ‹ä¸‹å®ƒçš„ä¸€äº›æ„å»ºå‚æ•° 11.5.1 æŸ¥è¯¢æ‰€æœ‰match_allå¯¹äºæˆ‘ä»¬æœ€ç®€å•çš„æŸ¥è¯¢ï¼šæŸ¥è¯¢å…¨éƒ¨ 123456GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;&#125; éœ€è¦æŒ‡å®šçš„å°±æ˜¯ç´¢å¼•ï¼Œä»¥åŠæŸ¥è¯¢å®ä½“é‡Œçš„queryå±æ€§ å¯¹äºè¿™é‡Œæ¥è¯´æ„å»ºSearchRequestå¯¹è±¡ï¼Œindex(String)ç”¨æ¥æŒ‡å®šç´¢å¼•ï¼Œqueryç”¨æ¥åˆ›å»ºæŸ¥è¯¢å®ä½“ æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹queryå®ä½“æ„å»ºçš„å±æ€§ï¼Œä»¥ä¸‹æœ‰éå¸¸å¤šï¼Œå…¶ä¸­å°±æœ‰matchAll å®ƒé‡Œé¢æ˜¯MatchQueryè¿™äº›ä¹Ÿéƒ½å¯ä»¥å†å»çœ‹ã€‚å¯¹äºæŸ¥è¯¢å…¨éƒ¨æ¥è¯´å®ƒé‡Œé¢çš„MatchQueryå°±ä¸¤ä¸ªå±æ€§å¯ä»¥æŒ‡å®šä¸€ä¸ªæ˜¯æŸ¥è¯¢åç§°queryNameè¿˜æœ‰ä¸ªæ˜¯æƒé‡boost 12345678public static void queryAll() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search(b -&gt; b.index(&quot;product&quot;).query( q -&gt; q.matchAll(m -&gt; m.queryName(&quot;ä¸€ä¸ªæŸ¥è¯¢&quot;)) ), Product.class); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; 11.5.2 å…³é”®è¯åŒ¹é…matchä¹Ÿæ˜¯ä¸€æ ·ç»™searchä¼ å…¥SearchRequestï¼Œåªæ˜¯è¿™ä¸ªå¯¹è±¡çš„Queryç±»å‹çš„å±æ€§å€¼ä¸ä¸€æ · Queryæ˜¯å…·å¤‡ä¸¤ä¸ªå±æ€§ä¸€ä¸ªæ˜¯ _kind ä¸€ä¸ªæ˜¯ _valueï¼Œæ„é€ å™¨çš„ä¸åŒæ„å»ºæ–¹æ³•æŒ‡å®šQueyæŸ¥è¯¢ç±»å‹ï¼ˆmatchã€match_allã€termç­‰ç­‰ï¼‰ï¼Œè€Œå‚æ•°å¯¹è±¡æŒ‡å®šè¿™ä¸ªæŸ¥è¯¢ä¸‹çš„å¤šä¸ªé…ç½®æ‰€ä»¥å¯¹è±¡åŒ…è£¹ã€‚ 12345678public static void queryMatch() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search(b -&gt; b.index(&quot;product&quot;).query( q -&gt; q.match(m -&gt; m.field(&quot;name&quot;).query(&quot;ä½³èƒ½&quot;)) ), Product.class); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; 11.5.3 TermæŸ¥è¯¢åŒæ ·ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨TermæŸ¥è¯¢ä¸å¯¹æŸ¥è¯¢å€¼è¿›è¡Œåˆ†è¯ 123456789public static void queryTerm() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search(b -&gt; b.index(&quot;product&quot;).query( q -&gt; q.term(m -&gt; m.field(&quot;name&quot;).value(&quot;ä½³èƒ½&quot;)) ), Product.class); EsClientUtil.closeClient(); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; å¾ˆæ˜æ˜¾æŸ¥ä¸åˆ°ç»“æœï¼Œå› ä¸ºæ–‡æ¡£çš„è¯æ¡æ²¡æœ‰å«ä½³èƒ½çš„ï¼Œä½³èƒ½M6II é»˜è®¤åˆ†è¯è¿™ä¸ªä¸¤ä¸ªå­—ä¼šåˆ’åˆ†æˆä¸¤ä¸ªè¯æ¡ã€‚ 11.5.4 èŒƒå›´æŸ¥è¯¢Rangeä¹Ÿæ˜¯ä¸€æ ·æ‰¾åˆ°queryç±»ï¼Œé‡Œé¢æœ‰range(xxx)æ–¹æ³•è¿›è¡Œé…ç½®rangeç±»å‹ï¼Œä¼ å‚æ˜¯æ˜¯ä¸€ä¸ªå¯¹è±¡åŒ…å«æ¯”è¾ƒç¬¦å·ä»¥åŠå€¼å­—æ®µç­‰å±æ€§å†…å®¹ 123456789public static void queryRange() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search(b -&gt; b.index(&quot;product&quot;).query( q -&gt; q.range(m -&gt; m.field(&quot;price&quot;).gte(JsonData.of(3000))) ), Product.class); EsClientUtil.closeClient(); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; 11.5.5 _sourceè¿‡æ»¤ä¸€èˆ¬æŸ¥è¯¢å°±ä¼šè¿”å›å‘½ä¸­æ–‡æ¡£çš„å…¨éƒ¨å­—æ®µï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³è¦å…¶ä¸­æŒ‡å®šå­—æ®µå°±å¯ä»¥ä½¿ç”¨_sourceè¿‡æ»¤ åœ¨ä¸Šé¢ä½¿ç”¨kibanaè¯·æ±‚æ˜¯å¦‚ä¸‹æ ¼å¼ï¼š 1234567GET /goods/_search&#123; &quot;_source&quot;: [&quot;name&quot;,&quot;price&quot;], &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;&#125; é‚£ä¹ˆçŒœæƒ³è¿™ä¸ªå®¢æˆ·ç«¯çš„è®¾è®¡ï¼Œåº”è¯¥æ˜¯ç»™searchæ–¹æ³•ä¼ å…¥çš„SearchRequestå¯¹è±¡ï¼Œæ˜¯æœ‰å¤šä¸ªå­—æ®µå±æ€§ã€‚ä¸Šé¢æˆ‘ä»¬åˆ›å»ºåªæŒ‡å®šäº†Queryç±»å‹å±æ€§ã€‚ çœ‹æ–‡æ¡£ï¼š é‚£ä¹ˆsourceçš„ä¸»è¦å†…å®¹é…ç½®åœ¨SourceConfigï¼ŒæŸ¥çœ‹SourceConfigï¼Œæœ€ç»ˆæ˜¯é…ç½®åœ¨SourceFilter æŸ¥çœ‹SourceFilterï¼Œåˆ°è¿™ä¸ªåœ°æ–¹æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿›è¡Œé…ç½®äº†ä¹Ÿå°±æ˜¯ä¹‹å‰å­¦çš„_sourceçš„excludeså’Œincludes æµ‹è¯• å°±ç»™ä¸Šé¢çš„èŒƒå›´æŸ¥è¯¢ï¼ŒåŠ ä¸ªè¿‡æ»¤åªæŸ¥å‡ºnameå­—æ®µ 123456789101112public static void queryFilter() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search( b -&gt; b.index(&quot;product&quot;) .source(s -&gt; s.filter(f -&gt; f.includes(&quot;name&quot;))) .query(q -&gt; q.range(m -&gt; m.field(&quot;price&quot;).gte(JsonData.of(3000))) ), Product.class); EsClientUtil.closeClient(); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; 11.6 æ’åºä¸€æ ·çš„çœ‹ä¸‹å®ƒæœ¬æ¥çš„ä¸€ä¸ªç»“æ„ 123456789GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;, &quot;sort&quot;: [ &#123; &quot;price&quot;: &#123; &quot;order&quot;: &quot;asc&quot;&#125; &#125; ]&#125; æŸ¥è¯¢å®ä½“å¯¹è±¡é‡Œé¢ï¼Œé™¤äº†queryå°±æ˜¯sortä¸”sortæ˜¯ä¸€ä¸ªæ•°ç»„å¯ä»¥é…ç½®å¤šä¸ªå­—æ®µæ’åº çœ‹ä¸‹æ–‡æ¡£searchRequestä¸‹ï¼Œå…¶ä¸­å°±æ˜¯ä¸sort() ï¼Œä¸”ä¼ å…¥çš„å°±æ˜¯ä¸€ä¸ªåˆ—è¡¨æ¯ä¸ªé¡¹æ˜¯ä¸€ä¸ªSortOptionså¯¹è±¡ã€‚é‚£ä¹ˆè¿™ä¸ªå¯¹è±¡è‚¯å®šåº”è¯¥åŒ…å«å­—æ®µåä»¥åŠæ’åºæ–¹å¼ çœ‹ä¸‹SortOptionsçš„æ„é€ ï¼Œå¯ä»¥çŸ¥é“å®ƒçš„ç»“æ„å®Œå…¨å’Œä¸Šé¢RESTè¯·æ±‚ä¾‹å­ä¸€æ ·ã€‚è¿˜åˆ†ä¸€ä¸ªï¼ˆå­—æ®µï¼‰ç±»å‹çš„å¯¹è±¡é‡Œé¢åŒ…å«æ’åºæ–¹å¼order çœ‹ä¸‹é¢FieldSortçš„æ„é€ ï¼Œé‡Œé¢å°±åŒ…å«fieldå’ŒSortOrderï¼Œæ‰€ä»¥å¾—å†çœ‹ä¸‹SortOrder é‚£ä¹ˆSortOrderå°±æ˜¯ä¸ªæšä¸¾ï¼ŒåŒ…å«é™åºä¸å‡åº æµ‹è¯• ä»·æ ¼ä»ä½åˆ°é«˜ 123456789101112public static void querySort() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search( b -&gt; b.index(&quot;product&quot;) .sort(s -&gt; s.field(v -&gt; v.field(&quot;price&quot;).order(SortOrder.Asc))) .query(q -&gt; q.matchAll(v -&gt; v.queryName(&quot;&quot;)) ), Product.class); EsClientUtil.closeClient(); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; sortæ˜¯å¯ä»¥ä¼ Listçš„æˆ–è€…å¤šä¸ªçš„ï¼Œæˆ‘è¿™é‡Œåªä¼ äº†ä¸€ä¸ª 11.7 åˆ†é¡µè€æ ·å­çœ‹ä¸‹åŸæ¥çš„è¯·æ±‚ç»“æ„ï¼ŒåŸºæœ¬ä¸Šå®¢æˆ·ç«¯çš„å¯¹è±¡å±‚çº§ç»“æ„ä¹Ÿä¸€æ ·ã€‚ 12345678GET /goods/_search&#123; &quot;query&quot;: &#123; &quot;match_all&quot;: &#123;&#125; &#125;, &quot;from&quot;: 0, &quot;size&quot;: 2&#125; è¿™ä¸ªçœ‹èµ·æ¥å¥½åƒå±‚çº§ç»“æ„ä¸å¤šfromå’Œsizeç›´æ¥å¯¹åº”äº†åŸºæœ¬ç±»å‹ï¼Œçœ‹çœ‹Javaå®¢æˆ·ç«¯æ–‡æ¡£ æœç„¶åœ¨SearchRequestå¯¹è±¡ä¸‹è¿™ä¸¤ä¸ªå±æ€§ç›´æ¥ä¼ æ•´æ•°å‹ï¼Œè€Œæ˜¯å‘ä¸Šé¢åµŒå¥—å¾ˆå¤šå¯¹è±¡ã€‚ æµ‹è¯• 12345678910111213public static void queryPage() throws IOException &#123; SearchResponse&lt;Product&gt; search = EsClientUtil.getClient().search( b -&gt; b.index(&quot;product&quot;) .from(0) .size(2) .query(q -&gt; q.matchAll(v -&gt; v.queryName(&quot;&quot;)) ), Product.class); EsClientUtil.closeClient(); for(Hit&lt;Product&gt; obj : search.hits().hits())&#123; System.out.println(obj.source()); &#125;&#125; åäºŒã€Spring Data Elasticsearchä¸Šé¢é€šè¿‡äº†Javaå®¢æˆ·ç«¯çš„å­¦ä¹ ï¼Œä»å¼€å§‹æ¯”è¾ƒæ¨¡ç³Šåˆ°ç°åœ¨åŸºæœ¬ç›¸å¯¹å·²ç»ç†Ÿæ‚‰ã€‚ä½†åœ¨çœŸæ­£ä½¿ç”¨è¿˜æ˜¯éœ€è¦è¿›ä¸€æ­¥å°è£…æ¥ä¸‹æ¥å¯ä»¥å¼€å§‹å­¦ä¹ Springæä¾›çš„elasticsearchç»„ä»¶ï¼šSpring Data Elasticsearchã€‚ 12.1 ä»€ä¹ˆæ˜¯SpringDataElasticsearchSpring Data Elasticsearchï¼ˆä»¥åç®€ç§°SDEï¼‰æ˜¯Spring Dataé¡¹ç›®ä¸‹çš„ä¸€ä¸ªå­æ¨¡å—ã€‚ Spring Data çš„ä½¿å‘½æ˜¯ç»™å„ç§æ•°æ®è®¿é—®æä¾›POJOä¸ºæ ¸å¿ƒçš„è½»æ¾çš„æ•°æ®äº¤äº’ï¼Œä¸ç®¡æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚MySQLï¼‰ï¼Œè¿˜æ˜¯éå…³ç³»æ•°æ®åº“ï¼ˆå¦‚Redisï¼‰ï¼Œæˆ–è€…ç±»ä¼¼Elasticsearchè¿™æ ·çš„ç´¢å¼•æ•°æ®åº“ã€‚ä»è€Œç®€åŒ–å¼€å‘äººå‘˜çš„ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ Spring Data Elasticsearchçš„é¡µé¢ï¼šhttps://spring.io/projects/spring-data-elasticsearch ç‰¹å¾ï¼š æ”¯æŒSpringçš„åŸºäº @Configuration çš„javaé…ç½®æ–¹å¼ï¼Œæˆ–è€…XMLé…ç½®æ–¹å¼ æä¾›äº†ç”¨äºæ“ä½œESçš„ä¾¿æ·å·¥å…·ç±» ElasticsearchTemplate ã€‚åŒ…æ‹¬å®ç°æ–‡æ¡£åˆ°POJOä¹‹é—´çš„è‡ªåŠ¨æ™ºèƒ½æ˜ å°„ã€‚ åˆ©ç”¨Springçš„æ•°æ®è½¬æ¢æœåŠ¡å®ç°çš„åŠŸèƒ½ä¸°å¯Œçš„å¯¹è±¡æ˜ å°„ åŸºäºæ³¨è§£çš„å…ƒæ•°æ®æ˜ å°„æ–¹å¼ï¼Œè€Œä¸”å¯æ‰©å±•ä»¥æ”¯æŒæ›´å¤šä¸åŒçš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥å®šä¹‰JavaBeanï¼šç±»åã€å±æ€§ æ ¹æ®æŒä¹…å±‚æ¥å£è‡ªåŠ¨ç”Ÿæˆå¯¹åº”å®ç°æ–¹æ³•ï¼Œæ— éœ€äººå·¥ç¼–å†™åŸºæœ¬æ“ä½œä»£ç ï¼ˆç±»ä¼¼mybatisï¼Œæ ¹æ®æ¥å£è‡ªåŠ¨å¾—åˆ°å®ç°ï¼‰ã€‚å½“ç„¶ï¼Œä¹Ÿæ”¯æŒäººå·¥å®šåˆ¶æŸ¥è¯¢ ç›®å‰ç”±äºSpringBootçš„ç‰ˆæœ¬è¿˜ä¸æ”¯æŒES8çš„ç‰ˆæœ¬ä¸æ”¯æŒæ–°çš„å®¢æˆ·ç«¯ï¼Œå› æ­¤è¿™ä¸€éƒ¨åˆ†æš‚æ—¶æš‚åœ","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰ï¼š7ã€è£…é¥°å™¨æ¨¡å¼","slug":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰ï¼š7ã€è£…é¥°å™¨æ¨¡å¼","date":"2022-03-09T01:54:27.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2022/03/09/è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰ï¼š7ã€è£…é¥°å™¨æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2022/03/09/%E8%BD%BB%E6%9D%BE%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E7%BB%93%E6%9E%84%E5%9E%8B%EF%BC%89%EF%BC%9A7%E3%80%81%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ æœ¬ç¯‡å†…å®¹å…³äºç»“æ„å‹è®¾è®¡æ¨¡å¼ä¸­çš„è£…é¥°å™¨æ¨¡å¼çš„è®¾è®¡ä¸å®ç°ã€‚ å®šä¹‰ è£…é¥°æ¨¡å¼æŒ‡çš„æ˜¯åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ã€‚å®ƒæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è£…é¥°æ¥åŒ…è£¹çœŸå®çš„å¯¹è±¡ã€‚â€”â€”ç™¾åº¦ç™¾ç§‘ åœ¨ä¸æ”¹å˜åŸç±»æ–‡ä»¶ä¸‹ï¼Œå»æ‰©å±•åŠŸèƒ½å…¶å®å¤§å®¶éƒ½çŸ¥é“å°±æ˜¯é€šè¿‡ç»§æ‰¿å®ç°ã€‚è¿™é‡Œç›¸å½“äºç»§æ‰¿ä¹‹å¤–çš„å¦ä¸€ç§æ–¹å¼ã€‚ç™¾ç§‘å®šä¹‰è¯´åˆ°æ‰©å±•æ˜¯é€šè¿‡ç”¨è£…é¥°æ¥åŒ…è£¹çœŸå®çš„å¯¹è±¡ï¼Œè¿™å¥½åƒå’Œå‰ä¸€ç¯‡é€‚é…å™¨æ¨¡å¼æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„. å‡è®¾ä½ æœ€åˆå»ä¹°ç¢—é¢ï¼Œé‚£ä¹ˆé€šè¿‡é€‰æ‹©çš„ä¸€ä¸ªæ—©é¤åº—çš„è·å–ä¸€ä»½æ—©é¤ã€‚æœ€åˆæ—©é¤åº—åªæœ‰é¢åº—åªèƒ½åˆ›å»ºé¢æ¡åæ¥ä½ å‘ç°ä¸è¡Œä¸€ç‚¹éƒ½ä¸ä¸°å¯Œå¤šå½©ï¼Œä½ æœ‰å¯èƒ½æ—©é¤æ˜¯é€‰åŒ…å­ï¼Œæˆ–è€…æ˜¯é€‰ä¸€ç¢—ç²¥ï¼Œè±†é¥¼ç­‰ç­‰ã€‚ æ‰©å±•åŠŸèƒ½æˆ‘ä»¬è¦æ€ä¹ˆåšå°±å°±å¾ˆæ¸…æ¥šäº†ï¼Œå°±æ˜¯ç»§æ‰¿ã€‚é€šè¿‡å­ç±»æ¥å¯¹æŠ½è±¡çš„æ—©é¤åº—è¿›è¡Œæ‰©å±•ï¼Œå°±æœ‰äº†å¦‚ä¸‹å„å¼å„æ ·çš„å…·ä½“æ—©é¤åº—ï¼šçœ‹è¿™ä¸å°±è§£å†³äº†ï¼Œé€šè¿‡å­ç±»æœ‰å„å¼å„æ ·çš„æ—©é¤åº—ï¼Œä½ é€‰æ‹©é¢åº—ä½ çš„è·å¾—æ—©é¤()å°±æ˜¯ä½¿ç”¨çš„é¢åº—çš„é€ ä¸€ç¢—é¢()ï¼Œä½ é€‰æ‹©åŒ…å­åº—ä½ çš„è·å–æ—©é¤å®é™…ä¸Šå°±æ˜¯åŒ…å­åº—çš„é€ åŒ…å­()ã€‚ æœ‰äººåˆè¯´äº†ï¼Œå¤§æ—©ä¸Šåƒè¿™ä¹ˆå•è°ƒï¼Œæˆ‘åƒä¸€ç¢—é¢åŠ ä¸€ç¬¼åŒ…å­åŠ å„å¼å„æ ·ä¸è¡Œä¸ã€‚ä¹Ÿå°±æ˜¯è¯´è¿˜è¦åˆ›å»ºå„ç§ç»„åˆçš„åº—ã€‚è¿™è‚¯å®šä¸åˆç†ã€‚ è¿™æ ·çš„æƒ…å†µï¼ˆè±†æµ†æ²¹æ¡ã€èƒ¡è¾£æ±¤ã€é…¸è¾£ç²‰ã€è±†æ±å„¿ã€è‚ ç²‰ã€çƒ¤é¦•ã€çŒæ±¤åŒ…ã€æ²™èŒ¶é¢ã€æŠ„æ‰‹ï¼‰è¿™æ’åˆ—ç»„åˆå­ç±»æ•°é‡ç›´æ¥çˆ†ç‚¸ã€‚ é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ˜¯ç›´æ¥å†™æ­»ï¼Œå› ä¸ºæ’åˆ—ç»„åˆçš„æƒ…å†µå¾ˆå¤šï¼Œè¦åœ¨æœ€åˆå†™æ­»äº§ç”Ÿå„ç§å­ç±»ã€‚ä½ æƒ³é€‰ä»»æ„ä¸€ä¸ªç»„åˆéƒ½æœ‰ä¸€ä¸ªå­ç±»ï¼ˆåº—ï¼‰çš„é€ æ—©é¤()èƒ½å¤Ÿéƒ½æä¾›ã€‚ æ—¢ç„¶è¿™æ ·åšå­ç±»æ•°é‡çˆ†ç‚¸ï¼Œé‚£æœ‰æ²¡æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥åŠ¨æ€çš„å»ç»„åˆå‘¢ã€‚ä¸åœ¨ä¸€å¼€å§‹å†™æ­»æ‰€æœ‰çš„ç»„åˆåŠŸèƒ½çš„å­ç±»ã€‚è€Œæ˜¯å¯ä»¥åŠ¨æ€æ·»åŠ ä¸Šï¼Œè¿™æ ·å…¶ä»–çš„ç»„åˆéƒ½å¯ä»¥åœ¨ä½¿ç”¨æ—¶åŠ¨æ€è·å–æ‹¼è£…æˆæœ€ç»ˆæƒ³è¦çš„åŠŸèƒ½ã€‚ é‚£å°±æ˜¯ç»„åˆï¼Œé€šè¿‡ç»„åˆçš„æ–¹å¼æˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°å°†å¯¹è±¡1æ”¾åˆ°å¯¹è±¡2å½“ä¸­ã€‚é‚£ä¹ˆå¯¹è±¡2å¯ä»¥åœ¨è§¦å‘å¯¹è±¡1çš„åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œå†åŠ å…¥è‡ªå·±çš„å†…å®¹ã€‚ æˆ‘ä»¬æœ‰1ã€2ã€3è¿™ä¸‰ç§ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šæœ‰7ç§éœ€æ±‚ï¼ˆ1ã€2ã€3ã€1+2ã€1+3ã€2+3ã€1+2+3ï¼‰ï¼Œå¦‚æœå°±è¿™æ ·éƒ½å®ç°å­ç±»ä¼šå¾ˆå¤š é€šè¿‡ç»„åˆè¿›è¡Œæ‰©å±•ï¼Œ1å¯èƒ½æ‰©å±•2çš„éƒ¨åˆ†ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½æ˜¯å±äºåŒä¸€æ¥å£å®ƒä»¬ä¹‹é—´å¯ä»¥ä»»æ„æ‰©å±•ï¼Œé‚£ä¹ˆå°±å¯ä»¥æœ‰ä¸ªåŸºç¡€äº§å“0ã€‚1ã€2ã€3éƒ½å¯ä»¥å¯¹åŸå…ˆäº§å“è¿›è¡ŒåŒ…è£¹æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç»™åŸºç¡€0æ‰©å±•ä¸ª1å¾—åˆ°æ–°äº§å“,å› æ­¤1ã€2ã€3éƒ½å¯ä»¥éšæ„é€‰æ‹©ä¸”è¿˜å¯ä»¥ç»§ç»­åŒ…è£…ï¼ŒåŒ…è£…1å†åŒ…è£…ä¸€ä¸ª3ï¼Œå³å¾—åˆ°äº†1+3çš„ç»„åˆã€‚åœ¨ä½¿ç”¨æ—¶çµæ´»åŠ ä¸€ä»¶æˆ–è€…å‡ä¸€ä»¶ä¹Ÿå°±æ˜¯è£…é¥°å™¨å¦‚åŒè¡£æœä¸€æ ·ã€‚ å®ç°é¡¶çº§æ—©é¤äº§å“æ¥å£ï¼Œä¹‹ä¸‹å…·æœ‰ä¸¤ä¸ªå®ç°ä¸€ä¸ªæ˜¯åŸºç¡€æ—©é¤ï¼Œä¸€ä¸ªæ˜¯å¯¹æ—©é¤è¿›è¡Œè£…é¥°çš„æŠ½è±¡è£…é¥°å™¨å®ƒå’Œäº§å“ç»„ä»¶åŒå±äºä¸€ä¸ªæŠ½è±¡ç±»å‹ä¸‹ã€‚è£…é¥°å™¨ä¸‹æœ‰å„ç§å…·ä½“è£…é¥°å™¨ï¼ˆé¦„é¥¨ã€é¢æ¡ã€ç²¥ï¼‰ 1234567// äº§å“é¡¶çº§æ¥å£public interface Breakfast &#123; /** * é€ æ—©é¤ */ public void createBreakfast();&#125; 1234567// åŸºç¡€äº§å“public class MustBreakfast implements Breakfast&#123; @Override public void createBreakfast() &#123; System.out.println(&quot;å–ä¸€æ¯æ°´&quot;); &#125;&#125; 1234567// åŸºç¡€è£…é¥°å™¨public abstract class BaseDecorator implements Breakfast&#123; Breakfast breakfast; public BaseDecorator(Breakfast breakfast)&#123; this.breakfast = breakfast; &#125;&#125; 1234567891011public class NoodlesDecorator extends BaseDecorator&#123; public NoodlesDecorator(Breakfast breakfast)&#123; super(breakfast); &#125; @Override public void createBreakfast() &#123; breakfast.createBreakfast(); // å®ŒæˆåŸäº§å“åŠŸèƒ½ï¼Œä¹‹ååŠ ä¸Šé¢å¤–åŠŸèƒ½ System.out.println(&quot;æç¢—é¢æ¡&quot;); &#125;&#125; 12345678910public class CongeeDecorator extends BaseDecorator&#123; public CongeeDecorator(Breakfast breakfast)&#123; super(breakfast); &#125; @Override public void createBreakfast() &#123; breakfast.createBreakfast(); System.out.println(&quot;æç¢—ç²¥&quot;); &#125;&#125; 12345678910public class WontonDecorator extends BaseDecorator&#123; public WontonDecorator(Breakfast breakfast)&#123; super(breakfast); &#125; @Override public void createBreakfast() &#123; breakfast.createBreakfast(); System.out.println(&quot;æç¢—é¦„é¥¨&quot;); &#125;&#125; å¦‚æ­¤ï¼Œå¯ä»¥çµæ´»æ‹¿åˆ°å„ç§æ‰©å±•æ—©é¤ 123456789public class Customer &#123; public void getBreakfast() &#123; Breakfast base = new MustBreakfast(); Breakfast a = new NoodlesDecorator(base); Breakfast b = new WontonDecorator(a); // å½“å‰ç»„ä»¶åˆ›å»ºæ‹¿åˆ°çš„æ˜¯ï¼ˆé¢æ¡+é¦„é¥¨ï¼‰çš„æ—©é¤ b.createBreakfast(); &#125;&#125; æ¡ˆä¾‹åœ¨Java I&#x2F;Oåº“çš„è®¾è®¡å½“ä¸­å°±å¾ˆå¥½çš„ä½¿ç”¨è£…é¥°å™¨è¿™ç§è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬çŸ¥é“é€šè¿‡è¾“å…¥è¾“å‡ºæµå¯ä»¥å»å¯ä»¥å°†æºå­—èŠ‚æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹å¯¼åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚é‚£ä¹ˆå®é™…æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„æ˜¯æœ‰ç»“æ„çš„æ•°æ®æ¯”å¦‚å­—ç¬¦ã€å¯¹è±¡ã€æ•°ç»„ç­‰ç­‰ã€‚å› æ­¤IOåº“çš„è®¾è®¡å½“ä¸­æä¾›äº†å«åšé“¾æ¥çš„æœºåˆ¶ã€‚å¯ä»¥å°†åŸå§‹æµç±»çš„è¾“å‡ºä½œä¸ºæºå†è¿›è¡Œæµå¤„ç†å¾—åˆ°éœ€è¦çš„ã€‚åŸå§‹æµå¤„ç†å™¨éƒ½æ˜¯ç›´æ¥å¯¹æ•°åšæºï¼Œè€Œé“¾æ¥æµå¤„ç†å™¨åˆ™æ˜¯åœ¨åŸå§‹æµå¤„ç†å™¨çš„åŸºç¡€ä¸Šå†åšå¤„ç†ï¼Œä»¥åŸå§‹æµå¤„ç†å™¨å¤„ç†åçš„æ•°æ®åšæºã€‚ ä¸Šé¢åªåˆ—ä¸¾äº†å‡ ä¸ªInputStreamçš„ä¾‹å­ï¼Œä¸‹é¢ä¸‰ä¸ªéƒ½åŒå±äºInputStreamä½†åªæœ‰FileInputStreamæ˜¯åŸå§‹æµå¤„ç†å™¨ï¼Œåœ¨è£…é¥°å™¨æ¨¡å¼é‡Œæ‰®æ¼”çš„è§’è‰²åˆ™æ˜¯ç»„ä»¶ä¸‹çš„åŸºç¡€ç»„ä»¶ï¼Œè€Œè£…é¥°å™¨å’ŒåŸºç¡€ç»„ä»¶æ˜¯åŒå±äºä¸€ä¸ªç»„ä»¶ä¸‹ã€‚ObjectInputStreamä»¥åŠFilterInputStreaméƒ½å±äºè£…é¥°å™¨ã€‚ ä¹Ÿå°±æ˜¯å’Œä¸Šé¢å®ç°ä¸€æ ·å®ƒä»¬æ˜¯å†…åµŒäº†ç»„ä»¶ç±»å‹ï¼ˆInputStreamï¼‰è¿›å»,å¯ä»¥ä¼ å…¥å„ç§åŸºç¡€ç»„ä»¶ã€‚ FilterInputStreamå†…åµŒInputStreamä¸”read()æ–¹æ³•å°±æ˜¯æ‰åŸç»„ä»¶æ–¹æ³•ï¼Œç­‰äºå•¥éƒ½æ²¡å¹²ã€‚ä¹Ÿå°±æ˜¯æ‰®æ¼”äº†åŸºç¡€è£…é¥°å™¨çš„è§’è‰²ï¼Œè€Œå®ƒçš„å„ä¸ªå­ç±»é‡å†™è¾¾åˆ°å¯¹åŸç»„ä»¶çš„ä¸åŒæ‰©å±• ä»¥ä¸‹æ˜¯BufferedInputStream å®ƒå¯¹åŸæœ¬ä¸å…·å¤‡ç¼“å­˜åŠŸèƒ½çš„InputStreamæä¾›äº†ç¼“å­˜è¯»å–ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡åŸºç¡€ç»„ä»¶çš„read(byte b[], int off, int len)åŠ ä»¥å®ç°ã€‚ å¹³æ—¶ä½¿ç”¨FileInputStreamä»æ–‡ä»¶è¯»å–æ•°æ®ï¼Œä¸€æ¬¡ä¸€ä¸ªå­—èŠ‚æ•ˆç‡ä½é€šè¿‡ç»™FileInputStreamåŠ ä¸Šä¸€å±‚BufferedInputStreamå³å¾—åˆ°ç¼“å­˜è¯»å–åŠŸèƒ½çš„InputStreamç»„ä»¶ã€‚ æ€»ç»“ä¸šåŠ¡ä»£ç ä½¿ç”¨ä¸€ä¸ªç»„ä»¶åŠŸèƒ½éœ€è¦æ‰©å±•ï¼Œç¡®å®å¯ä»¥åœ¨ä¸šåŠ¡ä»£ç è¿›è¡Œï¼Œä½†è€¦åˆæ€§å·®ä¸æ»¡è¶³å•ä¸€èŒè´£åŸåˆ™ã€‚å› æ­¤ç»„ä»¶åŠŸèƒ½è¦å•ç‹¬å°è£…æä¾›å‡ºæ¥ï¼Œå„å¼å„æ ·çš„åŠŸèƒ½å„ç§æ‰©å±•ä¹Ÿå°±éœ€è¦ç»„ä»¶äº§ç”Ÿå„å¼å„æ ·çš„å­ç±»ã€‚ä¸”å¾ˆå¤šæ–°åŠŸèƒ½æ•´ä¸ªè¿‡ç¨‹å…¶å®åŒ…å«å…¶ä»–å·²ç»å­˜åœ¨çš„åŠŸèƒ½ï¼Œä½¿ç”¨ç»„åˆä»£æ›¿ç»§æ‰¿å°†åŠŸèƒ½åˆ’åˆ†æœ€å°ï¼Œå°†è®¸å¤šä¸åŒè¡Œä¸ºçš„å¤§ç±»æ‹†æˆå„ä¸ªåŸºæœ¬åŸºç¡€è¡Œä¸ºçš„è£…é¥°å™¨å°ç±»ã€‚å³å¯åœ¨ä½¿ç”¨æ—¶åŠ¨æ€çµæ´»çš„è·å¾—æƒ³è¦çš„æœ€ç»ˆç»„ä»¶ã€‚å¦™ï¼Œä¸€èˆ¬èƒ½å¤ŸæŠ½å‡ºæ²¡æœ‰å…ˆåå½±å“çš„è£…é¥°è¡Œä¸ºå¯ä»¥é€‚ç”¨ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰ï¼š6ã€é€‚é…å™¨æ¨¡å¼","slug":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰ï¼š6ã€é€‚é…å™¨æ¨¡å¼","date":"2022-03-04T03:13:52.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2022/03/04/è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆç»“æ„å‹ï¼‰ï¼š6ã€é€‚é…å™¨æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2022/03/04/%E8%BD%BB%E6%9D%BE%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E7%BB%93%E6%9E%84%E5%9E%8B%EF%BC%89%EF%BC%9A6%E3%80%81%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ æœ¬ç¯‡å†…å®¹å…³äºç»“æ„å‹è®¾è®¡æ¨¡å¼ä¸­çš„é€‚é…å™¨æ¨¡å¼çš„è®¾è®¡ä¸å®ç°ã€‚ å®šä¹‰ åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œé€‚é…å™¨æ¨¡å¼ï¼ˆæœ‰æ—¶å€™ä¹Ÿç§°åŒ…è£…æ ·å¼æˆ–è€…åŒ…è£…ï¼‰å°†ä¸€ä¸ªç±»çš„æ¥å£é€‚é…æˆç”¨æˆ·æ‰€æœŸå¾…çš„ã€‚ä¸€ä¸ªé€‚é…å…è®¸é€šå¸¸å› ä¸ºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½åœ¨ä¸€èµ·å·¥ä½œçš„ç±»å·¥ä½œåœ¨ä¸€èµ·ï¼Œåšæ³•æ˜¯å°†ç±»è‡ªå·±çš„æ¥å£åŒ…è£¹åœ¨ä¸€ä¸ªå·²å­˜åœ¨çš„ç±»ä¸­ã€‚â€”â€”ç™¾åº¦ç™¾ç§‘ å°±æ˜¯è¯´ä¸¤ä¸ªä¸œè¥¿éœ€è¦äº¤äº’è¿æ¥ï¼Œæˆ–è€…å®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªäº§å“ã€‚ä½†å®ƒä»¬ä¸¤æ–¹æ¥å£å¯¹ä¸ä¸Šæ²¡åŠæ³•ç›´æ¥ä½¿ç”¨ã€‚è¿™æ—¶å€™éœ€è¦æœ‰ä¸€ä¸ªé€‚é…å™¨ï¼Œè®©å®ƒä»¬å»ºç«‹è¿æ¥ã€‚é€‚é…å™¨åŒ…è£¹äº§å“ï¼Œå®¢æˆ·ç«¯ä¸é€‚é…å™¨è¿›è¡Œäº¤äº’ã€‚å¦‚ä¸‹å›¾ type-cä¸3.5mmçš„è½¬æ¥å™¨å°±å±äºé€‚é…å™¨ï¼Œå®ƒå¯ä»¥è¯´æ˜¯åŒ…è£¹åœ¨è€³æœºä¸Šï¼Œè®©ä½¿ç”¨çš„äº§å“ï¼ˆè€³æœºï¼‰æä¾›äº†type-cçš„å¤´ã€‚ä¹Ÿå°±æ˜¯è®©å®¢æˆ·ç«¯æ‰‹æœºå¯ä»¥ä½¿ç”¨ï¼Œåè¿‡æ¥è¯´ä¹Ÿå¯ä»¥ã€‚ æ€»ä¹‹æ˜¯è®©å®¢æˆ·ç«¯æƒ³ä½¿ç”¨çš„äº§å“ä½†ä½¿ç”¨ä¸ä¸Šçš„äº§å“ï¼Œé€šè¿‡åŒ…è£¹é€‚é…å™¨ä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡é€‚é…å™¨ä½¿ç”¨äº†åŸå…ˆçš„äº§å“çš„åŠŸèƒ½ã€‚ å®ç°å…ˆç”»ä¸ªç±»å›¾ï¼Œç»“æ„å¤§æ¦‚å¦‚ä¸‹ï¼š ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªç®€å•çš„è®¾è®¡ç»“æ„ï¼Œå¯¹äºå®¢æˆ·ç«¯Clientå®é™…ä¸Šæƒ³ä½¿ç”¨äº§å“Productçš„åŠŸèƒ½ï¼Œä½†å¯¹æ¥ä¸ä¸Šã€‚ä¸­é—´é€šè¿‡é€‚é…å™¨ï¼Œè®©å®¢æˆ·ç«¯å¯ä»¥å¯¹æ¥åˆ°é€‚é…å™¨æä¾›çš„æ–¹å¼ï¼Œè€Œé€‚é…å™¨åˆèƒ½å’ŒProductæ‰“é€šã€‚ ä»£ç ï¼š 12345class Product&#123; public void specialReceive()&#123; .... &#125;&#125; 1234567891011121314class Adapter&#123; public void receive();&#125;class Mydapter implements Adapter&#123; private Product product; public Mydapter(Product product)&#123; this.product = product; &#125; public void receive()&#123; // å¯èƒ½å‰åæœ‰å¯¹ç»“æœæ•°æ®è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œä½†ç»ä¸å½±å“æœ¬èº«å†…å®¹ï¼Œåªåšé€‚é…ä¸åšå¢å¼º this.product.specialReceive(); &#125;&#125; 123456class Client&#123; public void use()&#123; Adapter adapter = new Myadapter(new Adapter()); adapter.receive(); &#125;&#125; å¯¹äºé€‚é…å™¨æ¥è¯´å¹¶æ²¡æœ‰å»å¢å¼ºäº§å“çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åªæœ‰type-cå£çš„æ‰‹æœºä½¿ç”¨3.5mmæ’å¤´çš„è€³æœºã€‚é€šè¿‡é€‚é…å™¨å¯ä»¥ä½¿ç”¨ä¸Šï¼Œä½†ä½¿ç”¨çš„å°±æ˜¯äº§å“æœ¬èº«çš„åŠŸèƒ½ï¼Œé€‚é…å™¨å¹¶ä¸åšé¢å¤–çš„å¢å¼ºã€‚ åªæ˜¯åœ¨å®¢æˆ·ç«¯ä¸äº§å“å¯èƒ½å®ƒæ˜¯å±äºä¸åŒçš„æ ‡å‡†ï¼Œæ— æ³•å»ç›´æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦é€šç”¨æ ‡å‡†çš„é€‚é…å™¨å»æ¥æ”¶å®¢æˆ·ç«¯æ ‡å‡†çš„å†…å®¹ï¼Œå†æŒ‰äº§å“çš„æ ‡å‡†è®©å…¶å¯ä»¥å¤„ç†ã€‚ å®ƒå¯ä»¥é€‚ç”¨åœ¨ä¸€äº›è€æ—§çš„åº“ï¼Œç°åœ¨ç”¨æ–°çš„æ ‡å‡†å»ä½¿ç”¨ã€‚ä½†è¿™äº›åº“çš„åŠŸèƒ½æ²¡å¿…è¦é‡å†™ä¸€ä¸ªæ–°çš„åº“æˆ–è€…ä¿®æ”¹åŸæœ‰åº“ã€‚é‚£ä¹ˆä½¿ç”¨é€‚é…å™¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ æ€»ç»“é€‚é…å™¨æ¨¡å¼æ€»ä½“æ¥è¯´æ˜¯ä¸ªæ¯”è¾ƒç®€å•ç›´æ¥çš„ç»“æ„å‹è®¾è®¡æ¨¡å¼ã€‚å®ƒä¸»è¦å¤„ç†äº†ï¼Œå®¢æˆ·ç«¯ä¸äº§å“ä¹‹é—´äº¤æ¥çš„éƒ¨åˆ†ä¸é€‚é…çš„é—®é¢˜ã€‚å®¢æˆ·ç«¯é€šè¿‡é€‚é…å™¨é—´æ¥ä½¿ç”¨ç›®æ ‡äº§å“ï¼Œé€‚é…å™¨å¯¹ä¸å®¢æˆ·ç«¯å’Œäº§å“å‡ºå…¥äº¤æ¥å¤„è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚å…¥å‚åè®®æˆ–è€…æ ¼å¼ä¸ä¸€æ ·ã€‚ä½†æœ€ä¿è¯å®¢æˆ·ç«¯æ­£å¸¸ä½¿ç”¨äº§å“åŠŸèƒ½å¾—åˆ°äº§å“å¤„ç†ç»“æœï¼Œè€Œä¸åšä»»ä½•å¯¹äº§å“ä¸šåŠ¡é€»è¾‘çš„å†å¤„ç†æˆ–è€…å¢å¼ºã€‚å¯¹äºä¸é€‚é…çš„ä¸¤ä¸ªä½“ç³»ï¼ˆå®¢æˆ·ç«¯ã€äº§å“ï¼‰åŠ ä¸€ä¸ªä¸­é—´å±‚ã€‚ å•ä¸€èŒè´£åŸåˆ™ï¼Œå°†æ¥å£æˆ–æ•°æ®è½¬æ¢ä»£ç ä»ç¨‹åºä¸»è¦ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»ï¼Œè€Œä¸æ˜¯ä¸ºäº†è°ƒä¸é€‚é…çš„æ¥å£è¦åœ¨å®¢æˆ·ç«¯ä¸šåŠ¡ä»£ç é‡Œé¢ç¼–å†™è°ƒæ•´é€‚é…ä»£ç åå†è°ƒç”¨ï¼ŒæŠŠè¿™äº›æŠ½åˆ°é€‚é…å™¨å½“ä¸­ã€‚ å¼€é—­åŸåˆ™ã€‚ åªè¦å®¢æˆ·ç«¯ä»£ç ä¸é€‚é…å™¨è¿›è¡Œäº¤äº’ï¼Œ ä½ å°±èƒ½åœ¨ä¸ä¿®æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ·»åŠ æˆ–è€…ä¿®æ”¹æ–°ç±»å‹çš„é€‚é…å™¨ï¼Œæ–°çš„é€‚é…è§„åˆ™ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š5ã€åŸå‹æ¨¡å¼","slug":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š5ã€åŸå‹æ¨¡å¼","date":"2021-11-11T06:30:07.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/11/11/è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š5ã€åŸå‹æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2021/11/11/%E8%BD%BB%E6%9D%BE%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%88%9B%E5%BB%BA%E5%9E%8B%EF%BC%89%EF%BC%9A5%E3%80%81%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ æœ¬ç¯‡å†…å®¹å…³äºåŸå‹æ¨¡å¼ã€‚åŒ…å«åŸå‹æ¨¡å¼çš„è®¾è®¡ä¸å®ç°ã€‚ å®šä¹‰ åŸå‹æ¨¡å¼æ˜¯åˆ›å»ºå‹æ¨¡å¼çš„ä¸€ç§ï¼Œå…¶ç‰¹ç‚¹åœ¨äºé€šè¿‡â€œå¤åˆ¶â€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®ä¾‹æ¥è¿”å›æ–°çš„å®ä¾‹,è€Œä¸æ˜¯æ–°å»ºå®ä¾‹ã€‚è¢«å¤åˆ¶çš„å®ä¾‹å°±æ˜¯æˆ‘ä»¬æ‰€ç§°çš„â€œåŸå‹â€ï¼Œè¿™ä¸ªåŸå‹æ˜¯å¯å®šåˆ¶çš„ã€‚â€”â€”ç»´åŸºç™¾ç§‘ åŸå‹æ¨¡å¼å¤šç”¨äºåˆ›å»ºå¤æ‚çš„æˆ–è€…è€—æ—¶çš„å®ä¾‹ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹ï¼Œå¤åˆ¶ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®ä¾‹ä½¿ç¨‹åºè¿è¡Œæ›´é«˜æ•ˆï¼›æˆ–è€…åˆ›å»ºå€¼ç›¸ç­‰ï¼Œåªæ˜¯å‘½åä¸ä¸€æ ·çš„åŒç±»æ•°æ®ã€‚ æˆ‘ä»¬éœ€è¦ä¸€ç³»åˆ—å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éƒ½æ˜¯å…·æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œä¸”å®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚å°±åƒé©¬é‡Œå¥¥é‡Œå¾ˆå¤šè˜‘è‡äººï¼Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„ä¸ä¼šè¸©ä¸€ä¸ªå…¨éƒ¨éƒ½æŒ‚æ‰ã€‚ä½†å®ƒä»¬æ˜¯ç›¸åŒç‰¹å¾ä¹Ÿå°±æ˜¯æ·±æ‹·è´ã€‚ é¿å…æ‰‹åŠ¨å»åˆ›å»ºç›¸åŒå†…å®¹çš„å¯¹è±¡å› ä¸ºç¬¬ä¸€å¤æ‚ç¹çæ•ˆç‡ä¸é«˜ï¼Œç¬¬äºŒåœ¨å¤–é¢çœŸä¸ä¸€å®šèƒ½åˆ›å»ºä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡å¾ˆå¤šå±æ€§æ˜¯ç§æœ‰çš„ä¸”æ²¡æœ‰å…¬å¼€æ–¹æ³•æ–¹æ³•ã€‚ å¯¹äºä¸€ä¸ªé©¬é‡Œå¥¥æ€ªç‰©ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å»æ‰‹åŠ¨åˆ›å»ºè˜‘è‡äººå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¹Œé¾Ÿå¯¹è±¡ã€‚ä½†æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè˜‘è‡äººæˆ–è€…ä¸€ç™¾ä¸ªå°±æ˜¯é€šè¿‡åŸå‹æ¨¡å¼çš„æ–¹æ³•ã€‚åªæœ‰å®šåˆ¶åŒ–åˆ›å»ºæ—¶å»æ‰‹åŠ¨è®¾è®¡ï¼Œä¹‹åå†éœ€è¦ä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡å°±é€šè¿‡åŸå‹æ–¹æ³•è·å–ã€‚è¾¾åˆ°å®šåˆ¶ä¸€ä¸ªæ‰¹é‡å¤åˆ¶ã€‚ è‡ªå®šä¹‰å®ç°å…ˆç”»ä¸ªç»“æ„å›¾ é¦–å…ˆæ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œç¬¬äºŒå°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åŸå‹ç±»ï¼Œå»å®ç°cloneæ–¹æ³•ã€‚å…·ä½“åŸå‹ç±»çš„å®ä¾‹é€šè¿‡ä½¿ç”¨cloneæ–¹æ³•å°±èƒ½äº§ç”Ÿä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ–°å¯¹è±¡ 123interface Prototype&#123; Object clone();&#125; 12345678910111213141516class Guaiwu&#123; private String name; private String icon; public Guaiwu(String name,String icon)&#123; this.name = name; this.icon = icon; &#125; public Guaiwu(Guaiwu obj)&#123; this.name = obj.name; this.icon = obj.icon; &#125; @Override public object clone()&#123; return new Guaiwu(this); &#125;&#125; æŒ‡å®šä¸€ä¸ªå¯¹è±¡ 1Guaiwu wugui = new Guaiwu(&quot;å°ä¹Œé¾Ÿ&quot;,&quot;ä¹Œé¾Ÿæ ·å­&quot;); æ‰¹é‡å¤åˆ¶ 1234Guaiwu wugui1 = wugui.clone();Guaiwu wugui2 = wugui.clone();Guaiwu wugui3 = wugui.clone();... ä»¥ä¸Šå‘¢å°±æ˜¯ä¸€ä¸ªç®€å•çš„åŸå‹æ¨¡å¼çš„ä¸€ä¸ªè‡ªå®šä¹‰å®ç°ã€‚ Object cloneæ–¹æ³•ä¸è¿‡å…¶å®åœ¨Javaå½“ä¸­å·²ç»æä¾›äº†cloneæ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ªObjectçš„æœ¬åœ°æ–¹æ³• ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå¯¹è±¡éƒ½å·²ç»å…·å¤‡äº†cloneæ–¹æ³•ï¼Œä¸éœ€è¦åƒä¸Šé¢å®šä¹‰æŠ½è±¡æ ‡å‡†å†åœ¨æ¯ä¸ªå…·ä½“åŸå‹ç±»é‡Œé¢å»å®ç°ã€‚ 12345678class Noodle&#123; String name; String size; public Noodle(String name,String size)&#123; this.name = name; this.size = name; &#125;&#125; 12345678910111213class Client&#123; public static void main(String[] args)&#123; // æŒ‡å®šåŸå‹å¯¹è±¡ Noodle noodle = new Noodle(&quot;é•¿å¯¿é¢&quot;,&quot;è¶…å¤§ä»½&quot;); // æ‰¹é‡å¤åˆ¶ Noodle n1 = noodle.clone(); Noodle n2 = noodle.clone(); // æ¯”è¾ƒ System.out.println(n1); System.out.println(noodle == n1); System.out.println(n1 == n2); &#125;&#125; ç»“æ„ä¹Ÿæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œç¡®å®n1ä¸n2çš„å†…å®¹æ˜¯å’Œnoodleä¸€æ ·ã€‚ä¸”å®ƒä¸‰ä¸ªç¡®å®æ˜¯å­˜åœ¨ä¸‰ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªã€‚ ä½†è¿™ä¸ªObjectæä¾›çš„cloneå¯¹äºæˆ‘ä»¬çš„éœ€è¦æ¥è¯´å…¶å®æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œå®ƒè™½ç„¶æ˜¯æ–°å»ºäº†å¯¹è±¡å’Œæˆ‘ä»¬ä¸Šé¢è‡ªå·±å®ç°çš„clone()ä¸€æ ·ï¼Œä½†æ–°å»ºå¯¹è±¡çš„å±æ€§å†…å®¹æ˜¯ç›´æ¥èµ‹å€¼è¿‡å»ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœå±æ€§æ˜¯ä¸€ä¸ªéåŸºæœ¬ç±»å‹ã€‚é‚£ä¹ˆcloneå‡ºæ¥çš„å¯¹è±¡é‡Œçš„è¿™ä¸ªå±æ€§å’ŒåŸå‹çš„å¯¹è±¡é‡Œçš„è¿™ä¸ªå±æ€§æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯æµ…æ‹·è´ã€‚ Objectçš„è¿™ä¸ªcloneï¼Œå…¶å®å°±æ˜¯å’Œä¸Šé¢å®Œå…¨è‡ªå®šä¹‰å†™çš„é‚£ä¸ªä¸€æ ·ï¼Œè™½ç„¶æ˜¯æ–°å»ºäº†å¯¹è±¡n1,ä½†n1çš„å±æ€§å†…å®¹åªæ˜¯æŠŠnoodleçš„å†…å®¹æŒ¨ä¸ªçš„èµ‹å€¼è¿›å»ã€‚å¯¼è‡´éåŸºæœ¬ç±»å‹æ˜¯å¼•ç”¨ç›¸åŒå¯¹è±¡è€Œä¸æ˜¯æ–°å¯¹è±¡ã€‚ æˆ‘ä»¬éœ€è¦çš„æ˜¯å®Œå®Œå…¨å…¨çš„æ·±æ‹·è´ èƒ½æ€ä¹ˆåŠï¼Œé‡å†™å®ç°ï¼Œé’ˆå¯¹å½“å‰åŸå‹ç±»çš„å±æ€§ï¼Œå®Œå–„cloneé€»è¾‘ 12345678910111213141516171819202122// ä½æ–™class Spice implements Cloneable&#123; String name; String type; ...&#125;// é¢æ¡ï¼ˆåŸå‹ç±»ï¼‰class Noodle implements Cloneable&#123; String name; String size; Spice spice; @Override public Noodle clone()&#123; // å…ˆè°ƒç”¨åŸæ¥çš„cloneï¼Œä¹Ÿå°±æ˜¯å¾—åˆ°å±æ€§éƒ½æ˜¯ç›´æ¥å¤åˆ¶çš„æ–°å¯¹è±¡ Noode noodle = (Noodle)super.clone(); // å†æŠŠspiceå¤åˆ¶ä¸ªæ–°å¯¹è±¡ï¼Œè®¾ç½®è¿›å» noodle.spice = this.spice.clone(); return noodle; &#125;&#125; è¿™æ ·å°±å®Œæˆäº†cloneæ–¹æ³•å¯¹å½“å‰Noodleç±»å‹å¯¹è±¡æ˜¯å®Œå…¨æ‹·è´ï¼Œè¦æ³¨æ„çš„æ˜¯è®¿é—®cloneæ–¹æ³•æ˜¯protectedå› æ­¤åªèƒ½åœ¨java.langè®¿é—®ã€‚å› æ­¤åœ¨å¤–éƒ¨éå­ç±»è®¿é—®éœ€è¦é‡å†™ï¼Œä¸”é‡å†™å¿…é¡»å¾—å®ç°Cloneableæ¥å£ï¼Œè¯´æ˜å¦‚ä¸‹ï¼š è¿™æ ·å†™å‡ºæ¥å°±æ¯”è¾ƒå¤æ‚ï¼Œä¸ºäº†è¿›è¡Œæ·±æ‹·è´é‡Œé¢æœ‰å¤æ‚ç±»å‹çš„å±æ€§ï¼Œè€Œå±æ€§é‡Œé¢å¯èƒ½è¿˜ç‰µè¿å¾ˆå¤šå…¶ä»–çš„éåŸºæœ¬ç±»å‹ã€‚å¯¼è‡´åœ¨åŸå‹å¯¹è±¡ç±»é‡Œé¢ä¸åœçš„åµŒå¥—å»å®ç°ç›´åˆ°å°†æ‰€æœ‰å±æ€§çš„å€¼éƒ½åˆ›å»ºæ–°å¯¹è±¡ã€‚å¯¹äºå¤æ‚ç±»å‹å¤æ‚çš„ç»„åˆä¾èµ–å…³ç³»ï¼Œä¸Šé¢çš„cloneæ–¹æ³•çš„å®ç°å°±ä¼šå¤æ‚å¾ˆå¤šï¼Œè¦é€’å½’åˆ°åªæœ‰åŸºæœ¬ç±»å‹ä¸ºæ­¢ï¼Œä»æœ€åº•å±‚ä¸€ä¸ªä¸€ä¸ªå¯¹è±¡è¿›è¡Œåˆ›å»º åºåˆ—åŒ–ä¸è¿‡è¿˜å¥½æœ‰åºåˆ—åŒ–ï¼Œå¯ä»¥åˆ©ç”¨åºåˆ—åŒ–çš„æ–¹å¼æ¥è¾¾åˆ°æ·±æ‹·è´ 12345678910111213141516@Overridepublic Object clone() &#123; try&#123; // å†™å‡º ByteArrayOutputStream aos = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(aos); oos.writeObject(this); // è¯»å– ByteArrayInputStream ais = new ByteArrayInputStream(aos.toByteArray()); ObjectInputStream ois = new ObjectInputStream(ais); return ois.readObject(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; return null;&#125; æœ€ç»ˆè¿˜æ˜¯å¯ä»¥ä¸€æ­¥åˆ°ä½çš„ï¼Œé‡Œé¢çš„åµŒå¥—çš„éåŸºæœ¬ç±»å‹çš„å±æ€§ï¼Œä¹Ÿéƒ½æ˜¯æ–°å¯¹è±¡ã€‚ä½¿ç”¨åºåˆ—åŒ–çš„æ–¹å¼å°±é¿å…äº†æ‰‹åŠ¨å»é€’å½’æŒ–æ˜æ‰€æœ‰å…³è”éåŸºæœ¬ç±»å‹çš„å±æ€§ï¼Œè¿›è¡Œæ–°å»ºæ‹·è´å†…å®¹å†èµ‹å€¼çš„è¿‡ç¨‹ã€‚ ä½†æ€ä¹ˆè¯´è¿˜æ˜¯å¾—æ”¹å†™æ‰€æœ‰å…³è”çš„å±æ€§çš„ç±»ä»¥åŠä¸‹é¢ä¸åœåµŒå¥—çš„ç±»ï¼Œéƒ½è¦å»å®ç°åºåˆ—åŒ–æ¥å£ã€‚åªæ˜¯å¯¹äºcloneæ–¹æ³•çš„é‡å†™å¯ä»¥ä¸€æ­¥åˆ°ä½ã€‚ æ€»ç»“ç›¸å¯¹ä¹‹å‰æ¥è¯´è¿™ä¸ªåŸå‹æ¨¡å¼æ€æƒ³æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå®ƒå¯èƒ½ä¼šç”¨åœ¨éœ€è¦å¤ç”¨å¾ˆå¤šå¯¹è±¡ï¼Œä¸”è¦æ±‚ä¿è¯ç‹¬ç«‹å®‰å…¨ã€‚ä¼˜ç‚¹åœ¨äºï¼šç¬¬ä¸€å®¢æˆ·ä»£ç å¯ä»¥ç›´æ¥é€šè¿‡æ¨¡æ¿å¯¹è±¡è°ƒç”¨cloneå°±èƒ½å¾—åˆ°æ–°å¯¹è±¡ï¼Œå…å»å¯¹ä½¿ç”¨ç±»çš„äº†è§£ç¨‹åº¦çš„é—¨æ§›ã€‚ç¬¬äºŒæœ‰äº›æƒ…å†µä¸‹å°±æ˜¯éœ€è¦è¿›è¡Œå¤åˆ¶ï¼Œåœ¨è¿™æ ·çš„æƒ…å†µä¸‹ä¹Ÿå°±æ¯”ç›´æ¥åˆ›å»ºæ•ˆç‡è¦é«˜ã€‚ç¼ºç‚¹ä¹Ÿå°±æ˜¯åœ¨äºç±»çš„æˆå‘˜å±æ€§çš„ç±»å‹çš„å¤æ‚ç¨‹åº¦ï¼Œè¿™æ—¶å€™å¤åˆ¶çš„é€»è¾‘å°±æ¯”è¾ƒå¤æ‚ï¼Œæˆ–è€…è¯´éœ€è¦å¾ˆæ³¨æ„ã€‚ä½†æ— è®ºæ€ä¹ˆè¯´å…¶å®éƒ½è¦å»ä¿®æ”¹ä»£ç ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚è¿˜å¾—çœ‹å…·ä½“åœºæ™¯å§å®é™…ä½¿ç”¨çš„ä¸å¤šã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š118.æ¨è¾‰ä¸‰è§’","slug":"118æ¨è¾‰ä¸‰è§’","date":"2021-11-10T02:02:11.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2021/11/10/118æ¨è¾‰ä¸‰è§’/","link":"","permalink":"http://yournotes.cn/2021/11/10/118%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/pascals-triangle/ ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° numRowsï¼Œç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰ numRows è¡Œã€‚åœ¨ã€Œæ¨è¾‰ä¸‰è§’ã€ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: numRows = 5è¾“å‡º: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]] ç¤ºä¾‹ 2: 12è¾“å…¥: numRows = 1è¾“å‡º: [[1]] æç¤º: 1 &lt;&#x3D; numRows &lt;&#x3D; 30 é¢˜è§£ä¾é¢˜æ„çŸ¥é“å½“å‰æ•°ç»„çš„ç¬¬jä¸ªå€¼ç­‰äºå‰ä¸€ä¸ªæ•°ç»„çš„j-1çš„å€¼åŠ ä¸Šjä½çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 1arr[i][j] = arr[i-1][j-1] + arr[i-1][j]; ä¹Ÿå°±æ˜¯é€šè¿‡åŒå¾ªç¯ï¼Œç¬¬ä¸€å±‚éå†å„ä¸ªæ•°ç»„ï¼Œç¬¬äºŒå±‚éå†å½“å‰æ•°ç»„å„ä¸ªå…ƒç´ ï¼Œä¸­é—´å…ƒç´ çš„æ¯ä¸ªå€¼é€šè¿‡ä¸Šè¿°å…¬å¼è®¡ç®— é¢˜è§£å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829public List&lt;List&lt;Integer&gt;&gt; generate(int numRows) &#123; // ç»“æœé›† List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;(); //éå†æ¯å±‚æ•°ç»„ for(int i = 0; i &lt; numRows; i++)&#123; // ç¬¬ä¸€å±‚å’Œç¬¬äºŒå±‚çš„è¾¹ç•Œæƒ…å†µ if(i == 0) &#123; result.add(Arrays.asList(1)); continue; &#125; if(i == 1) &#123; result.add(Arrays.asList(1,1)); continue; &#125; // è·å–ä¸Šä¸€å±‚æ•°ç»„ List&lt;Integer&gt; pre = result.get(i-1); //æ•°ç»„è¾¹ç•Œå€¼ int[] cur = new int[i+1]; cur[0] = 1; cur[i] = 1; // é€šè¿‡ä¸Šä¸€å±‚æ•°ç»„çš„å·¦å³å…ƒç´ æ±‚å½“å‰å…ƒç´  for(int j = 1; j &lt; i; j++)&#123; cur[j] = pre.get(j-1) + pre.get(j); &#125; // æ•°ç»„è½¬list result.add(Arrays.stream( cur ).boxed().collect(Collectors.toList())); &#125; return result;&#125; ä¾é¢˜æ„ä¹¦å†™è€Œæˆ,è¾¹ç•Œå¤„ç†éœ€è¦ä¼˜åŒ–,æ—¶é—´å¤æ‚åº¦n^2æ˜¯é¿å…ä¸äº†çš„ã€‚ è¾¹ç•Œçš„åˆ¤æ–­æœ‰ç‚¹é‡å¤äº†ã€‚åœ¨å¼€å±€ä¸¤ä¸ªåˆ¤æ–­ç¬¬ä¸€ä¸ªæ•°ç»„å’Œç¬¬äºŒä¸ªæ•°ç»„çš„ç‰¹æ®Šæƒ…å†µï¼Œåˆåœ¨å¾ªç¯ä¸­æ·»åŠ äº†æ¯ä¸ªæ•°ç»„å¤´å°¾éƒ½æ˜¯1çš„è®¾ç½®ã€‚ä¸€ä¸ªç´¢å¼•å®ƒä¸å±äºé¦–å°¾ä½ç½®ï¼Œé‚£ä¹ˆå®ƒæ‰€å±çš„æ•°ç»„å°±ä¸€å®šæ˜¯ä¸‰æ’ä»¥ä¸‹. ä»£ç ç»“æ„è°ƒæ•´ï¼š 12345678910111213141516171819202122public List&lt;List&lt;Integer&gt;&gt; generate(int numRows) &#123; // ç»“æœé›† List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;(); //éå†æ¯å±‚æ•°ç»„ for(int i = 0; i &lt; numRows; i++)&#123; // å®šä¹‰å½“å‰æ•°ç»„ int[] cur = new int[i+1]; // é¦–ä½è®¾ç½®1ï¼Œä¸­é—´preè®¡ç®— for(int j = 0; j &lt;= i; j++)&#123; if(j == 0 || j == i)&#123; cur[j] = 1; continue; &#125; // è·å–ä¸Šä¸€å±‚æ•°ç»„ List&lt;Integer&gt; pre = result.get(i-1); cur[j] = pre.get(j-1) + pre.get(j); &#125; // æ•°ç»„è½¬list result.add(Arrays.stream( cur ).boxed().collect(Collectors.toList())); &#125; return result;&#125; æ€»ç»“æœ¬é¢˜çš„è¯éš¾åº¦å€’æ˜¯æ²¡æœ‰ä»€ä¹ˆï¼Œé€»è¾‘æ¢³ç†å®Œå®ç°å®Œï¼Œè€ƒè™‘ä¸‹æ˜¯å¦æœ‰å†—ä½™çš„æƒ…å†µã€‚å¯èƒ½ä¸»è¦å‡ºç°åœ¨å„ä¸ªç®—æ³•è¯¾ç¨‹é‡Œçš„å‰é¢ç« èŠ‚ç”¨æ¥ç†Ÿæ‚‰ä»£ç å®ç°çš„ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š190.é¢ å€’äºŒè¿›åˆ¶ä½","slug":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š190-é¢ å€’äºŒè¿›åˆ¶ä½","date":"2021-10-27T01:59:25.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2021/10/27/LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š190-é¢ å€’äºŒè¿›åˆ¶ä½/","link":"","permalink":"http://yournotes.cn/2021/10/27/LeetCode%E5%88%9D%E7%BA%A7%E7%AE%97%E6%B3%95%E4%B9%8B%E5%85%B6%E4%BB%96%EF%BC%9A190-%E9%A2%A0%E5%80%92%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%BD%8D/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-bits/ é¢ å€’ç»™å®šçš„ 32 ä½æ— ç¬¦å·æ•´æ•°çš„äºŒè¿›åˆ¶ä½ã€‚ æç¤ºï¼š è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚ åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ ç¤ºä¾‹ 2 ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ï¼Œè¾“å‡ºè¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -1073741825ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šn = 00000010100101000001111010011100è¾“å‡ºï¼š964176192 (00111001011110000010100101000000)è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000010100101000001111010011100 è¡¨ç¤ºæ— ç¬¦å·æ•´æ•° 43261596ï¼Œå› æ­¤è¿”å› 964176192ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ä¸º 00111001011110000010100101000000ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šn = 11111111111111111111111111111101è¾“å‡ºï¼š3221225471 (10111111111111111111111111111111)è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 11111111111111111111111111111101 è¡¨ç¤ºæ— ç¬¦å·æ•´æ•° 4294967293ï¼Œå› æ­¤è¿”å› 3221225471 å…¶äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ä¸º 10111111111111111111111111111111 ã€‚ æç¤ºï¼šè¾“å…¥æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 32 çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸² é¢˜è§£ä¸€ï¼šæŒ¨ä¸ªç§»ä½é¦–å…ˆå˜›è‚¯å®šæ˜¯è¦æƒ³å‡ºé€šè¿‡æŸç§ç»„åˆä½è¿ç®—çš„æ–¹å¼æ¥è¾¾åˆ°ç›®çš„ï¼Œé€šè¿‡ä½è¿ç®—æ˜¯ç›´æ¥æ“ä½œçš„è¿™ä¸ªæ•°å­—åœ¨å½“å‰è¯­è¨€çš„äºŒè¿›åˆ¶ä¸²ï¼Œå¦åˆ™é€šè¿‡å¾ªç¯æ¨¡æ‹ŸäºŒè¿›åˆ¶ä¸²å¯¹äºJavaè¿˜è¦åˆ†æ­£è´Ÿæœ€ç»ˆè¿˜è½¬æˆæ•°å­—è¿‡ç¨‹å°±æœ‰ç‚¹ç¬¨é‡äº†ã€‚ æ€ä¹ˆç»„åˆä½è¿ç®—è¾¾åˆ°åè½¬ç›®çš„å‘¢ï¼Ÿè‰ç¨¿çº¸ä¸Šè¯•ä¸€è¯• 1234567891011// æ¨¡æ‹Ÿä¸€ä¸ªé•¿åº¦ä¸º5çš„äºŒè¿›åˆ¶ä¸²æ€ä¹ˆåè½¬10011// å–ä¸ªä½ç§»åˆ°æœ€é«˜ä½10011 &amp; 1 &lt;&lt; 4 = 10000// ...1001 &amp; 1 &lt;&lt; 3 = 1000100 &amp; 1 &lt;&lt; 2 = 010 &amp; 1 &lt;&lt; 1 = 01 &amp; 1 &lt;&lt; 0 = 1result = 10000 | 1000 | 1 = 11001 è™½ç„¶å¥½åƒæ²¡æœ‰ä¸€æ¬¡è®¡ç®—è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œä½†å¯ä»¥é€šè¿‡ä¸è¿ç®—ã€ä½ç§»è¿ç®—è¿›è¡Œå–å€¼å†ç§»åˆ°åè½¬ä¹‹åçš„ä½ç½®ï¼Œé€šè¿‡å¾ªç¯æŒ¨ä¸ªæŒ¨ä¸ªçš„åè½¬ã€‚æœ€ç»ˆé€šè¿‡æˆ–è¿ç®—åˆåˆ°ä¸€èµ·. æ³¨æ„æ˜¯æˆ–è¿ç®—å˜æˆææˆæ±‚å’Œäº† 12345678public int reverseBits(int n) &#123; int result = 0; for(int i=31; i &gt;= 0; i--)&#123; result |= n &amp; 1 &lt;&lt; i; n = n &gt;&gt;&gt; 1; &#125; return result;&#125; è¿™é¢˜æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å°±ä¸è°ˆäº†éƒ½æ˜¯æœ‰é™çš„å¸¸é‡,å¦‚æœäºŒè¿›åˆ¶ä¸²é•¿åº¦å‡è®¾æ— é™çš„å¯ä»¥è®¾å®šä¸ºnï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯nï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¼˜åŒ–çš„ä½™åœ° 1for(int i=31; i &gt;= 0 &amp;&amp; n ï¼= 0; i--) ã€‚åŠ ä¸Šn !&#x3D; 0 çš„æ¡ä»¶ï¼Œå›ºå®šçš„32ä½æ•°å­—å¯èƒ½å®é™…åªæœ‰å‡ ä½ï¼Œé«˜ä½ä¹‹åå…¨éƒ½æ˜¯è¡¥0çš„å°±æ²¡å¿…è¦ç®¡äº†ã€‚ é¢˜è§£äºŒï¼šåˆ†æ²»æ³• åˆ†æ²»å°†å¤§é—®é¢˜é€’å½’åˆ’åˆ†æˆå°é—®é¢˜ï¼Œé€šè¿‡è§£å†³å°é—®é¢˜æœ€ç»ˆè§£å†³å¤§é—®é¢˜çš„æ€æƒ³ å°†32ä½äºŒè¿›åˆ¶ä¸²åè½¬ï¼Œå¯åˆ’åˆ†ä¸ºå°†å‰16ä½åè½¬å’Œå°†å16ä½åè½¬ç„¶åè°ƒæ¢ä¸¤ä¸ª16ä½ï¼Œå…¶ä¸­å‰å16ä½æ€ä¹ˆåè½¬ï¼Œä¹Ÿå¯åˆ’åˆ†ä¸ºå‰8å’Œå8ä½ã€‚â€¦..æœ€ç»ˆåˆ’åˆ†åˆ°ä¸¤ä¸ªæ•°çš„åè½¬ã€‚ é—®é¢˜åˆ’åˆ†ï¼š è§£å†³é—®é¢˜ï¼š åŠ¨å›¾å·æ‡’ä¸€ç‚¹ï¼Œä¸»è¦æ˜¯è¡¨ç¤ºå¦‚ä¸‹è¿‡ç¨‹ï¼š 12345671 2 3 4 5 6 7 8-&gt;21 43 65 87-&gt;4321 8765-&gt;87654321 æ­£å¸¸æ¥è¯´éœ€è¦é€’å½’å‡½æ•°ä¼ å…¥ä¸€ç»„å†…å®¹ï¼Œå‡½æ•°è¿›è¡Œæ‹†åˆ†ä¸¤ç»„ç„¶ååˆ†åˆ«è°ƒç”¨è‡ªèº«ä¹‹åè¿›è¡Œæ‹¼æ¥ã€‚ç›´åˆ°æœ€åä¼ å…¥çš„æ˜¯ä¸€ä½æ•°ï¼Œç›´æ¥è¿”å›ã€‚ åœ¨è¿™é‡Œç”±äºæ•´æ•°çš„èŒƒå›´äºŒè¿›åˆ¶ä¸²çš„é•¿åº¦æ˜¯32ï¼Œå› æ­¤ä¸éœ€è¦å»é€’å½’æ¢åº•åˆ¤æ–­ä»€ä¹ˆæ—¶å€™ç»“æŸã€‚æˆ‘ä»¬ç›´æ¥çŸ¥é“æœ‰5å±‚log2(32) = 5ã€‚ç›´æ¥æŒ‰ç…§ä»åº•æ±‚è§£çš„é¡ºåºå†™5æ­¥æ“ä½œå³å¯ å…ˆçœ‹ç¬¬ä¸€ä¸ªç›®æ ‡å°±æ˜¯æŠŠç›¸é‚»çš„ä¸¤ä¸¤çš„æ•°åè½¬ã€‚æ€ä¹ˆé€šè¿‡æ•´æ•°çš„ä½è¿ç®—è®©å®ƒçš„å€¼çš„äºŒè¿›åˆ¶å‘ç”Ÿè¿™ä¸ªå˜åŒ–å‘¢ï¼Ÿ æ‰“ä¸ªè‰ç¨¿ï¼š 1234åŸæ•°ï¼š10101101å¶ä½ï¼š1 1 1 0å¥‡ä½ï¼š 0 0 1 1å¸Œæœ›ï¼š01011110 æ‡‚äº†ï¼Œå–åˆ°å¥‡ä½ä¸å¶ä½çš„ä¸¤ç»„æ•°å…¶ä»–ä½è¡¥0,ä¸¤ç»„ä¸€ä¸ªå·¦ç§»ä¸€ä¸ªå³ç§»ä¹‹åè¿›è¡Œæˆ–è¿ç®—è¾¾åˆ°ç›®çš„ æ€ä¹ˆå–åˆ°å¥‡ä½å’Œå¶ä½å°±å¾ˆç®€å•äº†ï¼Œåˆ†åˆ«å’Œ10101010ã€01010101è¿™ç§è¿›è¡Œä¸è¿ç®—è‡ªç„¶å°±æŠŠå…¶ä»–ä½æ¸…é›¶æŠŠå¥‡å¶ä½ä¿æŒå®ƒä»¬è‡ªå·±ã€‚ 1210101101 &amp; 10101010 = 10101000101011 &amp; 010101 = 00000101 ç¬¬ä¸€æ­¥åè½¬ï¼š 1(n &amp; 101010 &gt;&gt; 1) | (n &amp; 010101 &lt;&lt; 1) åé¢ç¬¬äºŒæ­¥ç¬¬ä¸‰æ­¥â€¦éƒ½å·®ä¸å¤šäº† 12(n &amp; 11001100 &gt;&gt; 2) | (n &amp; 00110011 &lt;&lt; 2)(n &amp; 11110000 &gt;&gt; 4) | (n &amp; 00001111 &lt;&lt; 4) é‚£å¯¹äºæˆ‘ä»¬32ä½çš„æ•´æ•°æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·äº†ï¼Œå¼€å§‹ç¼–ç ï¼š 1234567891011121314151617public class Solution &#123; // ç”¨16è¿›åˆ¶å†™å¾—çŸ­ä¸€ç‚¹ğŸ˜‚ int g1 = 0x55555555; // 01010101010101010101010101010101 int g2 = 0x33333333; // 00110011001100110011001100110011 int g4 = 0x0f0f0f0f; // 00001111000011110000111100001111 int g8 = 0x00ff00ff; // 00000000111111110000000011111111 int g16 = 0x0000ffff; //00000000000000001111111111111111 public int reverseBits(int n) &#123; n = (n &amp; ~g1) &gt;&gt;&gt; 1 | (n &amp; g1) &lt;&lt; 1; n = (n &amp; ~g2) &gt;&gt;&gt; 2 | (n &amp; g2) &lt;&lt; 2; n = (n &amp; ~g4) &gt;&gt;&gt; 4 | (n &amp; g4) &lt;&lt; 4; n = (n &amp; ~g8) &gt;&gt;&gt; 8 | (n &amp; g8) &lt;&lt; 8; n = (n &amp; ~g16) &gt;&gt;&gt; 16 | (n &amp; g16) &lt;&lt; 16; return n; &#125;&#125; ä¸¤ä¸ªè§£æ³•æ•ˆç‡å·®ä¸å¤šå› ä¸ºèŒƒå›´é™åˆ¶åœ¨32,ä¸€ä¸ªè®¡ç®—æ¬¡æ•°å°äºç­‰äº32ä¸€ä¸ªè®¡ç®—æ¬¡æ•°æ˜¯log2(32)&#x3D;5. æ€»ç»“é¢˜è§£ä¸€è¿˜æ˜¯å®¹æ˜“å°±é¡ºä¸‹å»å°±å†™æˆäº†ï¼Œåˆ†æ²»æ³•çš„ä¹Ÿæ˜¯å®¹æ˜“æƒ³å¾—åˆ°ï¼Œå…¶å®æˆ‘ä»¬åœ¨å†™æ—©æœŸå…³äºå­—ç¬¦ä¸²åè½¬è¿™äº›çš„æ—¶å€™å¤§è‡´çš„æ€æƒ³éƒ½ç”¨è¿‡ï¼ŒæŒ¨ä¸ªç§»ä½è¿˜æœ‰åˆ†æ²»ã€‚åœ¨è¿™é‡Œåªæ˜¯ç»†èŠ‚ä¸ä¸€æ ·ä»ç›´æ¥æ“ä½œå…ƒç´ åˆ°ç”¨è¿ç®—è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚åœ¨åˆ†æ²»ç¼–ç çš„æ—¶å€™æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ä¸€ä¸ªæ˜¯ä½ç§»è¿ç®—çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„å› æ­¤åœ¨ä»£ç å‰åˆ†æçš„æ—¶å€™(n &amp; 101010 &gt;&gt; 1) | (n &amp; 010101 &lt;&lt; 1)è¿™æ ·å†™æ˜¯æœ‰é—®é¢˜çš„åº”è¯¥æ˜¯(n &amp; 101010) &gt;&gt; 1 | (n &amp; 010101) &lt;&lt; 1 è¿™æ ·æ‰ä¿è¯å…ˆä¸è¿ç®—å†ä½ç§»æœ€åè¿›è¡Œæˆ–è¿ç®—ã€‚ç¬¬äºŒä¸ªå°±æ˜¯å³ä½ç§»æŒ‰ç…§æ¨ç†é€»è¾‘æ˜¯å·¦è¾¹è¡¥0ï¼Œå¦‚æœå†™æˆ&gt;&gt;å½“å€¼ä¸ºè´Ÿæ•°æ—¶è¡¥çš„æ˜¯1å°±ä¸å±äºæ¨ç†çš„æ€è·¯äº†ã€‚è§£é¢˜æ„Ÿå—è¿˜ä¸é”™ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š4ã€å»ºé€ è€…æ¨¡å¼","slug":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š4ã€å»ºé€ è€…æ¨¡å¼","date":"2021-10-27T01:57:55.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/10/27/è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š4ã€å»ºé€ è€…æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2021/10/27/%E8%BD%BB%E6%9D%BE%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%88%9B%E5%BB%BA%E5%9E%8B%EF%BC%89%EF%BC%9A4%E3%80%81%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ æœ¬ç¯‡å†…å®¹å…³äºå»ºé€ è€…æ¨¡å¼ã€‚åŒ…å«å»ºé€ è€…æ¨¡å¼çš„è®¾è®¡ã€å®ç°ä»¥åŠç–‘é—®ç‚¹ã€‚ å®šä¹‰ å»ºé€ è€…æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚â€”â€”ç™¾åº¦ç™¾ç§‘ ä¸€èˆ¬åœ¨å»åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œéƒ½æ˜¯ç›´æ¥ä½¿ç”¨å…¶æ„é€ å™¨å¾—åˆ°ã€‚ä½†å¯¹äºå¤æ‚çš„äº§å“ï¼Œé‡Œé¢å¯èƒ½æ˜¯åŒ…å«å¤šä¸”å¤æ‚çš„å±æ€§ã€‚åœ¨ä»£ç ä½¿ç”¨è¿™ä¸ªäº§å“å¯¹è±¡è¿›è¡Œç›´æ¥åˆ›å»ºå°±éœ€è¦äº†è§£è¿™ä¸ªç±»æ‰€æœ‰çš„å±æ€§åŠå®ƒçš„è¿ä½œæµç¨‹ï¼Œæ‰èƒ½æ­£å¸¸åˆ›å»ºå‡ºè‡ªå·±æƒ³è¦çš„ã€‚ å¯¹äºå»ºé€ è€…æ¨¡å¼å°±æ˜¯æŠŠäº§å“å¯¹è±¡çš„åˆ›å»ºå§”æ‰˜ç»™ä¸€ä¸ªå«åšå»ºé€ è€…çš„å®¶ä¼™ï¼Œå®¢æˆ·ä»£ç å°±é€šè¿‡å»ºé€ è€…è·å–ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰é‡Œçš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ã€‚ å¯¹äºä¸€ä¸ªå¤æ‚äº§å“å¾ˆå¤šå†…å®¹æ˜¯å®¢æˆ·ä»£ç æ–¹å¹¶ä¸éœ€è¦äº†è§£çš„ï¼Œè€Œæœ‰äº›æ˜¯éœ€è¦è®©å®¢æˆ·ä»£ç æŒ‡å®šçš„ã€‚å»ºé€ è€…æ„å»ºè¿™ä¸ªå¯¹è±¡çš„å†…å®¹æ—¶ï¼Œæœ‰çš„æ˜¯é»˜è®¤ï¼Œæœ‰çš„æ˜¯é€šè¿‡å®¢æˆ·ä»£ç ä¼ å‚ã€‚ ä¼ ç»Ÿå»ºé€ è€…ä¸‹é¢ç”¨é¸¡å…¬ç…²ä½œä¸ºä¾‹å­ï¼š è¿™é‡Œçš„å®¢æˆ·ä»£ç éœ€è¦çš„äº§å“å¯¹è±¡ä¹Ÿå°±æ˜¯é¸¡å…¬ç…²ï¼Œå®¢æˆ·ä»£ç æœ€ç»ˆé€šè¿‡æŒ‡æŒ¥è€…è·å–è¿™ä¸ªäº§å“å¯¹è±¡ã€‚å®¢æˆ·ä»£ç æ˜¯çŸ¥é“è‡ªå·±éœ€è¦è¿™ä¸ªäº§å“ä¹ŸçŸ¥é“å…¶ä¸­çš„ä¸€äº›å†…å®¹ï¼Œè¿™äº›å†…å®¹ç”±å®¢æˆ·ä»£ç æŒ‡å®šï¼Œä½†å¯¹äºè¿™ä¸ªäº§å“è¿˜æœ‰å¾ˆå¤šå±æ€§æˆ–è€…æˆåˆ†å®¢æˆ·ä»£ç ä¸æƒ³è¦å»å­¦ä¹ äº†è§£è¿™äº›éƒ½æ˜¯ç”±å»ºé€ è€…å®Œå–„å°±å¥½ã€‚ æœ€ç»ˆæˆ‘ä»¬çš„å®¢æˆ·ä»£ç é€šè¿‡æŒ‡æŒ¥è€…çš„construct()æ–¹æ³•æŒ‡å®šè‡ªå·±è¦æŒ‡å®šçš„äº§å“çš„éƒ¨åˆ†å†…å®¹ï¼Œå°±èƒ½å¾—åˆ°éœ€è¦çš„äº§å“å¯¹è±¡ã€‚ ä»£ç ç¤ºæ„ï¼š 123456789// äº§å“ç±»class ChickenPot&#123; private Qz qz; private Dyc dyc; private Td td; private Jzg jzg; //... // getter setter&#125; 1234567891011// æŠ½è±¡å»ºé€ è€… ï¼ˆæ¥å£æˆ–æŠ½è±¡ç±»ï¼‰interface AbstractBuilder&#123; // æŒ‡å®šå„ä¸ªéƒ¨åˆ† void qz(Qz qz); void dyc(Dyc dyc); void td(Td td); void jzg(Jzg jzg); //... // ç»„è£…æˆå“ ChickenPot build();&#125; 1234567891011121314151617181920212223242526272829// å…·ä½“å»ºé€ è€…class Builder implements AbstractBuilder&#123; private Qz qz; private Dyc dyc; private Td td; private Jzg jzg; //... // ä¹Ÿå¯ä»¥å°†voidæ¢æˆthis,æ–¹ä¾¿é“¾å¼è°ƒç”¨ void qz(Qz qz)&#123; this.qz = qz; &#125; void dyc(Dyc dyc)&#123; this.dyc = dyc; &#125; void td(Td td)&#123; this.td = td; &#125; void jzg(Jzg jzg)&#123; this.jzg = jzg; &#125; ChickenPot build()&#123; ChickenPot chicken = new ChickenPot(); chicken.setQz(this.qz); chicken.setDyc(this.dyc); chicken.setTd(this.td); chicken.setJzg(this.jzg); return chicken; &#125;&#125; 12345678910111213class Director&#123; private AbstractBuilder builder; Director(AbstrctBuilder builder)&#123; this.builder = builder; &#125; public ChikenPot construct(Qz qz,Dyc dyc,Td td,Jzg jzg)&#123; builder.qz(qz); builder.dyc(dyc); builder.td(td); builder.jzg(jzg); return builder.build(); &#125;&#125; ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç®€å•çš„å»ºé€ è€…æ¨¡å¼çš„å®ç°ï¼Œä¸»è¦æ˜¯å±è”½å®¢æˆ·ä»£ç ç›´æ¥é¢å¯¹æ„å»ºé¡ºåºï¼Œæˆ–æ˜¯æŒ‡å®šå¯¹è±¡å…¨éƒ¨å†…å®¹å¤æ‚æ€§ã€‚ ä¸Šè¿°ä»£ç å…¶å®è¡¨è¾¾äº†å®¢æˆ·å¯¹äºå››ä¸ªé…èœæ˜¯åŠ çš„è‡ªå·±å¸¦çš„ï¼Œè‡ªå·±æŒ‡å®šåƒå¼ ã€è±†èŠ½èœç­‰ç­‰å±æ€§å€¼ï¼Œæ›´å¤šçš„æƒ…å†µè¿™äº›å…¶å®æ˜¯å»ºé€ è€…é»˜è®¤ç»™äº§å“æŒ‡å®šçš„ã€‚çœŸæ­£è®©å®¢æˆ·ä»£ç ä¼ å…¥å†…å®¹çš„å­—æ®µæ˜¯å°‘çš„ã€‚ ç®€åŒ–ç‰ˆç®€åŒ–ç‰ˆæœ¬ç›¸å½“äºæ˜¯å»æ‰æŒ‡æŒ¥è€…è¿™ä¸ªç¯èŠ‚ï¼Œè®©å®¢æˆ·ä»£ç ç›´æ¥ä½¿ç”¨å»ºé€ è€…çš„æ–¹æ³•å®Œæˆè·å–äº§å“å¯¹è±¡ã€‚ åœ¨å®é™…æƒ…å†µä¸‹å¯èƒ½å¹¶æ²¡æœ‰å¤ªå¤æ‚çš„å¯¹è±¡å±æ€§çš„ç›¸äº’ä¾èµ–ï¼Œå¯¹äºäº§å“åªç”¨æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ„å»ºéœ€è¦æŒ‡å®šå†…å®¹çš„éƒ¨åˆ†è·å¾—å¯¹è±¡ï¼Œä¸æ¶‰åŠä¾èµ–é¡ºåºï¼Œå°±å¯ä»¥ä¸ä½¿ç”¨æŒ‡æŒ¥è€…ç¯èŠ‚ã€‚ åœ¨Ideaä¸Šä¹Ÿå¯å®‰è£…ã€Builder Generatorã€‘å³å¯ä¸€é”®ç”Ÿäº§è¿™ç§å»ºé€ è€…ã€‚ ä»£ç éƒ½æ˜¯å¤§åŒå°å¼‚ å®¢æˆ·ä»£ç ç›´æ¥å»ä½¿ç”¨å»ºé€ è€… 1ChickenPot chicken = new ChickenPotBuilder().withQz(&quot;xxx&quot;).withTd(&quot;xxx&quot;).build(); é—®é¢˜ å»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ åœ¨æˆ‘çœ‹æ¥æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œä¸€ä¸ªæ˜¯é€šè¿‡ä¼ å…¥æŠ½è±¡æè¿°å·¥å‚å»åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»ä¸‹çš„å“ªä¸ªå…·ä½“ç±»çš„å¯¹è±¡ï¼Ÿå¦ä¸€ä¸ªæ˜¯ä¼ äº›å†…å®¹åˆ›å»ºä¸€ä¸ªå…·ä½“ç±»çš„æ€æ ·çš„å¯¹è±¡ï¼Ÿ å¯¹äºå·¥å‚æ¨¡å¼å®¢æˆ·ä»£ç éœ€è¦äº†è§£äº§å“çš„çŸ¥è¯†æ˜¯è¦å°‘äºå»ºé€ è€…æ¨¡å¼çš„ã€‚å®¢æˆ·ä»£ç åªéœ€è¦è‡ªå·±ç”¨ä»€ä¹ˆã€‚å»ºé€ è€…è¿”å›ä¸€ä¸ªå…·ä½“ç±»å¯¹è±¡ã€‚ å»ºé€ è€…æ¨¡å¼ç§å®¢æˆ·ä»£ç ç›¸å¯¹æ¥è¯´å¯¹è‡ªå·±è¦ç”¨çš„äº§å“äº†è§£çŸ¥è¯†å¤šä¸€ç‚¹ï¼Œä½†ä¸éœ€è¦å®Œå…¨äº†è§£åŸç†ã€‚ä¸€ä¸ªå…·ä½“ç±»å¯äº§ç”Ÿå„å¼å„æ ·çš„å¯¹è±¡ï¼Œå®¢æˆ·ä»£ç å»æŒ‡å¯¼äº†éƒ¨åˆ†å†…å®¹ï¼Œå…·ä½“å·¥ä½œåœ¨å»ºé€ è€…ï¼Œæœ€ç»ˆå®Œæˆå¯¹è±¡æ„å»ºã€‚ å·¥å‚æ¨¡å¼ï¼š å»ºé€ è€…æ¨¡å¼ï¼š å®¢æˆ·ä»£ç ä¸ºå•¥ä¸ç›´æ¥ç”¨äº§å“ç±»çš„æ„é€ å™¨æˆ–è€…Setterå‘¢ï¼Ÿ ç®€å•çš„å¯¹è±¡å½“ç„¶æ˜¯æ— æ‰€è°“çš„ï¼Œé’ˆå¯¹å¤æ‚å…·ä½“ç±»ä½¿ç”¨æ„é€ å™¨è¦ä¹ˆæ’åˆ—ç»„åˆå†™å‡ºå„ç§æ„é€ å™¨ï¼Œè¦ä¹ˆé¢å¯¹å…¨éƒ¨å‚æ•°çš„æ„é€ å™¨ï¼Œè¿™æ ·å°±è¦å»å¯¹äº§å“ç±»çš„äº†è§£çŸ¥è¯†å¢åŠ äº†ã€‚ç¬¬äºŒå°±æ˜¯å±æ€§ä¾èµ–ï¼Œå¯¹äºä¸€ä¸ªå±æ€§å†…å®¹å®ƒåœ¨ä½¿ç”¨ä¸Šæ—¶éœ€è¦ä¾èµ–å½“å‰äº§å“å¯¹è±¡çš„å…¶ä»–å±æ€§ï¼Œæˆ‘ä»¬æ²¡åŠæ³•äº†è§£è¿™ä¸ªäº§å“å…¶ä¸­è¿ä½œç»†èŠ‚ï¼Œæ— æ³•åˆ›å»ºå‡ºæ­£ç¡®çš„å¯¹è±¡ã€‚åœ¨å»ºé€ è€…å°±å¯ä»¥å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œä»¥åŠé’ˆå¯¹ä½ çš„å†…å®¹çš„è¿›ä¸€æ­¥ä¿®é¥°æ‰èƒ½ç»„è£…åˆ°äº§å“å¯¹è±¡å½“ä¸­ã€‚ æ€»ç»“å»ºé€ è€…æ¨¡å¼æ˜¯æä¾›ç»™å®¢æˆ·ä»£ç è·å–å¤æ‚ç±»å‹å¯¹è±¡çš„ä¸€ç§æ–°æ–¹å¼ï¼Œæ¯”èµ·åŸç”Ÿçš„åˆ›å»ºè¿›è¡Œäº†å°è£…ï¼Œä½†ä¹Ÿæä¾›å„ä¸ªæ­¥éª¤æœ‰å®¢æˆ·ä»£ç è¿›è¡Œé€‰æ‹©ã€‚é€šè¿‡æå–æŠ½è±¡ï¼Œå»ºé€ è€…ä¹Ÿèƒ½ä¾¿äºæ‰©å±•ï¼Œä¸åŒçš„å»ºé€ è€…å¯å¯¹éšè—çš„ç»†èŠ‚æ“ä½œä»¥åŠå®¢æˆ·ä¼ å…¥å†…å®¹çš„å…·ä½“æŒ‡å®šä¸åŒï¼Œä¸ºäº§å“å¯¹è±¡é‡Œé¢çš„ç»„åˆå±æ€§æä¾›æ›´å¤šçš„é€‰æ‹©ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"cookiesã€sessionStorageã€localStorageä¸‰è€…æœ‰å•¥åŒºåˆ«","slug":"cookiesã€sessionStorageã€localStorageä¸‰è€…æœ‰å•¥åŒºåˆ«","date":"2021-10-18T07:11:58.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2021/10/18/cookiesã€sessionStorageã€localStorageä¸‰è€…æœ‰å•¥åŒºåˆ«/","link":"","permalink":"http://yournotes.cn/2021/10/18/cookies%E3%80%81sessionStorage%E3%80%81localStorage%E4%B8%89%E8%80%85%E6%9C%89%E5%95%A5%E5%8C%BA%E5%88%AB/","excerpt":"","text":"å‰è¨€ å†™é¡¹ç›®ç”¨åˆ°äº†sessionStorageæ¥å­˜sessionidï¼Œä¹‹å‰ä¸€ç›´éƒ½æ˜¯ç”¨çš„cookieã€‚è°ƒè¯•åˆçœ‹åˆ°äº†è¿˜æœ‰localStorageã€‚ä¹‹å‰æ²¡æœ‰äº†è§£è¿‡å¥½å¥‡æŸ¥äº†æŸ¥ï¼Œé¡ºä¾¿åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚ åŒºåˆ« cookies sessionStorage localStorage å­˜å‚¨ç©ºé—´ ä¸€èˆ¬æµè§ˆå™¨4KB ä¸€èˆ¬æµè§ˆå™¨5MB ä¸€èˆ¬æµè§ˆå™¨5MB å­˜å‚¨æ—¶æ•ˆ é»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨å¤±æ•ˆï¼Œä½†å¯è®¾ç½®æ—¶é—´å°±ä»¥è®¾ç½®æ—¶é—´ä¸ºå‡† ä»…åœ¨å½“å‰æ ‡ç­¾é¡µï¼Œæµè§ˆå™¨æˆ–è€…æ ‡ç­¾å…³é—­åˆ™æ¸…é™¤ æ°¸ä¹…ä¿å­˜ï¼Œé¡»æ‰‹åŠ¨åˆ é™¤ è¯·æ±‚æºå¸¦ è¯·æ±‚æ—¶æºå¸¦cookiesåœ¨è¯·æ±‚å¤´ ä¸æºå¸¦ ä¸æºå¸¦ å¯è§èŒƒå›´ åŒä¸€ä¸»åŸŸ å½“å‰æ ‡ç­¾é¡µ åŒä¸€ä¸»åŸŸ","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yournotes.cn/tags/%E9%9A%8F%E7%AC%94/"}]},{"title":"å¤±ç„¦äº‹ä»¶ä¸å›è½¦äº‹ä»¶å†²çª","slug":"å¤±ç„¦äº‹ä»¶ä¸å›è½¦äº‹ä»¶å†²çª","date":"2021-09-29T07:27:42.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2021/09/29/å¤±ç„¦äº‹ä»¶ä¸å›è½¦äº‹ä»¶å†²çª/","link":"","permalink":"http://yournotes.cn/2021/09/29/%E5%A4%B1%E7%84%A6%E4%BA%8B%E4%BB%B6%E4%B8%8E%E5%9B%9E%E8%BD%A6%E4%BA%8B%E4%BB%B6%E5%86%B2%E7%AA%81/","excerpt":"","text":"å‰è¨€ åœ¨è‡ªå·±çš„å°ç½‘ç›˜çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åœ¨æ–°å»ºæ–‡ä»¶å¤¹æ—¶äº§ç”Ÿä¸€ä¸ªæ–‡ä»¶å¤¹å’Œä¸€ä¸ªæ–‡ä»¶åçš„è¾“å…¥æ¡†ï¼Œéœ€è¦åœ¨è¾“å…¥åç§°åå›è½¦æˆ–è€…é¼ æ ‡ç‚¹å‡»å¤–é¢å®Œæˆæ–‡ä»¶å¤¹åˆ›å»º é—®é¢˜1234&lt;input @keyup.enter=&quot;confirmName(xxx)&quot; @blur=&quot;confirmName(xxx)&quot;/&gt; é—®é¢˜åœ¨ä¸ä¸¤ä¸ªäº‹ä»¶éƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½ç¡®è®¤åç§°ï¼Œä½†ç»‘å®šä¸¤ä¸ªäº‹ä»¶ä¹‹åå›è½¦äº‹ä»¶å¤±æ•ˆäº†ã€‚ è§£å†³è§£å†³æ–¹å¼æ˜¯è®©å›è½¦äº‹ä»¶çš„å†…å®¹å…³è”ä¸Šå¤±å»ç„¦ç‚¹äº‹ä»¶ï¼Œæ¯•ç«Ÿéƒ½æ˜¯è§¦å‘åŒä¸€ä¸ªåŠŸèƒ½ã€‚ 1234&lt;input @keyup.enter=&quot;$event.target.blur()&quot; @blur=&quot;confirmName(xxx)&quot;/&gt;","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"ä¸Šä¼ å¤§æ–‡ä»¶å¤±è´¥","slug":"ä¸Šä¼ å¤§æ–‡ä»¶å¤±è´¥","date":"2021-09-26T06:17:02.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/09/26/ä¸Šä¼ å¤§æ–‡ä»¶å¤±è´¥/","link":"","permalink":"http://yournotes.cn/2021/09/26/%E4%B8%8A%E4%BC%A0%E5%A4%A7%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5/","excerpt":"","text":"å‰è¨€ å‰æ®µæ—¶é—´æçš„ç½‘ç›˜çš„é¡¹ç›®ï¼Œåˆå§‹åŒ–å¥½äº†åŸºæœ¬çš„ç™»å½•ä»¥åŠä¸Šä¼ ä¸‹è½½çš„åŠŸèƒ½å°±ä¸€ç›´æ²¡ç¢°äº†ã€‚ä»Šå¤©æ‡’å¾—æç®—æ³•å’Œè®¾è®¡æ¨¡å¼äº†ï¼Œæ¥ç€å†™ä¸‹é¡¹ç›®ï¼Œç›®å‰ç½‘ç›˜ä¸Šä¼ 1Mä»¥ä¸Šçš„æ–‡ä»¶ä¼šä¸Šä¼ å¤±è´¥ é—®é¢˜1413 Entity Too Large åˆ†æé¦–å…ˆé”å®šåœ¨Nginxä¸Šé¢ï¼Œéƒ¨ç½²åæ˜¯nginxåå‘ä»£ç†åå°ï¼Œwebå‰ç«¯ä¸nginxç›´æ¥äº¤äº’ã€‚ä¸”å‘ç°ç¡®å®nginxé»˜è®¤æ˜¯é™åˆ¶1Mçš„è¯·æ±‚å®ä½“ã€‚ å› æ­¤å°±å…ˆé…ç½®ä¸‹Nginxçš„å¤§å°é™åˆ¶ 1client_max_body_size 1024M; // æˆ‘è¿™é‡Œé…æˆ1024Mä¹Ÿå°±æ˜¯1G è¿™ä¸ªä¸œè¥¿å¯é…ç½®åœ¨httpã€serveræˆ–è€…locationä¸‹ï¼Œæˆ‘å°±ç›´æ¥é…åœ¨locationä¸‹çš„ï¼š 123456789101112131415161718server &#123; listen 80; listen [::]:80; server_name localhost; location / &#123; root /usr/share/nginx/html; index index.html index.htm; &#125; location /api/ &#123; client_max_body_size 1024M; proxy_pass http://www.yournotes.cn:8080/; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125;&#125; é‡å¯nginxä¹‹åï¼Œä¸Šè¿°é—®é¢˜æ¶ˆå¤±ï¼Œä½†ä»ä¸Šä¼ ä¸æˆåŠŸã€‚ç­‰å¾…ä¸€æ®µæ—¶é—´åæ˜¾ç¤º500çš„é”™ é‚£å°±æŸ¥çœ‹ä¸‹åå°çš„æ—¥å¿— 1org.apache.tomcat.util.http.fileupload.impl.SizeLimitExceededException: the request was rejected because its size (22960862) exceeds the configured maximum (10485760) 1234@RequestMapping(&quot;upload&quot;)public JSONObject upload(MultipartFile file)&#123; ... &#125; ç®€å•è°ƒè¯•çŸ¥é“è¿™ä¸ªé—®é¢˜åœ¨Controlleræ–¹æ³•ä¹‹å‰ï¼Œå’ŒControllerå½“ä¸­ä»£ç æ— å…³ã€‚éœ€è¦é…ç½®å…³äºMultipartFileæ–‡ä»¶å¤§å°é™åˆ¶é—®é¢˜ã€‚ 123456spring: servlet: multipart: enabled: true max-file-size: 100MB max-request-size: 100MB è¿™æ ·é…ç½®ä¹‹åå°±okäº†ã€‚ æ€»ç»“æœ‰ä¸¤ç‚¹ï¼šç¬¬ä¸€ç‚¹æ˜¯nginxè¯·æ±‚å®ä½“çš„é™åˆ¶ã€ç¬¬äºŒç‚¹æ˜¯Springå¯¹multipartçš„é™åˆ¶.","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰3ã€æŠ½è±¡å·¥å‚æ¨¡å¼","slug":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰3ã€æŠ½è±¡å·¥å‚æ¨¡å¼","date":"2021-09-24T07:26:10.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/09/24/è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰3ã€æŠ½è±¡å·¥å‚æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2021/09/24/%E8%BD%BB%E6%9D%BE%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%88%9B%E5%BB%BA%E5%9E%8B%EF%BC%893%E3%80%81%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ æœ¬ç¯‡å†…å®¹å…³äºæŠ½è±¡å·¥å‚æ¨¡å¼ã€‚åŒ…å«æŠ½è±¡å·¥å‚æ¨¡å¼çš„æ¦‚å¿µä»¥åŠå·®å¼‚ å®šä¹‰ æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»ºç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æ˜ç¡®æŒ‡å®šå…·ä½“ç±» â€”â€” ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ æŒ‰ç…§è¿™ä¸ªå®šä¹‰çš„æè¿°ï¼Œå¥½åƒæ˜¯å’Œå·¥å‚æ–¹æ³•æ¨¡å¼æ²¡æœ‰å•¥ä¸åŒçš„ã€‚åŒæ ·æ˜¯æä¾›ä¸€ä¸ªæŠ½è±¡ç±»æˆ–è€…æ¥å£ï¼Œé‡Œé¢æä¾›ä¸€ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºå¯¹è±¡ä¸”ä¸éœ€è¦æŒ‡æ˜å…·ä½“ç±»ã€‚â€”â€”å…³äºå·¥å‚æ–¹æ³•æ¨¡å¼çœ‹è¿™ç¯‡ã€Šè½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰2ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€‹ è¿™é‡Œç”»ä¸€ä¸ªæŠ½è±¡å·¥å‚å¤§æ¦‚çš„UMLå›¾ï¼š å°±å›¾çš„åŒºåˆ«è€Œè¨€ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªæä¾›ä¸€ä¸ªåˆ›å»ºå®ä¾‹çš„æ–¹æ³•ã€‚è€Œå¯¹äºå›¾ä¸Šçš„ç»“æ„ä¸€ä¸ªå…·ä½“å·¥å‚éœ€è¦å®ç°æ¥å£è§„å®šçš„å¤šä¸ªåˆ›å»ºå®ä¾‹æ–¹æ³•ã€‚ å®¢æˆ·ä»£ç æœ€ç»ˆè·å–çš„ä¸€ç³»åˆ—äº§å“çš„å…·ä½“å®ä¾‹ï¼Œå–å†³äºæ³¨å…¥çš„å…·ä½“å·¥å‚ 12345678910public class Person &#123; FoodFactory factory = new å¾è€å¸ˆæ—©é¤åº—(); public void eat() &#123; // è·å–é£Ÿç‰© Food è€å¾ç‚’é¢ = factory.ceateé¢æ¡(&quot;ç‚’é¢&quot;); Food è€å¾ç²‰åŒ… = factory.ceateåŒ…å­(&quot;ç²‰åŒ…&quot;); // åƒ System.out.println(&quot;æˆ‘å¼€åƒå•¦&quot;+è€å¾ç‚’é¢+è€å¾ç²‰åŒ…); &#125;&#125; ç–‘é—® æŒ‰ç…§ä¸Šé¢æ‰€è¯´ç¡®å®æŠ½è±¡å·¥å‚å¤šäº†æ–¹æ³•ï¼Œä½†å·¥å‚æ–¹æ³•æ¨¡å¼ä¸€æ ·å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å·¥å‚æ–¹æ³•æ¨¡å¼åªæä¾›ä¸€ä¸ªæŠ½è±¡çš„å·¥å‚æ–¹æ³•ï¼Œå¦‚æœè¦å’ŒæŠ½è±¡å·¥å‚åˆ›å»ºå¯¹è±¡çš„èŒƒå›´ä¸€æ ·çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå”¯ä¸€çš„å·¥å‚æ–¹æ³•çš„è¿”å›ç±»å‹å°±è¦ç›¸å¯¹æ¥è¯´å¤§ä¸€å±‚ã€‚ä¸”ç”±å„ä¸ªå­ç±»æ¥æä¾›å…·ä½“åˆ›å»ºçš„æ˜¯è¿™ä¸ªå¤§ç±»å‹ä¸‹çš„å“ªä¸ªå…·ä½“ç±»æœ€ç»ˆéƒ½ç”±å¤§ç±»æ¥æ¥æ”¶ã€‚å¯¹äºæŠ½è±¡æ–¹æ³•æ¥è¯´æ˜¯ç›´æ¥æŒ‡å®šäº†éœ€è¦åˆ›å»ºçš„å„ä¸ªç±»å‹ã€‚è¿™æ ·è¿™ä¸ªç±»å‹æ—¢ä¸æ˜¯å…·ä½“ä¹Ÿä¸è‡³äºå¤ªæŠ½è±¡ï¼Œä¾¿äºä½¿ç”¨ï¼Œä¸€å¥—äº§å“å„è‡ªæœ‰å„è‡ªçš„ä½¿ç”¨ç‚¹ã€‚ å·¥å‚æ–¹æ³•æ˜¯ç”±å­ç±»è‡ªè¡Œå†³å®šå®ä¾‹åŒ–é‚£ä¸ªç±»ï¼Œè€ŒæŠ½è±¡å·¥å‚æ˜¯è‡ªå·±å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚ åœ¨Javaå½“ä¸­æœ‰å“ªäº›åœ°æ–¹ä½¿ç”¨è¿‡è¿™äº›å·¥å‚æ¨¡å¼å‘¢ï¼Ÿ ç®€å•å·¥å‚ 123public interface BeanFactory &#123; Object getBean(String beanName);&#125; Springçš„BeanFactoryå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Œé€šè¿‡getBeanæ–¹æ³•ä¼ å…¥beanåç§°è·å–å¯¹åº”å®ä¾‹ã€‚å…·ä½“å®ä¾‹æ˜¯ç”±ä¸€å¼€å§‹æ‰«æé…ç½®æ—¶åˆ›å»ºçš„å¹¶åŠ è½½åˆ°mapå½“ä¸­çš„ï¼Œå½“getBeanæ—¶å–å‡ºè¿”å›ã€‚é‡‡ç”¨ç®€å•å·¥å‚çš„Mapå®ç°æ–¹å¼ã€‚ å·¥å‚æ–¹æ³• åŒæ ·åœ¨Springå½“ä¸­ä¹Ÿæœ‰å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä½“ç°AbstractFactoryBeanå¯¹è±¡çš„å…¶ä»–æ“ä½œéƒ½ç”±å…¶ä»–æ–¹æ³•å®Œæˆï¼Œè€Œå…·ä½“çš„åˆ›å»ºç”±å…¶å„ä¸ªå­ç±»å®ç°createInstanceæŠ½è±¡æ–¹æ³•ã€‚è¿™äº›å­ç±»å®ƒä»¬ä¸éœ€è¦ç®¡å¯¹è±¡åç»­æˆ–è€…å‰ç½®æ“ä½œä»…ä»…å®Œæˆåˆ›å»ºã€‚è€Œå…¶ä»–æ“ä½œå‡å¯ä¿è¯æŒ‰ç…§å›ºå®šçš„æµç¨‹ï¼Œåªæ˜¯åˆ›å»ºçš„å¯¹è±¡å…·æœ‰å¤šæ ·æ€§ã€‚ æŠ½è±¡å·¥å‚ æ¯”å¦‚åœ¨Java.sqlåŒ…ä¸‹æœ‰ä¸€ä¸ªæ¥å£å«åšConnectionï¼ˆå·¥å‚æ¥å£ï¼‰ä¹Ÿå°±æ˜¯æ•°æ®åº“è¿æ¥å¯¹è±¡åº”è¯¥éƒ½ä¸é™Œç”Ÿã€‚éœ€è¦å„ä¸ªæ•°åº“å‚å•†æä¾›å®ç°åƒMySQLã€Oracleç­‰ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™ä¸ªæ¥å£å®ƒæ˜ç¡®çš„æŒ‡å®šäº†è¦åˆ›å»ºçš„å„ä¸ªäº§å“çš„æ–¹æ³•ï¼ŒMySQLæˆ–è€…Oracleéƒ½å¯¹å…¶æœ‰ä¸€å¥—çš„å®ç°æ¥åˆ›å»ºè¿™ä¸€å¥—äº§å“å®¶æ—çš„å…·ä½“ç±»çš„å®ä¾‹ã€‚ä¸”å®ƒä»¬ä¹Ÿå¯¹äº§å“ç±»ä¹Ÿæœ‰ä¸€å¥—å…·ä½“çš„å®ç°ã€‚å½“æ¢æˆå·¥å‚å®ä¾‹æ˜¯MySQLæä¾›ï¼Œé‚£ä¹ˆåˆ›å»ºçš„Statementï¼ˆæŠ½è±¡çš„äº§å“ï¼‰å°±æ˜¯MySQLçš„å¯¹äºè¿™ä¸ªäº§å“çš„å…·ä½“ç±»ã€‚è€Œä»£ç ä¸­æ°¸è¿œä½¿ç”¨çš„æ˜¯æŠ½è±¡çš„ï¼Œå·¥å‚åªå‡ºç°Connectionè¿™æ ·çš„æ¥å£è€Œæ²¡æœ‰å…·ä½“çš„å®ç°ç±»ï¼Œè€Œä»£ç ä¸­è·å–çš„äº§å“Blobã€Clobã€Statementä¹Ÿæ˜¯ç”±è¿™äº›æ¥å£æ¥æ”¶ã€‚ å½“å…·ä½“ä½¿ç”¨çš„ä¸€å¥—äº§å“çš„ç±»å‹éœ€è¦å˜åŒ–æ—¶ï¼Œåªéœ€è¦é…ç½®æ–°å·¥å‚ç”Ÿäº§ç°åœ¨è¦ä½¿ç”¨çš„ä¸€å¥—äº§å“å³å¯ã€‚æ•´ä¸ªä»£ç æµç¨‹éƒ½æ˜¯æŠ½è±¡çš„å›ºå®šçš„ã€‚ä¸éœ€è¦å…·ä½“çš„æ›´æ”¹è€Œæ”¹ä»£ç ã€‚ æ€»ç»“å›é¡¾æ•´ä¸ªå·¥å‚æ¨¡å¼æ˜¯ç”¨æ¥å°è£…å¯¹å¯¹è±¡çš„åˆ›å»ºï¼Œä»è€Œå‡å°‘ç¨‹åºä¸å…·ä½“ç±»çš„è€¦åˆã€‚å®ƒç¬¦åˆæˆ‘ä»¬çš„ä¾èµ–å€’ç½®åŸåˆ™â€”â€”é¿å…ä¾èµ–å…·ä½“ç±»å‹ï¼Œå°½é‡ä¾èµ–æŠ½è±¡ã€‚è€Œå·¥å‚æ–¹æ³•ä¸æŠ½è±¡å·¥å‚å„æœ‰ä¸åŒï¼Œå‰è€…å°†ç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œï¼Œåè€…æ›´ä¾§é‡äºåœ¨æ¥å£è§„èŒƒä¸€ç»„äº§å“ç±»å‹ï¼Œæ¯ä¸ªå®ç°ç±»æˆ–è€…å­ç±»æ˜¯å¯¹å…¶ä¸€å¥—äº§å“çš„åˆ›å»ºè¿›è¡Œå®ç°ã€‚å¯ä»¥è¯´å·¥å‚æ¨¡å¼æ˜¯é¢å‘æŠ½è±¡ç¼–ç¨‹çš„ä¸€ä¸ªæœ€ä½³å®è·µã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š461.æ±‰æ˜è·ç¦»","slug":"æ±‰æ˜è·ç¦»","date":"2021-09-22T02:10:58.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2021/09/22/æ±‰æ˜è·ç¦»/","link":"","permalink":"http://yournotes.cn/2021/09/22/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/hamming-distance/ ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„ æ±‰æ˜è·ç¦» æŒ‡çš„æ˜¯è¿™ä¸¤ä¸ªæ•°å­—å¯¹åº”äºŒè¿›åˆ¶ä½ä¸åŒçš„ä½ç½®çš„æ•°ç›®ã€‚ç»™ä½ ä¸¤ä¸ªæ•´æ•° x å’Œ yï¼Œè®¡ç®—å¹¶è¿”å›å®ƒä»¬ä¹‹é—´çš„æ±‰æ˜è·ç¦»ã€‚ ç¤ºä¾‹ 1ï¼š 1234567è¾“å…¥ï¼šx = 1, y = 4è¾“å‡ºï¼š2è§£é‡Šï¼š1 (0 0 0 1)4 (0 1 0 0) â†‘ â†‘ä¸Šé¢çš„ç®­å¤´æŒ‡å‡ºäº†å¯¹åº”äºŒè¿›åˆ¶ä½ä¸åŒçš„ä½ç½®ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šx = 3, y = 1è¾“å‡ºï¼š1 æç¤ºï¼š 0 &lt;&#x3D; x, y &lt;&#x3D; 2^31 - 1 é¢˜è§£ä¸€è¿™é¢˜çœ‹æç¤ºä¸Šé¢å†™äº†æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥ä¸ç”¨ç®¡è´Ÿæ•°è¡¥ç ã€‚ç›´æ¥çœ‹æ•°å­—çš„äºŒè¿›åˆ¶æ¯”è¾ƒå³å¯ã€‚ å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ï¼Œè‚¯å®šæ˜¯å“ªç§ä½è¿ç®—èƒ½å¤Ÿgetåˆ°äºŒè¿›åˆ¶æ•°å­—ä¸åŒã€‚é‚£ä¸å°±æ˜¯å¼‚æˆ–å’ŒåŒæˆ–ä¹ˆï¼Œä¸€ä¸ªæ˜¯ä¸åŒä¸º1ç›¸åŒä¸º0ï¼Œä¸€ä¸ªç›¸åã€‚ 10101 ^ 0010 = 0111 æˆ‘ä»¬ä½¿ç”¨å¼‚æˆ–è¿ç®—ï¼Œæœ‰å‡ ä¸ªä¸åŒï¼Œå¾—åˆ°çš„ç»“æœå°±æœ‰å‡ ä¸ª1. é‚£å²‚ä¸æ˜¯ä¸Šä¸€é¢˜ã€‚ç›´æ¥æè¿‡æ¥ï¼š 123456789// æ±‚ä½1çš„ä¸ªæ•°public int hammingWeight(int n) &#123; int num = 0; while(n != 0)&#123; n = n &amp; (n-1); num++; &#125; return num;&#125; 123public int hammingDistance(int x, int y) &#123; return hammingWeight(x ^ y)&#125; è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ä¹Ÿå°±æ˜¯æ±‚ä¸ºä¸€çš„ä¸ªæ•°çš„å¤æ‚åº¦ï¼Œå…¶å®æ˜¯nçš„é•¿åº¦ä¹Ÿå°±æ˜¯æœ€å¤§ä¸è¿‡31æ˜¯ä¸€ä¸ªå¸¸æ•°æ‰€ä»¥æ˜¯O(1),ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯O(1) æ€»ç»“è¿˜æ²¡æ€è€ƒå°±å·²ç»å†™å®Œäº†æ„Ÿè§‰æ°´äº†ä¸€ç¯‡æ–‡ç« ï¼Œçœ‹äº†å®˜æ–¹è§£é¢˜å’‹ä¸€çœ‹è¿˜æœ‰å¤šè§£ï¼Œå®é™…ä¸Šå…¨éƒ½æ˜¯â€œä½ä¸€çš„ä¸ªæ•°â€è¿™é¢˜çš„ä¸åŒè§£å†é…ä¸Šå¼‚æˆ–è¿ç®—ã€‚æ‰€ä»¥å…³äºä½ä¸€çš„ä¸ªæ•°è§£çš„ç»†èŠ‚å¯ä»¥çœ‹æˆ‘è¿™ç¯‡ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š2ã€å·¥å‚æ–¹æ³•æ¨¡å¼","slug":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š2ã€å·¥å‚æ–¹æ³•æ¨¡å¼","date":"2021-09-18T01:51:36.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/09/18/è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š2ã€å·¥å‚æ–¹æ³•æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2021/09/18/%E8%BD%BB%E6%9D%BE%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%88%9B%E5%BB%BA%E5%9E%8B%EF%BC%89%EF%BC%9A2%E3%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ æœ¬ç¯‡å†…å®¹åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¹‹å‰è¿˜åŠ äº†ä¸€æ®µå…³äºç®€å•å·¥å‚æ¨¡å¼çš„ä»‹ç»ä»¥åŠç›¸å…³å®ç°ï¼Œå†å¼•å…¥åˆ°å·¥å‚æ–¹æ³•æ¨¡å¼ ç®€å•å·¥å‚åœ¨èŠå·¥å‚æ–¹æ³•æ¨¡å¼ä¹‹å‰ï¼Œå…ˆäº†è§£ç®€å•å·¥å‚æ¨¡å¼ï¼Œå®ƒè™½ç„¶ä¸å±äº23ç§ä¹‹ä¸€ä½†å®ƒæ˜¯å·¥å‚æ¨¡å¼å®¶æ—é‡Œæœ€åŸºç¡€çš„ä¸€ç§ç¼–ç æ¦‚å¿µ ç®€å•å·¥å‚æ¨¡å¼æ˜¯å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œåˆå«åšé™æ€å·¥å‚æ–¹æ³•ï¼ˆStatic Factory Methodï¼‰æ¨¡å¼ï¼Œä½†ä¸å±äº23ç§GOFè®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ¨¡å¼å®¶æ—ä¸­æœ€ç®€å•å®ç”¨çš„æ¨¡å¼ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸åŒå·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç‰¹æ®Šå®ç°ã€‚â€”â€”ã€Šç™¾åº¦ç™¾ç§‘ã€‹ å°±æ˜¯è¯´è®¾è®¡ä¸€ä¸ªå·¥å‚ç±»æ¥ç”Ÿäº§å„ç§ç±»çš„å®ä¾‹ï¼Œæ ¹æ®ä½ é€‰æ‹©æˆ–è€…ä¼ å…¥çš„å‚æ•°å·¥å‚æä¾›ä½ éœ€è¦çš„å®ä¾‹ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æ¥è§£å†³ä¸€ä¸ªç±»å¯¹äºä½¿ç”¨å„ç§å®ä¾‹ä¹‹å‰éœ€è¦ä¾èµ–è¿™äº›å®ä¾‹å¯¹åº”çš„ç±»çš„é—®é¢˜ã€‚ 1234public abstract class Food&#123; //çƒ¹é¥ªæˆ–è€…åŠ çƒ­ public abstract void cooking();&#125; 123456public class Sandwich extends Food&#123; @Override public void cooking()&#123; System.out.print(&quot;åšæ˜æ²»&quot;); &#125;&#125; 123456public class Noodle extends Food&#123; @Override public void cookie()&#123; System.out.print(&quot;ç…®é¢æ¡&quot;); &#125;&#125; 123456public class Dumpling extends Food&#123; @Override public void cooking()&#123; System.out.print(&quot;ç…é¥ºå­&quot;); &#125;&#125; é‚£ä¹ˆå¦‚ä¸Šæœ‰ä¸‰ä¸ªå…·ä½“ç±»ï¼ˆä¸‰æ˜æ²»ã€é¢æ¡ã€é¥ºå­ï¼‰ã€‚è¿™é‡Œç”»ä¸ªå›¾ï¼š åœ¨ä¸ä½¿ç”¨å·¥å‚æ¨¡å¼çš„æƒ…å†µä¸‹æˆ‘ä»¬è¦ä½¿ç”¨è¿™äº›å…·ä½“ç±»çš„å®ä¾‹éœ€è¦å…ˆåˆ›å»ºå®ä¾‹ä¹Ÿå°±æ˜¯newå‡ºæ¥ã€‚ å¦‚ä¸‹ä¼ªä»£ç  1234567891011121314public class Me &#123; public void eat() &#123; Food food = null; if(&quot;æˆ‘æƒ³åƒé¢&quot;)&#123; food = new Noodle(); &#125;else if(&quot;æˆ‘æƒ³åƒä¸‰æ˜æ²»&quot;)&#123; food = new Sandwich(); &#125;else(&quot;ä¸çŸ¥é“åƒå•¥&quot;) &#123; food = new Dumpling(); &#125; food.cooking(); System.out.println(&quot;æˆ‘å¼€åƒå•¦&quot;+food); &#125;&#125; å¦‚ä¸Šå› ä¸ºæˆ‘ä¸å¯èƒ½åªåƒä¸€ç§é£Ÿç‰©ï¼Œå¯¼è‡´ç±»é‡Œéœ€è¦ç»‘å®šå¾ˆå¤šå…·ä½“é£Ÿç‰©çš„ç±»åœ¨ä»£ç å½“ä¸­ã€‚ å¹¶ä¸”é£Ÿç‰©çš„å®¢æˆ·å¹¶éåªæœ‰æˆ‘ï¼ˆMe.classï¼‰ï¼Œè¿˜æœ‰ä½ ã€å¥¹ã€ä»–ç”šè‡³é¤é¦†ã€‚æˆ‘ä»¬è™½ç„¶ç”¨Foodè¿›è¡Œæ¥æ”¶ä½†newå…³é”®å­—åé¢ä»æ˜¯å…·ä½“çš„ç±»ã€‚ é‚£ä¹ˆå„ä¸ªå®¢æˆ·ç±»é‡Œç»‘å®šç€å„ç§å„æ ·çš„å…·ä½“ç±»ã€‚ä¸€æ—¦è¿™ä¸€ç³»åˆ—å…·ä½“çš„ç±»éœ€è¦æ”¹å˜ã€‚é‚£ä¹ˆå®¢æˆ·ä»£ç éƒ½éœ€è¦ä¿®æ”¹ã€‚ ä¸ºäº†ä¸æƒ§æ€•æ”¹å˜ï¼ŒæŠŠåˆ›å»ºå®ä¾‹çš„éƒ¨åˆ†ä¹Ÿå°±æ˜¯å†™äº†å…·ä½“ç±»çš„éƒ¨åˆ†ä»£ç æŠ½å–åˆ°å·¥å‚ï¼Œç”±å·¥å‚è¿›è¡Œæä¾›ã€‚è¿™æ ·å·¦è¾¹æ˜¯æŠ½è±¡ç±»æˆ–è€…æ¥å£æ¥æ”¶ï¼Œå³è¾¹æ˜¯ç»Ÿä¸€çš„å·¥å‚ä¾›ç»™å„ç§å…·ä½“ç±»çš„å®ä¾‹ã€‚ 12345678910class FoodFactory&#123; public Food createFood(String foodName)&#123; if(&quot;ä¸‰æ˜æ²»&quot;.equals(foodName))&#123; return new Sandwich(); &#125;else if(&quot;é¢æ¡&quot;.equals(foodName))&#123; return new Noodle(); &#125;else if ...... &#125;&#125; 1234567891011public class Me &#123; FoodFactory factory = new FoodFactory(); public void eat() &#123; // æ‹¿åˆ°é£Ÿç‰© Food food = factory.createFood(&quot;æˆ‘æƒ³åƒxxx&quot;); // åŠ çƒ­æˆ–æŒ‰ç…§æ ‡å‡†çƒ¹é¥ª food.cooking(); // åƒ System.out.println(&quot;æˆ‘å¼€åƒå•¦&quot;+food); &#125;&#125; å®é™…ä¸Šè¿™ä¸ªå·¥å‚å¯¹è±¡ä¹Ÿåº”è¯¥æ˜¯è¦åŠ¨æ€çš„èµ‹äºˆåˆ°Meé‡Œé¢ï¼Œä¸Šé¢æ˜¯ç®€å•åˆ›å»ºä¸€ä¸ªã€‚æ€»è€Œè¨€ä¹‹å˜æˆå¦‚ä¸‹çš„å…³ç³»ï¼š å®¢æˆ·ç±»ä¹‹å‰ä¸ºäº†ä½¿ç”¨å„ç§ç±»çš„å®ä¾‹ï¼Œå¯¼è‡´å†™æ­»äº†å¾ˆå¤šå…·ä½“ç±»åœ¨ä»£ç å½“ä¸­ã€‚è€Œé€šè¿‡è¿™æ ·çš„å·¥å‚ï¼Œå®¢æˆ·ç±»åŒæ ·å¯ä»¥è·å–å„ç§ç±»å‹çš„å®ä¾‹ä½†ä»£ç é‡Œå´åªæœ‰FoodFactoryä¸€ä¸ªå…·ä½“ç±»äº† å·¥å‚æ–¹æ³•æ¨¡å¼é‚£ä¹ˆåˆ°è¿™é‡Œï¼Œå¯ä»¥å‘ç°ç®€å•å·¥å‚ç¡®å®å®Œæˆäº†å®ä¾‹åˆ›å»ºä¸ä½¿ç”¨ä¹‹é—´çš„è§£è€¦åˆï¼Œä½†å®ƒå¯¹äºå·¥å‚ç±»æœ¬èº«æ˜¯ä¸æ»¡è¶³å¯¹ä¿®æ”¹å…³é—­çš„åŸåˆ™ï¼Œå¯èƒ½æˆ‘è¦åƒé¢ä¸€ä¼šå„¿åƒæ¸…æ·¡çš„ä¸€ä¼šå„¿åƒéº»è¾£çš„ã€‚å› æ­¤ä¸€ä¸ªç±»å‹çš„ä¸œè¥¿æ˜¯æœ‰å¤šä¸ªå…·ä½“çš„ç±»ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªç±»å‹çš„å®ä¾‹è®©å·¥å‚ç»™æˆ‘ä»¬ï¼Œå·¥å‚ç»™äº†è¿™ä¸ªç±»å‹çš„å…¶ä¸­ä¹‹ä¸€çš„å…·ä½“ç±»çš„å®ä¾‹ï¼Œä¹‹åæœ‰å¯èƒ½éœ€è¦æ¢ã€‚ å–œæ¬¢åƒè¾£å»æ‰¾è¾£çš„èœé¦†ï¼Œå–œæ¬¢åƒæ¸…æ·¡æ‰¾æ¸…æ·¡çš„èœé¦†å‘—ï¼ å¦‚æ­¤è¯´æ¥ç¡®å®èœé¦†å°±ä¸€ä¸ªå’‹è¡Œå‘¢ï¼Ÿæ¯”å¦‚æœ‰ä¸¤ç§èœé¦†ï¼ˆå·¥å‚ï¼‰ï¼Œæˆ‘åƒè¾£å°±æ‰¾HotFoodFactoryåƒæ¸…æ·¡ç‚¹å°±æ‰¾MildFoodFactory 123456789public abstract class FoodFactory&#123; public Food cooking(String foodName)&#123; Food food = createFood(foodName); food.cooking(); .... return food; &#125; public abstract Food createFood(String foodName);&#125; 1234567891011public class HotFoodFactory extends FoodFactory&#123; @Override public Food createFood(String foodName)&#123; if(&quot;é¥ºå­&quot;.equals(foodName))&#123; return new HotDumpling(); &#125;else if(&quot;é¢æ¡&quot;.equals(foodName))&#123; return new HotNoodle(); &#125;else if ...... &#125;&#125; 1234567891011public class MildFoodFactory extends FoodFactory&#123; @Override public Food createFood(String foodName)&#123; if(&quot;é¥ºå­&quot;.equals(foodName))&#123; return new MildDumpling(); &#125;else if(&quot;é¢æ¡&quot;.equals(foodName))&#123; return new MildNoodle(); &#125;else if ...... &#125;&#125; æœ€ç»ˆéœ€è¦çš„å…·ä½“ç±»çš„å®ä¾‹æ‰¾å¯¹åº”çš„å·¥å‚è¿›è¡Œåˆ›å»º 123456789public class Me &#123; FoodFactory factory = new HotFoodFactory(); public void eat() &#123; // è·å–é£Ÿç‰© Food hotNoodle = factory.cooking(&quot;é¢æ¡&quot;); // åƒ System.out.println(&quot;æˆ‘å¼€åƒå•¦&quot;+hotNoodle); &#125;&#125; 123456789public class You &#123; FoodFactory å…°å·æ‹‰é¢é¦† = new å…°å·æ‹‰é¢(); public void eat() &#123; // è·å–é£Ÿç‰© Food å…°å·æ‹‰é¢ = å…°å·æ‹‰é¢é¦†.cooking(&quot;é¢æ¡&quot;); // åƒ System.out.println(&quot;æˆ‘å¼€åƒå•¦&quot;+å…°å·æ‹‰é¢); &#125;&#125; é‚£ä¹ˆç°åœ¨å®Œæˆä¸€ä¸ªè½¬å˜ï¼Œæ¯”èµ·ä¹‹å‰çš„ç®€å•å·¥å‚æ¨¡å¼æ‰€æœ‰çš„å…·ä½“ç±»éƒ½åœ¨ä¸€ä¸ªå·¥å‚é‡Œé¢è¿›è¡Œåˆ›å»ºï¼Œè´£ä»»è¿‡å¤§ä¸”ä¸å¥½æ‰©å±•ã€‚é‚£ä¹ˆå¯¹äºç°åœ¨çš„å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚å¯ä»¥åˆ†ä¸åŒçš„å·¥å‚åˆ›å»ºä¸åŒç±»å‹çš„å®ä¾‹ã€‚ å½“ä½ æ‰€æœ‰é¢é¦†çš„é¢éƒ½åƒåŒäº†æƒ³åƒæ–°å£å‘³çš„é¢ï¼Œå¯ä»¥ç”±æ–°å¼€çš„é¢é¦†æä¾›æ–°çš„é¢ç±»ï¼Œè€Œä¸è‡³äºå°†ä¹‹å‰çš„æŸå®¶é¢é¦†çš„äº§å“è¿›è¡Œæ¨ç¿»é‡æ–°åšäº§å“æ¯•ç«Ÿè¿™å®¶é¢é¦†å¯èƒ½ä¹Ÿè¢«å…¶ä»–äººå–œæ¬¢ã€‚é‚£ä¹ˆè¿™æ ·å³åšåˆ°äº†å¯¹ä¿®æ”¹å…³é—­å¯¹æ‰©å±•å¼€æ”¾ã€‚ æ€è€ƒ ç®€å•å·¥å‚çš„å†™æ³•ï¼Œä¸ºå•¥æœ‰çš„ä¼šç»™åˆ›å»ºæ–¹æ³•åŠ ä¸Šstatic? ä¸€èˆ¬ç®€å•å·¥å‚åŸºæœ¬ä¸Šæ¶‰åŠçš„ç±»å‹ä¸ä¼šå¤ªå¤šï¼Œä¹Ÿä¸å¤§ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½¿ç”¨staticä¿®é¥°å°±å¯ä»¥ç›´æ¥ç±»è°ƒç”¨åˆ›å»ºæ–¹æ³•äº†ã€‚ä½†å¦‚æœè€ƒè™‘åˆ°è¯¥ç±»ä¹‹åè¦è¢«ç»§æ‰¿å¯èƒ½é‡å†™åˆ›å»ºæ–¹æ³•é‚£å°±ä¸èƒ½ç”¨é™æ€äº† ç®€å•å·¥å‚ç”¨åå°„ä¸å°±å¯ä»¥æ»¡è¶³å¯¹ä¿®æ”¹å…³é—­äº†ä¹ˆï¼Ÿ è¿™æ ·çš„å®ç°æ²¡æœ‰å¤ªå¤šæ„ä¹‰ã€‚å…ˆæŠŠè¿™ç§å®ç°ä»£ç åˆ—å‡ºæ¥çœ‹ä¸€çœ‹ï¼š 12345public class Factory&#123; public static Food createFood(String className)&#123; return Class.forName(className).newInstance(); &#125;&#125; 123456public class Me&#123; public void eat()&#123; Food food1 = Factory.createFood(&quot;xx.xx.xx.Noodle&quot;); Food food2 = Factory.createFood(&quot;xx.xx.xx.Dumpling&quot;); &#125;&#125; å’‹ä¸€çœ‹å¥½åƒæ²¡é—®é¢˜ï¼Œç¡®å®è§£å†³äº†ä¸€å †åˆ¤æ–­çš„é—®é¢˜ï¼Œç®€å•å·¥å‚çš„ä»£ç ä¸ç”¨åƒä¹‹å‰ä¸€æ ·åŠ ä¸€ä¸ªå®ä¾‹å°±åŠ ä¸€ä¸ªåˆ¤æ–­ã€‚ 1new Noodle(); ==&gt; &quot;xx.xx.xx.Noodle&quot; ä½†æƒ³æƒ³å·¥å‚æ¨¡å¼çš„è®¾è®¡åˆ°åº•æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿä¸å°±æ˜¯ä¸ºäº†åˆ›å»ºä¸ä½¿ç”¨è§£è€¦åˆä¹ˆã€‚ä¸ºäº†åœ¨å®¢æˆ·ä»£ç é‡Œä½¿ç”¨çš„æ˜¯æŠ½è±¡æ¥æ¢å–å…·ä½“å®ä¾‹ï¼Œå…·ä½“å®ä¾‹å˜åŠ¨æ˜¯å’Œå·¥å‚æœ‰å…³ã€‚è¿™æ ·å†™åˆæ˜¯åœ¨å®¢æˆ·ä»£ç é‡Œå…·ä½“åŒ–äº†ã€‚ä¸€å˜åŠ¨éœ€è¦å˜åŠ¨çš„æ˜¯å…¨ä½“å®¢æˆ·ä»£ç ã€‚ è¿™æ ·å†™å…¨é™å®šåä¸ç›´æ¥newéƒ½æ˜¯å†™åˆ°äº†å¯ä»¥è¢«å®ä¾‹åŒ–çš„å…·ä½“ç±»ï¼Œä¸åŒçš„æ˜¯å­—ç¬¦ä¸²æˆ‘ä»¬å¯ä»¥ä»é…ç½®é‡Œå»è¯»å–é€šè¿‡è¿™æ ·çš„æ–¹å¼è§£è€¦ã€‚ 1åŒ…å­=xx.xx.xx.ç‰›è‚‰åŒ… 1Food food = Factory.createFood(getProperties(&quot;åŒ…å­&quot;)); é€šè¿‡é…ç½®å®Œæˆå®¢æˆ·ä»£ç å†™æŠ½è±¡ï¼Œæœ€ç»ˆè·å¾—å…·ä½“çš„å®ä¾‹ã€‚å½“å…·ä½“ç±»å‘ç”Ÿå˜æ›´åªéœ€è¦æ”¹é…ç½®å½“ä¸­å¼•ç”¨çš„å…·ä½“ç±»å³å¯ã€‚ ä½†è¿™ç§è§£è€¦ä¸æ˜¯å·¥å‚æ¨¡å¼å®Œæˆçš„ã€‚æŠŠå…·ä½“ä¸¢ç»™äº†å®¢æˆ·ä»£ç ã€‚ å®¢æˆ·ä»£ç ç”¨é…ç½®æˆ–è€…ç”¨å…¶ä»–å·¥å‚ç­‰å…¶ä»–æ–¹å¼æ¥è¿›è¡Œè§£è€¦äº†ï¼Œå†ç»™è¿™ä¸ªå·¥å‚ï¼Ÿã€‚ é‚£è¿™ä¸ªå·¥å‚æ˜¯å¹²å•¥çš„ï¼Ÿ å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ¯ä¸ªå…·ä½“å·¥å‚å°±ç­‰äºä¸€ä¸ªç®€å•å·¥å‚ä¹ˆï¼Ÿ å•ä¸ªæ¥çœ‹å®ç°æ˜¯å·®ä¸å¤šçš„ï¼Œä½†å¯¹äºå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­çš„å„ä¸ªå…·ä½“å·¥å‚ä»–ä»¬ä¸æ˜¯ç‹¬ç«‹çš„ã€‚ä»–ä»¬æ˜¯å…±åŒå®ç°äº†ä¸€ä¸ªæŠ½è±¡å·¥å‚ï¼Œå¯¹è¿™ä¸ªå·¥å‚çš„æŠ½è±¡åˆ›å»ºæ–¹æ³•è¿›è¡Œäº†å„è‡ªä¸ä¸€æ ·çš„å®ç°ã€‚ æ€»ç»“ å·¥å‚æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªã€‚å·¥å‚æ–¹æ³•è®©ç±»æŠŠå®ä¾‹åŒ–æ¨è¿Ÿåˆ°äº†å­ç±»ã€‚ ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå·¥å‚ï¼ˆèœé¦†ï¼‰æ˜¯æŠ½è±¡çš„ã€‚çœŸæ­£åˆ›å»ºå…·ä½“èœå“å®ä¾‹çš„æ˜¯ä»–çš„æŠ½è±¡æ–¹æ³•ã€‚è¿™ä¸ªæŠ½è±¡æ–¹æ³•åˆ†å‘ä¸‹å»ç»™å„ä¸ªå­ç±»è¿›è¡Œå®ç°ã€‚ å·¥å‚ç±»ä½œä¸ºä¸­é—´äººï¼Œå®Œæˆäº†å®¢æˆ·ç±»ä¸å¾ˆå¤šä½¿ç”¨çš„å®ä¾‹å¯¹åº”çš„ç±»è§£è€¦äº†ã€‚å®¢æˆ·ç±»åªå¯¹å·¥å‚æœ‰ä¾èµ–å…³ç³»æˆ–è€…è€¦åˆå…³ç³»ã€‚å¹¶ä¸”é€šè¿‡æ¢å…·ä½“å·¥å‚æ¥è§£å†³æŸäº›ä½¿ç”¨å®ä¾‹å˜åŠ¨çš„é—®é¢˜ã€‚å…¶å®æ˜¯æ˜¯å°†å¾ˆå¤šçš„è€¦åˆæŠ½å–äº†ï¼Œå˜æˆäº†å”¯ä¸€çš„è€¦åˆã€‚é‚£ä¹ˆè¿™ä¸ªè€¦åˆå°±å¯ä»¥è®©å¯åŠ¨å™¨æ ¹æ®é…ç½®æˆ–è€…æ•°æ®åº“æ¥åŠ¨æ€è·å–è§£å†³ã€‚ å®¢æˆ·ç±»ï¼š 12345678910public class Me &#123; FoodFactory factory; public void setFactory(FoodFactory factory)&#123; this.factory = factory; &#125; public void eat() &#123; Food food1 = factory.cooking(&quot;é¢æ¡&quot;); Food food2 = factory.cooking(&quot;åŒ…å­&quot;); &#125;&#125; é…ç½®ï¼š 1æ—©é¤åº—=&quot;ç‰›è‚‰é¦†&quot; 123me.setFactory(get(&quot;æ—©é¤åº—&quot;));food1 = @&quot;ç‰›è‚‰é¢&quot;;food2 = @&quot;ç‰›è‚‰åŒ…å­&quot;; æ›´æ”¹é…ç½®ï¼š 1æ—©é¤åº—=&quot;ç´ é£Ÿé¦†&quot; 123me.setFactory(get(&quot;æ—©é¤åº—&quot;));food1 = @&quot;æ¸…æ±¤é¢&quot;;food2 = @&quot;ç´ åŒ…å­&quot;; å…¶ä¼˜ç¼ºç‚¹åŸºæœ¬ä¸Šæ˜¯ç›¸è¾ƒäºç®€å•å·¥å‚è€Œè¨€ï¼Œå½“å®¢æˆ·ç±»ä½¿ç”¨äº§å“å®ä¾‹éœ€è¦æ›´æ”¹æ—¶ï¼Œå®¢æˆ·ç±»é€šè¿‡å·¥å‚æ¥è·å–å› æ­¤å…¶ä»£ç ä¸å˜ã€‚å˜å¾—æ˜¯å·¥å‚åˆ›å»ºå®ä¾‹ä½¿ç”¨çš„å…·ä½“ç±»ã€‚ç®€å•å·¥å‚æ¨¡å¼å°±æ˜¯åœ¨å·¥å‚ä»£ç é‡Œæ”¹å˜ï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼å°†å·¥å‚æŠ½è±¡å¹¶æ–°å»ºå¦ä¸€ä¸ªå·¥å‚ï¼Œè®©å®¢æˆ·ä»£ç å»æ¢å·¥å‚ã€‚å®ƒçš„ç¼ºç‚¹ä¹Ÿæ˜¯å› ä¸ºå®ƒçš„ä¼˜ç‚¹ï¼Œå½“äº§å“çš„ç±»å‹ç»“æ„è¶Šæ¥è¶Šå¤æ‚ï¼Œå¤§ç±»å‹ä¸å…·ä½“ç±»å‹éƒ½è¶Šæ¥è¶Šå¤šã€‚å…·ä½“å·¥å‚ç±»å› æ­¤ä¹Ÿè¶Šæ¥æ„ˆå¤šã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å…¶ä»–ï¼š191.ä½1çš„ä¸ªæ•°","slug":"ä½1çš„ä¸ªæ•°","date":"2021-09-04T03:21:36.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/09/04/ä½1çš„ä¸ªæ•°/","link":"","permalink":"http://yournotes.cn/2021/09/04/%E4%BD%8D1%E7%9A%84%E4%B8%AA%E6%95%B0/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/number-of-1-bits/ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º â€˜1â€™ çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸ºæ±‰æ˜é‡é‡ï¼‰ã€‚ æç¤ºï¼š è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚ åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ ç¤ºä¾‹ 3 ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼š00000000000000000000000000001011è¾“å‡ºï¼š3è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000000001011 ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º &#x27;1&#x27;ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼š00000000000000000000000010000000è¾“å‡ºï¼š1è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000010000000 ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º &#x27;1&#x27;ã€‚ ç¤ºä¾‹ 3ï¼š 123è¾“å…¥ï¼š11111111111111111111111111111101è¾“å‡ºï¼š31è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 11111111111111111111111111111101 ä¸­ï¼Œå…±æœ‰ 31 ä½ä¸º &#x27;1&#x27;ã€‚ æç¤ºï¼š è¾“å…¥å¿…é¡»æ˜¯é•¿åº¦ä¸º 32 çš„ äºŒè¿›åˆ¶ä¸² ã€‚ è¿›é˜¶ï¼š å¦‚æœå¤šæ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ é¢˜è§£ä¸€ï¼šè¾—è½¬ç›¸é™¤é¦–å…ˆç†æ¸…ä¸»é€»è¾‘ï¼Œåˆ¤æ–­ä¸€ç»„ä¸ªå…¶ä¸­æœ‰å¤šå°‘ä¸ª1ï¼Œå¯¹äºŒè¿›åˆ¶æ¥è¯´æ¯ä¸ªä½åªæœ‰0æˆ–è€…1ï¼Œå¯¹æˆ‘ä»¬ç†Ÿæ‚‰çš„åè¿›åˆ¶æ¥è¯´æœ‰0ï¼Œ1ï¼Œ2 ~ï¼Œ9ã€‚å¦‚æœæ˜¯åè¿›åˆ¶æ€ä¹ˆåˆ¤æ–­è¿™ä¸ªä½æ˜¯é0å‘¢ï¼Œç«‹é©¬å°±çŸ¥é“æ˜¯é™¤ä»¥10 12345678110 (åè¿›åˆ¶)å…ˆåˆ¤æ–­ä¸ªä½æ˜¯0è¿˜æ˜¯é0110é™¤ä»¥10 å¯æ•´é™¤è¯´æ˜ä¸ªä½æ˜¯0ï¼Œç•™ä¸‹11è¿›ä¸€æ­¥åˆ¤æ–­1111é™¤ä»¥10 ä¸èƒ½æ•´é™¤è¯´æ˜é0çš„ä¸ªæ•°æ•°åŠ ä¸€ ç•™ä¸‹1... ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥å»åˆ¤æ–­æ¯ä¸ªä½æ˜¯å¦æ˜¯0å³å¯ï¼Œå¯¹äºŒè¿›åˆ¶æ¥è¯´é0ä¹Ÿå°±æ˜¯1ï¼Œé‚£ä¹ˆ1çš„è®¡æ•°åŠ ä¸€ã€‚ 123456789101112public int hammingWeight(int n) &#123; // è®¡æ•°1çš„ä¸ªæ•° int num = 0; while(n ï¼= 0)&#123; // å–ä½™é0åˆ™ä½™1ï¼Œå½“å‰ä½æ˜¯1 if(n%2 != 0) num++; // è¿­ä»£n,ç›´åˆ°næœ€åä¸€ä¸ªé0åœ¨ä¸ªä½åˆ™å‡ºå¾ªç¯ n = n/2; &#125; //è®°ä¸‹æœ€åä¸€ä½é0æ•° return ++num;&#125; é‚£ä¹ˆè¿™é‡Œæœ‰ä¸ªé—®é¢˜å°±æ˜¯å¯¹äºè´Ÿæ•°æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºè´Ÿæ•°çš„äºŒè¿›åˆ¶ä»¥è¡¥ç å‘ˆç°ï¼Œåƒä¸Šè¿°æµ‹è¯•ç”¨ä¾‹æ˜¯-3ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„ä¸Šè¿°é€»è¾‘åº”è¯¥æ˜¯ä¸¤ä¸ªä¸€å’Œæ­£3ä¸€æ ·ï¼Œå°±ç®—åŠ ä¸Šæœ€é«˜ä½ç¬¦å·ä½çš„è´Ÿå·1ä¹Ÿåªèƒ½æ˜¯ä¸‰ä¸ªä¸€ï¼Œä½†å®é™…ä¸Šè´Ÿæ•°ä»¥è¡¥ç å‘ˆç°çš„å°±åƒä¸Šè¿°ç»“æœå®é™…ä¸Šæ˜¯31ä¸ªä¸€ã€‚ å› æ­¤ä¸Šè¿°è§£åªæ˜¯åœ¨æ•°å­—å±‚é¢çš„äºŒè¿›åˆ¶æ˜¯æ²¡é—®é¢˜çš„ï¼Œåœ¨ä»£ç é‡Œé¢å› ä¸ºä¸€äº›ç¼–è¯‘çš„é—®é¢˜å°±å¯¹è´Ÿæ•°å°±ä¸è¡Œäº† é¢˜è§£äºŒï¼šä½è¿ç®—æ—¢ç„¶ä¸Šè¿°è§£æ˜¯è¿™æ ·çš„é—®é¢˜ï¼Œé‚£æˆ‘ä»¬å°±ä¸å»åœ¨æ•°å­—å±‚é¢å¼„ï¼Œå°±æŒ‰ç…§å®ƒçš„è§„åˆ™å»æ•°ä¸€çš„ä¸ªæ•°ï¼Œä¹Ÿä¸ç”¨è½¬æ¢ä»€ä¹ˆçš„ã€‚å…¶å®æ˜¯å’Œè§£æ³•ä¸€å·®ä¸å¤šçš„ã€‚å› ä¸ºæŠŠè§£æ³•ä¸€ç¿»è¯‘ä¸€ä¸‹ä¼šå˜æˆå¦‚ä¸‹ï¼š 12345678public int hammingWeight(int n) &#123; int num = 0; while(n = 0)&#123; if((n&amp;1) != 0) num++; n = n&gt;&gt;1; &#125; return ++num;&#125; ç¿»è¯‘å°±æ˜¯æŠŠé™¤è¿ç®—æ¢æˆä½ç§»è¿ç®—ï¼Œé™¤ä»¥ä¸€ä¸ªè¿›åˆ¶ä½å°±ç­‰äºå‘å³ä½ç§»ä¸€æ¬¡ï¼Œå¯¹ä¸ªä½å–ä½™å°±ç­‰äºä¸1è¿›è¡Œä¸è¿ç®—ã€‚è¿™æ ·é€»è¾‘ä¸Šè™½ç„¶å’Œä¸Šé¢ä¸€æ ·ä½†æ˜¯å¯¹äºè´Ÿæ•°å°±ä¸ä¸€æ ·äº† åœ¨ä»£ç ä¸­å¯¹äºæ­£æ•°æ¥è¯´é™¤ä»¥2å’Œå‘å³ä½ç§»ä¸€ä½æ˜¯ä¸€æ ·çš„ï¼Œè´Ÿæ•°å°±ä¸ä¸€æ ·äº†å› ä¸ºæ˜¯ä¸€ä¸ªè¡¥ç ä¸²ï¼Œä½ ä½ç§»å®ƒå°±æ˜¯ç”¨è¿™ä¸ªä¸²å»ä½ç§»æ•°çš„å°±æ˜¯è¿™ä¸ªä¸²ï¼Œä½†ä½ é™¤ä»¥2å¾—åˆ°çš„ç»“æœæ˜¯å’Œå®ƒçš„ç»å¯¹å€¼é™¤2æ˜¯ä¸€æ ·çš„ç„¶ååŠ ä¸ªè´Ÿå·ã€‚å¦‚ä¸‹ï¼š 123456783ï¼ˆ8ä½ï¼‰0000 0011-31111 1101æŒ‰é™¤ä»¥2æ¥ï¼Œ-3çš„ç»“æœä¹Ÿå°±æ˜¯ä¸¤ä¸ªä¸€æ‰€ä»¥å°±ç”¨ä½è¿ç®—ï¼Œå°±ä¸ç”¨ç®¡è½¬æ¢çš„é—®é¢˜äº† ä½†ä¸Šé¢çš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œä¸Šé¢çš„å¾ªç¯æ˜¯ä¸ºäº†å¾ªç¯åˆ°æœ€é«˜ä½çš„é0æ•°ï¼Œéå†å®Œæ¯•ï¼Œè¿™æ ·ä¸ç”¨éå†æ•´ä¸ª32ä½ å¯¹äºè´Ÿæ•°æ¥è¯´å°±æœ‰é—®é¢˜ï¼Œè´Ÿæ•°ä½ç§»æ°¸è¿œæ²¡æœ‰å°½å¤´ï¼Œæ‰€ä»¥å¾—æ”¹æˆforå¾ªç¯å°±å¾ªç¯è¿™32ä½å³å¯ 12345678public int hammingWeight(int n) &#123; int num = 0; for(int i = 0; i &lt; 32; i++)&#123; if((n&amp;1) != 0) num++; n = n &gt;&gt; 1; &#125; return num;&#125; æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦éƒ½æ˜¯Oï¼ˆ1ï¼‰ é¢˜è§£ä¸‰ï¼šä½è¿ç®—ä¼˜åŒ–å‰é¢é¢˜è§£ä¸€ä¸ç”¨éå†å®Œ32ä¸ºæ¯”å¦‚00010100 åªç”¨éå†åˆ°æœ€é«˜ä½çš„1å³å¯ä¹Ÿå°±æ˜¯éå†5ä¸ªã€‚åˆ°äº†é¢˜è§£äºŒä½è¿ç®—ä¸èƒ½å»åˆ¤æ–­æ˜¯å› ä¸ºè´Ÿæ•°çš„äºŒè¿›åˆ¶ä¸€ç›´å¾€å³ä½ç§»ä¹Ÿæ°¸è¿œä¸ä¼šç­‰äº0ä¼šè¿›å…¥æ— é™å¾ªç¯ã€‚ æ‰€ä»¥åªèƒ½æ‰¾å¦å¤–çš„æ–¹å¼æ€ä¹ˆä¸€æ­¥ä¸€æ­¥çš„è®¡æ•°1çš„å‡ºç°ç„¶ååœ¨æ•°å­—é‡Œé¢å»æ‰æˆ–è€…å˜ä¸º0ï¼Œç›´åˆ°æœ€åä¸€ä¸ª1å¤„ç†å®Œï¼Œæ•´ä¸ªæ•°å°±æ˜¯0äº†å°±æ²¡å¿…è¦ç»§ç»­éå†äº†ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯n &amp; (n-1)ï¼Œå¯ä»¥æ¼”ç¤ºä¸€ä¸‹ï¼š 1234æ•°å­—7ä¹Ÿå°±æ˜¯ 01110111 &amp; 0110 = 01100110 &amp; 0101 = 01000100 &amp; 0011 = 0000 ä¹Ÿå°±æ˜¯æ‰€æ¯æ¬¡éƒ½ä¼šå»æ‰ä¸€ä¸ªä¸€ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥è®¡æ•°ä¸€ä¸‹ã€‚ç›´åˆ°æœ€ç»ˆæ˜¯0äº†ï¼Œä¹Ÿå°±ç»Ÿè®¡å®Œæœ€åä¸€ä¸ª1äº†ã€‚ 12345678public int hammingWeight(int n) &#123; int num = 0; while(n != 0)&#123; n = n &amp; (n-1); num++ &#125; return num;&#125; ç©ºé—´ä¸Šå»äº†ä¸€ç‚¹å¯èƒ½æ˜¯å°‘äº†forå¾ªç¯çš„i æ€»ç»“è¿™ä¸€é¢˜çš„è¯ï¼Œä¸»è¦æ˜¯å¯¹äºè´Ÿæ•°åœ¨Javaé‡Œå®ƒçš„ä¸€ä¸ªè®¡ç®—ç»“æœå’Œå¸¸è§„æ˜¯ä¸ä¸€æ ·çš„ï¼ˆè¿™é‡Œä¸å±•å¼€ï¼‰ï¼Œå› æ­¤å°±ç”¨ä½è¿ç®—ä¹Ÿå°±ä¸å­˜åœ¨è½¬æ¢ã€‚ç¬¬äºŒç‚¹å°±æ˜¯å¯¹äºä¸€ä¸ªintç±»å‹çš„æ•´æ•°å®ƒæ˜¯32ä½ï¼Œé‚£ä¹ˆåˆ¤æ–­32ä½é‡Œæœ‰å¤šå°‘ä¸ª1æ—¶ï¼Œè¦ä¸è¦éå†å®Œ32ä½æ‰èƒ½å‡ºç»“æœï¼Ÿè¿™é‡Œå°±ä¼šæœ‰ä¸¤ä¸ªè¿­ä»£æ–¹å¼ä¸€ä¸ªæ˜¯æ¯æ¬¡ä½ç§»ä¸€ä¸ªä¹Ÿå°±æ˜¯ä¸¢æ‰æœ€å³è¾¹çš„æ•°ç›´åˆ°æ•°å­—ä¸º0äº†åé¢ä¹Ÿå°±ä¸è¦éå†äº†ï¼Œå¦ä¸€ä¸ªæ˜¯æ¯æ¬¡å°†æœ€ä½ä½çš„1å˜ä¸º0ï¼Œåè€…æ˜¯æ›´ä¼˜çš„ã€‚å› ä¸º001011å¯¹äºç¬¬ä¸€ç§è¦éå†4æ¬¡ä¹Ÿå°±æ˜¯æ¯æ¬¡ä¸¢ä¸€ä¸ªç›´åˆ°æœ€ç»ˆæ•°å­—ä¸º0ï¼Œç¬¬äºŒç§æ–¹å¼åªéœ€è¦3æ¬¡n &amp; (n-1)èƒ½ç›´æ¥è·³åˆ°æœ€ä½ä½çš„1å¤„ç†æˆ0ï¼Œä¸­é—´çš„0éƒ½æ˜¯ç›´æ¥è·³è¿‡ã€‚n &amp; (n-1)è¿™ä¸ªè¿ç®—å¯ä»¥ç•™æ„ä¸€ä¸‹ã€‚è¿˜æœ‰ä¸€ç§æœ€å·®çš„è§£æ³•ä¹Ÿå°±æ˜¯è½¬äºŒè¿›åˆ¶ä¸²å†æ•°ä¸ªæ•°è¿™æ ·å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ç›¸å½“ä¸éå†äº†ä¸¤æ¬¡Integer.toBinaryString(n)ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"è½»æ¾ç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼š1.å•ä¾‹æ¨¡å¼","slug":"2åˆ†é’Ÿç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼šå•ä¾‹æ¨¡å¼","date":"2021-09-03T11:08:58.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2021/09/03/2åˆ†é’Ÿç†è§£è®¾è®¡æ¨¡å¼ï¼ˆåˆ›å»ºå‹ï¼‰ï¼šå•ä¾‹æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2021/09/03/2%E5%88%86%E9%92%9F%E7%90%86%E8%A7%A3%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%88%9B%E5%BB%BA%E5%9E%8B%EF%BC%89%EF%BC%9A%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‰è¨€ è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚å®ƒæè¿°äº†åœ¨è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€äº›ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—å¥—è·¯ï¼Œæ˜¯å‰è¾ˆä»¬çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œå…·æœ‰ä¸€å®šçš„æ™®éæ€§ï¼Œå¯ä»¥åå¤ä½¿ç”¨ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€ä»£ç çš„å¯è¯»æ€§å’Œä»£ç çš„å¯é æ€§ã€‚ ç»è¿‡æ±‡æ€»çš„23ç§è®¾è®¡æ¨¡å¼å®ƒæ˜¯æ€»ç»“äº†é¢å‘å¯¹è±¡è®¾è®¡å½“ä¸­æœ€æœ‰ä»·å€¼çš„ç»éªŒã€‚å¯¹ä¹‹å‰æ¥è®²å¯èƒ½æ˜¯å¯¹å…¶ä¸­éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¿˜æ˜¯ç›¸å¯¹æ¥è¯´ç†Ÿæ‚‰çš„ä½†ä»”ç»†ç¢ç£¨è¿˜æ˜¯ä¼šæœ‰äº›ç–‘é—®ï¼Œæ­£å¥½åœ¨ç›®å‰ç›¸å¯¹æ¥è¯´æœ‰æ›´å¤šçš„ä¸šä½™æ—¶é—´ï¼Œå¯ä»¥æ¥ä¸€æ¬¡é‡æ–°å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ è®¾è®¡æ¨¡å¼çš„ä¸€ç¯‡å•ä¾‹æ¨¡å¼ï¼Œå†…å®¹åŒ…å«2ç‚¹ä¸€æ˜¯æ¨¡å¼çš„å®šä¹‰ä¸ç›®çš„ï¼ŒäºŒæ˜¯Javaå…·ä½“å®ç°ä¸ç–‘é—® å®šä¹‰å¯¹äºå•ä¾‹æ¨¡å¼å¤§å®¶åº”è¯¥è¿˜ç®—æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¯èƒ½å¾ˆå¤šæ—¶å€™éœ€è¦æ‰‹å†™å•Šå•¥çš„ã€‚ å…ˆè¿˜æ˜¯ä½“ä¼šä¸‹æœ€åˆçš„å®šä¹‰ å•ä¾‹æ¨¡å¼æœ€åˆçš„å®šä¹‰å‡ºç°äºã€Šè®¾è®¡æ¨¡å¼ã€‹ï¼ˆè‰¾è¿ªç”Ÿç»´æ–¯ç†, 1994ï¼‰ï¼šâ€œä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚â€ æˆ‘ä»¬å¯ä»¥ä»ä¸­å¾—åˆ°ä¸¤ä¸ªä¿¡æ¯ï¼š ä¿è¯ä¸€ä¸ªç±»ä»…ä»…åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ ä¹Ÿå°±æ˜¯ä¸èƒ½è¢«å…¶ä»–å¤–ç•Œå®ä¾‹åŒ–ã€‚é‚£ä¹ˆæ„é€ æ–¹æ³•å¾—ç§æœ‰private,ä¸”å¯¹è±¡æ­¤å®ä¾‹å±äºç±»ä¹Ÿå°±æ˜¯staticæˆå‘˜å­˜åœ¨ å¹¶æä¾›è¿™ä¸ªå®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ æä¾›public staticæ–¹æ³•ç»™å¤–ç•Œè·å–æ­¤æˆå‘˜ é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è®¾è®¡è¿™æ ·çš„å•ä¾‹ç±»å‘¢ï¼Ÿ æ¯”å¦‚ç½‘ç«™ç‚¹ç™»å½•ä¼šæœ‰ä¸€ä¸ªç™»å½•çª—å£ï¼ŒæŠŠè¿™ä¸ªç™»å½•çª—å£å½“æˆä¸€ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆæ¯æ¬¡ç‚¹å‡»ç™»å½•éƒ½è¦åˆ›å»ºè¿™æ ·ä¸€ä¸ªç™»å½•çª—å£å—? ç”¨å®Œä¹‹åå†é”€æ¯æ‰ä¹ˆï¼ŸåŒæ ·è¿˜æœ‰è®¿é—®æ•°æ®åº“ï¼Œéœ€è¦å»ºç«‹è¿æ¥ä½¿ç”¨å®Œæ¯•é”€æ¯è¿æ¥ï¼Œä½†æ¯æ¬¡å°±æ˜¯ä½¿ç”¨çš„è¿™æ ·ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„ä¸œè¥¿ã€‚ å†æ¯”å¦‚å…¨å±€çš„è®¡æ•°å™¨ï¼Œå¦‚æœä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯æ¬¡è·å–çš„æ˜¯ä¸ä¸€æ ·çš„å¯¹è±¡ï¼Œé‚£å°±æ²¡ä½œç”¨äº†ã€‚ ä¸¤ç‚¹ï¼š1.å‡å°‘å¼€é”€ã€2.å…±äº«èµ„æº é¥¿æ±‰å¼ç»¼ä¸Šå®šä¹‰æ‰€è¯´å®ç°å•ä¾‹æ¨¡å¼çš„ç±»æœ‰ä¸€ä¸‹å‡ ç‚¹ï¼š æ„é€ æ–¹æ³•ç§æœ‰ ä½œä¸ºé™æ€æˆå‘˜å­˜åœ¨ æä¾›å…¬å¼€æ–¹æ³•è·å– é‚£ä¹ˆå¾ˆå®¹æ˜“å†™å‡ºä»¥ä¸‹ä»£ç ï¼Œå°±æ˜¯ç†Ÿæ‚‰çš„é¥¿æ±‰çš„å®ç° 1234567public class Single&#123; private static final Single single = new Single(); private Single()&#123;&#125; public static Single getSingle()&#123; return single; &#125;&#125; æ‡’æ±‰å¼å¯¹äºå•ä¾‹çš„é¥¿æ±‰ä¸æ‡’æ±‰å¤§å®¶ä¹Ÿåº”è¯¥éƒ½æ¸…æ¥šï¼Œä¸€ä¸ªæ˜¯è¿™ä¸ªç±»åŠ è½½çš„æ—¶å€™å®ä¾‹å°±åˆ›å»ºäº†ï¼Œå¦ä¸€ä¸ªæ˜¯ç­‰å»è°ƒç”¨getSingle()æ‰å»newï¼Œå°±åƒä¸‹é¢è¿™æ · 12345678910public class Single&#123; private static Single single; private Single()&#123;&#125; public static Single getSingle()&#123; if(single == null)&#123; single = new Single(); &#125; return single; &#125;&#125; å¥½å¤„å°±æ˜¯é¿å…äº†ä¸€å¼€å§‹çš„ç©ºé—´å ç”¨ã€‚é—®é¢˜å°±åœ¨äºåˆ›å»ºå¯¹è±¡éœ€è¦ä¸¤æ­¥ï¼Œä¸€æ­¥æ˜¯åˆ¤æ–­ç¬¬äºŒæ­¥æ˜¯åˆ›å»ºã€‚å› æ­¤å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å¯¼è‡´å¤šæ¬¡åˆ›å»ºè¿èƒŒäº†å•ä¾‹ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥çœ‹çš„åˆ°åœ¨å‰å‡ ä¸ªç»“æœå·²ç»å‡ºç°,æ–°å®ä¾‹çš„æƒ…å†µ.æ‰€ä»¥è¿™ä¸ªè·å–çš„è¿™ä¸ªæ“ä½œæ˜¯å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ã€‚ é‚£è§£å†³ä¹Ÿå¾ˆç®€å•æ¯”å¦‚: 12345678910public class Single&#123; private static Single single; private Single()&#123;&#125; public synchronized static Single getSingle()&#123; if(single == null)&#123; single = new Single(); &#125; return single; &#125;&#125; æˆ– 123456789101112public class Single&#123; private static Single single; private Single()&#123;&#125; public static Single getSingle()&#123; synchronized(Single.class)&#123; if(single == null)&#123; single = new Single(); &#125; &#125; return single; &#125;&#125; ä¹Ÿå°±æ˜¯åŠ ä¸Šsynchronizedä¿è¯ä»£ç å—çš„åŒæ­¥.ä½†å…¶å®ä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡è¢«å¤–ç•Œè·å–æ˜¯éœ€è¦åˆ›å»ºå”¯ä¸€çš„å®ä¾‹çš„,ä¹‹åå°±éƒ½æ˜¯è¿”å›å·²ç»å­˜åœ¨çš„å”¯ä¸€å®ä¾‹,ä¸ºäº†ç¬¬ä¸€æ¬¡çš„å®‰å…¨æ€§é”ä½äº†å…¨éƒ¨åŒ…æ‹¬ä¹‹åæ¯æ¬¡è·å–éƒ½è¦èµ°synchronized.æ˜¯å¦æ˜¯åŒæ­¥èŒƒå›´è¿‡å¤§äº†?æ˜¯ä¸æ˜¯æ²¡æœ‰è¿™ä¸ªå¿…è¦? DCLå®ç°äº†è§£å¤šçº¿ç¨‹çš„éƒ½ä¼šç†Ÿæ‚‰åŒé‡æ£€æµ‹é”(Double Check Lock)çš„å†™æ³•,åœ¨è¿™é‡Œä¸€æ ·DCLçš„å•ä¾‹å®ç° 1234567891011121314public class Single&#123; private static Single single; private Single()&#123;&#125; public static Single getSingle()&#123; if(single == null)&#123; synchronized(Single.class)&#123; if(single == null)&#123; single = new Single(); &#125; &#125; &#125; return single; &#125;&#125; å…¶å®å°±æ˜¯åœ¨synchronizedå¤–é¢å†åˆ¤æ–­ä¸€æ¬¡,è¿™æ ·å°±ä¿è¯å®ä¾‹åˆ›å»ºå®Œä¹‹ååªç”¨èµ°ä¸ªåˆ¤æ–­å°±è¿”å›ä¸ç”¨ä¿è¯åŒæ­¥,è€Œå› ä¸ºé¦–æ¬¡åˆ›å»ºè¿›å»çš„ä¸€æ‰¹çº¿ç¨‹ä¼šåœ¨åé¢ç»è¿‡åŒæ­¥å—ä¸åˆ¤ç©ºæ¥è®©å”¯ä¸€çš„ä¸€ä¸ªçº¿ç¨‹å»åˆ›å»º. äº†è§£è¿‡å•ä¾‹å®ç°çš„ï¼Œéƒ½çŸ¥é“å¯¹äºè¿™ä¸ªå®ä¾‹æˆå‘˜è¿˜éœ€åŠ ä¸Švolatileä¿®é¥°ï¼ŒçŸ¥é“å¯¹äºnewå¯¹è±¡å¹¶ä¸æ˜¯åŸå­çš„ï¼Œè€Œæ˜¯æœ‰å¤§æ¦‚å¦‚ä¸‹çš„ä¸‰æ­¥ï¼š å¼€è¾Ÿç©ºé—´ åˆå§‹åŒ–å¯¹è±¡åˆ°ç©ºé—´ å°†ç©ºé—´åœ°å€è¿›è¡Œå¼•ç”¨ å½“2ä¸3æ­¥éª¤è¿›è¡Œè°ƒæ¢ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸Šçš„å­—èŠ‚ç ï¼Œ21ä¸24çš„åœ°æ–¹ã€‚å½“å®Œæˆå­—æ®µèµ‹å€¼ï¼Œåˆ¤æ–­åˆ™ä¸ä¸ºç©ºï¼Œä½†å¦‚æœ21ä¸24çš„æŒ‡ä»¤äº¤æ¢äº†é¡ºåºï¼Œé‚£ä¹ˆå­—æ®µä¸ä¸ºç©ºæ—¶å¯¹è±¡å¹¶æ²¡åˆå§‹åŒ–ã€‚ç”±äºåŒé‡æ£€æµ‹é”çš„å®ç°ç¬¬ä¸€ä¸ªåˆ¤æ–­æ˜¯å¼€æ”¾çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥ç»è¿‡åˆ¤æ–­å¦‚æœä¸ä¸ºç©ºç›´æ¥è¿”å›. 1private static volatile Single single; åœ¨åé¢ç–‘é—®ç« èŠ‚ï¼Œå¯ä»¥ä¸ä½¿ç”¨volatileè¾¾åˆ°åŒæ ·çš„ç›®çš„ä¹ˆï¼Ÿ å†…éƒ¨ç±»å®ç°æ‡’æ±‰å¼å®ç°åœ¨ä½¿ç”¨åˆ°å®ä¾‹æˆå‘˜æ—¶æ‰åˆ›å»º,é‚£ä¹ˆé™¤äº†åƒä¸Šé¢ä¸€æ ·è·å–çš„æ—¶å€™è¿›è¡Œåˆ¤ç©ºæ¥è¿›è¡Œå»¶è¿Ÿåˆ›å»º,å…¶å®å¯¹äºJavaæ¥è¯´è¿˜æœ‰å¦ä¸€ç§æ–¹å¼å°±æ˜¯å†…éƒ¨ç±». 123456789public class Single&#123; private Single()&#123;&#125; private static class CreateSingle&#123; private static final Single SINGLE = new Single() &#125; public static Single getSingle()&#123; return CreateSingle.SINGLE; &#125;&#125; è¿™ä¸ªæ˜¯åˆ©ç”¨äº†Javaå†…éƒ¨ç±»çš„ç‰¹æ€§ï¼š å¤–éƒ¨ç±»å¯ä»¥è®¿é—®å†…éƒ¨çš„ç§æœ‰æˆå‘˜ ç±»è¢«åŠ è½½æ—¶ä¸ä¼šåŠ è½½å…¶ä¸­çš„å†…éƒ¨ç±»ï¼Œåªæœ‰å†…éƒ¨ç±»è¢«è®¿é—®ä½¿ç”¨æ—¶æ‰åŠ è½½ é‚£ä¹ˆè¿™æ ·å°±åšåˆ°äº†å»¶è¿ŸåŠ è½½ä¹Ÿå°±æ˜¯æ‡’æ±‰å¼çš„å•ä¾‹ï¼Œå¹¶ä¸”æ²¡æœ‰å¤šæ­¥éª¤æ“ä½œï¼Œæ˜¯è‡ªç„¶çš„çº¿ç¨‹å®‰å…¨. æšä¸¾æ—¢ç„¶ä¸Šé¢å·²ç»æœ‰è¾ƒå¥½çš„å•ä¾‹å®ç°ï¼Œä¸ºå•¥è¿˜è¦è¯´æšä¸¾ï¼Ÿ å®ƒæ˜¯Javaç‰¹æ€§å¤©ç„¶çš„å•ä¾‹æ¨¡å¼ 123public enum EnumSingle &#123; SINGLE;&#125; å¤§å®¶éƒ½çŸ¥é“æšä¸¾ç±»å‹ï¼Œæ˜¯æŠŠå®ä¾‹ç¡®å®šäº†çš„ç±»ã€‚å¦‚æœä½¿ç”¨æšä¸¾ç±»å‹å°±é™åˆ¶äº†å¯¹åº”çš„å€¼ã€‚å› ä¸ºå¯¹äºæšä¸¾çš„å®ä¾‹æ˜¯åœ¨æšä¸¾ç±»é‡Œåˆ—å‡ºæ¥ç¡®å®šå¥½äº†ï¼Œå¹¶ä¸”æ„é€ å™¨ä¹Ÿæ˜¯ç§æœ‰çš„ã€‚ ä¸‹é¢æ˜¯æšä¸¾ç±»åç¼–è¯‘çš„åˆ å‡ç‰ˆï¼ˆå…¶å®å°±æ˜¯å»æ‰äº†ä¸€äº›æ–¹æ³•ï¼Œåªç•™ä¸‹æ„é€ å™¨ä¸ä¸æˆå‘˜å®ä¾‹ï¼‰ 123456public final class EnumSingle extends Enum&#123; public static final EnumSingle SINGLE = new EnumSingle(&quot;SINGLE&quot;, 0); private EnumSingle(String s, int i)&#123; super(s, i); &#125;&#125; ç–‘é—®åœ¨å¼€ç¯‡ä¹‹å‰ï¼Œæ˜¯è§‰å¾—è¿™ä¸œè¥¿æ˜¯å¾ˆç†Ÿæ‚‰çš„ã€‚æœ€ç»ˆæ¢³ç†å®Œäº†æ„Ÿè§‰è¿˜æ˜¯æœ‰å¾ˆå¤šç–‘é—®çš„ï¼Œä¸‹é¢åˆ—å‡ºæ¥ç–‘é—®ç‚¹ä»¥åŠæˆ‘çš„æƒ³æ³•ï¼š ä¸ºä»€ä¹ˆè¯´å•ä¾‹çš„æœ€ä½³å®ç°æ˜¯æ— çŠ¶æ€çš„ï¼Ÿï¼ˆå¾ˆå¤šåœ°æ–¹çœ‹åˆ°è¿™å¥ï¼‰ ä»€ä¹ˆæ˜¯æ— çŠ¶æ€? å°±æ˜¯è¯´ç±»ä¸å…·æœ‰æˆå‘˜å±æ€§ä¿¡æ¯ï¼Œæˆ–è€…è¯´æ²¡æœ‰å¯ä¿®æ”¹çš„æˆå‘˜å±æ€§ã€‚é‚£ä¹ˆæ— çŠ¶æ€çš„å•ä¾‹ä¹Ÿå°±æ˜¯å®Œå…¨çš„å¹¶å‘å®‰å…¨çš„ï¼Œæ²¡æœ‰å¯ä¾›ä¿®æ”¹çš„å†…å®¹ï¼Œè·å–å®ä¾‹åªæ˜¯ä½¿ç”¨å…¶ä¸­çš„æ–¹æ³•ï¼Œè¿™æ ·ä¸€èˆ¬ç”¨æ¥åšå·¥å…·ç±»ã€‚ç¬¬äºŒç§å°±æ˜¯çŠ¶æ€çš„å•ä¾‹ï¼Œå…±äº«èµ„æºã€‚æ¯”å¦‚å…¨å±€è®¡æ•°å™¨ï¼Œé‚£å°±è¦å»ä¿è¯çº¿ç¨‹å®‰å…¨æä¾›å®‰å…¨çš„æ“ä½œæ–¹æ³•ã€‚ æˆ‘ä»¬çŸ¥é“Javaé‡Œé¢æœ‰å‘å°„æœºåˆ¶,è¿™äº›å•ä¾‹å®ç°ä¼šè¢«ç ´åä¹ˆï¼Ÿ å¦‚æœä½¿ç”¨åå°„çš„è¯æ˜¯ç¡®å®å¯ä»¥å»ç ´åï¼Œé€šè¿‡åå°„å¯ä»¥è·å–æ„é€ å™¨æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œæ¯”å¦‚åƒä¸‹é¢ï¼š 12345678910// 1.è·å–æ— å‚æ„é€ å™¨Constructor&lt;Single&gt; constructor = Single.class.getDeclaredConstructor();// 2.å…³é—­ç§æœ‰è®¿é—®constructor.setAccessible(true);// 3.è°ƒç”¨ä¸¤æ¬¡æ„é€ å™¨è·å–å¯¹è±¡Single single1 = constructor.newInstance();Single single2 = constructor.newInstance();// 4.æµ‹è¯•System.out.println(single1);System.out.println(single2); åå°„èƒ½å»éšæ„çš„ä½¿ç”¨å•ä¾‹ç±»çš„æ„é€ å™¨ï¼Œå› æ­¤ç¡®å®å¯ä»¥ç ´åã€‚ä½†æˆ‘ä»¬å¯ä»¥å»ç‚¹å¼€newInstanceæ–¹æ³• å¯ä»¥å¾ˆæƒŠå–œçš„å‘ç°ï¼Œå¦‚æœæ˜¯æšä¸¾ç±»å‹å°±ä¸å…è®¸é€šè¿‡åå°„æ¥æ‰§è¡Œæ„é€ å™¨ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ 1throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;); æšä¸¾è¿™ç§æ–¹å¼å®ƒæ˜¯å±äºé¥¿æ±‰å¼è¿˜æ˜¯æ‡’æ±‰å¼ï¼Ÿ æˆ‘ä»¬å¯ä»¥é€šè¿‡æšä¸¾å®é™…çš„ä¸€ä¸ªclassä»£ç ï¼Œæšä¸¾çš„æˆå‘˜å®é™…éƒ½æ˜¯static finalçš„ã€ä¸€å¼€å§‹å°±åˆ›å»ºçš„ã€‚æ˜¯å±äºé¥¿æ±‰å¼çš„ã€‚ 1public static final EnumSingle SINGLE = new EnumSingle(&quot;SINGLE&quot;, 0); ä½†åœ¨æŸ¥æ‰¾èµ„æ–™æ—¶å‘ç°æœ‰çš„åšå®¢ä¸Šå†™çš„æ˜¯æšä¸¾æ˜¯æ‡’æ±‰ï¼Œç†ç”±æ˜¯ä¸€å¥å®é™…è¿è¡Œæ—¶ä¼šå»¶è¿ŸåŠ è½½ã€‚å¦‚æœæŒ‰ç…§æœ€ç»ˆçš„æ‰§è¡Œçš„classåç¼–è¯‘çš„ä»£ç å®ƒä¸€å®šå°±æ˜¯é¥¿æ±‰ã€‚æŠ›å¼€æ‰§è¡Œä»£ç çœ‹çœ‹å†…å­˜åˆ†ææ˜¯å¦ä¸€è‡´æµ‹è¯•ç»“æœæ²¡é—®é¢˜å’Œé¢„æœŸä¸€æ ·ï¼Œç±»åŠ è½½å°±ä¼šåˆ›å»ºå®ä¾‹ã€‚æšä¸¾æ˜¯é¥¿æ±‰ã€‚ ç»è¿‡åºåˆ—åŒ–ä¹‹åè¿˜æ˜¯åŒä¸€ä¸ªå®ä¾‹ä¹ˆï¼Ÿ å…¶å®æˆ‘ä»¬å¤§æ¦‚éƒ½çŸ¥é“ï¼Œè¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–å®ƒæ˜¯ä¸€ä¸ªæ·±æ‹·è´çš„è¿‡ç¨‹ï¼Œæ˜¯äº§ç”Ÿå¦å¤–ä¸€ä¸ªå±æ€§å†…å®¹éƒ½ç›¸åŒçš„æ–°å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªå•ä¾‹ç±»å®ƒå¯ä»¥è¢«åºåˆ—åŒ–ï¼Œé‚£ä¹ˆç¡®å®å¯ä»¥æ‰“ç ´å•ä¾‹å¾—åˆ°æ–°å¯¹è±¡ã€‚å› æ­¤å¯¹äºä»»ä½•å¯¹è±¡æŒ‰ç…§ä¸‹é¢ç»“æœéƒ½æ˜¯false 123456789// è¿›è¡Œåºåˆ—åŒ–ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(&quot;tempFile&quot;));out.writeObject(Single.getSingle());File file = new File(&quot;tempFile&quot;);// è¿˜åŸObjectInputStream input = new ObjectInputStream(new FileInputStream(file));Object newInstance = input.readObject();//åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡System.out.println(newInstance == Single.getSingle()); ä½†ç»è¿‡æµ‹è¯•å‘ç°æšä¸¾æ˜¯ä¸ä¼—ä¸åŒçš„ Javaè§„èŒƒå­—è§„å®šï¼Œæ¯ä¸ªæšä¸¾ç±»å‹åŠå…¶å®šä¹‰çš„æšä¸¾å˜é‡åœ¨JVMä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤åœ¨æšä¸¾ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸Šï¼ŒJavaåšäº†ç‰¹æ®Šçš„è§„å®šã€‚åœ¨åºåˆ—åŒ–çš„æ—¶å€™Javaä»…ä»…æ˜¯å°†æšä¸¾å¯¹è±¡çš„nameå±æ€§è¾“åˆ°ç»“æœä¸­ï¼Œååºåˆ—åŒ–çš„æ—¶å€™åˆ™æ˜¯é€šè¿‡java.lang.Enumçš„valueOf()æ–¹æ³•æ¥æ ¹æ®åå­—æŸ¥æ‰¾æšä¸¾å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåºåˆ—åŒ–çš„æ—¶å€™åªå°†DATASOURCEè¿™ä¸ªåç§°è¾“å‡ºï¼Œååºåˆ—åŒ–çš„æ—¶å€™å†é€šè¿‡è¿™ä¸ªåç§°ï¼ŒæŸ¥æ‰¾å¯¹åº”çš„æšä¸¾ç±»å‹ï¼Œå› æ­¤ååºåˆ—åŒ–åçš„å®ä¾‹ä¹Ÿä¼šå’Œä¹‹å‰è¢«åºåˆ—åŒ–çš„å¯¹è±¡å®ä¾‹ç›¸åŒ â€”â€” ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ æŠ±ç€ä¸€æ¢ç©¶ç«Ÿçš„æƒ³æ³•çœ‹äº†è·Ÿç€çœ‹äº†readObjectå¦‚ä¸‹å›¾ï¼Œå°±æƒ³ä¸Šé¢æè¿°çš„ä¸€æ ·ï¼Œé€šè¿‡æšä¸¾çš„nameå±æ€§è·å–åˆ°æšä¸¾ç±»é‡Œå­˜åœ¨çš„å®ä¾‹ã€‚ DCLå®ç°å¯ä»¥ä¸ä½¿ç”¨volatileä¹ˆï¼Ÿ ç†è®ºä¸Šæ¥è®²æ˜¯å¯ä»¥çš„ï¼Œæ¯•ç«ŸåŠ è¿™ä¸ªvolatileä¹Ÿæ˜¯å‡ºäºç†è®ºä¸Šï¼Œç›®å‰æ²¡æœ‰æ‰¾åˆ°æµ‹è¯•æ–¹æ³•ã€‚ é‚£ä¹ˆä¸åŠ volatitleæ€ä¹ˆä¿è¯ä¸ä¼šæ‹¿åˆ°ä¸ºåˆå§‹åŒ–å¥½çš„å¯¹è±¡å‘¢ï¼Ÿå¾ˆç®€å•è™½ç„¶å¯¹äºJVMç¡®å®ä¼šå¯èƒ½è¿›è¡ŒæŒ‡ä»¤çš„é¡ºåºè°ƒæ•´æé«˜æ•ˆç‡ï¼Œå‰ææ˜¯è°ƒæ¢é¡ºåºä¸å½±å“ç»“æœæ‰å¯èƒ½è¢«é‡æ’åºã€‚ ä¸ºäº†è®©å…¶ä¸è¢«é‡æ’åºé™¤äº†volatileä¿®é¥°æˆå‘˜ä¹‹å¤–ã€‚æ˜¯ä¸æ˜¯å¯ä»¥è®©åˆ›å»ºå¯¹è±¡ä¹‹åè¢«ä¾èµ–ï¼Œé€šè¿‡ä¾èµ–å…³ç³»è®©JVMä¸å¯¹å…¶è¿›è¡Œé‡æ’åºã€‚å°†æœ€ç»ˆåˆ›å»ºå®Œæ•´çš„å¯¹è±¡å†ç›´æ¥èµ‹å€¼ç»™å•ä¾‹å­—æ®µsingle ä¸‹é¢æ˜¯æˆ‘çš„çŒœæƒ³ï¼Œè®©try-catché™åˆ¶åˆ›å»ºå¯¹è±¡çš„æŒ‡ä»¤å®Œæˆä¹‹åå†è¿›è¡Œä¸‹é¢èµ‹å€¼æ“ä½œã€‚ä¹Ÿå°±æ˜¯åŸå­æ“ä½œç»™singleã€‚ä¿è¯singleå­—æ®µä¸ä¸ºç©ºæ—¶ï¼Œä¸€å®šæ˜¯ä¸ªå®Œæ•´çš„å¯¹è±¡ã€‚ 123456try&#123; Single temp = new Single();&#125;catch(Exception e)&#123;&#125;single = temp; å½“ç„¶è¿™æ˜¯çŒœæƒ³ï¼Œå…³äºæŒ‡ä»¤é‡æ’åºæ€ä¹ˆæµ‹è¯•å‡ºæ¥ï¼Œæ€ä¹ˆè¿½è¸ªåˆ°JVMé‡Œé¢å»çœ‹æœ€ç»ˆæ“ä½œã€‚ç›®å‰æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•ã€‚ æ€»ç»“é¦–å…ˆå°±æ˜¯è¿™ç§å•ä¾‹è®¾è®¡çš„æ€æƒ³ï¼Œæ˜¯æ¯”è¾ƒå¥½ç†è§£çš„å…¨å±€å”¯ä¸€çš„å¯¹è±¡ã€‚ç¬¬äºŒå°±æ˜¯æˆ‘ä»¬å¯¹è¿™ç§æ€æƒ³è½å®åˆ°å…·ä½“ç¼–ç å®ç°éœ€è¦è€ƒè™‘çš„ç‚¹ï¼š1.éœ€è¦æ‡’æ±‰è¿˜æ˜¯é¥¿æ±‰å¼ï¼Ÿ2.æ˜¯å¦éœ€è¦ä¿è¯æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿ3.æ˜¯å¦æœ‰å¿…è¦é˜²åå°„åºåˆ—åŒ–ç­‰ç­‰ã€‚å¯¹äºä¼˜ç¼ºç‚¹è€Œè¨€å°±æ˜¯æœ‰å¾—å¿…æœ‰èˆå¾—é—®é¢˜ï¼Œæ¯”å¦‚å®ƒä¸èƒ½è¢«ç»§æ‰¿ä¸å¥½æ‰©å±•ç­‰ã€‚è¿™äº›ç¼ºç‚¹å°±æ˜¯ä¸ºäº†å®ç°å•ä¾‹å¾—æ€æƒ³å¸¦æ¥çš„å› æ­¤å¿…é¡»æ˜¯ä¸èƒ½çš„ã€‚æ‰€ä»¥ä¹Ÿä¸ç®—ç¼ºç‚¹è€Œæ˜¯è¯´è¿™ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ä¸æ˜¯æ»¡è¶³äº†ä½¿ç”¨å•ä¾‹çš„éœ€è¦ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°å­¦é—®é¢˜ï¼š13.ç½—é©¬æ•°å­—è½¬æ•´æ•°","slug":"ç½—é©¬æ•°å­—è½¬æ•´æ•°","date":"2021-08-30T02:51:51.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/08/30/ç½—é©¬æ•°å­—è½¬æ•´æ•°/","link":"","permalink":"http://yournotes.cn/2021/08/30/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97%E8%BD%AC%E6%95%B4%E6%95%B0/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/roman-to-integer/ ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚ 12345678å­—ç¬¦ æ•°å€¼I 1V 5X 10L 50C 100D 500M 1000 ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš XXVII, å³ä¸º XX + V + II ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚ X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚ C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚ ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚è¾“å…¥ç¡®ä¿åœ¨ 1 åˆ° 3999 çš„èŒƒå›´å†…ã€‚ ç¤ºä¾‹1ï¼š 12è¾“å…¥: &quot;III&quot;è¾“å‡º: 3 ç¤ºä¾‹2ï¼š 12è¾“å…¥: &quot;IV&quot;è¾“å‡º: 4 ç¤ºä¾‹3ï¼š 12è¾“å…¥: &quot;IX&quot;è¾“å‡º: 9 ç¤ºä¾‹4ï¼š 123è¾“å…¥: &quot;LVIII&quot;è¾“å‡º: 58è§£é‡Š: L = 50, V= 5, III = 3. ç¤ºä¾‹5ï¼š 123è¾“å…¥: &quot;MCMXCIV&quot;è¾“å‡º: 1994è§£é‡Š: M = 1000, CM = 900, XC = 90, IV = 4. æç¤ºï¼š 1 &lt;= s.length &lt;= 15 s ä»…å«å­—ç¬¦ (&#39;I&#39;, &#39;V&#39;, &#39;X&#39;, &#39;L&#39;, &#39;C&#39;, &#39;D&#39;, &#39;M&#39;) é¢˜ç›®æ•°æ®ä¿è¯ s æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç½—é©¬æ•°å­—ï¼Œä¸”è¡¨ç¤ºæ•´æ•°åœ¨èŒƒå›´ [1, 3999] å†… é¢˜ç›®æ‰€ç»™æµ‹è¯•ç”¨ä¾‹çš†ç¬¦åˆç½—é©¬æ•°å­—ä¹¦å†™è§„åˆ™ï¼Œä¸ä¼šå‡ºç°è·¨ä½ç­‰æƒ…å†µã€‚ IL å’Œ IM è¿™æ ·çš„ä¾‹å­å¹¶ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ï¼Œ49 åº”è¯¥å†™ä½œ XLIXï¼Œ999 åº”è¯¥å†™ä½œ CMXCIX ã€‚ å…³äºç½—é©¬æ•°å­—çš„è¯¦å°½ä¹¦å†™è§„åˆ™ï¼Œå¯ä»¥å‚è€ƒ ç½—é©¬æ•°å­— - Mathematics ã€‚ é¢˜è§£è§£è¿™é¢˜é¦–å…ˆå¾—æ¢³ç†ç½—é©¬æ•°å­—è½¬æ•´æ•°çš„å…·ä½“é€»è¾‘ï¼Œè€Œä¸æ˜¯åƒæ—¥å¸¸æ—¶çš„ä¸€çŸ¥åŠè§£ã€‚é€šè¿‡é¢˜ç›®çš„è¯´æ˜ï¼Œå¤§æ¦‚å¯ä»¥çŸ¥é“ç½—é©¬æ•°å­—å·¦è¾¹éƒ½æ˜¯æ¯”å³è¾¹å¤§é™¤éæ˜¯åˆšå¥½å°ä¸€ä¸ªæ•°é‡çº§ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç å—ä¸­çš„ç¤ºä¾‹Cæ¯”Må°åœ¨å·¦è¾¹å› ä¸ºä¸€ä¸ªæ˜¯1000ä¸€ä¸ªæ˜¯100è¡¨è¾¾900æˆ–è€…IXè¡¨è¾¾9å¿…é¡»æ˜¯åˆšå¥½å°ä¸€ä¸ªæ•°é‡çº§æ‰èƒ½å†™å·¦è¾¹è¡¨ç¤ºå‡å»ï¼Œä¸å¯èƒ½æœ‰XMè¿™æ ·çš„æ•°ï¼Œå› ä¸º990è¡¨è¾¾ä¸ºCMXC 1234567891011121314151617181920212223242526// ç¤ºä¾‹CMXCIX// Cæ¯”å³è¾¹çš„æ•°Må°ï¼Œæ‰€ä»¥Cæ˜¯è¢«å‡çš„ã€‚/* * å½“ç„¶è¿™é‡Œä¸ç”¨å»è€ƒè™‘åƒä¸Šé¢è¯´çš„ * æ˜¯å¦æ˜¯å°ä¸€ä¸ªæ•°é‡çº§ * å› ä¸ºå®ƒä¼ è¿›æ¥å°±æ˜¯åˆæ³•çš„ç½—é©¬æ•°å­— * åœ¨è¿™é¢˜åªéœ€è¦è½¬æ•´æ•°è€Œå·² */C = 100M = 1000C &lt; M = 900// Xéœ€è¦è¢«å‡å› ä¸ºæ¯”åé¢çš„Cå°X = 10C = 100X &lt; C = 90// Iéœ€è¦è¢«å‡å› ä¸ºæ¯”åé¢çš„Xå° I = 1X = 10I &lt; X = 9// å…¶ä»–çš„éƒ½åŠ èµ·æ¥å°±æ˜¯ç»“æœ 999 å…¶å®åœ¨çº¸ä¸Šå¤šæ¨æ¼”å‡ æ¬¡åŸºæœ¬ä¸Šä¼šäº†è§£ï¼Œæ¯”åé¢å°å°±æ˜¯å‡å…¶ä»–å°±æ˜¯åŠ ã€‚ 1234567// ç¤ºä¾‹32 = 30 + 230 = XXX2 = II32 = XXXII 1234567// ç¤ºä¾‹42 = 30 + 230 = XL 2 = II42 = XLII è¿™é‡Œè¿˜æ˜¯ç”»ä¸ªåŠ¨å›¾ 12345678910111213141516171819202122public int romanToInt(String s) &#123; // 1.è®°å½•è¿™äº›ç½—é©¬å­—ç¬¦ä»£è¡¨çš„æ•°å­— Map&lt;Character, Integer&gt; map = new HashMap(); map.put(&#x27;I&#x27;,1); map.put(&#x27;V&#x27;,5); map.put(&#x27;X&#x27;,10); map.put(&#x27;L&#x27;,50); map.put(&#x27;C&#x27;,100); map.put(&#x27;D&#x27;,500); map.put(&#x27;M&#x27;,1000); // 2.éå†å­—ç¬¦ç´¯è®¡æ•°å€¼ char[] arr = s.toCharArray(); int num = 0; for(int i = 0; i &lt; arr.length; i++)&#123; if(i+1 &lt; arr.length &amp;&amp; map.get(arr[i]) &lt; map.get(arr[i+1]))&#123; num -= map.get(arr[i]); &#125;else&#123; num += map.get(arr[i]); &#125; &#125; return num;&#125; æ€»ç»“è¿™é¢˜å¯èƒ½ä¼šå‡ºç°çš„å¼¯è·¯æ˜¯æ²¡æœ‰åˆ†æ¸…çŠ¶æ€ï¼Œåœ¨éå†æ¯ä¸ªå­—ç¬¦æƒ³è¦ç»“åˆåé¢çš„ä¸²æ¥è®¡ç®—å½“å‰çš„å€¼ï¼Œè§‰å¾—ä¼šè¢«åé¢çš„ä½å½±å“ï¼Œæ‰€ä»¥äº§ç”Ÿäº†é€’å½’çš„è§£æ³•ã€‚ç›¸å¯¹æ¥è¯´éº»çƒ¦è®¸å¤šï¼Œæœ‰äº†é€’å½’å°±æœ‰ç›¸åçš„è¿­ä»£ï¼Œä¹Ÿå°±æ˜¯ä¿æŒè¿™ä¸ªå åŠ çš„æ€è·¯ä¸å˜ï¼ŒæŠŠä»å·¦å‘å³éå†æ¢æˆä»å³å‘å·¦éå†ä¼šé¡ºä¸€äº›ï¼Œç¢°åˆ°å¤§çš„å°±åŠ ç¢°åˆ°å°çš„å°±å‡ã€‚ä½†ä¹‹æ‰€ä»¥ä¼šäº§ç”Ÿè¿™ä¸¤ç§æ–¹å¼ï¼Œå°±æ˜¯æ²¡æœ‰åˆ†æ¸…å½“å‰çš„è®¡ç®—è¿‡ç¨‹æ˜¯å¦å¯ä»¥æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å•å…ƒï¼Œæ¯ä¸ªè¿‡ç¨‹ä¸å…³ä¹ä¸‹ä¸€ä¸ªç»“æœï¼Œå› ä¸ºç½—é©¬çš„æ•°å­—ä¸ä¼šå—ä½å½±å“ï¼Œä»å·¦åˆ°å³ä¹Ÿåªéœ€è¦å½“å‰æ•°å€¼ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°å­¦é—®é¢˜ï¼š326.3çš„å¹‚","slug":"3çš„å¹‚","date":"2021-08-29T04:48:09.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2021/08/29/3çš„å¹‚/","link":"","permalink":"http://yournotes.cn/2021/08/29/3%E7%9A%84%E5%B9%82/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/power-of-three ç»™å®šä¸€ä¸ªæ•´æ•°ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯3 çš„å¹‚æ¬¡æ–¹ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚æ•´æ•° n æ˜¯ 3 çš„å¹‚æ¬¡æ–¹éœ€æ»¡è¶³ï¼šå­˜åœ¨æ•´æ•° x ä½¿å¾— n &#x3D;&#x3D; 3^x ç¤ºä¾‹1ï¼š 12è¾“å…¥ï¼šn = 27è¾“å‡ºï¼štrue ç¤ºä¾‹2ï¼š 12è¾“å…¥ï¼šn = 0è¾“å‡ºï¼šfalse ç¤ºä¾‹3ï¼š 12è¾“å…¥ï¼šn = 9è¾“å‡ºï¼štrue ç¤ºä¾‹4ï¼š 12è¾“å…¥ï¼šn = 45è¾“å‡ºï¼šfalse æç¤ºï¼š -2^31 &lt;= n &lt;= 2^31 - 1 è¿›é˜¶ï¼š ä½ èƒ½ä¸ä½¿ç”¨å¾ªç¯æˆ–è€…é€’å½’æ¥å®Œæˆæœ¬é¢˜å—ï¼Ÿ é¢˜è§£ä¸€ï¼šè¿­ä»£çœ‹åˆ°è¿™é¢˜ç¬¬ä¸€æƒ³æ³•å°±æ˜¯å¾ªç¯é™å¹‚ï¼ˆé™¤3ï¼‰ä¸€å€¼å¯ä»¥åˆ°æœ€ç»ˆ0æ¬¡å¹‚ä¹Ÿå°±æ˜¯ç­‰äº1è¯´æ˜å®ƒæ˜¯3çš„å¹‚ã€‚ 1234567891011public boolean isPowerOfThree(int n) &#123; if(n &lt;= 0) return false; while(n != 1)&#123; if(n%3 == 0)&#123; n = n/3; &#125;else&#123; return false; &#125; &#125; return true;&#125; è¿™ä¸ªå€’æ˜¯æŒºé¡ºåˆ©ä¸€æ¬¡è¿‡ï¼Œæ²¡æœ‰å¤ªå¤šç»†èŠ‚ã€‚æ—¶é—´å¤æ‚åº¦è§„æ¨¡æ¯æ¬¡æ˜¯åœ¨ä¸Šä¸€æ¬¡é™¤ä¸‰æ‰€ä»¥æ˜¯logä»¥3ä¸ºåº•çš„æ¬¡æ•°ï¼Œä¹Ÿå°±æ˜¯Oï¼ˆlognï¼‰ã€‚ç©ºé—´ä¸Šè¿å˜é‡éƒ½æ²¡æœ‰ç”¨ï¼ŒOï¼ˆ1ï¼‰ é¢˜è§£äºŒï¼šæ•°å­—èŒƒå›´é‚£åœ¨é¢˜ç›®æç¤ºä¸Šè¯´å¯ä»¥ä¸ç”¨å¾ªç¯æ¥å»åšï¼Œå¾ªç¯è¿™ç§å®ƒæ˜¯åŸºæœ¬çš„æ¨æ¼”é€»è¾‘ã€‚ç°åœ¨åº”è¯¥æ˜¯å¯¹äºæ•°å­—ä¸Šå®ƒæ˜¯å¦æœ‰ä»€ä¹ˆè§„å¾‹ï¼Œæ˜¯å¦æœ‰æ€»ç»“å…¬å¼è¿™æ ·å»è€ƒè™‘ã€‚æœ€åæ˜¯å‚è€ƒäº†å®˜è§£ï¼Œä¸»è¦æœ‰ä¸¤ç‚¹ï¼š ä¸€ä¸ªè´¨æ•°çš„å¹‚æ¬¡æ–¹ï¼Œä»–çš„å› æ•°åªä¼šæ˜¯è¿™ä¸ªè´¨æ•°çš„å¹‚æ¬¡æ–¹ intç±»å‹çš„èŒƒå›´ æ ¹æ®è¿™ä¸¤ç‚¹æ˜¯å¯ä»¥çŸ¥é“ï¼Œä»å‚æ•°nçš„èŒƒå›´æ‰¾åˆ°ä¸€ä¸ªæœ€å¤§çš„3çš„å¹‚æ¬¡æ–¹max3ã€‚é‚£ä¹ˆæ‰€æœ‰çš„å¹‚æ¬¡æ–¹éƒ½æ˜¯å¯ä»¥è¢«è¿™ä¸ªæœ€å¤§çš„max3æ•´é™¤ã€‚ä¸èƒ½è¢«max3æ•´é™¤çš„å®ƒå°±ä¸æ˜¯3çš„å¹‚æ¬¡æ–¹ã€‚ è¿™é‡Œå¯ä»¥æ¨æ¼”ä¸€ä¸‹ï¼Œç”¨åº•æ•°2æ¥ã€‚å‡è®¾æŒ‡å®šnçš„èŒƒå›´æ˜¯100ä»¥å†…ã€‚ä¼ å…¥ä¸€ä¸ªnåˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Ÿ 1234567891011ä¸€ç™¾ä»¥å†…çš„2çš„å¹‚æ¬¡æ–¹æœ‰ï¼š1 2 4 8 16 32 64ä¼ å…¥ä¸€ä¸ªnæ€ä¹ˆåˆ¤æ–­æ˜¯2çš„å¹‚æ¬¡æ–¹å‘¢ï¼Ÿä¹Ÿå°±æ˜¯æ€ä¹ˆåˆ¤æ–­æ˜¯ä¸Šé¢è¿™äº›æ•°ä¹‹ä¸€å‘¢ï¼Ÿç”¨64å»é™¤å³å¯ï¼Œå®ƒé™¤ä¸Šé¢è¿™äº›æ•°éƒ½å¯ä»¥æ•´é™¤ï¼Œä¸€ç™¾å†…å…¶ä»–çš„éƒ½æ²¡åŠæ³•è¢«64æ•´é™¤æ˜¯å› ä¸ºè´¨æ•°æ˜¯æœ€å°å› æ•° å›åˆ°é¢˜ç›®ï¼Œè¿™é‡Œnæœ€å¤§æ˜¯intç±»å‹çš„æœ€å¤§ä¹Ÿå°±æ˜¯2^31 - 1ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªèŒƒå›´é‡Œé¢3^19ï¼ˆ1162261467ï¼‰æ˜¯æœ€å¤§çš„3çš„å¹‚æ¬¡æ–¹ã€‚ä¼ å…¥çš„nåªè¦èƒ½è¢«3^19æ•´é™¤é‚£ä¹ˆå®ƒå°±æ˜¯3çš„å¹‚æ¬¡æ–¹ 1234public boolean isPowerOfThree(int n) &#123; if(n &lt;= 0) return false; return 1162261467%n == 0;&#125; è¿™ä¸ªä¸ç”¨è¯´æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦éƒ½æ˜¯Oï¼ˆ1ï¼‰ æ€»ç»“è¿™é“é¢˜çš„è¯å…¶å®è§£æ³•ä¸€æ•ˆç‡å°±å¾ˆé«˜äº†ï¼Œåœ¨å®˜æ–¹é¢˜è§£é‡Œæ˜¯æœ‰è¿˜æœ‰ä¸€ç§é€šè¿‡è½¬æ¢è¿›åˆ¶åˆ¤æ–­é™¤äº†æœ€é«˜ä½ä¹‹å¤–å…¶ä»–ä½æ˜¯å¦ä¸º0æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯å¹‚é›†é‡Œï¼Œè¿™ç§å°±æ˜¯æ•ˆç‡å¾ˆä½çš„åç¦»äº†è§£é¢˜èµ°äº†å¼¯è·¯ã€‚å¤§å¤šæƒ…å†µä¸‹è§£æ³•ä¸€ä¸è§£æ³•äºŒæ•ˆç‡å·®ä¸å¤šï¼Œä½†åœ¨æ•°é‡çº§è¾ƒå¤§è§£æ³•äºŒä¼šä¼˜ä¸€ç‚¹ã€‚è§£æ³•äºŒçš„è¯ç”Ÿåˆ©ç”¨éšè—ç‰¹æ€§ï¼Œé”å®šèŒƒå›´è¿›è€Œå‡å°‘è§£é¢˜æ­¥éª¤ã€‚æ— è®ºæ˜¯å¯¹äºç¨‹åºç®—æ³•è¿˜æ˜¯å•çº¯çš„æ•°å­¦é¢˜ï¼Œåœ¨è§£é¢˜ä¹‹å‰ç¡®å®éœ€è¦å°½é‡è¯¦å°½çš„åˆ—å‡ºé¢˜ç›®ä¿¡æ¯å½“ä¸­åŒ…å«çš„æ‰€æœ‰å·²çŸ¥æ¡ä»¶ï¼Œå…¨éƒ¨åˆ©ç”¨ä¸Šæ‰èƒ½ç»™å‡ºå½“ä¸‹è¿™ä¸ªåœºæ™¯ä¸‹æœ€å¥½çš„æœ€é’ˆå¯¹çš„è§£ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"RedisTemplateå­˜å‚¨ä¹±ç é—®é¢˜","slug":"RedisTemplateå­˜å‚¨ä¹±ç é—®é¢˜","date":"2021-08-28T07:14:38.000Z","updated":"2025-04-17T08:34:52.016Z","comments":true,"path":"2021/08/28/RedisTemplateå­˜å‚¨ä¹±ç é—®é¢˜/","link":"","permalink":"http://yournotes.cn/2021/08/28/RedisTemplate%E5%AD%98%E5%82%A8%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/","excerpt":"","text":"å‰è¨€ è¿™ä¸ªä¸œè¥¿ä»¥å‰ä¹Ÿæ˜¯ç»å¸¸å¤„ç†ï¼Œä½†æ˜¯æ‡’å¾—è®°ï¼Œä»Šå¤©å¼„è‡ªå·±ç½‘ç›˜é¡¹ç›®çš„ç™»å½•ç”¨Redisä¹Ÿé‡åˆ°è¿™ä¸ªï¼Œè®°å½•ä¸‹è‡ªå·±å¸¸ç”¨çš„è§£å†³æ–¹å¼ é—®é¢˜æ¯”å¦‚åƒä¸‹é¢ï¼Œå­˜å€¼å­˜ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ä¸¤è¾¹åºåˆ—åŒ–ä¸ä¸€è‡´ã€‚ è§£å†³æ–¹å¼ é…ç½®RedisTemplateçš„åºåˆ—åŒ–æ–¹å¼ å¦‚æœkeyå’Œvalueéƒ½æ˜¯å­˜å­—ç¬¦ä¸²ç±»å‹åˆ™è®¾ç½®åºåˆ—åŒ–ä¸ºStringRedisSerializer 123RedisSerializer stringSerializer = new StringRedisSerializer();redisTemplate.setKeySerializer(stringSerializer);redisTemplate.setValueSerializer(stringSerializer); å¦‚æœkeyå‚æ•°æ”¾å­—ç¬¦ä¸²ï¼Œvalueæ”¾å¯¹è±¡ 12redisTemplate.setKeySerializer(new StringRedisSerializer());redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer()); ä¹Ÿå¯ä»¥åœ¨beané‡Œé…ç½® 123456789101112@Configurationpublic class RedisConfig &#123; @Autowired private RedisTemplate redisTemplate; @Bean public RedisTemplate redisTemplateInit() &#123; RedisSerializer stringSerializer = new StringRedisSerializer(); redisTemplate.setKeySerializer(stringSerializer); redisTemplate.setValueSerializer(stringSerializer); return redisTemplate; &#125;&#125; é™¤äº†é…ç½®åºåˆ—åŒ–æ–¹å¼ä¹‹å¤–ï¼Œå¦‚æœæ˜¯éƒ½å­˜å­—ç¬¦ä¸²å¯ä»¥åœ¨æ³¨å…¥RedisTemplateæ—¶ç›´æ¥åŠ ä¸Šæ³›å‹ 12@AutowiredRedisTemplate&lt;String,String&gt; redisTemplate; æ€»ç»“è‡ªå·±ä¸€èˆ¬æ˜¯ç›´æ¥åŠ æ³›å‹è§£å†³ä¹±ç é—®é¢˜ï¼Œå³ä½¿å­˜å€¼ç±»å‹æ˜¯å¯¹è±¡å«ä¹‰ä¹Ÿæ˜¯è½¬ä¸ºjsonå­—ç¬¦ä¸²æ¥å­˜ã€‚æ‰€ä»¥åŸºæœ¬ä¸Škey,valueéƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"Spring InitializråŠ è½½å¤±è´¥","slug":"Spring-InitializråŠ è½½å¤±è´¥","date":"2021-08-11T04:14:45.000Z","updated":"2025-04-17T08:34:52.017Z","comments":true,"path":"2021/08/11/Spring-InitializråŠ è½½å¤±è´¥/","link":"","permalink":"http://yournotes.cn/2021/08/11/Spring-Initializr%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5/","excerpt":"","text":"å‰è¨€ æœ¬æ¥æ˜¯çœ‹ä¸‹SpringBootå‡ ä¸ªåŸºæœ¬ç»„ä»¶å¼•å…¥çš„ä¾èµ–ï¼Œä½¿ç”¨Ideaçš„Spring Initializrè¿›è¡Œåˆå§‹åŒ–é¡¹ç›®ï¼Œä½†ä»ä»–è¿™ä¸ªé»˜è®¤çš„åœ°å€å»æ‹‰å–çˆ¶é¡¹ç›®ä¼šæœ‰ç½‘ç»œé—®é¢˜ è§£å†³æ–¹å¼æœ€å¥½å°±æ˜¯ç”¨è‡ªå®šä¹‰åœ°å€ï¼Œæ”¹æˆå›½å†…é•œåƒåœ°å€ï¼Œè¿™é‡Œç”¨é˜¿é‡Œçš„ï¼šhttps://start.aliyun.com/ , æ”¹å®Œä¹‹åå°±æ¯”è¾ƒå¿«äº†","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"DockeråŸºç¡€","slug":"DockeråŸºç¡€","date":"2021-08-01T10:15:54.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2021/08/01/DockeråŸºç¡€/","link":"","permalink":"http://yournotes.cn/2021/08/01/Docker%E5%9F%BA%E7%A1%80/","excerpt":"","text":"ä¸€ã€Dockerç®€ä»‹ 1.1 è™šæ‹ŸåŒ–æŠ€æœ¯è™šæ‹ŸåŒ–æŠ€æœ¯æ˜¯ä¸€ç§è®¡ç®—æœºèµ„æºç®¡ç†æŠ€æœ¯ï¼Œæ˜¯å°†è®¡ç®—æœºçš„å„ç§å®ä½“èµ„æºï¼Œå¦‚æœåŠ¡å™¨ã€ç½‘ç»œã€å†…å­˜åŠå­˜å‚¨ç­‰ï¼Œäºˆä»¥æŠ½è±¡ã€è½¬æ¢åå‘ˆç°å‡ºæ¥ã€‚è™šæ‹ŸåŒ–æŠ€æœ¯æ‰“ç ´äº†è®¡ç®—æœºå®ä½“ç»“æ„é—´çš„ï¼Œä¸å¯åˆ‡å‰²çš„éšœç¢ã€‚ä½¿ç”¨æˆ·å¯ä»¥æ¯”åŸæœ¬çš„ç»„æ€æ›´å¥½çš„æ–¹å¼ï¼Œæ¥åº”ç”¨è¿™äº›èµ„æºã€‚ è™šæ‹ŸåŒ–æŠ€æœ¯ä¸»è¦ä½œç”¨ï¼š é«˜æ€§èƒ½çš„ç‰©ç†ç¡¬ä»¶äº§èƒ½è¿‡å‰©å’Œè€çš„æ—§çš„ç¡¬ä»¶äº§èƒ½è¿‡ä½çš„é‡ç»„é‡ç”¨ï¼Œé€æ˜åŒ–åº•å±‚ç‰©ç†ç¡¬ä»¶ è½¯ä»¶è·¨ç¯å¢ƒè¿ç§»é—®é¢˜(ä»£ç çš„æ°´åœŸä¸æœ) åœ¨ä¸€å°ä¸»æœºä¸Šå®ç°å¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œå…³é”®æŠ€æœ¯å°±æ˜¯ç¡¬ä»¶çš„è™šæ‹ŸåŒ–ã€‚ 1.2 ä»€ä¹ˆæ˜¯Dockeré¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹å‡ ä¸ªé—®é¢˜ï¼š 1.åˆä½œå¼€å‘çš„æ—¶å€™ï¼Œåœ¨æœ¬æœºå¯ä»¥è·‘ï¼Œåˆ«äººçš„ç”µè„‘è·‘ä¸èµ·æ¥ â€‹ è¿™é‡Œæˆ‘ä»¬æ‹¿Java Webåº”ç”¨ç¨‹åºä¸¾ä¾‹ï¼Œæˆ‘ä»¬ä¸€ä¸ªJava Webåº”ç”¨ç¨‹åºæ¶‰åŠå¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚JDKã€tomcatã€springç­‰ç­‰ã€‚å½“è¿™äº›å…¶ä¸­æŸä¸€é¡¹ç‰ˆæœ¬ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå¯èƒ½å°±ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºè·‘ä¸èµ·æ¥è¿™ç§æƒ…å†µã€‚Dockeråˆ™å°†ç¨‹åºç›´æ¥æ‰“åŒ…æˆé•œåƒï¼Œç›´æ¥è¿è¡Œåœ¨å®¹å™¨ä¸­å³å¯ã€‚ 2.æœåŠ¡å™¨è‡ªå·±çš„ç¨‹åºæŒ‚äº†ï¼Œç»“æœå‘ç°æ˜¯åˆ«äººç¨‹åºå‡ºäº†é—®é¢˜æŠŠå†…å­˜åƒå®Œäº†ï¼Œè‡ªå·±ç¨‹åºå› ä¸ºå†…å­˜ä¸å¤Ÿå°±æŒ‚äº† â€‹ è¿™ç§ä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æƒ…å†µï¼Œå¦‚æœä½ çš„ç¨‹åºé‡è¦æ€§ä¸æ˜¯ç‰¹åˆ«é«˜çš„è¯ï¼Œå…¬å¸åŸºæœ¬ä¸Šä¸å¯èƒ½è®©ä½ çš„ç¨‹åºç‹¬äº«ä¸€å°æœåŠ¡å™¨çš„ï¼Œè¿™æ—¶å€™ä½ çš„æœåŠ¡å™¨å°±ä¼šè·Ÿå…¬å¸å…¶ä»–äººçš„ç¨‹åºå…±äº«ä¸€å°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸å¯é¿å…åœ°å°±ä¼šå—åˆ°å…¶ä»–ç¨‹åºçš„å¹²æ‰°ï¼Œå¯¼è‡´è‡ªå·±çš„ç¨‹åºå‡ºç°é—®é¢˜ã€‚Dockerå°±å¾ˆå¥½è§£å†³äº†ç¯å¢ƒéš”ç¦»çš„é—®é¢˜ï¼Œåˆ«äººç¨‹åºä¸ä¼šå½±å“åˆ°è‡ªå·±çš„ç¨‹åºã€‚ 3.å…¬å¸è¦å¼„ä¸€ä¸ªæ´»åŠ¨ï¼Œå¯èƒ½ä¼šæœ‰å¤§é‡çš„æµé‡è¿›æ¥ï¼Œå…¬å¸éœ€è¦å†å¤šéƒ¨ç½²å‡ åå°æœåŠ¡å™¨ åœ¨æ²¡æœ‰Dockerçš„æƒ…å†µä¸‹ï¼Œè¦åœ¨å‡ å¤©å†…éƒ¨ç½²å‡ åå°æœåŠ¡å™¨ï¼Œè¿™å¯¹è¿ç»´æ¥è¯´æ˜¯ä¸€ä»¶éå¸¸æŠ˜ç£¨äººçš„äº‹ï¼Œè€Œä¸”æ¯å°æœåŠ¡å™¨çš„ç¯å¢ƒè¿˜ä¸ä¸€å®šä¸€æ ·ï¼Œå°±ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæœ€åéƒ¨ç½²åœ°å¤´çš®å‘éº»ã€‚ç”¨Dockerçš„è¯ï¼Œæˆ‘åªéœ€è¦å°†ç¨‹åºæ‰“åŒ…åˆ°é•œåƒï¼Œä½ è¦å¤šå°‘å°æœåŠ¡ï¼Œæˆ‘å°±ç»™ä½ è·‘å¤šå°‘å®¹å™¨ï¼Œæå¤§åœ°æé«˜äº†éƒ¨ç½²æ•ˆç‡ã€‚ å®˜ç½‘åœ°å€ï¼šhttps://www.Docker.com Debug your appï¼Œnot your environmentï¼ è°ƒè¯•ä½ çš„åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯ä½ çš„å¼€å‘ç¯å¢ƒ å®˜ç½‘çš„ä»‹ç»æ˜¯â€œDocker is the worldâ€™s leading software container platform.â€å®˜æ–¹ç»™Dockerçš„å®šä½æ˜¯ä¸€ä¸ªåº”ç”¨å®¹å™¨å¹³å°ã€‚ Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè¯ç”Ÿäº 2013 å¹´åˆï¼ŒåŸºäº Go è¯­è¨€å®ç°ï¼Œ dotCloud å…¬å¸å‡ºå“ï¼ˆåæ”¹åä¸ºDocker Incï¼‰ Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ï¼Œä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šã€‚Dockerå®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’éš”ç¦»ï¼Œæ€§èƒ½å¼€é”€ä¹Ÿæä½ã€‚ ä» 17.03 ç‰ˆæœ¬ä¹‹åï¼ŒDockeråˆ†ä¸º CEï¼ˆCommunity Edition: ç¤¾åŒºç‰ˆï¼‰ å’Œ EEï¼ˆEnterprise Edition: ä¼ä¸šç‰ˆï¼‰ Dockeré€šä¿—çš„è®²æ˜¯æœåŠ¡å™¨ä¸­é«˜æ€§èƒ½çš„è™šæ‹Ÿæœºï¼Œå¯ä»¥å°†ä¸€å°ç‰©ç†æœºè™šæ‹ŸNå¤šå°è™šæ‹Ÿæœºçš„æœºå™¨ï¼Œäº’ç›¸ä¹‹é—´éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚ æƒ³è¦ææ‡‚Dockerï¼Œå…¶å®çœ‹å®ƒçš„ä¸¤å¥å£å·å°±è¡Œã€‚ ç¬¬ä¸€å¥ï¼Œæ˜¯**â€œBuild, Ship and Runâ€**ã€‚ ä¹Ÿå°±æ˜¯ï¼Œâ€œæ­å»ºã€å‘é€ã€è¿è¡Œâ€ï¼Œä¸‰æ¿æ–§ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š æˆ‘æ¥åˆ°ä¸€ç‰‡ç©ºåœ°ï¼Œæƒ³å»ºä¸ªæˆ¿å­ï¼Œäºæ˜¯æˆ‘æ¬çŸ³å¤´ã€ç æœ¨å¤´ã€ç”»å›¾çº¸ï¼Œä¸€é¡¿æ“ä½œï¼Œç»ˆäºæŠŠè¿™ä¸ªæˆ¿å­ç›–å¥½äº†ã€‚ ç»“æœï¼Œæˆ‘ä½äº†ä¸€æ®µæ—¶é—´ï¼Œæƒ³æ¬åˆ°å¦ä¸€ç‰‡ç©ºåœ°å»ã€‚è¿™æ—¶å€™ï¼ŒæŒ‰ä»¥å¾€çš„åŠæ³•ï¼Œæˆ‘åªèƒ½å†æ¬¡æ¬çŸ³å¤´ã€ç æœ¨å¤´ã€ç”»å›¾çº¸ã€ç›–æˆ¿å­ã€‚ ä½†æ˜¯ï¼Œè·‘æ¥ä¸€ä¸ªè€å·«å©†ï¼Œæ•™ä¼šæˆ‘ä¸€ç§é­”æ³•ã€‚ è¿™ç§é­”æ³•ï¼Œå¯ä»¥æŠŠæˆ‘ç›–å¥½çš„æˆ¿å­å¤åˆ¶ä¸€ä»½ï¼Œåšæˆâ€œé•œåƒâ€ï¼Œæ”¾åœ¨æˆ‘çš„èƒŒåŒ…é‡Œã€‚ ç­‰æˆ‘åˆ°äº†å¦ä¸€ç‰‡ç©ºåœ°ï¼Œå°±ç”¨è¿™ä¸ªâ€œé•œåƒâ€ï¼Œå¤åˆ¶ä¸€å¥—æˆ¿å­ï¼Œæ‘†åœ¨é‚£è¾¹ï¼Œæ‹åŒ…å…¥ä½ã€‚ æ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Ÿ æ‰€ä»¥ï¼ŒDockerçš„ç¬¬äºŒå¥å£å·å°±æ˜¯ï¼šâ€œBuild onceï¼ŒRun anywhereï¼ˆæ­å»ºä¸€æ¬¡ï¼Œåˆ°å¤„èƒ½ç”¨ï¼‰â€ã€‚ Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨æˆ–Windows æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ï¼Œå®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚ ç‰¹ç‚¹ï¼š æ ‡å‡†åŒ–äº¤ä»˜ï¼šDockerå°†åº”ç”¨æ‰“åŒ…æˆæ ‡å‡†åŒ–å•å…ƒï¼Œç”¨äºäº¤ä»˜ã€éƒ¨ç½²ï¼› è½»é‡çº§ï¼šå®¹å™¨åŠåŒ…å«äº†è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ç¯å¢ƒï¼Œè€Œä¸”éå¸¸è½»é‡çº§ é«˜å¯é ï¼šå®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥åœ¨ä»»ä½•Linuxç¯å¢ƒä¸­å§‹ç»ˆå¦‚ä¸€çš„è¿è¡Œ éš”ç¦»æ€§ï¼šå®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºï¼Œå…·å¤‡éš”ç¦»æ€§ï¼Œè¿™æ ·å¤šå›¢é˜Ÿå¯ä»¥å…±äº«åŒä¸€Linuxç³»ç»Ÿèµ„æº 1.3 å®¹å™¨ä¸è™šæ‹Ÿæœºæ¯”è¾ƒä¸‹é¢çš„å›¾ç‰‡æ¯”è¾ƒäº† Docker å’Œä¼ ç»Ÿè™šæ‹ŸåŒ–æ–¹å¼çš„ä¸åŒä¹‹å¤„ï¼Œå¯è§Dockeræ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šå®ç°è™šæ‹ŸåŒ–ï¼Œç›´æ¥å¤ç”¨æœ¬åœ°ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œè€Œä¼ ç»Ÿæ–¹å¼åˆ™æ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°ã€‚ ç‰¹æ€§ å®¹å™¨ è™šæ‹Ÿæœº å¯åŠ¨ ç§’çº§ åˆ†é’Ÿçº§ ç¡¬ç›˜ä½¿ç”¨ ä¸€èˆ¬ä¸ºMB ä¸€èˆ¬ä¸ºGB æ€§èƒ½ æ¥è¿‘åŸç”Ÿç¡¬ä»¶ å¼±é¸¡ ç³»ç»Ÿæ”¯æŒé‡ å•æœºå¯è·‘å‡ åä¸ªå®¹å™¨ å•æœºå‡ ä¸ªè™šæ‹ŸOS è¿è¡Œç¯å¢ƒ ä¸»è¦åœ¨Linux ä¸»è¦åœ¨window ç›¸åŒï¼šå®¹å™¨å’Œè™šæ‹Ÿæœºéƒ½æ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå…·å¤‡èµ„æºéš”ç¦»å’Œåˆ†é…ä¼˜åŠ¿ ä¸åŒï¼š Dockerè™šæ‹ŸåŒ–çš„æ˜¯æ“ä½œç³»ç»Ÿï¼Œè™šæ‹Ÿæœºè™šæ‹ŸåŒ–çš„æ˜¯ç¡¬ä»¶ ä¼ ç»Ÿè™šæ‹Ÿæœºå¯ä»¥è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼ŒDockerä¸»è¦è¿è¡ŒåŒä¸€ç±»æ“ä½œç³»ç»Ÿ(Linux) æ¯”è¾ƒä¸Šé¢ä¸¤å¼ å›¾ï¼Œæˆ‘ä»¬å‘ç°è™šæ‹Ÿæœºæ˜¯æºå¸¦æ“ä½œç³»ç»Ÿï¼Œæœ¬èº«å¾ˆå°çš„åº”ç”¨ç¨‹åºå´å› ä¸ºæºå¸¦äº†æ“ä½œç³»ç»Ÿè€Œå˜å¾—éå¸¸å¤§ï¼Œå¾ˆç¬¨é‡ã€‚Dockeræ˜¯ä¸æºå¸¦æ“ä½œç³»ç»Ÿçš„ï¼Œæ‰€ä»¥Dockerçš„åº”ç”¨å°±éå¸¸çš„è½»å·§ 1.4 DockeråŸºæœ¬æ¦‚å¿µ **å®¿ä¸»æœºï¼š**å®‰è£…Dockerå®ˆæŠ¤è¿›ç¨‹çš„LinuxæœåŠ¡å™¨ï¼Œç§°ä¹‹ä¸ºå®¿ä¸»æœºï¼› **é•œåƒï¼ˆImageï¼‰ï¼š**Docker é•œåƒï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚é™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ã€‚ **å®¹å™¨ï¼ˆContainerï¼‰ï¼š**é•œåƒè¿è¡Œä¹‹åçš„å®ä½“ï¼Œé•œåƒå’Œå®¹å™¨çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå¯¹è±¡ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚ **ä»“åº“ï¼ˆRepositoryï¼‰ï¼š**ä»“åº“å¯çœ‹æˆä¸€ä¸ªé•œåƒæ§åˆ¶ä¸­å¿ƒï¼Œç”¨æ¥ä¿å­˜é•œåƒã€‚ ä¸¾ä¾‹ï¼š åˆšæ‰ä¾‹å­é‡Œé¢ï¼Œé‚£ä¸ªæ”¾åœ¨åŒ…é‡Œçš„â€œé•œåƒâ€ï¼Œå°±æ˜¯Dockeré•œåƒã€‚è€Œæˆ‘çš„èƒŒåŒ…ï¼Œå°±æ˜¯Dockerä»“åº“ã€‚æˆ‘åœ¨ç©ºåœ°ä¸Šï¼Œç”¨é­”æ³•é€ å¥½çš„æˆ¿å­ï¼Œå°±æ˜¯ä¸€ä¸ªDockerå®¹å™¨ è¯´ç™½äº†ï¼Œè¿™ä¸ªDockeré•œåƒï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆä¾‹å¦‚ç¯å¢ƒå˜é‡ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡å˜å‡ºæˆ¿å­ï¼Œæˆ¿å­æ˜¯ä¸€æ ·çš„ï¼Œä½†ç”Ÿæ´»ç”¨å“ä¹‹ç±»çš„ï¼Œéƒ½æ˜¯ä¸ç®¡çš„ã€‚è°ä½è°è´Ÿè´£æ·»ç½®ã€‚ æ¯ä¸€ä¸ªé•œåƒå¯ä»¥å˜å‡ºä¸€ç§æˆ¿å­ã€‚é‚£ä¹ˆï¼Œæˆ‘å¯ä»¥æœ‰å¤šä¸ªé•œåƒå‘€ï¼ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ç›–äº†ä¸€ä¸ªæ¬§å¼åˆ«å¢…ï¼Œç”Ÿæˆäº†é•œåƒã€‚å¦ä¸€ä¸ªå“¥ä»¬å¯èƒ½ç›–äº†ä¸€ä¸ªä¸­å›½å››åˆé™¢ï¼Œä¹Ÿç”Ÿæˆäº†é•œåƒã€‚è¿˜æœ‰å“¥ä»¬ï¼Œç›–äº†ä¸€ä¸ªéæ´²èŒ…è‰å±‹ï¼Œä¹Ÿç”Ÿæˆäº†é•œåƒ è¿™ä¹ˆä¸€æ¥ï¼Œæˆ‘ä»¬å¯ä»¥äº¤æ¢é•œåƒï¼Œä½ ç”¨æˆ‘çš„ï¼Œæˆ‘ç”¨ä½ çš„ï¼Œæ˜¯ä¸æ˜¯å°±å¾ˆçˆ½ã€‚ äºæ˜¯ä¹ï¼Œå°±å˜æˆäº†ä¸€ä¸ªå¤§çš„å…¬å…±ä»“åº“ã€‚ è´Ÿè´£å¯¹Dockeré•œåƒè¿›è¡Œç®¡ç†çš„ï¼Œæ˜¯Docker RegistryæœåŠ¡ï¼ˆç±»ä¼¼ä»“åº“ç®¡ç†å‘˜ï¼‰ã€‚ ä¸æ˜¯ä»»ä½•äººå»ºçš„ä»»ä½•é•œåƒéƒ½æ˜¯åˆæ³•çš„ã€‚ä¸‡ä¸€æœ‰äººç›–äº†ä¸€ä¸ªæœ‰é—®é¢˜çš„æˆ¿å­å‘¢ï¼Ÿ æ‰€ä»¥ï¼ŒDocker RegistryæœåŠ¡å¯¹é•œåƒçš„ç®¡ç†æ˜¯éå¸¸ä¸¥æ ¼çš„ã€‚ æœ€å¸¸ä½¿ç”¨çš„Registryå…¬å¼€æœåŠ¡ï¼Œæ˜¯å®˜æ–¹çš„Docker Hubï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤çš„ Registryï¼Œå¹¶æ‹¥æœ‰å¤§é‡çš„é«˜è´¨é‡çš„å®˜æ–¹é•œåƒã€‚ äºŒã€Dockerå®‰è£…ä¸å¯åŠ¨è¿™é‡Œä½¿ç”¨è™šæ‹Ÿæœºæ¼”ç¤ºï¼Œæœ¬åœ°ç”µè„‘å®‰è£…è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºæ­é…Linuxæ“ä½œç³»ç»Ÿï¼Œåœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šå®‰è£…Dockerå®¹å™¨ã€‚ Dockeréœ€è¦ä»é•œåƒä»“åº“ä¸‹è½½é•œåƒï¼Œéœ€è¦è”ç½‘ã€‚ æä¾›çš„è™šæ‹Ÿæœºç½‘å¡åœ°å€ï¼Œæˆ‘è¿™é‡Œæ˜¯ï¼š192.168.200.128 **å‡†å¤‡å·¥ä½œï¼š**ç¡®ä¿Linuxç³»ç»Ÿèƒ½å¤Ÿè¿æ¥ç½‘ç»œ è°ƒæ•´è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ï¼š æ¡¥æ¥æ¨¡å¼çš„è™šæ‹Ÿæœºï¼Œå°±åƒä¸€ä¸ªåœ¨è·¯ç”±å™¨â€æ°‘æ”¿å±€â€é‚£é‡Œâ€ä¸Šè¿‡æˆ·å£â€çš„æˆå¹´äººï¼Œæœ‰è‡ªå·±å•ç‹¬çš„å±…ä½åœ°å€ï¼Œè™½ç„¶å’Œä¸»æœºä½åœ¨åŒä¸€ä¸ªå¤§é™¢é‡Œï¼Œä½†å¥½æ­¹æ˜¯æœ‰æˆ·å£çš„äººï¼Œå¯ä»¥å¤§æ‘‡å¤§æ‘†åœ°ç›´æ¥å’Œå¤–é¢é€šä¿¡ã€‚ NATæ¨¡å¼çš„è™šæ‹Ÿæœºï¼Œçº¯ç²¹å°±æ˜¯ä¸€ä¸ªæ²¡ä¸Šè¿‡æˆ·å£çš„é»‘æˆ·ï¼Œè·¯ç”±å™¨â€æ°‘æ”¿å±€â€æ ¹æœ¬ä¸çŸ¥é“æœ‰è¿™ä¹ˆä¸ªäººï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šä¸»åŠ¨å’Œå®ƒé€šä¿¡ã€‚å³ä½¿è™šæ‹Ÿæœºå¶å°”è¦å‘å¤–é¢å‘é€ç‚¹çš„ä¿¡ä»¶ï¼Œéƒ½å¾—äº¤ç»™ä¸»æœºä»¥ä¸»æœºçš„åä¹‰è½¬å‘å‡ºå»ï¼Œä¸»æœºè¿˜ä¸“é—¨è¯·äº†ä¸€ä½å«åšNATçš„è€å¤§çˆ·æ¥ä¸“é—¨è´Ÿè´£è¿™äº›è™šæ‹Ÿæœºçš„å‘ä¿¡ã€æ”¶ä¿¡äº‹å®œã€‚ ä»…ä¸»æœºæ¨¡å¼çš„è™šæ‹Ÿæœºï¼Œçº¯ç²¹æ˜¯ä¸€ä¸ªå½»å½»åº•åº•çš„é»‘å¥´ï¼Œä¸ä»…æ²¡æœ‰æˆ·å£ã€è·¯ç”±å™¨â€æ°‘æ”¿å±€â€ä¸çŸ¥é“è¿™ä¹ˆå·äººï¼Œè¿˜è¢«ä¸»æœºå…³åœ¨å°é»‘å±‹é‡Œï¼Œè¿ä¿¡ä»¶ä¹Ÿä¸å‡†å¾€å¤–å‘ã€‚ å…¶ä¸­è¿™ä¸ªä»…ä¸»æœºæ¨¡å¼èƒ½å¤Ÿä¿éšœæˆ‘ä»¬åœ¨æ‹”æ‰ç½‘çº¿çš„æƒ…å†µä¸‹ç»§ç»­è¿æ¥æˆ‘ä»¬çš„è™šæ‹Ÿæœºï¼Œä¸ä¾é å…¬ç½‘è¿æ¥ï¼Œè€Œæ˜¯ä¾é ç‰©ç†æœºå’Œè™šæ‹Ÿæœºçš„å…³ç³»è¿æ¥ã€‚åœ¨æ–­ç½‘çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨è¿™ä¸ªæ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿æ¥è™šæ‹Ÿæœºï¼Œå®ç°æˆ‘ä»¬çš„æ“ä½œã€‚ VMware Network Adapter VMnet8ç½‘å¡è®¾ç½® æ‰“å¼€è™šæ‹Ÿæœºæ–‡ä»¶ï¼š æä¾›çš„è™šæ‹Ÿæœºæ–‡ä»¶å·²ç»å®‰è£…äº†CentOS7ï¼Œå¹¶ä¸”åœ¨CentOS7ä¸Šå·²ç»å®‰è£…äº†Dockerç¯å¢ƒï¼ŒIPåœ°å€ï¼š192.168.200.128 è¿æ¥åˆ°è™šæ‹Ÿæœº SSHã€SecureCRT 2.1 å®‰è£… Dockerå®˜æ–¹å»ºè®®åœ¨Ubuntuä¸­å®‰è£…Dockerè½¯ä»¶ã€‚å› ä¸ºDockeråŸºäºUbuntuå‘å¸ƒï¼Œè€Œä¸”Dockerå‡ºç°é—®é¢˜æ—¶ï¼ŒUbuntuç³»ç»Ÿç‰ˆæœ¬çš„ä¸€èˆ¬æ˜¯å…ˆæ‰“è¡¥ä¸ã€‚å¾ˆå¤šç‰ˆæœ¬åœ¨CentOSä¸­ï¼Œæ˜¯ä¸æ”¯æŒæ›´æ–°æœ€æ–°è¡¥ä¸åŒ…çš„ã€‚æ²¡æœ‰å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬å­¦ä¹ çš„ç¯å¢ƒéƒ½ä½¿ç”¨CentOSã€‚å› æ­¤ï¼Œè¿™é‡Œæˆ‘ä»¬å°†Dockerå®‰è£…åˆ°CentOSä¸Šã€‚æ³¨æ„ï¼Œä¸€å®šå®‰è£…åœ¨CentOS 7.xåŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒCentOS6.xçš„ç‰ˆæœ¬ä¸­æœ‰Bugï¼ è¯·ç›´æ¥æŒ‚è½½è¯¾ç¨‹é…å¥—èµ„æ–™çš„Centos7.xé•œåƒ ï¼ˆ1ï¼‰æŸ¥çœ‹ç”µè„‘ä¸Šå·²ç»å·²ç»å®‰è£…Docker 1yum list installed | grep docker ï¼ˆ2ï¼‰å®‰è£…docker 1yum -y install docker ï¼ˆ3ï¼‰å®‰è£…åæŸ¥çœ‹dockerç‰ˆæœ¬ 1docker -v 2.2 Dockerå®ˆæŠ¤è¿›ç¨‹ç›¸å…³å‘½ä»¤æ¦‚è¦ï¼š å¯åŠ¨dockeræœåŠ¡ åœæ­¢dockeræœåŠ¡ é‡å¯dockeræœåŠ¡ æŸ¥çœ‹dockeræœåŠ¡çŠ¶æ€ å¼€æœºå¯åŠ¨dockeræœåŠ¡ æŸ¥çœ‹dockeræ¦‚è¦ä¿¡æ¯ è¯¦è§£ï¼š systemctlå‘½ä»¤æ˜¯ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨æŒ‡ä»¤ å¯åŠ¨dockerï¼š 1systemctl start docker åœæ­¢dockerï¼š 1systemctl stop docker é‡å¯dockerï¼š 1systemctl restart docker æŸ¥çœ‹dockerçŠ¶æ€ï¼š 1systemctl status docker å¼€æœºå¯åŠ¨ï¼š 1systemctl enable docker æŸ¥çœ‹dockeræ¦‚è¦ä¿¡æ¯ 1docker info æŸ¥çœ‹dockerå¸®åŠ©æ–‡æ¡£ 1docker --help 2.3 é•œåƒåŠ é€Ÿçš„ä¸¤ä¸ªæ–¹æ¡ˆé»˜è®¤æƒ…å†µï¼Œå°†ä»docker hubï¼ˆhttps://hub.docker.com/ï¼‰ä¸‹è½½dockeré•œåƒå¤ªæ…¢ï¼Œä¸€èˆ¬éƒ½ä¼šé…ç½®é•œåƒåŠ é€Ÿå™¨ï¼› æ–¹æ¡ˆä¸€ï¼šä¸­ç§‘å¤§ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦(ustc)æ˜¯è€ç‰Œçš„linuxé•œåƒæœåŠ¡æä¾›è€…äº†ï¼Œè¿˜åœ¨é¥è¿œçš„ubuntu 5.04ç‰ˆæœ¬çš„æ—¶å€™å°±åœ¨ç”¨ã€‚ustcçš„dockeré•œåƒåŠ é€Ÿå™¨é€Ÿåº¦å¾ˆå¿«ã€‚ustc docker mirrorçš„ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯ä¸éœ€è¦æ³¨å†Œï¼Œæ˜¯çœŸæ­£çš„å…¬å…±æœåŠ¡ã€‚ https://lug.ustc.edu.cn/wiki/mirrors/help/docker ç¼–è¾‘è¯¥æ–‡ä»¶ï¼š 1vim /etc/docker/daemon.json åœ¨è¯¥æ–‡ä»¶ä¸­è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š 123&#123;&quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn&quot;] &#125; æ–¹æ¡ˆäºŒï¼šé˜¿é‡Œäº‘å¦‚æœä¸­ç§‘å¤§é•œåƒåŠ è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œå»ºè®®é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿï¼Œè¿™ä¸ªé•œåƒä»“åº“å¦‚æœä¸å¥½ä½¿ï¼Œå¯ä»¥è‡ªå·±ä»é˜¿é‡Œäº‘ä¸Šç”³è¯·ï¼é€Ÿåº¦æ æ çš„~ 123&#123; &quot;registry-mirrors&quot;: [&quot;https://3ad96kxd.mirror.aliyuncs.com&quot;] &#125; å¿…é¡»è¦æ³¨å†Œï¼Œæ¯ä¸ªäººåˆ†é…ä¸€ä¸ªå…è´¹çš„dockeré•œåƒåŠ é€Ÿåœ°å€ï¼Œé€Ÿåº¦æå¿« é…ç½®å®Œæˆè®°å¾—åˆ·æ–°é…ç½® 12sudo systemctl daemon-reload sudo systemctl restart docker ä¸‰ã€Dockerå¸¸ç”¨å‘½ä»¤ 3.1 é•œåƒç›¸å…³å‘½ä»¤æ¦‚è¦ æŸ¥çœ‹é•œåƒ docker images æœç´¢é•œåƒ docker search imageName æ‹‰å–é•œåƒ docker pull imageNameï¼šversion åˆ é™¤é•œåƒ docker rmi imageId rmiâ€“&gt;remove Image 3.1.1 æŸ¥çœ‹é•œåƒ æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰é•œåƒ 1docker images è¿™äº›é•œåƒéƒ½æ˜¯å­˜å‚¨åœ¨Dockerå®¿ä¸»æœºçš„&#x2F;var&#x2F;lib&#x2F;dockerç›®å½•ä¸‹ 3.1.2 æœç´¢é•œåƒå¦‚æœä½ éœ€è¦ä»ç½‘ç»œä¸­æŸ¥æ‰¾éœ€è¦çš„é•œåƒï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æœç´¢ï¼›&#x3D;&#x3D;æ³¨æ„ï¼Œå¿…é¡»ç¡®ä¿å½“å‰ç³»ç»Ÿèƒ½è”ç½‘&#x3D;&#x3D; 1docker search é•œåƒåç§° 3.1.3 æ‹‰å–é•œåƒæ‹‰å–é•œåƒ:ä»Dockerä»“åº“ä¸‹è½½é•œåƒåˆ°æœ¬åœ°ï¼Œé•œåƒåç§°æ ¼å¼ä¸º åç§°:ç‰ˆæœ¬å·ï¼Œå¦‚æœç‰ˆæœ¬å·ä¸æŒ‡å®šåˆ™æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚å¦‚æœä¸çŸ¥é“é•œåƒç‰ˆæœ¬ï¼Œå¯ä»¥å»docker hub æœç´¢å¯¹åº”é•œåƒæŸ¥çœ‹ã€‚ 1docker pull é•œåƒåç§° ä¾‹å¦‚ï¼Œæˆ‘è¦ä¸‹è½½centos7é•œåƒ 1docker pull centos:7 3.1.4 åˆ é™¤é•œåƒæŒ‰é•œåƒIDåˆ é™¤é•œåƒ 1docker rmi é•œåƒID åˆ é™¤æ‰€æœ‰é•œåƒ â€‹ åˆ é™¤ä¹‹å‰è¦ç¡®è®¤æ­¤é•œåƒå·²ç»æ²¡æœ‰è¢«å®¹å™¨åœ¨ä½¿ç”¨ï¼Œå¦‚æœå­˜åœ¨æ­£åœ¨è¿è¡Œçš„dockerå®¹å™¨ï¼Œåˆ é™¤ä¼šæŠ¥é”™â€œError: container_delete: Impossible to remove a running container, please stop it fifirstâ€ 12docker images -q #æŸ¥çœ‹æ‰€æœ‰é•œåƒçš„IDdocker rmi `docker images -q` #æ‰¹é‡åˆ é™¤é•œåƒ 3.2 å®¹å™¨ç›¸å…³å‘½ä»¤æ¦‚è¦ æŸ¥çœ‹å®¹å™¨ åˆ›å»ºå®¹å™¨ï¼šäº¤äº’å¼ã€å®ˆæŠ¤å¼ è¿›å…¥å®¹å™¨ å¯åŠ¨å®¹å™¨ åœæ­¢å®¹å™¨ åˆ é™¤å®¹å™¨ 3.2.1 æŸ¥çœ‹å®¹å™¨æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ 1docker ps æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å’Œå·²ç»åœæ­¢è¿è¡Œçš„ï¼‰ 12docker ps â€“adocker ps -all æŸ¥çœ‹æœ€åä¸€æ¬¡è¿è¡Œçš„å®¹å™¨ 1docker ps â€“l æŸ¥çœ‹åœæ­¢çš„å®¹å™¨ 1docker ps -f status=exited 3.2.2 åˆ›å»ºä¸å¯åŠ¨å®¹å™¨ åˆ›å»ºå®¹å™¨å‘½ä»¤ï¼š 1docker run å‚æ•° é•œåƒåç§°:é•œåƒæ ‡ç­¾ /bin/bash åˆ›å»ºå®¹å™¨å¸¸ç”¨çš„å‚æ•°è¯´æ˜ï¼š 1234567891011121314## å‘½ä»¤å‚æ•°è¯¦è§£-iï¼šè¡¨ç¤ºè¿è¡Œå®¹å™¨,å¦‚æœä¸åŠ è¯¥å‚æ•°é‚£ä¹ˆåªæ˜¯é€šè¿‡é•œåƒåˆ›å»ºå®¹å™¨ï¼Œè€Œä¸å¯åŠ¨ã€‚-tï¼šè¡¨ç¤ºå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥å…¶å‘½ä»¤è¡Œã€‚åŠ å…¥è¿™ä¸¤ä¸ªå‚æ•°åï¼Œå®¹å™¨åˆ›å»ºå°±èƒ½ç™»å½•è¿›å»ã€‚å³åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯(å¦‚æœ åªåŠ itä¸¤ä¸ªå‚æ•°ï¼Œåˆ›å»ºåå°±ä¼šè‡ªåŠ¨è¿›å»å®¹å™¨)ã€‚-dï¼šåœ¨runåé¢åŠ ä¸Š-då‚æ•°,åˆ™ä¼šåˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨åœ¨åå°è¿è¡Œï¼ˆè¿™æ ·åˆ›å»ºå®¹å™¨åä¸ä¼šè‡ªåŠ¨ç™»å½•å®¹å™¨ï¼‰ã€‚--name :ä¸ºåˆ›å»ºçš„å®¹å™¨å‘½åã€‚-vï¼šè¡¨ç¤ºç›®å½•æ˜ å°„å…³ç³»ï¼ˆå‰è€…æ˜¯å®¿ä¸»æœºç›®å½•ï¼Œåè€…æ˜¯æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„ç›®å½•ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªï¼våšå¤šä¸ªç›®å½• æˆ–æ–‡ä»¶æ˜ å°„ã€‚æ³¨æ„ï¼šæœ€å¥½åšç›®å½•æ˜ å°„ï¼Œåœ¨å®¿ä¸»æœºä¸Šåšä¿®æ”¹ï¼Œç„¶åå…±äº«åˆ°å®¹å™¨ä¸Šã€‚-pï¼šè¡¨ç¤ºç«¯å£æ˜ å°„ï¼Œå‰è€…æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œåè€…æ˜¯å®¹å™¨å†…çš„æ˜ å°„ç«¯å£ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ª-påšå¤šä¸ªç«¯å£æ˜ å°„ï¼Œä¾‹å¦‚ï¼š å¯ä»¥å°†Dockerä¸­Tomcatå®¹å™¨çš„8080ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„æŸä¸€ä¸ªç«¯å£8080ï¼Œé‚£ä¹ˆä»¥åè®¿é—®tomcatåªéœ€ è¦ï¼šhttp://å®¿ä¸»æœºçš„IPï¼š8080/è¿›å…¥å®¹å™¨ä¹‹åï¼Œåˆå§‹åŒ–æ‰§è¡Œçš„å‘½ä»¤ï¼š/bin/bashï¼›å¯å†™å¯ä¸å†™ ï¼ˆ1ï¼‰äº¤äº’å¼å®¹å™¨ä½¿ç”¨äº¤äº’å¼è¿è¡Œå®¹å™¨ï¼Œå®¹å™¨è¿è¡Œåç›´æ¥è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨ï¼Œé€€å‡ºå®¹å™¨å†…éƒ¨åï¼Œå®¹å™¨ç›´æ¥å…³é—­ åªæœ‰ç¬¬ä¸€æ¬¡æ‰ä¼šè¿™æ ·ï¼Œä»¥åå†å¯åŠ¨å®¹å™¨å°±æ˜¯ä¸€ä¸ªå®ˆæŠ¤å¼çš„ã€‚ 1docker run -it --name=å®¹å™¨åç§° é•œåƒåç§°:æ ‡ç­¾ /bin/bash è¿™æ—¶æˆ‘ä»¬é€šè¿‡pså‘½ä»¤æŸ¥çœ‹ï¼Œå‘ç°å¯ä»¥çœ‹åˆ°å¯åŠ¨çš„å®¹å™¨ï¼ŒçŠ¶æ€ä¸ºå¯åŠ¨çŠ¶æ€ é€€å‡ºå½“å‰å®¹å™¨ 1exit ï¼ˆ2ï¼‰å®ˆæŠ¤å¼å®¹å™¨1docker run -di --name=å®¹å™¨åç§° é•œåƒåç§°(æˆ–é•œåƒID):æ ‡ç­¾ /bin/bash ï¼ˆ3ï¼‰ç™»å…¥å®¹å™¨&#x2F;è¿›å…¥å®¹å™¨ç›®å½•1docker exec -it å®¹å™¨åç§° (æˆ–è€…å®¹å™¨ID) /bin/bash æ³¨æ„ï¼šè¿™é‡Œçš„ç™»é™†å®¹å™¨ä¹‹åæ‰§è¡Œçš„è„šæœ¬&#x2F;bin&#x2F;bashå¿…é¡»å†™ 3.2.3 åœæ­¢ä¸å¯åŠ¨å®¹å™¨åœæ­¢å®¹å™¨ï¼š 1docker stop å®¹å™¨åç§°ï¼ˆæˆ–è€…å®¹å™¨IDï¼‰ å¯åŠ¨å®¹å™¨ï¼š 1docker start å®¹å™¨åç§°ï¼ˆæˆ–è€…å®¹å™¨IDï¼‰ 3.2.4 æ–‡ä»¶æ‹·è´å¦‚æœæˆ‘ä»¬éœ€è¦å°†å®¿ä¸»æœºçš„æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨å†…å¯ä»¥ä½¿ç”¨cpå‘½ä»¤ 12345678docker cp éœ€è¦æ‹·è´çš„æ–‡ä»¶æˆ–ç›®å½• å®¹å™¨åç§°:å®¹å™¨ç›®å½•#æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶touch latou.html#æ‹·è´åˆ°tomcatå®¹å™¨çš„webappsç›®å½•ä¸‹docker cp lagou.html 59b35c0bbe6d:/usr/local/tomcat/webapps#åˆ‡æ¢åˆ°tomcatå®¹å™¨ä¸­æŸ¥çœ‹docker exec -it tomcatå®¹å™¨ID /bin/bash ä¹Ÿå¯ä»¥å°†æ–‡ä»¶ä»å®¹å™¨å†…æ‹·è´å‡ºæ¥ 1234docker cp å®¹å™¨åç§°:å®¹å™¨ç›®å½• éœ€è¦æ‹·è´çš„æ–‡ä»¶æˆ–ç›®å½•#å°†copyåˆ°tomcatå®¹å™¨çš„æ–‡ä»¶å†copyå‡ºæ¥docker cp 59b35c0bbe6d:/usr/local/tomcat/webapps/lagou.html ./ 3.2.5 ç›®å½•æŒ‚è½½æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œå°†å®¿ä¸»æœºçš„ç›®å½•ä¸å®¹å™¨å†…çš„ç›®å½•è¿›è¡Œæ˜ å°„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¿®æ”¹å®¿ä¸»æœºæŸä¸ªç›®å½•çš„æ–‡ä»¶ä»è€Œå»å½±å“å®¹å™¨ã€‚ åˆ›å»ºå®¹å™¨ æ·»åŠ -vå‚æ•° åè¾¹ä¸º å®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½• ä¾‹å¦‚ï¼š 1docker run -di -v /usr/local/myhtml:/usr/local/myhtml --name=mycentos3 centos:7 3.2.6 æŸ¥çœ‹å®¹å™¨IPåœ°å€æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„å„ç§æ•°æ® 1docker inspect å®¹å™¨åç§°ï¼ˆå®¹å™¨IDï¼‰ ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç›´æ¥è¾“å‡ºIPåœ°å€ 1docker inspect --format=&#x27;&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;&#x27; å®¹å™¨åç§°ï¼ˆå®¹å™¨IDï¼‰ 3.2.7 åˆ é™¤å®¹å™¨åˆ é™¤æŒ‡å®šçš„å®¹å™¨ï¼Œæ­£åœ¨è¿è¡Œçš„å®¹å™¨æ— æ³•åˆ é™¤ 1234#åˆ é™¤å®¹å™¨ docker rm å®¹å™¨åç§°ï¼ˆå®¹å™¨IDï¼‰ #åˆ é™¤é•œåƒ docker rmi é•œåƒID(é•œåƒåç§°) é—®é¢˜ï¼šæ˜¯å¦å¯ä»¥åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Ÿ å››ã€Dockeræ•°æ®å·ï¼ˆVolumesï¼‰4.1 æ•°æ®å·æ¦‚è¿°æ•°æ®å·æ˜¯å®¿ä¸»æœºä¸­çš„ä¸€ä¸ªç›®å½•æˆ–æ–‡ä»¶ï¼Œå½“å®¹å™¨ç›®å½•å’Œæ•°æ®å·ç›®å½•ç»‘å®šåï¼Œå¯¹æ–¹çš„ä¿®æ”¹ä¼šç«‹å³åŒæ­¥ã€‚ ä¸€ä¸ªæ•°æ®å·å¯ä»¥è¢«å¤šä¸ªå®¹å™¨åŒæ—¶æŒ‚è½½ï¼Œä¸€ä¸ªå®¹å™¨ä¹Ÿå¯ä»¥è¢«æŒ‚è½½å¤šä¸ªæ•°æ®å·ã€‚ ç®€å•æ¥è¯´æ•°æ®å·æœ¬è´¨å…¶å®æ˜¯å…±äº«æ–‡ä»¶å¤¹ï¼Œæ˜¯å®¿ä¸»æœºä¸å®¹å™¨é—´æ•°æ®å…±äº«çš„æ¡¥æ¢ã€‚ æ•°æ®å·ä½œç”¨ å®¹å™¨æ•°æ®æŒä¹…åŒ– å¤–éƒ¨æœºå™¨å’Œå®¹å™¨é—´æ¥é€šä¿¡ å®¹å™¨ä¹‹é—´æ•°æ®äº¤æ¢ 4.2 æ•°æ®å·é…ç½®æ–¹å¼ï¼ˆ1ï¼‰1ä¸ªå®¹å™¨æŒ‚è½½1ä¸ªæ•°æ®å·åˆ›å»ºå¯åŠ¨å®¹å™¨æ—¶ï¼Œä½¿ç”¨ â€“v å‚æ•° è®¾ç½®æ•°æ®å· 1docker run ... â€“v å®¿ä¸»æœºç›®å½•(æ–‡ä»¶):å®¹å™¨å†…ç›®å½•(æ–‡ä»¶) ... æ³¨æ„äº‹é¡¹ï¼š ç›®å½•å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ å¦‚æœå®¿ä¸»æœºç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º å¯ä»¥æŒ‚è½½å¤šä¸ªæ•°æ®å· æ¡ˆä¾‹ï¼š 1234#æ‹‰å–centosé•œåƒdocker pull centos:7#å®‰è£…å¯åŠ¨å®¹å™¨å¹¶æŒ‚è½½docker run -di --name=c1 -v /root/host_data1:/root/c1_data centos:7 /bin/bash ï¼ˆ2ï¼‰æŸ¥çœ‹å®¹å™¨å·²æŒ‚è½½çš„æ•°æ®é›†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å®¹å™¨ä¸­æŒ‚è½½çš„æ•°æ®å· 1docker inspect å®¹å™¨åç§°ï¼ˆå®¹å™¨IDï¼‰ ï¼ˆ3ï¼‰1ä¸ªå®¹å™¨æŒ‚è½½å¤šä¸ªæ•°æ®å·æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼ŒæŒ‚è½½å¤šä¸ªæ•°æ®å· 1docker run -di --name=c1 -v /root/host_data1:/root/c1_data1 -v /root/host_data2:/root/c1_data2 centos:7 /bin/bash ï¼ˆ4ï¼‰å¤šä¸ªå®¹å™¨æŒ‚è½½ä¸€ä¸ªæ•°æ®å·å¤šä¸ªå®¹å™¨æŒ‚è½½1ä¸ªæ•°æ®å·ï¼Œå®ç°æ•°æ®å…±äº« 12docker run -di --name=c2 -v /root/host_data_common:/root/c2_data centos:7docker run -di --name=c3 -v /root/host_data_common:/root/c3_data centos:7 å¤šä¸ªå®¹å™¨æŒ‚è½½1ä¸ªå®¹å™¨(è¿™ä¸ªå®¹å™¨æŒ‚è½½1ä¸ªæ•°æ®å·) 12345##åˆ›å»ºå¯åŠ¨c3æ•°æ®å·å®¹å™¨ï¼Œä½¿ç”¨ â€“v å‚æ•° è®¾ç½®æ•°æ®å·docker run -di --name=c3 -v /root/host_data_common:/root/c3_data centos:7 /bin/bash##åˆ›å»ºå¯åŠ¨ c1 c2 å®¹å™¨ï¼Œä½¿ç”¨ â€“-volumes-from å‚æ•° è®¾ç½®æ•°æ®å·docker run -di --name=c1 --volumes-from c3 centos:7 /bin/bashdocker run -di --name=c2 --volumes-from c3 centos:7 /bin/bash äº”ã€åœ¨dockerä¸­éƒ¨ç½²è½¯ä»¶5.1 MySQLéƒ¨ç½²5.1.1 å®ç°æ­¥éª¤ æœç´¢MySQLé•œåƒ æ‹‰å–MySQLé•œåƒ åˆ›å»ºå®¹å™¨ã€è®¾ç½®ç«¯å£æ˜ å°„ã€è®¾ç½®æ•°æ®å· è¿›å…¥å®¹å™¨æ“ä½œmysql ä½¿ç”¨Navicatè¿æ¥MySQL 5.1.2 å®ç°è¿‡ç¨‹ æœç´¢mysqlé•œåƒ 1docker search mysql æ‹‰å–mysqlé•œåƒ 1docker pull mysql:5.7 åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„ã€ç›®å½•æ˜ å°„ 1docker run -di --name=mysql -p 3307:3306 -v /root/mysql/logs:/logs -v /root/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7 å‚æ•°è¯´æ˜ï¼š -p 3307:3306ï¼šå°†å®¹å™¨çš„ 3306 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 3307 ç«¯å£ã€‚ -v &#x2F;root&#x2F;mysql&#x2F;logs:&#x2F;logsï¼šå°†ä¸»æœºç›®å½•(&#x2F;root&#x2F;mysql)ä¸‹çš„ logs ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„&#x2F;logsã€‚æ—¥å¿—ç›®å½• -v &#x2F;root&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql ï¼šå°†å®¿ä¸»æœºç›®å½•(&#x2F;root&#x2F;mysql)ä¸‹çš„dataç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ &#x2F;var&#x2F;lib&#x2F;mysql ã€‚æ•°æ®ç›®å½• **-e MYSQL_ROOT_PASSWORD&#x3D;123456ï¼š**åˆå§‹åŒ– root ç”¨æˆ·çš„å¯†ç ã€‚ è¿›å…¥å®¹å™¨ï¼Œæ“ä½œmysql 1docker exec â€“it c_mysql /bin/bash ä½¿ç”¨Navicatè¿æ¥å®¹å™¨ä¸­çš„mysql å› ä¸ºæˆ‘ä»¬åšäº†ç«¯å£æ˜ å°„ï¼Œæ‰€ä»¥è¿æ¥çš„æ˜¯192.168.200.128:3307 5.2 Tomcatéƒ¨ç½²5.2.1 å®ç°æ­¥éª¤ æœç´¢Tomcaté•œåƒ æ‹‰å–Tomcaté•œåƒ åˆ›å»ºå®¹å™¨ã€è®¾ç½®ç«¯å£æ˜ å°„ã€è®¾ç½®æ•°æ®å· å‘Tomcatä¸­éƒ¨ç½²æœåŠ¡ ä½¿ç”¨å¤–éƒ¨æœºå™¨è®¿é—®Tomcatï¼Œæµ‹è¯•éƒ¨ç½²æœåŠ¡ 5.2.2 å®ç°è¿‡ç¨‹ æœç´¢tomcaté•œåƒ 1docker search tomcat æ‹‰å–tomcaté•œåƒ 1docker pull tomcat:8-jdk8 åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„ã€ç›®å½•æ˜ å°„ 1docker run -di --name=c_tomcat -p 8080:8080 -v /root/tomcat/webapps:/usr/local/tomcat/webapps tomcat:8-jdk8 å‚æ•°è¯´æ˜ï¼š **-p 8080:8080ï¼š**å°†å®¹å™¨çš„8080ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„8080ç«¯å£ **-v &#x2F;root&#x2F;tomcat&#x2F;webapps:&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webappsï¼š**å°†ä¸»æœºç›®å½•(&#x2F;root&#x2F;tomcat&#x2F;webapps)æŒ‚è½½åˆ°å®¹å™¨çš„webapps å‘Tomcatä¸­éƒ¨ç½²æœåŠ¡ï¼Œä½¿ç”¨FinalShellæ–‡ä»¶ä¸Šä¼  ä½¿ç”¨å¤–éƒ¨æœºå™¨è®¿é—®Tomcatï¼Œæµ‹è¯•éƒ¨ç½²æœåŠ¡ 5.3 Nginxéƒ¨ç½²5.2.1 å®ç°æ­¥éª¤ æœç´¢Nginxé•œåƒ 1docker search Nginx æ‹‰å–Nginxé•œåƒ 1docker run -di --name=mynginx -p 80:80 nginx æµ‹è¯•è®¿é—®ï¼šhttp://192.168.200.128:80 5.4 Rediséƒ¨ç½²5.2.1 å®ç°æ­¥éª¤ æœç´¢Redisé•œåƒ æ‹‰å–Redisé•œåƒ åˆ›å»ºå®¹å™¨ã€è®¾ç½®ç«¯å£æ˜ å°„ ä½¿ç”¨å¤–éƒ¨æœºå™¨è¿æ¥Redisï¼Œæµ‹è¯• 5.2.2 å®ç°è¿‡ç¨‹ æœç´¢redisé•œåƒ 1docker search redis æ‹‰å–redisé•œåƒ 1docker pull redis åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„ 1docker run -id --name=c_redis -p 6379:6379 redis ä½¿ç”¨å¤–éƒ¨æœºå™¨è¿æ¥redisï¼Œæµ‹è¯• å…­ã€å¤‡ä»½ä¸è¿ç§»åº”ç”¨åœºæ™¯ï¼š â€‹ å¼€å‘ç¯å¢ƒDockerï¼Œåœ¨Dockerä¸­å®‰è£…å¾ˆå¤šçš„å®¹å™¨ï¼Œè¿›è¡Œå¯¹åº”çš„é…ç½®ï¼Œå°†Dockerä¸­çš„è¿è¡Œçš„å®¹å™¨æŒä¹…åŒ–ä¸ºé•œåƒï¼Œå°†å¯¹åº”çš„é•œåƒå®‰è£…åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚ å°†å¼€å‘ç¯å¢ƒä¸‹çš„Dockerä¸­å¯¹åº”çš„å®¹å™¨æŒä¹…åŒ–ä¸ºé•œåƒ å°†é•œåƒä¿å­˜ä¸ºä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå‘é€åˆ°ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨ä¸­ ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦å°†å‹ç¼©åŒ…â€“&gt;é•œåƒâ€“&gt;å®¹å™¨ 6.1 å®¹å™¨ä¿å­˜ä¸ºé•œåƒæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ 1234docker commit &#123;æ­£åœ¨è¿è¡Œå®¹å™¨åç§°/å®¹å™¨ID&#125; &#123;é•œåƒåç§°&#125;:&#123;é•œåƒæ ‡ç­¾&#125; &#123;ImageName&#125; : &#123;Tag&#125;# ä¾‹å¦‚docker commit dbc261edcdff redis:version_lagou_1.0.0 é•œåƒæ ‡ç­¾å¦‚æœä¸å†™é»˜è®¤ä¸ºlatest 6.2 é•œåƒå¤‡ä»½æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†é•œåƒä¿å­˜ä¸ºtar æ–‡ä»¶ 12345docker save -o &#123;å‹ç¼©åŒ…å­˜æ”¾è·¯å¾„&#125; &#123;é•œåƒåç§°/é•œåƒID&#125;# ä¸¾ä¾‹docker save -o redis.tar redis:version_lagou_1.0.0 #å‹ç¼©åŒ…åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šè¿˜åŸä¸ºä¸€ä¸ª imageï¼Œè¿˜åŸä¹‹åçš„nameå’Œtag# -o :è¾“å‡ºåˆ°çš„æ–‡ä»¶ 6.3 é•œåƒæ¢å¤ä¸è¿ç§»é¦–å…ˆæˆ‘ä»¬å…ˆåˆ é™¤æ‰c_tomcat_baké•œåƒ ç„¶åæ‰§è¡Œæ­¤å‘½ä»¤è¿›è¡Œæ¢å¤ 1234docker load -i &#123;å¤‡ä»½çš„é•œåƒæ–‡ä»¶&#125;# ä¸¾ä¾‹docker load -i redis.tar# -i :æŒ‡å®šå¯¼å…¥çš„æ–‡ä»¶ æ‰§è¡Œåå†æ¬¡æŸ¥çœ‹é•œåƒï¼Œå¯ä»¥çœ‹åˆ°é•œåƒå·²ç»æ¢å¤ï¼Œå¯ä»¥å†æ¬¡è¿è¡Œæµ‹è¯• 1docker run -di --name=mytomcat -p 8081:8080 -v /root/tomcat/webapps/:/usr/local/tomcat/webapps redis:version_lagou_1.0.0","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Drone+Githubæ­å»ºè‡ªåŠ¨åŒ–æµæ°´çº¿","slug":"Drone-Githubæ­å»ºè‡ªåŠ¨åŒ–æµæ°´çº¿","date":"2021-07-30T02:31:53.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2021/07/30/Drone-Githubæ­å»ºè‡ªåŠ¨åŒ–æµæ°´çº¿/","link":"","permalink":"http://yournotes.cn/2021/07/30/Drone-Github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%81%E6%B0%B4%E7%BA%BF/","excerpt":"","text":"ä¸€ã€å‰è¨€ æœ€è¿‘å¼€å§‹å†™ä¸€ä¸ªè‡ªç”¨ç½‘ç›˜çš„å°é¡¹ç›®ï¼Œå‡†å¤‡ä¼šä¸€ç›´å»åšç»´æŠ¤æ›´æ–°ï¼Œæ­£å¥½å»äº†è§£ä¸‹è¿™ä¸ªåšCI&#x2F;CDçš„æ•´ä¸ªæµç¨‹ï¼Œéšä¾¿è®°å½•ä¸‹ç¬¬ä¸€æ¬¡æ­å»ºè¿‡ç¨‹ äºŒã€æŸ¥çœ‹å®˜ç½‘ç¬¬ä¸€æ­¥çš„è¯è¿˜æ˜¯å…ˆçœ‹çœ‹Droneçš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ°å€ï¼šhttps://docs.drone.io/ åœ¨ä¸Šé¢çœ‹çš„åˆ°æœ‰ç»“åˆGithubçš„å®‰è£…å‘å¯¼ï¼Œæ‰“å¼€å°±å¯ä»¥æŒ‰ç…§ä¸Šé¢è¿›è¡Œã€‚ ä¸‰ã€å·¥å…·å‡†å¤‡é¦–å…ˆæ˜¯éœ€è¦å®‰è£…dockerï¼Œæˆ‘è¿™é‡Œä¼šä½¿ç”¨docker-composeè¿›è¡Œç¼–æ’ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…docker-compose æˆ‘è¿™è¾¹ç¯å¢ƒæ˜¯CentOS7.6 3.1 å‡†å¤‡docker12# æŸ¥çœ‹ç”µè„‘ä¸Šå·²å®‰è£…çš„dockeryum list installed | grep docker æˆ‘è¿™è¾¹å·²ç»å®‰è£…äº†ï¼Œæ²¡å®‰è£…ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œå®‰è£… 1234# å®‰è£…yum -y install docker# æŸ¥çœ‹ç‰ˆæœ¬docker -v å…¶ä»–å…³äºdockerçš„äº†è§£ï¼Œå¯ä»¥çœ‹è¿™ç¯‡ https://yournotes.cn/2021/08/01/Docker%E5%9F%BA%E7%A1%80/ 3.2 å‡†å¤‡docker-composeè¿™é‡Œåªä»‹ç»ä¸€ä¸ªå®‰è£…æ–¹å¼ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæ–¹ä¾¿å¿«æ·çš„ã€‚ç›´æ¥æœ¬åœ°åˆ°githubé€‰æ‹©docker-composeç‰ˆæœ¬ åœ°å€ï¼šhttps://github.com/docker/compose/releases 1sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose é€‰æ‹©ç‰ˆæœ¬ä¿®æ”¹æŒ‡ä»¤é‡Œçš„ç‰ˆæœ¬å·å³å¯ï¼ˆ1.29.2ï¼‰ï¼Œä¹Ÿå¯ç›´æ¥ä¸‹è½½ä¼ åˆ°æœåŠ¡å™¨ 12# èµ‹äºˆæ‰§è¡Œæƒé™sudo chmod +x /usr/local/bin/docker-compose å››ã€ç¯å¢ƒå‡†å¤‡ä½¿ç”¨docker-composeå®‰è£…Droneä¹‹å‰ï¼Œå…ˆå‡†å¤‡DroneæœåŠ¡çš„åŸŸåè¿™ä¸ªéœ€è¦åœ¨é…ç½®Githubè®¤è¯çš„æ—¶å€™å†™å…¥ï¼Œåªæœ‰è¿™æ ·åœ¨æ­å»ºå¥½ååŸŸåè®¿é—®Droneæ‰ä¼šè§¦å‘Githubè®¤è¯ã€‚ 4.1 é…ç½®DroneæœåŠ¡åŸŸå æˆ‘è¿™è¾¹å°±æ·»åŠ ä¸ªdrone.yournotes.cnçš„è§£æã€‚ 4.2 é…ç½®Githubè®¤è¯åœ¨è®¾ç½®é‡Œé¢æœ‰ä¸ªå¼€å‘è€…è®¾ç½®é€‰ä¸­ï¼Œ åœ¨OAuth Appså½“ä¸­å³å¯é…ç½®è®¤è¯åº”ç”¨ï¼Œæˆ‘è¿™è¾¹å·²ç»æ·»åŠ äº† æ‰“å¼€New OAuth Appé‡Œé¢å°±å‡ æ ·ä¸œè¥¿ æ³¨å†Œä¹‹åä¼šæœ‰Client IDä¸Client secretsï¼Œå¤åˆ¶ä¿å­˜ä¸‹æ¥ä¹‹ååœ¨é…ç½®Droneä¼šç”¨ 4.3 é…ç½®RPCå¯†é’¥è¿™ä¸ªæ˜¯Droneçš„runnerä¸serveräº¤äº’éœ€è¦é…ç½®çš„ï¼Œé€šè¿‡openssl rand -hex 16æŒ‡ä»¤ç”Ÿæˆå¯†é’¥ï¼Œåœ¨ä¹‹åä¸¤è¾¹é…ç½®ä¸€æ ·å³å¯ äº”ã€å¼€å§‹å®‰è£…å…ˆæˆªå–æ–‡æ¡£ä¸Šçš„å®‰è£…æ–¹å¼ï¼Œå¦‚ä¸‹å›¾ã€‚å®ƒæ˜¯ä½¿ç”¨dockerè¿›è¡Œæ‹‰å–é•œåƒç„¶åå¸¦ç¯å¢ƒå˜é‡å¯åŠ¨ã€‚ä¸‹é¢æˆ‘è¿™è¾¹å°±ç”¨docker-composeè¿›è¡Œç»Ÿä¸€ç¼–æ’ã€‚ Serverå®‰è£… Runnerå®‰è£… æŒ‰ç…§æ–‡æ¡£ä¸Šè¿™æ ·ä¹Ÿå¯ä»¥ï¼Œåˆ†åˆ«ç”¨dockerå¯åŠ¨é…ç½®å¥½æœåŠ¡åœ°å€ã€å¯†é’¥ç­‰å¿…å¤‡çš„å‚æ•°ã€‚ æˆ‘è¿™è¾¹ä½¿ç”¨docker-composeï¼Œä¸‹é¢åˆ†åˆ«æ˜¯.envæ–‡ä»¶ä¸docker-compose.ymlæ–‡ä»¶ã€‚æŠŠé‡Œé¢è¦é…ç½®çš„å•ç‹¬æ‹¿å‡ºæ¥åšäº†ä¸ªç¯å¢ƒå˜é‡çš„æ–‡ä»¶.env å°†.envæ–‡ä»¶é…ç½®å¥½ï¼Œå†æŠŠä¸¤ä¸ªæ–‡ä»¶ä¼ å…¥æœåŠ¡å™¨åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ æ‰§è¡Œdocker-compose up -d å¯åŠ¨å³å¯ 12345678# .envDRONE_GITHUB_CLIENT_ID=ä½ çš„github Client_IDDRONE_GITHUB_CLIENT_SECRET=ä½ çš„github Client secrets DRONE_RPC_SECRET=ä½ ç”Ÿæˆçš„RPCå¯†é’¥DRONE_SERVER_HOST=ä½ çš„DroneæœåŠ¡åŸŸåDRONE_SERVER_PROTO=http ï¼ˆå¯é€‰httpsï¼‰ DRONE_RPC_PROTO=http ï¼ˆå¯é€‰httpsï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758# docker-compose.ymlversion: &#x27;2&#x27;services: drone-server: image: drone/drone:latest container_name: drone-server networks: - dronenet # è®©drone-serverå’Œdrone-agentå¤„äºä¸€ä¸ªç½‘ç»œä¸­ï¼Œæ–¹ä¾¿è¿›è¡ŒRPCé€šä¿¡ ports: - &#x27;10081:80&#x27; # Webç®¡ç†é¢æ¿çš„å…¥å£ PROTO=http æ—¶ä½¿ç”¨è¯¥ç«¯å£ - &#x27;10082:443&#x27; # Webç®¡ç†é¢æ¿çš„å…¥å£ PROTO=https æ—¶ä½¿ç”¨è¯¥ç«¯å£ - &#x27;10083:9000&#x27; # RPCæœåŠ¡ç«¯å£ volumes: - /var/run/docker.sock:/var/run/docker.sock # docker.sock [1] - /var/data/drone/:/var/lib/drone # droneæ•°æ®å­˜æ”¾è·¯å¾„ environment: - DRONE_AGENTS_ENABLED=true # ä½¿ç”¨Runner # githubç›¸å…³ - DRONE_GITHUB_SERVER=https://github.com # githubçš„åœ°å€ - DRONE_GITHUB_CLIENT_ID=$&#123;DRONE_GITHUB_CLIENT_ID&#125; # ä¸Šä¸€æ­¥è·å¾—çš„ClientID - DRONE_GITHUB_CLIENT_SECRET=$&#123;DRONE_GITHUB_CLIENT_SECRET&#125; # ä¸Šä¸€æ­¥è·å¾—çš„ClientSecret # ä¸Šé¢ä¸‰ä¸ªåŠä¸‹é¢è¿™ä¸‰ä¸ªæ˜¯å¿…å¤‡çš„ - DRONE_RPC_SECRET=$&#123;DRONE_RPC_SECRET&#125; # RPCç§˜é’¥ [2] - DRONE_SERVER_HOST=$&#123;DRONE_SERVER_HOST&#125; # RPCåŸŸå(åœ¨ä¸€ä¸ªå®ä¾‹ä¸Šå¯ä»¥ä¸ç”¨) - DRONE_SERVER_PROTO=$&#123;DRONE_SERVER_PROTO&#125; # git webhookä½¿ç”¨çš„åè®®(æˆ‘å»ºè®®http) - DRONE_OPEN=true # å¼€å‘drone - DRONE_DATABASE_DATASOURCE=/var/lib/drone/drone.sqlite # æ•°æ®åº“æ–‡ä»¶ - DRONE_DATABASE_DRIVER=sqlite3 # æ•°æ®åº“é©±åŠ¨ï¼Œæˆ‘è¿™é‡Œé€‰çš„sqlite - DRONE_DEBUG=true # è°ƒè¯•ç›¸å…³ï¼Œéƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_DEBUG=true # è°ƒè¯•ç›¸å…³ï¼Œéƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_TRACE=true # è°ƒè¯•ç›¸å…³ï¼Œéƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_USER_CREATE=username:TheWindsï¼Œadmin:true # åˆå§‹ç®¡ç†å‘˜ç”¨æˆ· - TZ=Asia/Shanghai # æ—¶åŒº restart: always drone-agent: image: drone/agent:latest container_name: drone-agent networks: - dronenet # è®©drone-serverå’Œdrone-agentå¤„äºä¸€ä¸ªç½‘ç»œä¸­ï¼Œæ–¹ä¾¿è¿›è¡ŒRPCé€šä¿¡ depends_on: - drone-server volumes: - /var/run/docker.sock:/var/run/docker.sock # docker.sock [1] environment: - DRONE_RPC_SERVER=http://drone-server # RPCæœåŠ¡åœ°å€ - DRONE_RPC_SECRET=$&#123;DRONE_RPC_SECRET&#125; # RPCç§˜é’¥ - DRONE_RPC_PROTO=$&#123;DRONE_RPC_PROTO&#125; # RPCåè®®(http || https) - DRONE_RUNNER_CAPACITY=2 # æœ€å¤§å¹¶å‘æ‰§è¡Œçš„ pipeline æ•° - DRONE_DEBUG=true # è°ƒè¯•ç›¸å…³ï¼Œéƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_DEBUG=true # è°ƒè¯•ç›¸å…³ï¼Œéƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_TRACE=true # è°ƒè¯•ç›¸å…³ï¼Œéƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - TZ=Asia/Shanghai restart: alwaysnetworks: dronenet: # è®©drone-serverå’Œdrone-agentå¤„äºä¸€ä¸ªç½‘ç»œä¸­ï¼Œæ–¹ä¾¿è¿›è¡ŒRPCé€šä¿¡ å…­ã€ç®€å•æµ‹è¯• æŒ‰ç…§ä¸Šé¢æˆåŠŸå¯åŠ¨Droneï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è®¿é—®çœ‹çœ‹äº†ã€‚æˆ‘è¿™è¾¹é…ç½®çš„httpæ˜¯10081ç«¯å£ã€‚æ‰€ä»¥å¾—åŠ ä¸Šç«¯å£å·ï¼Œæ³¨æ„é˜¿é‡Œäº‘ä¸Šçš„å®‰å…¨ç»„ä¹Ÿè¦æŠŠè¿™äº›ç«¯å£æ”¾å¼€ã€‚ é¦–æ¬¡è®¿é—®åº”è¯¥æ˜¯å¦‚ä¸Šå›¾ï¼Œå†é€‰ä¸­ç»§ç»­å°±å¯è¿›è¡ŒGitHubè®¤è¯ï¼ŒGitHubè®¤è¯åä¼šè¿”å›åˆ°ä¹‹å‰åœ¨GitHubä¸Šå¡«å†™çš„åœ°å€ å› ä¸ºæˆ‘è¿™è¾¹æ˜¯10081ç«¯å£ï¼Œå› æ­¤è¿™é‡Œå¾—å†™æˆ drone.yournotes.cn:10081/login ï¼Œå¦åˆ™å°±æ‰¾ä¸åˆ°äº† è¿™é‡Œé€‰ä¸€ä¸ªé¡¹ç›®å¼€å¯è‡ªåŠ¨æµæ°´çº¿ï¼Œç‚¹å‡»ä¸€ä¸ªé¡¹ç›®ï¼Œè¿›å…¥å¦‚ä¸‹é¡µé¢ç‚¹ä¿å­˜å³å¯ï¼Œå®ƒå°†åœ¨codeä»“åº“é…ç½®webhookï¼Œå½“ä»£ç ä»“åº“æ›´æ–°æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ.drone.ymlä¸‹çš„æŒ‡ä»¤ ä¿å­˜åï¼Œæˆ‘ä»¬åœ¨ä»£ç ä»“åº“æ·»åŠ ä¸€ä¸ª.drone.ymlçš„æ–‡ä»¶ï¼Œåšä¸€ä¸ªç®€å•çš„åœ¨æ§åˆ¶å°æ‰“å°hello worldçš„æ“ä½œ stepsä¸‹å°±æ˜¯å®‰æ’çš„æ­¥éª¤ï¼Œä½¿ç”¨çš„é•œåƒæ˜¯alpineï¼ˆä¸€ä¸ªè½»é‡çš„Linuxï¼‰ï¼Œä½¿ç”¨è¿™ä¸ªlinuxæ‰§è¡Œäº†echoæŒ‡ä»¤ã€‚ ä¹‹åæ˜¯åšè‡ªåŠ¨åŒ–çš„æ‰“åŒ…éƒ¨ç½²ï¼Œå› æ­¤æ­¥éª¤ä¼šæœ‰å¤šä¸ªï¼Œä¹Ÿä¼šç”¨åˆ°mavené•œåƒç­‰ï¼Œè¿™é‡Œåªæ˜¯ç®€å•æµ‹è¯•ä¸‹ï¼Œæ˜¯å¦ä¼šæ‰§è¡Œå®‰æ’çš„æŒ‡ä»¤ã€‚ ä¸å‡ºæ„å¤–çš„è¯æˆ‘ä»¬æŠŠæ–‡ä»¶æäº¤ï¼Œdroneæµæ°´çº¿å°±å¼€å§‹è‡ªåŠ¨è¿›è¡Œäº† ç¬¬ä¸€æ­¥å°±æ˜¯cloneä»£ç ï¼Œç¬¬äºŒæ­¥å°±æ˜¯åœ¨stepsçš„ç¬¬ä¸€ä¸ªæ­¥éª¤greetingï¼ˆalpineæ‰§è¡Œä¸¤ä¸ªechoï¼‰","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"æŠ˜è…¾","slug":"æ—¥å¸¸/æŠ˜è…¾","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E6%8A%98%E8%85%BE/"}],"tags":[{"name":"æ—¥å¸¸æŠ˜è…¾","slug":"æ—¥å¸¸æŠ˜è…¾","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E6%8A%98%E8%85%BE/"}]},{"title":"Spring Cloudå¾®æœåŠ¡è¯¦è§£","slug":"Spring-Cloudå¾®æœåŠ¡è¯¦è§£","date":"2021-07-22T03:58:17.000Z","updated":"2025-04-17T08:34:52.017Z","comments":true,"path":"2021/07/22/Spring-Cloudå¾®æœåŠ¡è¯¦è§£/","link":"","permalink":"http://yournotes.cn/2021/07/22/Spring-Cloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"è¶…é•¿è­¦å‘Šï¼ï¼ï¼å–„ç”¨ç›®å½•ï¼ï¼ï¼ [TOC] ä¸€ã€å¾®æœåŠ¡æ¶æ„1.1 äº’è”ç½‘åº”ç”¨æ¶æ„æ¼”è¿›éšç€äº’è”â½¹çš„å‘å±•ï¼Œâ½¤æˆ·ç¾¤ä½“é€æ¸æ‰©å¤§ï¼Œâ½¹ç«™çš„æµé‡æˆå€å¢â»“ï¼Œå¸¸è§„çš„å•ä½“æ¶æ„å·²â½†æ³•æ»¡â¾œè¯·æ±‚å‹â¼’å’Œä¸šåŠ¡çš„å¿«é€Ÿè¿­ä»£ï¼Œæ¶æ„çš„å˜åŒ–åŠ¿åœ¨å¿…â¾ã€‚ä¸‹â¾¯æˆ‘ä»¬å°±ä»¥æ‹‰å‹¾ç½‘çš„æ¶æ„æ¼”è¿›ä¸ºä¾‹ï¼Œä»æœ€å¼€å§‹çš„å•ä½“æ¶æ„åˆ†æï¼Œâ¼€æ­¥æ­¥çš„åˆ°ç°åœ¨çš„å¾®æœåŠ¡æ¶æ„ã€‚ æ·˜å®ï¼šLAMPï¼ŒLinuxã€Apacheã€MySQLã€PHP 1.1.1 å•ä½“åº”ç”¨æ¶æ„åœ¨è¯â½£ä¹‹åˆï¼Œæ‹‰å‹¾çš„â½¤æˆ·é‡ã€æ•°æ®é‡è§„æ¨¡éƒ½â½è¾ƒâ¼©ï¼Œé¡¹ç›®æ‰€æœ‰çš„åŠŸèƒ½æ¨¡å—éƒ½æ”¾åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸­ç¼–ç ã€ç¼–è¯‘ã€æ‰“åŒ…å¹¶ä¸”éƒ¨ç½²åœ¨ä¸€ä¸ªTomcatå®¹å™¨ä¸­çš„æ¶æ„æ¨¡å¼å°±æ˜¯å•ä½“åº”ç”¨æ¶æ„ï¼Œè¿™æ ·çš„æ¶æ„æ—¢ç®€å•å® â½¤ã€ä¾¿äºç»´æŠ¤ï¼Œæˆæœ¬â¼œä½ï¼Œæˆä¸ºäº†é‚£ä¸ªæ—¶ä»£çš„ä¸»æµæ¶æ„â½…å¼ã€‚ ä¼˜ç‚¹ï¼š é«˜æ•ˆå¼€å‘ï¼šé¡¹â½¬å‰æœŸå¼€å‘èŠ‚å¥å¿«ï¼Œå›¢é˜Ÿæˆå‘˜å°‘çš„æ—¶å€™èƒ½å¤Ÿå¿«é€Ÿè¿­ä»£ æ¶æ„ç®€å•ï¼šMVCæ¶æ„ï¼Œåªéœ€è¦å€ŸåŠ©IDEå¼€å‘ã€è°ƒè¯•å³å¯ æ˜“äºæµ‹è¯•ï¼šåªéœ€è¦é€šè¿‡å•å…ƒæµ‹è¯•æˆ–è€…æµè§ˆå™¨å®Œæˆ æ˜“äºéƒ¨ç½²ï¼šæ‰“åŒ…æˆå•â¼€å¯æ‰§â¾çš„jaræˆ–è€…æ‰“æˆwaråŒ…æ”¾åˆ°å®¹å™¨å†…å¯åŠ¨ å•ä½“æ¶æ„çš„åº”ç”¨æ¯”è¾ƒå®¹æ˜“éƒ¨ç½²ã€æµ‹è¯•ï¼Œ åœ¨é¡¹ç›®çš„åˆæœŸï¼Œå•ä½“åº”ç”¨å¯ä»¥å¾ˆå¥½åœ°è¿è¡Œã€‚ç„¶è€Œï¼Œéšç€éœ€æ±‚çš„ä¸æ–­å¢åŠ ï¼Œ è¶Šæ¥è¶Šå¤šçš„äººåŠ å…¥å¼€å‘å›¢é˜Ÿï¼Œä»£ç åº“ä¹Ÿåœ¨é£é€Ÿåœ°è†¨èƒ€ã€‚æ…¢æ…¢åœ°ï¼Œå•ä½“åº”ç”¨å˜å¾—è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œå¯ç»´æŠ¤æ€§ã€çµæ´»æ€§é€æ¸é™ä½ï¼Œç»´æŠ¤æˆæœ¬è¶Šæ¥è¶Šé«˜ã€‚ ç¼ºç‚¹ï¼š å¯é æ€§å·®ï¼š æŸä¸ªåº”ç”¨Bugï¼Œä¾‹å¦‚æ­»å¾ªç¯ã€å†…å­˜æº¢å‡ºç­‰ï¼Œ å¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªåº”ç”¨çš„å´©æºƒ å¤æ‚æ€§é«˜ï¼š ä»¥ä¸€ä¸ªç™¾ä¸‡è¡Œçº§åˆ«çš„å•ä½“åº”ç”¨ä¸ºä¾‹ï¼Œæ•´ä¸ªé¡¹ç›®åŒ…å«çš„æ¨¡å—å¤šã€æ¨¡å—çš„è¾¹ç•Œæ¨¡ç³Šã€ ä¾èµ–å…³ç³»ä¸æ¸…æ™°ã€ ä»£ç è´¨é‡å‚å·®ä¸é½ã€ æ··ä¹±åœ°å †ç Œåœ¨ä¸€èµ·ã€‚ä½¿å¾—æ•´ä¸ªé¡¹ç›®éå¸¸å¤æ‚ã€‚ æ‰©å±•èƒ½åŠ›å—é™ï¼š å•ä½“åº”ç”¨åªèƒ½ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œæ‰©å±•ï¼Œæ— æ³•æ ¹æ®ä¸šåŠ¡æ¨¡å—çš„éœ€è¦è¿›è¡Œä¼¸ç¼©ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ä¸­æœ‰çš„æ¨¡å—æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œå®ƒéœ€è¦å¼ºåŠ²çš„CPUï¼› æœ‰çš„æ¨¡å—åˆ™æ˜¯IOå¯†é›†å‹çš„ï¼Œéœ€è¦æ›´å¤§çš„å†…å­˜ã€‚ ç”±äºè¿™äº›æ¨¡å—éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä¸å¾—ä¸åœ¨ç¡¬ä»¶çš„é€‰æ‹©ä¸Šåšå‡ºå¦¥åã€‚ ä¸šåŠ¡é‡ä¸Šæ¶¨ä¹‹åï¼Œå•ä½“åº”ç”¨æ¶æ„è¿›ä¸€æ­¥ä¸°å¯Œå˜åŒ–ï¼Œæ¯”å¦‚åº”ç”¨é›†ç¾¤éƒ¨ç½²ã€ä½¿ç”¨Nginxè¿›è¡Œè´Ÿè½½å‡è¡¡ã€å¢åŠ ç¼“å­˜æœåŠ¡å™¨ã€å¢åŠ æ–‡ä»¶æœåŠ¡å™¨ã€æ•°æ®åº“é›†ç¾¤å¹¶åšè¯»å†™åˆ†ç¦»ç­‰ï¼Œé€šè¿‡ä»¥ä¸Šæªæ–½å¢å¼ºåº”å¯¹é«˜å¹¶å‘çš„èƒ½åŠ›ã€åº”å¯¹ä¸€å®šçš„å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼Œä½†ä¾ç„¶å±äºå•ä½“åº”ç”¨æ¶æ„ã€‚ 1.1.2 å‚ç›´åº”ç”¨æ¶æ„ä¸ºäº†é¿å…ä¸Šâ¾¯æåˆ°çš„é‚£äº›é—®é¢˜ï¼Œå¼€å§‹åšæ¨¡å—çš„å‚ç›´åˆ’åˆ†ï¼Œåšå‚ç›´åˆ’åˆ†çš„åŸåˆ™æ˜¯åŸºäºç°æœ‰çš„ä¸šåŠ¡ç‰¹æ€§æ¥åšï¼Œæ ¸å¿ƒç›®æ ‡æ ‡ç¬¬â¼€ä¸ªæ˜¯ä¸ºäº†ä¸šåŠ¡ä¹‹é—´äº’ä¸å½±å“ï¼Œç¬¬â¼†ä¸ªæ˜¯åœ¨ç ”å‘å›¢é˜Ÿçš„å£®â¼¤åä¸ºäº†æâ¾¼æ•ˆç‡ï¼Œå‡å°‘ç»„ä»¶ä¹‹é—´çš„ä¾èµ–ã€‚ ä¼˜ç‚¹ï¼š ç³»ç»Ÿæ‹†åˆ†å®ç°äº†æµé‡åˆ†æ‹…ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜ å¯ä»¥é’ˆå¯¹ä¸åŒæ¨¡å—è¿›â¾ä¼˜åŒ– â½…ä¾¿â½”å¹³æ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®¹é”™ç‡æâ¾¼ ç³»ç»Ÿé—´ç›¸äº’ç‹¬â½´ï¼Œäº’ä¸å½±å“ï¼Œæ–°çš„ä¸šåŠ¡è¿­ä»£æ—¶æ›´åŠ â¾¼æ•ˆ ç¼ºç‚¹ï¼š æœåŠ¡ä¹‹é—´ç›¸äº’è°ƒâ½¤ï¼Œå¦‚æœæŸä¸ªæœåŠ¡çš„ç«¯â¼æˆ–è€…ipåœ°å€å‘â½£æ”¹å˜ï¼Œè°ƒâ½¤çš„ç³»ç»Ÿå¾—â¼¿åŠ¨æ”¹å˜ æ­å»ºé›†ç¾¤ä¹‹åï¼Œå®ç°è´Ÿè½½å‡è¡¡â½è¾ƒå¤æ‚ï¼Œå¦‚ï¼šå†…â½¹è´Ÿè½½ï¼Œåœ¨è¿ç§»æœºå™¨æ—¶ä¼šå½±å“è°ƒâ½¤â½…çš„è·¯ ç”±ï¼Œå¯¼è‡´çº¿ä¸Šæ•…éšœ æœåŠ¡ä¹‹é—´è°ƒâ½¤â½…å¼ä¸ç»Ÿâ¼€ï¼ŒåŸºäº httpclient ã€ webservice ï¼Œæ¥â¼åè®®ä¸ç»Ÿâ¼€ æœåŠ¡ç›‘æ§ä¸åˆ°ä½ï¼šé™¤äº†ä¾é ç«¯â¼ã€è¿›ç¨‹çš„ç›‘æ§ï¼Œè°ƒâ½¤çš„æˆåŠŸç‡ã€å¤±è´¥ç‡ã€æ€»è€—æ—¶ç­‰ç­‰è¿™äº›ç›‘ æ§æŒ‡æ ‡æ˜¯æ²¡æœ‰çš„ 1.1.3 SOAåº”ç”¨æ¶æ„â€‹ åœ¨åšäº†å‚ç›´åˆ’åˆ†ä»¥åï¼Œæ¨¡å—éšä¹‹å¢å¤šï¼Œç»´æŠ¤çš„æˆæœ¬åœ¨ä¹Ÿå˜â¾¼ï¼Œâ¼€äº›é€šâ½¤çš„ä¸šåŠ¡å’Œæ¨¡å—é‡å¤çš„è¶Šæ¥è¶Šå¤šï¼Œä¸ºäº†è§£å†³ä¸Šâ¾¯æåˆ°çš„æ¥â¼åè®®ä¸ç»Ÿâ¼€ã€æœåŠ¡â½†æ³•ç›‘æ§ã€æœåŠ¡çš„è´Ÿè½½å‡è¡¡ï¼Œå¼•â¼Šäº†é˜¿â¾¥å·´å·´å¼€æºçš„Dubbo ï¼Œâ¼€æ¬¾â¾¼æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æ¶ï¼Œå¯ä»¥å’ŒSpringæ¡†æ¶æ— ç¼é›†æˆã€‚å®ƒæä¾›äº†ä¸‰â¼¤æ ¸â¼¼èƒ½åŠ›ï¼šâ¾¯å‘æ¥â¼çš„è¿œç¨‹â½…æ³•è°ƒâ½¤ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡â¾ƒåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚ â€‹ SOA (Service-Oriented Architecture)ï¼Œå³é¢å‘æœåŠ¡çš„æ¶æ„ã€‚æ ¹æ®å®é™…ä¸šåŠ¡ï¼ŒæŠŠç³»ç»Ÿæ‹†åˆ†æˆåˆé€‚çš„ã€ç‹¬ç«‹éƒ¨ç½²çš„æ¨¡å—ï¼Œæ¨¡å—ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼ˆé€šè¿‡Webservice&#x2F;Dubboç­‰æŠ€æœ¯è¿›è¡Œé€šä¿¡ï¼‰ã€‚ â€‹ ä¼˜ç‚¹ï¼šåˆ†å¸ƒå¼ã€æ¾è€¦åˆã€æ‰©å±•çµæ´»ã€å¯é‡ç”¨ã€‚ â€‹ ç¼ºç‚¹ï¼šæœåŠ¡æŠ½å–ç²’åº¦è¾ƒå¤§ã€æœåŠ¡è°ƒç”¨æ–¹å’Œæä¾›æ–¹è€¦åˆåº¦è¾ƒé«˜ï¼ˆæ¥å£è€¦åˆåº¦ï¼‰ 1.1.4 å¾®æœåŠ¡åº”ç”¨æ¶æ„å¾®æœåŠ¡æ¶æ„å¯ä»¥è¯´æ˜¯SOAæ¶æ„çš„ä¸€ç§æ‹“å±•ï¼Œè¿™ç§æ¶æ„æ¨¡å¼ä¸‹å®ƒæ‹†åˆ†ç²’åº¦æ›´å°ã€æœåŠ¡æ›´ç‹¬ç«‹ã€‚æŠŠåº”ç”¨æ‹†åˆ†æˆä¸ºä¸€ä¸ªä¸ªå¾®å°çš„æœåŠ¡ï¼Œä¸åŒçš„æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¼€å‘è¯­è¨€å’Œå­˜å‚¨ï¼ŒæœåŠ¡ä¹‹é—´å¾€å¾€é€šè¿‡Restfulç­‰è½»é‡çº§é€šä¿¡ã€‚å¾®æœåŠ¡æ¶æ„å…³é”®åœ¨äºå¾®å°ã€ç‹¬ç«‹ã€è½»é‡çº§é€šä¿¡ã€‚ å¾®æœåŠ¡æ˜¯åœ¨ SOA ä¸Šåšçš„å‡åç²’åº¦æ›´åŠ ç»†è‡´ï¼Œå¾®æœåŠ¡æ¶æ„å¼ºè°ƒçš„â¼€ä¸ªé‡ç‚¹æ˜¯ä¸šåŠ¡éœ€è¦å½»åº•çš„ç»„ä»¶åŒ–å’ŒæœåŠ¡åŒ– å¾®æœåŠ¡æ¶æ„å’ŒSOAæ¶æ„ç›¸ä¼¼åˆä¸åŒ â€‹ å¾®æœåŠ¡æ¶æ„å’ŒSOAæ¶æ„å¾ˆæ˜æ˜¾çš„ä¸€ä¸ªåŒºåˆ«å°±æ˜¯æœåŠ¡æ‹†åˆ†ç²’åº¦çš„ä¸åŒï¼Œä½†æ˜¯å¯¹äºæ‹‰å‹¾çš„æ¶æ„å‘å±•æ¥è¯´ï¼Œæˆ‘ä»¬æ‰€çœ‹åˆ°çš„SOAé˜¶æ®µå…¶å®æœåŠ¡æ‹†åˆ†ç²’åº¦ç›¸å¯¹æ¥è¯´å·²ç»æ¯”è¾ƒç»†äº†ï¼ˆè¶…å‰å“¦ï¼ï¼‰ï¼Œæ‰€ä»¥ä¸Šè¿°æ‹‰å‹¾SOAåˆ°æ‹‰å‹¾å¾®æœåŠ¡ï¼Œä»æœåŠ¡æ‹†åˆ†ä¸Šæ¥è¯´å˜åŒ–å¹¶ä¸å¤§ï¼Œåªæ˜¯å¼•å…¥äº†ç›¸å¯¹å®Œæ•´çš„æ–°ä¸€ä»£Spring Cloudå¾®æœåŠ¡æŠ€æœ¯ã€‚è‡ªç„¶ï¼Œä¸Šè¿°æˆ‘ä»¬çœ‹åˆ°çš„éƒ½æ˜¯æ‹‰å‹¾æ¶æ„æ¼”å˜çš„é˜¶æ®µç»“æœï¼Œæ¯ä¸€ä¸ªé˜¶æ®µå…¶å®éƒ½ç»å†äº†å¾ˆå¤šå˜åŒ–ï¼Œæ‹‰å‹¾çš„æœåŠ¡æ‹†åˆ†å…¶å®ä¹Ÿæ˜¯èµ°è¿‡äº†ä»ç²—åˆ°ç»†ï¼Œå¹¶éç»å¯¹çš„ä¸€æ­¥åˆ°ä½ã€‚ ä¸¾ä¸ªæ‹‰å‹¾æ¡ˆä¾‹æ¥è¯´æ˜SOAå’Œå¾®æœåŠ¡æ‹†åˆ†ç²’åº¦ä¸åŒ â€‹ åœ¨SOAæ¶æ„çš„åˆæœŸï¼Œâ€œç®€å†æŠ•é€’æ¨¡å—â€å’Œâ€œäººæ‰æœç´¢æ¨¡å—â€éƒ½æœ‰ç®€å†å†…å®¹å±•ç¤ºçš„éœ€æ±‚ï¼Œåªä¸è¿‡è¯´å¯èƒ½ç•¥æœ‰åŒºåˆ«ï¼Œä¸€å¼€å§‹åœ¨ä¸¤ä¸ªæ¨¡å—ä¸­å„ç»´æŠ¤äº†ä¸€å¥—ç®€å†æŸ¥è¯¢å’Œå±•ç¤ºçš„ä»£ç ï¼›åæœŸæˆ‘ä»¬å°†æœåŠ¡æ›´ç»†ç²’åº¦æ‹†åˆ†ï¼Œæ‹†åˆ†å‡ºç®€å†åŸºç¡€æœåŠ¡ï¼Œé‚£ä¹ˆä¸åŒæ¨¡å—è°ƒç”¨è¿™ä¸ªåŸºç¡€æœåŠ¡å³å¯ã€‚ 1.2 å¾®æœåŠ¡æ¶æ„ä½“ç°çš„æ€æƒ³åŠä¼˜ç¼ºç‚¹â€‹ å¾®æœåŠ¡æ¶æ„è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯**â€œå¾®â€**ï¼Œæ‹†åˆ†çš„ç²’åº¦ç›¸å¯¹æ¯”è¾ƒå°ï¼Œè¿™æ ·çš„è¯å•ä¸€èŒè´£ã€å¼€å‘çš„è€¦åˆåº¦å°±ä¼šé™ä½ã€å¾®å°çš„åŠŸèƒ½å¯ä»¥ç‹¬ç«‹éƒ¨ç½²æ‰©å±•ã€çµæ´»æ€§å¼ºï¼Œå‡çº§æ”¹é€ å½±å“èŒƒå›´å°ã€‚ å¾®æœåŠ¡æ¶æ„çš„ä¼˜ç‚¹ï¼š å¾®æœåŠ¡å¾ˆå°ï¼Œä¾¿äºç‰¹å®šä¸šåŠ¡åŠŸèƒ½çš„èšç„¦ å¾®æœåŠ¡å¾ˆå°ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥è¢«ä¸€ä¸ªå°å›¢é˜Ÿå•ç‹¬å®æ–½ï¼ˆå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ä¸Šçº¿ã€è¿ç»´ï¼‰ï¼Œå›¢é˜Ÿåˆä½œä¸€å®šç¨‹åº¦è§£è€¦ï¼Œä¾¿äºå®æ–½æ•æ·å¼€å‘ å¾®æœåŠ¡å¾ˆå°ï¼Œä¾¿äºé‡ç”¨å’Œæ¨¡å—ä¹‹é—´çš„ç»„è£… å¾®æœåŠ¡å¾ˆç‹¬ç«‹ï¼Œé‚£ä¹ˆä¸åŒçš„å¾®æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ï¼Œæ¾è€¦åˆ å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬æ›´å®¹æ˜“å¼•å…¥æ–°æŠ€æœ¯ å¾®æœåŠ¡æ¶æ„çš„ç¼ºç‚¹ å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œåˆ†å¸ƒå¼å¤æ‚éš¾ä»¥ç®¡ç†ï¼Œå½“æœåŠ¡æ•°é‡å¢åŠ ï¼Œç®¡ç†å°†è¶ŠåŠ å¤æ‚ å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œåˆ†å¸ƒå¼é“¾è·¯è·Ÿè¸ªéš¾ç­‰ 1.3 å¾®æœåŠ¡æ¶æ„å½“ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç° åˆ—å¦‚ï¼š â€‹ èŒä½æœç´¢ â€”â€”ã€‹ç®€å†æœåŠ¡ â€‹ æœåŠ¡æä¾›è€… : ç®€å†æœåŠ¡ â€‹ æœåŠ¡æ¶ˆè´¹è€… : èŒä½æœç´¢ **æœåŠ¡æ³¨å†Œï¼š**æœåŠ¡æä¾›è€…å°†æ‰€æä¾›æœåŠ¡çš„ä¿¡æ¯ï¼ˆæœåŠ¡å™¨IPå’Œç«¯å£ã€æœåŠ¡è®¿é—®åè®®ç­‰ï¼‰æ³¨å†Œ&#x2F;ç™»è®°åˆ°æ³¨å†Œä¸­å¿ƒ **æœåŠ¡å‘ç°ï¼š**æœåŠ¡æ¶ˆè´¹è€…èƒ½å¤Ÿä»æ³¨å†Œä¸­å¿ƒè·å–åˆ°è¾ƒä¸ºå®æ—¶çš„æœåŠ¡åˆ—è¡¨ï¼Œç„¶åæ ¹ç©¶ä¸€å®šçš„ç­–ç•¥é€‰æ‹©ä¸€ä¸ªæœåŠ¡è®¿é—® è´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡å³å°†è¯·æ±‚å‹åŠ›åˆ†é…åˆ°å¤šä¸ªæœåŠ¡å™¨ï¼ˆåº”ç”¨æœåŠ¡å™¨ã€æ•°æ®åº“æœåŠ¡å™¨ç­‰ï¼‰ï¼Œä»¥æ­¤æ¥æé«˜æœåŠ¡çš„æ€§èƒ½ã€å¯é æ€§ ç†”æ–­ ç†”æ–­å³æ–­è·¯ä¿æŠ¤ã€‚å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¦‚æœä¸‹æ¸¸æœåŠ¡å› è®¿é—®å‹åŠ›è¿‡å¤§è€Œå“åº”å˜æ…¢æˆ–å¤±è´¥ï¼Œä¸Šæ¸¸æœåŠ¡ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ï¼Œå¯ä»¥æš‚æ—¶åˆ‡æ–­å¯¹ä¸‹æ¸¸æœåŠ¡çš„è°ƒç”¨ã€‚è¿™ç§ç‰ºç‰²å±€éƒ¨ï¼Œä¿å…¨æ•´ä½“çš„æªæ–½å°±å«åšç†”æ–­ã€‚ é“¾è·¯è¿½è¸ª å¾®æœåŠ¡æ¶æ„è¶Šå‘æµè¡Œï¼Œä¸€ä¸ªé¡¹ç›®å¾€å¾€æ‹†åˆ†æˆå¾ˆå¤šä¸ªæœåŠ¡ï¼Œé‚£ä¹ˆä¸€æ¬¡è¯·æ±‚å°±éœ€è¦æ¶‰åŠåˆ°å¾ˆå¤šä¸ªæœåŠ¡ã€‚ä¸åŒçš„å¾®æœåŠ¡å¯èƒ½æ˜¯ç”±ä¸åŒçš„å›¢é˜Ÿå¼€å‘ã€å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ã€æ•´ä¸ªé¡¹ç›®ä¹Ÿæœ‰å¯èƒ½éƒ¨ç½²åœ¨äº†å¾ˆå¤šæœåŠ¡å™¨ä¸Šï¼ˆç”šè‡³ç™¾å°ã€åƒå°ï¼‰æ¨ªè·¨å¤šä¸ªä¸åŒçš„æ•°æ®ä¸­å¿ƒã€‚æ‰€è°“é“¾è·¯è¿½è¸ªï¼Œå°±æ˜¯å¯¹ä¸€æ¬¡è¯·æ±‚æ¶‰åŠçš„å¾ˆå¤šä¸ªæœåŠ¡é“¾è·¯è¿›è¡Œæ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§ APIç½‘å…³ å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œä¸åŒçš„å¾®æœåŠ¡å¾€å¾€ä¼šæœ‰ä¸åŒçš„è®¿é—®åœ°å€ï¼Œå®¢æˆ·ç«¯å¯èƒ½éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡çš„æ¥å£æ‰èƒ½å®Œæˆä¸€ä¸ªä¸šåŠ¡éœ€æ±‚ï¼Œå¦‚æœè®©å®¢æˆ·ç«¯ç›´æ¥ä¸å„ä¸ªå¾®æœåŠ¡é€šä¿¡å¯èƒ½å‡ºç°ï¼š 1ï¼‰å®¢æˆ·ç«¯éœ€è¦è°ƒç”¨ä¸åŒçš„urlåœ°å€ï¼Œå¢åŠ äº†ç»´æŠ¤è°ƒç”¨éš¾åº¦ 2ï¼‰åœ¨ä¸€å®šçš„åœºæ™¯ä¸‹ï¼Œä¹Ÿå­˜åœ¨è·¨åŸŸè¯·æ±‚çš„é—®é¢˜ï¼ˆå‰åç«¯åˆ†ç¦»å°±ä¼šç¢°åˆ°è·¨åŸŸé—®é¢˜ï¼ŒåŸæœ¬æˆ‘ä»¬åœ¨åç«¯é‡‡ç”¨Corså°±èƒ½è§£å†³ï¼Œç°åœ¨åˆ©ç”¨ç½‘å…³ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ç½‘å…³è¿™å±‚åšå¥½äº†ï¼‰ 3ï¼‰æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦è¿›è¡Œå•ç‹¬çš„èº«ä»½è®¤è¯ é‚£ä¹ˆï¼ŒAPIç½‘å…³å°±å¯ä»¥è¾ƒå¥½çš„ç»Ÿä¸€å¤„ç†ä¸Šè¿°é—®é¢˜ï¼ŒAPIè¯·æ±‚è°ƒç”¨ç»Ÿä¸€æ¥å…¥APIç½‘å…³å±‚ï¼Œç”±ç½‘å…³è½¬å‘è¯·æ±‚ã€‚APIç½‘å…³æ›´ä¸“æ³¨åœ¨å®‰å…¨ã€è·¯ç”±ã€æµé‡ç­‰é—®é¢˜çš„å¤„ç†ä¸Šï¼ˆå¾®æœåŠ¡å›¢é˜Ÿä¸“æ³¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å³å¯ï¼‰ï¼Œå®ƒçš„åŠŸèƒ½æ¯”å¦‚ï¼š ç»Ÿä¸€æ¥å…¥ï¼ˆè·¯ç”±ï¼‰ å®‰å…¨é˜²æŠ¤ï¼ˆç»Ÿä¸€é‰´æƒï¼Œè´Ÿè´£ç½‘å…³è®¿é—®èº«ä»½è®¤è¯éªŒè¯ï¼Œä¸â€œè®¿é—®è®¤è¯ä¸­å¿ƒâ€é€šä¿¡ï¼Œå®é™…è®¤è¯ä¸šåŠ¡é€»è¾‘äº¤ç§»â€œè®¿é—®è®¤è¯ä¸­å¿ƒâ€å¤„ç†ï¼‰ é»‘ç™½åå•ï¼ˆå®ç°é€šè¿‡IPåœ°å€æ§åˆ¶ç¦æ­¢è®¿é—®ç½‘å…³åŠŸèƒ½ï¼Œæ§åˆ¶è®¿é—®ï¼‰ åè®®é€‚é…ï¼ˆå®ç°é€šä¿¡åè®®æ ¡éªŒã€é€‚é…è½¬æ¢çš„åŠŸèƒ½ï¼‰ æµé‡ç®¡æ§ï¼ˆé™æµï¼‰ é•¿çŸ­é“¾æ¥æ”¯æŒ å®¹é”™èƒ½åŠ›ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ äºŒã€Spring Cloudæ¦‚è¿°2.1 ä»€ä¹ˆæ˜¯Spring Cloudï¼Ÿ**[ç™¾åº¦ç™¾ç§‘]**Spring Cloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆã€‚å®ƒåˆ©ç”¨Spring Bootçš„å¼€å‘ä¾¿åˆ©æ€§å·§å¦™åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€è®¾æ–½çš„å¼€å‘ï¼Œå¦‚æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€æ¶ˆæ¯æ€»çº¿ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ•°æ®ç›‘æ§ç­‰ï¼Œéƒ½å¯ä»¥ç”¨ Spring Bootçš„å¼€å‘é£æ ¼åšåˆ°ä¸€é”®å¯åŠ¨å’Œéƒ¨ç½²ã€‚Spring Cloudå¹¶æ²¡æœ‰é‡å¤åˆ¶é€ è½®å­ï¼Œå®ƒåªæ˜¯å°†ç›®å‰å„å®¶å…¬å¸å¼€å‘çš„æ¯”è¾ƒæˆç†Ÿã€ç»å¾—èµ·å®é™…è€ƒéªŒçš„æœåŠ¡æ¡†æ¶ç»„åˆèµ·æ¥ï¼Œé€šè¿‡Spring Booté£æ ¼è¿›è¡Œå†å°è£…å±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…ã€‚ Spring Cloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆï¼ˆSpring Cloudæ˜¯ä¸€ä¸ªè§„èŒƒï¼‰ å¼€å‘æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€æ¶ˆæ¯æ€»çº¿ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ•°æ®ç›‘æ§ç­‰ åˆ©ç”¨Spring Bootçš„å¼€å‘ä¾¿åˆ©æ€§ç®€åŒ–äº†å¾®æœåŠ¡æ¶æ„çš„å¼€å‘ï¼ˆè‡ªåŠ¨è£…é…ï¼‰ è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼ŒSpring Cloudå…¶å®æ˜¯ä¸€å¥—è§„èŒƒï¼Œæ˜¯ä¸€å¥—ç”¨äºæ„å»ºå¾®æœåŠ¡æ¶æ„çš„è§„èŒƒï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯ä»¥æ‹¿æ¥å³ç”¨çš„æ¡†æ¶ï¼ˆæ‰€è°“è§„èŒƒå°±æ˜¯åº”è¯¥æœ‰å“ªäº›åŠŸèƒ½ç»„ä»¶ï¼Œç„¶åç»„ä»¶ä¹‹é—´æ€ä¹ˆé…åˆï¼Œå…±åŒå®Œæˆä»€ä¹ˆäº‹æƒ…ï¼‰ã€‚åœ¨è¿™ä¸ªè§„èŒƒä¹‹ä¸‹ç¬¬ä¸‰æ–¹çš„Netflixå…¬å¸å¼€å‘äº†ä¸€äº›ç»„ä»¶ã€Springå®˜æ–¹å¼€å‘äº†ä¸€äº›æ¡†æ¶&#x2F;ç»„ä»¶ï¼ŒåŒ…æ‹¬ç¬¬ä¸‰æ–¹çš„é˜¿é‡Œå·´å·´å¼€å‘äº†ä¸€å¥—æ¡†æ¶&#x2F;ç»„ä»¶é›†åˆSpring Cloud Alibabaï¼Œè¿™äº›æ‰æ˜¯Spring Cloudè§„èŒƒçš„å®ç°ã€‚ Netflixæäº†ä¸€å¥— ï¼Œç®€ç§°SCN Spring Cloud å¸æ”¶äº†Netflixå…¬å¸çš„äº§å“åŸºç¡€ä¹‹ä¸Šè‡ªå·±ä¹Ÿæäº†å‡ ä¸ªç»„ä»¶ é˜¿é‡Œå·´å·´åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šæå‡ºäº†ä¸€å †å¾®æœåŠ¡ç»„ä»¶,Spring Cloud Alibabaï¼ˆSCAï¼‰ 2.2 Spring Cloudè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿâ€‹ Spring Cloud è§„èŒƒåŠå®ç°æ„å›¾è¦è§£å†³çš„é—®é¢˜å…¶å®å°±æ˜¯å¾®æœåŠ¡æ¶æ„å®æ–½è¿‡ç¨‹ä¸­å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚å¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ³¨å†Œå‘ç°é—®é¢˜ã€ç½‘ç»œé—®é¢˜ï¼ˆæ¯”å¦‚ç†”æ–­åœºæ™¯ï¼‰ã€ç»Ÿä¸€è®¤è¯å®‰å…¨æˆæƒé—®é¢˜ã€è´Ÿè½½å‡è¡¡é—®é¢˜ã€é“¾è·¯è¿½è¸ªç­‰é—®é¢˜ã€‚ Distributed&#x2F;versioned configuration ï¼ˆåˆ†å¸ƒå¼&#x2F;ç‰ˆæœ¬åŒ–é…ç½®ï¼‰ Service registration and discovery ï¼ˆæœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼‰ Routing ï¼ˆæ™ºèƒ½è·¯ç”±ï¼‰ Service-to-service calls ï¼ˆæœåŠ¡è°ƒç”¨ï¼‰ Load balancing ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ Circuit Breakers ï¼ˆç†”æ–­å™¨ï¼‰ Global locks ï¼ˆå…¨å±€é”ï¼‰ Leadership election and cluster state ï¼ˆ é€‰ä¸¾ä¸é›†ç¾¤çŠ¶æ€ç®¡ç†ï¼‰ Distributed messaging ï¼ˆåˆ†å¸ƒå¼æ¶ˆæ¯ä¼ é€’å¹³å°ï¼‰ 2.3 Spring Cloudæ¶æ„â€‹ å¦‚å‰æ‰€è¿°ï¼ŒSpring Cloudæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ç›¸å…³è§„èŒƒï¼Œè¿™ä¸ªè§„èŒƒæ„å›¾ä¸ºæ­å»ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç«™å¼æœåŠ¡ï¼Œé‡‡ç”¨ç»„ä»¶ï¼ˆæ¡†æ¶ï¼‰åŒ–æœºåˆ¶å®šä¹‰ä¸€ç³»åˆ—ç»„ä»¶ï¼Œå„ç±»ç»„ä»¶é’ˆå¯¹æ€§çš„å¤„ç†å¾®æœåŠ¡ä¸­çš„ç‰¹å®šé—®é¢˜ï¼Œè¿™äº›ç»„ä»¶å…±åŒæ¥æ„æˆSpring Cloudå¾®æœåŠ¡æŠ€æœ¯æ ˆ 2.3.1 Spring Cloudæ ¸å¿ƒç»„ä»¶â€‹ Spring Cloud ç”Ÿæ€åœˆä¸­çš„ç»„ä»¶ï¼ŒæŒ‰ç…§å‘å±•å¯ä»¥åˆ†ä¸ºç¬¬ä¸€ä»£ Spring Cloudç»„ä»¶å’Œç¬¬äºŒä»£ SpringCloudç»„ä»¶ã€‚ ç»„ä»¶ ç¬¬ä¸€ä»£Spring Cloud(Netflix,SCN) ç¬¬äºŒä»£Spring Cloud(Alibaba,SCA) æ³¨å†Œä¸­å¿ƒ Netflix Eureka é˜¿é‡Œ Nacos å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ Netflix Ribbon é˜¿é‡ŒDubbo LBã€å®˜æ–¹Loadbalancer ç†”æ–­å™¨ Netflix Hystrix é˜¿é‡Œ Sentinel ç½‘å…³ Netflix Zuul(æ€§èƒ½ä¸€èˆ¬æœªæ¥å°†é€€å‡ºSpring Couldç”Ÿæ€åœˆ) å®˜æ–¹Spring Cloud Gateway é…ç½®ä¸­å¿ƒ å®˜æ–¹Spring Cloud Config é˜¿é‡ŒNacosã€æºç¨‹Apollo æœåŠ¡è°ƒç”¨ Netflix Feign é˜¿é‡ŒDubbo RPC æ¶ˆæ¯é©±åŠ¨ å®˜æ–¹ Spring Cloud Stream é“¾è·¯è¿½è¸ª å®˜æ–¹ Spring Cloud Sleuth/Zipkin é˜¿é‡Œ seataåˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ 2.3.2 Spring Cloudä½“ç³»ç»“æ„ï¼ˆç»„ä»¶ååŒå·¥ä½œæœºåˆ¶ï¼‰ Spring Cloudä¸­çš„å„ç»„ä»¶ååŒå·¥ä½œï¼Œæ‰èƒ½å¤Ÿæ”¯æŒä¸€ä¸ªå®Œæ•´çš„å¾®æœåŠ¡æ¶æ„ã€‚æ¯”å¦‚ æ³¨å†Œä¸­å¿ƒè´Ÿè´£æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ï¼Œå¾ˆå¥½å°†å„æœåŠ¡è¿æ¥èµ·æ¥ APIç½‘å…³è´Ÿè´£è½¬å‘æ‰€æœ‰å¤–æ¥çš„è¯·æ±‚ æ–­è·¯å™¨è´Ÿè´£ç›‘æ§æœåŠ¡ä¹‹é—´çš„è°ƒç”¨æƒ…å†µï¼Œè¿ç»­å¤šæ¬¡å¤±è´¥è¿›è¡Œç†”æ–­ä¿æŠ¤ã€‚ é…ç½®ä¸­å¿ƒæä¾›äº†ç»Ÿä¸€çš„é…ç½®ä¿¡æ¯ç®¡ç†æœåŠ¡,å¯ä»¥å®æ—¶çš„é€šçŸ¥å„ä¸ªæœåŠ¡è·å–æœ€æ–°çš„é…ç½®ä¿¡æ¯ 2.4 Spring Cloudä¸Dubboè¿›è¡Œå¯¹æ¯”â€‹ Dubboæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ä¼˜ç§€çš„æœåŠ¡æ¡†æ¶ï¼ŒåŸºäºRPCè°ƒç”¨ï¼Œå¯¹äºç›®å‰ä½¿ç”¨ç‡è¾ƒé«˜çš„Spring Cloud Netflixæ¥è¯´ï¼Œå®ƒæ˜¯åŸºäºHTTPçš„ï¼Œæ‰€ä»¥æ•ˆç‡ä¸Šæ²¡æœ‰Dubboé«˜ï¼Œä½†é—®é¢˜åœ¨äºDubboä½“ç³»çš„ç»„ä»¶ä¸å…¨ï¼Œä¸èƒ½å¤Ÿæä¾›ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚æœåŠ¡æ³¨å†Œä¸å‘ç°éœ€è¦å€ŸåŠ©äºZookeeperç­‰å®ç°ï¼Œè€ŒSpringCloud Netflixåˆ™æ˜¯çœŸæ­£çš„æä¾›äº†ä¸€ç«™å¼æœåŠ¡åŒ–è§£å†³æ–¹æ¡ˆï¼Œä¸”æœ‰Springå¤§å®¶æ—èƒŒæ™¯ã€‚ â€‹ å‰äº›å¹´ï¼ŒDubboä½¿ç”¨ç‡é«˜äºSpringCloudï¼Œä½†ç›®å‰Spring Cloudåœ¨æœåŠ¡åŒ–&#x2F;å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆä¸­å·²ç»æœ‰äº†éå¸¸å¥½çš„å‘å±•è¶‹åŠ¿ã€‚ 2.5 Spring Cloudä¸Spring Bootçš„å…³ç³»â€‹ Spring Cloud åªæ˜¯åˆ©ç”¨äº†Spring Boot çš„ç‰¹ç‚¹ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿçš„å®ç°å¾®æœåŠ¡ç»„ä»¶å¼€å‘ï¼Œå¦åˆ™ä¸ä½¿ç”¨Spring Bootçš„è¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨Spring Cloudæ—¶ï¼Œæ¯ä¸€ä¸ªç»„ä»¶çš„ç›¸å…³JaråŒ…éƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±å¯¼å…¥é…ç½®ä»¥åŠéœ€è¦å¼€å‘äººå‘˜è€ƒè™‘å…¼å®¹æ€§ç­‰å„ç§æƒ…å†µã€‚æ‰€ä»¥Spring Bootæ˜¯æˆ‘ä»¬å¿«é€ŸæŠŠSpring Cloudå¾®æœåŠ¡æŠ€æœ¯åº”ç”¨èµ·æ¥çš„ä¸€ç§æ–¹å¼ã€‚ ä¸‰ã€æ¡ˆä¾‹å‡†å¤‡3.1 æ¡ˆä¾‹è¯´æ˜æœ¬éƒ¨åˆ†æˆ‘ä»¬æŒ‰ç…§æ™®é€šæ–¹å¼æ¨¡æ‹Ÿä¸€ä¸ªå¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ï¼Œåç»­æˆ‘ä»¬å°†ä¸€æ­¥æ­¥ä½¿ç”¨Spring Cloudçš„ç»„ä»¶å¯¹æ¡ˆä¾‹è¿›è¡Œæ”¹é€ ã€‚ éœ€æ±‚ï¼š å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾ï¼š 3.2 æ¡ˆä¾‹æ•°æ®åº“ç¯å¢ƒå‡†å¤‡å•†å“ä¿¡æ¯è¡¨ï¼š 12345678910CREATE TABLE products( id INT PRIMARY KEY AUTO_INCREMENT, NAME VARCHAR(50), #å•†å“åç§° price DOUBLE, flag VARCHAR(2), #ä¸Šæ¶çŠ¶æ€ goods_desc VARCHAR(100), #å•†å“æè¿° images VARCHAR(400), #å•†å“å›¾ç‰‡ goods_stock INT, #å•†å“åº“å­˜ goods_type VARCHAR(20) #å•†å“ç±»å‹ ); 3.3 æ¡ˆä¾‹å·¥ç¨‹â€‹ æˆ‘ä»¬åŸºäºSpringBootæ¥æ„é€ å·¥ç¨‹ç¯å¢ƒï¼Œæˆ‘ä»¬çš„å·¥ç¨‹æ¨¡å—å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š 3.3.1 é¡µé¢é™æ€åŒ–å¾®æœåŠ¡åœ¨Ideaä¸­æ–°å»ºmoduleï¼Œå‘½åä¸ºmycloud pom.xml 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061 &lt;packaging&gt;pom&lt;/packaging&gt;&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.6.RELEASE&lt;/version&gt;&lt;/parent&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.18.4&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;source&gt;11&lt;/source&gt; &lt;target&gt;11&lt;/target&gt; &lt;encoding&gt;utf-8&lt;/encoding&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;repackage&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 3.3.2 å…¬å…±ç»„ä»¶å¾®æœåŠ¡ åœ¨å…¬å…±ç»„ä»¶å¾®æœåŠ¡ä¸­å¼•å…¥æ•°æ®åº“é©±åŠ¨åŠmybatis-plus 12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;mycloud&lt;/artifactId&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;service-common&lt;/artifactId&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.3.2&lt;/version&gt; &lt;/dependency&gt; &lt;!--pojoæŒä¹…åŒ–ä½¿ç”¨--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.persistence&lt;/groupId&gt; &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ç”Ÿæˆæ•°æ®åº“å®ä½“ç±»ï¼šcom.hao.pojo.Product 12345678910111213141516171819202122232425package com.hao.pojo;import lombok.Data;import javax.persistence.Id;import javax.persistence.Table;/** * @author hao * @date 2022/3/10 11:55 */@Data@Table(name = &quot;product&quot;)public class Product &#123; @Id private Integer id; private String name; private double price; private String flag; private String goodsDesc; private String images; private long goodsStock; private String goodsType;&#125; 3.3.3 å•†å“å¾®æœåŠ¡å•†å“å¾®æœåŠ¡æ˜¯æœåŠ¡æä¾›è€…ï¼Œé¡µé¢é™æ€åŒ–å¾®æœåŠ¡æ˜¯æœåŠ¡çš„æ¶ˆè´¹è€… åˆ›å»ºå•†å“å¾®æœåŠ¡service-productï¼Œç»§æ‰¿mycloud 1ï¼‰åœ¨å•†å“å¾®æœåŠ¡çš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥å…¬å…±ç»„ä»¶åæ ‡ 12345&lt;dependency&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;artifactId&gt;service-common&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt;&lt;/dependency&gt; 2ï¼‰åœ¨ymlæ–‡ä»¶ä¸­é…ç½®ç«¯å£ã€åº”ç”¨åã€æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯ 12345678910server: port: 9000 # åæœŸè¯¥å¾®æœåŠ¡å¤šå®ä¾‹ï¼Œ9000ï¼ˆ10ä¸ªä»¥å†…ï¼‰Spring: application: name: service-product datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://xxx.xxx.xxx:3306/test?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=UTC username: root password: 1234 3ï¼‰Mapperæ¥å£å¼€å‘ 1234567891011121314151617package com.hao.mapper;import com.baomidou.mybatisplus.core.mapper.BaseMapper;import com.hao.pojo.Product;/** * @author hao * @date 2022/3/10 12:33 *//** * ç°åœ¨ä½¿ç”¨çš„Mybatis-plusç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ˜¯Mybatisçš„åŠ å¼ºç‰ˆ * èƒ½å¤Ÿä¸SpringBootè¿›è¡Œéå¸¸å‹å¥½çš„æ•´åˆï¼Œå¯¹æ¯”Mybatisæ¡†æ¶åªæœ‰ä½¿ç”¨ä¾¿æ·çš„æ”¹å˜ * æ²¡æœ‰å…·ä½“åŠŸèƒ½çš„æ”¹å˜ * å…·ä½“ä½¿ç”¨ï¼šè®©å…·ä½“çš„Mapperæ¥å£ç»§æ‰¿BaseMapperå³å¯ */ public interface ProductMapper extends BaseMapper&lt;Product&gt; &#123;&#125; 4ï¼‰seriveå±‚å¼€å‘ 12345678910111213141516171819202122package com.hao.service.impl;import com.hao.mapper.ProductMapper;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import com.hao.pojo.Product;import com.hao.service.ProductService;/** * @author hao * @date 2022/3/10 12:35 */@Servicepublic class ProductServiceImpl implements ProductService &#123; @Autowired ProductMapper productMapper; @Override public Product getProductById(Integer id) &#123; return productMapper.selectById(id); &#125;&#125; 5ï¼‰controllerå±‚å¼€å‘ 1234567891011121314151617181920212223package com.hao.controller;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import com.hao.pojo.Product;import com.hao.service.ProductService;/** * @author hao * @date 2022/3/10 12:37 */@RestController@RequestMapping(&quot;/product&quot;)public class ProductController &#123; @Autowired ProductService productService; @RequestMapping(&quot;/query/&#123;id&#125;&quot;) public Product getProduct(@PathVariable Integer id)&#123; return productService.getProductById(id); &#125;&#125; 6ï¼‰å¯åŠ¨ç±» 123456789101112131415161718package com.hao;import org.mybatis.spring.annotation.MapperScan;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;/** * @author hao * @date 2022/3/10 12:43 */@SpringBootApplication@MapperScan(&quot;com.hao.mapper&quot;)public class ProductApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ProductApplication.class); &#125;&#125; 3.3.4 é¡µé¢é™æ€åŒ–å¾®æœåŠ¡1ï¼‰åœ¨pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥å…¬å…±ç»„ä»¶ä¾èµ– 123456789101112131415161718192021222324252627&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;mycloud&lt;/artifactId&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;service-page&lt;/artifactId&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;artifactId&gt;service-common&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; 2ï¼‰åœ¨ymlæ–‡ä»¶ä¸­é…ç½®ç«¯å£ã€åº”ç”¨åã€æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯ 12345678910server: port: 9100 # åæœŸè¯¥å¾®æœåŠ¡å¤šå®ä¾‹ï¼Œ9000ï¼ˆ10ä¸ªä»¥å†…ï¼‰Spring: application: name: service-page datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://xxx.xxx.xxx:3306/test?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=UTC username: root password: 1234 3ï¼‰ç¼–å†™PageControllerï¼Œåœ¨PageControllerä¸­è°ƒç”¨å•†å“å¾®æœåŠ¡å¯¹åº”çš„URL 12345678910111213141516/** * @author hao * @date 2022/3/10 12:54 */@RestController@RequestMapping(&quot;/page&quot;)public class PageController &#123; @Autowired private RestTemplate restTemplate; @GetMapping(&quot;/getProduct/&#123;id&#125;&quot;) public Product getProductById(@PathVariable Integer id)&#123; Product product = restTemplate.getForObject(&quot;http://localhost:9000/product/query/&quot;+id,Product.class); System.out.println(&quot;å½“å‰æ˜¯é™æ€åŒ–æœåŠ¡ï¼Œå·²ä»å•†å“æœåŠ¡è·å¾—æ•°æ®ï¼š&quot; + product); return product; &#125;&#125; 4ï¼‰ç¼–å†™å¯åŠ¨ç±»ï¼Œæ³¨å…¥RestTemplate 1234567891011121314/** * @author hao * @date 2022/3/10 13:00 */@SpringBootApplicationpublic class PageApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(PageApplication.class); &#125; @Bean public RestTemplate restTemplate()&#123; return new RestTemplate(); &#125;&#125; 3.4 æ¡ˆä¾‹ä»£ç é—®é¢˜åˆ†ææˆ‘ä»¬åœ¨é¡µé¢é™æ€åŒ–å¾®æœåŠ¡ä¸­ä½¿ç”¨RestTemplateè°ƒç”¨å•†å“å¾®æœåŠ¡çš„å•†å“çŠ¶æ€æ¥å£æ—¶ï¼ˆRestful API æ¥å£ï¼‰ã€‚åœ¨å¾®æœåŠ¡åˆ†å¸ƒå¼é›†ç¾¤ç¯å¢ƒä¸‹ä¼šå­˜åœ¨ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ å­˜åœ¨çš„é—®é¢˜ï¼š åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸­ï¼Œæˆ‘ä»¬æŠŠurlåœ°å€ç¡¬ç¼–ç åˆ°ä»£ç ä¸­ï¼Œä¸æ–¹ä¾¿åæœŸç»´æŠ¤ã€‚ æœåŠ¡æä¾›è€…åªæœ‰ä¸€ä¸ªæœåŠ¡ï¼Œå³ä¾¿æœåŠ¡æä¾›è€…å½¢æˆé›†ç¾¤ï¼ŒæœåŠ¡æ¶ˆè´¹è€…è¿˜éœ€è¦è‡ªå·±å®ç°è´Ÿè½½å‡è¡¡ã€‚ åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸­ï¼Œä¸æ¸…æ¥šæœåŠ¡æä¾›è€…çš„çŠ¶æ€ã€‚ æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æä¾›è€…æ—¶å€™ï¼Œå¦‚æœå‡ºç°æ•…éšœèƒ½å¦åŠæ—¶å‘ç°ä¸å‘ç”¨æˆ·æŠ›å‡ºå¼‚å¸¸é¡µé¢ï¼Ÿ RestTemplateè¿™ç§è¯·æ±‚è°ƒç”¨æ–¹å¼æ˜¯å¦è¿˜æœ‰ä¼˜åŒ–ç©ºé—´ï¼Ÿèƒ½ä¸èƒ½ç±»ä¼¼äºDubboé‚£æ ·ç©ï¼Ÿ è¿™ä¹ˆå¤šçš„å¾®æœåŠ¡ç»Ÿä¸€è®¤è¯å¦‚ä½•å®ç°ï¼Ÿ é…ç½®æ–‡ä»¶æ¯æ¬¡éƒ½ä¿®æ”¹å¥½å¤šä¸ªå¾ˆéº»çƒ¦ï¼ï¼Ÿ â€¦. ä¸Šè¿°åˆ†æå‡ºçš„é—®é¢˜ï¼Œå…¶å®å°±æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­å¿…ç„¶é¢ä¸´çš„ä¸€äº›é—®é¢˜ï¼š æœåŠ¡ç®¡ç†ï¼šè‡ªåŠ¨æ³¨å†Œä¸å‘ç°ã€çŠ¶æ€ç›‘ç®¡ æœåŠ¡è´Ÿè½½å‡è¡¡ ç†”æ–­ è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ ç½‘å…³æ‹¦æˆªã€è·¯ç”±è½¬å‘ ç»Ÿä¸€è®¤è¯ é›†ä¸­å¼é…ç½®ç®¡ç†ï¼Œé…ç½®ä¿¡æ¯å®æ—¶è‡ªåŠ¨æ›´æ–° è¿™äº›é—®é¢˜ï¼ŒSpring Cloud ä½“ç³»éƒ½æœ‰è§£å†³æ–¹æ¡ˆ å››ã€ç¬¬ä¸€ä»£Spring Cloudæ ¸å¿ƒç»„ä»¶è¯´æ˜ï¼šä¸Šé¢æåˆ°ç½‘å…³ç»„ä»¶Zuulæ€§èƒ½ä¸€èˆ¬ï¼Œæœªæ¥å°†é€€å‡ºSpring Cloud ç”Ÿæ€åœˆï¼Œæ‰€ä»¥è¿™è¾¹ç›´æ¥å°±æ¢æˆGateWayã€‚ å„ç»„ä»¶æ•´ä½“ç»“æ„å¦‚ä¸‹ï¼š ä»å½¢å¼ä¸Šæ¥è¯´ï¼ŒFeignä¸€ä¸ªé¡¶ä¸‰ï¼ŒFeign &#x3D; RestTemplate + Ribbon + Hystrix 4.1 EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒå¸¸ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šEurekaã€Nacosã€Zookeeperã€Consul 4.1.1 å…³äºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ³¨æ„ï¼šæœåŠ¡æ³¨å†Œä¸­å¿ƒæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£è€¦æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ã€‚ æœåŠ¡æ¶ˆè´¹è€… â†’ æœåŠ¡æä¾›è€… æœåŠ¡æ¶ˆè´¹è€… â†’ æœåŠ¡æ³¨å†Œä¸­å¿ƒ â†’ æœåŠ¡æä¾›è€… â€‹ å¯¹äºä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡ï¼ŒåŸåˆ™ä¸Šéƒ½åº”å­˜åœ¨æˆ–è€…æ”¯æŒå¤šä¸ªæä¾›è€…ï¼ˆæ¯”å¦‚å•†å“å¾®æœåŠ¡éƒ¨ç½²å¤šä¸ªå®ä¾‹ï¼‰ï¼Œè¿™æ˜¯ç”±å¾®æœåŠ¡çš„åˆ†å¸ƒå¼å±æ€§å†³å®šçš„ã€‚ â€‹ æ›´è¿›ä¸€æ­¥ï¼Œä¸ºäº†æ”¯æŒå¼¹æ€§æ‰©ã€ç¼©å®¹ç‰¹æ€§ï¼Œä¸€ä¸ªå¾®æœåŠ¡çš„æä¾›è€…çš„æ•°é‡å’Œåˆ†å¸ƒå¾€å¾€æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œä¹Ÿæ˜¯æ— æ³•é¢„å…ˆç¡®å®šçš„ã€‚å› æ­¤ï¼ŒåŸæœ¬åœ¨å•ä½“åº”ç”¨é˜¶æ®µå¸¸ç”¨çš„é™æ€è´Ÿè½½å‡è¡¡æœºåˆ¶å°±ä¸å†é€‚ç”¨äº†ï¼Œéœ€è¦å¼•å…¥é¢å¤–çš„ç»„ä»¶æ¥ç®¡ç†å¾®æœåŠ¡æä¾›è€…çš„æ³¨å†Œä¸å‘ç°ï¼Œè€Œè¿™ä¸ªç»„ä»¶å°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚ ï¼ˆ1ï¼‰æ³¨å†Œä¸­å¿ƒå®ç°åŸç† â€‹ åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒç”¨äºå­˜å‚¨æœåŠ¡æä¾›è€…åœ°å€ä¿¡æ¯ã€æœåŠ¡å‘å¸ƒç›¸å…³çš„å±æ€§ä¿¡æ¯ï¼Œæ¶ˆè´¹è€…é€šè¿‡ä¸»åŠ¨æŸ¥è¯¢å’Œè¢«åŠ¨é€šçŸ¥çš„æ–¹å¼è·å–æœåŠ¡æä¾›è€…çš„åœ°å€ä¿¡æ¯ï¼Œè€Œä¸å†éœ€è¦é€šè¿‡ç¡¬ç¼–ç æ–¹å¼å¾—åˆ°æä¾›è€…çš„åœ°å€ä¿¡æ¯ã€‚æ¶ˆè´¹è€…åªéœ€è¦çŸ¥é“å½“å‰ç³»ç»Ÿå‘å¸ƒäº†é‚£äº›æœåŠ¡ï¼Œè€Œä¸éœ€è¦çŸ¥é“æœåŠ¡å…·ä½“å­˜åœ¨äºä»€ä¹ˆä½ç½®ï¼Œè¿™å°±æ˜¯é€æ˜åŒ–è·¯ç”±ã€‚ æœåŠ¡æä¾›è€…å¯åŠ¨ æœåŠ¡æä¾›è€…å°†ç›¸å…³æœåŠ¡ä¿¡æ¯ä¸»åŠ¨æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ æœåŠ¡æ¶ˆè´¹è€…è·å–æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼š pullæ¨¡å¼ï¼šæœåŠ¡æ¶ˆè´¹è€…å¯ä»¥ä¸»åŠ¨æ‹‰å–å¯ç”¨çš„æœåŠ¡æä¾›è€…æ¸…å• pushæ¨¡å¼ï¼šæœåŠ¡æ¶ˆè´¹è€…è®¢é˜…æœåŠ¡ï¼ˆå½“æœåŠ¡æä¾›è€…æœ‰å˜åŒ–æ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¹Ÿä¼šä¸»åŠ¨æ¨é€æ›´æ–°åçš„æœåŠ¡æ¸…å•ç»™æ¶ˆè´¹è€… æœåŠ¡æ¶ˆè´¹è€…ç›´æ¥è°ƒç”¨æœåŠ¡æä¾›è€… å¦å¤–ï¼Œæ³¨å†Œä¸­å¿ƒä¹Ÿéœ€è¦å®ŒæˆæœåŠ¡æä¾›è€…çš„å¥åº·ç›‘æ§ï¼Œå½“å‘ç°æœåŠ¡æä¾›è€…å¤±æ•ˆæ—¶éœ€è¦åŠæ—¶å‰”é™¤ ï¼ˆ2ï¼‰ä¸»æµæ³¨å†Œä¸­å¿ƒå¯¹æ¯” Zookeeper Dubbo + Zookeeper Zookeeperå®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œæ˜¯Apache Hadoop çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥è§£å†³åˆ†å¸ƒå¼åº”ç”¨ä¸­ç»å¸¸é‡åˆ°çš„ä¸€äº›æ•°æ®ç®¡ç†é—®é¢˜ï¼Œå¦‚ï¼šç»Ÿä¸€å‘½åæœåŠ¡ã€çŠ¶æ€åŒæ­¥æœåŠ¡ã€é›†ç¾¤ç®¡ç†ã€åˆ†å¸ƒå¼åº”ç”¨é…ç½®é¡¹çš„ç®¡ç†ç­‰ã€‚ ç®€å•æ¥è¯´zookeeperæœ¬è´¨ &#x3D; å­˜å‚¨ + ç›‘å¬é€šçŸ¥ã€‚ Zookeeper ç”¨æ¥åšæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒå…·æœ‰èŠ‚ç‚¹å˜æ›´é€šçŸ¥åŠŸèƒ½ï¼Œåªè¦å®¢æˆ·ç«¯ç›‘å¬ç›¸å…³æœåŠ¡èŠ‚ç‚¹ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„æ‰€æœ‰å˜æ›´ï¼Œéƒ½èƒ½åŠæ—¶çš„é€šçŸ¥åˆ°ç›‘å¬å®¢æˆ·ç«¯ï¼Œè¿™æ ·ä½œä¸ºè°ƒç”¨æ–¹åªè¦ä½¿ç”¨Zookeeper çš„å®¢æˆ·ç«¯å°±èƒ½å®ç°æœåŠ¡èŠ‚ç‚¹çš„è®¢é˜…å’Œå˜æ›´é€šçŸ¥åŠŸèƒ½äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦å¤–ï¼ŒZookeeperå¯ç”¨æ€§ä¹Ÿå¯ä»¥ï¼Œå› ä¸ºåªè¦åŠæ•°ä»¥ä¸Šçš„é€‰ä¸¾èŠ‚ç‚¹å­˜æ´»ï¼Œæ•´ä¸ªé›†ç¾¤å°±æ˜¯å¯ç”¨çš„ï¼Œæœ€å°‘èŠ‚ç‚¹æ•°ä¸º3ã€‚ Eureka ç”±Netflixå¼€æºï¼Œå¹¶è¢«Pivatalé›†æˆåˆ°SpringCloudä½“ç³»ä¸­ï¼Œå®ƒæ˜¯åŸºäº RestfulAPI é£æ ¼å¼€å‘çš„æœåŠ¡æ³¨å†Œä¸å‘ç°ç»„ä»¶ã€‚ Consul Consulæ˜¯ç”±HashiCorpåŸºäºGoè¯­è¨€å¼€å‘çš„æ”¯æŒå¤šæ•°æ®ä¸­å¿ƒåˆ†å¸ƒå¼é«˜å¯ç”¨çš„æœåŠ¡å‘å¸ƒå’Œæ³¨å†ŒæœåŠ¡è½¯ä»¶ï¼Œ é‡‡ç”¨Raftç®—æ³•ä¿è¯æœåŠ¡çš„ä¸€è‡´æ€§ï¼Œä¸”æ”¯æŒå¥åº·æ£€æŸ¥ã€‚ Nacos Nacosæ˜¯ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚ç®€å•æ¥è¯´Nacos å°±æ˜¯ æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒçš„ç»„åˆï¼Œå¸®åŠ©æˆ‘ä»¬è§£å†³å¾®æœåŠ¡å¼€å‘å¿…ä¼šæ¶‰åŠåˆ°çš„æœåŠ¡æ³¨å†Œ ä¸å‘ç°ï¼ŒæœåŠ¡é…ç½®ï¼ŒæœåŠ¡ç®¡ç†ç­‰é—®é¢˜ã€‚Nacos æ˜¯ Spring Cloud Alibaba æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œè¿˜æœ‰é…ç½®ã€‚ ç»„ä»¶å è¯­è¨€ CAP å¯¹å¤–æš´éœ²æ¥å£ Eureka Java APï¼ˆè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œä¿è¯å¯ç”¨ï¼‰ HTTP Consul Go CP HTTP/DNS Zookeeper Java CP å®¢æˆ·ç«¯ Nacos Java æ”¯æŒAP/CPåˆ‡æ¢ HTTP CAPå®šç†åˆç§°CAPåŸåˆ™ï¼ŒæŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒConsistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œæœ€å¤šåªèƒ½åŒæ—¶ä¸‰ä¸ªç‰¹æ€§ä¸­çš„ä¸¤ä¸ªï¼Œä¸‰è€…ä¸å¯å…¼å¾—ã€‚ Pï¼šåˆ†åŒºå®¹é”™æ€§ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°æŸèŠ‚ç‚¹æˆ–ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§æˆ–å¯ç”¨æ€§çš„æœåŠ¡ï¼ˆä¸€å®šçš„è¦æ»¡è¶³çš„ï¼‰ Cï¼šæ•°æ®ä¸€è‡´æ€§ï¼šall nodes see the same data at the same time Aï¼šé«˜å¯ç”¨ï¼šReads and writes always succeed CAPä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸‰ä¸ªï¼Œè¦ä¹ˆæ˜¯APï¼Œè¦ä¹ˆæ˜¯CP 4.1.2 æœåŠ¡æ³¨å†Œä¸­å¿ƒç»„ä»¶ EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„ä¸€èˆ¬åŸç†ã€å¯¹æ¯”äº†ä¸»æµçš„æœåŠ¡æ³¨å†Œä¸­å¿ƒæ–¹æ¡ˆï¼Œç›®å…‰èšç„¦Eureka EurekaåŸºç¡€æ¶æ„ Eurekaäº¤äº’åŸç† Eureka åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šEureka Server å’Œ Eureka Clientï¼ŒEureka Clientæ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–ä¸Eureka Serverçš„äº¤äº’ï¼›Eureka Serveræä¾›æœåŠ¡å‘ç°çš„èƒ½åŠ›ï¼Œå„ä¸ªå¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šé€šè¿‡EurekaClientå‘Eureka Server è¿›è¡Œæ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ç½‘ç»œä¿¡æ¯ï¼‰ï¼ŒEureka Serverä¼šå­˜å‚¨è¯¥æœåŠ¡çš„ä¿¡æ¯ï¼› å›¾ä¸­us-east-1cã€us-east-1dï¼Œus-east-1eä»£è¡¨ä¸åŒçš„åŒºä¹Ÿå°±æ˜¯ä¸åŒçš„æœºæˆ¿ å›¾ä¸­æ¯ä¸€ä¸ªEureka Serveréƒ½æ˜¯ä¸€ä¸ªé›†ç¾¤ã€‚ å›¾ä¸­Application Serviceä½œä¸ºæœåŠ¡æä¾›è€…å‘Eureka Serverä¸­æ³¨å†ŒæœåŠ¡ï¼ŒEureka Serveræ¥å—åˆ°æ³¨å†Œäº‹ä»¶ä¼šåœ¨é›†ç¾¤å’Œåˆ†åŒºä¸­è¿›è¡Œæ•°æ®åŒæ­¥ï¼ŒApplication Clientä½œä¸ºæ¶ˆè´¹ç«¯ï¼ˆæœåŠ¡æ¶ˆè´¹è€…ï¼‰å¯ä»¥ä»Eureka Serverä¸­è·å–åˆ°æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œè¿›è¡ŒæœåŠ¡è°ƒç”¨ã€‚ å¾®æœåŠ¡å¯åŠ¨åï¼Œä¼šå‘¨æœŸæ€§åœ°å‘Eureka Serverå‘é€å¿ƒè·³ï¼ˆé»˜è®¤å‘¨æœŸä¸º30ç§’ï¼Œé»˜è®¤Eureka Server 90Sä¼šå°†è¿˜æ²¡æœ‰ç»­çº¦çš„ç»™å‰”é™¤ï¼‰ä»¥ç»­çº¦è‡ªå·±çš„ä¿¡æ¯ Eureka Serveråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡èŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEureka Serverå°†ä¼šæ³¨é”€è¯¥å¾®æœåŠ¡èŠ‚ç‚¹ï¼ˆé»˜è®¤90ç§’ï¼‰ æ¯ä¸ªEureka ServeråŒæ—¶ä¹Ÿæ˜¯Eureka Clientï¼Œå¤šä¸ªEureka Serverä¹‹é—´é€šè¿‡å¤åˆ¶çš„æ–¹å¼å®ŒæˆæœåŠ¡æ³¨å†Œåˆ—è¡¨çš„åŒæ­¥ Eureka Clientä¼šç¼“å­˜Eureka Serverä¸­çš„ä¿¡æ¯ã€‚å³ä½¿æ‰€æœ‰çš„Eureka ServerèŠ‚ç‚¹éƒ½å®•æ‰ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ä¾ç„¶å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¸­çš„ä¿¡æ¯æ‰¾åˆ°æœåŠ¡æä¾›è€… Eurekaé€šè¿‡å¿ƒè·³æ£€æµ‹ã€å¥åº·æ£€æŸ¥å’Œå®¢æˆ·ç«¯ç¼“å­˜ç­‰æœºåˆ¶ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ã€å¯ä¼¸ç¼©æ€§å’Œé«˜å¯ç”¨æ€§ã€‚ 4.1.3 æ­å»ºå•ä¾‹Eureka ServeræœåŠ¡æ³¨å†Œä¸­å¿ƒå®ç°è¿‡ç¨‹ å•å®ä¾‹Eureka Serverâ€”&gt;è®¿é—®ç®¡ç†ç•Œé¢ æœåŠ¡æä¾›è€…ï¼ˆå•†å“å¾®æœåŠ¡æ³¨å†Œåˆ°é›†ç¾¤ï¼‰ æœåŠ¡æ¶ˆè´¹è€…ï¼ˆé¡µé¢é™æ€åŒ–å¾®æœåŠ¡æ³¨å†Œåˆ°Eureka&#x2F;ä»Eureka Serverè·å–æœåŠ¡ä¿¡æ¯ï¼‰ å®Œæˆè°ƒç”¨ 1ã€æ­å»ºEureka ServeræœåŠ¡ my-parentçˆ¶å·¥ç¨‹ä¸­è®¾ç½®Spring Cloudä¾èµ–ç‰ˆæœ¬ä¿¡æ¯ Spring Cloudæ˜¯ä¸€ä¸ªç»¼åˆé¡¹ç›®ï¼Œä¸‹é¢æœ‰å¾ˆå¤šå­é¡¹ç›®ï¼Œæ¯”å¦‚Eurekaå­é¡¹ç›® 1234567891011&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Greenwich.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; 2ã€my-cloud-eurekaå·¥ç¨‹pom.xmlä¸­å¼•å…¥ä¾èµ– 1234567&lt;dependencies&gt; &lt;!--Eureka serverä¾èµ–--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 3ã€åœ¨ymlæ–‡ä»¶ä¸­é…ç½®Eureka ServeræœåŠ¡çš„ç«¯å£ï¼ŒæœåŠ¡åç­‰ä¿¡æ¯ 1234567891011121314#Eureka serveræœåŠ¡ç«¯å£ server: port: 9200 spring: application: name: my-cloud-eureka # åº”ç”¨åç§°ï¼Œä¼šåœ¨Eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯† ï¼ˆserviceIdï¼‰ eureka: instance: hostname: localhost client: service-url: # å®¢æˆ·ç«¯ä¸EurekaServeräº¤äº’çš„åœ°å€ï¼Œå¦‚æœæ˜¯é›†ç¾¤ï¼Œä¹Ÿéœ€è¦å†™å…¶å®ƒServerçš„åœ°å€ defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/ register-with-eureka: false # è‡ªå·±å°±æ˜¯æœåŠ¡ä¸éœ€è¦æ³¨å†Œè‡ªå·± fetch-registry: false #è‡ªå·±å°±æ˜¯æœåŠ¡ä¸éœ€è¦ä»Eureka Serverè·å–æœåŠ¡ä¿¡æ¯,é»˜è®¤ä¸ºtrueï¼Œç½®ä¸ºfalse 4ã€ç¼–å†™å¯åŠ¨ç±»ï¼Œå£°æ˜å½“å‰æœåŠ¡ä¸ºEurekaæ³¨å†Œä¸­å¿ƒ 123456789101112package com.hao.eureka;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;@SpringBootApplication //// å£°æ˜æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªEurekaæœåŠ¡ @EnableEurekaServer public class EurekaApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(EurekaApplication.class,args); &#125;&#125; 5ã€è®¿é—®9200ç«¯å£ 6ã€å…¶ä»–æœåŠ¡æ³¨å†Œåˆ°Eureka å…¶ä»–æœåŠ¡pomæ·»åŠ Eureka Clientä¾èµ– 12345&lt;!--Eureka client--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; ymlé…ç½®EurekaæœåŠ¡ç«¯ä¿¡æ¯ 123456789eureka: client: serviceUrl: # eureka serverçš„è·¯å¾„ defaultZone: http://localhost:9200/eureka/ instance: #ä½¿ç”¨ipæ³¨å†Œï¼Œå¦åˆ™ä¼šä½¿ç”¨ä¸»æœºåæ³¨å†Œäº†ï¼ˆæ­¤å¤„è€ƒè™‘åˆ°å¯¹è€ç‰ˆæœ¬çš„å…¼å®¹ï¼Œæ–°ç‰ˆæœ¬ç»è¿‡å®éªŒéƒ½æ˜¯ipï¼‰ prefer-ip-address: true #è‡ªå®šä¹‰å®ä¾‹æ˜¾ç¤ºæ ¼å¼ï¼ŒåŠ ä¸Šç‰ˆæœ¬å·ï¼Œä¾¿äºå¤šç‰ˆæœ¬ç®¡ç†ï¼Œæ³¨æ„æ˜¯ip-addressï¼Œæ—©æœŸç‰ˆæœ¬æ˜¯ipAddress instance-id: $&#123;spring.cloud.client.ip-address&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125;:@project.version@ ä¿®æ”¹å¯åŠ¨ç±» 123456789101112@SpringBootApplication @EnableDiscoveryClient //@EnableEurekaClient public class OtherApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(OtherApplication.class,args); &#125; @Bean public RestTemplate restTemplate()&#123; return new RestTemplate(); &#125;&#125; 4.1.4 æ­å»ºEureka Serveré«˜å¯ç”¨é›†ç¾¤åœ¨äº’è”ç½‘åº”ç”¨å½“ä¸­ï¼ŒæœåŠ¡å®ä¾‹å¾ˆå°‘æœ‰å•ä¸ªçš„ã€‚ å¦‚æœEurekaServeråªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥å®ä¾‹æŒ‚æ‰ï¼Œæ­£å¥½å¾®æœåŠ¡æ¶ˆè´¹è€…æœ¬åœ°ç¼“å­˜åˆ—è¡¨ä¸­çš„æœåŠ¡å®ä¾‹ä¹Ÿä¸å¯ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ•´ä¸ªç³»ç»Ÿéƒ½ä¼šå—åˆ°å½±å“ã€‚ åœ¨ç”Ÿäº§ç¯å¢ƒå½“ä¸­ï¼Œæˆ‘ä»¬ä¼šé…ç½®Eureka Serveré›†ç¾¤å®ç°é«˜å¯ç”¨ã€‚Eureka Serveré›†ç¾¤ä¹‹ä¸­çš„èŠ‚ç‚¹é€šè¿‡ç‚¹å¯¹ç‚¹ï¼ˆP2Pï¼‰é€šä¿¡çš„æ–¹å¼å…±äº«æœåŠ¡æ³¨å†Œè¡¨ã€‚æˆ‘ä»¬å¼€å¯ä¸¤å°Eureka Serveræ¥æ­å»ºé›†ç¾¤ã€‚ ç”±äºæ˜¯åœ¨ä¸ªäººè®¡ç®—æœºä¸­è¿›è¡Œæµ‹è¯•å¾ˆéš¾æ¨¡æ‹Ÿå¤šä¸»æœºçš„æƒ…å†µï¼ŒEurekaé…ç½®Serveré›†ç¾¤æ—¶éœ€è¦æ‰§è¡Œhoståœ°å€ã€‚æ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸ªäººç”µè„‘çš„hoståœ°å€ 12127.0.0.1 eurekaA127.0.0.1 eurekaB å°†my-cloud-eurekaå¤åˆ¶ä¸€ä»½ä¸ºmy-cloud-eureka9201 1ã€ä¿®æ”¹eurekaæœåŠ¡çš„é…ç½® eurekaA 12345678910111213server: port: 9200 spring: application: name: my-cloud-eureka # åº”ç”¨åç§°ï¼Œä¼šåœ¨Eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯† ï¼ˆserviceIdï¼‰ eureka: instance: hostname: eurekaA client: register-with-eureka: true fetch-registry: true serviceUrl: defaultZone: http://eurekaA:9200/eureka,http://eurekaB:9201/eureka eurekaB 12345678910111213server: port: 9201spring: application: name: my-cloud-eureka # åº”ç”¨åç§°ï¼Œä¼šåœ¨Eurekaä¸­ä½œä¸ºæœåŠ¡çš„idæ ‡è¯† ï¼ˆserviceIdï¼‰ eureka: instance: hostname: eurekaA client: register-with-eureka: true fetch-registry: true serviceUrl: defaultZone: http://eurekaA:9200/eureka,http://eurekaB:9201/eureka å•†å“å¾®æœåŠ¡ 123456789101112131415server: port: 9000Spring: application: name: service-product datasource: ...eureka: client: serviceUrl: # æŠŠeurekaé›†ç¾¤ä¸­çš„æ‰€æœ‰urléƒ½å¡«å†™äº†è¿›æ¥ï¼Œä¹Ÿå¯ä»¥åªå†™ä¸€å°ï¼Œå› ä¸ºå„ä¸ª eureka serverå¯ä»¥åŒæ­¥æ³¨å†Œè¡¨ defaultZone: http://eurekaA:9200/eureka,http://eurekaB:9201/eureka instance: prefer-ip-address: true instance-id: $&#123;spring.cloud.client.ip-address&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125;:@project.version@ é¡µé¢é™æ€åŒ–æœåŠ¡ 1234567891011121314151617server: port: 9100Spring: application: name: service-page datasource: ...eureka: client: serviceUrl: # æŠŠeurekaé›†ç¾¤ä¸­çš„æ‰€æœ‰urléƒ½å¡«å†™äº†è¿›æ¥ï¼Œä¹Ÿå¯ä»¥åªå†™ä¸€å°ï¼Œå› ä¸ºå„ä¸ª eureka serverå¯ä»¥åŒæ­¥æ³¨å†Œè¡¨ defaultZone: http://eurekaA:9200/eureka,http://eurekaB:9201/eureka instance: #ä½¿ç”¨ipæ³¨å†Œï¼Œå¦åˆ™ä¼šä½¿ç”¨ä¸»æœºåæ³¨å†Œäº†ï¼ˆæ­¤å¤„è€ƒè™‘åˆ°å¯¹è€ç‰ˆæœ¬çš„å…¼å®¹ï¼Œæ–°ç‰ˆæœ¬ç»è¿‡å®éªŒéƒ½æ˜¯ipï¼‰ prefer-ip-address: true #è‡ªå®šä¹‰å®ä¾‹æ˜¾ç¤ºæ ¼å¼ï¼ŒåŠ ä¸Šç‰ˆæœ¬å·ï¼Œä¾¿äºå¤šç‰ˆæœ¬ç®¡ç†ï¼Œæ³¨æ„æ˜¯ip-addressï¼Œæ—©æœŸç‰ˆæœ¬æ˜¯ipAddress instance-id: $&#123;spring.cloud.client.ip-address&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125;:@project.version@ æ¶ˆè´¹è€…è°ƒç”¨æä¾›è€… æ”¹é€ é¡µé¢é™æ€åŒ–å¾®æœåŠ¡ï¼šä¹‹å‰æ˜¯ç›´æ¥é€šè¿‡RestTemplateå†™æ­»URLè¿›è¡Œè°ƒç”¨ï¼Œç°åœ¨é€šè¿‡Eurekaæ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚ 123456789101112131415161718192021222324@RestController @RequestMapping(&quot;/page&quot;) public class PageController &#123; @Autowired private RestTemplate restTemplate; @Autowired private DiscoveryClient discoveryClient; @RequestMapping(&quot;/getProduct01/&#123;id&#125;&quot;) public Product findDataById(@PathVariable Integer id)&#123; //1.è·å¾—Eurekaä¸­æ³¨å†Œçš„service-productå®ä¾‹é›†åˆ List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;service-product&quot;); //2.è·å¾—å®ä¾‹é›†åˆä¸­çš„ç¬¬ä¸€ä¸ª ServiceInstance instance = instances.get(0); //3.æ ¹æ®å®ä¾‹ä¿¡æ¯æ‹¼æ¥IPåœ°å€ String host = instance.getHost(); int port = instance.getPort(); String url = &quot;http://&quot;+host+&quot;:&quot;+port+&quot;/product/query/&quot;+id; //4.è°ƒç”¨ Product product = restTemplate.getForObject(url, Product.class); System.out.println(&quot;ä»service-productè·å¾—productå¯¹è±¡:&quot;+product); return product; &#125;&#125; 4.1.5 Eurekaç»†èŠ‚è¯¦è§£ï¼ˆ1ï¼‰Eurekaå…ƒæ•°æ®è¯¦è§£Eurekaçš„å…ƒæ•°æ®æœ‰ä¸¤ç§ï¼šæ ‡å‡†å…ƒæ•°æ®å’Œè‡ªå®šä¹‰å…ƒæ•°æ®ã€‚ **æ ‡å‡†å…ƒæ•°æ®ï¼š**ä¸»æœºåã€IPåœ°å€ã€ç«¯å£å·ç­‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯éƒ½ä¼šè¢«å‘å¸ƒåœ¨æœåŠ¡æ³¨å†Œè¡¨ä¸­ï¼Œç”¨äºæœåŠ¡ä¹‹é—´çš„è°ƒç”¨ã€‚ **è‡ªå®šä¹‰å…ƒæ•°æ®ï¼š**å¯ä»¥ä½¿ç”¨eureka.instance.metadata-mapé…ç½®ï¼Œç¬¦åˆKEY&#x2F;VALUEçš„å­˜å‚¨æ ¼å¼ã€‚è¿™äº›å…ƒæ•°æ®å¯ä»¥åœ¨è¿œç¨‹å®¢æˆ·ç«¯ä¸­è®¿é—®ã€‚ 12345678910instance: #ä½¿ç”¨ipæ³¨å†Œï¼Œå¦åˆ™ä¼šä½¿ç”¨ä¸»æœºåæ³¨å†Œäº†ï¼ˆæ­¤å¤„è€ƒè™‘åˆ°å¯¹è€ç‰ˆæœ¬çš„å…¼å®¹ï¼Œæ–°ç‰ˆæœ¬ç»è¿‡å®éªŒéƒ½æ˜¯ipï¼‰ prefer-ip-address: true #è‡ªå®šä¹‰å®ä¾‹æ˜¾ç¤ºæ ¼å¼ï¼ŒåŠ ä¸Šç‰ˆæœ¬å·ï¼Œä¾¿äºå¤šç‰ˆæœ¬ç®¡ç†ï¼Œæ³¨æ„æ˜¯ip-addressï¼Œæ—©æœŸç‰ˆæœ¬æ˜¯ipAddress instance-id: $&#123;spring.cloud.client.ip-address&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125;:@project.version@ metadata-map: ip: 192.168.200.128 port: 10000 user: hao pwd: 123456 æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨DiscoveryClient è·å–æŒ‡å®šå¾®æœåŠ¡çš„æ‰€æœ‰å…ƒæ•°æ®ä¿¡æ¯ 12345678910111213141516171819202122@RestController @RequestMapping(&quot;/metadata&quot;) public class MetadataController &#123; @Autowired private DiscoveryClient discoveryClient; @RequestMapping(&quot;show&quot;) public String showMetadata()&#123; String result = &quot;&quot;; List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;service-page&quot;); for (ServiceInstance instance:instances) &#123; //è·å–æœåŠ¡å…ƒæ•°æ® Map&lt;String, String&gt; metadata = instance.getMetadata(); Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = metadata.entrySet(); for (Map.Entry&lt;String,String&gt; entry : entries)&#123; String key = entry.getKey(); String value = entry.getValue(); result+=&quot;key:&quot;+key+&quot;,value:&quot;+value; &#125; &#125; return result; &#125;&#125; æ ‡å‡†å…ƒç´ æ®ç›´æ¥åœ¨instanceå±æ€§ä¸‹ï¼Œè€Œè‡ªå®šä¹‰å…ƒç´ æ®åœ¨instancesçš„metadataå½“ä¸­ ï¼ˆ2ï¼‰Eurekaå®¢æˆ·ç«¯è¯¦è§£æœåŠ¡æä¾›è€…ï¼ˆä¹Ÿæ˜¯Eurekaå®¢æˆ·ç«¯ï¼‰è¦å‘EurekaServeræ³¨å†ŒæœåŠ¡ï¼Œå¹¶å®ŒæˆæœåŠ¡ç»­çº¦ç­‰å·¥ä½œ æœåŠ¡æ³¨å†Œè¯¦è§£ï¼ˆæœåŠ¡æä¾›è€…ï¼‰ å½“æˆ‘ä»¬å¯¼å…¥äº†eureka-clientä¾èµ–åæ ‡ï¼Œé…ç½®EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ æœåŠ¡åœ¨å¯åŠ¨æ—¶ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘èµ·æ³¨å†Œè¯·æ±‚ï¼Œæºå¸¦æœåŠ¡å…ƒæ•°æ®ä¿¡æ¯ Eurekaæ³¨å†Œä¸­å¿ƒä¼šæŠŠæœåŠ¡çš„ä¿¡æ¯ä¿å­˜åœ¨Mapä¸­ã€‚ æœåŠ¡ç»­çº¦è¯¦è§£ï¼ˆæœåŠ¡æä¾›è€…ï¼‰ æœåŠ¡æ¯éš”30ç§’ä¼šå‘æ³¨å†Œä¸­å¿ƒç»­çº¦(å¿ƒè·³)ä¸€æ¬¡ï¼ˆä¹Ÿç§°ä¸ºæŠ¥æ´»ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ç»­çº¦ï¼Œç§Ÿçº¦åœ¨90ç§’ååˆ°æœŸï¼Œç„¶åæœåŠ¡ä¼šè¢«å¤±æ•ˆã€‚æ¯éš”30ç§’çš„ç»­çº¦æ“ä½œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¿ƒè·³æ£€æµ‹ Eureka Client ï¼š30Sç»­çº¦ä¸€æ¬¡ï¼Œåœ¨Eureka Serveræ›´æ–°è‡ªå·±çš„çŠ¶æ€ (Clientç«¯è¿›è¡Œé…ç½®) Eureka Serverï¼š90Sè¿˜æ²¡æœ‰è¿›è¡Œç»­çº¦ï¼Œå°†è¯¥å¾®æœåŠ¡å®ä¾‹ä»æœåŠ¡æ³¨å†Œè¡¨ï¼ˆMapï¼‰å‰”é™¤ (Clientç«¯è¿›è¡Œé…ç½®) Eureka Clientï¼š 30Sæ‹‰å–æœåŠ¡æœ€æ–°çš„æ³¨å†Œè¡¨å¹¶ç¼“å­˜åˆ°æœ¬åœ° (Clientç«¯è¿›è¡Œé…ç½®) å¾€å¾€ä¸éœ€è¦æˆ‘ä»¬è°ƒæ•´è¿™ä¸¤ä¸ªé…ç½® 1234567#å‘EurekaæœåŠ¡ä¸­å¿ƒé›†ç¾¤æ³¨å†ŒæœåŠ¡ eureka: instance: # ç§Ÿçº¦ç»­çº¦é—´éš”æ—¶é—´ï¼Œé»˜è®¤30ç§’ lease-renewal-interval-in-seconds: 30 # ç§Ÿçº¦åˆ°æœŸï¼ŒæœåŠ¡æ—¶æ•ˆæ—¶é—´ï¼Œé»˜è®¤å€¼90ç§’,æœåŠ¡è¶…è¿‡90ç§’æ²¡æœ‰å‘ç”Ÿå¿ƒè·³ï¼ŒEurekaServerä¼šå°†æœåŠ¡ä»åˆ—è¡¨ç§»é™¤ lease-expiration-duration-in-seconds: 90 è·å–æœåŠ¡åˆ—è¡¨ï¼ˆæœåŠ¡æ³¨å†Œè¡¨ï¼‰è¯¦è§£ï¼ˆæœåŠ¡æ¶ˆè´¹è€…ï¼‰ æ¯éš”30ç§’æœåŠ¡ä¼šä»æ³¨å†Œä¸­å¿ƒä¸­æ‹‰å–ä¸€ä»½æœåŠ¡åˆ—è¡¨ï¼Œè¿™ä¸ªæ—¶é—´å¯ä»¥é€šè¿‡é…ç½®ä¿®æ”¹ã€‚å¾€å¾€ä¸éœ€è¦æˆ‘ä»¬è°ƒæ•´ 12345#å‘EurekaæœåŠ¡ä¸­å¿ƒé›†ç¾¤æ³¨å†ŒæœåŠ¡ eureka: client: # æ¯éš”å¤šä¹…æ‹‰å–ä¸€æ¬¡æœåŠ¡åˆ—è¡¨ registry-fetch-interval-seconds: 30 æœåŠ¡æ¶ˆè´¹è€…å¯åŠ¨æ—¶ï¼Œä» EurekaServeræœåŠ¡åˆ—è¡¨è·å–åªè¯»å¤‡ä»½ï¼Œç¼“å­˜åˆ°æœ¬åœ° æ¯éš”30ç§’ï¼Œä¼šé‡æ–°è·å–å¹¶æ›´æ–°æ•°æ® æ¯éš”30ç§’çš„æ—¶é—´å¯ä»¥é€šè¿‡é…ç½®eureka.client.registry-fetch-interval-secondsä¿®æ”¹ ï¼ˆ3ï¼‰EurekaæœåŠ¡ç«¯è¯¦è§£æœåŠ¡ä¸‹çº¿ï¼š å½“æœåŠ¡æ­£å¸¸å…³é—­æ“ä½œæ—¶ï¼Œä¼šå‘é€æœåŠ¡ä¸‹çº¿çš„RESTè¯·æ±‚ç»™EurekaServerã€‚ æœåŠ¡ä¸­å¿ƒæ¥å—åˆ°è¯·æ±‚åï¼Œå°†è¯¥æœåŠ¡ç½®ä¸ºä¸‹çº¿çŠ¶æ€ å¤±æ•ˆå‰”é™¤ Eureka Serverä¼šå®šæ—¶ï¼ˆé—´éš”å€¼æ˜¯eureka.server.eviction-interval-timer-in-msï¼Œé»˜è®¤60sï¼‰è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœå‘ç°å®ä¾‹åœ¨åœ¨ä¸€å®šæ—¶é—´ï¼ˆæ­¤å€¼ç”±å®¢æˆ·ç«¯è®¾ç½®çš„eureka.instance.lease-expiration-duration-in\u0002secondså®šä¹‰ï¼Œé»˜è®¤å€¼ä¸º90sï¼‰å†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³ï¼Œåˆ™ä¼šæ³¨é”€æ­¤å®ä¾‹ã€‚ è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ­£æ˜¯ä¸€ç§é’ˆå¯¹ç½‘ç»œå¼‚å¸¸æ³¢åŠ¨çš„å®‰å…¨ä¿æŠ¤æªæ–½ï¼Œä½¿ç”¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼èƒ½ä½¿Eurekaé›†ç¾¤æ›´åŠ çš„å¥å£®ã€ç¨³å®šçš„è¿è¡Œã€‚ è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶çš„å·¥ä½œæœºåˆ¶æ˜¯ï¼šå¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„å®¢æˆ·ç«¯èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‡ºç°äº†ç½‘ç»œæ•…éšœï¼ŒEureka Serverè‡ªåŠ¨è¿›å…¥è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š Eureka Serverä¸å†ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤é•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡ã€‚ Eureka Serverä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Šï¼Œä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨ã€‚ å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰Eureka Serveræ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸­ã€‚ å› æ­¤Eureka Serverå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±è”çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒZKé‚£æ ·å¦‚æœæœ‰ä¸€åŠä¸å¯ç”¨çš„æƒ…å†µä¼šå¯¼è‡´æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨è€Œå˜æˆç˜«ç—ªã€‚ ä¸ºä»€ä¹ˆä¼šæœ‰è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Ÿ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœEureka Serveråœ¨ä¸€å®šæ—¶é—´å†…ï¼ˆé»˜è®¤90ç§’ï¼‰æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼ŒEureka Serverå°†ä¼šç§»é™¤è¯¥å®ä¾‹ã€‚ä½†æ˜¯å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶ï¼Œå¾®æœåŠ¡ä¸Eureka Serverä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œè€Œå¾®æœåŠ¡æœ¬èº«æ˜¯æ­£å¸¸è¿è¡Œçš„ï¼Œæ­¤æ—¶ä¸åº”è¯¥ç§»é™¤è¿™ä¸ªå¾®æœåŠ¡ï¼Œæ‰€ä»¥å¼•å…¥äº†è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚ æœåŠ¡ä¸­å¿ƒé¡µé¢ä¼šæ˜¾ç¤ºå¦‚ä¸‹æç¤ºä¿¡æ¯ æˆ‘ä»¬åœ¨å•æœºæµ‹è¯•çš„æ—¶å€™å¾ˆå®¹æ˜“æ»¡è¶³å¿ƒè·³å¤±è´¥æ¯”ä¾‹åœ¨ 15 åˆ†é’Ÿä¹‹å†…ä½äº 85%ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè§¦å‘ Eurekaçš„ä¿æŠ¤æœºåˆ¶ï¼Œä¸€æ—¦å¼€å¯äº†ä¿æŠ¤æœºåˆ¶ï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼Œåˆ™æœåŠ¡æ³¨å†Œä¸­å¿ƒç»´æŠ¤çš„æœåŠ¡å®ä¾‹å°±ä¸æ˜¯é‚£ä¹ˆå‡†ç¡®äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬é€šè¿‡ä¿®æ”¹Eureka Serverçš„é…ç½®æ–‡ä»¶æ¥å…³é—­ä¿æŠ¤æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ³¨å†Œä¸­å¿ƒä¸­ä¸å¯ç”¨çš„å®ä¾‹è¢«åŠæ—¶çš„å‰”é™¤ï¼ˆä¸æ¨èï¼‰ã€‚ 123eureka: server: enable-self-preservation: false # å…³é—­è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼ˆç¼ºçœä¸ºæ‰“å¼€ï¼‰ ç»éªŒï¼šå»ºè®®ç”Ÿäº§ç¯å¢ƒæ‰“å¼€è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ 4.2 Ribbonè´Ÿè½½å‡è¡¡4.2.1 å…³äºè´Ÿè½½å‡è¡¡è´Ÿè½½å‡è¡¡ä¸€èˆ¬åˆ†ä¸ºæœåŠ¡å™¨ç«¯è´Ÿè½½å‡è¡¡å’Œå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ æ‰€è°“æœåŠ¡å™¨ç«¯è´Ÿè½½å‡è¡¡ï¼Œæ¯”å¦‚Nginxã€F5è¿™äº›ï¼Œè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ä¹‹åç”±è¿™äº›è´Ÿè½½å‡è¡¡å™¨æ ¹æ®ä¸€å®šçš„ç®—æ³•å°†è¯·æ±‚è·¯ç”±åˆ°ç›®æ ‡æœåŠ¡å™¨å¤„ç†ã€‚ æ‰€è°“å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦è¯´çš„Ribbonï¼ŒæœåŠ¡æ¶ˆè´¹è€…å®¢æˆ·ç«¯ä¼šæœ‰ä¸€ä¸ªæœåŠ¡å™¨åœ°å€åˆ—è¡¨ï¼Œè°ƒç”¨æ–¹åœ¨è¯·æ±‚å‰é€šè¿‡ä¸€å®šçš„è´Ÿè½½å‡è¡¡ç®—æ³•é€‰æ‹©ä¸€ä¸ªæœåŠ¡å™¨è¿›è¡Œè®¿é—®ï¼Œè´Ÿè½½å‡è¡¡ç®—æ³•çš„æ‰§è¡Œæ˜¯åœ¨è¯·æ±‚å®¢æˆ·ç«¯è¿›è¡Œã€‚ Ribbonæ˜¯Netflixå‘å¸ƒçš„è´Ÿè½½å‡è¡¡å™¨ã€‚Eurekaä¸€èˆ¬é…åˆRibbonè¿›è¡Œä½¿ç”¨ï¼ŒRibbonåˆ©ç”¨ä»Eurekaä¸­è¯»å–åˆ°æœåŠ¡ä¿¡æ¯ï¼Œåœ¨è°ƒç”¨æœåŠ¡æä¾›è€…æä¾›çš„æœåŠ¡æ—¶ï¼Œä¼šæ ¹æ®ä¸€å®šçš„ç®—æ³•è¿›è¡Œè´Ÿè½½ã€‚ 4.2.2 Ribboné«˜çº§åº”ç”¨**éœ€æ±‚ï¼š**å¤åˆ¶å•†å“å¾®æœåŠ¡9001ï¼Œåœ¨9000å’Œ9001ç¼–å†™Controllerï¼Œè¿”å›æœåŠ¡å®ä¾‹ç«¯å£ã€‚Pageå¾®æœåŠ¡ä¸­é€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥è°ƒç”¨service-productçš„controller åœ¨å¾®æœåŠ¡ä¸­ä½¿ç”¨Ribbonä¸éœ€è¦é¢å¤–å¯¼å…¥ä¾èµ–åæ ‡ï¼Œå¾®æœåŠ¡ä¸­å¼•å…¥è¿‡eureka-clientç›¸å…³ä¾èµ–ï¼Œä¼šè‡ªåŠ¨å¼•å…¥Ribbonç›¸å…³ä¾èµ–åæ ‡ã€‚ ä»£ç ä¸­ä½¿ç”¨å¦‚ä¸‹ï¼Œåœ¨RestTemplateä¸Šæ·»åŠ å¯¹åº”æ³¨è§£å³å¯ 12345678910111213@SpringBootApplication @EnableDiscoveryClient //@EnableEurekaClient public class PageApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(PageApplication.class,args); &#125; @Bean //Ribbonè´Ÿè½½å‡è¡¡ @LoadBalanced public RestTemplate restTemplate()&#123; return new RestTemplate(); &#125; &#125; åˆ›å»ºserivce-product-9001å¾®æœåŠ¡ï¼Œåˆ›å»ºServerConfigControllerï¼Œå®šä¹‰æ–¹æ³•è¿”å›å½“å‰å¾®æœåŠ¡æ‰€ä½¿ç”¨çš„å®¹å™¨ç«¯å£å· ä¿®æ”¹æœåŠ¡æä¾›è€…apiè¿”å›å€¼ï¼Œè¿”å›å½“å‰å®ä¾‹çš„ç«¯å£å·ï¼Œä¾¿äºè§‚å¯Ÿè´Ÿè½½æƒ…å†µ 12345678910@RestController @RequestMapping(&quot;/product&quot;) public class ServerConfigController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @requestMapping(&quot;server&quot;) public String findServerPort()&#123; return serverPort; &#125;&#125; åœ¨é¡µé¢é™æ€åŒ–å¾®æœåŠ¡ä¸­è°ƒç”¨server-productä¸‹çš„èµ„æºè·¯å¾„ï¼šhttp://server-product/product/server 12345@RequestMapping(&quot;/getPort&quot;) public String getProductServerPort()&#123; String url = &quot;http://service-product/server/query&quot;; return restTemplate.getForObject(url,String.class); &#125; æµ‹è¯•å¯ä»¥çŸ¥é“é»˜è®¤æ˜¯ä¸€ä¸ªè½®è¯¢çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ 4.2.3 Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥Ribbonå†…ç½®äº†å¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå†…éƒ¨è´Ÿè´£å¤æ‚å‡è¡¡çš„é¡¶çº§æ¥å£ä¸º com.netflix.loadbalancer.IRule ï¼Œ æ¥å£ç®€ä»‹: 1234567package com.netflix.loadbalancer;public interface IRule&#123; public Server choose(Object key); public void setLoadBalancer(ILoadBalancer lb); public ILoadBalancer getLoadBalancer();&#125; ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š 1234#é’ˆå¯¹çš„è¢«è°ƒç”¨æ–¹å¾®æœåŠ¡åç§°,ä¸åŠ å°±æ˜¯å…¨å±€ç”Ÿæ•ˆ service-product: ribbon: NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule #éšæœºç­–ç•¥ 1234#é’ˆå¯¹çš„è¢«è°ƒç”¨æ–¹å¾®æœåŠ¡åç§°,ä¸åŠ å°±æ˜¯å…¨å±€ç”Ÿæ•ˆ service-product: ribbon: NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RoundRobinRule #è½®è¯¢ç­–ç•¥ 4.2.4 Ribbonæ ¸å¿ƒæºç åˆ¨æRibbonå·¥ä½œåŸç† è€è§„çŸ©ï¼šSpringCloudå……åˆ†åˆ©ç”¨äº†SpringBootçš„è‡ªåŠ¨è£…é…ç‰¹ç‚¹ï¼Œæ‰¾spring.factoriesé…ç½®æ–‡ä»¶ 1org.springframework.boot.autoconfigure.EnableAutoConfiguration=org.springframework.cloud.netflix.ribbon.RibbonAutoConfiguration LoadBalancerAutoConfiguration ç±»ä¸­é…ç½® è£…é…éªŒè¯ï¼š è‡ªåŠ¨æ³¨å…¥ æ³¨å…¥RestTemplateå®šåˆ¶å™¨ ä¸ºrestTemplateå¯¹è±¡è®¾ç½®loadBalancerInterceptor åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ˜ç™½ï¼Œæ·»åŠ äº†æ³¨è§£çš„RestTemplateå¯¹è±¡ä¼šè¢«æ·»åŠ ä¸€ä¸ªæ‹¦æˆªå™¨LoadBalancerInterceptorï¼Œè¯¥æ‹¦æˆªå™¨å°±æ˜¯åç»­æ‹¦æˆªè¯·æ±‚è¿›è¡Œè´Ÿè½½å¤„ç†çš„ã€‚ 4.3 Hystrixç†”æ–­å™¨å±äºä¸€ç§å®¹é”™æœºåˆ¶ 4.3.1 å¾®æœåŠ¡å½“ä¸­çš„é›ªå´©æ•ˆåº”å½“å±±å¡ç§¯é›ªå†…éƒ¨çš„å†…èšåŠ›æŠ—æ‹’ä¸äº†å®ƒæ‰€å—åˆ°çš„é‡åŠ›æ‹‰å¼•æ—¶ï¼Œä¾¿å‘ä¸‹æ»‘åŠ¨ï¼Œå¼•èµ·å¤§é‡é›ªä½“å´©å¡Œï¼Œäººä»¬æŠŠè¿™ç§è‡ªç„¶ç°è±¡ç§°ä½œé›ªå´©ã€‚ å¾®æœåŠ¡ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚å¯èƒ½éœ€è¦å¤šä¸ªå¾®æœåŠ¡æ¥å£æ‰èƒ½å®ç°ï¼Œä¼šå½¢æˆå¤æ‚çš„è°ƒç”¨é“¾è·¯ã€‚ **æœåŠ¡é›ªå´©æ•ˆåº”ï¼š**æ˜¯ä¸€ç§å› â€œæœåŠ¡æä¾›è€…çš„ä¸å¯ç”¨â€ï¼ˆåŸå› ï¼‰å¯¼è‡´â€œæœåŠ¡è°ƒç”¨è€…ä¸å¯ç”¨â€ï¼ˆç»“æœï¼‰ï¼Œå¹¶å°†ä¸å¯ç”¨é€æ¸æ”¾å¤§çš„ç°è±¡ã€‚ æ‰‡å…¥ï¼šä»£è¡¨ç€è¯¥å¾®æœåŠ¡è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œæ‰‡å…¥å¤§ï¼Œè¯´æ˜è¯¥æ¨¡å—å¤ç”¨æ€§å¥½ æ‰‡å‡ºï¼šè¯¥å¾®æœåŠ¡è°ƒç”¨å…¶ä»–å¾®æœåŠ¡çš„ä¸ªæ•°ï¼Œæ‰‡å‡ºå¤§ï¼Œè¯´æ˜ä¸šåŠ¡é€»è¾‘å¤æ‚ æ‰‡å…¥å¤§æ˜¯ä¸€ä¸ªå¥½äº‹ï¼Œæ‰‡å‡ºå¤§ä¸ä¸€å®šæ˜¯å¥½äº‹ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªåº”ç”¨å¯èƒ½ä¼šæœ‰å¤šä¸ªå¾®æœåŠ¡ç»„æˆï¼Œå¾®æœåŠ¡ä¹‹é—´çš„æ•°æ®äº¤äº’é€šè¿‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å®Œæˆã€‚è¿™å°±å¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾å¾®æœåŠ¡Aè°ƒç”¨å¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cï¼Œå¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cåˆè°ƒç”¨å…¶å®ƒçš„å¾®æœåŠ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ã€‚å¦‚æœæ‰‡å‡ºçš„é“¾è·¯ä¸ŠæŸä¸ªå¾®æœåŠ¡çš„è°ƒç”¨å“åº”æ—¶é—´è¿‡é•¿æˆ–è€…ä¸å¯ç”¨ï¼Œå¯¹å¾®æœåŠ¡Açš„è°ƒç”¨å°±ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿèµ„æºï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œæ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€ã€‚ å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæœ€ä¸‹æ¸¸å•†å“å¾®æœåŠ¡å“åº”æ—¶é—´è¿‡é•¿ï¼Œå¤§é‡è¯·æ±‚é˜»å¡ï¼Œå¤§é‡çº¿ç¨‹ä¸ä¼šé‡Šæ”¾ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œæœ€ç»ˆå¯¼è‡´ä¸Šæ¸¸æœåŠ¡ç”šè‡³æ•´ä¸ªç³»ç»Ÿç˜«ç—ªã€‚ å½¢æˆåŸå›  æœåŠ¡é›ªå´©çš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š æœåŠ¡æä¾›è€…ä¸å¯ç”¨ é‡è¯•åŠ å¤§è¯·æ±‚æµé‡ æœåŠ¡è°ƒç”¨è€…ä¸å¯ç”¨ æœåŠ¡é›ªå´©çš„æ¯ä¸ªé˜¶æ®µéƒ½å¯èƒ½ç”±ä¸åŒçš„åŸå› é€ æˆï¼š 4.3.2 é›ªå´©æ•ˆåº”è§£å†³æ–¹æ¡ˆä»å¯ç”¨æ€§å¯é æ€§ç€æƒ³ï¼Œä¸ºé˜²æ­¢ç³»ç»Ÿçš„æ•´ä½“ç¼“æ…¢ç”šè‡³å´©æºƒï¼Œé‡‡ç”¨çš„æŠ€æœ¯æ‰‹æ®µï¼› ä¸‹é¢ï¼Œæˆ‘ä»¬ä»‹ç»ä¸‰ç§æŠ€æœ¯æ‰‹æ®µåº”å¯¹å¾®æœåŠ¡ä¸­çš„é›ªå´©æ•ˆåº”ï¼Œè¿™ä¸‰ç§æ‰‹æ®µéƒ½æ˜¯ä»ç³»ç»Ÿå¯ç”¨æ€§ã€å¯é æ€§è§’åº¦å‡ºå‘ï¼Œå°½é‡é˜²æ­¢ç³»ç»Ÿæ•´ä½“ç¼“æ…¢ç”šè‡³ç˜«ç—ªã€‚ æœåŠ¡ç†”æ–­ ç†”æ–­æœºåˆ¶æ˜¯åº”å¯¹é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶ã€‚æˆ‘ä»¬åœ¨å„ç§åœºæ™¯ä¸‹éƒ½ä¼šæ¥è§¦åˆ°ç†”æ–­è¿™ä¸¤ä¸ªå­—ã€‚é«˜å‹ç”µè·¯ä¸­ï¼Œå¦‚æœæŸä¸ªåœ°æ–¹çš„ç”µå‹è¿‡é«˜ï¼Œç†”æ–­å™¨å°±ä¼šç†”æ–­ï¼Œå¯¹ç”µè·¯è¿›è¡Œä¿æŠ¤ã€‚è‚¡ç¥¨äº¤æ˜“ä¸­ï¼Œå¦‚æœè‚¡ç¥¨æŒ‡æ•°è¿‡é«˜ï¼Œä¹Ÿä¼šé‡‡ç”¨ç†”æ–­æœºåˆ¶ï¼Œæš‚åœè‚¡ç¥¨çš„äº¤æ˜“ã€‚åŒæ ·ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œç†”æ–­æœºåˆ¶ä¹Ÿæ˜¯èµ·ç€ç±»ä¼¼çš„ä½œç”¨ã€‚å½“æ‰‡å‡ºé“¾è·¯çš„æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨ï¼Œè¿›è¡ŒæœåŠ¡çš„é™çº§ï¼Œå¿«é€Ÿè¿”å›é”™è¯¯çš„å“åº”ä¿¡æ¯ã€‚å½“æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡è°ƒç”¨å“åº”æ­£å¸¸åï¼Œæ¢å¤è°ƒç”¨é“¾è·¯ã€‚ æ³¨æ„ï¼š æœåŠ¡ç†”æ–­é‡ç‚¹åœ¨**â€œæ–­â€**ï¼Œåˆ‡æ–­å¯¹ä¸‹æ¸¸æœåŠ¡çš„è°ƒç”¨ æœåŠ¡ç†”æ–­å’ŒæœåŠ¡é™çº§å¾€å¾€æ˜¯ä¸€èµ·ä½¿ç”¨çš„ï¼ŒHystrixå°±æ˜¯è¿™æ ·ã€‚ æœåŠ¡é™çº§ é€šä¿—è®²å°±æ˜¯æ•´ä½“èµ„æºä¸å¤Ÿç”¨äº†ï¼Œå…ˆå°†ä¸€äº›ä¸å…³ç´§çš„æœåŠ¡åœæ‰ï¼ˆè°ƒç”¨æˆ‘çš„æ—¶å€™ï¼Œç»™ä½ è¿”å›ä¸€ä¸ªé¢„ç•™çš„å€¼ï¼Œä¹Ÿå«åšå…œåº•æ•°æ®ï¼‰ï¼Œå¾…æ¸¡è¿‡éš¾å…³é«˜å³°è¿‡å»ï¼Œå†æŠŠé‚£äº›æœåŠ¡æ‰“å¼€ã€‚ æœåŠ¡é™çº§ä¸€èˆ¬æ˜¯ä»æ•´ä½“è€ƒè™‘ï¼Œå°±æ˜¯å½“æŸä¸ªæœåŠ¡ç†”æ–­ä¹‹åï¼ŒæœåŠ¡å™¨å°†ä¸å†è¢«è°ƒç”¨ï¼Œæ­¤åˆ»å®¢æˆ·ç«¯å¯ä»¥è‡ªå·±å‡†å¤‡ä¸€ä¸ªæœ¬åœ°çš„fallbackå›è°ƒï¼Œè¿”å›ä¸€ä¸ªç¼ºçœå€¼ï¼Œè¿™æ ·åšï¼Œè™½ç„¶æœåŠ¡æ°´å¹³ä¸‹é™ï¼Œä½†å¥½æ­¹å¯ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰è¦å¼ºã€‚ æœåŠ¡é™æµ æœåŠ¡é™çº§æ˜¯å½“æœåŠ¡å‡ºé—®é¢˜æˆ–è€…å½±å“åˆ°æ ¸å¿ƒæµç¨‹çš„æ€§èƒ½æ—¶ï¼Œæš‚æ—¶å°†æœåŠ¡å±è”½æ‰ï¼Œå¾…é«˜å³°æˆ–è€…é—®é¢˜è§£å†³åå†æ‰“å¼€ï¼›ä½†æ˜¯æœ‰äº›åœºæ™¯å¹¶ä¸èƒ½ç”¨æœåŠ¡é™çº§æ¥è§£å†³ï¼Œæ¯”å¦‚ç§’æ€ä¸šåŠ¡è¿™æ ·çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç»“åˆæœåŠ¡é™æµæ¥é™åˆ¶è¿™äº›åœºæ™¯çš„å¹¶å‘&#x2F;è¯·æ±‚é‡ é™æµæªæ–½ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚ é™åˆ¶æ€»å¹¶å‘æ•°ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ã€çº¿ç¨‹æ± ï¼‰ é™åˆ¶ç¬æ—¶å¹¶å‘æ•°ï¼ˆå¦‚nginxé™åˆ¶ç¬æ—¶å¹¶å‘è¿æ¥æ•°ï¼‰ é™åˆ¶æ—¶é—´çª—å£å†…çš„å¹³å‡é€Ÿç‡ï¼ˆå¦‚Guavaçš„RateLimiterã€nginxçš„limit_reqæ¨¡å—ï¼Œé™åˆ¶æ¯ç§’çš„å¹³å‡é€Ÿç‡ï¼‰ é™åˆ¶è¿œç¨‹æ¥å£è°ƒç”¨é€Ÿç‡ã€é™åˆ¶MQçš„æ¶ˆè´¹é€Ÿç‡ç­‰ 4.3.3 Hystrixç®€ä»‹**[æ¥è‡ªå®˜ç½‘]**Hystrix(è±ªçŒª)ï¼Œå®£è¨€â€œdefend your applicationâ€æ˜¯ç”±Netflflixå¼€æºçš„ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹ç³»ç»Ÿã€æœåŠ¡æˆ–è€…ç¬¬ä¸‰æ–¹åº“ï¼Œé˜²æ­¢çº§è”å¤±è´¥ï¼Œä»è€Œæå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ä¸å®¹é”™æ€§ã€‚Hystrixä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ç‚¹å®ç°å»¶è¿Ÿå’Œå®¹é”™ã€‚ åŒ…è£¹è¯·æ±‚ï¼šä½¿ç”¨HystrixCommandåŒ…è£¹å¯¹ä¾èµ–çš„è°ƒç”¨é€»è¾‘ã€‚ é¡µé¢é™æ€åŒ–å¾®æœåŠ¡æ–¹ï¼ˆ@HystrixCommand æ·»åŠ Hystrixæ§åˆ¶ï¼‰ è·³é—¸æœºåˆ¶ï¼šå½“æŸæœåŠ¡çš„é”™è¯¯ç‡è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼æ—¶ï¼ŒHystrixå¯ä»¥è·³é—¸ï¼Œåœæ­¢è¯·æ±‚è¯¥æœåŠ¡ä¸€æ®µæ—¶é—´ã€‚ èµ„æºéš”ç¦»ï¼šHystrixä¸ºæ¯ä¸ªä¾èµ–éƒ½ç»´æŠ¤äº†ä¸€ä¸ªå°å‹çš„çº¿ç¨‹æ± (èˆ±å£æ¨¡å¼)ã€‚å¦‚æœè¯¥çº¿ç¨‹æ± å·²æ»¡ï¼Œ å‘å¾€è¯¥ä¾èµ–çš„è¯·æ±‚å°±è¢«ç«‹å³æ‹’ç»ï¼Œè€Œä¸æ˜¯æ’é˜Ÿç­‰å¾…ï¼Œä»è€ŒåŠ é€Ÿå¤±è´¥åˆ¤å®šã€‚ ç›‘æ§ï¼šHystrixå¯ä»¥è¿‘ä¹å®æ—¶åœ°ç›‘æ§è¿è¡ŒæŒ‡æ ‡å’Œé…ç½®çš„å˜åŒ–ï¼Œä¾‹å¦‚æˆåŠŸã€å¤±è´¥ã€è¶…æ—¶ã€ä»¥åŠè¢«æ‹’ç»çš„è¯·æ±‚ç­‰ã€‚ å›é€€æœºåˆ¶ï¼šå½“è¯·æ±‚å¤±è´¥ã€è¶…æ—¶ã€è¢«æ‹’ç»ï¼Œæˆ–å½“æ–­è·¯å™¨æ‰“å¼€æ—¶ï¼Œæ‰§è¡Œå›é€€é€»è¾‘ã€‚å›é€€é€»è¾‘ç”±å¼€å‘äººå‘˜è‡ªè¡Œæä¾›ï¼Œä¾‹å¦‚è¿”å›ä¸€ä¸ªç¼ºçœå€¼ã€‚ è‡ªæˆ‘ä¿®å¤ï¼šæ–­è·¯å™¨æ‰“å¼€ä¸€æ®µæ—¶é—´åï¼Œä¼šè‡ªåŠ¨è¿›å…¥â€œåŠå¼€â€çŠ¶æ€ï¼ˆæ¢æµ‹æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œå¦‚è¿˜æ˜¯ä¸å¯ç”¨ï¼Œå†æ¬¡é€€å›æ‰“å¼€çŠ¶æ€ï¼‰ã€‚ 4.3.4 Hystrixåº”ç”¨ï¼ˆ1ï¼‰ç†”æ–­å¤„ç†**ç›®çš„ï¼š**å•†å“å¾®æœåŠ¡é•¿æ—¶é—´æ²¡æœ‰å“åº”ï¼ŒæœåŠ¡æ¶ˆè´¹è€…â€”&gt;é¡µé¢é™æ€åŒ–å¾®æœåŠ¡å¿«é€Ÿå¤±è´¥ç»™ç”¨æˆ·æç¤º å¼•å…¥ä¾èµ–ï¼š æœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹ï¼ˆé™æ€åŒ–å¾®æœåŠ¡ï¼‰ä¸­å¼•å…¥Hystrixä¾èµ–åæ ‡ï¼ˆä¹Ÿå¯ä»¥æ·»åŠ åœ¨çˆ¶å·¥ç¨‹ä¸­ï¼‰ 12345&lt;!--ç†”æ–­å™¨Hystrix--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; **å¼€å¯ç†”æ–­ï¼š**æœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹ï¼ˆé™æ€åŒ–å¾®æœåŠ¡ï¼‰çš„å¯åŠ¨ç±»ä¸­æ·»åŠ ç†”æ–­å™¨å¼€å¯æ³¨è§£ 12345678910111213141516/** * æ³¨è§£ç®€åŒ–å†™æ³• * @SpringCloudApplication=@SpringBootApplication+@EnableDiscoveryClient+@EnableCircuitBreaker */@SpringBootApplication @EnableDiscoveryClient //@EnableEurekaClient @EnableCircuitBreaker // å¼€å¯ç†”æ–­ public class PageApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(PageApplication.class,args); &#125; @Bean @LoadBalanced//Ribbonè´Ÿè½½å‡è¡¡ public RestTemplate restTemplate()&#123; return new RestTemplate(); &#125; &#125; **å®šä¹‰æœåŠ¡é™çº§çš„å¤„ç†æ–¹å¼ï¼š**ä¸šåŠ¡æ–¹æ³•ä¸Šä½¿ç”¨@HystrixCommandçš„fallbackMethodå±æ€§å…³è”åˆ°æœåŠ¡é™çº§å¤„ç†æ–¹æ³• 1234567891011121314151617181920212223/** * æä¾›è€…æ¨¡æ‹Ÿå¤„ç†è¶…æ—¶ï¼Œè°ƒç”¨æ–¹æ³•æ·»åŠ Hystrixæ§åˆ¶ */ // ä½¿ç”¨@HystrixCommandæ³¨è§£è¿›è¡Œç†”æ–­æ§åˆ¶ @HystrixCommand( // çº¿ç¨‹æ± æ ‡è¯†ï¼Œè¦ä¿æŒå”¯ä¸€ï¼Œä¸å”¯ä¸€çš„è¯å°±å…±ç”¨äº† threadPoolKey = &quot;getProductServerPort2&quot;, // çº¿ç¨‹æ± ç»†èŠ‚å±æ€§é…ç½® threadPoolProperties = &#123; @HystrixProperty(name=&quot;coreSize&quot;,value = &quot;1&quot;), // çº¿ç¨‹æ•° @HystrixProperty(name=&quot;maxQueueSize&quot;,value=&quot;20&quot;) // ç­‰å¾…é˜Ÿåˆ—é•¿ åº¦ &#125;, // commandPropertiesç†”æ–­çš„ä¸€äº›ç»†èŠ‚å±æ€§é…ç½® commandProperties = &#123; // æ¯ä¸€ä¸ªå±æ€§éƒ½æ˜¯ä¸€ä¸ªHystrixProperty @HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value= &quot;2000&quot;) &#125; )@RequestMapping(&quot;/getPort2&quot;) public String getProductServerPort2()&#123; String url = &quot;http://service-product/product/server&quot;; return restTemplate.getForObject(url,String.class); &#125; å•†å“å¾®æœåŠ¡æ¨¡æ‹Ÿè¶…æ—¶æ“ä½œ 123456789101112131415@RestController @RequestMapping(&quot;/product&quot;) public class ProductController &#123; @Value(&quot;$&#123;server.port&#125;&quot;) private String serverPort; @RequestMapping(&quot;/server&quot;) public String findServerPort()&#123; try &#123; Thread.sleep(10000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; return serverPort; &#125; &#125; å¯¹äºæ²¡æœ‰é…ç½®HystrixCommandçš„æ–¹æ³•getPort,ç»è¿‡10ç§’ä»ç„¶å¯ä»¥æœ€ç»ˆè·å–åˆ°ç»“æœã€‚æ–¹æ³•getPort2è®¾ç½®ç†”æ–­é…ç½®çš„æ˜¯2ç§’å“åº”æ—¶é—´è¶…è¿‡ç›´æ¥ç†”æ–­ ï¼ˆ2ï¼‰é™çº§å¤„ç†é…ç½®@HystrixCommandæ³¨è§£ï¼Œå®šä¹‰é™çº§å¤„ç†æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536@HystrixCommand( // çº¿ç¨‹æ± æ ‡è¯†ï¼Œè¦ä¿æŒå”¯ä¸€ï¼Œä¸å”¯ä¸€çš„è¯å°±å…±ç”¨äº† threadPoolKey = &quot;getProductServerPort3TimeoutFallback&quot;, // çº¿ç¨‹æ± ç»†èŠ‚å±æ€§é…ç½® threadPoolProperties = &#123; @HystrixProperty(name = &quot;coreSize&quot;, value = &quot;2&quot;), // çº¿ç¨‹æ•° @HystrixProperty(name = &quot;maxQueueSize&quot;, value = &quot;20&quot;) // ç­‰å¾… é˜Ÿåˆ—é•¿åº¦ &#125;, // commandPropertiesç†”æ–­çš„ä¸€äº›ç»†èŠ‚å±æ€§é…ç½® commandProperties = &#123; // æ¯ä¸€ä¸ªå±æ€§éƒ½æ˜¯ä¸€ä¸ªHystrixProperty @HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;2000&quot;), // hystrixé«˜çº§é…ç½®ï¼Œå®šåˆ¶å·¥ä½œè¿‡ç¨‹ç»†èŠ‚ // ç»Ÿè®¡æ—¶é—´çª—å£å®šä¹‰ @HystrixProperty(name = &quot;metrics.rollingStats.timeInMilliseconds&quot;, value = &quot;8000&quot;), // ç»Ÿè®¡æ—¶é—´çª—å£å†…çš„æœ€å°è¯·æ±‚æ•° @HystrixProperty(name = &quot;circuitBreaker.requestVolumeThreshold&quot;, value = &quot;2&quot;), // ç»Ÿè®¡æ—¶é—´çª—å£å†…çš„é”™è¯¯æ•°é‡ç™¾åˆ†æ¯”é˜ˆå€¼ @HystrixProperty(name = &quot;circuitBreaker.errorThresholdPercentage&quot;, value = &quot;50&quot;), // è‡ªæˆ‘ä¿®å¤æ—¶çš„æ´»åŠ¨çª—å£é•¿åº¦ @HystrixProperty(name = &quot;circuitBreaker.sleepWindowInMilliseconds&quot;, value = &quot;3000&quot;) &#125;, fallbackMethod = &quot;myFallBack&quot; // å›é€€æ–¹æ³• )@RequestMapping(&quot;/getPort3&quot;) public String getProductServerPort3() &#123; String url = &quot;http://service-product/product/server&quot;; return restTemplate.getForObject(url, String.class); &#125;/** * å®šä¹‰å›é€€æ–¹æ³•ï¼Œè¿”å›é¢„è®¾é»˜è®¤å€¼ * æ³¨æ„ï¼šè¯¥æ–¹æ³•å½¢å‚å’Œè¿”å›å€¼ä¸åŸå§‹æ–¹æ³•ä¿æŒä¸€è‡´ */ public String myFallBack() &#123; return &quot;è¿™ä¸ªç»“æœæ˜¯è°ƒç”¨è¶…æ—¶è¿›è¡Œç†”æ–­äº†å“¦&quot;; // å…œåº•æ•°æ® &#125; 4.3.5 Hystrixèˆ±å£æ¨¡å¼å³çº¿ç¨‹æ± éš”ç¦»ç­–ç•¥ å¦‚æœä¸è¿›è¡Œä»»ä½•è®¾ç½®ï¼Œæ‰€æœ‰ç†”æ–­æ–¹æ³•ä½¿ç”¨åŒä¸€ä¸ªHystrixçº¿ç¨‹æ± ï¼ˆ10ä¸ªçº¿ç¨‹ï¼‰ï¼Œé‚£ä¹ˆè¿™æ ·çš„è¯ä¼šå¯¼è‡´é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯æ‰‡å‡ºé“¾è·¯å¾®æœåŠ¡ä¸å¯ç”¨å¯¼è‡´çš„ï¼Œè€Œæ˜¯æˆ‘ä»¬çš„çº¿ç¨‹æœºåˆ¶å¯¼è‡´çš„ï¼Œå¦‚æœæ–¹æ³•Açš„è¯·æ±‚æŠŠ10ä¸ªçº¿ç¨‹éƒ½ç”¨äº†ï¼Œæ–¹æ³•2è¯·æ±‚å¤„ç†çš„æ—¶å€™å‹æ ¹éƒ½æ²¡æ³•å»è®¿é—®Bï¼Œå› ä¸ºæ²¡æœ‰çº¿ç¨‹å¯ç”¨ï¼Œå¹¶ä¸æ˜¯BæœåŠ¡ä¸å¯ç”¨ã€‚ ä¸ºäº†é¿å…é—®é¢˜æœåŠ¡è¯·æ±‚è¿‡å¤šå¯¼è‡´æ­£å¸¸æœåŠ¡æ— æ³•è®¿é—®ï¼ŒHystrix ä¸æ˜¯é‡‡ç”¨å¢åŠ çº¿ç¨‹æ•°ï¼Œè€Œæ˜¯å•ç‹¬çš„ä¸ºæ¯ä¸€ä¸ªæ§åˆ¶æ–¹æ³•åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± çš„æ–¹å¼ï¼Œè¿™ç§æ¨¡å¼å«åšâ€œèˆ±å£æ¨¡å¼â€ï¼Œä¹Ÿæ˜¯çº¿ç¨‹éš”ç¦»çš„æ‰‹æ®µ 4.3.6 Hystrixå·¥ä½œæµç¨‹ä¸é«˜çº§åº”ç”¨ å½“è°ƒç”¨å‡ºç°é—®é¢˜æ—¶ï¼Œå¼€å¯ä¸€ä¸ªæ—¶é—´çª—ï¼ˆ10sï¼‰ åœ¨è¿™ä¸ªæ—¶é—´çª—å†…ï¼Œç»Ÿè®¡è°ƒç”¨æ¬¡æ•°æ˜¯å¦è¾¾åˆ°æœ€å°è¯·æ±‚æ•°ï¼Ÿ å¦‚æœæ²¡æœ‰è¾¾åˆ°ï¼Œåˆ™é‡ç½®ç»Ÿè®¡ä¿¡æ¯ï¼Œå›åˆ°ç¬¬1æ­¥ å¦‚æœè¾¾åˆ°äº†ï¼Œåˆ™ç»Ÿè®¡å¤±è´¥çš„è¯·æ±‚æ•°å æ‰€æœ‰è¯·æ±‚æ•°çš„ç™¾åˆ†æ¯”ï¼Œæ˜¯å¦è¾¾åˆ°é˜ˆå€¼ï¼Ÿ å¦‚æœè¾¾åˆ°ï¼Œåˆ™è·³é—¸ï¼ˆä¸å†è¯·æ±‚å¯¹åº”æœåŠ¡ï¼‰ å¦‚æœæ²¡æœ‰è¾¾åˆ°ï¼Œåˆ™é‡ç½®ç»Ÿè®¡ä¿¡æ¯ï¼Œå›åˆ°ç¬¬1æ­¥ å¦‚æœè·³é—¸ï¼Œåˆ™ä¼šå¼€å¯ä¸€ä¸ªæ´»åŠ¨çª—å£ï¼ˆé»˜è®¤5sï¼‰ï¼Œæ¯éš”5sï¼ŒHystrixä¼šè®©ä¸€ä¸ªè¯·æ±‚é€šè¿‡,åˆ°è¾¾é‚£ä¸ªé—®é¢˜æœåŠ¡ï¼Œçœ‹æ˜¯å¦è°ƒç”¨æˆåŠŸï¼Œå¦‚æœæˆåŠŸï¼Œé‡ç½®æ–­è·¯å™¨å›åˆ°ç¬¬1æ­¥ï¼Œå¦‚æœå¤±è´¥ï¼Œå›åˆ°ç¬¬3æ­¥ 12345678910111213141516/** * 8ç§’é’Ÿå†…ï¼Œè¯·æ±‚æ¬¡æ•°è¾¾åˆ°2ä¸ªï¼Œå¹¶ä¸”å¤±è´¥ç‡åœ¨50%ä»¥ä¸Šï¼Œå°±è·³é—¸ * è·³é—¸åæ´»åŠ¨çª—å£è®¾ç½®ä¸º3s */ @HystrixCommand( commandProperties = &#123; //ç»Ÿè®¡çª—å£æ—¶é—´çš„è®¾ç½® @HystrixProperty(name = &quot;metrics.rollingStats.timeInMilliseconds&quot;,value = &quot;8000&quot;), //ç»Ÿè®¡çª—å£å†…çš„æœ€å°è¯·æ±‚æ•° @HystrixProperty(name = &quot;circuitBreaker.requestVolumeThreshold&quot;,value = &quot;2&quot;), //ç»Ÿè®¡çª—å£å†…é”™è¯¯è¯·æ±‚é˜ˆå€¼çš„è®¾ç½® 50% @HystrixProperty(name = &quot;circuitBreaker.errorThresholdPercentage&quot;,value = &quot;50&quot;), //è‡ªæˆ‘ä¿®å¤çš„æ´»åŠ¨çª—å£æ—¶é—´ @HystrixProperty(name = &quot;circuitBreaker.sleepWindowInMilliseconds&quot;,value = &quot;3000&quot;) &#125; ) æˆ‘ä»¬ä¸Šè¿°é€šè¿‡æ³¨è§£è¿›è¡Œçš„é…ç½®ä¹Ÿå¯ä»¥é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­: 12345678910111213# é…ç½®ç†”æ–­ç­–ç•¥ï¼š hystrix: command: default: circuitBreaker: # å¼ºåˆ¶æ‰“å¼€ç†”æ–­å™¨ï¼Œå¦‚æœè¯¥å±æ€§è®¾ç½®ä¸ºtrueï¼Œå¼ºåˆ¶æ–­è·¯å™¨è¿›å…¥æ‰“å¼€çŠ¶æ€ï¼Œå°†ä¼šæ‹’ç»æ‰€æœ‰çš„è¯·æ±‚ã€‚ é»˜è®¤falseå…³é—­çš„ forceOpen: false # è§¦å‘ç†”æ–­é”™è¯¯æ¯”ä¾‹é˜ˆå€¼ï¼Œé»˜è®¤å€¼50% errorThresholdPercentage: 50 # ç†”æ–­åä¼‘çœ æ—¶é•¿ï¼Œé»˜è®¤å€¼5ç§’ sleepWindowInMilliseconds: 3000 # ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯20 requestVolumeThreshold: 2 execution: isolation: thread: # ç†”æ–­è¶…æ—¶è®¾ç½®ï¼Œé»˜è®¤ä¸º1ç§’ timeoutInMilliseconds: 2000 åŸºäºspringbootçš„å¥åº·æ£€æŸ¥è§‚å¯Ÿè·³é—¸çŠ¶æ€ï¼ˆè‡ªåŠ¨æŠ•é€’å¾®æœåŠ¡æš´éœ²å¥åº·æ£€æŸ¥ç»†èŠ‚ï¼‰ 123456789# springbootä¸­æš´éœ²å¥åº·æ£€æŸ¥ç­‰æ–­ç‚¹æ¥å£ management: endpoints: web: exposure: include: &quot;*&quot; # æš´éœ²å¥åº·æ¥å£çš„ç»†èŠ‚ endpoint: health: show-details: always è®¿é—®å¥åº·æ£€æŸ¥æ¥å£ï¼šhttp://localhost:9100/actuator/health 4.4 Feignè¿œç¨‹è°ƒç”¨ç»„ä»¶åœ¨ä¹‹å‰çš„æ¡ˆä¾‹ä¸­ï¼ŒæœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æä¾›è€…çš„æ—¶å€™ä½¿ç”¨RestTemplateæŠ€æœ¯ã€‚ 4.4.1 Feignç®€ä»‹Feignæ˜¯Netï¬‚ixå¼€å‘çš„ä¸€ä¸ªè½»é‡çº§RESTfulçš„HTTPæœåŠ¡å®¢æˆ·ç«¯ï¼ˆç”¨å®ƒæ¥å‘èµ·è¯·æ±‚ï¼Œè¿œç¨‹è°ƒç”¨çš„ï¼‰ï¼Œæ˜¯ä»¥Javaæ¥å£æ³¨è§£çš„æ–¹å¼è°ƒç”¨Httpè¯·æ±‚ï¼Œè€Œä¸ç”¨åƒJavaä¸­é€šè¿‡å°è£…HTTPè¯·æ±‚æŠ¥æ–‡çš„æ–¹å¼ç›´æ¥è°ƒç”¨ï¼ŒFeignè¢«å¹¿æ³›åº”ç”¨åœ¨Spring Cloud çš„è§£å†³æ–¹æ¡ˆä¸­ã€‚ ç±»ä¼¼äºDubboï¼ŒæœåŠ¡æ¶ˆè´¹è€…æ‹¿åˆ°æœåŠ¡æä¾›è€…çš„æ¥å£ï¼Œç„¶ååƒè°ƒç”¨æœ¬åœ°æ¥å£æ–¹æ³•ä¸€æ ·å»è°ƒç”¨ï¼Œå®é™…å‘å‡ºçš„æ˜¯è¿œç¨‹çš„è¯·æ±‚ã€‚ Feignå¯å¸®åŠ©æˆ‘ä»¬æ›´åŠ ä¾¿æ·ï¼Œä¼˜é›…çš„è°ƒç”¨HTTP APIï¼šä¸éœ€è¦æˆ‘ä»¬å»æ‹¼æ¥urlç„¶åå‘¢è°ƒç”¨restTemplateçš„apiï¼Œåœ¨SpringCloudä¸­ï¼Œä½¿ç”¨Feignéå¸¸ç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªæ¥å£ï¼ˆåœ¨æ¶ˆè´¹è€…â€“æœåŠ¡è°ƒç”¨æ–¹è¿™ä¸€ç«¯ï¼‰ï¼Œå¹¶åœ¨æ¥å£ä¸Šæ·»åŠ ä¸€äº›æ³¨è§£ï¼Œä»£ç å°±å®Œæˆäº† SpringCloudå¯¹Feignè¿›è¡Œäº†å¢å¼ºï¼Œä½¿Feignæ”¯æŒäº†SpringMVCæ³¨è§£ï¼ˆOpenFeignï¼‰ æœ¬è´¨ï¼šå°è£…äº†Httpè°ƒç”¨æµç¨‹ï¼Œæ›´ç¬¦åˆé¢å‘æ¥å£åŒ–çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œç±»ä¼¼äºDubboçš„æœåŠ¡è°ƒç”¨ 4.4.2 Feigné…ç½®åº”ç”¨åœ¨æœåŠ¡è°ƒç”¨è€…å·¥ç¨‹ï¼ˆæ¶ˆè´¹ï¼‰åˆ›å»ºæ¥å£ï¼ˆæ·»åŠ æ³¨è§£ï¼‰ Feign &#x3D; RestTemplate+Ribbon+Hystrix æœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹ï¼ˆé¡µé¢é™æ€åŒ–å¾®æœåŠ¡ï¼‰ä¸­å¼•å…¥Feignä¾èµ–ï¼ˆæˆ–è€…çˆ¶ç±»å·¥ç¨‹ï¼‰ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; æœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹ï¼ˆé™æ€åŒ–å¾®æœåŠ¡ï¼‰å¯åŠ¨ç±»ä½¿ç”¨æ³¨è§£@EnableFeignClientsæ·»åŠ Feignæ”¯æŒ 12345678@SpringBootApplication @EnableDiscoveryClient // å¼€å¯æœåŠ¡å‘ç° @EnableFeignClients // å¼€å¯Feign public class PageApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(PageApplication.class,args); &#125; &#125; **æ³¨æ„ï¼š**æ­¤æ—¶å»æ‰Hystrixç†”æ–­çš„æ”¯æŒæ³¨è§£@EnableCircuitBreakerå³å¯åŒ…æ‹¬å¼•å…¥çš„ä¾èµ–ï¼Œå› ä¸ºFeignä¼šè‡ªåŠ¨å¼•å…¥ åœ¨æ¶ˆè´¹è€…å¾®æœåŠ¡ä¸­åˆ›å»ºFeignæ¥å£ 1234567891011121314151617181920/** * @author hao * @date 2022/3/10 17:29 */@FeignClient(name = &quot;service-product&quot;)public interface ProductFeign &#123; /** * é€šè¿‡idè·å–å•†å“ä¿¡æ¯ * @param id * @return */ @RequestMapping(&quot;/product/query/&#123;id&#125;&quot;) public Product getProduct(@PathVariable Integer id); /** * è·å¾—ç«¯å£å· * @return */ @RequestMapping(&quot;/product/server&quot;) public String getPort();&#125; æ³¨æ„ï¼š @FeignClientæ³¨è§£çš„nameå±æ€§ç”¨äºæŒ‡å®šè¦è°ƒç”¨çš„æœåŠ¡æä¾›è€…åç§°ï¼Œå’ŒæœåŠ¡æä¾›è€…ymlæ–‡ä»¶ä¸­spring.application.nameä¿æŒä¸€è‡´ æ¥å£ä¸­çš„æ¥å£æ–¹æ³•ï¼Œå°±å¥½æ¯”æ˜¯è¿œç¨‹æœåŠ¡æä¾›è€…Controllerä¸­çš„Handeræ–¹æ³•ï¼ˆåªä¸è¿‡å¦‚åŒæœ¬åœ°è°ƒç”¨äº†ï¼‰ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œå‚æ•°ç»‘å®šçš„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨@PathVariableã€@RequestParamã€@RequestHeaderç­‰ï¼Œè¿™ä¹Ÿæ˜¯OpenFeignå¯¹SpringMVCæ³¨è§£çš„æ”¯æŒï¼Œä½†æ˜¯éœ€è¦æ³¨æ„valueå¿…é¡»è®¾ç½®ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ @FeignClient(name &#x3D; â€œservice-productâ€)ï¼Œnameåœ¨æ¶ˆè´¹è€…å¾®æœåŠ¡ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆå‡çº§Spring Boot 2.1.0 Spring Cloud Greenwich.M1 ç‰ˆæœ¬åï¼Œåœ¨2ä¸ªFeignæ¥å£ç±»å†…å®šä¹‰ç›¸åŒçš„åå­—ï¼Œ @FeignClient(name &#x3D; ç›¸åŒçš„åå­— å°±ä¼šå‡ºç°æŠ¥é”™ï¼Œåœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸ä¼šæç¤ºæŠ¥é”™ï¼‰ï¼Œæ‰€ä»¥æœ€å¥½å°†è°ƒç”¨ä¸€ä¸ªå¾®æœåŠ¡çš„ä¿¡æ¯éƒ½å®šä¹‰åœ¨ä¸€ä¸ªFeignæ¥å£ä¸­ã€‚ æ”¹é€ PageControllerä¸­åŸæœ‰çš„è°ƒç”¨æ–¹å¼ 1234567891011121314@RestController @RequestMapping(&quot;/page&quot;) public class PageController &#123; @Autowired private ProductFeign productFeign; @RequestMapping(&quot;/getProduct2/&#123;id&#125;&quot;) public Product getProduct2(@PathVariable Integer id) &#123; return productFeign.getProduct(id); &#125; @RequestMapping(&quot;/getPort4&quot;) public String getPort() &#123; return productFeign.getPort(); &#125;&#125; è¿™é‡Œä¹‹å‰æä¾›æ–¹çš„getPortåšäº†10ç§’ç¡çœ ï¼Œè¿™é‡Œçš„getPort4å°±ç›´æ¥å¤±è´¥äº†ã€‚è¯´æ˜ä½¿ç”¨feignåœ¨é»˜è®¤æƒ…å†µæœ‰è¶…æ—¶çš„é…ç½® 4.4.3 Feignå¯¹è´Ÿè½½å‡è¡¡çš„æ”¯æŒFeign æœ¬èº«å·²ç»é›†æˆäº†Ribbonä¾èµ–å’Œè‡ªåŠ¨é…ç½®ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦é¢å¤–å¼•å…¥ä¾èµ–ï¼Œå¯ä»¥é€šè¿‡ribbon.xx æ¥è¿› è¡Œå…¨å±€é…ç½®,ä¹Ÿå¯ä»¥é€šè¿‡æœåŠ¡å.ribbon.xx æ¥å¯¹æŒ‡å®šæœåŠ¡è¿›è¡Œç»†èŠ‚é…ç½®é…ç½®ï¼ˆå‚è€ƒä¹‹å‰ï¼Œæ­¤å¤„ç•¥ï¼‰ Feigné»˜è®¤çš„è¯·æ±‚å¤„ç†è¶…æ—¶æ—¶é•¿1sï¼Œæœ‰æ—¶å€™æˆ‘ä»¬çš„ä¸šåŠ¡ç¡®å®æ‰§è¡Œçš„éœ€è¦ä¸€å®šæ—¶é—´ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦è°ƒæ•´è¯·æ±‚å¤„ç†è¶…æ—¶æ—¶é•¿ï¼ŒFeignè‡ªå·±æœ‰è¶…æ—¶è®¾ç½®ï¼Œå¦‚æœé…ç½®Ribbonçš„è¶…æ—¶ï¼Œåˆ™ä¼šä»¥Ribbonçš„ä¸ºå‡† 1234567891011121314#é’ˆå¯¹çš„è¢«è°ƒç”¨æ–¹å¾®æœåŠ¡åç§°,ä¸åŠ å°±æ˜¯å…¨å±€ç”Ÿæ•ˆ service-product: ribbon: #è¯·æ±‚è¿æ¥è¶…æ—¶æ—¶é—´ #ConnectTimeout: 2000 #è¯·æ±‚å¤„ç†è¶…æ—¶æ—¶é—´ #ReadTimeout: 5000 #å¯¹æ‰€æœ‰æ“ä½œéƒ½è¿›è¡Œé‡è¯• OkToRetryOnAllOperations: true ####æ ¹æ®å¦‚ä¸Šé…ç½®ï¼Œå½“è®¿é—®åˆ°æ•…éšœè¯·æ±‚çš„æ—¶å€™ï¼Œå®ƒä¼šå†å°è¯•è®¿é—®ä¸€æ¬¡å½“å‰å®ä¾‹ï¼ˆæ¬¡æ•°ç”± MaxAutoRetriesé…ç½®ï¼‰ï¼Œ ####å¦‚æœä¸è¡Œï¼Œå°±æ¢ä¸€ä¸ªå®ä¾‹è¿›è¡Œè®¿é—®ï¼Œå¦‚æœè¿˜ä¸è¡Œï¼Œå†æ¢ä¸€æ¬¡å®ä¾‹è®¿é—®ï¼ˆæ›´æ¢æ¬¡æ•°ç”± MaxAutoRetriesNextServeré…ç½®ï¼‰ï¼Œ ####å¦‚æœä¾ç„¶ä¸è¡Œï¼Œè¿”å›å¤±è´¥ä¿¡æ¯ã€‚ MaxAutoRetries: 0 #å¯¹å½“å‰é€‰ä¸­å®ä¾‹é‡è¯•æ¬¡æ•°ï¼Œä¸åŒ…æ‹¬ç¬¬ä¸€æ¬¡è°ƒç”¨ MaxAutoRetriesNextServer: 0 #åˆ‡æ¢å®ä¾‹çš„é‡è¯•æ¬¡æ•° NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RoundRobinRule #è´Ÿè½½ç­–ç•¥ è°ƒæ•´ 4.4.4 Feignå¯¹ç†”æ–­å™¨çš„æ”¯æŒåœ¨Feignå®¢æˆ·ç«¯å·¥ç¨‹é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰ä¸­å¼€å¯Feignå¯¹ç†”æ–­å™¨çš„æ”¯æŒ 1234# å¼€å¯Feignçš„ç†”æ–­åŠŸèƒ½ feign: hystrix: enabled: true Feignçš„è¶…æ—¶æ—¶é•¿è®¾ç½®é‚£å…¶å®å°±ä¸Šé¢Ribbonçš„è¶…æ—¶æ—¶é•¿è®¾ç½® Hystrixè¶…æ—¶è®¾ç½®ï¼ˆå°±æŒ‰ç…§ä¹‹å‰Hystrixè®¾ç½®çš„æ–¹å¼å°±OKäº†ï¼‰ æ³¨æ„ å¼€å¯Hystrixä¹‹åï¼ŒFeignä¸­çš„æ–¹æ³•éƒ½ä¼šè¢«è¿›è¡Œä¸€ä¸ªç®¡ç†äº†ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜å°±è¿›å…¥å¯¹åº”çš„å›é€€é€»è¾‘å¤„ç† é’ˆå¯¹è¶…æ—¶è¿™ä¸€ç‚¹ï¼Œå½“å‰æœ‰ä¸¤ä¸ªè¶…æ—¶æ—¶é—´è®¾ç½®ï¼ˆFeignï¼ˆribbonï¼‰&#x2F;hystrixï¼‰ï¼Œç†”æ–­çš„æ—¶å€™æ˜¯æ ¹æ®è¿™ä¸¤ä¸ªæ—¶é—´çš„æœ€å°å€¼æ¥è¿›è¡Œçš„ï¼Œå³å¤„ç†æ—¶é•¿è¶…è¿‡æœ€çŸ­çš„é‚£ä¸ªè¶…æ—¶æ—¶é—´äº†å°±ç†”æ–­è¿›å…¥å›é€€é™çº§é€»è¾‘ 1234567891011121314151617hystrix: command: default: circuitBreaker: # å¼ºåˆ¶æ‰“å¼€ç†”æ–­å™¨ï¼Œå¦‚æœè¯¥å±æ€§è®¾ç½®ä¸ºtrueï¼Œå¼ºåˆ¶æ–­è·¯å™¨è¿›å…¥æ‰“å¼€çŠ¶æ€ï¼Œå°†ä¼šæ‹’ç»æ‰€æœ‰çš„è¯·æ±‚ã€‚ é»˜è®¤falseå…³é—­çš„ forceOpen: false # è§¦å‘ç†”æ–­é”™è¯¯æ¯”ä¾‹é˜ˆå€¼ï¼Œé»˜è®¤å€¼50% errorThresholdPercentage: 50 # ç†”æ–­åä¼‘çœ æ—¶é•¿ï¼Œé»˜è®¤å€¼5ç§’ sleepWindowInMilliseconds: 3000 # ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯20 requestVolumeThreshold: 2 execution: isolation: thread: # ç†”æ–­è¶…æ—¶è®¾ç½®ï¼Œé»˜è®¤ä¸º1ç§’ timeoutInMilliseconds: 5000 è‡ªå®šä¹‰FallBackå¤„ç†ç±»ï¼ˆéœ€è¦å®ç°FeignClientæ¥å£ï¼‰ 12345678910111213141516/** * @author hao * @date 2022/3/10 18:26 */@Componentpublic class ProductFeignFallBack implements ProductFeign&#123; @Override public Product getProduct(Integer id) &#123; return null; &#125; @Override public String getPort() &#123; return &quot;-1&quot;; &#125;&#125; 1234567891011121314151617181920/** * @author hao * @date 2022/3/10 17:29 */@FeignClient(name = &quot;service-product&quot;,fallback = ProductFeignFallBack.class)public interface ProductFeign &#123; /** * é€šè¿‡idè·å–å•†å“ä¿¡æ¯ * @param id * @return */ @RequestMapping(&quot;/product/query/&#123;id&#125;&quot;) public Product getProduct(@PathVariable Integer id); /** * è·å¾—ç«¯å£å· * @return */ @RequestMapping(&quot;/product/server&quot;) public String getPort();&#125; 4.4.5 Feignå¯¹è¯·æ±‚å‹ç¼©å’Œå“åº”å‹ç¼©çš„æ”¯æŒFeign æ”¯æŒå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡ŒGZIPå‹ç¼©ï¼Œä»¥å‡å°‘é€šä¿¡è¿‡ç¨‹ä¸­çš„æ€§èƒ½æŸè€—ã€‚é€šè¿‡ä¸‹é¢çš„å‚æ•° å³å¯å¼€å¯è¯·æ±‚ä¸å“åº”çš„å‹ç¼©åŠŸèƒ½ï¼š 1234567891011feign: hystrix: enabled: true #å¼€å¯è¯·æ±‚å’Œå“åº”å‹ç¼© compression: request: enabled: true #é»˜è®¤ä¸å¼€å¯ mime-types: text/html,application/xml,application/json # è®¾ç½®å‹ç¼©çš„æ•°æ®ç±»å‹ï¼Œ æ­¤å¤„ä¹Ÿæ˜¯é»˜è®¤å€¼ min-request-size: 2048 # è®¾ç½®è§¦å‘å‹ç¼©çš„å¤§å°ä¸‹é™ï¼Œæ­¤å¤„ä¹Ÿæ˜¯é»˜è®¤å€¼ response: enabled: true #é»˜è®¤ä¸å¼€å¯ 4.5 GateWayç½‘å…³ç»„ä»¶ç½‘å…³ï¼šå¾®æœåŠ¡æ¶æ„ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ† å±€åŸŸç½‘ä¸­å°±æœ‰ç½‘å…³è¿™ä¸ªæ¦‚å¿µï¼Œå±€åŸŸç½‘æ¥æ”¶æˆ–è€…å‘é€æ•°æ®å‡ºå»é€šè¿‡è¿™ä¸ªç½‘å…³ï¼Œæ¯”å¦‚ç”¨Vmwareè™šæ‹Ÿæœºè½¯ä»¶æ­å»ºè™šæ‹Ÿæœºé›†ç¾¤çš„æ—¶å€™ï¼Œå¾€å¾€æˆ‘ä»¬éœ€è¦é€‰æ‹©IPæ®µä¸­çš„ä¸€ä¸ªIPä½œä¸ºç½‘å…³åœ°å€ã€‚ æˆ‘ä»¬å­¦ä¹ çš„GateWayâ€“&gt;Spring Cloud GateWayï¼ˆå®ƒåªæ˜¯ä¼—å¤šç½‘å…³è§£å†³æ–¹æ¡ˆä¸­çš„ä¸€ç§ï¼‰ 4.5.1 GateWayç®€ä»‹Spring Cloud GateWayæ˜¯Spring Cloudçš„ä¸€ä¸ªå…¨æ–°é¡¹ç›®ï¼Œç›®æ ‡æ˜¯å–ä»£Netflix Zuulï¼Œå®ƒåŸºäºSpring5.0+SpringBoot2.0+WebFluxï¼ˆåŸºäºé«˜æ€§èƒ½çš„Reactoræ¨¡å¼å“åº”å¼é€šä¿¡æ¡†æ¶Nettyï¼Œå¼‚æ­¥éé˜»å¡æ¨¡å‹ï¼‰ç­‰æŠ€æœ¯å¼€å‘ï¼Œæ€§èƒ½é«˜äºZuulï¼Œå®˜æ–¹æµ‹è¯•ï¼ŒGateWayæ˜¯Zuulçš„1.6å€ï¼Œæ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆçš„ç»Ÿä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼ã€‚ Spring Cloud GateWayä¸ä»…æä¾›ç»Ÿä¸€çš„è·¯ç”±æ–¹å¼ï¼ˆåå‘ä»£ç†ï¼‰å¹¶ä¸”åŸºäº Filter(å®šä¹‰è¿‡æ»¤å™¨å¯¹è¯·æ±‚è¿‡æ»¤ï¼Œå®Œæˆä¸€äº›åŠŸèƒ½) é“¾çš„æ–¹å¼æä¾›äº†ç½‘å…³åŸºæœ¬çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šé‰´æƒã€æµé‡æ§åˆ¶ã€ç†”æ–­ã€è·¯å¾„é‡å†™ã€æ—¥å¿—ç›‘æ§ç­‰ã€‚ ç½‘å…³åœ¨æ¶æ„ä¸­çš„ä½ç½® 4.5.2 GateWayæ ¸å¿ƒæ¦‚å¿µSpring Cloud GateWayå¤©ç”Ÿå°±æ˜¯å¼‚æ­¥éé˜»å¡çš„ï¼ŒåŸºäºReactoræ¨¡å‹ï¼ˆåŒæ­¥éé˜»å¡çš„I&#x2F;Oå¤šè·¯å¤ç”¨æœºåˆ¶ï¼‰ ä¸€ä¸ªè¯·æ±‚â€”&gt;ç½‘å…³æ ¹æ®ä¸€å®šçš„æ¡ä»¶åŒ¹é…â€”åŒ¹é…æˆåŠŸä¹‹åå¯ä»¥å°†è¯·æ±‚è½¬å‘åˆ°æŒ‡å®šçš„æœåŠ¡åœ°å€ï¼›è€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›æ¯”è¾ƒå…·ä½“çš„æ§åˆ¶ï¼ˆé™æµã€æ—¥å¿—ã€é»‘ç™½åå•ï¼‰ è·¯ç”±ï¼ˆrouteï¼‰ï¼š ç½‘å…³æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯ç½‘å…³æ¯”è¾ƒåŸºç¡€çš„å·¥ä½œå•å…ƒã€‚è·¯ç”±ç”±ä¸€ä¸ªIDã€ä¸€ä¸ªç›®æ ‡URLï¼ˆæœ€ç»ˆè·¯ç”±åˆ°çš„åœ°å€ï¼‰ã€ä¸€ç³»åˆ—çš„æ–­è¨€ï¼ˆåŒ¹é…æ¡ä»¶åˆ¤æ–­ï¼‰å’ŒFilterè¿‡æ»¤å™¨ï¼ˆç²¾ç»†åŒ–æ§åˆ¶ï¼‰ç»„æˆã€‚å¦‚æœæ–­è¨€ä¸ºtrueï¼Œåˆ™åŒ¹é…è¯¥è·¯ç”±ã€‚ **æ–­è¨€ï¼ˆpredicatesï¼‰ï¼š**å‚è€ƒäº†Java8ä¸­çš„æ–­è¨€java.util.function.Predicateï¼Œå¼€å‘äººå‘˜å¯ä»¥åŒ¹é…Httpè¯·æ±‚ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬è¯·æ±‚å¤´ã€è¯·æ±‚å‚æ•°ç­‰ï¼‰ï¼ˆç±»ä¼¼äºnginxä¸­çš„locationåŒ¹é…ä¸€æ ·ï¼‰ï¼Œå¦‚æœæ–­è¨€ä¸è¯·æ±‚ç›¸åŒ¹é…åˆ™è·¯ç”±ã€‚ **è¿‡æ»¤å™¨ï¼ˆfilterï¼‰ï¼š**ä¸€ä¸ªæ ‡å‡†çš„Spring webFilterï¼Œä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¹‹å‰æˆ–è€…ä¹‹åæ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚ 4.5.3 GateWayå¦‚ä½•å·¥ä½œ Spring å®˜æ–¹ä»‹ç»ï¼š å®¢æˆ·ç«¯å‘Spring Cloud GateWayå‘å‡ºè¯·æ±‚ï¼Œç„¶ååœ¨GateWay Handler Mappingä¸­æ‰¾åˆ°ä¸è¯·æ±‚ç›¸åŒ¹é…çš„è·¯ç”±ï¼Œå°†å…¶å‘é€åˆ°GateWay Web Handlerï¼›Handlerå†é€šè¿‡æŒ‡å®šçš„è¿‡æ»¤å™¨é“¾æ¥å°†è¯·æ±‚å‘é€åˆ°æˆ‘ä»¬å®é™…çš„æœåŠ¡æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åè¿”å›ã€‚è¿‡æ»¤å™¨ä¹‹é—´ç”¨è™šçº¿åˆ†å¼€æ˜¯å› ä¸ºè¿‡æ»¤å™¨å¯èƒ½ä¼šåœ¨å‘é€ä»£ç†è¯·æ±‚ä¹‹å‰ï¼ˆpreï¼‰æˆ–è€…ä¹‹åï¼ˆpostï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚ Filteråœ¨â€œpreâ€ç±»å‹è¿‡æ»¤å™¨ä¸­å¯ä»¥åšå‚æ•°æ ¡éªŒã€æƒé™æ ¡éªŒã€æµé‡ç›‘æ§ã€æ—¥å¿—è¾“å‡ºã€åè®®è½¬æ¢ç­‰ï¼Œåœ¨â€œpostâ€ç±»å‹çš„è¿‡æ»¤å™¨ä¸­å¯ä»¥åšå“åº”å†…å®¹ã€å“åº”å¤´çš„ä¿®æ”¹ã€æ—¥å¿—çš„è¾“å‡ºã€æµé‡ç›‘æ§ç­‰ã€‚ 4.5.4 GateWayåº”ç”¨ä½¿ç”¨ç½‘å…³å¯¹é™æ€åŒ–å¾®æœåŠ¡è¿›è¡Œä»£ç†ï¼ˆæ·»åŠ åœ¨å®ƒçš„ä¸Šæ¸¸ï¼Œç›¸å½“äºéšè—äº†å…·ä½“å¾®æœåŠ¡çš„ä¿¡æ¯ï¼Œå¯¹å¤–æš´éœ²çš„æ˜¯ç½‘å…³ï¼‰ åˆ›å»ºå·¥ç¨‹cloud-gatewayå¯¼å…¥ä¾èµ– GateWayä¸éœ€è¦ä½¿ç”¨webæ¨¡å—ï¼Œå®ƒå¼•å…¥çš„æ˜¯WebFluxï¼ˆç±»ä¼¼äºSpringMVCï¼‰ã€‚æ³¨æ„ä¾èµ–å†²çªï¼Œä¸èƒ½æœ‰webæ¨¡å—ï¼Œå¯èƒ½ç»§æ‰¿çš„pomå·¥ç¨‹æºå¸¦äº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;mycloud&lt;/artifactId&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;service-page&lt;/artifactId&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;artifactId&gt;service-common&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--ç†”æ–­å™¨Hystrix--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; application.ymlé…ç½® 1234567891011121314151617181920212223242526272829server: port: 9300eureka: client: serviceUrl: # eureka serverçš„è·¯å¾„ defaultZone: http://eurekaA:9200/eureka,http://eurekaB:9201/eureka instance: prefer-ip-address: true instance-id: $&#123;spring.cloud.client.ip- address&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125;:@project.version@spring: application: name: cloud-gateway #ç½‘å…³çš„é…ç½® cloud: gateway: routes: #é…ç½®è·¯ç”± - id: service-page-router uri: http://127.0.0.1:9100 predicates: #å½“æ–­è¨€æˆåŠŸåï¼Œäº¤ç»™æŸä¸€ä¸ªå¾®æœåŠ¡å¤„ç†æ—¶ä½¿ç”¨çš„æ˜¯è½¬å‘ - Path=/page/** - id: service-product-router uri: http://127.0.0.1:9000 predicates: - Path=/product/** filters: # http://127.0.0.1:9300/product/service/port --&gt; /service/port --&gt; å•†å“å¾®æœåŠ¡ - StripPrefix=1 # å»æ‰uriä¸­çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å°±è¦æ±‚æˆ‘ä»¬é€šè¿‡ç½‘å…³è®¿é—®çš„æ—¶å€™ï¼ŒæŠŠuri çš„ç¬¬ä¸€éƒ¨åˆ†è®¾ç½®ä¸ºproductï¼Œä»uriçš„ç¬¬äºŒéƒ¨åˆ†å¼€å§‹æ‰æ˜¯çœŸæ­£çš„uri å¯åŠ¨ç±» 1234567891011/** * @author hao * @date 2022/3/11 10:05 */@SpringBootApplication@EnableDiscoveryClientpublic class GatewayApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(GatewayApplication.class,args); &#125;&#125; æµ‹è¯• 4.5.5 GateWayè·¯ç”±è§„åˆ™è¯¦è§£Spring Cloud GateWay å¸®æˆ‘ä»¬å†…ç½®äº†å¾ˆå¤š PredicatesåŠŸèƒ½ï¼Œå®ç°äº†å„ç§è·¯ç”±åŒ¹é…è§„åˆ™ï¼ˆé€šè¿‡Headerã€è¯·æ±‚å‚æ•°ç­‰ä½œä¸ºæ¡ä»¶ï¼‰åŒ¹é…åˆ°å¯¹åº”çš„è·¯ç”±ã€‚ æ—¶é—´ç‚¹ååŒ¹é… 12345678spring: cloud: gateway: routes: - id: after_route uri: https://example.org predicates: - After=2017-01-20T17:42:47.789-07:00[America/Denver] æ—¶é—´ç‚¹å‰åŒ¹é… 12345678spring: cloud: gateway: routes: - id: before_route uri: https://example.org predicates: - Before=2017-01-20T17:42:47.789-07:00[America/Denver] æ—¶é—´åŒºé—´åŒ¹é… 12345678spring: cloud: gateway: routes: - id: between_route uri: https://example.org predicates: - Between=2017-01-20T17:42:47.789-07:00[America/Denver],2017-01- 21T17:42:47.789-07:00[America/Denver] æŒ‡å®šCookieæ­£åˆ™åŒ¹é…æŒ‡å®šå€¼ 12345678spring: cloud: gateway: routes: - id: cookie_route uri: https://example.org predicates: - Cookie=chocolate,ch.p æŒ‡å®šHeaderæ­£åˆ™åŒ¹é…æŒ‡å®šå€¼ 12345678spring: cloud: gateway: routes: - id: header_route uri: https://example.org predicates: - Header=X-Request-Id, \\d+ è¯·æ±‚HoståŒ¹é…æŒ‡å®šå€¼ 12345678spring: cloud: gateway: routes: - id: host_route uri: https://example.org predicates: - Host=**.somehost.org,**.anotherhost.org è¯·æ±‚MethodåŒ¹é…æŒ‡å®šè¯·æ±‚æ–¹å¼ 12345678spring: cloud: gateway: routes: - id: method_route uri: https://example.org predicates: - Method=GET,POST è¯·æ±‚è·¯å¾„æ­£åˆ™åŒ¹é… 12345678spring: cloud: gateway: routes: - id: path_route uri: https://example.org predicates: - Path=/red/&#123;segment&#125;,/blue/&#123;segment&#125; è¯·æ±‚åŒ…å«æŸå‚æ•° 12345678spring: cloud: gateway: routes: - id: query_route uri: https://example.org predicates: - Query=green è¯·æ±‚åŒ…å«æŸå‚æ•°å¹¶ä¸”å‚æ•°å€¼åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ 12345678spring: cloud: gateway: routes: - id: query_route uri: https://example.org predicates: - Query=red,gree. è¿œç¨‹åœ°å€åŒ¹é… 12345678spring: cloud: gateway: routes: - id: remoteaddr_route uri: https://example.org predicates: - RemoteAddr=192.168.1.1/24 4.5.6 GateWayåŠ¨æ€è·¯ç”±è¯¦è§£GateWayæ”¯æŒè‡ªåŠ¨ä»æ³¨å†Œä¸­å¿ƒä¸­è·å–æœåŠ¡åˆ—è¡¨å¹¶è®¿é—®ï¼Œå³æ‰€è°“çš„åŠ¨æ€è·¯ç”± å®ç°æ­¥éª¤å¦‚ä¸‹ pom.xmlä¸­æ·»åŠ æ³¨å†Œä¸­å¿ƒå®¢æˆ·ç«¯ä¾èµ–ï¼ˆå› ä¸ºè¦è·å–æ³¨å†Œä¸­å¿ƒæœåŠ¡åˆ—è¡¨ï¼Œeurekaå®¢æˆ·ç«¯å·²ç»å¼•å…¥ï¼‰ åŠ¨æ€è·¯ç”±é…ç½® æ³¨æ„ï¼šåŠ¨æ€è·¯ç”±è®¾ç½®æ—¶ï¼Œuriä»¥lb: &#x2F;&#x2F;å¼€å¤´ï¼ˆlbä»£è¡¨ä»æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡ï¼‰ï¼Œåé¢æ˜¯éœ€è¦è½¬å‘åˆ°çš„æœåŠ¡åç§° 4.5.7 GateWayè¿‡æ»¤å™¨ï¼ˆ1ï¼‰GateWayè¿‡æ»¤å™¨ç®€ä»‹ä»è¿‡æ»¤å™¨ç”Ÿå‘½å‘¨æœŸï¼ˆå½±å“æ—¶æœºç‚¹ï¼‰çš„è§’åº¦æ¥è¯´ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªpreå’Œpostï¼š ä»è¿‡æ»¤å™¨ç±»å‹çš„è§’åº¦ï¼ŒSpring Cloud GateWayçš„è¿‡æ»¤å™¨åˆ†ä¸ºGateWayFilterå’ŒGlobalFilterä¸¤ç§ å¦‚Gateway Filterå¯ä»¥å»æ‰urlä¸­çš„å ä½åè½¬å‘è·¯ç”±ï¼Œæ¯”å¦‚ 12345predicates: - id: xxx Path=/product/** filters: - StripPrefix=1 # å¯ä»¥å»æ‰productä¹‹åè½¬å‘ æ³¨æ„ï¼šGlobalFilterå…¨å±€è¿‡æ»¤å™¨æ˜¯ç¨‹åºå‘˜ä½¿ç”¨æ¯”è¾ƒå¤šçš„è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬ä¸»è¦è®²è§£è¿™ç§ç±»å‹ ï¼ˆ2ï¼‰è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨å®ç°IPè®¿é—®é™åˆ¶ï¼ˆé»‘ç™½åå•ï¼‰è¯·æ±‚è¿‡æ¥æ—¶ï¼Œåˆ¤æ–­å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„ipï¼Œå¦‚æœåœ¨é»‘åå•ä¸­ï¼Œæ‹’ç»è®¿é—® è‡ªå®šä¹‰GateWayå…¨å±€è¿‡æ»¤å™¨æ—¶ï¼Œæˆ‘ä»¬å®ç°Global Filteræ¥å£å³å¯ï¼Œé€šè¿‡å…¨å±€è¿‡æ»¤å™¨å¯ä»¥å®ç°é»‘ç™½åå•ã€é™æµç­‰åŠŸèƒ½ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * @author hao * @date 2022/3/11 11:22 */@Slf4j@Componentpublic class BlackListFilter implements GlobalFilter, Ordered &#123; /** * æ¨¡æ‹Ÿé»‘åå•ï¼ˆå®é™…å¯ä»¥å»æ•°æ®åº“æˆ–è€…redisä¸­æŸ¥è¯¢ï¼‰ */ private static List&lt;String&gt; blackList = new ArrayList&lt;&gt;(); static &#123; /* * æ¨¡æ‹Ÿæœ¬æœºåœ°å€ */ blackList.add(&quot;0:0:0:0:0:0:0:1&quot;); blackList.add(&quot;127.0.0.1&quot;); &#125; /** * è¿‡æ»¤å™¨æ ¸å¿ƒæ–¹æ³• * @param exchange å°è£…äº†requestå’Œresponseå¯¹è±¡çš„ä¸Šä¸‹æ–‡ * @param chain ç½‘å…³è¿‡æ»¤å™¨é“¾ï¼ˆåŒ…å«å…¨å±€è¿‡æ»¤å™¨å’Œå•è·¯ç”±è¿‡æ»¤å™¨ï¼‰ * @return */ @Override public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) &#123; System.out.println(&quot;....BlackListFilter....&quot;); // æ€è·¯ï¼šè·å–å®¢æˆ·ç«¯ipï¼Œåˆ¤æ–­æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼Œåœ¨çš„è¯å°±æ‹’ç»è®¿é—®ï¼Œä¸åœ¨çš„è¯å°±æ”¾è¡Œ // ä»ä¸Šä¸‹æ–‡ä¸­å–å‡ºrequestå’Œresponseå¯¹è±¡ ServerHttpRequest request = exchange.getRequest(); ServerHttpResponse response = exchange.getResponse(); response.getHeaders().add(&quot;Content-Type&quot;,&quot;application/json;chartset=UTF-8&quot;); // ä»requestå¯¹è±¡ä¸­è·å–å®¢æˆ·ç«¯ip String clientIp = request.getRemoteAddress().getHostString(); // æ‹¿ç€clientIpå»é»‘åå•ä¸­æŸ¥è¯¢ï¼Œå­˜åœ¨çš„è¯å°±å†³ç»è®¿é—® if(blackList.contains(clientIp)) &#123; // å†³ç»è®¿é—®ï¼Œç›´æ¥return // çŠ¶æ€ç  response.setStatusCode(HttpStatus.UNAUTHORIZED); log.info(&quot;=====&gt;IP:&quot; + clientIp + &quot; åœ¨é»‘åå•ä¸­ï¼Œå°†è¢«æ‹’ç»è®¿é—®ï¼&quot;); byte[] msg = &quot;Request be denied! ä½ è¢«æ‹‰é»‘å•¦&quot;.getBytes(); DataBuffer wrap = response.bufferFactory().wrap(msg); return response.writeWith(Mono.just(wrap)); &#125; // åˆæ³•è¯·æ±‚ï¼Œæ”¾è¡Œï¼Œæ‰§è¡Œåç»­çš„è¿‡æ»¤å™¨ return chain.filter(exchange); &#125; /** * è¿”å›å€¼è¡¨ç¤ºå½“å‰è¿‡æ»¤å™¨çš„é¡ºåº(ä¼˜å…ˆçº§)ï¼Œæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ * @return */ @Override public int getOrder() &#123; return 0; &#125;&#125; 4.5.8 GateWayé«˜å¯ç”¨ç½‘å…³ä½œä¸ºéå¸¸æ ¸å¿ƒçš„ä¸€ä¸ªéƒ¨ä»¶ï¼Œå¦‚æœæŒ‚æ‰ï¼Œé‚£ä¹ˆæ‰€æœ‰è¯·æ±‚éƒ½å¯èƒ½æ— æ³•è·¯ç”±å¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åšGateWayçš„é«˜å¯ç”¨ã€‚ GateWayçš„é«˜å¯ç”¨å¾ˆç®€å•ï¼šå¯ä»¥å¯åŠ¨å¤šä¸ªGateWayå®ä¾‹æ¥å®ç°é«˜å¯ç”¨ï¼Œåœ¨GateWayçš„ä¸Šæ¸¸ä½¿ç”¨Nginxç­‰è´Ÿè½½å‡è¡¡è®¾å¤‡è¿›è¡Œè´Ÿè½½è½¬å‘ä»¥è¾¾åˆ°é«˜å¯ç”¨çš„ç›®çš„ã€‚ å¯åŠ¨å¤šä¸ªGateWayå®ä¾‹ï¼ˆå‡å¦‚è¯´ä¸¤ä¸ªï¼Œä¸€ä¸ªç«¯å£9300ï¼Œä¸€ä¸ªç«¯å£9301ï¼‰ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä½¿ç”¨Nginxç­‰å®Œæˆè´Ÿè½½ä»£ç†å³å¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678#é…ç½®å¤šä¸ªGateWayå®ä¾‹ upstream gateway &#123; server 127.0.0.1:9301; server 127.0.0.1:9302; &#125;location / &#123; proxy_pass http://gateway; &#125; 4.6 Spring Cloud Configåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ4.6.1 åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒåº”ç”¨åœºæ™¯å¾€å¾€ï¼Œæˆ‘ä»¬ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚application.yml **å•ä¾‹åº”ç”¨æ¶æ„ï¼š**é…ç½®ä¿¡æ¯çš„ç®¡ç†ã€ç»´æŠ¤å¹¶ä¸ä¼šæ˜¾å¾—ç‰¹åˆ«éº»çƒ¦ï¼Œæ‰‹åŠ¨æ“ä½œå°±å¯ä»¥ï¼Œå› ä¸ºå°±ä¸€ä¸ªå·¥ç¨‹ï¼› **å¾®æœåŠ¡æ¶æ„ï¼Œ**å› ä¸ºæˆ‘ä»¬çš„åˆ†å¸ƒå¼é›†ç¾¤ç¯å¢ƒä¸­å¯èƒ½æœ‰å¾ˆå¤šä¸ªå¾®æœåŠ¡ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸ªä¸€ä¸ªå»ä¿®æ”¹é…ç½®ç„¶åé‡å¯ç”Ÿæ•ˆï¼Œåœ¨ä¸€å®šåœºæ™¯ä¸‹æˆ‘ä»¬è¿˜éœ€è¦åœ¨è¿è¡ŒæœŸé—´åŠ¨æ€è°ƒæ•´é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæ ¹æ®å„ä¸ªå¾®æœåŠ¡çš„è´Ÿè½½æƒ…å†µï¼ŒåŠ¨æ€è°ƒæ•´æ•°æ®æºè¿æ¥æ± å¤§å°ï¼Œæˆ‘ä»¬å¸Œæœ›é…ç½®å†…å®¹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå¾®æœåŠ¡å¯ä»¥è‡ªåŠ¨æ›´æ–°ã€‚ åœºæ™¯æ€»ç»“å¦‚ä¸‹ï¼š é›†ä¸­é…ç½®ç®¡ç†ï¼Œä¸€ä¸ªå¾®æœåŠ¡æ¶æ„ä¸­å¯èƒ½æœ‰æˆç™¾ä¸Šåƒä¸ªå¾®æœåŠ¡ï¼Œæ‰€ä»¥é›†ä¸­é…ç½®ç®¡ç†æ˜¯å¾ˆé‡è¦çš„ï¼ˆä¸€æ¬¡ä¿®æ”¹ã€åˆ°å¤„ç”Ÿæ•ˆï¼‰ ä¸åŒç¯å¢ƒä¸åŒé…ç½®ï¼Œæ¯”å¦‚æ•°æ®æºé…ç½®åœ¨ä¸åŒç¯å¢ƒï¼ˆå¼€å‘dev,æµ‹è¯•test,ç”Ÿäº§prodï¼‰ä¸­æ˜¯ä¸åŒçš„ è¿è¡ŒæœŸé—´å¯åŠ¨æ€è°ƒæ•´ã€‚ä¾‹å¦‚ï¼Œå¯æ ¹æ®å„ä¸ªå¾®æœåŠ¡çš„è´Ÿè½½æƒ…å†µï¼ŒåŠ¨æ€è°ƒæ•´æ•°æ®æºè¿æ¥æ± å¤§å°ç­‰é…ç½®ä¿®æ”¹åå¯è‡ªåŠ¨æ›´æ–° å¦‚é…ç½®å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå¾®æœåŠ¡å¯ä»¥è‡ªåŠ¨æ›´æ–°é…ç½® é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œé›†ä¸­å¼ç®¡ç†ï¼Œè¿™ä¹Ÿæ˜¯åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒçš„ä½œç”¨ã€‚ 4.6.2 Spring Cloud Configï¼ˆ1ï¼‰Configç®€ä»‹Spring Cloud Confifigæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼é…ç½®ç®¡ç†æ–¹æ¡ˆï¼ŒåŒ…å«äº† Serverç«¯å’Œ Clientç«¯ä¸¤ä¸ªéƒ¨åˆ†ã€‚ Server ç«¯ï¼šæä¾›é…ç½®æ–‡ä»¶çš„å­˜å‚¨ã€ä»¥æ¥å£çš„å½¢å¼å°†é…ç½®æ–‡ä»¶çš„å†…å®¹æä¾›å‡ºå»ï¼Œé€šè¿‡ä½¿ç”¨@EnableConfifigServeræ³¨è§£åœ¨ Spring boot åº”ç”¨ä¸­éå¸¸ç®€å•çš„åµŒå…¥ Client ç«¯ï¼šé€šè¿‡æ¥å£è·å–é…ç½®æ•°æ®å¹¶åˆå§‹åŒ–è‡ªå·±çš„åº”ç”¨ ï¼ˆ2ï¼‰Configåˆ†å¸ƒå¼é…ç½®åº”ç”¨è¯´æ˜ï¼šConfig Serveræ˜¯é›†ä¸­å¼çš„é…ç½®æœåŠ¡ï¼Œç”¨äºé›†ä¸­ç®¡ç†åº”ç”¨ç¨‹åºå„ä¸ªç¯å¢ƒä¸‹çš„é…ç½®ã€‚ é»˜è®¤ä½¿ç”¨Gitå­˜å‚¨é…ç½®æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥SVNã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å¯¹â€œé™æ€åŒ–å¾®æœåŠ¡æˆ–è€…å•†å“å¾®æœåŠ¡â€çš„application.ymlè¿›è¡Œç®¡ç†ï¼ˆåŒºåˆ†å¼€å‘ç¯å¢ƒï¼ˆdevï¼‰ã€æµ‹è¯•ç¯å¢ƒ(test)ã€ç”Ÿäº§ç¯å¢ƒ(prod)ï¼‰ ç™»å½•GitHubï¼Œåˆ›å»ºcloud-config ä¸Šä¼ ymlé…ç½®æ–‡ä»¶ï¼Œå‘½åè§„åˆ™å¦‚ä¸‹ï¼š {application}-{profile}.yml æˆ–è€… {application}-{profile}.properties å…¶ä¸­ï¼Œapplicationä¸ºåº”ç”¨åç§°ï¼ŒprofileæŒ‡çš„æ˜¯ç¯å¢ƒï¼ˆç”¨äºåŒºåˆ†å¼€å‘ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰ï¼‰ ç¤ºä¾‹ï¼šservice-page-dev.ymlã€service-page-test.ymlã€service-page-prod.yml æ„å»ºConfig Serverç»Ÿä¸€é…ç½®ä¸­å¿ƒ æ–°å»ºSpringBootå·¥ç¨‹ï¼Œå¼•å…¥ä¾èµ–åæ ‡ï¼ˆéœ€è¦æ³¨å†Œè‡ªå·±åˆ°Eurekaï¼‰ 1234567891011121314151617181920212223242526272829303132&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;parent&gt; &lt;artifactId&gt;mycloud&lt;/artifactId&gt; &lt;groupId&gt;com.hao&lt;/groupId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/parent&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;cloud-config&lt;/artifactId&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!--eureka client å®¢æˆ·ç«¯ä¾èµ–å¼•å…¥--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--configé…ç½®ä¸­å¿ƒæœåŠ¡ç«¯--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; é…ç½®å¯åŠ¨ç±»ï¼Œä½¿ç”¨æ³¨è§£@EnableConfigServerå¼€å¯é…ç½®ä¸­å¿ƒæœåŠ¡å™¨åŠŸèƒ½ 12345678@SpringBootApplication@EnableDiscoveryClient@EnableConfigServerpublic class ConfigApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigApplication.class,args); &#125;&#125; application.yml 1234567891011121314151617181920212223242526server: port: 9400#æ³¨å†Œåˆ°EurekaæœåŠ¡ä¸­å¿ƒeureka: client: service-url: defaultZone: http://eurekaA:9200/eureka,http://eurekaB:9201/eureka instance: prefer-ip-address: true instance-id: $&#123;spring.cloud.client.ip- address&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125;:@project.version@spring: application: name: cloud-config cloud: config: server: git: uri: https://github.com/Jasper-zh/cloud-config.git #é…ç½®gitæœåŠ¡åœ°å€ username: jasper-zh #é…ç½®gitç”¨æˆ·å password: xxxxx #é…ç½®gitå¯†ç  search-paths: - cloud-config default-label: main æµ‹è¯•ï¼ˆéšä¾¿æäº¤äº†ä¸ªæ–‡ä»¶ï¼‰ http://127.0.0.1:9400/main/xx.txt mainï¼šåˆ†æ”¯åç§° xx.txtï¼šæ–‡ä»¶åç§° æ„å»ºClientå®¢æˆ·ç«¯ï¼ˆåœ¨å·²æœ‰çš„é™æ€åŒ–å¾®æœåŠ¡åŸºç¡€ä¸Šï¼‰ æ¡ˆä¾‹å®ç°ï¼šåœ¨service-pageå¾®æœåŠ¡ä¸­åŠ¨æ€è·å–config serverçš„é…ç½®ä¿¡æ¯ å·²æœ‰å·¥ç¨‹ä¸­æ·»åŠ ä¾èµ–åæ ‡ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt; &lt;/dependency&gt; application.ymlä¿®æ”¹ä¸ºbootstrap.ymlé…ç½®æ–‡ä»¶ bootstrap.ymlæ˜¯ç³»ç»Ÿçº§åˆ«çš„ï¼Œä¼˜å…ˆçº§æ¯”application.ymlé«˜ï¼Œåº”ç”¨å¯åŠ¨æ—¶ä¼šæ£€æŸ¥è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šé…ç½®ä¸­å¿ƒçš„æœåŠ¡åœ°å€ï¼Œä¼šè‡ªåŠ¨æ‹‰å–é…ç½®ä¸­å¿ƒé…ç½®å¹¶ä¸”å¯ç”¨ã€‚ ï¼ˆä¸»è¦æ˜¯æŠŠä¸ç»Ÿä¸€é…ç½®ä¸­å¿ƒè¿æ¥çš„ä¿¡æ¯æ”¾åˆ°bootstrap.ymlï¼‰ å®ƒä¼šè¯»å–spring.application.nameä¸spring.cloud.config.profileæ‹¼æ¥å‘½åçš„é…ç½®ï¼Œå› æ­¤å¾€githubæ¨é€äº†service-page-dev.ymlé…ç½®ï¼Œä¸”æ·»åŠ äº†ä¸¤æ¡æµ‹è¯•é…ç½®person.nameã€person.age bootstrap.ymlï¼ˆéƒ¨åˆ†ï¼‰ 12345678910spring: application: name: service-page datasource: ... cloud: config: #configå®¢æˆ·ç«¯é…ç½®,å’ŒConfigServeré€šä¿¡ï¼Œå¹¶å‘ŠçŸ¥ConfigServerå¸Œæœ›è·å–çš„é…ç½®ä¿¡æ¯åœ¨å“ªä¸ªæ–‡ ä»¶ä¸­ profile: dev #åç¼€åç§° label: main #åˆ†æ”¯åç§° uri: http://localhost:9400 controlleræµ‹è¯• 1234567891011121314@RestController@RequestMapping(&quot;/page&quot;)public class PageController &#123; @Value(&quot;$&#123;person.name&#125;&quot;) String name; @Value(&quot;$&#123;person.age&#125;&quot;) String age; @RequestMapping(&quot;/config&quot;) public String getConfig()&#123; return name + age; &#125;&#125; 4.6.3 Configé…ç½®æ‰‹åŠ¨åˆ·æ–°ä¸ç”¨é‡å¯å¾®æœåŠ¡ï¼Œåªéœ€è¦æ‰‹åŠ¨çš„åšä¸€äº›å…¶ä»–çš„æ“ä½œï¼ˆè®¿é—®ä¸€ä¸ªåœ°å€&#x2F;refreshï¼‰åˆ·æ–°ï¼Œä¹‹åå†è®¿é—®å³å¯ æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å–åˆ°äº†é…ç½®ä¸­å¿ƒçš„å€¼ï¼Œä½†å½“æˆ‘ä»¬ä¿®æ”¹GitHubä¸Šé¢çš„å€¼æ—¶ï¼ŒæœåŠ¡ç«¯ï¼ˆConfig Serverï¼‰èƒ½å®æ—¶è·å–æœ€æ–°çš„å€¼ï¼Œä½†å®¢æˆ·ç«¯ï¼ˆConfig Clientï¼‰è¯»çš„æ˜¯ç¼“å­˜ï¼Œæ— æ³•å®æ—¶è·å–æœ€æ–°å€¼ã€‚Spring Cloudå·² ç»ä¸ºæˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨postå»è§¦å‘refreshï¼Œè·å–æœ€æ–°æ•°æ®ã€‚ Clientå®¢æˆ·ç«¯æ·»åŠ ä¾èµ–springboot-starter-actuatorï¼ˆå·²æ·»åŠ ï¼‰ Clientå®¢æˆ·ç«¯bootstrap.ymlä¸­æ·»åŠ é…ç½®ï¼ˆæš´éœ²é€šä¿¡ç«¯ç‚¹ï¼‰ 123456789101112management: endpoints: web: exposure: include: refresh #ä¹Ÿå¯ä»¥æš´éœ²æ‰€æœ‰çš„æ¥å£management: endpoints: web: exposure: include: &quot;*&quot; Clientå®¢æˆ·ç«¯ä½¿ç”¨åˆ°é…ç½®ä¿¡æ¯çš„ç±»ä¸Šæ·»åŠ @RefreshScope 123456789101112131415@RestController@RequestMapping(&quot;/page&quot;)@RefreshScope //æ‰‹åŠ¨åˆ·æ–°public class PageController &#123; @Value(&quot;$&#123;person.name&#125;&quot;) String name; @Value(&quot;$&#123;person.age&#125;&quot;) String age; @RequestMapping(&quot;/config&quot;) public String getConfig()&#123; return name + age; &#125;&#125; æ‰‹åŠ¨å‘Clientå®¢æˆ·ç«¯å‘èµ·POSTè¯·æ±‚ï¼Œhttp://localhost:9100/actuator/refreshï¼Œåˆ·æ–°é…ç½®ä¿¡æ¯ æ³¨æ„ï¼šæ‰‹åŠ¨åˆ·æ–°æ–¹å¼é¿å…äº†æœåŠ¡é‡å¯ æ€è€ƒï¼šå¯å¦ä½¿ç”¨å¹¿æ’­æœºåˆ¶ï¼Œä¸€æ¬¡é€šçŸ¥ï¼Œå¤„å¤„ç”Ÿæ•ˆï¼Œæ–¹ä¾¿å¤§èŒƒå›´é…ç½®è‡ªåŠ¨åˆ·æ–°ï¼Ÿ 4.6.4 Configé…ç½®è‡ªåŠ¨æ›´æ–°å®ç°ä¸€æ¬¡é€šçŸ¥ï¼Œå¤„å¤„ç”Ÿæ•ˆ åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆæ¶ˆæ¯æ€»çº¿ï¼ˆBusï¼‰å®ç°åˆ†å¸ƒå¼é…ç½®çš„è‡ªåŠ¨æ›´æ–°ï¼ˆSpring CloudConfig + Spring Cloud Busï¼‰ ï¼ˆ1ï¼‰æ¶ˆæ¯æ€»çº¿Busæ‰€è°“æ¶ˆæ¯æ€»çº¿Busï¼Œå³æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨MQæ¶ˆæ¯ä»£ç†æ„å»ºä¸€ä¸ªå…±ç”¨çš„Topicï¼Œé€šè¿‡è¿™ä¸ªTopicè¿æ¥å„ä¸ªå¾®æœåŠ¡å®ä¾‹ï¼ŒMQå¹¿æ’­çš„æ¶ˆæ¯ä¼šè¢«æ‰€æœ‰åœ¨æ³¨å†Œä¸­å¿ƒçš„å¾®æœåŠ¡å®ä¾‹ç›‘å¬å’Œæ¶ˆè´¹ã€‚æ¢è¨€ä¹‹å°±æ˜¯é€šè¿‡ä¸€ä¸ªä¸»é¢˜è¿æ¥å„ä¸ªå¾®æœåŠ¡ï¼Œæ‰“é€šè„‰ç»œã€‚ Spring Cloud Busï¼ˆåŸºäºMQçš„ï¼Œæ”¯æŒRabbitMq&#x2F;Kafkaï¼‰ æ˜¯Spring Cloudä¸­çš„æ¶ˆæ¯æ€»çº¿æ–¹æ¡ˆï¼ŒSpring Cloud Config + Spring Cloud Bus ç»“åˆå¯ä»¥å®ç°é…ç½®ä¿¡æ¯çš„è‡ªåŠ¨æ›´æ–°ã€‚ ï¼ˆ2ï¼‰Config + Buså®ç°è‡ªåŠ¨åˆ·æ–°MQæ¶ˆæ¯ä»£ç†ï¼Œæˆ‘ä»¬è¿˜é€‰æ‹©ä½¿ç”¨RabbitMQï¼ŒConfigServerï¼ˆé…ç½®ä¸­å¿ƒï¼‰å’ŒConfigClientï¼ˆå…¶ä»–å¾®æœåŠ¡ï¼‰éƒ½æ·»åŠ éƒ½æ¶ˆæ¯æ€»çº¿çš„æ”¯æŒä»¥åŠä¸RabbitMqçš„è¿æ¥ä¿¡æ¯ cloud-configå’Œå…¶ä»–å¾®æœåŠ¡ï¼ˆclientï¼‰æ·»åŠ æ¶ˆæ¯æ€»çº¿æ”¯æŒ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt; &lt;/dependency&gt; cloud-configå’Œå®¢æˆ·ç«¯æ·»åŠ é…ç½® 123456spring: rabbitmq: host: 192.169.200.128 port: 5672 username: guest password: guest cloud-configå¾®æœåŠ¡æš´éœ²æ¥å£ 12345management: endpoints: web: exposure: include: refresh é‡å¯å„ä¸ªæœåŠ¡ï¼Œæ›´æ”¹é…ç½®ä¹‹åï¼Œå‘é…ç½®ä¸­å¿ƒæœåŠ¡ç«¯å‘é€postè¯·æ±‚ï¼Œå„ä¸ªå®¢æˆ·ç«¯é…ç½®å³å¯è‡ªåŠ¨åˆ·æ–° http://127.0.0.1:9400/actuator/bus-refresh Config Clientæµ‹è¯• åœ¨å¹¿æ’­æ¨¡å¼ä¸‹å®ç°äº†ä¸€æ¬¡è¯·æ±‚ï¼Œå¤„å¤„æ›´æ–°ï¼Œå¦‚æœæˆ‘åªæƒ³å®šå‘æ›´æ–°å‘¢ï¼Ÿ åœ¨å‘èµ·åˆ·æ–°è¯·æ±‚çš„æ—¶å€™http://localhost:9004/actuator/bus-refresh/service-page:9100 å³ä¸ºæœ€åé¢è·Ÿä¸Šè¦å®šå‘åˆ·æ–°çš„å®ä¾‹çš„ æœåŠ¡å:ç«¯å£å·å³å¯ â€‹ äº”ã€ç¬¬äºŒä»£SpringCloudæ ¸å¿ƒç»„ä»¶ï¼ˆSCAï¼‰5.1 ç¬¬äºŒä»£ä»‹ç»SpringCloud æ˜¯è‹¥å¹²ä¸ªæ¡†æ¶çš„é›†åˆï¼ŒåŒ…æ‹¬ spring-cloud-configã€spring-cloud-bus ç­‰è¿‘ 20 ä¸ªå­é¡¹ç›®ï¼Œæä¾›äº†æœåŠ¡æ²»ç†ã€æœåŠ¡ç½‘å…³ã€æ™ºèƒ½è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€ç›‘æ§è·Ÿè¸ªã€åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ã€é…ç½®ç®¡ç†ç­‰é¢†åŸŸçš„è§£å†³æ–¹æ¡ˆã€‚Spring Cloud é€šè¿‡ Spring Boot é£æ ¼çš„å°è£…ï¼Œå±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€å®¹æ˜“éƒ¨ç½²çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒSpring Cloud åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼Œä¸»è¦ä»¥ Netflix å¼€æºä¸ºä¸»ã€‚ åŒ Spring Cloud ä¸€æ ·ï¼ŒSpring Cloud Alibaba ä¹Ÿæ˜¯ä¸€å¥—å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«å¼€å‘åˆ†å¸ƒå¼åº”ç”¨å¾®æœåŠ¡çš„å¿…éœ€ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…é€šè¿‡ Spring Cloud ç¼–ç¨‹æ¨¡å‹è½»æ¾ä½¿ç”¨è¿™äº›ç»„ä»¶æ¥å¼€å‘åˆ†å¸ƒå¼åº”ç”¨æœåŠ¡ã€‚ä¾æ‰˜Spring Cloud Alibabaï¼Œæ‚¨åªéœ€è¦æ·»åŠ ä¸€äº›æ³¨è§£å’Œå°‘é‡é…ç½®ï¼Œå°±å¯ä»¥å°† Spring Cloud åº”ç”¨æ¥å…¥é˜¿é‡Œå¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡é˜¿é‡Œä¸­é—´ä»¶æ¥è¿…é€Ÿæ­å»ºåˆ†å¸ƒå¼åº”ç”¨ç³»ç»Ÿã€‚ 5.1.1 é˜¿é‡Œå¼€æºç»„ä»¶**Nacosï¼š**ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚ **Sentinelï¼š**æŠŠæµé‡ä½œä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§ã€‚ **RocketMQï¼š**å¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼ŒåŸºäºé«˜å¯ç”¨åˆ†å¸ƒå¼é›†ç¾¤æŠ€æœ¯ï¼Œæä¾›ä½å»¶æ—¶çš„ã€é«˜å¯é çš„æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…æœåŠ¡ã€‚ **Dubboï¼š**è¿™ä¸ªå°±ä¸ç”¨å¤šè¯´äº†ï¼Œåœ¨å›½å†…åº”ç”¨éå¸¸å¹¿æ³›çš„ä¸€æ¬¾é«˜æ€§èƒ½ Java RPC æ¡†æ¶ã€‚ **Seataï¼š**é˜¿é‡Œå·´å·´å¼€æºäº§å“ï¼Œä¸€ä¸ªæ˜“äºä½¿ç”¨çš„é«˜æ€§èƒ½å¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚ **Arthasï¼š**å¼€æºçš„JavaåŠ¨æ€è¿½è¸ªå·¥å…·ï¼ŒåŸºäºå­—èŠ‚ç å¢å¼ºæŠ€æœ¯ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚ 5.1.2 é˜¿é‡Œå•†ä¸šåŒ–ç»„ä»¶ä½œä¸ºä¸€å®¶å•†ä¸šå…¬å¸ï¼Œé˜¿é‡Œå·´å·´æ¨å‡º Spring Cloud Alibabaï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå¸‚å¸Œæœ›é€šè¿‡æŠ¢å å¼€å‘è€…ç”Ÿæ€ï¼Œæ¥å¸®åŠ©æ¨å¹¿è‡ªå®¶çš„äº‘äº§å“ã€‚æ‰€ä»¥åœ¨å¼€æºç¤¾åŒºï¼Œå¤¹å¸¦äº†ä¸å°‘ç§è´§ï¼Œé˜¿é‡Œå•†ä¸šåŒ–ç»„ä»¶ï¼Œæ•´ä½“æ˜“ç”¨æ€§å’Œç¨³å®šæ€§è¿˜æ˜¯å¾ˆé«˜çš„ã€‚ Alibaba Cloud ACMï¼šä¸€æ¬¾åœ¨åˆ†å¸ƒå¼æ¶æ„ç¯å¢ƒä¸­å¯¹åº”ç”¨é…ç½®è¿›è¡Œé›†ä¸­ç®¡ç†å’Œæ¨é€çš„åº”ç”¨é…ç½®ä¸­å¿ƒäº§å“ã€‚ Alibaba Cloud OSSï¼šé˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ˆObject Storage Serviceï¼Œç®€ç§° OSSï¼‰ï¼Œæ˜¯é˜¿é‡Œäº‘æä¾›çš„äº‘å­˜å‚¨æœåŠ¡ã€‚ Alibaba Cloud SchedulerXï¼šé˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦äº§å“ï¼Œæä¾›ç§’çº§ã€ç²¾å‡†çš„å®šæ—¶ï¼ˆåŸºäº Cron è¡¨è¾¾å¼ï¼‰ä»»åŠ¡è°ƒåº¦æœåŠ¡ã€‚ 5.1.3 é›†æˆSpringCloudç»„ä»¶Spring Cloud Alibaba ä½œä¸ºæ•´å¥—çš„å¾®æœåŠ¡è§£å†³ç»„ä»¶ï¼Œåªä¾é ç›®å‰é˜¿é‡Œçš„å¼€æºç»„ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œæ›´å¤šçš„æ˜¯é›†æˆå½“å‰çš„ç¤¾åŒºç»„ä»¶ï¼Œæ‰€ä»¥ Spring Cloud Alibaba å¯ä»¥é›†æˆ Zuulï¼ŒGateWayç­‰ç½‘å…³ç»„ä»¶ï¼Œä¹Ÿå¯ç»§æ‰¿Ribbonã€OpenFeignç­‰ç»„ä»¶ã€‚ 5.2 NacosæœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ5.2.1 Nacosä»‹ç»Nacos ï¼ˆDynamic Naming and Configuration Serviceï¼‰æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªé’ˆå¯¹å¾®æœåŠ¡æ¶æ„ä¸­æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚ Nacoså°±æ˜¯æ³¨å†Œä¸­å¿ƒ+é…ç½®ä¸­å¿ƒçš„ç»„åˆï¼ˆNacos&#x3D;Eureka + Config + Busï¼‰ å®˜ç½‘ï¼šhttps://nacos.io ä¸‹è½½åœ°å€ï¼šhttps://github.com/alibaba/Nacos NacosåŠŸèƒ½ç‰¹æ€§ æœåŠ¡å‘ç°ä¸å¥åº·æ£€æŸ¥ åŠ¨æ€é…ç½®ç®¡ç† åŠ¨æ€DNSæœåŠ¡ æœåŠ¡å’Œå…ƒæ•°æ®ç®¡ç†ï¼ˆç®¡ç†å¹³å°çš„è§’åº¦ï¼Œnacosä¹Ÿæœ‰ä¸€ä¸ªuié¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ³¨å†Œçš„æœåŠ¡åŠå…¶å®ä¾‹ä¿¡æ¯ï¼ˆå…ƒæ•°æ®ä¿¡æ¯ï¼‰ç­‰ï¼‰ï¼ŒåŠ¨æ€çš„æœåŠ¡æƒé‡è°ƒæ•´ã€åŠ¨æ€æœåŠ¡ä¼˜é›…ä¸‹çº¿ï¼Œéƒ½å¯ä»¥å»åš 5.2.2 Nacoså•ä¾‹æœåŠ¡éƒ¨ç½² ä¸‹è½½è§£å‹å®‰è£…åŒ…ï¼Œæ‰§è¡Œå‘½ä»¤å¯åŠ¨ï¼ˆæˆ‘ç”¨çš„ nacos-server-2.0.4.tar.gzï¼‰ 12[root@hao nocas]# tar zxvf nacos-server-2.0.4.tar.gz[root@hao bin]# startup.sh -m standalone 12# æˆ‘æ˜¯åœ¨ä¸ªäººæœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„ï¼Œå¦‚æœè¦åœ¨æœ¬åœ°windowså¯åŠ¨ä¹Ÿå¯ä»¥cmd startup.cmd è®¿é—®nacosæ§åˆ¶å°ï¼šhttp://ip:8848/nacos é»˜è®¤ç«¯å£8848ï¼Œé»˜è®¤ç”¨æˆ·åå¯†ç nacos&#x2F;nacos 5.2.3 å¾®æœåŠ¡æ³¨å†Œåˆ°Nacos åœ¨çˆ¶pomä¸­å¼•å…¥SCAä¾èµ–ç®¡ç†ç‰ˆæœ¬ 12345678910111213141516171819&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Greenwich.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;!--SCA --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt; &lt;version&gt;2.1.0.RELEASE&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; å„å¾®æœåŠ¡ä¸­ï¼ˆpageã€productï¼‰å¼•å…¥nacoså®¢æˆ·ç«¯ä¾èµ–ï¼Œå¿…é¡»åˆ é™¤eureka-clientä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;&lt;/dependency&gt; application.ymlä¿®æ”¹ï¼Œæ·»åŠ nacosé…ç½®ä¿¡æ¯ åœ¨ymlæ–‡ä»¶ä¸­éœ€è¦åˆ é™¤è°ƒç”¨configå’Œeurekaç›¸å…³çš„é…ç½®ï¼Œå¦åˆ™å¯åŠ¨å¤±è´¥ 12345spring: cloud: nacos: discovery: server-addr: 127.0.0.1:8848 #nacos server åœ°å€ å¯åŠ¨å•†å“å¾®æœåŠ¡ï¼Œè§‚å¯Ÿnacosæ§åˆ¶å° ä¿æŠ¤é˜ˆå€¼ï¼šå¯ä»¥è®¾ç½®ä¸º0-1ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªæ¯”ä¾‹å€¼ï¼ˆå½“å‰æœåŠ¡å¥åº·å®ä¾‹æ•°&#x2F;å½“å‰æœåŠ¡æ€»å®ä¾‹æ•°ï¼‰ åœºæ™¯ï¼š â€‹ ä¸€èˆ¬æµç¨‹ä¸‹ï¼Œnacosæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡æ¶ˆè´¹è€…è¦ä»nacosè·å–æŸä¸€ä¸ªæœåŠ¡çš„å¯ç”¨å®ä¾‹ä¿¡æ¯ï¼Œå¯¹äºæœåŠ¡å®ä¾‹æœ‰å¥åº·&#x2F;ä¸å¥åº·çŠ¶æ€ä¹‹åˆ†ï¼Œnacosåœ¨è¿”å›ç»™æ¶ˆè´¹è€…å®ä¾‹ä¿¡æ¯çš„æ—¶å€™ï¼Œä¼šè¿”å›å¥åº·å®ä¾‹ã€‚è¿™ä¸ªæ—¶å€™åœ¨ä¸€äº›é«˜å¹¶å‘ã€å¤§æµé‡åœºæ™¯ä¸‹ä¼šå­˜åœ¨ä¸€å®šçš„é—®é¢˜ â€‹ å¦‚æœæœåŠ¡Aæœ‰100ä¸ªå®ä¾‹ï¼Œ98ä¸ªå®ä¾‹éƒ½ä¸å¥åº·äº†ï¼Œåªæœ‰2ä¸ªå®ä¾‹æ˜¯å¥åº·çš„ï¼Œå¦‚æœnacosåªè¿”å›è¿™ä¸¤ä¸ªå¥åº·å®ä¾‹çš„ä¿¡æ¯çš„è¯ï¼Œé‚£ä¹ˆåç»­æ¶ˆè´¹è€…çš„è¯·æ±‚å°†å…¨éƒ¨è¢«åˆ†é…åˆ°è¿™ä¸¤ä¸ªå®ä¾‹ï¼Œæµé‡æ´ªå³°åˆ°æ¥ï¼Œ2ä¸ªå¥åº·çš„å®ä¾‹ä¹Ÿæ‰›ä¸ä½äº†ï¼Œæ•´ä¸ªæœåŠ¡A å°±æ‰›ä¸ä½ï¼Œä¸Šæ¸¸çš„å¾®æœåŠ¡ä¹Ÿä¼šå¯¼è‡´å´©æºƒï¼Œäº§ç”Ÿé›ªå´©æ•ˆåº”ã€‚ â€‹ ä¿æŠ¤é˜ˆå€¼çš„æ„ä¹‰åœ¨äºå½“æœåŠ¡Aå¥åº·å®ä¾‹æ•°&#x2F;æ€»å®ä¾‹æ•° &lt; ä¿æŠ¤é˜ˆå€¼ çš„æ—¶å€™ï¼Œè¯´æ˜å¥åº·å®ä¾‹çœŸçš„ä¸å¤šäº†ï¼Œè¿™ä¸ªæ—¶å€™ä¿æŠ¤é˜ˆå€¼ä¼šè¢«è§¦å‘ï¼ˆçŠ¶æ€trueï¼‰ â€‹ nacoså°†ä¼šæŠŠè¯¥æœåŠ¡æ‰€æœ‰çš„å®ä¾‹ä¿¡æ¯ï¼ˆå¥åº·çš„+ä¸å¥åº·çš„ï¼‰å…¨éƒ¨æä¾›ç»™æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…å¯èƒ½è®¿é—®åˆ°ä¸å¥åº·çš„å®ä¾‹ï¼Œè¯·æ±‚å¤±è´¥ï¼Œä½†è¿™æ ·ä¹Ÿæ¯”é€ æˆé›ªå´©è¦å¥½ï¼Œç‰ºç‰²äº†ä¸€äº›è¯·æ±‚ï¼Œä¿è¯äº†æ•´ä¸ªç³»ç»Ÿçš„ä¸€ä¸ªå¯ç”¨ã€‚ â€‹ **æ³¨æ„ï¼š**é˜¿é‡Œå†…éƒ¨åœ¨ä½¿ç”¨nacosçš„æ—¶å€™ï¼Œä¹Ÿç»å¸¸è°ƒæ•´è¿™ä¸ªä¿æŠ¤é˜ˆå€¼å‚æ•°ã€‚ 5.2.4 è´Ÿè½½å‡è¡¡â€‹ Nacoså®¢æˆ·ç«¯å¼•å…¥çš„æ—¶å€™ï¼Œä¼šå…³è”å¼•å…¥Ribbonçš„ä¾èµ–åŒ…ï¼Œæˆ‘ä»¬ä½¿ç”¨OpenFeignçš„æ—¶å€™ä¹Ÿä¼šå¼•å…¥Ribbonçš„ä¾èµ–ï¼ŒRibbonåŒ…æ‹¬Hystrixéƒ½æŒ‰åŸæ¥æ–¹å¼è¿›è¡Œé…ç½®å³å¯ â€‹ æ­¤å¤„ï¼Œæˆ‘ä»¬å°†å•†å“å¾®æœåŠ¡ï¼Œå†å¯åŠ¨äº†ä¸€ä¸ª9001ç«¯å£ï¼Œæ³¨å†Œåˆ°Nacosä¸Šï¼Œä¾¿äºæµ‹è¯•è´Ÿè½½å‡è¡¡ï¼Œæˆ‘ä»¬é€šè¿‡åå°ä¹Ÿå¯ä»¥çœ‹å‡ºã€‚ â€‹ æµ‹è¯•ï¼šå¯åŠ¨ä¸¤ä¸ªæä¾›è€…ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œæµ‹è¯•æ¶ˆè´¹è€…çš„è°ƒç”¨ http://localhost:9100/page/getPort 5.2.5 Nacosæ•°æ®æ¨¡å‹ï¼ˆé¢†åŸŸæ¨¡å‹ï¼‰â€‹ Namespaceå‘½åç©ºé—´ã€Groupåˆ†ç»„ã€é›†ç¾¤è¿™äº›éƒ½æ˜¯ä¸ºäº†è¿›è¡Œå½’ç±»ç®¡ç†ï¼ŒæŠŠæœåŠ¡å’Œé…ç½®æ–‡ä»¶è¿›è¡Œå½’ç±»ï¼Œå½’ç±»ä¹‹åå°±å¯ä»¥å®ç°ä¸€å®šçš„æ•ˆæœï¼Œæ¯”å¦‚éš”ç¦» â€‹ æ¯”å¦‚ï¼Œå¯¹äºæœåŠ¡æ¥è¯´ï¼Œä¸åŒå‘½åç©ºé—´ä¸­çš„æœåŠ¡ä¸èƒ½å¤Ÿäº’ç›¸è®¿é—®è°ƒç”¨ Namespaceï¼šå‘½åç©ºé—´ï¼Œå¯¹ä¸åŒçš„ç¯å¢ƒè¿›è¡Œéš”ç¦»ï¼Œæ¯”å¦‚éš”ç¦»å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ Groupï¼šåˆ†ç»„ï¼Œå°†è‹¥å¹²ä¸ªæœåŠ¡æˆ–è€…è‹¥å¹²ä¸ªé…ç½®é›†å½’ä¸ºä¸€ç»„ï¼Œé€šå¸¸ä¹ æƒ¯ä¸€ä¸ªç³»ç»Ÿå½’ä¸ºä¸€ä¸ªç»„ Serviceï¼šæŸä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚å•†å“å¾®æœåŠ¡ DataIdï¼šé…ç½®é›†æˆ–è€…å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ Namespace + Group + Service å¦‚åŒ Maven ä¸­çš„GAVåæ ‡ï¼ŒGAVåæ ‡æ˜¯ä¸ºäº†é”å®šJarï¼Œè€Œè¿™é‡Œæ˜¯ä¸ºäº†é”å®šæœåŠ¡ Namespace + Group + Data ID å¦‚åŒ Maven ä¸­çš„GAVåæ ‡ï¼ŒGAVåæ ‡æ˜¯ä¸ºäº†é”å®šJarï¼Œè€Œè¿™é‡Œæ˜¯ä¸ºäº†é”å®šæœåŠ¡ æœ€ä½³å®è·µ â€‹ NacosæŠ½è±¡å‡ºäº†Namespaceã€Groupã€Serviceã€DataIdç­‰æ¦‚å¿µï¼Œå…·ä½“ä»£è¡¨ä»€ä¹ˆå–å†³äºæ€ä¹ˆç”¨ï¼ˆéå¸¸çµæ´»ï¼‰ï¼Œæ¨èç”¨æ³•å¦‚ä¸‹ã€‚ä¸Šé¢é…ç½®çš„cloud-alibabaä¾èµ–2.1.0.RELEASEçš„ç‰ˆæœ¬æ˜¯æœåŠ¡æ˜¯é…ç½®ä¸äº†åˆ†ç»„ï¼Œé…ç½®æ²¡æœ‰groupå±æ€§ï¼Œéœ€è¦é«˜ç‰ˆæœ¬çš„ä¾èµ–ï¼Œä½†é«˜ç‰ˆæœ¬ä¼šå’ŒMybatis-Plusæœ‰å†²çªå¯¼è‡´æ— æ³•å¯åŠ¨,æˆ‘è‡ªå·±æ”¹äº†æé«˜Mybatis-plusçš„ç‰ˆæœ¬æ— æ³•è§£å†³ 5.2.6 Nacosé…ç½®ä¸­å¿ƒå›é¡¾ä¹‹å‰ï¼šSpring Cloud Config + Busï¼ˆé…ç½®çš„è‡ªåŠ¨æ›´æ–°ï¼‰ Github ä¸Šæ·»åŠ é…ç½®æ–‡ä»¶ åˆ›å»ºConfig Server é…ç½®ä¸­å¿ƒâ€”&gt;ä»Githubä¸Šå»ä¸‹è½½é…ç½®ä¿¡æ¯ å…·ä½“çš„å¾®æœåŠ¡(æœ€ç»ˆä½¿ç”¨é…ç½®ä¿¡æ¯çš„)ä¸­é…ç½®Config Clientâ€”&gt; ConfigServerè·å–é…ç½®ä¿¡æ¯ æœ‰Nacosä¹‹åï¼Œåˆ†å¸ƒå¼é…ç½®å°±ç®€å•å¾ˆå¤š Githubä¸éœ€è¦äº†ï¼ˆé…ç½®ä¿¡æ¯ç›´æ¥é…ç½®åœ¨Nacos serverä¸­ï¼‰ï¼ŒBusä¹Ÿä¸éœ€è¦äº†(ä¾ç„¶å¯ä»¥å®ŒæˆåŠ¨æ€åˆ·æ–°) æ¥ä¸‹æ¥ å»Nacos serverä¸­æ·»åŠ é…ç½®ä¿¡æ¯ æ”¹é€ å…·ä½“çš„å¾®æœåŠ¡ï¼Œä½¿å…¶æˆä¸ºNacos Config Clientï¼Œèƒ½å¤Ÿä»Nacos Serverä¸­è·å–åˆ°é…ç½®ä¿¡æ¯ ï¼ˆ1ï¼‰Nacos Serveræ·»åŠ é…ç½® dataIdçš„å®Œæ•´æ ¼å¼å¦‚ä¸‹ï¼ˆåˆ›å»ºæ—¶è¾“å…¥åç§°ï¼ˆDataIDï¼‰åˆ«æ¼äº†æ–‡ä»¶åç¼€ï¼‰ 1$&#123;prefix&#125;-$&#123;spring.profile.active&#125;.$&#123;file-extension&#125; ï¼ˆ2ï¼‰å¾®æœåŠ¡ä¸­å¼€å¯Nacosé…ç½®ç®¡ç† æ·»åŠ ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;&lt;/dependency&gt; å¾®æœåŠ¡ä¸­å¦‚ä½•é”å®š Nacos Server ä¸­çš„é…ç½®æ–‡ä»¶ï¼ˆdataIdï¼‰ é€šè¿‡ Namespace + Group + dataId æ¥é”å®šé…ç½®æ–‡ä»¶ï¼ŒNamespaceä¸æŒ‡å®šå°±é»˜è®¤publicï¼ŒGroupä¸æŒ‡å®šå°±é»˜è®¤ DEFAULT_GROUP prefix é»˜è®¤ä¸º spring.application.name çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹spring.cloud.nacos.config.prefixæ¥é…ç½®ã€‚ spring.profile.activeå³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ profileã€‚ æ³¨æ„ï¼šå½“ spring.profile.activeä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦- ä¹Ÿå°†ä¸å­˜åœ¨dataIdçš„æ‹¼æ¥æ ¼å¼å˜æˆ ** ${prefix}.${file-**extension} file-exetension ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹spring.cloud.nacos.config.file-extensionæ¥é…ç½®ã€‚ç›®å‰åªæ”¯æŒ properties å’Œ yaml ç±»å‹ã€‚ 123456789cloud: nacos: discovery: server-addr: xxx:8848 config: server-addr: xxx:8848 namespace: public #å‘½åç©ºé—´ group: DEFAULT_GROUP #å¦‚æœä½¿ç”¨çš„é»˜è®¤åˆ†ç»„,å¯ä»¥ä¸è®¾ç½® file-extension: yaml 5.3 SCA Sentinel åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²å«å…µ5.3.1 Sentinel ä»‹ç»Sentinelæ˜¯ä¸€ä¸ªé¢å‘äº‘åŸç”Ÿå¾®æœåŠ¡çš„æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ç»„ä»¶ã€‚æ›¿ä»£Hystrixï¼Œé’ˆå¯¹é—®é¢˜ï¼šæœåŠ¡é›ªå´©ã€æœåŠ¡é™çº§ã€æœåŠ¡ç†”æ–­ã€æœåŠ¡é™æµ Hystrixï¼š æœåŠ¡æ¶ˆè´¹è€…ï¼ˆé™æ€åŒ–å¾®æœåŠ¡ï¼‰â€”&gt;è°ƒç”¨æœåŠ¡æä¾›è€…ï¼ˆå•†å“å¾®æœåŠ¡ï¼‰ åœ¨è°ƒç”¨æ–¹å¼•å…¥Hystrix è‡ªå·±æ­å»ºç›‘æ§å¹³å° dashboard æ²¡æœ‰æä¾›UIç•Œé¢è¿›è¡ŒæœåŠ¡ç†”æ–­ã€æœåŠ¡é™çº§ç­‰é…ç½®ï¼ˆä½¿ç”¨çš„æ˜¯@HystrixCommandå‚æ•°è¿›è¡Œè®¾ç½®ï¼Œä»£ç å…¥ä¾µï¼‰ Sentinel ç‹¬ç«‹å¯éƒ¨ç½²Dashboard&#x2F;æ§åˆ¶å°ç»„ä»¶ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªjaræ–‡ä»¶ï¼Œç›´æ¥è¿è¡Œå³å¯ï¼‰ å‡å°‘ä»£ç å¼€å‘ï¼Œé€šè¿‡UIç•Œé¢é…ç½®å³å¯å®Œæˆç»†ç²’åº¦æ§åˆ¶ Sentinel åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†: æ ¸å¿ƒåº“ï¼šï¼ˆJava å®¢æˆ·ç«¯ï¼‰ä¸ä¾èµ–ä»»ä½•æ¡†æ¶&#x2F;åº“ï¼Œèƒ½å¤Ÿè¿è¡Œäºæ‰€æœ‰ Java è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶å¯¹ Dubbo &#x2F; Spring Cloud ç­‰æ¡†æ¶ä¹Ÿæœ‰è¾ƒå¥½çš„æ”¯æŒã€‚ æ§åˆ¶å°ï¼šï¼ˆDashboardï¼‰åŸºäº Spring Boot å¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„ Tomcat ç­‰åº”ç”¨å®¹å™¨ã€‚ Sentinel å…·æœ‰ä»¥ä¸‹ç‰¹å¾: ä¸°å¯Œçš„åº”ç”¨åœºæ™¯ï¼šSentinel æ‰¿æ¥äº†é˜¿é‡Œå·´å·´è¿‘ 10 å¹´çš„åŒåä¸€å¤§ä¿ƒæµé‡çš„æ ¸å¿ƒåœºæ™¯ï¼Œä¾‹å¦‚ç§’æ€ï¼ˆå³çªå‘æµé‡æ§åˆ¶åœ¨ç³»ç»Ÿå®¹é‡å¯ä»¥æ‰¿å—çš„èŒƒå›´ï¼‰ã€æ¶ˆæ¯å‰Šå³°å¡«è°·ã€é›†ç¾¤æµé‡æ§åˆ¶ã€å®æ—¶ç†”æ–­ä¸‹æ¸¸ä¸å¯ç”¨åº”ç”¨ç­‰ã€‚ å®Œå¤‡çš„å®æ—¶ç›‘æ§ï¼šSentinel åŒæ—¶æä¾›å®æ—¶çš„ç›‘æ§åŠŸèƒ½ã€‚æ‚¨å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æ¥å…¥åº”ç”¨çš„å•å°æœºå™¨ç§’çº§æ•°æ®ï¼Œç”šè‡³ 500 å°ä»¥ä¸‹è§„æ¨¡çš„é›†ç¾¤çš„æ±‡æ€»è¿è¡Œæƒ…å†µã€‚ å¹¿æ³›çš„å¼€æºç”Ÿæ€ï¼šSentinel æä¾›å¼€ç®±å³ç”¨çš„ä¸å…¶å®ƒå¼€æºæ¡†æ¶&#x2F;åº“çš„æ•´åˆæ¨¡å—ï¼Œä¾‹å¦‚ä¸ SpringCloudã€Dubboçš„æ•´åˆã€‚æ‚¨åªéœ€è¦å¼•å…¥ç›¸åº”çš„ä¾èµ–å¹¶è¿›è¡Œç®€å•çš„é…ç½®å³å¯å¿«é€Ÿåœ°æ¥å…¥ Sentinelã€‚ å®Œå–„çš„ SPI æ‰©å±•ç‚¹ï¼šSentinel æä¾›ç®€å•æ˜“ç”¨ã€å®Œå–„çš„ SPI æ‰©å±•æ¥å£ã€‚æ‚¨å¯ä»¥é€šè¿‡å®ç°æ‰©å±•æ¥å£æ¥å¿«é€Ÿåœ°å®šåˆ¶é€»è¾‘ã€‚ä¾‹å¦‚å®šåˆ¶è§„åˆ™ç®¡ç†ã€é€‚é…åŠ¨æ€æ•°æ®æºç­‰ã€‚ Sentinelä¸»è¦ç‰¹æ€§ï¼š Sentinel çš„å¼€æºç”Ÿæ€ï¼š 5.3.2 Sentinel éƒ¨ç½²ä¸‹è½½åœ°å€ï¼šhttps://github.com/alibaba/Sentinel/releases æˆ‘è¿™é‡Œä½¿ç”¨v1.8.1 å¯åŠ¨ï¼šjava -jar -Dserver.port=5000 sentinel-dashboard-1.8.1.jar ç”¨æˆ·å&#x2F;å¯†ç ï¼šsentinel/sentinel ä¸ä½¿ç”¨-Dserver.porté»˜è®¤æ§åˆ¶å°ç«¯å£æ˜¯8080ï¼Œæˆ‘çš„8080å·²ç»å ç”¨äº†ï¼Œæ‰€ä»¥æŒ‡å®šä¸€ä¸ª.å®ƒè¿æ¥çš„å®¢æˆ·ç«¯ç«¯å£é»˜è®¤æ˜¯8719ä¹Ÿå¯ä»¥é€šè¿‡-Dcsp.sentinel.dashboard.serveræŒ‡å®š 5.3.3 æœåŠ¡æ”¹é€ æˆ‘ä»¬ä¹‹å‰æ˜¯ä½¿ç”¨çš„OpenFeignï¼ˆHystrixï¼‰æ¥è¿›è¡Œç†”æ–­é™çº§ï¼Œåšçš„äº‹æƒ…æœ‰ç¬¬ä¸€åº”ç”¨é…ç½®å¼€å¯hystrixç¬¬äºŒåœ¨Controllerå½“ä¸­æ³¨è§£é…ç½®äº†ç†”æ–­é™çº§çš„è§„åˆ™ï¼ˆæˆ–è€…åœ¨é…ç½®æ–‡ä»¶é…ç½®ï¼‰ã€‚ ç°åœ¨æˆ‘ä»¬ä½¿ç”¨sentinelåˆ™éœ€è¦å°†ä¹‹å‰çš„Hystrixç›¸å…³é…ç½®å»æ‰ï¼ˆä¸ºäº†ä¸æ±¡æŸ“ä¹‹å‰çš„ä»£ç ï¼Œå¤åˆ¶ä¸€ä¸ªé¡µé¢é™æ€åŒ–å¾®æœåŠ¡ service-page-9101ï¼‰ å¼•å…¥ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-sentinel&lt;/artifactId&gt;&lt;/dependency&gt; ä¿®æ”¹applicationé…ç½®ï¼ˆä¹Ÿè¦æš´éœ²ç«¯ç‚¹éœ€è¦ä¾èµ–actuatorï¼‰ 123456789101112spring: cloud: sentinel: transport: dashboard: xxx.xxx.xxx:5000 # æ§åˆ¶å°çš„åœ°å€ç«¯å£ port: 8719 # å®¢æˆ·ç«¯å¼€æ”¾ç«¯å£ clientIp: xxx # ä¸é…ç½®ï¼Œé»˜è®¤å°±æ˜¯å½“å‰çš„å†…ç½‘ipmanagement: endpoints: web:exposure: include: &quot;*&quot; å¯åŠ¨æœåŠ¡ï¼Œå‘é€è¯·æ±‚å³å¯çœ‹åˆ°ç›‘æ§ä¿¡æ¯ã€‚ è¿™é‡Œæœ‰äº›å°ä¼™ä¼´ï¼ˆè‡ªå·±ï¼‰å¯èƒ½æŠŠsentineléƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨äº†ä¹Ÿå°±æ˜¯çº¿ä¸Šï¼Œç„¶åå°±ä¼šå‡ºç°é—®é¢˜åœ¨sentinelæ§åˆ¶å°çœ‹å¾—åˆ°è‡ªå·±çš„æœåŠ¡ï¼Œä½†è¯·æ±‚æœåŠ¡å®æ—¶ç›‘æ§é‡Œé¢å¹¶ä¸ä¼šæœ‰æ•°æ®æ˜¾ç¤ºã€‚å› ä¸ºä½ çš„æœ¬åœ°ideaå¯çš„æœåŠ¡å¯ä»¥å¾€çº¿ä¸Šçš„sentinelæ³¨å†Œï¼Œä½†çº¿ä¸Šçš„sentinelå°±è®¿é—®ä¸åˆ°ä½ æœ¬åœ°çš„å®¢æˆ·ç«¯åœ°å€äº†ã€‚æ‰€ä»¥æœ¬åœ°æµ‹è¯•è¿˜æ˜¯å¯ä¸ªæœ¬åœ°è¦ä¹ˆå°†æœ¬åœ°åœ°å€æ˜ å°„ä¸ªå…¬ç½‘çš„ç„¶åé…åˆ°clientIp è¿˜æœ‰ä¸ªé—®é¢˜å°±æ˜¯å®ƒæ˜¯æ‡’åŠ è½½ï¼Œéƒ½æ­£å¸¸çš„æƒ…å†µä¸‹å®ƒä¹Ÿä¸ä¼šæ˜¾ç¤ºå·²æ³¨å†Œçš„æœåŠ¡ï¼Œä½ æŠŠæœåŠ¡çš„æ¥å£è®¿é—®ä¸€ä¸‹æ‰å¯ä»¥å‡ºç°æœåŠ¡ï¼Œå®æ—¶ç›‘æ§ä¹Ÿæ˜¯ä¸€æ · 5.3.4 Sentinel å…³é”®æ¦‚å¿µ 5.3.5 Sentinel æµé‡è§„åˆ™æ¨¡å—ç³»ç»Ÿå¹¶å‘èƒ½åŠ›æœ‰é™ï¼Œæ¯”å¦‚ç³»ç»ŸAçš„QPSæ”¯æŒ1ä¸ªï¼Œå¦‚æœå¤ªå¤šè¯·æ±‚è¿‡æ¥ï¼Œé‚£ä¹ˆAå°±åº”è¯¥è¿›è¡Œæµé‡æ§åˆ¶äº†ï¼Œæ¯”å¦‚å…¶ä»–è¯·æ±‚ç›´æ¥æ‹’ç» è¿›è¡Œå¹¶å‘æµ‹è¯•5æ¡çº¿ç¨‹ï¼Œå…¶ä¸­å››æ¡è¢«æ‹’ç»ã€‚ **èµ„æºåï¼š**é»˜è®¤è¯·æ±‚è·¯å¾„ **é’ˆå¯¹æ¥æºï¼š**Sentinelå¯ä»¥é’ˆå¯¹è°ƒç”¨è€…è¿›è¡Œé™æµï¼Œå¡«å†™å¾®æœåŠ¡ï¼ˆæ¶ˆè´¹è€…ï¼‰åç§°ï¼Œé»˜è®¤defaultï¼ˆä¸åŒºåˆ†æ¥æºï¼‰ é˜ˆå€¼ç±»å‹&#x2F;å•æœºé˜ˆå€¼ QPSï¼šï¼ˆæ¯ç§’é’Ÿè¯·æ±‚æ•°é‡ï¼‰å½“è°ƒç”¨è¯¥èµ„æºçš„QPSè¾¾åˆ°é˜ˆå€¼æ—¶è¿›è¡Œé™æµ çº¿ç¨‹æ•°ï¼šå½“è°ƒç”¨è¯¥èµ„æºçš„çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™è¿›è¡Œé™æµï¼ˆçº¿ç¨‹å¤„ç†è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœè¯´ä¸šåŠ¡é€»è¾‘æ‰§è¡Œæ—¶é—´å¾ˆé•¿ï¼Œæµé‡æ´ªå³°æ¥ä¸´æ—¶ï¼Œä¼šè€—è´¹å¾ˆå¤šçº¿ç¨‹èµ„æºï¼Œè¿™äº›çº¿ç¨‹èµ„æºä¼šå †ç§¯ï¼Œæœ€ç»ˆå¯èƒ½é€ æˆæœåŠ¡ä¸å¯ç”¨ï¼Œè¿›ä¸€æ­¥ä¸Šæ¸¸æœåŠ¡ä¸å¯ç”¨ï¼Œæœ€ç»ˆå¯èƒ½æœåŠ¡é›ªå´©ï¼‰ **æ˜¯å¦é›†ç¾¤ï¼š**æ˜¯å¦é›†ç¾¤é™æµ æµæ§æ¨¡å¼ï¼š ç›´æ¥ï¼šèµ„æºè°ƒç”¨è¾¾åˆ°é™æµæ¡ä»¶æ—¶ï¼Œç›´æ¥é™æµ å…³è”ï¼šå…³è”çš„èµ„æºè°ƒç”¨è¾¾åˆ°é˜ˆå€¼æ—¶å€™é™æµè‡ªå·± é“¾è·¯ï¼šåªè®°å½•æŒ‡å®šé“¾è·¯ä¸Šçš„æµé‡ æµæ§æ•ˆæœï¼š å¿«é€Ÿå¤±è´¥ï¼šç›´æ¥å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸ Warm Upï¼šæ ¹æ®å†·åŠ è½½å› å­ï¼ˆé»˜è®¤3ï¼‰çš„å€¼ï¼Œä»é˜ˆå€¼&#x2F;å†·åŠ è½½å› å­ï¼Œç»è¿‡é¢„çƒ­æ—¶é•¿ï¼Œæ‰è¾¾åˆ°è®¾ç½®çš„QPSé˜ˆå€¼ æ’é˜Ÿç­‰å¾…ï¼šåŒ€é€Ÿæ’é˜Ÿï¼Œè®©è¯·æ±‚åŒ€é€Ÿé€šè¿‡ï¼Œé˜ˆå€¼ç±»å‹å¿…é¡»è®¾ç½®ä¸ºQPSï¼Œå¦åˆ™æ— æ•ˆ 1ï¼‰æ§æµæ¨¡å¼ä¹‹å…³è”é™æµå…³è”çš„èµ„æºè°ƒç”¨è¾¾åˆ°é˜ˆå€¼æ—¶å€™é™æµè‡ªå·±ï¼Œæ¯”å¦‚ç”¨æˆ·æ³¨å†Œæ¥å£ï¼Œéœ€è¦è°ƒç”¨èº«ä»½è¯æ ¡éªŒæ¥å£ï¼ˆå¾€å¾€èº«ä»½è¯æ ¡éªŒæ¥å£ï¼‰ï¼Œå¦‚æœèº«ä»½è¯æ ¡éªŒæ¥å£è¯·æ±‚è¾¾åˆ°é˜ˆå€¼ï¼Œä½¿ç”¨å…³è”ï¼Œå¯ä»¥å¯¹ç”¨æˆ·æ³¨å†Œæ¥å£è¿›è¡Œé™æµã€‚ ä»…ä»…å¯†é›†è¯·æ±‚test01æ—¶ï¼Œå¹¶ä¸ä¼šé™æµã€‚åªæœ‰test02é™æµæ—¶test01æ‰è¿›è¡Œå½“å‰çš„é™æµé…ç½® 2ï¼‰æµæ§æ¨¡å¼ä¹‹é“¾è·¯é™æµé“¾è·¯æŒ‡çš„æ˜¯è¯·æ±‚é“¾è·¯ï¼ˆè°ƒç”¨é“¾ï¼šAâ€“&gt;Bâ€“Cï¼ŒDâ€“&gt;Eâ€“&gt;Cï¼‰ é“¾è·¯æ¨¡å¼ä¸‹ä¼šæ§åˆ¶è¯¥èµ„æºæ‰€åœ¨çš„è°ƒç”¨é“¾è·¯å…¥å£çš„æµé‡ã€‚éœ€è¦åœ¨è§„åˆ™ä¸­é…ç½®å…¥å£èµ„æºï¼Œå³è¯¥è°ƒç”¨é“¾è·¯å…¥å£çš„ä¸Šä¸‹æ–‡åç§°ã€‚ ä¸€æ£µå…¸å‹çš„è°ƒç”¨æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šå›¾ä¸­æ¥è‡ªå…¥å£ Entrance1 å’Œ Entrance2 çš„è¯·æ±‚éƒ½è°ƒç”¨åˆ°äº†èµ„æº NodeA ï¼ŒSentinel å…è®¸åªæ ¹æ®æŸä¸ªè°ƒç”¨å…¥å£çš„ç»Ÿè®¡ä¿¡æ¯å¯¹èµ„æºé™æµã€‚æ¯”å¦‚é“¾è·¯æ¨¡å¼ä¸‹è®¾ç½®å…¥å£èµ„æºä¸º Entrance1 æ¥è¡¨ç¤ºåªæœ‰ä»å…¥å£Entrance1 çš„è°ƒç”¨æ‰ä¼šè®°å½•åˆ° NodeA çš„é™æµç»Ÿè®¡å½“ä¸­ï¼Œè€Œä¸å…³å¿ƒç» Entrance2 åˆ°æ¥çš„è°ƒç”¨ã€‚ åˆ«çš„æ¥æºå¹¶ä¸é™æµï¼Œåªæœ‰ä»test02è¯·æ±‚test01æ‰é™æµ 1ï¼‰æµæ§æ•ˆæœä¹‹Warm upå½“ç³»ç»Ÿé•¿æœŸå¤„äºç©ºé—²çš„æƒ…å†µä¸‹ï¼Œå½“æµé‡çªç„¶å¢åŠ æ—¶ï¼Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ï¼Œæ¯”å¦‚ç”µå•†ç½‘ç«™çš„ç§’æ€æ¨¡å—ã€‚ é€šè¿‡ Warm Up æ¨¡å¼ï¼ˆé¢„çƒ­æ¨¡å¼ï¼‰ï¼Œè®©é€šè¿‡çš„æµé‡ç¼“æ…¢å¢åŠ ï¼Œç»è¿‡è®¾ç½®çš„é¢„çƒ­æ—¶é—´ä»¥åï¼Œåˆ°è¾¾ç³»ç»Ÿå¤„ç†è¯·æ±‚é€Ÿç‡çš„è®¾å®šå€¼ã€‚ Warm Up æ¨¡å¼é»˜è®¤ä¼šä»è®¾ç½®çš„ QPS é˜ˆå€¼çš„ 1&#x2F;3 å¼€å§‹æ…¢æ…¢å¾€ä¸Šå¢åŠ è‡³ QPS è®¾ç½®å€¼ã€‚ æµæ§æ•ˆæœä¹‹æ’é˜Ÿç­‰å¾… æ’é˜Ÿç­‰å¾…æ¨¡å¼ä¸‹ä¼šä¸¥æ ¼æ§åˆ¶è¯·æ±‚é€šè¿‡çš„é—´éš”æ—¶é—´ï¼Œå³è¯·æ±‚ä¼šåŒ€é€Ÿé€šè¿‡ï¼Œå…è®¸éƒ¨åˆ†è¯·æ±‚æ’é˜Ÿç­‰å¾…ï¼Œé€šå¸¸ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°å¡«è°·ç­‰åœºæ™¯ã€‚éœ€è®¾ç½®å…·ä½“çš„è¶…æ—¶æ—¶é—´ï¼Œå½“è®¡ç®—çš„ç­‰å¾…æ—¶é—´è¶…è¿‡è¶…æ—¶æ—¶é—´æ—¶è¯·æ±‚å°±ä¼šè¢«æ‹’ç»ã€‚ å¾ˆå¤šæµé‡è¿‡æ¥äº†ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æ‹’ç»è¯·æ±‚ï¼Œè€Œæ˜¯è¯·æ±‚è¿›è¡Œæ’é˜Ÿï¼Œä¸€ä¸ªä¸€ä¸ªåŒ€é€Ÿé€šè¿‡ï¼ˆå¤„ç†ï¼‰ï¼Œè¯·æ±‚èƒ½ç­‰å°±ç­‰ç€è¢«å¤„ç†ï¼Œä¸èƒ½ç­‰ï¼ˆç­‰å¾…æ—¶é—´&gt;è¶…æ—¶æ—¶é—´ï¼‰å°±ä¼šè¢«æ‹’ç» ä¾‹å¦‚ï¼ŒQPS é…ç½®ä¸º 5ï¼Œåˆ™ä»£è¡¨è¯·æ±‚æ¯ 200 ms æ‰èƒ½é€šè¿‡ä¸€ä¸ªï¼Œå¤šå‡ºçš„è¯·æ±‚å°†æ’é˜Ÿç­‰å¾…é€šè¿‡ã€‚è¶…æ—¶æ—¶é—´ä»£è¡¨æœ€å¤§æ’é˜Ÿæ—¶é—´ï¼Œè¶…å‡ºæœ€å¤§æ’é˜Ÿæ—¶é—´çš„è¯·æ±‚å°†ä¼šç›´æ¥è¢«æ‹’ç»ã€‚æ’é˜Ÿç­‰å¾…æ¨¡å¼ä¸‹ï¼ŒQPS è®¾ç½®å€¼ä¸è¦è¶…è¿‡ 1000ï¼ˆè¯·æ±‚é—´éš” 1 msï¼‰ã€‚ 5.3.6 Sentinel é™çº§è§„åˆ™æ¨¡å—æµæ§æ˜¯å¯¹å¤–éƒ¨æ¥çš„å¤§æµé‡è¿›è¡Œæ§åˆ¶ï¼Œç†”æ–­é™çº§çš„è§†è§’æ˜¯å¯¹å†…éƒ¨é—®é¢˜è¿›è¡Œå¤„ç†ã€‚ Sentinel é™çº§ä¼šåœ¨è°ƒç”¨é“¾è·¯ä¸­æŸä¸ªèµ„æºå‡ºç°ä¸ç¨³å®šçŠ¶æ€æ—¶ï¼ˆä¾‹å¦‚è°ƒç”¨è¶…æ—¶æˆ–å¼‚å¸¸æ¯”ä¾‹å‡é«˜ï¼‰ï¼Œå¯¹è¿™ä¸ªèµ„æºçš„è°ƒç”¨è¿›è¡Œé™åˆ¶ï¼Œè®©è¯·æ±‚å¿«é€Ÿå¤±è´¥ï¼Œé¿å…å½±å“åˆ°å…¶å®ƒçš„èµ„æºè€Œå¯¼è‡´çº§è”é”™è¯¯ã€‚å½“èµ„æºè¢«é™çº§åï¼Œåœ¨æ¥ä¸‹æ¥çš„é™çº§æ—¶é—´çª—å£ä¹‹å†…ï¼Œå¯¹è¯¥èµ„æºçš„è°ƒç”¨éƒ½è‡ªåŠ¨ç†”æ–­ï¼Œè¿™é‡Œçš„é™çº§å…¶å®æ˜¯Hystrixä¸­çš„ç†”æ–­ã€‚ ç­–ç•¥ Sentinelä¸ä¼šåƒHystrixé‚£æ ·æ”¾è¿‡ä¸€ä¸ªè¯·æ±‚å°è¯•è‡ªæˆ‘ä¿®å¤ï¼Œå°±æ˜¯æ˜æ˜ç¡®ç¡®æŒ‰ç…§æ—¶é—´çª—å£æ¥ï¼Œç†”æ–­è§¦å‘åï¼Œæ—¶é—´çª—å£å†…æ‹’ç»è¯·æ±‚ï¼Œæ—¶é—´çª—å£åå°±æ¢å¤ã€‚ åœ¨çª—å£æ—¶é—´(ç»Ÿè®¡æ—¶é—´)é‡Œè¾¾åˆ°äº†5ä¸ªä»¥ä¸Šçš„è¯·æ±‚ï¼Œä¸”æœ€å¤§çš„å“åº”æ—¶é—´è¶…è¿‡äº†200msåˆ™è®°ä¸ºæ…¢è°ƒç”¨ï¼Œå½“æ…¢è°ƒç”¨çš„æ•°é‡è¾¾åˆ°é˜ˆå€¼æ¯”ä¾‹ï¼ˆå…¨éƒ¨éƒ½è¶…è¿‡æ‰ç†”æ–­åˆ™æ¯”ä¾‹æ˜¯1ï¼‰åˆ™è¿›è¡Œç†”æ–­ï¼Œåœ¨ç†”æ–­æ—¶é•¿é‡Œéƒ½æ˜¯å¤„äºç†”æ–­çŠ¶æ€ï¼ˆä¸ä¼šè¿›è¡Œé‡è¯•ï¼‰ ä¿®æ”¹test01åŠ ä¸Šçº¿ç¨‹ç¡çœ æ—¶é—´ä¸º300msï¼Œå¼€å¯5ä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®ã€‚è¿™æ ·æœ€ç»ˆçš„é¢„æœŸç»“æœåº”è¯¥æ˜¯å…¨éƒ½è¶…è¿‡200msï¼Œè¿›è¡Œç†”æ–­ä¸”ä¹‹å5ç§’ä¹‹å†…éƒ½æ˜¯ç†”æ–­çŠ¶æ€ å®é™…æµ‹è¯•å¯¹äºæ…¢è°ƒç”¨æ¯”ä¾‹å’Œå¼‚å¸¸æ¯”ä¾‹å®Œå…¨ä¸åœ¨é¢„æœŸï¼Œåœ¨æ­£å¸¸åº”è¯¥5çš„å¹¶å‘å¯ä»¥è¾¾åˆ°ç†”æ–­ï¼Œå®é™…ä¸ä¼šä¸”é…ç½®äº†æ›´é«˜çš„å¹¶å‘ä¹Ÿæ˜¯å¦‚æ­¤ç›´åˆ°é…ç½®äº†1000çš„çº¿ç¨‹æ‰ç†”æ–­ï¼Œç†”æ–­æ—¶é—´ç¡®å®æ˜¯å¦‚é…ç½®ä¸€æ ·æ²¡æœ‰é—®é¢˜ã€‚ä½†æ¯”ä¾‹é˜ˆå€¼ã€æœ€å°è¯·æ±‚æ•°ä»¥åŠç»Ÿè®¡æ—¶é•¿æ— æ³•ä¿®æ”¹ã€‚ **æ…¢è°ƒç”¨æ¯”ä¾‹ ** å½“ 1sç»Ÿè®¡æ—¶é•¿ å†…æŒç»­è¿›å…¥ &gt;&#x3D;5æœ€å°è¯·æ±‚æ•° ä¸ªè¯·æ±‚ï¼Œå¹³å‡å“åº”æ—¶é—´è¶…è¿‡200msæœ€å¤§RTï¼ˆä»¥ ms ä¸ºå•ä½ï¼‰ï¼Œåˆ™æ ‡è®°ä¸ºæ…¢è°ƒç”¨ï¼Œå½“æ…¢è°ƒç”¨è¯·æ±‚çš„æ¯”ä¾‹è¶…è¿‡äº†æ¯”ä¾‹é˜ˆå€¼åˆ™è¿›è¡Œç†”æ–­ã€‚æ³¨æ„Sentinel é»˜è®¤ç»Ÿè®¡çš„ RT ä¸Šé™æ˜¯ 4900 msï¼Œè¶…å‡ºæ­¤é˜ˆå€¼çš„éƒ½ä¼šç®—ä½œ 4900 msï¼Œè‹¥éœ€è¦å˜æ›´æ­¤ä¸Šé™å¯ä»¥é€šè¿‡å¯åŠ¨é…ç½®é¡¹ -Dcsp.sentinel.statistic.max.rt&#x3D;xxx æ¥é…ç½®ã€‚ å¼‚å¸¸æ¯”ä¾‹ å½“èµ„æºçš„ç»Ÿè®¡æ—¶é—´å†…è¯·æ±‚é‡ &gt;&#x3D; æœ€å°è¯·æ±‚æ•°ï¼Œå¹¶ä¸”æœŸé—´å¼‚å¸¸æ€»æ•°å é€šè¿‡é‡çš„æ¯”ä¾‹è¶…è¿‡é˜ˆå€¼ä¹‹åï¼Œèµ„æºè¿›å…¥é™çº§çŠ¶æ€çŸ¥é“ç†”æ–­æ—¶é•¿èµ°å®Œ å¼‚å¸¸æ•° å½“èµ„æºçš„ç»Ÿè®¡æ—¶é—´å†…è¯·æ±‚é‡ &gt;&#x3D; æœ€å°è¯·æ±‚æ•°ï¼Œå¹¶ä¸”æœŸé—´å¼‚å¸¸æ€»æ•°è¶…è¿‡é˜ˆå€¼æ•°é‡ï¼Œèµ„æºè¿›å…¥é™çº§çŠ¶æ€çŸ¥é“ç†”æ–­æ—¶é•¿èµ°å®Œã€‚ å®é™…æµ‹è¯•jmeterçº¿ç¨‹10å¾ªç¯1æ¬¡ï¼Œ10æ¬¡éƒ½æ²¡æœ‰è¿›è¡Œç†”æ–­ã€‚ä½†åœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨éƒ½å·²ç»æ˜¯å±äºç†”æ–­çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´å¹¶å‘10çš„æƒ…å†µä¸‹å®ƒæ²¡æœ‰åœ¨å‰5ä¸ªå·²ç»å¼‚å¸¸çš„æƒ…å†µä¸‹è¿›è¡Œç†”æ–­ï¼Œè€Œæ˜¯éƒ½é€šè¿‡äº†ä¹‹åæ‰ç†”æ–­ã€‚å¯èƒ½æ˜¯è§¦å‘ç†”æ–­ä½†å®é™…ç†”æ–­æœ‰å»¶è¿Ÿï¼Œä½†æœ€ç»ˆç¡®å®ç†”æ–­äº†ã€‚ åœ¨è¿™ä¸ªæ¨è®ºçš„æƒ…å†µä¸‹ï¼Œé™ä½å¹¶å‘å°±å°†çº¿ç¨‹è®¾ç½®ä¸º4è¿›è¡Œæµ‹è¯•ï¼Œæ‰‹åŠ¨æ‰§è¡Œä¸¤æ¬¡ã€‚åœ¨ç¬¬äº”æ¬¡ä¼šè¿›è¡Œç†”æ–­ã€‚å¦‚æœæŠŠç¬¬5æ¬¡æˆ–è€…è¿˜æœ‰6æ¬¡7æ¬¡éƒ½æ”¾åˆ°ä¸€ä¸ªçº¿ç¨‹ç»„ç›´æ¥æµ‹è¯•ï¼Œé‚£ä¹ˆå°±ä¼šéƒ½é€šè¿‡äº§ç”Ÿå¼‚å¸¸æ²¡æœ‰ç†”æ–­ï¼Œä¹Ÿè®¸ç¡®å®æ˜¯åœ¨ç¬¬5æ¡æ—¶å°±ç†”æ–­äº†ä½†åé¢çš„7ã€8ã€9ç­‰éƒ½åœ¨ç†”æ–­ä¹‹å‰å°±é€šè¿‡äº†ï¼Œä»¥è‡³äºåªæœ‰åé¢å†æ¬¡æ‰‹åŠ¨è°ƒç”¨çš„æ‰æ˜¯åœ¨ç†”æ–­ä¹‹åçš„çŠ¶æ€å½“ä¸­ã€‚ 5.3.7 SCA å°ç»“SCAå®é™…ä¸Šå‘å±•äº†ä¸‰æ¡çº¿ ç¬¬ä¸€æ¡çº¿ï¼šå¼€æºå‡ºæ¥ä¸€äº›ç»„ä»¶ ç¬¬äºŒæ¡çº¿ï¼šé˜¿é‡Œå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œè‡ªå·±ä¸šåŠ¡çº¿ä½¿ç”¨ ç¬¬ä¸‰æ¡çº¿ï¼šé˜¿é‡Œäº‘å¹³å°éƒ¨ç½²ä¸€å¥—ï¼Œä»˜è´¹ä½¿ç”¨ ä»æˆ˜ç•¥ä¸Šæ¥è¯´ï¼ŒSCAæ›´æ˜¯ä¸ºäº†è´´åˆé˜¿é‡Œäº‘ã€‚ç›®å‰æ¥çœ‹ï¼Œå¼€æºå‡ºæ¥çš„è¿™äº›ç»„ä»¶ï¼Œæ¨å¹¿åŠæ™®åŠç‡ä¸é«˜ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¸é«˜ï¼Œç¨³å®šæ€§å’Œä½“éªŒåº¦ä¸Šä»éœ€è¿›ä¸€æ­¥æå‡ã€‚","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°å­¦ï¼š204.è®¡æ•°è´¨æ•°","slug":"è®¡æ•°è´¨æ•°","date":"2021-07-06T13:07:07.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/07/06/è®¡æ•°è´¨æ•°/","link":"","permalink":"http://yournotes.cn/2021/07/06/%E8%AE%A1%E6%95%B0%E8%B4%A8%E6%95%B0/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/count-primes/ ç»Ÿè®¡æ‰€æœ‰å°äºéè´Ÿæ•´æ•° n çš„è´¨æ•°çš„æ•°é‡ã€‚ ç¤ºä¾‹1ï¼š 123è¾“å…¥ï¼šn = 10è¾“å‡ºï¼š4è§£é‡Šï¼šå°äº 10 çš„è´¨æ•°ä¸€å…±æœ‰ 4 ä¸ª, å®ƒä»¬æ˜¯ 2, 3, 5, 7 ã€‚ ç¤ºä¾‹2ï¼š 12è¾“å…¥ï¼šn = 0è¾“å‡ºï¼š0 ç¤ºä¾‹3ï¼š 12è¾“å…¥ï¼šn = 1è¾“å‡ºï¼š0 è§£æ³•ä¸€ï¼šæš´åŠ›æšä¸¾ä¾é¢˜æ„éœ€è¦ç»Ÿè®¡0è‡³nå½“ä¸­è´¨æ•°çš„ä¸ªæ•°ï¼Œè‡ªç„¶çš„å°±æƒ³çš„åˆ°å»éå†0è‡³nçš„æ¯ä¸ªæ•°å­—ï¼Œå†åˆ¤æ®µæ¯ä¸ªæ•°å­—æ˜¯å¦æ˜¯è´¨æ•°ï¼Œå¦‚æœæ˜¯è®¡æ•°åŠ ä¸€å¦‚æœä¸æ˜¯åˆ™ä¸å˜ï¼Œæœ€ç»ˆè¿”å›è®¡æ•°ç»“æœã€‚ å¯¹äºåˆ¤æ–­æ˜¯å¦æ˜¯è´¨æ•°ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ˜¯æœ‰ä¸”åªèƒ½è¢«è‡ªå·±ä¸1æ•´é™¤çš„æ•°æ˜¯è´¨æ•°ï¼ˆ1ä¸ç®—ï¼‰ï¼Œé‚£ä¹ˆåˆ¤æ–­7æ˜¯ä¸æ˜¯è´¨æ•°éœ€è¦åˆ¤æ–­å®ƒèƒ½å¦è¢«2è‡³6é‡Œé¢çš„æ•°æ•´é™¤ä¹ˆï¼Œå…¶å®ä¸éœ€è¦å› ä¸ºä¸€ä¸ªæ•°ä¸å¯èƒ½æ•´é™¤å¤§äºè‡ªå·±ä¸€åŠçš„æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´åˆ¤æ–­æ•°å­—numberæ˜¯å¦ä¸ºè´¨æ•°çœ‹çœ‹2åˆ°number&#x2F;2ä¹‹é—´çš„æ•´æ•°èƒ½ä¸èƒ½è¿›è¡Œæ•´é™¤å³å¯ äº†è§£ä¹‹åæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦æ˜¯è´¨æ•°çš„judgeæ–¹æ³•ï¼š 1234567public boolean judge(int number)&#123; // éå†2åˆ°number/2ä¹‹é—´çš„æ•°å­—,çœ‹æ˜¯å¦èƒ½è¢«numberæ•´é™¤ for(int i = 2; i&lt;=number/2; i++)&#123; if(number%i==0) return false; &#125; return true;&#125; æœ‰äº†judgeæ–¹æ³•ä¹‹åï¼Œå†é…åˆéå†è®¡æ•°ï¼Œå¾—åˆ°ç»“æœï¼š 123456789public int countPrimes(int n) &#123; // è®¡æ•°å™¨åˆå§‹åŒ–0 int result = 0; for (int i = 2; i &lt; n; i++)&#123; // å¦‚æœjudgeåˆ¤æ–­æ˜¯è´¨æ•°åˆ™è®¡æ•°å™¨åŠ ä¸€,å¦åˆ™ä¸å˜ result = judge(i) ? ++result : result; &#125; return result;&#125; **ç©ºé—´ï¼š**ä¸€ä¸ªè®¡æ•°å™¨å˜é‡ï¼Œå› æ­¤å¤æ‚åº¦O(1)ï¼Œ **æ—¶é—´ï¼š**éœ€è¦éå†0-nçš„æ¯ä¸ªæ•°ï¼Œè€Œæ¯ä¸ªæ•°è¿›è¡Œåˆ¤æ–­æ˜¯ä¸æ˜¯è´¨æ•°åˆéœ€è¦éå†0-i&#x2F;2,å¤æ‚åº¦æ˜¯O(n^2) æäº¤ç»“æœï¼š å¯ä»¥çœ‹çš„åˆ°å¤§éƒ¨åˆ†æµ‹è¯•ç”¨ä¾‹é€šè¿‡ï¼Œè¯æ˜æ±‚è§£ç»“æœæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†åœ¨é¢å¯¹499979è¿™æ ·çš„å¤§æ•°å­—è®¡ç®—æ¬¡æ•°è¿‡å¤šå¯¼è‡´è¶…æ—¶ï¼Œå› æ­¤è¿˜éœ€çœ‹çœ‹æ€ä¹ˆä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚ å…¶å®å¯ä»¥å‘ç°åˆ¤å®šä¸€ä¸ªæ•°numberæ˜¯å¦å¯ä»¥è¢«2åˆ°number-1çš„é‡Œé¢çš„æ•°æ•´é™¤ï¼Œæˆ‘ä¸‹æ„è¯†æƒ³çš„æ˜¯å¯ä»¥å‡å°‘ä¸€åŠçš„è§„æ¨¡åªç”¨åˆ¤æ–­2åˆ°number&#x2F;2å³å¯ã€‚ ä½†å…¶å®å¯ä»¥æ›´ç¼©å°è§„æ¨¡ 1212 = 2 * 612 = 3 * 4 æ¯”å¦‚åƒè¿™ä¸ª12ï¼Œæ²¡å¿…è¦é™¤åˆ°6ï¼Œ6ä¸2æ˜¯é‡å¤çš„ã€‚ä¸€ä¸ªæ•°é™¤ä»¥ä¸€ä¸ªæ•°å¾—åˆ°ä¸€ä¸ªæ•´æ•°number&#x2F;x &#x3D; yï¼Œé‚£ä¹ˆå®ƒçš„ä¸¤ä¸ªå› æ•°x * yæ˜¯ä¸€å¤§ä¸€å°ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå°çš„ä¸€è¾¹éƒ½é™¤ä»¥ä¸€ä¸‹åˆ¤æ–­æ˜¯å¦å¯ä»¥æ•´é™¤å³å¯ã€‚ä¹Ÿå°±æ˜¯å¼€æ ¹å·ã€‚$$\\sqrt{number}$$åƒåˆ¤æ–­23æ˜¯å¦æ˜¯è´¨æ•°ï¼Œåˆ¤æ–­2åˆ°4.79â€¦.$$\\sqrt{23}$$ä¹Ÿå°±æ˜¯åªéœ€è¦åˆ¤æ–­å¯¹2ã€3ã€4æ˜¯å¦èƒ½æ•´é™¤å³å¯ï¼Œè€Œä¸æ˜¯åƒä¹‹å‰è¦ä»2åˆ°11ã€‚ 123456789public Boolean judge(int number)&#123; // è¾¹ç•Œæ¡ä»¶0å’Œ1ç›´æ¥è¿”å› if(number == 0 || number == 1) return false; // éå†2åˆ°æ ¹å·numberä¹‹é—´çš„æ•°å­—,çœ‹æ˜¯å¦èƒ½è¢«numberæ•´é™¤ for (int i = 2; i*i&lt;=number; i++)&#123; if(number%i==0) return false; &#125; return true;&#125; ä¿®æ”¹i &lt;= number/2 ä¸º i * i &lt;=number,æ—¶é—´å¤æ‚åº¦é™ä½ä¸€ä¸ªæ ¹å·ï¼šOï¼ˆnlognï¼‰,ç»“æœä¾ç„¶è¿˜æ˜¯ä¸å¤Ÿï¼Œä»ç„¶ä¼šè¶…æ—¶ã€‚ è§£æ³•äºŒï¼šå„æ‹‰å¤šå¡ç­›æ³•è§£æ³•ä¸€çš„æ—¶å€™æˆ‘ä»¬æ˜¯é€šè¿‡ä¸¤ä¸ªéå†æ±‚è§£é—®é¢˜ï¼šä¸€æ˜¯éå†æ¯ä¸ªæ•°å­—æ‹¿å»è¿›è¡Œåˆ¤æ–­ï¼ŒäºŒæ˜¯å½“å‰æ•°å­—åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯è´¨æ•°çš„è¿‡ç¨‹éœ€è¦éå†æ•°å­—èŒƒå›´å†…çš„æ•°è¿›è¡Œé™¤è¿ç®—ï¼Œæ—¶é—´å¤æ‚åº¦å¾ˆé«˜ï¼Œå¥½åœ¨åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯è´¨æ•°æ—¶æˆ‘ä»¬ä»2åˆ°number-1çš„æ•°å­—é‡Œé¢ç¼©å°äº†ä¸€åŠï¼ˆå¹³æ–¹ï¼‰çš„èŒƒå›´ã€‚ å°½ç®¡å¦‚æ­¤ä½†ä»ç„¶ä¸å¤Ÿï¼Œåˆ¤æ–­è´¨æ•°çš„è¿‡ç¨‹å·²ç»æ˜¯æœ€ä¼˜åŒ–äº†ã€‚é‚£ä¹ˆèƒ½ä¼˜åŒ–çš„åªèƒ½æ˜¯ç¬¬ä¸€ä¸ªæ­¥éª¤ä¹Ÿå°±æ˜¯éå†æ¯ä¸ªæ•°å­—æ‹¿å»åˆ¤æ–­ã€‚ æ˜¯å¦å¯ä»¥ä¸éœ€è¦æ¯ä¸ªéƒ½éå†å»åˆ¤æ–­ï¼Ÿ åœ¨è¿ç»­çš„æ•°å­—é‡Œé¢è´¨æ•°å‡ºç°æ˜¯å¦æœ‰è§„å¾‹ï¼Ÿ æ˜¯å¦è¿™ä¸ªæ•°æ˜¯è´¨æ•°çš„è¯é‚£ä¹ˆè°è°è°éƒ½æ˜¯è´¨æ•°ï¼Ÿä¹Ÿå°±ä¸éœ€è¦éƒ½æ‹¿å»åˆ¤æ–­äº†ã€‚ å½“æ—¶åœ¨çº¸ä¸Šç”»äº†ä¸€äº›ï¼Œæ²¡å¤ªæ‰¾åˆ°ä»€ä¹ˆè§„å¾‹å¯ä»¥å¸®åŠ©æˆ‘è§£å†³è¿™ä¸ªï¼Œåœ¨ç½‘ä¸Šçœ‹äº†è¿™ä¸ªå„æ‹‰å¤šå¡ç­›æ³•åŠ ä¸Šæ•°ç»„è¿›è¡Œåº”ç”¨ç¡®å®å¾ˆå¦™ã€‚ å°±æ˜¯è¯´ä¸€ä¸ªè´¨æ•°çš„å€æ•°å®ƒä¸€å®šä¸æ˜¯è´¨æ•°ï¼Œæ¯”å¦‚xæ˜¯è´¨æ•°ä½†2xã€3xã€4xè¿™äº›è‚¯å®šä¸æ˜¯è´¨æ•°ï¼Œ2xèµ·ç å¯ä»¥æ•´é™¤2ã€3xèµ·ç å¯ä»¥æ•´é™¤3ã€‚ ä½†ç¡®å®æ²¡æƒ³åˆ°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸»è¦çš„ç‚¹æ˜¯å½“æˆ‘ä»¬ä»è´¨æ•°2å¼€å§‹ä¸€ä¸ªä¸€ä¸ªéå†çš„æ—¶å€™ï¼Œéå†çš„é€Ÿåº¦ä¸ä¼šè¶…è¿‡æ’é™¤çš„é€Ÿåº¦ï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºéå†åˆ°çš„å½“å‰æ•°å­—æ²¡æœ‰è¢«æ’é™¤çš„è¯å°±æ˜¯è´¨æ•°ã€‚ä¸‹é¢æ‰‹åŠ¨æšä¸¾å‡ ä¸ªå°±å¯ä»¥çœ‹å‡ºï¼š 123456789101112132 3 4 5 6 7 8 9æ¯”å¦‚ç°åœ¨æ‰¾2-9çš„è´¨æ•°ï¼šä»è´¨æ•°2å¼€å§‹ï¼Œè´¨æ•°è®¡æ•°åŠ ä¸€ï¼Œå¹¶æ’é™¤4ã€6ã€8ä¸æ˜¯è´¨æ•°ã€‚éå†åˆ°3è´¨æ•°ï¼Œè´¨æ•°è®¡æ•°åŠ ä¸€ï¼Œå¹¶æ’é™¤6ã€9ä¸æ˜¯è´¨æ•°ã€‚éå†åˆ°4ï¼Œå‘ç°å·²è¢«æ’é™¤éå†åˆ°5è´¨æ•°ï¼Œè´¨æ•°è®¡æ•°åŠ ä¸€éå†åˆ°6ï¼Œå‘ç°å·²è¢«æ’é™¤éå†åˆ°7è´¨æ•°ï¼Œè´¨æ•°è®¡æ•°åŠ ä¸€éå†åˆ°8ï¼Œå‘ç°å·²è¢«æ’é™¤éå†åˆ°9ï¼Œå‘ç°å·²è¢«æ’é™¤æœ€ç»ˆè´¨æ•°è®¡æ•°ç»“æœæ˜¯4 è¿˜èƒ½çœ‹å‡ºæœ‰ä¸€ç‚¹æ˜¯éœ€è¦ä¼˜åŒ–çš„ï¼Œæ¯ä¸ªæ•°ä»å®ƒçš„ä¸¤å€å¼€å§‹æ’é™¤ï¼š2å€ã€3å€ã€4å€ç­‰ç­‰ã€‚å¯ä»¥å‘ç°2æ’é™¤çš„æ•°ï¼Œ3ä¹Ÿæ’é™¤äº†ã€‚ä¹Ÿå°±æ˜¯æœ‰äº›æ•°åœ¨å‰é¢å·²ç»æ’é™¤äº†ï¼Œè¿™è¾¹åœ¨åšæ’é™¤çš„æ—¶å€™ä¸åº”è¯¥å†å»åšå¤šä½™çš„æ­¥éª¤ï¼Œè¿™å°±æ˜¯ä¼˜åŒ–çš„ç‚¹ã€‚æƒ³æƒ³å¯ä»¥çŸ¥é“ï¼Œ3ä»2å€æ•°èµ°èµ·ã€‚è‚¯å®šåœ¨ä¹‹å‰å°±è¢«2çš„3å€èµ°äº†ã€‚è¦ä¸é‡å¤åªèƒ½ä»æ¯”è‡ªå·±å¤§çš„å€æ•°èµ°èµ·ï¼Œå‰é¢çš„æ—©å°±è¢«å…¶ä»–å°çš„æ•°å­—å·²ç»æ’é™¤äº†ã€‚æ‰€ä»¥å°±åƒè´¨æ•°5å†å»æ’é™¤ä¸åº”è¯¥å»æ’é™¤2â…¹5å’Œ3â…¹5ï¼Œå› ä¸ºå®ƒä»¬æ—©å°±è¢«ä¹‹å‰çš„æ•°æ’é™¤äº†ã€‚æˆ‘ä»¬æ’é™¤åº”è¯¥ä»è‡ªå·±çš„å¹³æ–¹å¼€å§‹ã€‚ è¿™é‡Œè¿˜æ˜¯ç”»ä¸ªåŠ¨å›¾ï¼š å®ç°ä¸Šå…¶å®å°±æ˜¯ä¸¤ä¸ªå¾ªç¯ï¼Œä¸€ä¸ªæ˜¯éå†æ¯ä¸ªæ•°å­—ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹æ¯ä¸ªæ•°å­—è¿›è¡ŒåŠ ä¸€å€æŠŠå¾—åˆ°çš„æ•°å­—æ’é™¤ã€‚æ•°æ®ç»“æ„ä¸Šä½¿ç”¨å­—èŠ‚æ•°ç»„è¿›è¡Œæ ‡è®°ï¼Œæ˜¯è´¨æ•°æ ‡0ï¼Œè¢«æ’é™¤å°±æ”¹ä¸º1 123456789101112131415161718192021public int countPrimes(int n) &#123; // è®¡æ•°å™¨åˆå§‹åŒ–0 int result = 0; /** * å®šä¹‰æ•°ç»„,æ ‡è®°æ•°å­—æ˜¯å¦è¢«æ’é™¤ * å°äºnçš„æ•°å­—å†æ’é™¤0å’Œ1,å…±æœ‰n-1ä¸ªéœ€è¦åˆ¤æ–­ * åˆå§‹åŒ–æ•°ç»„é»˜è®¤éƒ½æ˜¯0,ç­‰å¾…ä»2å¼€å§‹çš„ä¸€æ¬¡æ¬¡æ ‡è®° */ int[] arr = new int[n]; // éå†æ¯ä¸ªæ•° for (int i = 2; i &lt; n; i++)&#123; // æ˜¯è´¨æ•°ï¼Œè¿›è¡Œå€æ•°æ’é™¤ï¼Œä»å¹³æ–¹å¼€å§‹ if(arr[i] == 0)&#123; result++; for(int j = i * i; j &lt; n; j+=i)&#123; arr[j] = 1; &#125; &#125; &#125; return result;&#125; è¿™æ ·å°±okï¼Œæµ‹è¯•ä¸€ä¸‹å‘ç°å±…ç„¶åœ¨n&#x3D;499979çš„æ—¶å€™å‡ºç°æ•°ç»„è¶Šç•Œï¼š çœ‹ç¨‹åºæ²¡çœ‹å‡ºé—®é¢˜ï¼Œæ¯•ç«Ÿ j &lt; næ‰èƒ½å– arr[ j ]ï¼Œåæ¥æ³¨æ„åˆ°è¶Šç•Œçš„ç´¢å¼•æ˜¯ -2146737495 ã€‚æ˜¯ä¸¤ä¸ªintçš„ä¹˜ç§¯è¶…è¿‡äº†intä¹Ÿå°±æ˜¯jç±»å‹çš„èŒƒå›´ï¼Œjæ‹¿åˆ°ä¸€ä¸ªè´Ÿå€¼è¿›å…¥å¾ªç¯ã€‚æ‰€ä»¥åœ¨å¾—åˆ° j çš„æ—¶å€™ç»™å®ƒå‡ä¸‹çº§ç»™ä¸ªlongç±»å‹ï¼Œç¡®è®¤å°äºnä¹‹åï¼Œå–å€¼æ—¶å†å¼ºè½¬ä¸ºint è¿™è¾¹é¡ºä¾¿åšä¸€ä¸ªç©ºé—´ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„åªå­˜ 0æˆ–1ï¼Œæ‰€ä»¥ç”¨ç©ºé—´å°çš„byteæ•°ç»„æ¥å­˜ ä»£ç å¦‚ä¸‹ï¼š 12345678910111213public int countPrimes(int n) &#123; int result = 0; byte[] arr = new byte[n]; for (int i = 2; i &lt; n; i++)&#123; if(arr[i] == 0)&#123; result++; for(long j = (long)i * i; j &lt; n; j+=i)&#123; arr[(int)j] = 1; &#125; &#125; &#125; return result;&#125; è™½ç„¶æ˜¯ä¸¤æ¬¡å¾ªç¯ï¼Œä½†å®é™…åœ¨å†…å¾ªç¯å¤„ç†çš„æ•°åœ¨å¤–å¾ªç¯å°±æ²¡æœ‰äº†ï¼Œå¯¹äºæ—¶é—´å¤æ‚åº¦æ¥åº”è¯¥æ˜¯ä¸ªå¤šå°‘å€çš„n å¯¹äºç©ºé—´æ¥è¯´ä½¿ç”¨äº†å­—èŠ‚æ•°ç»„ï¼Œå ç”¨nä¸ªå­—èŠ‚ã€‚å¤æ‚åº¦O(n) æµ‹è¯•ç»“æœ è§£æ³•ä¸‰ï¼šçº¿æ€§ç­›é€‰æ³•åœ¨å¤„ç†å‰é¢çš„åŸƒæ°ç­›é€‰æ³•ä¹Ÿå°±æ˜¯å„æ‹‰å¤šçš„æ—¶å€™ï¼Œå…¶å®å°±æœ‰ç–‘é—®ï¼Ÿæˆ‘ä»¬é€šè¿‡ç­›é€‰è´¨æ•°çš„å¹³æ–¹ä¹‹åçš„å€æ•°å¾—åˆ°çš„åˆæ•°æ¥é¿å…å‰é¢çš„é‡å¤å‰”é™¤ 123456æ’é™¤è´¨æ•°xæ„æˆçš„åˆæ•°x * xx * ( x + 1 )x * ( x + 2 )x * ( x + 3 ).... è™½ç„¶å®ƒæ˜¯é¿å…äº†åƒ2æ’é™¤6ï¼Œ3ä¹Ÿæ’é™¤6çš„æƒ…å†µã€‚å› ä¸º3ç›´æ¥ä»9ï¼Œ12ï¼Œ15å¼€å§‹æ’é™¤ã€‚ä½†12ä»ç„¶æ˜¯æ—¢è¢«2æ’é™¤ä¹Ÿè¢«3æ’é™¤ã€‚ è§£å†³äº†å¹³æ–¹æ•°ä¹‹å‰æ•°å­—çš„å‰”é™¤é‡å¤ï¼Œä½†ä¹‹åçš„æ•°å­—è¿˜æ˜¯ä¼šæœ‰å†²çªä¼šæœ‰é‡å¤å‰”é™¤ã€‚ ç°åœ¨å°±æƒ³è®©æ¯ä¸ªåˆæ•°è¢«è‡ªå·±çš„å¾ˆå¤šå¯¹å› æ•°å½“ä¸­å…¶ä¸­æœ€å°çš„å› æ•°ç»™æ’é™¤æ‰ï¼Œåˆ«å†è¢«å…¶ä»–å› æ•°æ’é™¤ åˆæ•° å› æ•° 4 2 6 2ã€3 8 2ã€4 9 3 10 2ã€5 12 2ã€3ã€4ã€6 é‡‡ç”¨çº¿æ€§ç­›é€‰å°†æ¯ä¸ªæ•°éƒ½å‚ä¸æ’é™¤ï¼Œæ¯æ¬¡æ’é™¤ç›®å‰æœ€è¿‘ä¸”å’Œæœªæ¥ä¸å†²çªã€‚å®ƒçš„è¦ç‚¹æ˜¯ä»»ä½•çš„åˆæ•°å®ƒçš„ä¸€ä¸ªæœ€å°å› æ•°ä¸€å®šæ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œå› æ­¤å°†è´¨æ•°å–å‡ºæ¥å¯¹æ¯ä¸ªæ•°è¿›è¡Œä¹˜ç§¯æ¥è¿›è¡Œæ’é™¤ã€‚é‚£ä¹ˆå¦‚ä½•é¿å…é‡å¤å‰”é™¤å‘¢ï¼Ÿ ä¸‹é¢åˆ—ä¸¾ä¸€äº›ï¼š 1234567892 æ’é™¤ 43 æ’é™¤ 6ã€94 æ’é™¤ 8 ï¼ˆ4ç”±2æ’é™¤,å› æ­¤å®ƒçš„3å€5å€éƒ½æ˜¯åº”è¯¥è¢«2è§£å†³ï¼‰5 æ’é™¤ 10ã€15ã€256 æ’é™¤ 12ï¼ˆ6å¯ä»¥è¢«2æ’é™¤,ä¸éœ€è¦è§£é™¤å…¶ä»–å€ï¼‰7 æ’é™¤ 14ã€21ã€35ã€498 æ’é™¤ 16ï¼ˆ8æ˜¯ç”±2å¯ä»¥æ’é™¤ï¼‰9 æ’é™¤ 18ã€27ï¼ˆ9æ˜¯è¢«3å¯æ’é™¤ï¼‰10 æ’é™¤ 20ï¼ˆ10æ˜¯è¢«2æ’é™¤çš„ï¼‰ å°±åƒ4æ’é™¤8ï¼Œä¸ºå•¥ä¸æ’é™¤12å‘¢ã€‚å› ä¸º4å®ƒæœ€å°å› æ•°æ˜¯2ã€‚å› æ­¤å®ƒçš„3å€æˆ–è€…5å€çš„æ•°å­—ä¹Ÿæœ‰å› æ•°2ï¼Œä¹Ÿå°±æ˜¯å®ƒåé¢ä¼šæœ‰ä¸€ä¸ªæ•°å­—çš„ä¸¤å€æ˜¯12ç”±è¿™ä¸ªæ•°å­—å»æ’é™¤ã€‚æ¯æ¬¡åªæ’é™¤æœ€è¿‘çš„ï¼Œæ˜¯å‰é¢æ•°å­—ç•™ä¸‹çš„ï¼Œåé¢çš„ç»™åé¢çš„æ•°å­—ç•™ä¸‹ã€‚åƒ9å®ƒæœ€å°å› æ•°æ˜¯3ï¼Œä»–åº”è¯¥æŠŠ2x9ä¸3x9æ’é™¤ã€‚ç”±2è¿™ä¸ªæœ€å°å› æ•°äº§ç”Ÿçš„18å®ƒçš„æœ€è¿‘çš„å°±æ˜¯9ï¼Œè€Œ2ä¸æ˜¯9çš„æœ€å°å› æ•°å®ƒçš„æœ€å°å› æ•°æ˜¯3ï¼Œæ„æˆ3æ’é™¤ä¸”ç¦»9æœ€è¿‘ä¹Ÿå°±æ˜¯3*9ï¼Œä¹‹åä¸ä¼šæœ‰æ•°å­—å¯ä»¥ç­›é€‰å‡ºå®ƒäº†ã€‚ æŠŠæœ€å°å› æ•°ç­›é€‰çš„æ•°å­—å¾€åä¼ é€’ï¼Œæ¯æ¬¡ç­›é€‰å‡ºæœ€è¿‘çš„ä¸€å±‚ï¼Œå³å¯å®Œæˆä¸é‡å¤ä¸”æ°¸è¿œèµ°åœ¨å‰é¢çš„ç­›é€‰ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314public int countPrimes(int n) &#123; // æ ‡è®°ç­›é€‰ byte[] arr = new byte[n]; // æœ€å°å› æ•°ï¼ˆè´¨æ•°ï¼‰ List&lt;Integer&gt; numbers = new ArrayList&lt;&gt;(); for (int i = 2; i &lt; n; i++)&#123; if(arr[i] == 0) numbers.add(i); for(int j = 0; j &lt; numbers.size() &amp;&amp; numbers.get(j) * i &lt; n; j++)&#123; arr[numbers.get(j) * i] = 1; if(i % numbers.get(j) == 0) break; &#125; &#125; return numbers.size();&#125; è¿™ç§æ–¹å¼çš„è¯ï¼Œæ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦å°±éƒ½æ˜¯O(n)äº† çœ‹èµ·æ¥å®é™…æ˜¯æ¯”åŸƒæ°ç­›é€‰æ³•å¥½åƒæ•ˆç‡ä½ä¸€äº›ï¼Œä½†è¿™ä¸ªä¸œè¥¿ä¸»è¦æ˜¯ä¸€äº›è¿ç®—ç¬¦çš„é—®é¢˜ã€‚ æ€»ç»“æœ¬é¢˜æ‰¾åˆ°ä¸€ä¸ªæ•°ä»¥å†…çš„è´¨æ•°çš„æ•°é‡ï¼Œè§£æ³•ä¸€å¤§æ¦‚å°±æ˜¯ç¬¬ä¸€ååº”ä¹Ÿå°±æ˜¯ä¾é¢˜æ„çš„è§£æ³•ï¼Œè™½ç„¶æ„è¯†åˆ°è¿™ä¸ªè§£æ³•æ˜¯èµ°äº†å¼¯è·¯ä½†æ²¡æœ‰ç¢ç£¨å‡ºç­›é€‰æ³•ï¼Œåœ¨ç½‘ä¸Šçœ‹äº†åŸƒæ°ç­›é€‰æ³•ç¡®å®æ˜¯å¯ä»¥ç”¨æ¥è§£é¢˜ï¼Œè™½ç„¶è¿™ä¸ªä¸œè¥¿åº”è¯¥æ˜¯æ¯ä¸ªäººéƒ½çŸ¥é“çš„é“ç†ï¼Œä½†æ²¡æœ‰æ„è¯†åˆ°æŠŠè¿™ä¸ªä¸œè¥¿è¿›è¡Œä¸¥æ ¼çš„æ¨ç†ã€‚åœ¨è¿™ä¹‹åä¹Ÿèƒ½æƒ³åˆ°çº¿æ€§ç­›é€‰ï¼Œè¿™ä¸¤ç§å°±å¥½ä¼¼çºµå‘ä¸æ¨ªå‘çš„æ¨æ¼”ã€‚é‚£ä¹ˆé™¤äº†å®ç°æ€è·¯ä¸Šï¼Œå¯¹äºä»£ç åœ¨ç©ºé—´ä¸æ—¶é—´ä¸Šçš„ä¼˜åŒ–ä¹Ÿæ˜¯åœ¨æœ€ç»ˆå®ç°æ€è·¯ä¹‹åçš„ä¼˜åŒ–ç‚¹ã€‚åƒç­›é€‰æ ‡è®°è¿™ç§åªéœ€è¦å»å­˜0&#x2F;1ä¹Ÿå°±æ˜¯åªå ä¸€ä½ï¼Œå¦‚æœæˆ‘ä»¬åªå­˜8ä¸ªç”¨intæ•°ç»„çš„è¯å°±å ç”¨äº†8x32ä½ã€‚Javaé‡Œé¢æ²¡æœ‰ä½æ•°ç»„ï¼Œæœ€å°çš„æ˜¯å­—èŠ‚å 8ä½ä¹Ÿå°±æ˜¯8x8ä½ã€‚æ²¡æœ‰ä½æ•°ç»„é‚£ä¹ˆèƒ½ä¸èƒ½8ä¸ª0&#x2F;1åªç”¨8ä½çš„ç©ºé—´å»å­˜å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨æ•°ç»„åªç”¨ä¸€ä¸ªå­—èŠ‚æ•°å­—byteå®ƒæœ‰8ä½æ¯ä¸€ä½å­˜ä¸€ä¸ª0æˆ–1ï¼Œè¿™æ˜¯å¯ä»¥è€ƒè™‘çš„ç‚¹ã€‚ç¬¬äºŒä¸ªæ˜¯æ—¶é—´ä¸Šå¯¹äºçº¿æ€§ç­›é€‰æ³•å¯¹æ¯”åŸƒæ°ç­›é€‰æ³•æ—¶é—´å¤æ‚åº¦æ˜¯æœ‰æå‡çš„åªæ˜¯è¯´åœ¨Javaé‡Œå®ç°è¿™ä¸ªçº¿æ€§ç­›é€‰çš„æ—¶å€™ä½¿ç”¨äº†ä¸€äº›åƒå–ä½™è¿™æ ·çš„è¿ç®—ç¬¦ç­‰ç­‰ä¼šå½±å“åˆ°æ‰§è¡Œæ•ˆç‡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åœ¨å¤„ç†ä¸€äº›è¿ç®—çš„æ—¶å€™å¯ä»¥å¾€ä½è¿ç®—ä¸Šæƒ³æƒ³ï¼Œæœ‰çš„å¯ä»¥æ¢æˆä½è¿ç®—æœ‰çš„ä¸å¯ä»¥ã€‚ä¸»è¦å°±æ˜¯ä¸‰ç‚¹ç¬¬ä¸€æ€è·¯ä¸Šåœ¨å¼€å‘çš„å­¦ä¹ ä¸å·¥ä½œå½“ä¸­å¯èƒ½å¾ˆå¤šæƒ³æ³•è¢«æŸç¼šäº†ï¼Œä¹Ÿè®¸æ¢æˆé«˜ä¸­æ—¶æœŸçš„çŠ¶æ€å¾ˆå¤šä¸œè¥¿éƒ½å¯ä»¥æ¨ç†å‡ºæ¥ï¼Œç¬¬äºŒå°±æ˜¯å…³äºç©ºé—´å¯¹äºæ ‡è®°ç±»å‹çš„éœ€è¦è€ƒè™‘åˆ°ä½ï¼Œç¬¬ä¸‰å°±æ˜¯è¿ç®—å¯ä¸å¯ä»¥é€šè¿‡ä½è¿ç®—è¾¾åˆ°åŒæ ·çš„ç»“æœæ¥æå‡å®é™…æ•ˆç‡ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"SpringBootè¯¦è§£","slug":"SpringBoot","date":"2021-06-29T06:13:51.000Z","updated":"2025-04-17T08:34:52.018Z","comments":true,"path":"2021/06/29/SpringBoot/","link":"","permalink":"http://yournotes.cn/2021/06/29/SpringBoot/","excerpt":"","text":"è¶…é•¿è­¦å‘Šï¼ï¼ï¼å–„ç”¨ç›®å½•ï¼ï¼ï¼ ä¸€ã€SpringBootåŸºæœ¬åº”ç”¨1.1 çº¦å®šä¼˜äºé…ç½® Build Anything with Spring Bootï¼šSpring Boot is the starting point for building all Spring-based applications. Spring Boot is designed to get you up and running as quickly as possible, with minimal upfront configuration of Spring. â€‹ ä¸Šé¢æ˜¯å¼•è‡ªå®˜ç½‘çš„ä¸€æ®µè¯ï¼Œå¤§æ¦‚æ˜¯è¯´ï¼š Spring Boot æ˜¯æ‰€æœ‰åŸºäº Spring å¼€å‘çš„é¡¹ç›®çš„èµ·ç‚¹ã€‚SpringBoot çš„è®¾è®¡æ˜¯ä¸ºäº†è®©ä½ å°½å¯èƒ½å¿«çš„è·‘èµ·æ¥ Spring åº”ç”¨ç¨‹åºå¹¶ä¸”å°½å¯èƒ½å‡å°‘ä½ çš„é…ç½®æ–‡ä»¶ã€‚ çº¦å®šä¼˜äºé…ç½®ï¼ˆConvention over Configurationï¼‰ï¼Œåˆç§°æŒ‰çº¦å®šç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡èŒƒå¼ã€‚ æœ¬è´¨ä¸Šæ˜¯è¯´ï¼Œç³»ç»Ÿã€ç±»åº“æˆ–æ¡†æ¶åº”è¯¥å‡å®šåˆç†çš„é»˜è®¤å€¼ï¼Œè€Œéè¦æ±‚æä¾›ä¸å¿…è¦çš„é…ç½®ã€‚æ¯”å¦‚è¯´æ¨¡å‹ä¸­æœ‰ä¸€ä¸ªåä¸ºUserçš„ç±»ï¼Œé‚£ä¹ˆæ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨å°±ä¼šé»˜è®¤å‘½åä¸ºuserã€‚åªæœ‰åœ¨åç¦»è¿™ä¸€ä¸ªçº¦å®šçš„æ—¶å€™ï¼Œä¾‹å¦‚æƒ³è¦å°†è¯¥è¡¨å‘½åä¸ºpersonï¼Œæ‰éœ€è¦å†™æœ‰å…³è¿™ä¸ªåå­—çš„é…ç½®ã€‚ æ¯”å¦‚å¹³æ—¶æ¶æ„å¸ˆæ­å»ºé¡¹ç›®å°±æ˜¯é™åˆ¶è½¯ä»¶å¼€å‘éšä¾¿å†™ä»£ç ï¼Œåˆ¶å®šå‡ºä¸€å¥—è§„èŒƒï¼Œè®©å¼€å‘äººå‘˜æŒ‰ç»Ÿä¸€çš„è¦æ±‚è¿›è¡Œå¼€å‘ç¼–ç æµ‹è¯•ä¹‹ç±»çš„ï¼Œè¿™æ ·å°±åŠ å¼ºäº†å¼€å‘æ•ˆç‡ä¸å®¡æŸ¥ä»£ç æ•ˆç‡ã€‚æ‰€ä»¥è¯´å†™ä»£ç çš„æ—¶å€™å°±éœ€è¦æŒ‰è¦æ±‚å‘½åï¼Œè¿™æ ·ç»Ÿä¸€è§„èŒƒçš„ä»£ç å°±æœ‰è‰¯å¥½çš„å¯è¯»æ€§ä¸ç»´æŠ¤æ€§äº† çº¦å®šä¼˜äºé…ç½®ç®€å•æ¥ç†è§£ï¼Œå°±æ˜¯éµå¾ªçº¦å®š 1.2 SpringBootæ¦‚å¿µ1.2.1 Springä¼˜ç¼ºç‚¹åˆ†æä¼˜ç‚¹ï¼š Springæ˜¯Javaä¼ä¸šç‰ˆï¼ˆJava Enterprise Editionï¼ŒJEEï¼Œä¹Ÿç§°J2EEï¼‰çš„è½»é‡çº§ä»£æ›¿å“ã€‚æ— éœ€å¼€å‘é‡é‡çº§çš„Enterprise Java Beanï¼ˆEJBï¼‰ï¼ŒSpringä¸ºä¼ä¸šçº§Javaå¼€å‘æä¾›äº†ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç”¨ç®€å•çš„Javaå¯¹è±¡ï¼ˆPlain Old Java Objectï¼ŒPOJOï¼‰å®ç°äº†EJBçš„åŠŸèƒ½ ç¼ºç‚¹ï¼š è™½ç„¶Springçš„ç»„ä»¶ä»£ç æ˜¯è½»é‡çº§çš„ï¼Œä½†å®ƒçš„é…ç½®å´æ˜¯é‡é‡çº§çš„ã€‚ä¸€å¼€å§‹ï¼ŒSpringç”¨XMLé…ç½®ï¼Œè€Œä¸”æ˜¯å¾ˆå¤šXMLé… ç½®ã€‚Spring 2.5å¼•å…¥äº†åŸºäºæ³¨è§£çš„ç»„ä»¶æ‰«æï¼Œè¿™æ¶ˆé™¤äº†å¤§é‡é’ˆå¯¹åº”ç”¨ç¨‹åºè‡ªèº«ç»„ä»¶çš„æ˜¾å¼XMLé…ç½®ã€‚Spring 3.0å¼•å…¥ äº†åŸºäºJavaçš„é…ç½®ï¼Œè¿™æ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„å¯é‡æ„é…ç½®æ–¹å¼ï¼Œå¯ä»¥ä»£æ›¿XMLã€‚ æ‰€æœ‰è¿™äº›é…ç½®éƒ½ä»£è¡¨äº†å¼€å‘æ—¶çš„æŸè€—ã€‚å› ä¸ºåœ¨æ€è€ƒSpringç‰¹æ€§é…ç½®å’Œè§£å†³ä¸šåŠ¡é—®é¢˜ä¹‹é—´éœ€è¦è¿›è¡Œæ€ç»´åˆ‡æ¢ï¼Œæ‰€ä»¥ç¼–å†™é…ç½®æŒ¤å äº†ç¼–å†™åº”ç”¨ç¨‹åºé€»è¾‘çš„æ—¶é—´ã€‚å’Œæ‰€æœ‰æ¡†æ¶ä¸€æ ·ï¼ŒSpringå®ç”¨ï¼Œä½†ä¸æ­¤åŒæ—¶å®ƒè¦æ±‚çš„å›æŠ¥ä¹Ÿä¸å°‘ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œé¡¹ç›®çš„ä¾èµ–ç®¡ç†ä¹Ÿæ˜¯ä¸€ä»¶è€—æ—¶è€—åŠ›çš„äº‹æƒ…ã€‚åœ¨ç¯å¢ƒæ­å»ºæ—¶ï¼Œéœ€è¦åˆ†æè¦å¯¼å…¥å“ªäº›åº“çš„åæ ‡ï¼Œè€Œä¸”è¿˜éœ€è¦åˆ†æå¯¼å…¥ä¸ä¹‹æœ‰ä¾èµ–å…³ç³»çš„å…¶ä»–åº“çš„åæ ‡ï¼Œä¸€æ—¦é€‰é”™äº†ä¾èµ–çš„ç‰ˆæœ¬ï¼Œéšä¹‹è€Œæ¥çš„ä¸å…¼å®¹é—®é¢˜å°±ä¼šä¸¥é‡é˜»ç¢é¡¹ç›®çš„å¼€å‘è¿›åº¦ SSMæ•´åˆï¼šSpringã€Spring MVCã€Mybatisã€Spring-Mybatisæ•´åˆåŒ…ã€æ•°æ®åº“é©±åŠ¨ï¼Œå¼•å…¥ä¾èµ–çš„æ•°é‡ç¹å¤šã€å®¹æ˜“å­˜åœ¨ç‰ˆæœ¬å†²çªã€‚ 1.2.2 SpringBootè§£å†³ä¸Šè¿°é—®é¢˜SpringBootå¯¹ä¸Šè¿°Springçš„ç¼ºç‚¹è¿›è¡Œçš„æ”¹å–„å’Œä¼˜åŒ–ï¼ŒåŸºäºçº¦å®šä¼˜äºé…ç½®çš„æ€æƒ³ï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜ä¸å¿…åœ¨é…ç½®ä¸é€»è¾‘ ä¸šåŠ¡ä¹‹é—´è¿›è¡Œæ€ç»´çš„åˆ‡æ¢ï¼Œå…¨èº«å¿ƒçš„æŠ•å…¥åˆ°é€»è¾‘ä¸šåŠ¡çš„ä»£ç ç¼–å†™ä¸­ï¼Œä»è€Œå¤§å¤§æé«˜äº†å¼€å‘çš„æ•ˆç‡ï¼Œä¸€å®šç¨‹åº¦ä¸Šç¼©çŸ­ äº†é¡¹ç›®å‘¨æœŸã€‚ èµ·æ­¥ä¾èµ– èµ·æ­¥ä¾èµ–æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªMavené¡¹ç›®å¯¹è±¡æ¨¡å‹(Project Object Modelï¼ŒPOM)ï¼Œå®šä¹‰äº†å¯¹å…¶ä»–åº“çš„ä¼ é€’ä¾èµ–ï¼Œè¿™äº›ä¸œè¥¿åŠ åœ¨ä¸€èµ·å³æ”¯æŒæŸé¡¹åŠŸèƒ½ã€‚ ç®€å•çš„è¯´ï¼Œèµ·æ­¥ä¾èµ–å°±æ˜¯å°†å…·å¤‡æŸç§åŠŸèƒ½çš„ä¾èµ–åæ ‡æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œå¹¶æä¾›ä¸€äº›é»˜è®¤çš„åŠŸèƒ½ã€‚ è‡ªåŠ¨é…ç½® springbootçš„è‡ªåŠ¨é…ç½®ï¼ŒæŒ‡çš„æ˜¯springbootï¼Œä¼šè‡ªåŠ¨å°†ä¸€äº›é…ç½®ç±»çš„beanæ³¨å†Œè¿›iocå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥éœ€è¦çš„åœ°æ–¹ä½¿ç”¨@autowiredæˆ–è€…@resourceç­‰æ³¨è§£æ¥ä½¿ç”¨å®ƒã€‚ â€œè‡ªåŠ¨â€çš„è¡¨ç°å½¢å¼å°±æ˜¯æˆ‘ä»¬åªéœ€è¦å¼•æˆ‘ä»¬æƒ³ç”¨åŠŸèƒ½çš„åŒ…ï¼Œç›¸å…³çš„é…ç½®æˆ‘ä»¬å®Œå…¨ä¸ç”¨ç®¡ï¼Œspringbootä¼šè‡ªåŠ¨æ³¨å…¥è¿™äº›é…ç½®beanï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨è¿™äº›beanå³å¯ springboot: ç®€å•ã€å¿«é€Ÿã€æ–¹ä¾¿åœ°æ­å»ºé¡¹ç›®ï¼›å¯¹ä¸»æµå¼€å‘æ¡†æ¶çš„æ— é…ç½®é›†æˆï¼›æå¤§æé«˜äº†å¼€å‘ã€éƒ¨ç½²æ•ˆç‡ 1.3 Spring Bootå…¥é—¨æ¡ˆä¾‹æ¡ˆä¾‹éœ€æ±‚ï¼šè¯·æ±‚Controllerä¸­çš„æ–¹æ³•ï¼Œå¹¶å°†è¿”å›å€¼å“åº”åˆ°é¡µé¢ ï¼ˆ1ï¼‰ä¾èµ–ç®¡ç†12345678910111213141516171819202122232425262728&lt;!-- æ‰€ç”¨çš„springBooté¡¹ç›®éƒ½ä¼šç›´æ¥æˆ–è€…é—´æ¥çš„ç»§æ‰¿spring-boot-starter-parent 1.æŒ‡å®šé¡¹ç›®çš„ç¼–ç æ ¼å¼ä¸ºUTF-8 2.æŒ‡å®šJDKç‰ˆæœ¬ä¸º1.8 3.å¯¹é¡¹ç›®ä¾èµ–çš„ç‰ˆæœ¬è¿›è¡Œç®¡ç†ï¼Œå½“å‰é¡¹ç›®å†å¼•å…¥å…¶ä»–å¸¸ç”¨çš„ä¾èµ–æ—¶å°±éœ€è¦å†æŒ‡å®šç‰ˆæœ¬å·ï¼Œé¿å…ç‰ˆæœ¬ å†²çªçš„é—®é¢˜ 4.é»˜è®¤çš„èµ„æºè¿‡æ»¤å’Œæ’ä»¶ç®¡ç† --&gt;&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;&lt;/parent&gt;&lt;dependencies&gt; &lt;!--å¼•å…¥Spring WebåŠSpring MVCç›¸å…³çš„ä¾èµ–--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;!--å¯ä»¥å°†projectæ‰“åŒ…ä¸ºä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„jar--&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; ï¼ˆ2ï¼‰å¯åŠ¨ç±»123456789101112/** * SpringBootçš„å¯åŠ¨ç±»é€šå¸¸æ”¾åœ¨äºŒçº§åŒ…ä¸­ï¼Œæ¯”å¦‚ï¼šcom.lagou.SpringBootDemo1Application * å› ä¸ºSpringBooté¡¹ç›®åœ¨åšåŒ…æ‰«æï¼Œä¼šæ‰«æå¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚ *///æ ‡è¯†å½“å‰ç±»ä¸ºSpringBooté¡¹ç›®çš„å¯åŠ¨ç±» @SpringBootApplication public class SpringBootDemo1Application &#123; public static void main(String[] args) &#123; //æ ·æ¿ä»£ç  SpringApplication.run(SpringBootDemo1Application.class,args); &#125;&#125; ï¼ˆ3ï¼‰Controller1234567891011package com.lagou.controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestController @RequestMapping(&quot;/hello&quot;) public class HelloController &#123; @RequestMapping(&quot;/boot&quot;) public String helloBoot()&#123; return &quot;Hello Spring Boot&quot;; &#125;&#125; 1.4 SpringBootå¿«é€Ÿæ„å»ºæ¡ˆä¾‹éœ€æ±‚ï¼šè¯·æ±‚Controllerä¸­çš„æ–¹æ³•ï¼Œå¹¶å°†è¿”å›å€¼å“åº”åˆ°é¡µé¢ ï¼ˆ1ï¼‰ä½¿ç”¨Spring Initializræ–¹å¼æ„å»ºSpringBooté¡¹ç›®â€‹ æœ¬è´¨ä¸Šè¯´ï¼ŒSpring Initializræ˜¯ä¸€ä¸ªWebåº”ç”¨ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„é¡¹ç›®ç»“æ„ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ„å»ºä¸€ä¸ªåŸºç¡€çš„Spring Booté¡¹ç›® Project SDKâ€ç”¨äºè®¾ç½®åˆ›å»ºé¡¹ç›®ä½¿ç”¨çš„JDKç‰ˆæœ¬ï¼Œè¿™é‡Œï¼Œä½¿ç”¨ä¹‹å‰åˆå§‹åŒ–è®¾ç½®å¥½çš„JDKç‰ˆæœ¬å³å¯ï¼›åœ¨Choose Initializr Service URLï¼ˆé€‰æ‹©åˆå§‹åŒ–æœåŠ¡åœ°å€ï¼‰â€ä¸‹ä½¿ç”¨é»˜è®¤çš„åˆå§‹åŒ–æœåŠ¡åœ°å€https://start.spring.ioè¿›è¡ŒSpring Booté¡¹ç›®åˆ›å»ºï¼ˆæ³¨æ„ä½¿ç”¨å¿«é€Ÿæ–¹å¼åˆ›å»ºSpring Booté¡¹ç›®æ—¶ï¼Œæ‰€åœ¨ä¸»æœºé¡»åœ¨è”ç½‘çŠ¶æ€ä¸‹ï¼‰ Spring Booté¡¹ç›®å°±åˆ›å»ºå¥½äº†ã€‚åˆ›å»ºå¥½çš„Spring Booté¡¹ç›®ç»“æ„å¦‚å›¾ï¼š â€‹ ä½¿ç”¨Spring Initializræ–¹å¼æ„å»ºçš„Spring Booté¡¹ç›®ä¼šé»˜è®¤ç”Ÿæˆé¡¹ç›®å¯åŠ¨ç±»ã€å­˜æ”¾å‰ç«¯é™æ€èµ„æºå’Œé¡µé¢çš„æ–‡ä»¶å¤¹ã€ç¼–å†™é¡¹ç›®é…ç½®çš„é…ç½®æ–‡ä»¶ä»¥åŠè¿›è¡Œé¡¹ç›®å•å…ƒæµ‹è¯•çš„æµ‹è¯•ç±» ï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªç”¨äºWEBè®¿é—®çš„Controllerâ€‹ com.lagouåŒ…ä¸‹åˆ›å»ºåç§°ä¸ºcontrollerçš„åŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¤„ç†æ§åˆ¶ç±»HelloControllerï¼Œå¹¶ç¼–å†™ä¸€ä¸ªè¯·æ±‚å¤„ç†æ–¹æ³• (æ³¨æ„ï¼šå°†é¡¹ç›®å¯åŠ¨ç±»SpringBootDemoApplicationç§»åŠ¨åˆ°com.lagouåŒ…ä¸‹) 1234567@RestController // è¯¥æ³¨è§£ä¸ºç»„åˆæ³¨è§£ï¼Œç­‰åŒäºSpringä¸­@Controller+@ResponseBodyæ³¨è§£ public class DemoController &#123; @RequestMapping(&quot;/demo&quot;) public String demo()&#123; return &quot;hello spring Boot&quot;; &#125;&#125; ï¼ˆ3ï¼‰è¿è¡Œé¡¹ç›®è¿è¡Œä¸»ç¨‹åºå¯åŠ¨ç±»SpringbootDemoApplicationï¼Œé¡¹ç›®å¯åŠ¨æˆåŠŸåï¼Œåœ¨æ§åˆ¶å°ä¸Šä¼šå‘ç°SpringBooté¡¹ç›®é»˜è®¤å¯åŠ¨çš„ç«¯å£å·ä¸º8080ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè®¿é—®â€œhttp://localhost:8080/helloâ€ é¡µé¢è¾“å‡ºçš„å†…å®¹æ˜¯â€œhello Spring Bootâ€ï¼Œè‡³æ­¤ï¼Œæ„å»ºSpring Booté¡¹ç›®å°±å®Œæˆäº† 1.5 å•å…ƒæµ‹è¯•ä¸çƒ­éƒ¨ç½²1.5.1 å•å…ƒæµ‹è¯•å¼€å‘ä¸­ï¼Œæ¯å½“å®Œæˆä¸€ä¸ªåŠŸèƒ½æ¥å£æˆ–ä¸šåŠ¡æ–¹æ³•çš„ç¼–å†™åï¼Œé€šå¸¸éƒ½ä¼šå€ŸåŠ©å•å…ƒæµ‹è¯•éªŒè¯è¯¥åŠŸèƒ½æ˜¯å¦æ­£ç¡®ã€‚Spring Bootå¯¹é¡¹ç›®çš„å•å…ƒæµ‹è¯•æä¾›äº†å¾ˆå¥½çš„æ”¯æŒï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦æå‰åœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ spring-boot-starter-testæµ‹è¯•ä¾èµ–å¯åŠ¨å™¨ï¼Œå¯ä»¥é€šè¿‡ç›¸å…³æ³¨è§£å®ç°å•å…ƒæµ‹è¯• æ¼”ç¤ºï¼š æ·»åŠ spring-boot-starter-testæµ‹è¯•ä¾èµ–å¯åŠ¨å™¨ åœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ spring-boot-starter-testæµ‹è¯•ä¾èµ–å¯åŠ¨å™¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; æ³¨æ„ï¼šä½¿ç”¨Spring Initializræ–¹å¼æ­å»ºçš„Spring Booté¡¹ç›®ï¼Œä¼šè‡ªåŠ¨åŠ å…¥spring-boot-starter-testæµ‹è¯•ä¾èµ–å¯åŠ¨å™¨ï¼Œæ— éœ€å†æ‰‹åŠ¨æ·»åŠ  ç¼–å†™å•å…ƒæµ‹è¯•ç±»å’Œæµ‹è¯•æ–¹æ³• ä½¿ç”¨Spring Initializræ–¹å¼æ­å»ºçš„Spring Booté¡¹ç›®ï¼Œä¼šåœ¨src.test.javaæµ‹è¯•ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºä¸é¡¹ç›®ä¸»ç¨‹åºå¯åŠ¨ç±»å¯¹åº”çš„å•å…ƒæµ‹è¯•ç±» 12345678910111213141516171819202122232425262728package com.lagou;import com.lagou.controller.HelloController;import org.junit.jupiter.api.Test;import org.junit.runner.RunWith;import org.junit.runners.JUnit4;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import org.springframework.test.context.junit4.SpringRunner;/** * SpringJUnit4ClassRunner.class:Springè¿è¡Œç¯å¢ƒ * JUnit4.class:JUnitè¿è¡Œç¯å¢ƒ * SpringRunner.class:Spring Bootè¿è¡Œç¯å¢ƒ */@RunWith(SpringRunner.class) //@RunWith:è¿è¡Œå™¨ @SpringBootTest //æ ‡è®°ä¸ºå½“å‰ç±»ä¸ºSpringBootæµ‹è¯•ç±»ï¼ŒåŠ è½½é¡¹ç›®çš„ApplicationContextä¸Šä¸‹æ–‡ç¯å¢ƒ class Springbootdemo2ApplicationTests &#123; /** * éœ€æ±‚ï¼šè°ƒç”¨HelloControllerçš„helloæ–¹æ³• */ @Autowired private HelloController helloController; @Test void contextLoads() &#123; String result = helloController.hello(); System.out.println(result); &#125;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œå…ˆä½¿ç”¨@Autowiredæ³¨è§£æ³¨å…¥äº†DemoControllerå®ä¾‹å¯¹è±¡ï¼Œç„¶ååœ¨contextLoads()æ–¹æ³•ä¸­è°ƒç”¨äº†DemoControllerç±»ä¸­å¯¹åº”çš„è¯·æ±‚æ§åˆ¶æ–¹æ³•contextLoads()ï¼Œå¹¶è¾“å‡ºæ‰“å°ç»“æœ 1.5.2 çƒ­éƒ¨ç½²â€‹ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šå¯¹ä¸€æ®µä¸šåŠ¡ä»£ç ä¸æ–­åœ°ä¿®æ”¹æµ‹è¯•ï¼Œåœ¨ä¿®æ”¹ä¹‹åå¾€å¾€éœ€è¦é‡å¯æœåŠ¡ï¼Œæœ‰äº›æœåŠ¡éœ€è¦åŠ è½½å¾ˆä¹…æ‰èƒ½å¯åŠ¨æˆåŠŸï¼Œè¿™ç§ä¸å¿…è¦çš„é‡å¤æ“ä½œæå¤§çš„é™ä½äº†ç¨‹åºå¼€å‘æ•ˆç‡ã€‚ä¸ºæ­¤ï¼ŒSpring Bootæ¡†æ¶ä¸“é—¨æä¾›äº†è¿›è¡Œçƒ­éƒ¨ç½²çš„ä¾èµ–å¯åŠ¨å™¨ï¼Œç”¨äºè¿›è¡Œé¡¹ç›®çƒ­éƒ¨ç½²ï¼Œè€Œæ— éœ€æ‰‹åŠ¨é‡å¯é¡¹ç›® ã€‚ **çƒ­éƒ¨ç½²ï¼š**åœ¨ä¿®æ”¹å®Œä»£ç ä¹‹åï¼Œä¸éœ€è¦é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œå°±å¯ä»¥å®ç°æ›´æ–°ã€‚ ä½¿ç”¨æ­¥éª¤ï¼š 1ï¼‰æ·»åŠ SpringBootçš„çƒ­éƒ¨ç½²ä¾èµ–å¯åŠ¨å™¨ 2ï¼‰å¼€å¯Ideaçš„è‡ªåŠ¨ç¼–è¯‘ 3ï¼‰å¼€å¯Ideaçš„åœ¨é¡¹ç›®è¿è¡Œä¸­è‡ªåŠ¨ç¼–è¯‘çš„åŠŸèƒ½ æ¼”ç¤ºï¼š æ·»åŠ spring-boot-devtoolsçƒ­éƒ¨ç½²ä¾èµ–å¯åŠ¨å™¨ åœ¨Spring Booté¡¹ç›®è¿›è¡Œçƒ­éƒ¨ç½²æµ‹è¯•ä¹‹å‰ï¼Œéœ€è¦å…ˆåœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ spring-boot-devtoolsçƒ­éƒ¨ç½²ä¾èµ–å¯åŠ¨å™¨ 12345&lt;!-- å¼•å…¥çƒ­éƒ¨ç½²ä¾èµ– --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&lt;/dependency&gt; ç”±äºä½¿ç”¨çš„æ˜¯IDEAå¼€å‘å·¥å…·ï¼Œæ·»åŠ çƒ­éƒ¨ç½²ä¾èµ–åå¯èƒ½æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œæ¥ä¸‹æ¥è¿˜éœ€è¦é’ˆå¯¹IDEAå¼€å‘å·¥å…·è¿›è¡Œçƒ­éƒ¨ç½²ç›¸å…³çš„åŠŸèƒ½è®¾ç½® IDEAå·¥å…·çƒ­éƒ¨ç½²è®¾ç½® é€‰æ‹©IDEAå·¥å…·ç•Œé¢çš„ã€Fileã€‘-&gt;ã€Settingsã€‘é€‰é¡¹ï¼Œæ‰“å¼€Compileré¢æ¿è®¾ç½®é¡µé¢ é€‰æ‹©Buildä¸‹çš„Compileré€‰é¡¹ï¼Œåœ¨å³ä¾§å‹¾é€‰â€œBuild project automaticallyâ€é€‰é¡¹å°†é¡¹ç›®è®¾ç½®ä¸ºè‡ªåŠ¨ç¼–è¯‘ï¼Œå•å‡»ã€Applyã€‘â†’ã€OKã€‘æŒ‰é’®ä¿å­˜è®¾ç½® åœ¨é¡¹ç›®ä»»æ„é¡µé¢ä¸­ä½¿ç”¨ç»„åˆå¿«æ·é”®Ctrl+Shift+Alt+/æ‰“å¼€Maintenanceé€‰é¡¹æ¡†ï¼Œé€‰ä¸­å¹¶æ‰“å¼€Registryé¡µé¢ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤º åˆ—è¡¨ä¸­æ‰¾åˆ°â€œcompiler.automake.allow.when.app.runningâ€ï¼Œå°†è¯¥é€‰é¡¹åçš„Valueå€¼å‹¾é€‰ï¼Œç”¨äºæŒ‡å®šIDEAå·¥å…·åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨ç¼–è¯‘ï¼Œæœ€åå•å‡»ã€Closeã€‘æŒ‰é’®å®Œæˆè®¾ç½® çƒ­éƒ¨ç½²æ•ˆæœæµ‹è¯• å¯åŠ¨chapter01http://localhost:8080/hello é¡µé¢åŸå§‹è¾“å‡ºçš„å†…å®¹æ˜¯â€œhello Spring Bootâ€ã€‚ ä¸ºäº†æµ‹è¯•é…ç½®çš„çƒ­éƒ¨ç½²æ˜¯å¦æœ‰æ•ˆï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨ä¸å…³é—­å½“å‰é¡¹ç›®çš„æƒ…å†µä¸‹ï¼Œå°†DemoController ç±»ä¸­çš„è¯·æ±‚å¤„ç†æ–¹æ³•hello()çš„è¿”å›å€¼ä¿®æ”¹ä¸ºâ€œä½ å¥½ï¼ŒSpring Bootâ€å¹¶ä¿å­˜ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¿¡æ¯ä¼šå‘ç°é¡¹ç›®èƒ½å¤Ÿè‡ªåŠ¨æ„å»ºå’Œç¼–è¯‘ï¼Œè¯´æ˜é¡¹ç›®çƒ­éƒ¨ç½²ç”Ÿæ•ˆ å¯ä»¥çœ‹å‡ºï¼Œæµè§ˆå™¨è¾“å‡ºäº†â€œä½ å¥½ï¼ŒSpring Bootâ€ï¼Œè¯´æ˜é¡¹ç›®çƒ­éƒ¨ç½²é…ç½®æˆåŠŸ 1.6 å…¨å±€é…ç½®æ–‡ä»¶å…¨å±€é…ç½®æ–‡ä»¶èƒ½å¤Ÿå¯¹ä¸€äº›é»˜è®¤é…ç½®å€¼è¿›è¡Œä¿®æ”¹ã€‚Spring Bootä½¿ç”¨ä¸€ä¸ªapplication.propertiesæˆ–è€…application.yamlçš„æ–‡ä»¶ä½œä¸ºå…¨å±€é…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å­˜æ”¾åœ¨src/main/resourceç›®å½•æˆ–è€…ç±»è·¯å¾„çš„/configï¼Œä¸€èˆ¬ä¼šé€‰æ‹©resourceç›®å½•ã€‚æ¥ä¸‹æ¥ï¼Œå°†é’ˆå¯¹è¿™ä¸¤ç§å…¨å±€é…ç½®æ–‡ä»¶è¿›è¡Œè®²è§£ ï¼š Spring Booté…ç½®æ–‡ä»¶çš„å‘½ååŠå…¶æ ¼å¼ï¼š application.properties application.yaml application.yml 1.6.1 application.propertiesé…ç½®æ–‡ä»¶ä½¿ç”¨Spring Initializræ–¹å¼æ„å»ºSpring Booté¡¹ç›®æ—¶ï¼Œä¼šåœ¨resourceç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç©ºçš„application.propertiesæ–‡ä»¶ï¼ŒSpring Booté¡¹ç›®å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½application.propertiesæ–‡ä»¶ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨application.propertiesæ–‡ä»¶ä¸­å®šä¹‰Spring Booté¡¹ç›®çš„ç›¸å…³å±æ€§ï¼Œå½“ç„¶ï¼Œè¿™äº›ç›¸å…³å±æ€§å¯ä»¥æ˜¯ç³»ç»Ÿå±æ€§ã€ç¯å¢ƒå˜é‡ã€å‘½ä»¤å‚æ•°ç­‰ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰é…ç½®æ–‡ä»¶åç§°å’Œä½ç½® 1234567#ä¿®æ”¹tomcatçš„ç‰ˆæœ¬å· server.port=8888 #å®šä¹‰æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ JdbcTemplate spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver spring.datasource.url=jdbc:mysql://localhost:3306/lagou spring.datasource.username=root spring.datasource.password=wu7787879 æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹å¯¹Spring Booté¡¹ç›®ä¸­application.propertiesé…ç½®æ–‡ä»¶çš„å…·ä½“ä½¿ç”¨è¿›è¡Œè®²è§£ æ¼”ç¤ºï¼š é¢„å…ˆå‡†å¤‡äº†ä¸¤ä¸ªå®ä½“ç±»æ–‡ä»¶ï¼Œåç»­ä¼šæ¼”ç¤ºå°†application.propertiesé…ç½®æ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰é…ç½®å±æ€§æ³¨å…¥åˆ°Personå®ä½“ç±»çš„å¯¹åº”å±æ€§ä¸­ ï¼ˆ1ï¼‰å…ˆåœ¨é¡¹ç›®çš„com.lagouåŒ…ä¸‹åˆ›å»ºä¸€ä¸ªpojoåŒ…ï¼Œå¹¶åœ¨è¯¥åŒ…ä¸‹åˆ›å»ºä¸¤ä¸ªå®ä½“ç±»Petå’ŒPerson 1234public class Pet &#123; private String type; private String name; &#125; 12345678910@Component @ConfigurationProperties(prefix = &quot;person&quot;) public class Person &#123; private int id;//id private String name;//åç§° private List hobby;//çˆ±å¥½ private String[] family;//å®¶åº­æˆå‘˜ private Map map; private Pet pet;//å® ç‰©&#125; @ConfigurationProperties(prefix &#x3D; â€œpersonâ€)æ³¨è§£çš„ä½œç”¨æ˜¯å°†é…ç½®æ–‡ä»¶ä¸­ä»¥personå¼€å¤´çš„å±æ€§å€¼é€šè¿‡setXX()æ–¹æ³•æ³¨å…¥åˆ°å®ä½“ç±»å¯¹åº”å±æ€§ä¸­ @Componentæ³¨è§£çš„ä½œç”¨æ˜¯å°†å½“å‰æ³¨å…¥å±æ€§å€¼çš„Personç±»å¯¹è±¡ä½œä¸ºBeanç»„ä»¶æ”¾åˆ°Springå®¹å™¨ä¸­ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½è¢«@ConfigurationPropertiesæ³¨è§£è¿›è¡Œèµ‹å€¼ ï¼ˆ2ï¼‰æ‰“å¼€é¡¹ç›®çš„resourcesç›®å½•ä¸‹çš„application.propertiesé…ç½®æ–‡ä»¶ï¼Œåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ç¼–å†™éœ€è¦å¯¹Personç±»è®¾ç½®çš„é…ç½®å±æ€§ 123456789#è‡ªå®šä¹‰é…ç½®ä¿¡æ¯ person.id=1 person.name=ç‹äºŒéº»å­ person.hobby=read,write person.family=father,mather person.map.key1=value1 person.map.key2=value2 person.pet.type=dog person.pet.name=å“ˆå£«å¥‡ ï¼ˆ3ï¼‰æŸ¥çœ‹application.propertiesé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼ŒåŒæ—¶æŸ¥çœ‹å±æ€§é…ç½®æ•ˆæœï¼Œæ‰“å¼€é€šè¿‡IDEAå·¥å…·åˆ›å»ºçš„é¡¹ç›®æµ‹è¯•ç±»ï¼Œåœ¨è¯¥æµ‹è¯•ç±»ä¸­å¼•å…¥Personå®ä½“ç±»Beanï¼Œå¹¶è¿›è¡Œè¾“å‡ºæµ‹è¯• 1234567891011@RunWith(SpringRunner.class) // æµ‹è¯•å¯åŠ¨å™¨ï¼Œå¹¶åŠ è½½Spring Bootæµ‹è¯•æ³¨è§£ @SpringBootTest // æ ‡è®°ä¸ºSpring Bootå•å…ƒæµ‹è¯•ç±»ï¼Œå¹¶åŠ è½½é¡¹ç›®çš„ApplicationContextä¸Šä¸‹æ–‡ç¯ å¢ƒclass SpringbootDemoApplicationTests &#123; // é…ç½®æµ‹è¯• @Autowired private Person person; @Test void configurationTest() &#123; System.out.println(person); &#125;&#125; æ‰“å°ç»“æœï¼š å¯ä»¥çœ‹å‡ºï¼Œæµ‹è¯•æ–¹æ³•configurationTest()è¿è¡ŒæˆåŠŸï¼ŒåŒæ—¶æ­£ç¡®æ‰“å°å‡ºäº†Personå®ä½“ç±»å¯¹è±¡ã€‚è‡³æ­¤ï¼Œè¯´æ˜application.propertiesé…ç½®æ–‡ä»¶å±æ€§é…ç½®æ­£ç¡®ï¼Œå¹¶é€šè¿‡ç›¸å…³æ³¨è§£è‡ªåŠ¨å®Œæˆäº†å±æ€§æ³¨å…¥ ï¼ˆ4ï¼‰ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³ è°ƒæ•´æ–‡ä»¶ç¼–ç æ ¼å¼ï¼š è®¾ç½®TomcatåŠHttpç¼–ç  12345#è§£å†³ä¸­æ–‡ä¹±ç  server.tomcat.uri-encoding=UTF-8 spring.http.encoding.force=true spring.http.encoding.charset=UTF-8 spring.http.encoding.enabled=true 1.6.2 application.yamlé…ç½®æ–‡ä»¶YAMLæ–‡ä»¶æ ¼å¼æ˜¯Spring Bootæ”¯æŒçš„ä¸€ç§JSONæ–‡ä»¶æ ¼å¼ï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„Propertiesé…ç½®æ–‡ä»¶ï¼ŒYAMLæ–‡ä»¶ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œæ˜¯ä¸€ç§æ›´ä¸ºç›´è§‚ä¸”å®¹æ˜“è¢«ç”µè„‘è¯†åˆ«çš„æ•°æ®åºåˆ—åŒ–æ ¼å¼ã€‚application.yamlé…ç½®æ–‡ä»¶çš„å·¥ä½œåŸç†å’Œapplication.propertiesæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡yamlæ ¼å¼é…ç½®æ–‡ä»¶çœ‹èµ·æ¥æ›´ç®€æ´ä¸€äº›ã€‚ YAMLæ–‡ä»¶çš„æ‰©å±•åå¯ä»¥ä½¿ç”¨.ymlæˆ–è€….yamlã€‚ application.ymlæ–‡ä»¶ä½¿ç”¨ â€œkey:ï¼ˆç©ºæ ¼ï¼‰valueâ€æ ¼å¼é…ç½®å±æ€§ï¼Œä½¿ç”¨ç¼©è¿›æ§åˆ¶å±‚çº§å…³ç³»ã€‚ SpringBootçš„ä¸‰ç§é…ç½®æ–‡ä»¶æ˜¯å¯ä»¥å…±å­˜çš„ï¼š è¿™é‡Œï¼Œé’ˆå¯¹ä¸åŒæ•°æ®ç±»å‹çš„å±æ€§å€¼ï¼Œä»‹ç»ä¸€ä¸‹YAML ï¼ˆ1ï¼‰valueå€¼ä¸ºæ™®é€šæ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ç­‰ï¼‰ å½“YAMLé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å±æ€§å€¼ä¸ºæ™®é€šæ•°æ®ç±»å‹æ—¶ï¼Œå¯ä»¥ç›´æ¥é…ç½®å¯¹åº”çš„å±æ€§å€¼ï¼ŒåŒæ—¶å¯¹äºå­—ç¬¦ä¸²ç±»å‹çš„å±æ€§å€¼ï¼Œä¸éœ€è¦é¢å¤–æ·»åŠ å¼•å·ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ 1234server: port: 8080 servlet: context-path: /hello ï¼ˆ2ï¼‰valueå€¼ä¸ºæ•°ç»„å’Œå•åˆ—é›†åˆ å½“YAMLé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å±æ€§å€¼ä¸ºæ•°ç»„æˆ–å•åˆ—é›†åˆç±»å‹æ—¶ï¼Œä¸»è¦æœ‰ä¸¤ç§ä¹¦å†™æ–¹å¼ï¼šç¼©è¿›å¼å†™æ³•å’Œè¡Œå†…å¼å†™æ³•ã€‚ å…¶ä¸­ï¼Œç¼©è¿›å¼å†™æ³•è¿˜æœ‰ä¸¤ç§è¡¨ç¤ºå½¢å¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ 12345person: hobby: - play - read - sleep æˆ–è€…ä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹å½¢å¼ 12345person: hobby: play, read, sleep ä¸Šè¿°ä»£ç ä¸­ï¼Œåœ¨YAMLé…ç½®æ–‡ä»¶ä¸­é€šè¿‡ä¸¤ç§ç¼©è¿›å¼å†™æ³•å¯¹personå¯¹è±¡çš„å•åˆ—é›†åˆï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹çš„çˆ±å¥½hobbyèµ‹å€¼ä¸ºplayã€readå’Œsleepã€‚å…¶ä¸­ä¸€ç§å½¢å¼ä¸ºâ€œ-ï¼ˆç©ºæ ¼ï¼‰å±æ€§å€¼â€ï¼Œå¦ä¸€ç§å½¢å¼ä¸ºå¤šä¸ªå±æ€§å€¼ä¹‹å‰åŠ è‹±æ–‡é€—å·åˆ†éš”ï¼ˆæ³¨æ„ï¼Œæœ€åä¸€ä¸ªå±æ€§å€¼åä¸è¦åŠ é€—å·ï¼‰ã€‚ 12person: hobby: [play,read,sleep] é€šè¿‡ä¸Šè¿°ç¤ºä¾‹å¯¹æ¯”å‘ç°ï¼ŒYAMLé…ç½®æ–‡ä»¶çš„è¡Œå†…å¼å†™æ³•æ›´åŠ ç®€æ˜ã€æ–¹ä¾¿ã€‚å¦å¤–ï¼ŒåŒ…å«å±æ€§å€¼çš„ä¸­æ‹¬å·â€œ[]â€è¿˜å¯ä»¥è¿›ä¸€æ­¥çœç•¥ï¼Œåœ¨è¿›è¡Œå±æ€§èµ‹å€¼æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨åŒ¹é…å’Œæ ¡å¯¹ ï¼ˆ3ï¼‰valueå€¼ä¸ºMapé›†åˆå’Œå¯¹è±¡ å½“YAMLé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å±æ€§å€¼ä¸ºMapé›†åˆæˆ–å¯¹è±¡ç±»å‹æ—¶ï¼ŒYAMLé…ç½®æ–‡ä»¶æ ¼å¼åŒæ ·å¯ä»¥åˆ†ä¸ºä¸¤ç§ä¹¦å†™æ–¹å¼ï¼šç¼©è¿›å¼å†™æ³•å’Œè¡Œå†…å¼å†™æ³•ã€‚ å…¶ä¸­ï¼Œç¼©è¿›å¼å†™æ³•çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ 1234person: map: k1: v1 k2: v2 å¯¹åº”çš„è¡Œå†…å¼å†™æ³•ç¤ºä¾‹ä»£ç å¦‚ä¸‹ 12person: map: &#123;k1: v1,k2: v2&#125; åœ¨YAMLé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®çš„å±æ€§å€¼ä¸ºMapé›†åˆæˆ–å¯¹è±¡ç±»å‹æ—¶ï¼Œç¼©è¿›å¼å†™æ³•çš„å½¢å¼æŒ‰ç…§YAMLæ–‡ä»¶æ ¼å¼ç¼–å†™å³å¯ï¼Œè€Œè¡Œå†…å¼å†™æ³•çš„å±æ€§å€¼è¦ç”¨å¤§æ‹¬å·â€œ{}â€åŒ…å«ã€‚ æ¥ä¸‹æ¥ï¼Œåœ¨Propertiesé…ç½®æ–‡ä»¶æ¼”ç¤ºæ¡ˆä¾‹åŸºç¡€ä¸Šï¼Œé€šè¿‡é…ç½®application.yamlé…ç½®æ–‡ä»¶å¯¹Personå¯¹è±¡è¿›è¡Œèµ‹å€¼ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ ï¼ˆ1ï¼‰åœ¨é¡¹ç›®çš„resourcesç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªapplication.yamlé…ç½®æ–‡ä»¶ï¼Œåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ç¼–å†™ä¸ºPersonç±»è®¾ç½®çš„é…ç½®å±æ€§ 1234567891011121314151617#å¯¹å®ä½“ç±»å¯¹è±¡Personè¿›è¡Œå±æ€§é…ç½®person: id: 1 name: ç‹äºŒéº»å­ family: - å¦» - å¦¾ hobby: - play - read - sleep map: k1: value1 k2: value2 pet: type: ç‹— name: å“ˆå£«å¥‡ ï¼ˆ2ï¼‰å†æ¬¡æ‰§è¡Œæµ‹è¯• 12345678Person&#123; id=1, name=&#x27;ç‹äºŒéº»å­&#x27;, hobby=[play, read, sleep], family=[å¦», å¦¾], map=&#123;k1=value1,k2=value2&#125;, pet=Pet&#123;type=&#x27;ç‹—&#x27;, name=&#x27;å“ˆå£«å¥‡&#x27;&#125;&#125; å¯ä»¥çœ‹å‡ºï¼Œæµ‹è¯•æ–¹æ³•configurationTest()åŒæ ·è¿è¡ŒæˆåŠŸï¼Œå¹¶æ­£ç¡®æ‰“å°å‡ºäº†Personå®ä½“ç±»å¯¹è±¡ã€‚ éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ¬æ¬¡ä½¿ç”¨application.yamlé…ç½®æ–‡ä»¶è¿›è¡Œæµ‹è¯•æ—¶éœ€è¦æå‰å°†application.propertiesé…ç½®æ–‡ä»¶ä¸­ç¼–å†™çš„é…ç½®æ³¨é‡Šï¼Œè¿™æ˜¯å› ä¸ºapplication.propertiesé…ç½®æ–‡ä»¶ä¼šè¦†ç›–application.yamlé…ç½®æ–‡ä»¶ 1.7 é…ç½®æ–‡ä»¶å±æ€§æ³¨å…¥é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š ä»ä½åˆ°é«˜ 12345&lt;includes&gt; &lt;include&gt;**/application*.yml&lt;/include&gt; &lt;include&gt;**/application*.yaml&lt;/include&gt; &lt;include&gt;**/application*.properties&lt;/include&gt;&lt;/includes&gt; ä½¿ç”¨Spring Bootå…¨å±€é…ç½®æ–‡ä»¶è®¾ç½®å±æ€§æ—¶ï¼š å¦‚æœé…ç½®å±æ€§æ˜¯Spring Bootå·²æœ‰å±æ€§ï¼Œä¾‹å¦‚æœåŠ¡ç«¯å£server.portï¼Œé‚£ä¹ˆSpring Bootå†…éƒ¨ä¼šè‡ªåŠ¨æ‰«æå¹¶è¯»å–è¿™äº›é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼å¹¶è¦†ç›–é»˜è®¤å±æ€§ã€‚ å¦‚æœé…ç½®çš„å±æ€§æ˜¯ç”¨æˆ·è‡ªå®šä¹‰å±æ€§ï¼Œä¾‹å¦‚åˆšåˆšè‡ªå®šä¹‰çš„Personå®ä½“ç±»å±æ€§ï¼Œè¿˜å¿…é¡»åœ¨ç¨‹åºä¸­æ³¨å…¥è¿™äº›é…ç½®å±æ€§æ–¹å¯ç”Ÿæ•ˆã€‚ Spring Bootæ”¯æŒå¤šç§æ³¨å…¥é…ç½®æ–‡ä»¶å±æ€§çš„æ–¹å¼ï¼Œä¸‹é¢æ¥ä»‹ç»å¦‚ä½•ä½¿ç”¨æ³¨è§£@ConfigurationPropertieså’Œ@Valueæ³¨å…¥å±æ€§ 1.7.1 ä½¿ç”¨@ConfigurationPropertiesæ³¨å…¥å±æ€§Spring Bootæä¾›çš„@ConfigurationPropertiesæ³¨è§£ç”¨æ¥å¿«é€Ÿã€æ–¹ä¾¿åœ°å°†é…ç½®æ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰å±æ€§å€¼æ‰¹é‡æ³¨å…¥åˆ°æŸä¸ªBeanå¯¹è±¡çš„å¤šä¸ªå¯¹åº”å±æ€§ä¸­ã€‚å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¦‚æœä½¿ç”¨@ConfigurationPropertiesæ³¨å…¥é…ç½®æ–‡ä»¶çš„å±æ€§ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213@Component //å°†é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰ä»¥personå¼€å¤´çš„é…ç½®ä¿¡æ¯æ³¨å…¥å½“å‰ç±»ä¸­ //å‰æ1ï¼šå¿…é¡»ä¿è¯é…ç½®æ–‡ä»¶ä¸­person.xxä¸å½“å‰Personç±»çš„å±æ€§åä¸€è‡´ //å‰æ2ï¼šå¿…é¡»ä¿è¯å½“å‰Personä¸­çš„å±æ€§éƒ½å…·æœ‰setæ–¹æ³• @ConfigurationProperties(prefix = &quot;person&quot;) public class Person &#123; private int id; //id private String name; //åç§° private List hobby; //çˆ±å¥½ private String[] family; //å®¶åº­æˆå‘˜ private Map map; private Pet pet; //å® ç‰©&#125; ä¸Šè¿°ä»£ç ä½¿ç”¨@Componentå’Œ@ConfigurationProperties(prefix &#x3D; â€œpersonâ€)å°†é…ç½®æ–‡ä»¶ä¸­çš„æ¯ä¸ªå±æ€§æ˜ å°„åˆ°personç±»ç»„ä»¶ä¸­ã€‚ 1.7.2 ä½¿ç”¨@Valueæ³¨å…¥å±æ€§ @Valueæ³¨è§£æ˜¯Springæ¡†æ¶æä¾›çš„ï¼Œç”¨æ¥è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼å¹¶é€ä¸ªæ³¨å…¥åˆ°Beanå¯¹è±¡çš„å¯¹åº”å±æ€§ä¸­ï¼ŒSpring Bootæ¡†æ¶ä»Springæ¡†æ¶ä¸­å¯¹@Valueæ³¨è§£è¿›è¡Œäº†é»˜è®¤ç»§æ‰¿ï¼Œæ‰€ä»¥åœ¨Spring Bootæ¡†æ¶ä¸­è¿˜å¯ä»¥ä½¿ç”¨è¯¥æ³¨è§£è¯»å–å’Œæ³¨å…¥é…ç½®æ–‡ä»¶å±æ€§å€¼ã€‚ä½¿ç”¨@Valueæ³¨å…¥å±æ€§çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ 1234@Component public class Person &#123; @Value(&quot;$&#123;person.id&#125;&quot;) private int id;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œä½¿ç”¨@Componentå’Œ@Valueæ³¨å…¥Personå®ä½“ç±»çš„idå±æ€§ã€‚å…¶ä¸­ï¼Œ@Valueä¸ä»…å¯ä»¥å°†é…ç½®æ–‡ä»¶çš„å±æ€§æ³¨å…¥Personçš„idå±æ€§ï¼Œè¿˜å¯ä»¥ç›´æ¥ç»™idå±æ€§èµ‹å€¼ï¼Œè¿™ç‚¹@ConfigurationPropertiesä¸æ”¯æŒçš„ æ¼”ç¤º@Valueæ³¨è§£è¯»å–å¹¶æ³¨å…¥é…ç½®æ–‡ä»¶å±æ€§çš„ä½¿ç”¨: åœ¨com.lagou.pojoåŒ…ä¸‹æ–°åˆ›å»ºä¸€ä¸ªå®ä½“ç±»Studentï¼Œå¹¶ä½¿ç”¨@Valueæ³¨è§£æ³¨å…¥å±æ€§ 12345678@Component public class Student &#123; @Value(&quot;$&#123;person.id&#125;&quot;) private int id; @Value(&quot;$&#123;person.name&#125;&quot;) private String name; //åç§° //çœç•¥toString&#125; Studentç±»ä½¿ç”¨@Valueæ³¨è§£å°†é…ç½®æ–‡ä»¶çš„å±æ€§å€¼è¯»å–å’Œæ³¨å…¥ã€‚ ä»ä¸Šè¿°ç¤ºä¾‹ä»£ç å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨@Valueæ³¨è§£æ–¹å¼éœ€è¦å¯¹æ¯ä¸€ä¸ªå±æ€§æ³¨å…¥è®¾ç½®ï¼ŒåŒæ—¶åˆå…å»äº†å±æ€§çš„setXX()æ–¹æ³• å†æ¬¡æ‰“å¼€æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯• 123456@Autowired private Student student;@Test public void studentTest() &#123; System.out.println(student);&#125; æ‰“å°ç»“æœï¼š å¯ä»¥çœ‹å‡ºï¼Œæµ‹è¯•æ–¹æ³•studentTest()è¿è¡ŒæˆåŠŸï¼ŒåŒæ—¶æ­£ç¡®æ‰“å°å‡ºäº†Studentå®ä½“ç±»å¯¹è±¡ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæœ¬ç¤ºä¾‹ä¸­åªæ˜¯ä½¿ç”¨@Valueæ³¨è§£å¯¹å®ä¾‹ä¸­Studentå¯¹è±¡çš„æ™®é€šç±»å‹å±æ€§è¿›è¡Œäº†èµ‹å€¼æ¼”ç¤ºï¼Œè€Œ@Valueæ³¨è§£å¯¹äºåŒ…å«Mapé›†åˆã€å¯¹è±¡ä»¥åŠYAMLæ–‡ä»¶æ ¼å¼çš„è¡Œå†…å¼å†™æ³•çš„é…ç½®æ–‡ä»¶çš„å±æ€§æ³¨å…¥éƒ½ä¸æ”¯æŒï¼Œå¦‚æœèµ‹å€¼ä¼šå‡ºç°é”™è¯¯ 1.8 è‡ªå®šä¹‰é…ç½®â€‹ spring Bootå…é™¤äº†é¡¹ç›®ä¸­å¤§éƒ¨åˆ†çš„æ‰‹åŠ¨é…ç½®ï¼Œå¯¹äºä¸€äº›ç‰¹å®šæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶ä»¥é€‚åº”å…·ä½“ç”Ÿäº§ç¯å¢ƒï¼Œå¯ä»¥è¯´ï¼Œå‡ ä¹æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥å†™åœ¨application.ymlæ–‡ä»¶ä¸­ï¼ŒSpring Bootä¼šè‡ªåŠ¨åŠ è½½å…¨å±€é…ç½®æ–‡ä»¶ä»è€Œå…é™¤æˆ‘ä»¬æ‰‹åŠ¨åŠ è½½çš„çƒ¦æ¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼ŒSpring Bootæ˜¯æ— æ³•è¯†åˆ«è¿™äº›é…ç½®æ–‡ä»¶çš„ï¼Œæ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åŠ è½½ã€‚æ¥ä¸‹æ¥ï¼Œå°†é’ˆå¯¹Spring Bootçš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶åŠå…¶åŠ è½½æ–¹å¼è¿›è¡Œè®²è§£ 1.8.1 ä½¿ç”¨@PropertySourceåŠ è½½é…ç½®æ–‡ä»¶å¯¹äºè¿™ç§åŠ è½½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨@PropertySourceæ³¨è§£æ¥å®ç°ã€‚@PropertySourceæ³¨è§£ç”¨äºæŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„å…·ä½“ä½ç½®å’Œåç§°å½“ç„¶ï¼Œå¦‚æœéœ€è¦å°†è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼æ³¨å…¥åˆ°å¯¹åº”ç±»çš„å±æ€§ä¸­ï¼Œå¯ä»¥ä½¿ç”¨@ConfigurationPropertiesæˆ–è€…@Valueæ³¨è§£è¿›è¡Œå±æ€§å€¼æ³¨å…¥ æ¼”ç¤ºï¼š æ‰“å¼€Spring Booté¡¹ç›®çš„resourcesç›®å½•ï¼Œåœ¨é¡¹ç›®çš„ç±»è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªtest.propertiesè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ç¼–å†™éœ€è¦è®¾ç½®çš„é…ç½®å±æ€§ 123#å¯¹å®ä½“ç±»å¯¹è±¡MyPropertiesè¿›è¡Œå±æ€§é…ç½® test.id=110 test.name=test åœ¨com.lagou.pojoåŒ…ä¸‹æ–°åˆ›å»ºä¸€ä¸ªé…ç½®ç±»MyPropertiesï¼Œæä¾›test.propertiesè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å±æ€§ï¼Œå¹¶æ ¹æ®@PropertySourceæ³¨è§£çš„ä½¿ç”¨è¿›è¡Œç›¸å…³é…ç½® 123456789@Component // è‡ªå®šä¹‰é…ç½®ç±» @PropertySource(&quot;classpath:test.properties&quot;) // æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä½ç½®å’Œåç§° @ConfigurationProperties(prefix = &quot;test&quot;) // æŒ‡å®šé…ç½®æ–‡ä»¶æ³¨å…¥å±æ€§å‰ç¼€ public class MyProperties &#123; private int id; private String name; // çœç•¥å±æ€§getXX()å’ŒsetXX()æ–¹æ³• // çœç•¥toString()æ–¹æ³•&#125; ä¸»è¦æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é…ç½®ç±»ï¼Œé€šè¿‡ç›¸å…³æ³¨è§£å¼•å…¥äº†è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶å®Œæˆäº†è‡ªå®šä¹‰å±æ€§å€¼çš„æ³¨å…¥ã€‚é’ˆå¯¹ç¤ºä¾‹ä¸­çš„å‡ ä¸ªæ³¨è§£ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ : @PropertySource(â€œclasspath:test.propertiesâ€)æ³¨è§£æŒ‡å®šäº†è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°ï¼Œæ­¤ç¤ºä¾‹è¡¨ç¤ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ºclasspathç±»è·¯å¾„ä¸‹çš„test.propertiesæ–‡ä»¶ï¼› @ConfigurationProperties(prefix &#x3D; â€œtestâ€)æ³¨è§£å°†ä¸Šè¿°è‡ªå®šä¹‰é…ç½®æ–‡ä»¶test.propertiesä¸­ä»¥testå¼€å¤´çš„å±æ€§å€¼æ³¨å…¥åˆ°è¯¥é…ç½®ç±»å±æ€§ä¸­ã€‚ è¿›è¡Œæµ‹è¯• 123456@Autowired private MyProperties myProperties;@Test public void myPropertiesTest() &#123; System.out.println(myProperties);&#125; æ‰“å°ç»“æœï¼š 1.8.2 ä½¿ç”¨@Configurationç¼–å†™è‡ªå®šä¹‰é…ç½®ç±»åœ¨Spring Bootæ¡†æ¶ä¸­ï¼Œæ¨èä½¿ç”¨é…ç½®ç±»çš„æ–¹å¼å‘å®¹å™¨ä¸­æ·»åŠ å’Œé…ç½®ç»„ä»¶ åœ¨Spring Bootæ¡†æ¶ä¸­ï¼Œé€šå¸¸ä½¿ç”¨@Configurationæ³¨è§£å®šä¹‰ä¸€ä¸ªé…ç½®ç±»ï¼ŒSpring Bootä¼šè‡ªåŠ¨æ‰«æå’Œè¯†åˆ«é…ç½®ç±»ï¼Œä»è€Œæ›¿æ¢ä¼ ç»ŸSpringæ¡†æ¶ä¸­çš„XMLé…ç½®æ–‡ä»¶ã€‚ å½“å®šä¹‰ä¸€ä¸ªé…ç½®ç±»åï¼Œè¿˜éœ€è¦åœ¨ç±»ä¸­çš„æ–¹æ³•ä¸Šä½¿ç”¨@Beanæ³¨è§£è¿›è¡Œç»„ä»¶é…ç½®ï¼Œå°†æ–¹æ³•çš„è¿”å›å¯¹è±¡æ³¨å…¥åˆ°Springå®¹å™¨ä¸­ï¼Œå¹¶ä¸”ç»„ä»¶åç§°é»˜è®¤ä½¿ç”¨çš„æ˜¯æ–¹æ³•åï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨@Beanæ³¨è§£çš„nameæˆ–valueå±æ€§è‡ªå®šä¹‰ç»„ä»¶çš„åç§° æ¼”ç¤ºï¼š åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ªcom.lagou.configåŒ…ï¼Œå¹¶åœ¨è¯¥åŒ…ä¸‹æ–°åˆ›å»ºä¸€ä¸ªç±»MyServiceï¼Œè¯¥ç±»ä¸­ä¸éœ€è¦ç¼–å†™ä»»ä½•ä»£ç  123public class MyService &#123;&#125; åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„MyServiceç±»ï¼Œè€Œè¯¥ç±»ç›®å‰æ²¡æœ‰æ·»åŠ ä»»ä½•é…ç½®å’Œæ³¨è§£ï¼Œå› æ­¤è¿˜æ— æ³•æ­£å¸¸è¢«Spring Bootæ‰«æå’Œè¯†åˆ« åœ¨é¡¹ç›®çš„com.lagou.configåŒ…ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªç±»MyConfigï¼Œå¹¶ä½¿ç”¨@Configurationæ³¨è§£å°†è¯¥ç±»å£°æ˜ä¸€ä¸ªé…ç½®ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567@Configuration // å®šä¹‰è¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»public class MyConfig &#123; @Bean // å°†è¿”å›å€¼å¯¹è±¡ä½œä¸ºç»„ä»¶æ·»åŠ åˆ°Springå®¹å™¨ä¸­ï¼Œè¯¥ç»„ä»¶idé»˜è®¤ä¸ºæ–¹æ³•å public MyService myService()&#123; return new MyService(); &#125;&#125; MyConfigæ˜¯@Configurationæ³¨è§£å£°æ˜çš„é…ç½®ç±»ï¼ˆç±»ä¼¼äºå£°æ˜äº†ä¸€ä¸ªXMLé…ç½®æ–‡ä»¶ï¼‰ï¼Œè¯¥é…ç½®ç±»ä¼šè¢«Spring Bootè‡ªåŠ¨æ‰«æè¯†åˆ«ï¼›ä½¿ç”¨@Beanæ³¨è§£çš„myService()æ–¹æ³•ï¼Œå…¶è¿”å›å€¼å¯¹è±¡ä¼šä½œä¸ºç»„ä»¶æ·»åŠ åˆ°äº†Springå®¹å™¨ä¸­ï¼ˆç±»ä¼¼äºXMLé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾é…ç½®ï¼‰ï¼Œå¹¶ä¸”è¯¥ç»„ä»¶çš„idé»˜è®¤æ˜¯æ–¹æ³•åmyService æµ‹è¯•ç±» 123456@Autowired private ApplicationContext applicationContext;@Test public void iocTest() &#123; System.out.println(applicationContext.containsBean(&quot;myService&quot;));&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œå…ˆé€šè¿‡@Autowiredæ³¨è§£å¼•å…¥äº†Springå®¹å™¨å®ä¾‹ApplicationContextï¼Œç„¶ååœ¨æµ‹è¯•æ–¹æ³•iocTest()ä¸­æµ‹è¯•æŸ¥çœ‹è¯¥å®¹å™¨ä¸­æ˜¯å¦åŒ…æ‹¬idä¸ºmyServiceçš„ç»„ä»¶ã€‚ æ‰§è¡Œæµ‹è¯•æ–¹æ³•iocTest() ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºæ•ˆæœï¼Œç»“æœå¦‚ä¸‹ï¼š ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæµ‹è¯•æ–¹æ³•iocTest()è¿è¡ŒæˆåŠŸï¼Œæ˜¾ç¤ºè¿è¡Œç»“æœä¸ºtrueï¼Œè¡¨ç¤ºSpirngçš„IOCå®¹å™¨ä¸­ä¹Ÿå·²ç»åŒ…å«äº†idä¸ºmyServiceçš„å®ä¾‹å¯¹è±¡ç»„ä»¶ï¼Œè¯´æ˜ä½¿ç”¨è‡ªå®šä¹‰é…ç½®ç±»çš„å½¢å¼å®Œæˆäº†å‘Springå®¹å™¨è¿›è¡Œç»„ä»¶çš„æ·»åŠ å’Œé…ç½® äºŒã€SpringBootåŸç†æ·±å…¥åŠæºç å‰–æâ€‹ ä¼ ç»Ÿçš„Springæ¡†æ¶å®ç°ä¸€ä¸ªWebæœåŠ¡ï¼Œéœ€è¦å¯¼å…¥å„ç§ä¾èµ–JARåŒ…ï¼Œç„¶åç¼–å†™å¯¹åº”çš„XMLé…ç½®æ–‡ä»¶ç­‰ï¼Œç›¸è¾ƒè€Œè¨€ï¼ŒSpring Bootæ˜¾å¾—æ›´åŠ æ–¹ä¾¿ã€å¿«æ·å’Œé«˜æ•ˆã€‚é‚£ä¹ˆï¼ŒSpring Bootç©¶ç«Ÿå¦‚ä½•åšåˆ°è¿™äº›çš„å‘¢ï¼Ÿ æ¥ä¸‹æ¥åˆ†åˆ«é’ˆå¯¹Spring Bootæ¡†æ¶çš„ä¾èµ–ç®¡ç†ã€è‡ªåŠ¨é…ç½®é€šè¿‡æºç è¿›è¡Œæ·±å…¥åˆ†æ 2.1 ä¾èµ–ç®¡ç†**é—®é¢˜1ï¼š**ä¸ºä»€ä¹ˆå¯¼å…¥dependencyæ—¶ä¸éœ€è¦æŒ‡å®šç‰ˆæœ¬ï¼Ÿ åœ¨Spring Bootå…¥é—¨ç¨‹åºä¸­ï¼Œé¡¹ç›®pom.xmlæ–‡ä»¶æœ‰ä¸¤ä¸ªæ ¸å¿ƒä¾èµ–ï¼Œåˆ†åˆ«æ˜¯spring-boot-starter-parentå’Œspring-boot-starter-webï¼Œå…³äºè¿™ä¸¤ä¸ªä¾èµ–çš„ç›¸å…³ä»‹ç»å…·ä½“å¦‚ä¸‹ï¼š spring-boot-starter-parentä¾èµ– åœ¨chapter01é¡¹ç›®ä¸­çš„pom.xmlæ–‡ä»¶ä¸­æ‰¾åˆ°spring-boot-starter-parentä¾èµ–ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹: 1234567&lt;!-- Spring Bootçˆ¶é¡¹ç›®ä¾èµ–ç®¡ç† --&gt;&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;artifactId&gt; &lt;version&gt;2.2.2.RELEASE&lt;/version&gt; &lt;relativePath/&gt;&lt;!-- lookup parent from repository --&gt;&lt;/parent&gt; ä¸Šè¿°ä»£ç ä¸­ï¼Œå°†spring-boot-starter-parentä¾èµ–ä½œä¸ºSpring Booté¡¹ç›®çš„ç»Ÿä¸€çˆ¶é¡¹ç›®ä¾èµ–ç®¡ç†ï¼Œå¹¶å°†é¡¹ç›®ç‰ˆæœ¬å·ç»Ÿä¸€ä¸º2.2.2.RELEASEï¼Œè¯¥ç‰ˆæœ¬å·æ ¹æ®å®é™…å¼€å‘éœ€æ±‚æ˜¯å¯ä»¥ä¿®æ”¹çš„ ä½¿ç”¨â€œCtrl+é¼ æ ‡å·¦é”®â€è¿›å…¥å¹¶æŸ¥çœ‹spring-boot-starter-parentåº•å±‚æºæ–‡ä»¶ï¼Œå‘ç°spring-boot-starter-parentçš„åº•å±‚æœ‰ä¸€ä¸ªçˆ¶ä¾èµ–spring-boot-dependenciesï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ 123456&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;2.2.2.RELEASE&lt;/version&gt; &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt;&lt;/parent&gt; ç»§ç»­æŸ¥çœ‹spring-boot-dependenciesåº•å±‚æºæ–‡ä»¶ï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;properties&gt; &lt;activemq.version&gt;5.15.11&lt;/activemq.version&gt; ... &lt;solr.version&gt;8.2.0&lt;/solr.version&gt; &lt;mysql.version&gt;8.0.18&lt;/mysql.version&gt; &lt;kafka.version&gt;2.3.1&lt;/kafka.version&gt; &lt;spring-amqp.version&gt;2.2.2.RELEASE&lt;/spring-amqp.version&gt; &lt;spring-restdocs.version&gt;2.0.4.RELEASE&lt;/spring-restdocs.version&gt; &lt;spring-retry.version&gt;1.2.4.RELEASE&lt;/spring-retry.version&gt; &lt;spring-security.version&gt;5.2.1.RELEASE&lt;/spring-security.version&gt; &lt;spring-session-bom.version&gt;Corn-RELEASE&lt;/spring-session-bom.version&gt; &lt;spring-ws.version&gt;3.0.8.RELEASE&lt;/spring-ws.version&gt; &lt;sqlite-jdbc.version&gt;3.28.0&lt;/sqlite-jdbc.version&gt; &lt;sun-mail.version&gt;$&#123;jakarta-mail.version&#125;&lt;/sun-mail.version&gt; &lt;tomcat.version&gt;9.0.29&lt;/tomcat.version&gt; &lt;thymeleaf.version&gt;3.0.11.RELEASE&lt;/thymeleaf.version&gt; &lt;thymeleaf-extras-data-attribute.version&gt;2.0.1 &lt;/thymeleaf-extras-data- attribute.version&gt; ... &lt;/properties&gt; ä»spring-boot-dependenciesåº•å±‚æºæ–‡ä»¶å¯ä»¥çœ‹å‡ºï¼Œè¯¥æ–‡ä»¶é€šè¿‡æ ‡ç­¾å¯¹ä¸€äº›å¸¸ç”¨æŠ€æœ¯æ¡†æ¶çš„ä¾èµ–æ–‡ä»¶è¿›è¡Œäº†ç»Ÿä¸€ç‰ˆæœ¬å·ç®¡ç†ï¼Œä¾‹å¦‚activemqã€springã€tomcatç­‰ï¼Œéƒ½æœ‰ä¸Spring Boot 2.2.2ç‰ˆæœ¬ç›¸åŒ¹é…çš„ç‰ˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯pom.xmlå¼•å…¥ä¾èµ–æ–‡ä»¶ä¸éœ€è¦æ ‡æ³¨ä¾èµ–æ–‡ä»¶ç‰ˆæœ¬å·çš„åŸå› ã€‚ éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœpom.xmlå¼•å…¥çš„ä¾èµ–æ–‡ä»¶ä¸æ˜¯ spring-boot-starter-parentç®¡ç†çš„ï¼Œé‚£ä¹ˆåœ¨pom.xmlå¼•å…¥ä¾èµ–æ–‡ä»¶æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ ‡ç­¾æŒ‡å®šä¾èµ–æ–‡ä»¶çš„ç‰ˆæœ¬å·ã€‚ é—®é¢˜2ï¼š spring-boot-starter-parentçˆ¶ä¾èµ–å¯åŠ¨å™¨çš„ä¸»è¦ä½œç”¨æ˜¯è¿›è¡Œç‰ˆæœ¬ç»Ÿä¸€ç®¡ç†ï¼Œé‚£ä¹ˆé¡¹ç›®è¿è¡Œä¾èµ–çš„JARåŒ…æ˜¯ä»ä½•è€Œæ¥çš„ï¼Ÿ spring-boot-starter-webä¾èµ– æŸ¥çœ‹spring-boot-starter-webä¾èµ–æ–‡ä»¶æºç ï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.2.2.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt; &lt;version&gt;2.2.2.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt; &lt;version&gt;2.2.2.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; &lt;version&gt;2.2.2.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt; &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;5.2.2.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.2.2.RELEASE&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä»ä¸Šè¿°ä»£ç å¯ä»¥å‘ç°ï¼Œspring-boot-starter-webä¾èµ–å¯åŠ¨å™¨çš„ä¸»è¦ä½œç”¨æ˜¯æä¾›Webå¼€å‘åœºæ™¯æ‰€éœ€çš„åº•å±‚æ‰€æœ‰ä¾èµ– æ­£æ˜¯å¦‚æ­¤ï¼Œåœ¨pom.xmlä¸­å¼•å…¥spring-boot-starter-webä¾èµ–å¯åŠ¨å™¨æ—¶ï¼Œå°±å¯ä»¥å®ç°Webåœºæ™¯å¼€å‘ï¼Œè€Œä¸éœ€è¦é¢å¤–å¯¼å…¥TomcatæœåŠ¡å™¨ä»¥åŠå…¶ä»–Webä¾èµ–æ–‡ä»¶ç­‰ã€‚å½“ç„¶ï¼Œè¿™äº›å¼•å…¥çš„ä¾èµ–æ–‡ä»¶çš„ç‰ˆæœ¬å·è¿˜æ˜¯ç”±spring-boot-starter-parentçˆ¶ä¾èµ–è¿›è¡Œçš„ç»Ÿä¸€ç®¡ç†ã€‚ æœ‰å“ªäº›starterï¼š https://github.com/spring-projects/spring-boot/tree/v2.1.0.RELEASE/spring-boot-project/spring-boot-starters https://mvnrepository.com/search?q=starter Spring Booté™¤äº†æä¾›æœ‰ä¸Šè¿°ä»‹ç»çš„Webä¾èµ–å¯åŠ¨å™¨å¤–ï¼Œè¿˜æä¾›äº†å…¶ä»–è®¸å¤šå¼€å‘åœºæ™¯çš„ç›¸å…³ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€Spring Bootå®˜æ–¹æ–‡æ¡£ï¼Œæœç´¢â€œStartersâ€å…³é”®å­—æŸ¥è¯¢åœºæ™¯ä¾èµ–å¯åŠ¨å™¨ åˆ—å‡ºäº†Spring Bootå®˜æ–¹æä¾›çš„éƒ¨åˆ†åœºæ™¯ä¾èµ–å¯åŠ¨å™¨ï¼Œè¿™äº›ä¾èµ–å¯åŠ¨å™¨é€‚ç”¨äºä¸åŒçš„åœºæ™¯å¼€å‘ï¼Œä½¿ç”¨æ—¶åªéœ€è¦åœ¨pox.xmlæ–‡ä»¶ä¸­å¯¼å…¥å¯¹åº”çš„ä¾èµ–å¯åŠ¨å™¨å³å¯ã€‚ éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒSpring Bootå®˜æ–¹å¹¶ä¸æ˜¯é’ˆå¯¹æ‰€æœ‰åœºæ™¯å¼€å‘çš„æŠ€æœ¯æ¡†æ¶éƒ½æä¾›äº†åœºæ™¯å¯åŠ¨å™¨ï¼Œä¾‹å¦‚æ•°æ®åº“æ“ä½œæ¡†æ¶MyBatisã€é˜¿é‡Œå·´å·´çš„Druidæ•°æ®æºç­‰ï¼ŒSpring Bootå®˜æ–¹å°±æ²¡æœ‰æä¾›å¯¹åº”çš„ä¾èµ–å¯åŠ¨å™¨ã€‚ä¸ºäº†å……åˆ†åˆ©ç”¨Spring Bootæ¡†æ¶çš„ä¼˜åŠ¿ï¼Œåœ¨Spring Bootå®˜æ–¹æ²¡æœ‰æ•´åˆè¿™äº›æŠ€æœ¯æ¡†æ¶çš„æƒ…å†µä¸‹ï¼ŒMyBatisã€Druidç­‰æŠ€æœ¯æ¡†æ¶æ‰€åœ¨çš„å¼€å‘å›¢é˜Ÿä¸»åŠ¨ä¸Spring Bootæ¡†æ¶è¿›è¡Œäº†æ•´åˆï¼Œå®ç°äº†å„è‡ªçš„ä¾èµ–å¯åŠ¨å™¨ï¼Œä¾‹å¦‚mybatis-spring-boot-starterã€druid-spring-boot-starterç­‰ã€‚æˆ‘ä»¬åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥è¿™äº›ç¬¬ä¸‰æ–¹çš„ä¾èµ–å¯åŠ¨å™¨æ—¶ï¼Œåˆ‡è®°è¦é…ç½®å¯¹åº”çš„ç‰ˆæœ¬å· 2.2 è‡ªåŠ¨é…ç½®æ¦‚å¿µï¼šèƒ½å¤Ÿåœ¨æˆ‘ä»¬æ·»åŠ jaråŒ…ä¾èµ–çš„æ—¶å€™ï¼Œè‡ªåŠ¨ä¸ºæˆ‘ä»¬é…ç½®ä¸€äº›ç»„ä»¶çš„ç›¸å…³é…ç½®ï¼Œæˆ‘ä»¬æ— éœ€é…ç½®æˆ–è€…åªéœ€è¦å°‘é‡é…ç½®å°±èƒ½è¿è¡Œç¼–å†™çš„é¡¹ç›® é—®é¢˜ï¼šSpring Bootåˆ°åº•æ˜¯å¦‚ä½•è¿›è¡Œè‡ªåŠ¨é…ç½®çš„ï¼Œéƒ½æŠŠå“ªäº›ç»„ä»¶è¿›è¡Œäº†è‡ªåŠ¨é…ç½®ï¼Ÿ Spring Bootåº”ç”¨çš„å¯åŠ¨å…¥å£æ˜¯@SpringBootApplicationæ³¨è§£æ ‡æ³¨ç±»ä¸­çš„main()æ–¹æ³•ï¼Œ @SpringBootApplication ï¼š SpringBoot åº”ç”¨æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯ SpringBoot çš„ä¸»é…ç½®ç±»ï¼Œ SpringBoot å°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„ main() æ–¹æ³•å¯åŠ¨ SpringBoot åº”ç”¨ã€‚ ä¸‹é¢ï¼ŒæŸ¥çœ‹@SpringBootApplicationå†…éƒ¨æºç è¿›è¡Œåˆ†æ ï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ 123456@SpringBootApplication public class SpringbootDemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringbootDemoApplication.class, args); &#125;&#125; è¿›å…¥åˆ° @SpringBootApplication å†…ï¼Œè§‚å¯Ÿå…¶åšäº†å“ªäº›å·¥ä½œï¼š 123456789101112131415161718192021222324@Target(&#123;ElementType.TYPE&#125;) //æ³¨è§£çš„é€‚ç”¨èŒƒå›´,Typeè¡¨ç¤ºæ³¨è§£å¯ä»¥æè¿°åœ¨ç±»ã€æ¥å£ã€æ³¨è§£æˆ–æšä¸¾ä¸­ @Retention(RetentionPolicy.RUNTIME) //è¡¨ç¤ºæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ŒRuntimeè¿è¡Œæ—¶ @Documented //è¡¨ç¤ºæ³¨è§£å¯ä»¥è®°å½•åœ¨javadocä¸­ @Inherited //è¡¨ç¤ºå¯ä»¥è¢«å­ç±»ç»§æ‰¿è¯¥æ³¨è§£ @SpringBootConfiguration // æ ‡æ˜è¯¥ç±»ä¸ºé…ç½®ç±»@EnableAutoConfiguration // å¯åŠ¨è‡ªåŠ¨é…ç½®åŠŸèƒ½ @ComponentScan(excludeFilters = &#123; @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class), @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)public @interface SpringBootApplication &#123; // æ ¹æ®classæ¥æ’é™¤ç‰¹å®šçš„ç±»ï¼Œä½¿å…¶ä¸èƒ½åŠ å…¥springå®¹å™¨ï¼Œä¼ å…¥å‚æ•°valueç±»å‹æ˜¯classç±»å‹ã€‚ @AliasFor(annotation = EnableAutoConfiguration.class) Class&lt;?&gt;[] exclude() default &#123;&#125;; // æ ¹æ®classname æ¥æ’é™¤ç‰¹å®šçš„ç±»ï¼Œä½¿å…¶ä¸èƒ½åŠ å…¥springå®¹å™¨ï¼Œä¼ å…¥å‚æ•°valueç±»å‹æ˜¯classçš„å…¨ ç±»åå­—ç¬¦ä¸²æ•°ç»„ã€‚ @AliasFor(annotation = EnableAutoConfiguration.class) String[] excludeName() default &#123;&#125;; // æŒ‡å®šæ‰«æåŒ…ï¼Œå‚æ•°æ˜¯åŒ…åçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚ @AliasFor(annotation = ComponentScan.class, attribute = &quot;basePackages&quot;) String[] scanBasePackages() default &#123;&#125;; // æ‰«æç‰¹å®šçš„åŒ…ï¼Œå‚æ•°ç±»ä¼¼æ˜¯Classç±»å‹æ•°ç»„ã€‚ @AliasFor(annotation = ComponentScan.class, attribute = &quot;basePackageClasses&quot;) Class&lt;?&gt;[] scanBasePackageClasses() default &#123;&#125;; &#125; ä»ä¸Šè¿°æºç å¯ä»¥çœ‹å‡ºï¼Œ@SpringBootApplicationæ³¨è§£æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå‰é¢ 4 ä¸ªæ˜¯æ³¨è§£çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œ æˆ‘ä»¬ä¸»è¦çœ‹åé¢ 3 ä¸ªæ³¨è§£ï¼š@SpringBootConfigurationã€@EnableAutoConfigurationã€@ComponentScanä¸‰ä¸ªæ ¸å¿ƒæ³¨è§£ï¼Œå…³äºè¿™ä¸‰ä¸ªæ ¸å¿ƒæ³¨è§£çš„ç›¸å…³è¯´æ˜å…·ä½“å¦‚ä¸‹ï¼š 2.2.1 @SpringBootConfigurationæ³¨è§£@SpringBootConfiguration : SpringBoot çš„é…ç½®ç±»ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª SpringBootçš„é…ç½®ç±»ã€‚ æŸ¥çœ‹@SpringBootConfigurationæ³¨è§£æºç ï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ã€‚ 12345678@Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Configuration // é…ç½®ç±»çš„ä½œç”¨ç­‰åŒäºé…ç½®æ–‡ä»¶ï¼Œé…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªå¯¹è±¡ public @interface SpringBootConfiguration &#123; &#125; ä»ä¸Šè¿°æºç å¯ä»¥çœ‹å‡ºï¼Œ@SpringBootConfigurationæ³¨è§£å†…éƒ¨æœ‰ä¸€ä¸ªæ ¸å¿ƒæ³¨è§£@Configurationï¼Œè¯¥æ³¨è§£æ˜¯Springæ¡†æ¶æä¾›çš„ï¼Œè¡¨ç¤ºå½“å‰ç±»ä¸ºä¸€ä¸ªé…ç½®ç±»ï¼ˆXMLé…ç½®æ–‡ä»¶çš„æ³¨è§£è¡¨ç°å½¢å¼ï¼‰ï¼Œå¹¶å¯ä»¥è¢«ç»„ä»¶æ‰«æå™¨æ‰«æã€‚ç”±æ­¤å¯è§ï¼Œ@SpringBootConfigurationæ³¨è§£çš„ä½œç”¨ä¸@Configurationæ³¨è§£ç›¸åŒï¼Œéƒ½æ˜¯æ ‡è¯†ä¸€ä¸ªå¯ä»¥è¢«ç»„ä»¶æ‰«æå™¨æ‰«æçš„é…ç½®ç±»ï¼Œåªä¸è¿‡@SpringBootConfigurationæ˜¯è¢«Spring Bootè¿›è¡Œäº†é‡æ–°å°è£…å‘½åè€Œå·² 2.2.2 @EnableAutoConfigurationæ³¨è§£@EnableAutoConfiguration : å¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œä»¥å‰ç”±æˆ‘ä»¬éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼Œç°åœ¨ç”± SpringBootå¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®ï¼Œè¿™ä¸ªæ³¨è§£å°±æ˜¯ Springboot èƒ½å®ç°è‡ªåŠ¨é…ç½®çš„å…³é”®ã€‚ åŒæ ·ï¼ŒæŸ¥çœ‹è¯¥æ³¨è§£å†…éƒ¨æŸ¥çœ‹æºç ä¿¡æ¯ï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ 12345678910111213// è‡ªåŠ¨é…ç½®åŒ…@AutoConfigurationPackage// Springçš„åº•å±‚æ³¨è§£@Importï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶// å¯¼å…¥çš„ç»„ä»¶æ˜¯AutoConfigurationPackages.Registrar.class@Import(AutoConfigurationImportSelector.class)// å‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆã€‚public @interface EnableAutoConfiguration &#123; String ENABLED_OVERRIDE_PROPERTY = &quot;spring.boot.enableautoconfiguration&quot;; // è¿”å›ä¸ä¼šè¢«å¯¼å…¥åˆ° Spring å®¹å™¨ä¸­çš„ç±» Class&lt;?&gt;[] exclude() default &#123;&#125;; // è¿”å›ä¸ä¼šè¢«å¯¼å…¥åˆ° Spring å®¹å™¨ä¸­çš„ç±»å String[] excludeName() default &#123;&#125;;&#125; å¯ä»¥å‘ç°å®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œ Spring ä¸­æœ‰å¾ˆå¤šä»¥ Enable å¼€å¤´çš„æ³¨è§£ï¼Œå…¶ä½œç”¨å°±æ˜¯å€ŸåŠ© @Importæ¥æ”¶é›†å¹¶æ³¨å†Œç‰¹å®šåœºæ™¯ç›¸å…³çš„ Bean ï¼Œå¹¶åŠ è½½åˆ° IOC å®¹å™¨ã€‚@EnableAutoConfigurationå°±æ˜¯å€ŸåŠ©@Importæ¥æ”¶é›†æ‰€æœ‰ç¬¦åˆè‡ªåŠ¨é…ç½®æ¡ä»¶çš„beanå®šä¹‰ï¼Œå¹¶åŠ è½½åˆ°IoCå®¹å™¨ã€‚ ä¸‹é¢ï¼Œå¯¹è¿™ä¸¤ä¸ªæ ¸å¿ƒæ³¨è§£åˆ†åˆ«è®²è§£ : @AutoConfigurationPackageæ³¨è§£ æŸ¥çœ‹@AutoConfigurationPackageæ³¨è§£å†…éƒ¨æºç ä¿¡æ¯ï¼Œæ ¸å¿ƒä»£ç å…·ä½“å¦‚ä¸‹ï¼š 1234567@Target(&#123;ElementType.TYPE&#125;) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @Import(&#123;Registrar.class&#125;) // å¯¼å…¥Registrarä¸­æ³¨å†Œçš„ç»„ä»¶public @interface AutoConfigurationPackage &#123; &#125; ä»ä¸Šè¿°æºç å¯ä»¥çœ‹å‡ºï¼Œ@AutoConfigurationPackageæ³¨è§£çš„åŠŸèƒ½æ˜¯ç”±@Importæ³¨è§£å®ç°çš„ï¼Œå®ƒæ˜¯springæ¡†æ¶çš„åº•å±‚æ³¨è§£ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥æŸä¸ªç»„ä»¶ç±»ï¼Œä¾‹å¦‚@Import(AutoConfigurationPackages.Registrar.class)ï¼Œå®ƒå°±æ˜¯å°†Registrarè¿™ä¸ªç»„ä»¶ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¯æŸ¥çœ‹Registrarç±»ä¸­registerBeanDefinitionsæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯å¯¼å…¥ç»„ä»¶ç±»çš„å…·ä½“å®ç° : ä»ä¸Šè¿°æºç å¯ä»¥çœ‹å‡ºï¼Œåœ¨Registrarç±»ä¸­æœ‰ä¸€ä¸ªregisterBeanDefinitions()æ–¹æ³•ï¼Œä½¿ç”¨Debugæ¨¡å¼å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°é€‰ä¸­çš„éƒ¨åˆ†å°±æ˜¯com.lagouã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ@AutoConfigurationPackageæ³¨è§£çš„ä¸»è¦ä½œç”¨å°±æ˜¯å°†ä¸»ç¨‹åºç±»æ‰€åœ¨åŒ…åŠæ‰€æœ‰å­åŒ…ä¸‹çš„ç»„ä»¶åˆ°æ‰«æåˆ°springå®¹å™¨ä¸­ã€‚ å› æ­¤ åœ¨å®šä¹‰é¡¹ç›®åŒ…ç»“æ„æ—¶ï¼Œè¦æ±‚å®šä¹‰çš„åŒ…ç»“æ„éå¸¸è§„èŒƒï¼Œé¡¹ç›®ä¸»ç¨‹åºå¯åŠ¨ç±»è¦å®šä¹‰åœ¨æœ€å¤–å±‚çš„æ ¹ç›®å½•ä½ç½®ï¼Œç„¶ååœ¨æ ¹ç›®å½•ä½ç½®å†…éƒ¨å»ºç«‹å­åŒ…å’Œç±»è¿›è¡Œä¸šåŠ¡å¼€å‘ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿä¿è¯å®šä¹‰çš„ç±»èƒ½å¤Ÿè¢«ç»„ä»¶æ‰«æå™¨æ‰«æ @Import({AutoConfigurationImportSelector.class})æ³¨è§£ å°† AutoConfigurationImportSelector è¿™ä¸ªç±»å¯¼å…¥åˆ° Spring å®¹å™¨ä¸­ï¼ŒAutoConfigurationImportSelectorå¯ä»¥å¸®åŠ© Springboot åº”ç”¨å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„çš„ @Configurationé…ç½®éƒ½åŠ è½½åˆ°å½“å‰åˆ›å»ºå¹¶ä½¿ç”¨çš„ IOC å®¹å™¨( ApplicationContext )ä¸­ã€‚ ç»§ç»­ç ”ç©¶AutoConfigurationImportSelectorè¿™ä¸ªç±»ï¼Œé€šè¿‡æºç åˆ†æè¿™ä¸ªç±»ä¸­æ˜¯é€šè¿‡selectImportsè¿™ä¸ªæ–¹æ³•å‘Šè¯‰springbootéƒ½éœ€è¦å¯¼å…¥é‚£äº›ç»„ä»¶ï¼š æ·±å…¥ç ”ç©¶loadMetadataæ–¹æ³• AutoConfigurationImportSelectorç±» getAutoConfigurationEntryæ–¹æ³• 123456789101112131415161718192021protected AutoConfigurationEntry getAutoConfigurationEntry(AutoConfigurationMetadata autoConfigurationMetadata, AnnotationMetadata annotationMetadata) &#123; //åˆ¤æ–­EnabledAutoConfigurationæ³¨è§£æœ‰æ²¡æœ‰å¼€å¯,é»˜è®¤å¼€å¯ if (!isEnabled(annotationMetadata)) &#123; return EMPTY_ENTRY; &#125; //è·å¾—æ³¨è§£çš„å±æ€§ä¿¡æ¯ AnnotationAttributes attributes = getAttributes(annotationMetadata); //è·å–é»˜è®¤æ”¯æŒçš„è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨ List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes); //å»é‡ configurations = removeDuplicates(configurations); //å»é™¤ä¸€äº›å¤šä½™çš„é…ç½®ç±»ï¼Œæ ¹æ®EnabledAutoConfiguratioçš„exclusionså±æ€§è¿›è¡Œæ’é™¤ Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes); checkExcludedClasses(configurations, exclusions); configurations.removeAll(exclusions); //æ ¹æ®pomæ–‡ä»¶ä¸­åŠ å…¥çš„ä¾èµ–æ–‡ä»¶ç­›é€‰ä¸­æœ€ç»ˆç¬¦åˆå½“å‰é¡¹ç›®è¿è¡Œç¯å¢ƒå¯¹åº”çš„è‡ªåŠ¨é…ç½®ç±» configurations = filter(configurations, autoConfigurationMetadata); //è§¦å‘è‡ªåŠ¨é…ç½®å¯¼å…¥ç›‘å¬äº‹ä»¶ fireAutoConfigurationImportEvents(configurations, exclusions); return new AutoConfigurationEntry(configurations, exclusions);&#125; æ·±å…¥getCandidateConfigurationsæ–¹æ³• è¿™ä¸ªæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªé‡è¦æ–¹æ³•loadFactoryNamesï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è®©SpringFactoryLoaderå»åŠ è½½ä¸€äº›ç»„ä»¶çš„åå­—ã€‚ ç»§ç»­ç‚¹å¼€loadFactoryæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536public static List&lt;String&gt; loadFactoryNames(Class&lt;?&gt; factoryClass, @Nullable ClassLoader classLoader) &#123; //è·å–å‡ºå…¥çš„é”® String factoryClassName = factoryClass.getName(); return (List)loadSpringFactories(classLoader).getOrDefault(factoryClassName, Collections.emptyList());&#125;private static Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(@Nullable ClassLoader classLoader) &#123; MultiValueMap&lt;String, String&gt; result = (MultiValueMap)cache.get(classLoader); if (result != null) &#123; return result; &#125; else &#123; try &#123; //å¦‚æœç±»åŠ è½½å™¨ä¸ä¸ºnullï¼Œåˆ™åŠ è½½ç±»è·¯å¾„ä¸‹spring.factoriesæ–‡ä»¶ï¼Œå°†å…¶ä¸­è®¾ç½®çš„ é…ç½®ç±»çš„å…¨è·¯å¾„ä¿¡æ¯å°è£… ä¸ºEnumerationç±»å¯¹è±¡ Enumeration&lt;URL&gt; urls = classLoader != null ? classLoader.getResources(&quot;META-INF/spring.factories&quot;) : ClassLoader.getSystemResources(&quot;META-INF/spring.factories&quot;); LinkedMultiValueMap result = new LinkedMultiValueMap(); //å¾ªç¯Enumerationç±»å¯¹è±¡ï¼Œæ ¹æ®ç›¸åº”çš„èŠ‚ç‚¹ä¿¡æ¯ç”ŸæˆPropertieså¯¹è±¡ï¼Œé€šè¿‡ä¼ å…¥çš„ é”®è·å–å€¼ï¼Œåœ¨å°†å€¼åˆ‡å‰²ä¸ºä¸€ä¸ªä¸ªå°çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºArrayï¼Œæ–¹æ³•resulté›†åˆä¸­ while(urls.hasMoreElements()) &#123; URL url = (URL)urls.nextElement(); UrlResource resource = new UrlResource(url); Properties properties = PropertiesLoaderUtils.loadProperties(resource); Iterator var6 = properties.entrySet().iterator(); while(var6.hasNext()) &#123; Entry&lt;?, ?&gt; entry = (Entry)var6.next(); String factoryClassName = ((String)entry.getKey()).trim(); String[] var9 = StringUtils.commaDelimitedListToStringArray((String)entry.getValue()); int var10 = var9.length; for (int var11 = 0; var11 &lt; var10; ++var11) &#123; String factoryName = var9[var11]; result.add(factoryClassName, factoryName.trim()); &#125; &#125; &#125; cache.put(classLoader, result); return result; &#125; &#125;&#125; ä¼šå»è¯»å–ä¸€ä¸ª spring.factories çš„æ–‡ä»¶ï¼Œè¯»å–ä¸åˆ°ä¼šè¡¨è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬ç»§ç»­æ ¹æ®ä¼šçœ‹åˆ°ï¼Œæœ€ç»ˆè·¯å¾„çš„é•¿è¿™æ ·ï¼Œè€Œè¿™ä¸ªæ˜¯springæä¾›çš„ä¸€ä¸ªå·¥å…·ç±» 123public final class SpringFactoriesLoader &#123; public static final String FACTORIES_RESOURCE_LOCATION = &quot;META- INF/spring.factories&quot;; &#125; å®ƒå…¶å®æ˜¯å»åŠ è½½ä¸€ä¸ªå¤–éƒ¨çš„æ–‡ä»¶ï¼Œè€Œè¿™æ–‡ä»¶æ˜¯åœ¨ @EnableAutoConfigurationå°±æ˜¯ä»classpathä¸­æœå¯»META-INF&#x2F;spring.factoriesé…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸­org.springframework.boot.autoconfigure.EnableutoConfigurationå¯¹åº”çš„é…ç½®é¡¹é€šè¿‡åå°„ï¼ˆJavaRefletionï¼‰å®ä¾‹åŒ–ä¸ºå¯¹åº”çš„æ ‡æ³¨äº†@Configurationçš„JavaConfigå½¢å¼çš„é…ç½®ç±»ï¼Œå¹¶åŠ è½½åˆ°IOCå®¹å™¨ä¸­ ä»¥åˆšåˆšçš„é¡¹ç›®ä¸ºä¾‹ï¼Œåœ¨é¡¹ç›®ä¸­åŠ å…¥äº†Webç¯å¢ƒä¾èµ–å¯åŠ¨å™¨ï¼Œå¯¹åº”çš„WebMvcAutoConfigurationè‡ªåŠ¨é…ç½®ç±»å°±ä¼šç”Ÿæ•ˆï¼Œæ‰“å¼€è¯¥è‡ªåŠ¨é…ç½®ç±»ä¼šå‘ç°ï¼Œåœ¨è¯¥é…ç½®ç±»ä¸­é€šè¿‡å…¨æ³¨è§£é…ç½®ç±»çš„æ–¹å¼å¯¹Spring MVCè¿è¡Œæ‰€éœ€ç¯å¢ƒè¿›è¡Œäº†é»˜è®¤é…ç½®ï¼ŒåŒ…æ‹¬é»˜è®¤å‰ç¼€ã€é»˜è®¤åç¼€ã€è§†å›¾è§£æå™¨ã€MVCæ ¡éªŒå™¨ç­‰ã€‚è€Œè¿™äº›è‡ªåŠ¨é…ç½®ç±»çš„æœ¬è´¨æ˜¯ä¼ ç»ŸSpring MVCæ¡†æ¶ä¸­å¯¹åº”çš„XMLé…ç½®æ–‡ä»¶ï¼Œåªä¸è¿‡åœ¨Spring Bootä¸­ä»¥è‡ªåŠ¨é…ç½®ç±»çš„å½¢å¼è¿›è¡Œäº†é¢„å…ˆé…ç½®ã€‚å› æ­¤ï¼Œåœ¨Spring Booté¡¹ç›®ä¸­åŠ å…¥ç›¸å…³ä¾èµ–å¯åŠ¨å™¨åï¼ŒåŸºæœ¬ä¸Šä¸éœ€è¦ä»»ä½•é…ç½®å°±å¯ä»¥è¿è¡Œç¨‹åºï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¿™äº›è‡ªåŠ¨é…ç½®ç±»ä¸­é»˜è®¤çš„é…ç½®è¿›è¡Œæ›´æ”¹ æ€»ç»“ å› æ­¤springbootåº•å±‚å®ç°è‡ªåŠ¨é…ç½®çš„æ­¥éª¤æ˜¯ï¼š springbootåº”ç”¨å¯åŠ¨ @SpringBootApplicationèµ·ä½œç”¨ @EnableAutoConfiguration @AutoConfigurationPackageï¼šè¿™ä¸ªç»„åˆæ³¨è§£ä¸»è¦æ˜¯@Import(AutoConfigurationPackages.Registrar.class)ï¼Œå®ƒé€šè¿‡å°†Registrarç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè€ŒRegistrarç±»ä½œç”¨æ˜¯æ‰«æä¸»é…ç½®ç±»åŒçº§ç›®å½•ä»¥åŠå­åŒ…ï¼Œå¹¶å°†ç›¸åº”çš„ç»„ä»¶å¯¼å…¥åˆ°springbootåˆ›å»ºç®¡ç†çš„å®¹å™¨ä¸­ï¼› @Import(AutoConfigurationImportSelector.class)ï¼šå®ƒé€šè¿‡å°†AutoConfigurationImportSelectorç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼ŒAutoConfigurationImportSelectorç±»ä½œç”¨æ˜¯é€šè¿‡selectImportsæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šä½¿ç”¨å†…éƒ¨å·¥å…·ç±»SpringFactoriesLoaderï¼ŒæŸ¥æ‰¾classpathä¸Šæ‰€æœ‰jaråŒ…ä¸­çš„META\u0002INF&#x2F;spring.factoriesè¿›è¡ŒåŠ è½½ï¼Œå®ç°å°†é…ç½®ç±»ä¿¡æ¯äº¤ç»™SpringFactoryåŠ è½½å™¨è¿›è¡Œä¸€ç³»åˆ—çš„å®¹å™¨åˆ›å»ºè¿‡ç¨‹ 2.2.3 @ComponentScanæ³¨è§£@ComponentScanæ³¨è§£å…·ä½“æ‰«æçš„åŒ…çš„æ ¹è·¯å¾„ç”±Spring Booté¡¹ç›®ä¸»ç¨‹åºå¯åŠ¨ç±»æ‰€åœ¨åŒ…ä½ç½®å†³å®šï¼Œåœ¨æ‰«æè¿‡ç¨‹ä¸­ç”±å‰é¢ä»‹ç»çš„@AutoConfigurationPackageæ³¨è§£è¿›è¡Œè§£æï¼Œä»è€Œå¾—åˆ°Spring Booté¡¹ç›®ä¸»ç¨‹åºå¯åŠ¨ç±»æ‰€åœ¨åŒ…çš„å…·ä½“ä½ç½® æ€»ç»“ï¼š @SpringBootApplication çš„æ³¨è§£çš„åŠŸèƒ½å°±åˆ†æå·®ä¸å¤šäº†ï¼Œ ç®€å•æ¥è¯´å°±æ˜¯ 3 ä¸ªæ³¨è§£çš„ç»„åˆæ³¨è§£ï¼š 123456|- @SpringBootConfiguration |- @Configuration //é€šè¿‡javaConfigçš„æ–¹å¼æ¥æ·»åŠ ç»„ä»¶åˆ°IOCå®¹å™¨ä¸­|- @EnableAutoConfiguration |- @AutoConfigurationPackage //è‡ªåŠ¨é…ç½®åŒ…ï¼Œä¸@ComponentScanæ‰«æåˆ°çš„æ·»åŠ åˆ°IOC |- @Import(AutoConfigurationImportSelector.class) //åˆ°META- INF/spring.factoriesä¸­å®šä¹‰çš„beanæ·»åŠ åˆ°IOCå®¹å™¨ä¸­|- @ComponentScan //åŒ…æ‰«æ ä¸‰ã€SpringBootæ•°æ®è®¿é—®3.1 SpringBootæ•´åˆMybatisMyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼ŒSpring Bootå®˜æ–¹è™½ç„¶æ²¡æœ‰å¯¹MyBatisè¿›è¡Œæ•´åˆï¼Œä½†æ˜¯MyBatiså›¢é˜Ÿè‡ªè¡Œé€‚é…äº†å¯¹åº”çš„å¯åŠ¨å™¨ï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†ä½¿ç”¨MyBatisè¿›è¡Œæ•°æ®çš„æ“ä½œ å› ä¸ºSpring Bootæ¡†æ¶å¼€å‘çš„ä¾¿åˆ©æ€§ï¼Œæ‰€ä»¥å®ç°Spring Bootä¸æ•°æ®è®¿é—®å±‚æ¡†æ¶ï¼ˆä¾‹å¦‚MyBatisï¼‰çš„æ•´åˆéå¸¸ç®€å•ï¼Œä¸»è¦æ˜¯å¼•å…¥å¯¹åº”çš„ä¾èµ–å¯åŠ¨å™¨ï¼Œå¹¶è¿›è¡Œæ•°æ®åº“ç›¸å…³å‚æ•°è®¾ç½®å³å¯ 3.1.1 åŸºç¡€ç¯å¢ƒæ­å»º æ•°æ®å‡†å¤‡ åœ¨MySQLä¸­ï¼Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“springbootdataï¼Œç„¶ååˆ›å»ºäº†ä¸¤ä¸ªè¡¨t_articleå’Œt_commentå¹¶å‘è¡¨ä¸­æ’å…¥æ•°æ®ã€‚å…¶ä¸­è¯„è®ºè¡¨t_commentçš„a_idä¸æ–‡ç« è¡¨t_articleçš„ä¸»é”®idç›¸å…³è” 12345678910111213141516171819202122232425262728# åˆ›å»ºæ•°æ®åº“CREATE DATABASE springbootdata;# é€‰æ‹©ä½¿ç”¨æ•°æ®åº“USE springbootdata;# åˆ›å»ºè¡¨t_articleå¹¶æ’å…¥ç›¸å…³æ•°æ®DROP TABLE IF EXISTS t_article;CREATE TABLE t_article( id int(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;æ–‡ç« id&#x27;, title varchar(200) DEFAULT NULL COMMENT &#x27;æ–‡ç« æ ‡é¢˜&#x27;, content longtext COMMENT &#x27;æ–‡ç« å†…å®¹&#x27;, PRIMARY KEY(id)) ENGINE = InnoDB AUTO_INCREMENT = 2 DEFAULT CHARSET = utf8;INSERT INTO t_article VALUES (&#x27;1&#x27;, &#x27;Spring BootåŸºç¡€å…¥é—¨&#x27;, &#x27;ä»å…¥é—¨åˆ°ç²¾é€šè®²è§£...&#x27;);INSERT INTO t_article VALUES (&#x27;2&#x27;, &#x27;Spring CloudåŸºç¡€å…¥é—¨&#x27;, &#x27;ä»å…¥é—¨åˆ°ç²¾é€šè®² è§£...&#x27;);# åˆ›å»ºè¡¨t_commentå¹¶æ’å…¥ç›¸å…³æ•°æ®DROP TABLE IF EXISTS t_comment;CREATE TABLE t_comment ( id int(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;è¯„è®ºid&#x27;, content longtext COMMENT &#x27;è¯„è®ºå†…å®¹&#x27;, author varchar(200) DEFAULT NULL COMMENT &#x27;è¯„è®ºä½œè€…&#x27;, a_id int(20) DEFAULT NULL COMMENT &#x27;å…³è”çš„æ–‡ç« id&#x27;, PRIMARY KEY (id)) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;INSERT INTO t_comment VALUES (&#x27;1&#x27;, &#x27;å¾ˆå…¨ã€å¾ˆè¯¦ç»†&#x27;, &#x27;lucy&#x27;, &#x27;1&#x27;); INSERT INTO t_comment VALUES (&#x27;2&#x27;, &#x27;èµä¸€ä¸ª&#x27;, &#x27;tom&#x27;, &#x27;1&#x27;); INSERT INTO t_comment VALUES (&#x27;3&#x27;, &#x27;å¾ˆè¯¦ç»†&#x27;, &#x27;eric&#x27;, &#x27;1&#x27;); INSERT INTO t_comment VALUES (&#x27;4&#x27;, &#x27;å¾ˆå¥½ï¼Œéå¸¸è¯¦ç»†&#x27;, &#x27;å¼ ä¸‰&#x27;, &#x27;1&#x27;); INSERT INTO t_comment VALUES (&#x27;5&#x27;, &#x27;å¾ˆä¸é”™&#x27;, &#x27;æå››&#x27;, &#x27;2&#x27;); åˆ›å»ºé¡¹ç›®ï¼Œå¼•å…¥ç›¸åº”çš„å¯åŠ¨å™¨ ç¼–å†™ä¸æ•°æ®åº“è¡¨t_commentå’Œt_articleå¯¹åº”çš„å®ä½“ç±»Commentå’ŒArticle 123456public class Comment &#123; private Integer id; private String content; private String author; private Integer aId; &#125; 12345public class Article &#123; private Integer id; private String title; private String content; &#125; ç¼–å†™é…ç½®æ–‡ä»¶ application.properties 123456# MySQLæ•°æ®åº“è¿æ¥é…ç½®spring: datasource: url: jdbc:mysql://localhost:3306/springbootdata? serverTimezone=UTC&amp;characterEncoding=UTF-8 username: root password: 123456 3.1.2 æ³¨è§£æ–¹å¼æ•´åˆMybatis åˆ›å»ºä¸€ä¸ªå¯¹t_commentè¡¨æ•°æ®æ“ä½œçš„æ¥å£CommentMapper 1234public interface CommentMapper &#123; @Select(&quot;SELECT * FROM t_comment WHERE id =#&#123;id&#125;&quot;) public Comment findById(Integer id); &#125; åœ¨Spring Booté¡¹ç›®å¯åŠ¨ç±»ä¸Šæ·»åŠ @MapperScan(â€œxxxâ€)æ³¨è§£ 1234567@SpringBootApplication @MapperScan(&quot;com.lagou.mapper&quot;) public class Springboot02MybatisApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(Springboot02MybatisApplication.class, args); &#125; &#125; ç¼–å†™æµ‹è¯•æ–¹æ³• 1234567891011@RunWith(SpringRunner.class) @SpringBootTest class SpringbootPersistenceApplicationTests &#123; @Autowired private CommentMapper commentMapper; @Test void contextLoads() &#123; Comment comment = commentMapper.findById(1); System.out.println(comment); &#125;&#125; æ‰“å°ç»“æœ æ§åˆ¶å°ä¸­æŸ¥è¯¢çš„Commentçš„aIdå±æ€§å€¼ä¸ºnullï¼Œæ²¡æœ‰æ˜ å°„æˆåŠŸã€‚è¿™æ˜¯å› ä¸ºç¼–å†™çš„å®ä½“ç±»Commentä¸­ä½¿ç”¨äº†é©¼å³°å‘½åæ–¹å¼å°†t_commentè¡¨ä¸­çš„a_idå­—æ®µè®¾è®¡æˆäº†aIdå±æ€§ï¼Œæ‰€ä»¥æ— æ³•æ­£ç¡®æ˜ å°„æŸ¥è¯¢ç»“æœã€‚ ä¸ºäº†è§£å†³ä¸Šè¿°ç”±äºé©¼å³°å‘½åæ–¹å¼é€ æˆçš„è¡¨å­—æ®µå€¼æ— æ³•æ­£ç¡®æ˜ å°„åˆ°ç±»å±æ€§çš„æƒ…å†µï¼Œå¯ä»¥åœ¨Spring Bootå…¨å±€é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ å¼€å¯é©¼å³°å‘½ååŒ¹é…æ˜ å°„é…ç½®ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ 1234#å¼€å¯é©¼å³°å‘½ååŒ¹é…æ˜ å°„mybatis: configuration: map-underscore-to-camel-case: true å†æ¬¡æ‰“å° 3.1.3 é…ç½®æ–‡ä»¶æ–¹å¼æ•´åˆMybatisç¬¬ä¸€ã€äºŒæ­¥éª¤ä½¿ç”¨Free Mybatis pluginæ’ä»¶ç”Ÿæˆ åˆ›å»ºä¸€ä¸ªç”¨äºå¯¹æ•°æ®åº“è¡¨t_articleæ•°æ®æ“ä½œçš„æ¥å£ArticleMapper 123@Mapper public interface ArticleMapper &#123; public Article selectArticle(Integer id); &#125; åˆ›å»ºXMLæ˜ å°„æ–‡ä»¶ 123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt; &lt;mapper namespace=&quot;com.lagou.mapper.ArticleMapper&quot;&gt; &lt;select id=&quot;selectArticle&quot; resultType=&quot;Article&quot;&gt; select * from Article &lt;/select&gt; &lt;/mapper&gt; é…ç½®XMLæ˜ å°„æ–‡ä»¶è·¯å¾„ åœ¨é¡¹ç›®ä¸­ç¼–å†™çš„XMLæ˜ å°„æ–‡ä»¶ï¼ŒSpring Bootå¹¶æ— ä»çŸ¥æ™“ï¼Œæ‰€ä»¥æ— æ³•æ‰«æåˆ°è¯¥è‡ªå®šä¹‰ç¼–å†™çš„XMLé…ç½®æ–‡ä»¶ï¼Œè¿˜å¿…é¡»åœ¨å…¨å±€é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ MyBatisæ˜ å°„æ–‡ä»¶è·¯å¾„çš„é…ç½®ï¼ŒåŒæ—¶éœ€è¦æ·»åŠ å®ä½“ç±»åˆ«åæ˜ å°„è·¯å¾„ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ 12345mybatis: #é…ç½®MyBatisçš„xmlé…ç½®æ–‡ä»¶è·¯å¾„ mapper-locations: classpath:mapper/*.xml #é…ç½®XMLæ˜ å°„æ–‡ä»¶ä¸­æŒ‡å®šçš„å®ä½“ç±»åˆ«åè·¯å¾„ type-aliases-package: com.lagou.base.pojo ç¼–å†™å•å…ƒæµ‹è¯•è¿›è¡Œæ¥å£æ–¹æ³•æµ‹è¯• 1234567@Autowired private ArticleMapper articleMapper;@Test void contextLoads2() &#123; Article article = articleMapper.selectByPrimaryKey(1); System.out.println(article);&#125; æ‰“å°ç»“æœ 3.2 SpringBootæ•´åˆRedis æ·»åŠ Redisä¾èµ–åŒ… åœ¨é¡¹ç›®çš„pom.xmlä¸­æ·»åŠ å¦‚ä¸‹ï¼š 1234&lt;!-- redisä¾èµ–åŒ… --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; é…ç½®Redisæ•°æ®åº“è¿æ¥ åœ¨application.propertiesä¸­é…ç½®redisæ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617#redisé…ç½® #RedisæœåŠ¡å™¨åœ°å€ spring.redis.host=127.0.0.1 #RedisæœåŠ¡å™¨è¿æ¥ç«¯å£ spring.redis.port=6379#Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰ spring.redis.database=0 #è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ spring.redis.jedis.pool.max-active=50 #è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ spring.redis.jedis.pool.max-wait=3000 #è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥ spring.redis.jedis.pool.max-idle=20 #è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥spring.redis.jedis.pool.min-idle=2 #è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ spring.redis.timeout=5000 ç¼–å†™Redisæ“ä½œå·¥å…·ç±» å°†RedisTemplateå®ä¾‹åŒ…è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œä¾¿äºå¯¹redisè¿›è¡Œæ•°æ®æ“ä½œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.lagou.utils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.stereotype.Component;import java.util.concurrent.TimeUnit;@Component public class RedisUtils &#123; @Autowired private RedisTemplate redisTemplate; /*** è¯»å–ç¼“å­˜ ** @param key * @return */ public Object get(final String key) &#123; return redisTemplate.opsForValue().get(key); &#125; /*** å†™å…¥ç¼“å­˜ */ public Boolean set( String key, Object value) &#123; Boolean result = false; try &#123; redisTemplate.opsForValue().set(key, value,1, TimeUnit.DAYS); result = true; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return result; &#125; /*** æ›´æ–°ç¼“å­˜ */ public Boolean getAndSet(final String key, String value) &#123; Boolean result = false; try &#123; redisTemplate.opsForValue().getAndSet(key, value); result = true; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return result; &#125; /*** åˆ é™¤ç¼“å­˜ */ public Boolean delete(final String key) &#123; Boolean result = false; try &#123; redisTemplate.delete(key); result = true; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return result; &#125;&#125; æµ‹è¯• å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ç±»æ¥å®Œæˆå¯¹redisçš„æ•´åˆ 123456789101112131415161718@RunWith(SpringRunner.class) @SpringBootTest class Springboot02MybatisApplicationTests &#123; @Autowired private RedisUtils redisUtils; @Autowired private CommentMapper commentMapper; @Test public void setRedisData() &#123; redisUtils.set(&quot;article_1&quot;,articleMapper.selectByPrimaryKey(1)); System.out.println(&quot;success&quot;); &#125; @Test public void getRedisData() &#123; Article article = (Article) redisUtils.get(&quot;article_1&quot;); System.out.println(article); &#125;&#125; å››ã€SpringBootè§†å›¾æŠ€æœ¯4.1 æ”¯æŒçš„è§†å›¾æŠ€æœ¯å‰ç«¯æ¨¡æ¿å¼•æ“æŠ€æœ¯çš„å‡ºç°ï¼Œä½¿å‰ç«¯å¼€å‘äººå‘˜æ— éœ€å…³æ³¨åç«¯ä¸šåŠ¡çš„å…·ä½“å®ç°ï¼Œåªå…³æ³¨è‡ªå·±é¡µé¢çš„å‘ˆç°æ•ˆæœå³å¯ï¼Œå¹¶ä¸”è§£å†³äº†å‰ç«¯ä»£ç é”™ç»¼å¤æ‚çš„é—®é¢˜ã€å®ç°äº†å‰åç«¯åˆ†ç¦»å¼€å‘ã€‚Spring Bootæ¡†æ¶å¯¹å¾ˆå¤šå¸¸ç”¨çš„æ¨¡æ¿å¼•æ“æŠ€æœ¯ï¼ˆå¦‚ï¼šFreeMarkerã€Thymeleafã€Mustacheç­‰ï¼‰æä¾›äº†æ•´åˆæ”¯æŒ Spring Bootä¸å¤ªæ”¯æŒå¸¸ç”¨çš„JSPæ¨¡æ¿ï¼Œå¹¶ä¸”æ²¡æœ‰æä¾›å¯¹åº”çš„æ•´åˆé…ç½®ï¼Œè¿™æ˜¯å› ä¸ºä½¿ç”¨åµŒå…¥å¼Servletå®¹å™¨çš„Spring Bootåº”ç”¨ç¨‹åºå¯¹äºJSPæ¨¡æ¿å­˜åœ¨ä¸€äº›é™åˆ¶ ï¼š åœ¨Jettyå’ŒTomcatå®¹å™¨ä¸­ï¼ŒSpring Bootåº”ç”¨è¢«æ‰“åŒ…æˆwaræ–‡ä»¶å¯ä»¥æ”¯æŒJSPã€‚ä½†Spring Booté»˜è®¤ä½¿ç”¨åµŒå…¥å¼Servletå®¹å™¨ä»¥JARåŒ…æ–¹å¼è¿›è¡Œé¡¹ç›®æ‰“åŒ…éƒ¨ç½²ï¼Œè¿™ç§JARåŒ…æ–¹å¼ä¸æ”¯æŒJSPã€‚ å¦‚æœä½¿ç”¨UndertowåµŒå…¥å¼å®¹å™¨éƒ¨ç½²Spring Booté¡¹ç›®ï¼Œä¹Ÿä¸æ”¯æŒJSPæ¨¡æ¿ã€‚ï¼ˆUndertow æ˜¯çº¢å¸½å…¬å¸å¼€å‘çš„ä¸€æ¬¾åŸºäº NIO çš„é«˜æ€§èƒ½ Web åµŒå…¥å¼æœåŠ¡å™¨ï¼‰ Spring Booté»˜è®¤æä¾›äº†ä¸€ä¸ªå¤„ç†è¯·æ±‚è·¯å¾„â€œ&#x2F;errorâ€çš„ç»Ÿä¸€é”™è¯¯å¤„ç†å™¨ï¼Œè¿”å›å…·ä½“çš„å¼‚å¸¸ä¿¡æ¯ã€‚ä½¿ç”¨JSPæ¨¡æ¿æ—¶ï¼Œæ— æ³•å¯¹é»˜è®¤çš„é”™è¯¯å¤„ç†å™¨è¿›è¡Œè¦†ç›–ï¼Œåªèƒ½æ ¹æ®Spring Bootè¦æ±‚åœ¨æŒ‡å®šä½ç½®å®šåˆ¶é”™è¯¯é¡µé¢ã€‚ ä¸Šé¢å¯¹Spring Bootæ”¯æŒçš„æ¨¡æ¿å¼•æ“è¿›è¡Œäº†ä»‹ç»ï¼Œå¹¶æŒ‡å‡ºäº†æ•´åˆJSPæ¨¡æ¿çš„ä¸€äº›é™åˆ¶ã€‚æ¥ä¸‹æ¥ï¼Œå¯¹å…¶ä¸­å¸¸ç”¨çš„Thymeleafæ¨¡æ¿å¼•æ“è¿›è¡Œä»‹ç»ï¼Œå¹¶å®Œæˆä¸Spring Bootæ¡†æ¶çš„æ•´åˆå®ç° 4.2 ThymeleafThymeleafæ˜¯ä¸€ç§ç°ä»£çš„åŸºäºæœåŠ¡å™¨ç«¯çš„Javaæ¨¡æ¿å¼•æ“æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¼˜ç§€çš„é¢å‘Javaçš„XMLã€XHTMLã€HTML5é¡µé¢æ¨¡æ¿ï¼Œå®ƒå…·æœ‰ä¸°å¯Œçš„æ ‡ç­¾è¯­è¨€ã€å‡½æ•°å’Œè¡¨è¾¾å¼ï¼Œåœ¨ä½¿ç”¨Spring Bootæ¡†æ¶è¿›è¡Œé¡µé¢è®¾è®¡æ—¶ï¼Œä¸€èˆ¬ä¼šé€‰æ‹©Thymeleafæ¨¡æ¿ 4.2.1 Thymeleafè¯­æ³• å¸¸ç”¨æ ‡ç­¾ åœ¨HTMLé¡µé¢ä¸Šä½¿ç”¨Thymeleafæ ‡ç­¾ï¼ŒThymeleaf æ ‡ç­¾èƒ½å¤ŸåŠ¨æ€åœ°æ›¿æ¢æ‰é™æ€å†…å®¹ï¼Œä½¿é¡µé¢åŠ¨æ€å±•ç¤ºã€‚ ä¸ºäº†å¤§å®¶æ›´ç›´è§‚çš„è®¤è¯†Thymeleafï¼Œä¸‹é¢å±•ç¤ºä¸€ä¸ªåœ¨HTMLæ–‡ä»¶ä¸­åµŒå…¥äº†Thymeleafçš„é¡µé¢æ–‡ä»¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; href=&quot;../../css/gtvg.css&quot; th:href=&quot;@&#123;/css/gtvg.css&#125;&quot; /&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;p th:text=&quot;$&#123;hello&#125;&quot;&gt;æ¬¢è¿è¿›å…¥Thymeleafçš„å­¦ä¹ &lt;/p&gt; &lt;/body&gt; &lt;/html&gt; ä¸Šè¿°ä»£ç ä¸­ï¼Œâ€œxmlns:th&#x3D;â€","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"RabbitMQè¯¦è§£","slug":"RabbitMQè¯¦è§£","date":"2021-06-22T07:25:09.000Z","updated":"2025-04-17T08:34:52.016Z","comments":true,"path":"2021/06/22/RabbitMQè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2021/06/22/RabbitMQ%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"è¶…é•¿è­¦å‘Šï¼ï¼ï¼å–„ç”¨ç›®å½•ï¼ï¼ï¼ 1. ä»€ä¹ˆæ˜¯RabbitMQ1.1 MQï¼ˆMessage Queueï¼‰æ¶ˆæ¯é˜Ÿåˆ— æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ï¼Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„é‡è¦ç»„ä»¶ ä¸»è¦è§£å†³ï¼Œå¼‚æ­¥å¤„ç†ï¼Œåº”ç”¨è§£è€¦ï¼Œæµé‡å‰Šå³°ç­‰é—®é¢˜ ä»è€Œå®ç°é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œå¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§çš„æ¶æ„ ä½¿ç”¨è¾ƒå¤šçš„æ¶ˆæ¯é˜Ÿåˆ—äº§å“ï¼šRabbitMQï¼ŒRocketMQï¼ŒActiveMQï¼ŒZeroMQï¼ŒKafkaç­‰ 1.1.1 å¼‚æ­¥å¤„ç† ç”¨æˆ·æ³¨å†Œåï¼Œéœ€è¦å‘é€éªŒè¯é‚®ç®±å’Œæ‰‹æœºéªŒè¯ç ï¼› å°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“ï¼Œå‘é€éªŒè¯é‚®ä»¶ï¼Œå‘é€æ‰‹æœºï¼Œä¸‰ä¸ªæ­¥éª¤å…¨éƒ¨å®Œæˆåï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ 1.1.2 åº”ç”¨è§£è€¦ åœºæ™¯ï¼šè®¢å•ç³»ç»Ÿéœ€è¦é€šçŸ¥åº“å­˜ç³»ç»Ÿ å¦‚æœåº“å­˜ç³»ç»Ÿå¼‚å¸¸ï¼Œåˆ™è®¢å•è°ƒç”¨åº“å­˜å¤±è´¥ï¼Œå¯¼è‡´ä¸‹å•å¤±è´¥ åŸå› ï¼šè®¢å•ç³»ç»Ÿå’Œåº“å­˜ç³»ç»Ÿè€¦åˆåº¦å¤ªé«˜ è®¢å•ç³»ç»Ÿï¼šç”¨æˆ·ä¸‹å•åï¼Œè®¢å•ç³»ç»Ÿå®ŒæˆæŒä¹…åŒ–å¤„ç†ï¼Œå°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿”å›ç”¨æˆ·ï¼Œä¸‹å•æˆåŠŸï¼› åº“å­˜ç³»ç»Ÿï¼šè®¢é˜…ä¸‹å•çš„æ¶ˆæ¯ï¼Œè·å–ä¸‹å•ä¿¡æ¯ï¼Œåº“å­˜ç³»ç»Ÿæ ¹æ®ä¸‹å•ä¿¡æ¯ï¼Œå†è¿›è¡Œåº“å­˜æ“ä½œï¼› å‡å¦‚ï¼šä¸‹å•çš„æ—¶å€™ï¼Œåº“å­˜ç³»ç»Ÿä¸èƒ½æ­£å¸¸è¿è¡Œï¼Œä¹Ÿä¸ä¼šå½±å“ä¸‹å•ï¼Œå› ä¸ºä¸‹å•åï¼Œè®¢å•ç³»ç»Ÿå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—å°±ä¸å†å…³å¿ƒå…¶ä»–çš„åç»­æ“ä½œäº†ï¼Œå®ç°äº†è®¢å•ç³»ç»Ÿå’Œåº“å­˜ç³»ç»Ÿçš„åº”ç”¨è§£è€¦ï¼› æ‰€ä»¥è¯´ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯å…¸å‹çš„ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ ç”Ÿäº§è€…ä¸æ–­çš„å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­ç”Ÿäº§æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä¸æ–­çš„ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ å› ä¸ºæ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè€Œä¸”åªå…³å¿ƒæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œæ²¡æœ‰ä¸šåŠ¡é€»è¾‘çš„å…¥ä¾µï¼Œè¿™æ ·å°±å®ç°äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è§£è€¦ 1.1.3 æµé‡å‰Šå³° æŠ¢è´­ï¼Œç§’æ€ç­‰ä¸šåŠ¡ï¼Œé’ˆå¯¹é«˜å¹¶å‘çš„åœºæ™¯ å› ä¸ºæµé‡è¿‡å¤§ï¼Œæš´å¢ä¼šå¯¼è‡´åº”ç”¨æŒ‚æ‰ï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å‰ç«¯åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ— ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶åï¼Œé¦–å…ˆå†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚æœè¶…è¿‡é˜Ÿåˆ—çš„é•¿åº¦ï¼Œå°±æŠ›å¼ƒï¼Œç”©ä¸€ä¸ªç§’æ€ç»“æŸçš„é¡µé¢ï¼ è¯´ç™½äº†ï¼Œç§’æ€æˆåŠŸçš„å°±æ˜¯è¿›å…¥é˜Ÿåˆ—çš„ç”¨æˆ·ï¼› 1.2 èƒŒæ™¯çŸ¥è¯†ä»‹ç»1.2.1 AMQPé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®® å³Advanced Message Queuing Protocolï¼Œä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®® åè®®ï¼šæ•°æ®åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­å¿…é¡»è¦éµå®ˆçš„è§„åˆ™ åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯å¯ä»¥ä¸æ¶ˆæ¯ä¸­é—´ä»¶ä¼ é€’æ¶ˆæ¯ 1.2.2 JMS Java Message Serverï¼ŒJavaæ¶ˆæ¯æœåŠ¡åº”ç”¨ç¨‹åºæ¥å£ï¼Œ ä¸€ç§è§„èŒƒï¼Œå’ŒJDBCæ‹…ä»»çš„è§’è‰²ç±»ä¼¼ æ˜¯ä¸€ä¸ªJavaå¹³å°ä¸­å…³äºé¢å‘æ¶ˆæ¯ä¸­é—´ä»¶çš„APIï¼Œç”¨äºåœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ï¼Œæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥é€šä¿¡ 1.2.3 äºŒè€…çš„è”ç³» JMSæ˜¯å®šä¹‰äº†ç»Ÿä¸€æ¥å£ï¼Œç»Ÿä¸€æ¶ˆæ¯æ“ä½œï¼›AMQPé€šè¿‡åè®®ç»Ÿä¸€æ•°æ®äº¤äº’æ ¼å¼ JMSå¿…é¡»æ˜¯javaè¯­è¨€ï¼›AMQPåªæ˜¯åè®®ï¼Œä¸è¯­è¨€æ— å…³ 1.2.4 Erlangè¯­è¨€ Erlangï¼ˆ[â€˜É™:lÃ¦Å‹]ï¼‰æ˜¯ä¸€ç§é€šç”¨çš„é¢å‘å¹¶å‘çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒç”±ç‘å…¸ç”µä¿¡è®¾å¤‡åˆ¶é€ å•†çˆ±ç«‹ä¿¡æ‰€è¾–çš„CS-Labå¼€å‘ï¼Œç›®çš„æ˜¯åˆ›é€ ä¸€ç§å¯ä»¥åº”å¯¹å¤§è§„æ¨¡å¹¶å‘æ´»åŠ¨çš„ç¼–ç¨‹è¯­è¨€å’Œè¿è¡Œç¯å¢ƒ æœ€åˆæ˜¯ç”±çˆ±ç«‹ä¿¡ä¸“é—¨ä¸ºé€šä¿¡åº”ç”¨è®¾è®¡çš„ï¼Œæ¯”å¦‚æ§åˆ¶äº¤æ¢æœºæˆ–è€…å˜æ¢åè®®ç­‰ï¼Œå› æ­¤éå¸¸é€‚åˆæ„å»ºåˆ†å¸ƒå¼ï¼Œå®æ—¶è½¯å¹¶è¡Œè®¡ç®—ç³»ç»Ÿ Erlangè¿è¡Œæ—¶ç¯å¢ƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œæœ‰ç‚¹åƒJavaçš„è™šæ‹Ÿæœºï¼Œè¿™æ ·ä»£ç ä¸€ç»ç¼–è¯‘ï¼ŒåŒæ ·å¯ä»¥éšå¤„è¿è¡Œ 1.3 ä¸ºä»€ä¹ˆé€‰æ‹©RabbitMQ æˆ‘ä»¬å¼€ç¯‡è¯´æ¶ˆæ¯é˜Ÿåˆ—äº§å“é‚£ä¹ˆå¤šï¼Œä¸ºä»€ä¹ˆååé€‰æ‹©RabbitMQå‘¢ï¼Ÿ å…ˆçœ‹å‘½åï¼šå…”å­è¡ŒåŠ¨éå¸¸è¿…é€Ÿè€Œä¸”ç¹æ®–èµ·æ¥ä¹Ÿéå¸¸ç–¯ç‹‚ï¼Œæ‰€ä»¥å°±æŠŠRabbitç”¨ä½œè¿™ä¸ªåˆ†å¸ƒå¼è½¯ä»¶çš„å‘½åï¼ˆå°±æ˜¯è¿™ä¹ˆç®€å•ï¼‰ Erlangå¼€å‘ï¼ŒAMQPçš„æœ€ä½³æ­æ¡£ï¼Œå®‰è£…éƒ¨ç½²ç®€å•ï¼Œä¸Šæ‰‹é—¨æ§›ä½ ä¼ä¸šçº§æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç»è¿‡å¤§é‡å®è·µè€ƒéªŒçš„é«˜å¯é ï¼Œå¤§é‡æˆåŠŸçš„åº”ç”¨æ¡ˆä¾‹ï¼Œä¾‹å¦‚é˜¿é‡Œã€ç½‘æ˜“ç­‰ä¸€çº¿å¤§å‚éƒ½æœ‰ä½¿ç”¨ æœ‰å¼ºå¤§çš„WEBç®¡ç†é¡µé¢ å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒï¼Œä¸ºæŠ€æœ¯è¿›æ­¥æä¾›åŠ¨åŠ› æ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–ã€æ”¯æŒæ¶ˆæ¯ç¡®è®¤æœºåˆ¶ã€çµæ´»çš„ä»»åŠ¡åˆ†å‘æœºåˆ¶ç­‰ï¼Œæ”¯æŒåŠŸèƒ½éå¸¸ä¸°å¯Œ é›†ç¾¤æ‰©å±•å¾ˆå®¹æ˜“ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å¢åŠ èŠ‚ç‚¹å®ç°æˆå€çš„æ€§èƒ½æå‡ æ€»ç»“ï¼šå¦‚æœä½ å¸Œæœ›ä½¿ç”¨ä¸€ä¸ªå¯é æ€§é«˜ã€åŠŸèƒ½å¼ºå¤§ã€æ˜“äºç®¡ç†çš„æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿé‚£ä¹ˆå°±é€‰æ‹©RabbitMQï¼Œå¦‚æœä½ æƒ³ç”¨ä¸€ä¸ªæ€§èƒ½é«˜ï¼Œä½†å¶å°”ä¸¢ç‚¹æ•°æ®ä¸æ˜¯å¾ˆåœ¨ä¹å¯ä»¥ä½¿ç”¨kafkaæˆ–è€…zeroMQ kafkaå’ŒzeroMQçš„æ€§èƒ½çˆ†è¡¨ï¼Œç»å¯¹å¯ä»¥å‹RabbitMQä¸€å¤´ï¼ 1.4 RabbitMQå„ç»„ä»¶åŠŸèƒ½ Brokerï¼šæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å®ä½“ Virtual Hostï¼šè™šæ‹Ÿä¸»æœº æ ‡è¯†ä¸€æ‰¹äº¤æ¢æœºã€æ¶ˆæ¯é˜Ÿåˆ—å’Œç›¸å…³å¯¹è±¡ï¼Œå½¢æˆçš„æ•´ä½“ è™šæ‹Ÿä¸»æœºæ˜¯å…±äº«ç›¸åŒçš„èº«ä»½è®¤è¯å’ŒåŠ å¯†ç¯å¢ƒçš„ç‹¬ç«‹æœåŠ¡å™¨åŸŸ æ¯ä¸ªvhostæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªminiç‰ˆçš„RabbitMQæœåŠ¡å™¨ï¼Œæ‹¥æœ‰è‡ªå·±çš„é˜Ÿåˆ—ã€äº¤æ¢å™¨ã€ç»‘å®šå’Œæƒé™æœºåˆ¶ vhostæ˜¯AMQPæ¦‚å¿µçš„åŸºç¡€ï¼ŒRabbitMQé»˜è®¤çš„vhostæ˜¯ &#x2F;ï¼Œå¿…é¡»åœ¨é“¾æ¥æ—¶æŒ‡å®š Exchangeï¼šäº¤æ¢å™¨ï¼ˆè·¯ç”±ï¼‰ ç”¨æ¥æ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯å¹¶å°†è¿™äº›æ¶ˆæ¯è·¯ç”±ç»™æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ— Queueï¼šæ¶ˆæ¯é˜Ÿåˆ— ç”¨æ¥ä¿å­˜æ¶ˆæ¯ç›´åˆ°å‘é€ç»™æ¶ˆè´¹è€…ã€‚ å®ƒæ˜¯æ¶ˆæ¯çš„å®¹å™¨ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯çš„ç»ˆç‚¹ã€‚ ä¸€ä¸ªæ¶ˆæ¯å¯æŠ•å…¥ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ã€‚ æ¶ˆæ¯ä¸€ç›´åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œç­‰å¾…æ¶ˆè´¹è€…è¿æ¥åˆ°è¿™ä¸ªé˜Ÿåˆ—å°†å…¶å–èµ°ã€‚ Bandingï¼šç»‘å®šï¼Œç”¨äºæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœºä¹‹é—´çš„å…³è”ã€‚ Channelï¼šé€šé“ï¼ˆä¿¡é“ï¼‰ å¤šè·¯å¤ç”¨è¿æ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ ä¿¡é“æ˜¯å»ºç«‹åœ¨çœŸå®çš„TCPè¿æ¥å†…çš„ è™šæ‹Ÿé“¾æ¥ AMQPå‘½ä»¤éƒ½æ˜¯é€šè¿‡ä¿¡é“å‘å‡ºå»çš„ï¼Œä¸ç®¡æ˜¯å‘å¸ƒæ¶ˆæ¯ã€è®¢é˜…é˜Ÿåˆ—è¿˜æ˜¯æ¥æ”¶æ¶ˆæ¯ï¼Œéƒ½æ˜¯é€šè¿‡ä¿¡ é“å®Œæˆçš„ å› ä¸ºå¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå»ºç«‹å’Œé”€æ¯TCPè¿æ¥éƒ½æ˜¯éå¸¸æ˜‚è´µçš„å¼€é”€ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¿¡é“çš„æ¦‚ å¿µï¼Œç”¨æ¥å¤ç”¨TCPè¿æ¥ã€‚ Connectionï¼šç½‘ç»œè¿æ¥ï¼Œæ¯”å¦‚ä¸€ä¸ªTCPè¿æ¥ã€‚ Publisherï¼šæ¶ˆæ¯çš„ç”Ÿäº§è€…ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‘äº¤æ¢å™¨å‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Consumerï¼šæ¶ˆæ¯çš„æ¶ˆè´¹è€…ï¼Œè¡¨ç¤ºä¸€ä¸ªä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å¾—æ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Messageï¼šæ¶ˆæ¯ æ¶ˆæ¯æ˜¯ä¸å…·åçš„ï¼Œå®ƒæ˜¯ç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆã€‚ æ¶ˆæ¯ä½“æ˜¯ä¸é€æ˜çš„ï¼Œè€Œæ¶ˆæ¯å¤´åˆ™æ˜¯ç”±ä¸€ç³»åˆ—çš„å¯é€‰å±æ€§ç»„æˆï¼Œè¿™äº›å±æ€§åŒ…æ‹¬routing-key(è·¯ç”±é”®)ã€priority(ä¼˜å…ˆçº§)ã€delivery-mode(æ¶ˆæ¯å¯èƒ½éœ€è¦æŒä¹…æ€§å­˜å‚¨[æ¶ˆæ¯çš„è·¯ç”±æ¨¡å¼])ç­‰ã€‚ 2. æ€ä¹ˆç”¨RabbitMQ æƒ³è¦å®‰è£…RabbitMQï¼Œå¿…é¡»å…ˆå®‰è£…erlangè¯­è¨€ç¯å¢ƒï¼Œç±»ä¼¼å®‰è£…tomcatï¼Œå¿…é¡»å…ˆå®‰è£…JDK æŸ¥çœ‹åŒ¹é…çš„ç‰ˆæœ¬ï¼šhttps://www.rabbitmq.com/which-erlang.html 2.1 RabbitMQå®‰è£…å¯åŠ¨erlangä¸‹è½½ï¼šhttps://dl.bintray.com/rabbitmq-erlang/rpm/erlang socatä¸‹è½½ï¼šhttp://repo.iotti.biz/CentOS/7/x86_64/socat-1.7.3.2-5.el7.lux.x86_64.rpm RabbitMQä¸‹è½½ï¼šhttps://www.rabbitmq.com/install-rpm.html#downloads 2.1.1 å®‰è£…1rpm -ivh erlang-21.3.8.16-1.el7.x86_64.rpm 1rpm -ivh socat-1.7.3.2-5.el7.lux.x86_64.rpm 1rpm -ivh rabbitmq-server-3.8.6-1.el7.noarch.rpm 2.1.2 å¯åŠ¨åå°ç®¡ç†æ’ä»¶1[root@localhost opt]# rabbitmq-plugins enable rabbitmq_management 2.1.3 å¯åŠ¨RabbitMQ1234[root@localhost opt]# systemctl start rabbitmq-server.service [root@localhost opt]# systemctl status rabbitmq-server.service [root@localhost opt]# systemctl restart rabbitmq-server.service [root@localhost opt]# systemctl stop rabbitmq-server.service 2.1.4 æŸ¥çœ‹è¿›ç¨‹1[root@localhost opt]# ps -ef | grep rabbitmq 2.1.5 æµ‹è¯• å…³é—­é˜²ç«å¢™ï¼š systemctl stop firewalld æµè§ˆå™¨è¾“å…¥ï¼šhttp://ip:15672 é»˜è®¤å¸å·å¯†ç ï¼šguestï¼Œguestç”¨æˆ·é»˜è®¤ä¸å…è®¸è¿œç¨‹è¿æ¥ åˆ›å»ºè´¦å· 1[root@localhost opt]# rabbitmqctl add_user laosun 123456 è®¾ç½®ç”¨æˆ·è§’è‰² 1[root@localhost opt]# rabbitmqctl set_user_tags laosun administrator è®¾ç½®ç”¨æˆ·æƒé™ 1[root@localhost opt]# rabbitmqctl set_permissions -p &quot;/&quot; laosun &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; æŸ¥çœ‹å½“å‰ç”¨æˆ·å’Œè§’è‰² 1[root@localhost opt]# rabbitmqctl list_users æŸ¥çœ‹å½“å‰ç”¨æˆ·å’Œè§’è‰² 1[root@localhost opt]# rabbitmqctl change_password laosun 123123 ç®¡ç†ç•Œé¢ä»‹ç» overviewï¼šæ¦‚è§ˆ connectionsï¼šæŸ¥çœ‹é“¾æ¥æƒ…å†µ channelsï¼šä¿¡é“ï¼ˆé€šé“ï¼‰æƒ…å†µ Exchangesï¼šäº¤æ¢æœºï¼ˆè·¯ç”±ï¼‰æƒ…å†µï¼Œé»˜è®¤4ç±»7ä¸ª Queuesï¼šæ¶ˆæ¯é˜Ÿåˆ—æƒ…å†µ Adminï¼šç®¡ç†å‘˜åˆ—è¡¨ ç«¯å£ï¼š 5672ï¼šRabbitMQæä¾›ç»™ç¼–ç¨‹è¯­è¨€å®¢æˆ·ç«¯é“¾æ¥çš„ç«¯å£ 15672ï¼šRabbitMQç®¡ç†ç•Œé¢çš„ç«¯å£ 25672ï¼šRabbitMQé›†ç¾¤çš„ç«¯å£ 2.2 RabbitMQå¿«é€Ÿå…¥é—¨2.2.1 ä¾èµ–123456789101112131415161718&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt; &lt;artifactId&gt;amqp-client&lt;/artifactId&gt; &lt;version&gt;5.7.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;1.7.25&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt; &lt;version&gt;3.9&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2.2.2 æ—¥å¿—ä¾èµ–log4jï¼ˆå¯é€‰é¡¹ï¼‰123456789log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.Target=System.out log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %m%n log4j.appender.file=org.apache.log4j.FileAppender log4j.appender.file.File=rebbitmq.log log4j.appender.file.layout=org.apache.log4j.PatternLayout log4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %l %m%n log4j.rootLogger=debug, stdout,file 2.2.3 åˆ›å»ºè¿æ¥å…ˆåˆ›å»ºå¥½è™šæ‹Ÿä¸»æœº 12345678910111213141516171819202122232425262728package util;import com.rabbitmq.client.Connection;import com.rabbitmq.client.ConnectionFactory;/** * @BelongsProject: lagou-rabbitmq * @Author: GuoAn.Sun * @Description: ä¸“é—¨ä¸RabbitMQè·å¾—è¿æ¥ */public class ConnectionUtil &#123; public static Connection getConnection() throws Exception&#123; //1.åˆ›å»ºè¿æ¥å·¥å‚ ConnectionFactory factory = new ConnectionFactory(); //2.åœ¨å·¥å‚å¯¹è±¡ä¸­è®¾ç½®MQçš„è¿æ¥ä¿¡æ¯ï¼ˆip,port,vhost,username,passwordï¼‰ factory.setHost(&quot;192.168.204.141&quot;); factory.setPort(5672); factory.setVirtualHost(&quot;/lagou&quot;); factory.setUsername(&quot;laosun&quot;); factory.setPassword(&quot;123123&quot;); //3.é€šè¿‡å·¥å‚è·å¾—ä¸MQçš„è¿æ¥ Connection connection = factory.newConnection(); return connection; &#125; public static void main(String[] args) throws Exception&#123; Connection connection = getConnection(); System.out.println(&quot;connection = &quot; + connection); connection.close(); &#125;&#125; 2.3 RabbitMQæ¨¡å¼ RabbitMQæä¾›äº†6ç§æ¶ˆæ¯æ¨¡å‹ï¼Œä½†æ˜¯ç¬¬6ç§å…¶å®æ˜¯RPCï¼Œå¹¶ä¸æ˜¯MQï¼Œå› æ­¤æˆ‘ä»¬åªå­¦ä¹ å‰5ç§ åœ¨çº¿æ‰‹å†Œï¼šhttps://www.rabbitmq.com/getstarted.html 5ç§æ¶ˆæ¯æ¨¡å‹ï¼Œå¤§ä½“åˆ†ä¸ºä¸¤ç±»ï¼š 1å’Œ2å±äºç‚¹å¯¹ç‚¹ 3ã€4ã€5å±äºå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆä¸€å¯¹å¤šï¼‰ ç‚¹å¯¹ç‚¹æ¨¡å¼ï¼šP2Pï¼ˆpoint to pointï¼‰æ¨¡å¼åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼š æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆqueueï¼‰ï¼Œå‘é€è€…ï¼ˆsenderï¼‰ï¼Œæ¥æ”¶è€…ï¼ˆreceiverï¼‰ æ¯ä¸ªæ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—ä¸­ï¼Œæ¥æ”¶è€…ä»ä¸­è·å¾—æ¶ˆæ¯ é˜Ÿåˆ—ä¸­ä¿ç•™è¿™äº›æ¶ˆæ¯ï¼Œç›´åˆ°ä»–ä»¬è¢«æ¶ˆè´¹æˆ–è¶…æ—¶ ç‰¹ç‚¹ï¼š æ¯ä¸ªæ¶ˆæ¯åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¸€æ—¦æ¶ˆè´¹ï¼Œæ¶ˆæ¯å°±ä¸åœ¨é˜Ÿåˆ—ä¸­äº† å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´æ²¡æœ‰ä¾èµ–æ€§ï¼Œå‘é€è€…å‘é€å®Œæˆï¼Œä¸ç®¡æ¥æ”¶è€…æ˜¯å¦è¿è¡Œï¼Œéƒ½ä¸ä¼šå½±å“æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼ˆæˆ‘ç»™ä½ å‘å¾®ä¿¡ï¼Œä¸ç®¡ä½ çœ‹ä¸çœ‹æ‰‹æœºï¼Œåæ­£æˆ‘å‘å®Œäº†ï¼‰ æ¥æ”¶è€…æˆåŠŸæ¥æ”¶æ¶ˆæ¯ä¹‹åéœ€å‘å¯¹è±¡åº”ç­”æˆåŠŸï¼ˆç¡®è®¤ï¼‰ å¦‚æœå¸Œæœ›å‘é€çš„æ¯ä¸ªæ¶ˆæ¯éƒ½ä¼šè¢«æˆåŠŸå¤„ç†ï¼Œé‚£éœ€è¦P2P å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼špublishï¼ˆPubï¼‰&#x2F;subscribeï¼ˆSubï¼‰ pub&#x2F;subæ¨¡å¼åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼šäº¤æ¢æœºï¼ˆexchangeï¼‰ï¼Œå‘å¸ƒè€…ï¼ˆpublisherï¼‰ï¼Œè®¢é˜…è€…ï¼ˆsubcriberï¼‰ å¤šä¸ªå‘å¸ƒè€…å°†æ¶ˆæ¯å‘é€äº¤æ¢æœºï¼Œç³»ç»Ÿå°†è¿™äº›æ¶ˆæ¯ä¼ é€’ç»™å¤šä¸ªè®¢é˜…è€… ç‰¹ç‚¹ï¼š æ¯ä¸ªæ¶ˆæ¯å¯ä»¥æœ‰å¤šä¸ªè®¢é˜…è€… å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´åœ¨æ—¶é—´ä¸Šæœ‰ä¾èµ–ï¼Œå¯¹äºæŸä¸ªäº¤æ¢æœºçš„è®¢é˜…è€…ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªè®¢é˜…åï¼Œæ‰èƒ½æ¶ˆè´¹å‘å¸ƒè€…çš„æ¶ˆæ¯ ä¸ºäº†æ¶ˆè´¹æ¶ˆæ¯ï¼Œè®¢é˜…è€…å¿…é¡»ä¿æŒè¿è¡ŒçŠ¶æ€ï¼›ç±»ä¼¼äºï¼Œçœ‹ç”µè§†ç›´æ’­ã€‚ å¦‚æœå¸Œæœ›å‘é€çš„æ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…å¤„ç†ï¼Œå¯é‡‡ç”¨æœ¬æ¨¡å¼ 2.3.1 ç®€å•æ¨¡å¼ä¸‹é¢å¼•ç”¨å®˜ç½‘çš„ä¸€æ®µä»‹ç»ï¼š Introduction RabbitMQ is a message broker: it accepts and forwards messages. You can think about it as a post office: when you put the mail that you want posting in a post box, you can be surethat Mr. or Ms. Mailperson will eventually deliver the mail to your recipient. In this analogy,RabbitMQ is a post box, a post office and a postman. è¯‘æ–‡ï¼šRabbitMQæ˜¯ä¸€ä¸ªæ¶ˆæ¯ä»£ç†:å®ƒæ¥æ”¶å’Œè½¬å‘æ¶ˆæ¯ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªé‚®å±€:å½“ä½ æŠŠä½ æƒ³è¦å¯„çš„é‚®ä»¶æ”¾åˆ°ä¸€ä¸ªé‚®ç®±é‡Œï¼Œä½ å¯ä»¥ç¡®å®šé‚®é€’å‘˜å…ˆç”Ÿæˆ–å¥³å£«æœ€ç»ˆä¼šæŠŠé‚®ä»¶é€åˆ°ä½ çš„æ”¶ä»¶äººé‚£é‡Œã€‚åœ¨è¿™ä¸ªç±»æ¯”ä¸­ï¼ŒRabbitMQæ˜¯ä¸€ä¸ªé‚®ç®±ã€ä¸€ä¸ªé‚®å±€å’Œä¸€ä¸ªé‚®é€’å‘˜ã€‚ RabbitMQæœ¬èº«åªæ˜¯æ¥æ”¶ï¼Œå­˜å‚¨å’Œè½¬å‘æ¶ˆæ¯ï¼Œå¹¶ä¸ä¼šå¯¹ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼ ç±»ä¼¼é‚®å±€ï¼Œå¤„ç†ä¿¡ä»¶çš„åº”è¯¥æ˜¯æ”¶ä»¶äººè€Œä¸æ˜¯é‚®å±€ï¼ ç”Ÿäº§è€…P 123456789101112131415161718192021222324252627282930313233343536373839package simplest;import com.rabbitmq.client.Channel;import com.rabbitmq.client.Connection;import util.ConnectionUtil;/** * @BelongsProject: lagou-rabbitmq * @Author: GuoAn.Sun * @Description: æ¶ˆæ¯ç”Ÿäº§è€… */public class Sender &#123; public static void main(String[] args) throws Exception &#123; String msg = &quot;è€å­™ï¼šHello,RabbitMQ!&quot;; // 1.è·å¾—è¿æ¥ Connection connection = ConnectionUtil.getConnection(); // 2.åœ¨è¿æ¥ä¸­åˆ›å»ºé€šé“ï¼ˆä¿¡é“ï¼‰ Channel channel = connection.createChannel(); // 3.åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—(1,2,3,4,5) /* å‚æ•°1:é˜Ÿåˆ—çš„åç§° å‚æ•°2:é˜Ÿåˆ—ä¸­çš„æ•°æ®æ˜¯å¦æŒä¹…åŒ– å‚æ•°3:æ˜¯å¦æ’å¤–ï¼ˆæ˜¯å¦æ”¯æŒæ‰©å±•ï¼Œå½“å‰é˜Ÿåˆ—åªèƒ½è‡ªå·±ç”¨ï¼Œä¸èƒ½ç»™åˆ«äººç”¨ï¼‰ å‚æ•°4:æ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼ˆå½“é˜Ÿåˆ—çš„è¿æ¥æ•°ä¸º0æ—¶ï¼Œé˜Ÿåˆ—ä¼šé”€æ¯ï¼Œä¸ç®¡é˜Ÿåˆ—æ˜¯å¦è¿˜å­˜ä¿å­˜æ•°æ®ï¼‰ å‚æ•°5:é˜Ÿåˆ—å‚æ•°ï¼ˆæ²¡æœ‰å‚æ•°ä¸ºnullï¼‰ */ channel.queueDeclare(&quot;queue1&quot;,false,false,false,null); // 4.å‘æŒ‡å®šçš„é˜Ÿåˆ—å‘é€æ¶ˆæ¯(1,2,3,4) /* å‚æ•°1:äº¤æ¢æœºåç§°ï¼Œå½“å‰æ˜¯ç®€å•æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯P2Pæ¨¡å¼ï¼Œæ²¡æœ‰äº¤æ¢æœºï¼Œæ‰€ä»¥åç§°ä¸º&quot;&quot; å‚æ•°2:ç›®æ ‡é˜Ÿåˆ—çš„åç§° å‚æ•°3:è®¾ç½®æ¶ˆæ¯çš„å±æ€§ï¼ˆæ²¡æœ‰å±æ€§åˆ™ä¸ºnullï¼‰ å‚æ•°4:æ¶ˆæ¯çš„å†…å®¹(åªæ¥æ”¶å­—èŠ‚æ•°ç»„) */ channel.basicPublish(&quot;&quot;,&quot;queue1&quot;,null,msg.getBytes()); System.out.println(&quot;å‘é€ï¼š&quot; + msg); // 5.é‡Šæ”¾èµ„æº channel.close(); connection.close(); &#125;&#125; å¯åŠ¨ç”Ÿäº§è€…ï¼Œå³å¯å‰å¾€ç®¡ç†ç«¯æŸ¥çœ‹é˜Ÿåˆ—ä¸­çš„ä¿¡æ¯ï¼Œä¼šæœ‰ä¸€æ¡ä¿¡æ¯æ²¡æœ‰å¤„ç†å’Œç¡®è®¤ æ¶ˆè´¹è€…C 1234567891011121314151617181920212223242526272829package simplest;import com.rabbitmq.client.*;import util.ConnectionUtil;import java.io.IOException;/** * @BelongsProject: lagou-rabbitmq * @Author: GuoAn.Sun * @Description: æ¶ˆæ¯æ¥æ”¶è€… */public class Recer &#123; public static void main(String[] args) throws Exception &#123; // 1.è·å¾—è¿æ¥ Connection connection = ConnectionUtil.getConnection(); // 2.è·å¾—é€šé“ï¼ˆä¿¡é“ï¼‰ Channel channel = connection.createChannel(); // 3.ä»ä¿¡é“ä¸­è·å¾—æ¶ˆæ¯ DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override //äº¤ä»˜å¤„ç†ï¼ˆæ”¶ä»¶äººä¿¡æ¯ï¼ŒåŒ…è£¹ä¸Šçš„å¿«é€’æ ‡ç­¾ï¼Œåè®®çš„é…ç½®ï¼Œæ¶ˆæ¯ï¼‰ public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; // bodyå°±æ˜¯ä»é˜Ÿåˆ—ä¸­è·å–çš„æ¶ˆæ¯ String s = new String(body); System.out.println(&quot;æ¥æ”¶ = &quot; + s); &#125; &#125;; // 4.ç›‘å¬é˜Ÿåˆ— true:è‡ªåŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;queue1&quot;, true,consumer); &#125;&#125; å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå‰å¾€ç®¡ç†ç«¯æŸ¥çœ‹é˜Ÿåˆ—ä¸­çš„ä¿¡æ¯ï¼Œæ‰€æœ‰ä¿¡æ¯éƒ½å·²ç»å¤„ç†å’Œç¡®è®¤ï¼Œæ˜¾ç¤º0 æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ACK é€šè¿‡åˆšæ‰çš„æ¡ˆä¾‹å¯ä»¥çœ‹å‡ºï¼Œæ¶ˆæ¯ä¸€æ—¦è¢«æ¶ˆè´¹ï¼Œæ¶ˆæ¯å°±ä¼šç«‹åˆ»ä»é˜Ÿåˆ—ä¸­ç§»é™¤ RabbitMQå¦‚ä½•å¾—çŸ¥æ¶ˆæ¯è¢«æ¶ˆè´¹è€…æ¥æ”¶ï¼Ÿ å¦‚æœæ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯åï¼Œè¿˜æ²¡æ‰§è¡Œæ“ä½œå°±æŠ›å¼‚å¸¸å®•æœºå¯¼è‡´æ¶ˆè´¹å¤±è´¥ï¼Œä½†æ˜¯RabbitMQæ— ä»å¾—çŸ¥ï¼Œè¿™æ ·æ¶ˆæ¯å°±ä¸¢å¤±äº† å› æ­¤ï¼ŒRabbitMQæœ‰ä¸€ä¸ªACKæœºåˆ¶ï¼Œå½“æ¶ˆè´¹è€…è·å–æ¶ˆæ¯åï¼Œä¼šå‘RabbitMQå‘é€å›æ‰§ACKï¼Œå‘ŠçŸ¥æ¶ˆæ¯å·²ç»è¢«æ¥æ”¶ ACKï¼š(Acknowledge characterï¼‰å³æ˜¯ç¡®è®¤å­—ç¬¦ï¼Œåœ¨æ•°æ®é€šä¿¡ä¸­ï¼Œæ¥æ”¶ç«™å‘ç»™å‘é€ç«™çš„ä¸€ç§ä¼ è¾“ç±»æ§åˆ¶å­—ç¬¦ã€‚è¡¨ç¤ºå‘æ¥çš„æ•°æ®å·²ç¡®è®¤æ¥æ”¶æ— è¯¯æˆ‘ä»¬åœ¨ä½¿ç”¨httpè¯·æ±‚æ—¶ï¼Œhttpçš„çŠ¶æ€ç 200å°±æ˜¯å‘Šè¯‰æˆ‘ä»¬æœåŠ¡å™¨æ‰§è¡ŒæˆåŠŸ æ•´ä¸ªè¿‡ç¨‹å°±æƒ³å¿«é€’å‘˜å°†åŒ…è£¹é€åˆ°ä½ æ‰‹é‡Œï¼Œå¹¶ä¸”éœ€è¦ä½ çš„ç­¾å­—ï¼Œå¹¶æ‹ç…§å›æ‰§ ä¸è¿‡è¿™ç§å›æ‰§ACKåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š è‡ªåŠ¨ACKï¼šæ¶ˆæ¯æ¥æ”¶åï¼Œæ¶ˆè´¹è€…ç«‹åˆ»è‡ªåŠ¨å‘é€ACKï¼ˆå¿«é€’æ”¾åœ¨å¿«é€’æŸœï¼‰ æ‰‹åŠ¨ACKï¼šæ¶ˆæ¯æ¥æ”¶åï¼Œä¸ä¼šå‘é€ACKï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼ˆå¿«é€’å¿…é¡»æœ¬äººç­¾æ”¶ï¼‰ ä¸¤ç§æƒ…å†µå¦‚ä½•é€‰æ‹©ï¼Œéœ€è¦çœ‹æ¶ˆæ¯çš„é‡è¦æ€§ï¼š å¦‚æœæ¶ˆæ¯ä¸å¤ªé‡è¦ï¼Œä¸¢å¤±ä¹Ÿæ²¡æœ‰å½±å“ï¼Œè‡ªåŠ¨ACKä¼šæ¯”è¾ƒæ–¹ä¾¿ å¦‚æœæ¶ˆæ¯éå¸¸é‡è¦ï¼Œæœ€å¥½æ¶ˆè´¹å®Œæˆæ‰‹åŠ¨ACKï¼Œå¦‚æœè‡ªåŠ¨ACKæ¶ˆè´¹åï¼ŒRabbitMQå°±ä¼šæŠŠæ¶ˆæ¯ä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œå¦‚æœæ­¤æ—¶æ¶ˆè´¹è€…æŠ›å¼‚å¸¸å®•æœºï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±æ°¸ä¹…ä¸¢å¤±äº† ä¿®æ”¹æ‰‹åŠ¨æ¶ˆæ¯ç¡®è®¤ 12// falseï¼šæ‰‹åŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;queue1&quot;, false, consumer); ç»“æœå¦‚ä¸‹ è§£å†³é—®é¢˜ 12345678910111213141516171819202122public class RecerByACK &#123; public static void main(String[] args) throws Exception &#123; // 1.è·å¾—è¿æ¥ Connection connection = ConnectionUtil.getConnection(); // 2.è·å¾—é€šé“ï¼ˆä¿¡é“ï¼‰ final Channel channel = connection.createChannel(); // 3.ä»ä¿¡é“ä¸­è·å¾—æ¶ˆæ¯ DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override //äº¤ä»˜å¤„ç†ï¼ˆæ”¶ä»¶äººä¿¡æ¯ï¼ŒåŒ…è£¹ä¸Šçš„å¿«é€’æ ‡ç­¾ï¼Œåè®®çš„é…ç½®ï¼Œæ¶ˆæ¯ï¼‰ public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; // bodyå°±æ˜¯ä»é˜Ÿåˆ—ä¸­è·å–çš„æ¶ˆæ¯ String s = new String(body); System.out.println(&quot;æ¥æ”¶ = &quot; + s); // æ‰‹åŠ¨ç¡®è®¤ï¼ˆæ”¶ä»¶äººä¿¡æ¯ï¼Œæ˜¯å¦åŒæ—¶ç¡®è®¤å¤šä¸ªæ¶ˆæ¯ï¼‰ channel.basicAck(envelope.getDeliveryTag(),false); &#125; &#125; ; // 4.ç›‘å¬é˜Ÿåˆ—ï¼Œfalse:æ‰‹åŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;queue1&quot;, false,consumer); &#125;&#125; 2.3.2 å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ ä¹‹å‰æˆ‘ä»¬å­¦ä¹ çš„ç®€å•æ¨¡å¼ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…æ¥å¤„ç†æ¶ˆæ¯ï¼Œå¦‚æœç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯è¿‡å¿«è¿‡å¤šï¼Œè€Œæ¶ˆè´¹è€…çš„èƒ½åŠ›æœ‰é™ï¼Œå°±ä¼šäº§ç”Ÿæ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­å †ç§¯ï¼ˆç”Ÿæ´»ä¸­çš„æ»é”€ï¼‰ ä¸€ä¸ªçƒ§çƒ¤å¸ˆå‚…ï¼Œä¸€æ¬¡çƒ¤50æ”¯ç¾Šè‚‰ä¸²ï¼Œå°±ä¸€ä¸ªäººåƒçš„è¯ï¼Œçƒ¤å¥½çš„è‚‰ä¸²ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ å¤šæ‹›æ½å®¢äººè¿›è¡Œæ¶ˆè´¹å³å¯ã€‚å½“æˆ‘ä»¬è¿è¡Œè®¸å¤šæ¶ˆè´¹è€…ç¨‹åºæ—¶ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼šè¢«ä¼—å¤šæ¶ˆè´¹è€…å…±äº«ï¼Œä½†å…¶ä¸­æŸä¸€ä¸ªæ¶ˆæ¯åªä¼šè¢«ä¸€ä¸ªæ¶ˆè´¹è€…è·å–ï¼ˆ100æ”¯è‚‰ä¸²20ä¸ªäººåƒï¼Œä½†æ˜¯å…¶ä¸­çš„æŸæ”¯è‚‰ä¸²åªèƒ½è¢«ä¸€ä¸ªäººåƒï¼‰ 2.3.2.1 ç”Ÿäº§è€…P123456789101112131415public class MessageSender &#123; public static void main(String[] args) throws Exception&#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ—ï¼ˆæ­¤å¤„ä¸ºç”Ÿäº§è€…ï¼Œåˆ›å»ºé˜Ÿåˆ—ï¼‰æ³¨æ˜å‡ºé¤å£ä½ç½®ï¼Œé€šçŸ¥å¤§å®¶æ¥æ’é˜Ÿ channel.queueDeclare(&quot;test_work_queue&quot;,false,false,false,null); for (int i = 1;i&lt;=100;i++) &#123; String msg = &quot;ç¾Šè‚‰ä¸² --&gt; &quot;+i; channel.basicPublish(&quot;&quot;, &quot;test_work_queue&quot;, null, msg.getBytes()); System.out.println(&quot;å¸ˆå‚…çƒ¤å¥½ï¼š&quot; + msg); &#125; channel.close(); connection.close(); &#125;&#125; 2.3.2.2 æ¶ˆè´¹è€…112345678910111213141516171819202122232425public class MessageReceiver1 &#123; static int i = 1; // è®°å½•æ‰§è¡Œæ¬¡æ•° public static void main(String[] args) throws IOException, TimeoutException &#123; Connection connection = ConnectionUtil.getConnection(); final Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ—ï¼ˆæ­¤å¤„ä¸ºæ¶ˆè´¹è€…ï¼Œä¸æ˜¯å£°æ˜åˆ›å»ºé˜Ÿåˆ—ï¼Œè€Œä¸”è·å–ï¼ŒäºŒè€…ä»£ç ç›¸åŒï¼‰å‡ºé¤å£æ’é˜Ÿ channel.queueDeclare(&quot;test_work_queue&quot;,false,false,false,null); Consumer consumer = new DefaultConsumer(channel) &#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String msg = new String(body); System.out.println(&quot;ã€é¡¾å®¢1ã€‘åƒæ‰ &quot; + msg+&quot; ! å…±åƒã€&quot;+i++ +&quot;ã€‘ä¸²&quot;); // æ’¸ä¸€ä¼šï¼Œæœ‰å»¶è¿Ÿ try &#123; Thread.sleep(200); &#125; catch (InterruptedException e)&#123; &#125; channel.basicAck(envelope.getDeliveryTag(),false); &#125; &#125;; channel.basicConsume(&quot;test_work_queue&quot;, false, consumer); &#125;&#125; 2.3.2.3 æ¶ˆè´¹è€…21234567891011121314151617181920212223242526public class MessageReceiver2 &#123; static int i = 1; // è®°å½•æ‰§è¡Œæ¬¡æ•° public static void main(String[] args) throws IOException, TimeoutException &#123; Connection connection = ConnectionUtil.getConnection(); final Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ—ï¼ˆæ­¤å¤„ä¸ºæ¶ˆè´¹è€…ï¼Œä¸æ˜¯å£°æ˜åˆ›å»ºé˜Ÿåˆ—ï¼Œè€Œä¸”è·å–ï¼ŒäºŒè€…ä»£ç ç›¸åŒï¼‰å‡ºé¤å£æ’é˜Ÿ channel.queueDeclare(&quot;test_work_queue&quot;,false,false,false,null); Consumer consumer = new DefaultConsumer(channel) &#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String msg = new String(body); System.out.println(&quot;ã€é¡¾å®¢2ã€‘åƒæ‰ &quot; + msg+&quot; ! å…±åƒã€&quot;+i++ +&quot;ã€‘ä¸²&quot;); // æ’¸ä¸€ä¼šï¼Œæœ‰å»¶è¿Ÿ try &#123; Thread.sleep(200); &#125; catch (InterruptedException e)&#123; &#125; channel.basicAck(envelope.getDeliveryTag(),false); &#125; &#125; ; channel.basicConsume(&quot;test_work_queue&quot;, false, consumer); &#125;&#125; å…ˆè¿è¡Œ2ä¸ªæ¶ˆè´¹è€…ï¼Œæ’é˜Ÿç­‰å€™æ¶ˆè´¹ï¼ˆå–é¤ï¼‰ï¼Œå†è¿è¡Œç”Ÿäº§è€…å¼€å§‹ç”Ÿäº§æ¶ˆæ¯ï¼ˆçƒ¤è‚‰ä¸²ï¼‰ è™½ç„¶ä¸¤ä¸ªæ¶ˆè´¹è€…çš„æ¶ˆè´¹é€Ÿåº¦ä¸ä¸€è‡´ï¼ˆçº¿ç¨‹ä¼‘çœ æ—¶é—´ï¼‰ï¼Œä½†æ˜¯æ¶ˆè´¹çš„æ•°é‡å´æ˜¯ä¸€è‡´çš„ï¼Œå„æ¶ˆè´¹50ä¸ªæ¶ˆæ¯ ä¾‹å¦‚ï¼šå·¥ä½œä¸­ï¼ŒAåŒå­¦ç¼–ç é€Ÿç‡é«˜ï¼ŒBåŒå­¦ç¼–ç é€Ÿç‡ä½ï¼Œä¸¤ä¸ªäººåŒæ—¶å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼ŒA10å¤©å®Œæˆï¼ŒB30å¤©å®Œæˆï¼ŒAå®Œæˆè‡ªå·±çš„ç¼–ç éƒ¨åˆ†ï¼Œå°±æ— æ‰€äº‹äº‹äº†ï¼Œç­‰ç€Bå®Œæˆå°±å¯ä»¥äº†ï¼Œè¿™æ ·æ˜¯ä¸å¯ä»¥çš„ï¼Œåº”è¯¥éµå¾ªâ€œèƒ½è€…å¤šåŠ³â€ æ•ˆç‡é«˜çš„å¤šå¹²ç‚¹ï¼Œæ•ˆç‡ä½çš„å°‘å¹²ç‚¹ çœ‹ä¸‹é¢å®˜ç½‘æ˜¯å¦‚ä½•ç»™å‡ºè§£å†³æ€è·¯çš„ï¼š å…¬å¹³çš„åˆ†é… æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°åˆ†æ´¾ä»ç„¶ä¸èƒ½å®Œå…¨æŒ‰ç…§æˆ‘ä»¬çš„è¦æ±‚å·¥ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå‘˜å·¥ï¼Œå½“æ‰€æœ‰å¥‡æ€ªçš„æ¶ˆæ¯éƒ½å¾ˆé‡ï¼Œç”šè‡³æ¶ˆæ¯éƒ½å¾ˆè½»æ—¶ï¼Œä¸€ä¸ªå‘˜å·¥ä¼šä¸€ç›´å¾ˆå¿™ï¼Œè€Œå¦ä¸€ä¸ªäººå‡ ä¹ä»€ä¹ˆå·¥ä½œéƒ½ä¸åšã€‚å¥½å§ï¼ŒRabbitMQå¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œå®ƒä»ç„¶ä¼šå‡åŒ€åœ°åˆ†æ´¾æ¶ˆæ¯ã€‚ è¿™æ˜¯å› ä¸ºRabbitMQåªåœ¨æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—æ—¶å‘é€æ¶ˆæ¯ã€‚å®ƒä¸æŸ¥çœ‹ç”¨æˆ·æœªç¡®è®¤æ¶ˆæ¯çš„æ•°é‡ã€‚å®ƒåªæ˜¯ç›²ç›®åœ°å°†æ¯æ¡ç¬¬nä¸ªæ¶ˆæ¯åˆ†æ´¾ç»™ç¬¬nä¸ªæ¶ˆè´¹è€…ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¾ç½®ä¸ºprefetchCount &#x3D; 1çš„basicQosæ–¹æ³•ã€‚è¿™å‘Šè¯‰ RabbitMQä¸€æ¬¡ä¸è¦ç»™ä¸€ä¸ªworkerå‘é€ä¸€æ¡ä»¥ä¸Šçš„æ¶ˆæ¯ã€‚æˆ–è€…ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨workerå¤„ç†å¹¶ç¡®è®¤å‰ä¸€ä¸ªæ¶ˆæ¯ä¹‹å‰ï¼Œä¸è¦å‘å®ƒå‘é€æ–°æ¶ˆæ¯ã€‚ç›¸åï¼Œå®ƒå°†æŠŠå®ƒåˆ†æ´¾åˆ°ä¸‹ä¸€ä¸ªä¸ç¹å¿™çš„workerã€‚ 1234// å£°æ˜é˜Ÿåˆ—ï¼ˆæ­¤å¤„ä¸ºæ¶ˆè´¹è€…ï¼Œä¸æ˜¯å£°æ˜åˆ›å»ºé˜Ÿåˆ—ï¼Œè€Œä¸”è·å–ï¼ŒäºŒè€…ä»£ç ç›¸åŒï¼‰å‡ºé¤å£æ’é˜Ÿ channel.queueDeclare(&quot;test_work_queue&quot;,false,false,false,null); // å¯ä»¥ç†è§£ä¸ºï¼šå¿«é€’ä¸€ä¸ªä¸€ä¸ªé€ï¼Œé€å®Œä¸€ä¸ªå†é€ä¸‹ä¸€ä¸ªï¼Œé€Ÿåº¦å¿«çš„é€ä»¶å°±å¤š channel.basicQos(1); èƒ½è€…å¤šåŠ³å¿…é¡»è¦é…åˆæ‰‹åŠ¨çš„ACKæœºåˆ¶æ‰ç”Ÿæ•ˆ 2.3.2.4 é¢è¯•é¢˜ï¼šé¿å…æ¶ˆæ¯å †ç§¯ï¼Ÿ workqueueï¼Œå¤šä¸ªæ¶ˆè´¹è€…ç›‘å¬åŒä¸€ä¸ªé˜Ÿåˆ— æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œé€šè¿‡çº¿ç¨‹æ± ï¼Œå¼‚æ­¥æ¶ˆè´¹ 2.3.3 å‘å¸ƒè®¢é˜…æ¨¡å¼çœ‹å®˜ç½‘ï¼š Publish&#x2F;Subscribe In the previous tutorial we created a work queue. The assumption behind a work queueis that each task is delivered to exactly one worker. In this part weâ€™ll do something completely different â€“ weâ€™ll deliver a message to multiple consumers. This pattern is known as â€œpublish&#x2F;subscribeâ€. To illustrate the pattern, weâ€™re going to build a simple logging system. It will consist of two programs â€“ the first will emit log messages and the second will receive and print them. In our logging system every running copy of the receiver program will get the messages.That way weâ€™ll be able to run one receiver and direct the logs to disk; and at the same time weâ€™ll be able to run another receiver and see the logs on the screen. Essentially, published log messages are going to be broadcast to all the receivers. å‘å¸ƒ-è®¢é˜… åœ¨ä¸Šä¸€ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—ã€‚å·¥ä½œé˜Ÿåˆ—èƒŒåçš„å‡è®¾æ˜¯ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½è¢«å‡†ç¡®åœ°äº¤ä»˜ç»™ä¸€ä¸ªå·¥ä½œè€…ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†åšä¸€äº›å®Œå…¨ä¸åŒçš„äº‹æƒ…â€”â€”å°†æ¶ˆæ¯ä¼ é€’ç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚æ­¤æ¨¡å¼ç§°ä¸ºâ€œå‘å¸ƒ&#x2F;è®¢é˜…â€ã€‚ ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªæ¨¡å¼ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„æ—¥å¿—è®°å½•ç³»ç»Ÿã€‚å®ƒå°†ç”±ä¸¤ä¸ªç¨‹åºç»„æˆâ€”â€”ç¬¬ä¸€ä¸ªå°†å‘é€æ—¥å¿—æ¶ˆæ¯ï¼Œç¬¬äºŒä¸ªå°†æ¥æ”¶å’Œæ‰“å°å®ƒä»¬ã€‚ åœ¨æˆ‘ä»¬çš„æ—¥å¿—ç³»ç»Ÿä¸­ï¼Œæ¥æ”¶ç¨‹åºçš„æ¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å‰¯æœ¬éƒ½å°†è·å¾—æ¶ˆæ¯ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿è¡Œ ä¸€ä¸ªæ¥æ”¶å™¨å¹¶å°†æ—¥å¿—æŒ‡å‘ç£ç›˜;ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œå¦ä¸€ä¸ªæ¥æ”¶å™¨å¹¶åœ¨å±å¹•ä¸Šçœ‹åˆ°æ—¥å¿—ã€‚ åŸºæœ¬ä¸Šï¼Œå‘å¸ƒçš„æ—¥å¿—æ¶ˆæ¯å°†å¹¿æ’­åˆ°æ‰€æœ‰æ¥æ”¶æ–¹ã€‚ ç”Ÿæ´»ä¸­çš„æ¡ˆä¾‹ï¼šå°±æ˜¯ç©æŠ–éŸ³å¿«æ‰‹ï¼Œä¼—å¤šç²‰ä¸å…³æ³¨ä¸€ä¸ªè§†é¢‘ä¸»ï¼Œè§†é¢‘ä¸»å‘å¸ƒè§†é¢‘ï¼Œæ‰€æœ‰ç²‰ä¸éƒ½å¯ä»¥å¾—åˆ°è§†é¢‘é€šçŸ¥ ä¸Šå›¾ä¸­ï¼ŒXå°±æ˜¯è§†é¢‘ä¸»ï¼Œçº¢è‰²çš„é˜Ÿåˆ—å°±æ˜¯ç²‰ä¸ã€‚bindingæ˜¯ç»‘å®šçš„æ„æ€ï¼ˆå…³æ³¨ï¼‰ Pç”Ÿäº§è€…å‘é€ä¿¡æ¯ç»™Xè·¯ç”±ï¼ŒXå°†ä¿¡æ¯è½¬å‘ç»™ç»‘å®šXçš„é˜Ÿåˆ— Xé˜Ÿåˆ—å°†ä¿¡æ¯é€šè¿‡ä¿¡é“å‘é€ç»™æ¶ˆè´¹è€…ï¼Œä»è€Œè¿›è¡Œæ¶ˆè´¹ æ•´ä¸ªè¿‡ç¨‹ï¼Œå¿…é¡»å…ˆåˆ›å»ºè·¯ç”± è·¯ç”±åœ¨ç”Ÿäº§è€…ç¨‹åºä¸­åˆ›å»º å› ä¸ºè·¯ç”±æ²¡æœ‰å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå½“ç”Ÿäº§è€…å°†ä¿¡æ¯å‘é€ç»™è·¯ç”±åï¼Œæ¶ˆè´¹è€…è¿˜æ²¡æœ‰è¿è¡Œï¼Œæ‰€ä»¥æ²¡æœ‰é˜Ÿåˆ—ï¼Œè·¯ç”±å¹¶ä¸çŸ¥é“å°†ä¿¡æ¯å‘é€ç»™è° è¿è¡Œç¨‹åºçš„é¡ºåºï¼š MessageSender MessageReceiver1å’ŒMessageReceiver2 MessageSender 2.3.3.1 ç”Ÿäº§è€…1234567891011121314public class Sender &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜è·¯ç”±(è·¯ç”±åï¼Œè·¯ç”±ç±»å‹) // fanoutï¼šä¸å¤„ç†è·¯ç”±é”®ï¼ˆåªéœ€è¦å°†é˜Ÿåˆ—ç»‘å®šåˆ°è·¯ç”±ä¸Šï¼Œå‘é€åˆ°è·¯ç”±çš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸è¯¥ è·¯ç”±ç»‘å®šçš„æ‰€æœ‰é˜Ÿåˆ—ä¸Šï¼‰ channel.exchangeDeclare(&quot;test_exchange_fanout&quot;, &quot;fanout&quot;); String msg = &quot;helloï¼Œå¤§å®¶å¥½ï¼&quot;; channel.basicPublish(&quot;test_exchange_fanout&quot;, &quot;&quot;, null, msg.getBytes()); System.out.println(&quot;ç”Ÿäº§è€…ï¼š&quot; + msg); channel.close(); connection.close(); &#125;&#125; 2.3.3.2 æ¶ˆè´¹è€…112345678910111213141516171819public class Recer1 &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(&quot;test_exchange_fanout_queue_1&quot;,false,false,false,null); // ç»‘å®šè·¯ç”±ï¼ˆå…³æ³¨ï¼‰ /*å‚æ•°1ï¼šé˜Ÿåˆ—å å‚æ•°2ï¼šäº¤æ¢å™¨åç§° å‚æ•°3ï¼šè·¯ç”±keyï¼ˆæš‚æ—¶æ— ç”¨ï¼Œ&quot;&quot;å³å¯ï¼‰ */ channel.queueBind(&quot;test_exchange_fanout_queue_1&quot;, &quot;test_exchange_fanout&quot;, &quot;&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…1ã€‘ = &quot; + s); &#125; &#125;; // 4.ç›‘å¬é˜Ÿåˆ— true:è‡ªåŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;test_exchange_fanout_queue_1&quot;, true,consumer); &#125;&#125; 2.3.3.3 æ¶ˆè´¹è€…2 å°†æ¶ˆè´¹è€…1ä»£ç ä¸­çš„1ä¿®æ”¹ä¸º2å³å¯ï¼Œå…·ä½“ä»£ç ç•¥ 2.3.4 è·¯ç”±æ¨¡å¼ è·¯ç”±ä¼šæ ¹æ®ç±»å‹è¿›è¡Œå®šå‘åˆ†å‘æ¶ˆæ¯ç»™ä¸åŒçš„é˜Ÿåˆ—ï¼Œå¦‚å›¾æ‰€ç¤º å¯ä»¥ç†è§£ä¸ºæ˜¯å¿«é€’å…¬å¸çš„åˆ†æ‹£ä¸­å¿ƒï¼Œæ•´ä¸ªå°åŒºï¼Œä¸œé¢çš„æ¥¼å°å¼ é€è´§ï¼Œè¥¿é¢çš„æ¥¼å°ç‹é€è´§ 2.3.4.1 ç”Ÿäº§è€…1234567891011121314public class Sender &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜è·¯ç”±(è·¯ç”±åï¼Œè·¯ç”±ç±»å‹) // directï¼šæ ¹æ®è·¯ç”±é”®è¿›è¡Œå®šå‘åˆ†å‘æ¶ˆæ¯ channel.exchangeDeclare(&quot;test_exchange_direct&quot;, &quot;direct&quot;); String msg = &quot;ç”¨æˆ·æ³¨å†Œï¼Œã€userid=S101ã€‘&quot;; channel.basicPublish(&quot;test_exchange_direct&quot;, &quot;insert&quot;, null, msg.getBytes()); System.out.println(&quot;[ç”¨æˆ·ç³»ç»Ÿ]ï¼š&quot; + msg); channel.close(); connection.close(); &#125;&#125; 2.3.4.2 æ¶ˆè´¹è€…1123456789101112131415161718192021public class Recer1 &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(&quot;test_exchange_direct_queue_1&quot;,false,false,false,null); // ç»‘å®šè·¯ç”±ï¼ˆå¦‚æœè·¯ç”±é”®çš„ç±»å‹æ˜¯ æ·»åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ çš„è¯ï¼Œç»‘å®šåˆ°è¿™ä¸ªé˜Ÿåˆ—1ä¸Šï¼‰ channel.queueBind(&quot;test_exchange_direct_queue_1&quot;, &quot;test_exchange_direct&quot;, &quot;insert&quot;); channel.queueBind(&quot;test_exchange_direct_queue_1&quot;, &quot;test_exchange_direct&quot;, &quot;update&quot;); channel.queueBind(&quot;test_exchange_direct_queue_1&quot;, &quot;test_exchange_direct&quot;, &quot;delete&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…1ã€‘ = &quot; + s); &#125; &#125;; // 4.ç›‘å¬é˜Ÿåˆ— true:è‡ªåŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;test_exchange_direct_queue_1&quot;, true,consumer); &#125;&#125; 2.3.4.3 æ¶ˆè´¹è€…212345678910111213141516171819public class Recer2 &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(&quot;test_exchange_direct_queue_2&quot;,false,false,false,null); // ç»‘å®šè·¯ç”±ï¼ˆå¦‚æœè·¯ç”±é”®çš„ç±»å‹æ˜¯ æŸ¥è¯¢ çš„è¯ï¼Œç»‘å®šåˆ°è¿™ä¸ªé˜Ÿåˆ—2ä¸Šï¼‰ channel.queueBind(&quot;test_exchange_direct_queue_2&quot;, &quot;test_exchange_direct&quot;, &quot;select&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…2ã€‘ = &quot; + s); &#125; &#125;; // 4.ç›‘å¬é˜Ÿåˆ— true:è‡ªåŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;test_exchange_direct_queue_2&quot;, true,consumer); &#125;&#125; è®°ä½è¿è¡Œç¨‹åºçš„é¡ºåºï¼Œå…ˆè¿è¡Œä¸€æ¬¡senderï¼ˆåˆ›å»ºè·¯ç”±å™¨ï¼‰ï¼Œ æœ‰äº†è·¯ç”±å™¨ä¹‹åï¼Œåœ¨åˆ›å»ºä¸¤ä¸ªRecer1å’ŒRecer2ï¼Œè¿›è¡Œé˜Ÿåˆ—ç»‘å®š å†æ¬¡è¿è¡Œsenderï¼Œå‘å‡ºæ¶ˆæ¯ 2.3.5 é€šé…ç¬¦æ¨¡å¼ å’Œè·¯ç”±æ¨¡å¼90%æ˜¯ä¸€æ ·çš„ã€‚ å”¯ç‹¬çš„åŒºåˆ«å°±æ˜¯è·¯ç”±é”®æ”¯æŒæ¨¡ç³ŠåŒ¹é… åŒ¹é…ç¬¦å· *ï¼šåªèƒ½åŒ¹é…ä¸€ä¸ªè¯ï¼ˆæ­£å¥½ä¸€ä¸ªè¯ï¼Œå¤šä¸€ä¸ªä¸è¡Œï¼Œå°‘ä¸€ä¸ªä¹Ÿä¸è¡Œï¼‰ #ï¼šåŒ¹é…0ä¸ªæˆ–æ›´å¤šä¸ªè¯ çœ‹ä¸€ä¸‹å®˜ç½‘æ¡ˆä¾‹ï¼š Q1ç»‘å®šäº†è·¯ç”±é”® .orange. Q2ç»‘å®šäº†è·¯ç”±é”® ..rabbit å’Œ lazy.# ä¸‹é¢ç”Ÿäº§è€…çš„æ¶ˆæ¯ä¼šè¢«å‘é€ç»™å“ªä¸ªé˜Ÿåˆ—ï¼Ÿ 12345678quick.orange.rabbit # Q1 Q2 lazy.orange.elephant # Q1 Q2 quick.orange.fox # Q1 lazy.brown.fox # Q2 lazy.pink.rabbit # Q2 quick.brown.fox # æ—  orange # æ—  quick.orange.male.rabbit # æ—  2.3.5.1 ç”Ÿäº§è€…1234567891011121314public class Sender &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜è·¯ç”±(è·¯ç”±åï¼Œè·¯ç”±ç±»å‹) // topicï¼šæ¨¡ç³ŠåŒ¹é…çš„å®šå‘åˆ†å‘ channel.exchangeDeclare(&quot;test_exchange_topic&quot;, &quot;topic&quot;); String msg = &quot;å•†å“é™ä»·&quot;; channel.basicPublish(&quot;test_exchange_topic&quot;, &quot;product.price&quot;, null, msg.getBytes()); System.out.println(&quot;[ç”¨æˆ·ç³»ç»Ÿ]ï¼š&quot; + msg); channel.close(); connection.close(); &#125;&#125; 2.3.5.2 æ¶ˆè´¹è€…112345678910111213141516171819public class Recer1 &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(&quot;test_exchange_topic_queue_1&quot;,false,false,false,null); // ç»‘å®šè·¯ç”±ï¼ˆç»‘å®š ç”¨æˆ·ç›¸å…³ çš„æ¶ˆæ¯ï¼‰ channel.queueBind(&quot;test_exchange_topic_queue_1&quot;, &quot;test_exchange_topic&quot;, &quot;user.#&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…1ã€‘ = &quot; + s); &#125; &#125;; // 4.ç›‘å¬é˜Ÿåˆ— true:è‡ªåŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;test_exchange_topic_queue_1&quot;, true,consumer); &#125;&#125; 2.3.5.3 æ¶ˆè´¹è€…2123456789101112131415161718192021public class Recer2 &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(&quot;test_exchange_topic_queue_2&quot;,false,false,false,null); // ç»‘å®šè·¯ç”±ï¼ˆç»‘å®š å•†å“å’Œè®¢å•ç›¸å…³ çš„æ¶ˆæ¯ï¼‰ channel.queueBind(&quot;test_exchange_topic_queue_2&quot;, &quot;test_exchange_topic&quot;, &quot;product.#&quot;); channel.queueBind(&quot;test_exchange_topic_queue_2&quot;, &quot;test_exchange_topic&quot;, &quot;order.#&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…2ã€‘ = &quot; + s); &#125; &#125; ; // 4.ç›‘å¬é˜Ÿåˆ— true:è‡ªåŠ¨æ¶ˆæ¯ç¡®è®¤ channel.basicConsume(&quot;test_exchange_topic_queue_2&quot;, true,consumer); &#125;&#125; 2.4 æŒä¹…åŒ– æ¶ˆæ¯çš„å¯é æ€§æ˜¯RabbitMQçš„ä¸€å¤§ç‰¹è‰²ï¼Œé‚£ä¹ˆRabbitMQæ˜¯å¦‚ä½•é¿å…æ¶ˆæ¯ä¸¢å¤±ï¼Ÿ æ¶ˆè´¹è€…çš„ACKç¡®è®¤æœºåˆ¶ï¼Œå¯ä»¥é˜²æ­¢æ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯ ä¸‡ä¸€åœ¨æ¶ˆè´¹è€…æ¶ˆè´¹ä¹‹å‰ï¼ŒRabbitMQæœåŠ¡å™¨å®•æœºäº†ï¼Œé‚£æ¶ˆæ¯ä¹Ÿä¼šä¸¢å¤± æƒ³è¦å°†æ¶ˆæ¯æŒä¹…åŒ–ï¼Œé‚£ä¹ˆ è·¯ç”±å’Œé˜Ÿåˆ—éƒ½è¦æŒä¹…åŒ– æ‰å¯ä»¥ 2.4.1 ç”Ÿäº§è€…1234567891011121314public class Sender &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜è·¯ç”±(è·¯ç”±åï¼Œè·¯ç”±ç±»å‹ï¼ŒæŒä¹…åŒ–) channel.exchangeDeclare(&quot;test_exchange_topic&quot;, &quot;topic&quot;,true); String msg = &quot;å•†å“é™ä»·&quot;; // å‘é€æ¶ˆæ¯(ç¬¬ä¸‰ä¸ªå‚æ•°ä½œç”¨æ˜¯è®©æ¶ˆæ¯æŒä¹…åŒ–) channel.basicPublish(&quot;test_exchange_topic&quot;, &quot;product.price&quot;, MessageProperties.PERSISTENT_TEXT_PLAIN, msg.getBytes()); System.out.println(&quot;[ç”¨æˆ·ç³»ç»Ÿ]ï¼š&quot; + msg); channel.close(); connection.close(); &#125;&#125; 2.4.2 æ¶ˆè´¹è€…1234567891011121314151617public class Recer1 &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ—( ç¬¬äºŒä¸ªå‚æ•°ä¸ºtrueï¼šæ”¯æŒæŒä¹…åŒ–) channel.queueDeclare(&quot;test_exchange_topic_queue_1&quot;,true,false,false,null); channel.queueBind(&quot;test_exchange_topic_queue_1&quot;, &quot;test_exchange_topic&quot;, &quot;user.#&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…1ã€‘ = &quot; + s); &#125; &#125;; channel.basicConsume(&quot;test_exchange_topic_queue_1&quot;, true,consumer); &#125;&#125; 2.5 Springæ•´åˆRabbitMQ äº”ç§æ¶ˆæ¯æ¨¡å‹ï¼Œåœ¨ä¼ä¸šä¸­åº”ç”¨æœ€å¹¿æ³›çš„å°±æ˜¯æœ€åä¸€ç§ï¼šå®šå‘åŒ¹é…topic Spring AMQP æ˜¯åŸºäº Spring æ¡†æ¶çš„AMQPæ¶ˆæ¯è§£å†³æ–¹æ¡ˆï¼Œæä¾›æ¨¡æ¿åŒ–çš„å‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„æŠ½è±¡å±‚ï¼Œæä¾›åŸºäºæ¶ˆæ¯é©±åŠ¨çš„ POJOçš„æ¶ˆæ¯ç›‘å¬ç­‰ï¼Œç®€åŒ–äº†æˆ‘ä»¬å¯¹äºRabbitMQç›¸å…³ç¨‹åºçš„å¼€å‘ã€‚ 2.5.1 ç”Ÿäº§ç«¯å·¥ç¨‹ ä¾èµ– 12345678910111213141516&lt;dependency&gt; &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt; &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt; &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;1.7.25&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt; &lt;version&gt;3.9&lt;/version&gt;&lt;/dependency&gt; spring-rabbitmq-producer.xml 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:rabbit=&quot;http://www.springframework.org/schema/rabbit&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit.xsd&quot;&gt; &lt;!-- 1.é…ç½®è¿æ¥ --&gt; &lt;rabbit:connection-factory id=&quot;connectionFactory&quot; host=&quot;192.168.204.141&quot; port=&quot;5672&quot; username=&quot;laosun&quot; password=&quot;123123&quot; virtual-host=&quot;/lagou&quot; /&gt; &lt;!-- 2.é…ç½®é˜Ÿåˆ— --&gt; &lt;rabbit:queue name=&quot;test_spring_queue_1&quot;/&gt; &lt;!-- 3.é…ç½®rabbitAdminï¼šä¸»è¦ç”¨äºåœ¨Javaä»£ç ä¸­å¯¹ç†é˜Ÿå’Œé˜Ÿåˆ—è¿›è¡Œç®¡ç†ï¼Œç”¨äºåˆ›å»ºã€ç»‘å®šã€åˆ  é™¤é˜Ÿåˆ—ä¸äº¤æ¢æœºï¼Œå‘é€æ¶ˆæ¯ç­‰ --&gt; &lt;rabbit:admin connection-factory=&quot;connectionFactory&quot;/&gt; &lt;!-- 4.é…ç½®topicç±»å‹exchangeï¼›é˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœº --&gt; &lt;rabbit:topic-exchange name=&quot;spring_topic_exchange&quot;&gt; &lt;rabbit:bindings&gt; &lt;rabbit:binding queue=&quot;test_spring_queue_1&quot; pattern=&quot;msg.#&quot;/&gt; &lt;/rabbit:bindings&gt; &lt;/rabbit:topic-exchange&gt; &lt;!-- 5. é…ç½®æ¶ˆæ¯å¯¹è±¡jsonè½¬æ¢ç±» --&gt; &lt;bean id=&quot;jsonMessageConverter&quot; class=&quot;org.springframework.amqp.support.converter.Jackson2JsonMessageConverter&quot;/&gt; &lt;!-- 6. é…ç½®RabbitTemplateï¼ˆæ¶ˆæ¯ç”Ÿäº§è€…ï¼‰ --&gt; &lt;rabbit:template id=&quot;rabbitTemplate&quot; connection-factory=&quot;connectionFactory&quot; exchange=&quot;spring_topic_exchange&quot; message-converter=&quot;jsonMessageConverter&quot; /&gt;&lt;/beans&gt; å‘æ¶ˆæ¯ 1234567891011121314public class Sender &#123; public static void main(String[] args) &#123; // 1.åˆ›å»ºspringå®¹å™¨ ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring/spring-rabbitmq-producer.xml&quot;); // 2.ä»å®¹å™¨ä¸­è·å–å¯¹è±¡ RabbitTemplate template = context.getBean(RabbitTemplate.class); // 3.å‘é€æ¶ˆæ¯ Map&lt;String, String&gt; map = new HashMap(); map.put(&quot;name&quot;, &quot;å¤§ä½¬å­™&quot;); map.put(&quot;email&quot;, &quot;19998539@qq.com&quot;); template.convertAndSend(&quot;msg.user&quot;, map); context.close(); &#125;&#125; 2.5.2 æ¶ˆè´¹ç«¯å·¥ç¨‹ ä¾èµ–ä¸ç”Ÿäº§è€…ä¸€è‡´ spring-rabbitmq-consumer.xml 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:rabbit=&quot;http://www.springframework.org/schema/rabbit&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!-- 1. é…ç½®è¿æ¥ --&gt; &lt;rabbit:connection-factory id=&quot;connectionFactory&quot; host=&quot;192.168.204.141&quot;port=&quot;5672&quot; username=&quot;laosun&quot; password=&quot;123123&quot; virtual-host=&quot;/lagou&quot; /&gt; &lt;!-- 2. é…ç½®é˜Ÿåˆ— --&gt; &lt;rabbit:queue name=&quot;test_spring_queue_1&quot;/&gt; &lt;!-- 3.é…ç½®rabbitAdmin --&gt; &lt;rabbit:admin connection-factory=&quot;connectionFactory&quot;/&gt; &lt;!-- 4.springIOCæ³¨è§£æ‰«æåŒ…--&gt; &lt;context:component-scan base-package=&quot;listener&quot;/&gt; &lt;!-- 5.é…ç½®ç›‘å¬ --&gt; &lt;rabbit:listener-container connection-factory=&quot;connectionFactory&quot;&gt; &lt;rabbit:listener ref=&quot;consumerListener&quot; queue- names=&quot;test_spring_queue_1&quot; /&gt; &lt;/rabbit:listener-container&gt;&lt;/beans&gt; æ¶ˆè´¹è€… MessageListeneræ¥å£ç”¨äºspringå®¹å™¨æ¥æ”¶åˆ°æ¶ˆæ¯åå¤„ç†æ¶ˆæ¯ å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå·±å®šä¹‰çš„ç±»å‹ æ¥å®ç° å¤„ç†æ¶ˆæ¯æ—¶ï¼Œå¿…é¡»å®ç°è¯¥æ¥å£ï¼Œå¹¶é‡å†™onMessage()æ–¹æ³• å½“springå®¹å™¨æ¥æ”¶æ¶ˆæ¯åï¼Œä¼šè‡ªåŠ¨äº¤ç”±onMessageè¿›è¡Œå¤„ç† 1234567891011121314151617@Component public class ConsumerListener implements MessageListener &#123; // jacksonæä¾›åºåˆ—åŒ–å’Œååºåˆ—ä¸­ä½¿ç”¨æœ€å¤šçš„ç±»ï¼Œç”¨æ¥è½¬æ¢jsonçš„ private static final ObjectMapper MAPPER = new ObjectMapper(); public void onMessage(Message message) &#123; try &#123; // å°†messageå¯¹è±¡è½¬æ¢æˆjson JsonNode jsonNode = MAPPER.readTree(message.getBody()); String name = jsonNode.get(&quot;name&quot;).asText(); String email = jsonNode.get(&quot;email&quot;).asText(); System.out.println(&quot;ä»é˜Ÿåˆ—ä¸­è·å–ï¼šã€&quot;+name+&quot;çš„é‚®ç®±æ˜¯:&quot;+email+&quot;ã€‘&quot;); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; å¯åŠ¨é¡¹ç›® 12345678public class TestRunner &#123; public static void main(String[] args) throws Exception &#123; // è·å¾—å®¹å™¨ ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring/spring-rabbitmq-consumer.xml&quot;); // è®©ç¨‹åºä¸€ç›´è¿è¡Œï¼Œåˆ«ç»ˆæ­¢ System.in.read(); &#125;&#125; 2.6 æ¶ˆæ¯æˆåŠŸç¡®è®¤æœºåˆ¶åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œæœ‰çš„ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯æ˜¯å¿…é¡»ä¿è¯æˆåŠŸå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯æˆåŠŸæŠ•é€’å‘¢ï¼Ÿ äº‹åŠ¡æœºåˆ¶ å‘å¸ƒç¡®è®¤æœºåˆ¶ 2.6.1 äº‹åŠ¡æœºåˆ¶ AMQPåè®®æä¾›çš„ä¸€ç§ä¿è¯æ¶ˆæ¯æˆåŠŸæŠ•é€’çš„æ–¹å¼ï¼Œé€šè¿‡ä¿¡é“å¼€å¯ transactional æ¨¡å¼ å¹¶åˆ©ç”¨ä¿¡é“ çš„ä¸‰ä¸ªæ–¹æ³•æ¥å®ç°ä»¥äº‹åŠ¡æ–¹å¼ å‘é€æ¶ˆæ¯ï¼Œè‹¥å‘é€å¤±è´¥ï¼Œé€šè¿‡å¼‚å¸¸å¤„ç†å›æ»šäº‹åŠ¡ï¼Œç¡®ä¿æ¶ˆæ¯æˆåŠŸæŠ•é€’ channel.txSelect()ï¼š å¼€å¯äº‹åŠ¡ channel.txCommit() ï¼šæäº¤äº‹åŠ¡ channel.txRollback() ï¼šå›æ»šäº‹åŠ¡ Springå·²ç»å¯¹ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•è¿›è¡Œäº†å°è£…ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ä½¿ç”¨åŸå§‹çš„ä»£ç æ¼”ç¤º 2.6.1.1 ç”Ÿäº§è€…123456789101112131415161718192021222324252627public class Sender &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); channel.exchangeDeclare(&quot;test_transaction&quot;, &quot;topic&quot;); channel.txSelect(); // å¼€å¯äº‹åŠ¡ try &#123; channel.basicPublish(&quot;test_transaction&quot;, &quot;product.price&quot;, null, &quot;å•†å“ é™ä»·1&quot;.getBytes()); // System.out.println(1/0); // æ¨¡æ‹Ÿå¼‚å¸¸ï¼ channel.basicPublish(&quot;test_transaction&quot;, &quot;product.price&quot;, null, &quot;å•†å“ é™ä»·2&quot;.getBytes()); System.out.println(&quot;æ¶ˆæ¯å…¨éƒ¨å‘å‡ºï¼&quot;); channel.txCommit(); // äº‹åŠ¡æäº¤ &#125; catch (Exception e)&#123; System.out.println(&quot;ç”±äºç³»ç»Ÿå¼‚å¸¸ï¼Œæ¶ˆæ¯å…¨éƒ¨æ’¤å›ï¼&quot;); channel.txRollback(); // äº‹åŠ¡å›æ»š e.printStackTrace(); &#125; finally &#123; channel.close(); connection.close(); &#125; &#125;&#125; 2.6.1.2 æ¶ˆè´¹è€…12345678910111213141516public class Recer &#123; public static void main(String[] args) throws Exception &#123; Connection connection = ConnectionUtil.getConnection(); Channel channel = connection.createChannel(); channel.queueDeclare(&quot;test_transaction_queue&quot;,false,false,false,null); channel.queueBind(&quot;test_transaction_queue&quot;, &quot;test_transaction&quot;, &quot;product.#&quot;); DefaultConsumer consumer = new DefaultConsumer(channel)&#123; @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException &#123; String s = new String(body); System.out.println(&quot;ã€æ¶ˆè´¹è€…ã€‘ = &quot; + s); &#125; &#125;; channel.basicConsume(&quot;test_transaction_queue&quot;, true,consumer); &#125;&#125; 2.6.2 Confirmå‘å¸ƒç¡®è®¤æœºåˆ¶ RabbitMQä¸ºäº†ä¿è¯æ¶ˆæ¯çš„æˆåŠŸæŠ•é€’ï¼Œé‡‡ç”¨é€šè¿‡AMQPåè®®å±‚é¢ä¸ºæˆ‘ä»¬æä¾›äº‹åŠ¡æœºåˆ¶çš„æ–¹æ¡ˆï¼Œä½†æ˜¯é‡‡ç”¨äº‹åŠ¡ä¼šå¤§å¤§é™ä½æ¶ˆæ¯çš„ååé‡ è€å­™æˆ‘æœ¬æœºSSDç¡¬ç›˜æµ‹è¯•ç»“æœ10wæ¡æ¶ˆæ¯æœªå¼€å¯äº‹åŠ¡ï¼Œå¤§çº¦8så‘é€å®Œæ¯•ï¼›è€Œå¼€å¯äº†äº‹åŠ¡åï¼Œéœ€è¦å°†è¿‘310sï¼Œå·®äº†30å¤šå€ã€‚ æ¥ç€ç¿»é˜…å®˜ç½‘ï¼Œå‘ç°å®˜ç½‘ä¸­å·²æ ‡æ³¨ Using standard AMQP 0-9-1, the only way to guarantee that a message isnâ€™t lost is by using transactions â€“ make the channel transactional then for each message or set of messages publish, commit. In this case, transactions are unnecessarily heavy weightand decrease throughput by a factor of 250. To remedy this, a confirmation mechanism was introduced. It mimics the consumer acknowled gements mechanismalready present in the protocol. å…³é”®æ€§è¯‘æ–‡ï¼šå¼€å¯äº‹åŠ¡æ€§èƒ½æœ€å¤§æŸå¤±è¶…è¿‡250å€ é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´åŠ é«˜æ•ˆçš„è§£å†³æ–¹å¼å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯é‡‡ç”¨Confirmæ¨¡å¼ã€‚ äº‹åŠ¡æ•ˆç‡ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆä½å‘¢ï¼Ÿè¯•æƒ³ä¸€ä¸‹ï¼š10æ¡æ¶ˆæ¯ï¼Œå‰9æ¡æˆåŠŸï¼Œå¦‚æœç¬¬10æ¡å¤±è´¥ï¼Œé‚£ä¹ˆ9æ¡æ¶ˆæ¯è¦å…¨éƒ¨æ’¤é”€å›æ»šã€‚å¤ªå¤ªå¤ªæµªè´¹ è€Œconfirmæ¨¡å¼åˆ™é‡‡ç”¨è¡¥å‘ç¬¬10æ¡çš„æªæ–½æ¥å®Œæˆ10æ¡æ¶ˆæ¯çš„é€è¾¾ 2.6.2.1 åœ¨springä¸­åº”ç”¨ spring-rabbitmq-producer.xml 12345678910111213141516&lt;!--1.é…ç½®è¿æ¥ï¼Œå¯åŠ¨ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶: publisher-confirms=&quot;true&quot;--&gt;&lt;rabbit:connection-factory id=&quot;connectionFactory&quot; host=&quot;192.168.204.141&quot; port=&quot;5672&quot; username=&quot;laosun&quot; password=&quot;123123&quot; virtual-host=&quot;/lagou&quot; publisher-confirms=&quot;true&quot; /&gt;&lt;!--6.é…ç½®rabbitmqçš„æ¨¡ç‰ˆ,æ·»åŠ ç¡®è®¤å›è°ƒå¤„ç†ç±»:confirm- callback=&quot;msgSendConfirmCallback&quot;--&gt;&lt;rabbit:template id=&quot;rabbitTemplate&quot; connection-factory=&quot;connectionFactory&quot; exchange=&quot;spring_topic_exchange&quot; message- converter=&quot;jsonMessageConverter&quot; confirm- callback=&quot;msgSendConfirmCallback&quot;/&gt;&lt;!--7.ç¡®è®¤æœºåˆ¶å¤„ç†ç±»--&gt;&lt;bean id=&quot;msgSendConfirmCallback&quot; class=&quot;confirm.MsgSendConfirmCallback&quot;/&gt; æ¶ˆæ¯ç¡®è®¤å¤„ç†ç±» 12345678910111213141516171819202122package confirm;import org.springframework.amqp.rabbit.core.RabbitTemplate;import org.springframework.amqp.rabbit.support.CorrelationData;import org.springframework.stereotype.Component;import java.io.IOException;/** * @BelongsProject: spring-rabbitmq-producer * @Author: GuoAn.Sun * @Description: ç¡®è®¤æœºåˆ¶ */@Component public class MsgSendConfirmCallback implements RabbitTemplate.ConfirmCallback &#123; public void confirm(CorrelationData correlationData, Boolean b, String s) &#123; if (b)&#123; System.out.println(&quot;æ¶ˆæ¯ç¡®è®¤æˆåŠŸï¼ï¼&quot;); &#125; else &#123; System.out.println(&quot;æ¶ˆæ¯ç¡®è®¤å¤±è´¥...&quot;); // å¦‚æœæœ¬æ¡æ¶ˆæ¯ä¸€å®šè¦å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œä¾‹å¦‚ä¸‹è®¢å•æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ¶ˆæ¯è¡¥å‘ // é‡‡ç”¨é€’å½’ï¼ˆå›ºå®šæ¬¡æ•°ï¼Œä¸å¯æ— é™ï¼‰æˆ– redis+å®šæ—¶ä»»åŠ¡ &#125; &#125;&#125; log4j.properties 1234567log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.Target=System.out log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %m%n log4j.appender.file=org.apache.log4j.FileAppender log4j.appender.file.File=rabbitmq.log log4j.appender.file.layout=org.apache.log4j.PatternLayout log4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %l %m%n log4j.rootLogger=debug, stdout,file å‘é€æ¶ˆæ¯ 123456789101112131415public class Sender &#123; public static void main(String[] args) &#123; ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring/spring-rabbitmq-producer.xml&quot;); RabbitTemplate rabbitTemplate = context.getBean(RabbitTemplate.class); Map&lt;String,String&gt; map = new HashMap&lt;String, String&gt;(); map.put(&quot;name&quot;, &quot;å•å¸ƒ&quot;); map.put(&quot;email&quot;, &quot;666@qq.com&quot;); // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·¯ç”±åç§°ï¼Œ // ä¸å†™ï¼Œåˆ™ä½¿ç”¨springå®¹å™¨ä¸­åˆ›å»ºçš„è·¯ç”± // ä¹±å†™ä¸€ä¸ªï¼Œå› ä¸ºè·¯ç”±åé”™è¯¯å¯¼è‡´æŠ¥é”™ï¼Œåˆ™è¿›å…¥æ¶ˆæ¯ç¡®è®¤å¤±è´¥æµç¨‹ rabbitTemplate.convertAndSend(&quot;x&quot;,&quot;msg.user&quot;,map); System.out.println(&quot;ok&quot;); context.close(); &#125;&#125; 2.7 æ¶ˆè´¹ç«¯é™æµ åœ¨æ²™æ¼ ä¸­è¡Œèµ°ï¼Œ3å¤©ä¸å–æ°´ï¼Œçªç„¶å–æ°´ï¼Œå¦‚æœä½¿åŠ²å–ï¼Œå®¹æ˜“çŒæ­»ï¼Œè¦ä¸€å£ä¸€å£æ…¢æ…¢å– æˆ‘ä»¬ Rabbitmq æœåŠ¡å™¨ç§¯å‹äº†æˆåƒä¸Šä¸‡æ¡æœªå¤„ç†çš„æ¶ˆæ¯ï¼Œç„¶åéšä¾¿æ‰“å¼€ä¸€ä¸ªæ¶ˆè´¹è€…å®¢æˆ·ç«¯ï¼Œå°±ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µ: å·¨é‡çš„æ¶ˆæ¯ç¬é—´å…¨éƒ¨å–·æ¶Œæ¨é€è¿‡æ¥ï¼Œä½†æ˜¯å•ä¸ªå®¢æˆ·ç«¯æ— æ³•åŒæ—¶å¤„ç†è¿™ä¹ˆå¤šæ•°æ®ï¼Œå°±ä¼šè¢«å‹å®å´©æºƒ æ‰€ä»¥ï¼Œå½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯¹ç”Ÿäº§ç«¯é™æµè‚¯å®šæ˜¯ä¸ç§‘å­¦çš„ï¼Œå› ä¸ºæœ‰æ—¶å€™å¹¶å‘é‡å°±æ˜¯ç‰¹åˆ«å¤§ï¼Œæœ‰æ—¶å€™å¹¶å‘é‡åˆç‰¹åˆ«å°‘ï¼Œè¿™æ˜¯ç”¨æˆ·çš„è¡Œä¸ºï¼Œæˆ‘ä»¬æ˜¯æ— æ³•çº¦æŸçš„ æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å¯¹æ¶ˆè´¹ç«¯é™æµï¼Œç”¨äºä¿æŒæ¶ˆè´¹ç«¯çš„ç¨³å®š ä¾‹å¦‚ï¼šæ±½è½¦ä¼ä¸šä¸åœçš„ç”Ÿäº§æ±½è½¦ï¼Œ4Såº—æœ‰å¥½å¤šåº“å­˜è½¦å–ä¸å‡ºå»ï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šé™ä»·å¤„ç†ï¼Œå°±æ˜¯è¦ä¿è¯å¸‚å€¼çš„ç¨³å®šï¼Œå¦‚æœç”Ÿäº§å¤šå°‘å°ï¼Œå°±å–å¤šå°‘å°ï¼Œä¸ç®¡ä»·æ ¼çš„è¯ï¼Œå¸‚åœºå°±ä¹±äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä¸å˜çš„ä»·æ ¼æ¥ç¨³ä½æ¶ˆè´¹è€…è´­è½¦ï¼Œæ‰èƒ½å¹³ç¨³å‘å±• RabbitMQ æä¾›äº†ä¸€ç§ Qos ï¼ˆQuality of Serviceï¼ŒæœåŠ¡è´¨é‡ï¼‰æœåŠ¡è´¨é‡ä¿è¯åŠŸèƒ½ å³åœ¨éè‡ªåŠ¨ç¡®è®¤æ¶ˆæ¯çš„å‰æä¸‹ï¼Œå¦‚æœä¸€å®šæ•°ç›®çš„æ¶ˆæ¯æœªè¢«ç¡®è®¤å‰ï¼Œä¸å†è¿›è¡Œæ¶ˆè´¹æ–°çš„æ¶ˆæ¯ ç”Ÿäº§è€…ä½¿ç”¨å¾ªç¯å‘å‡ºå¤šæ¡æ¶ˆæ¯ 1234for (int i = 1;i&lt;=10;i++) &#123; rabbitTemplate.convertAndSend(&quot;msg.user&quot;, map); System.out.println(&quot;æ¶ˆæ¯å·²å‘å‡º...&quot;);&#125; ç”Ÿäº§10æ¡å †ç§¯æœªå¤„ç†çš„æ¶ˆæ¯ æ¶ˆè´¹è€…è¿›è¡Œé™æµå¤„ç† 123456&lt;!--5.é…ç½®ç›‘å¬--&gt;&lt;!-- prefetch=&quot;3&quot; ä¸€æ¬¡æ€§æ¶ˆè´¹çš„æ¶ˆæ¯æ•°é‡ã€‚ä¼šå‘Šè¯‰ RabbitMQ ä¸è¦åŒæ—¶ç»™ä¸€ä¸ªæ¶ˆè´¹è€…æ¨é€å¤šäº N ä¸ªæ¶ˆæ¯ï¼Œä¸€æ—¦æœ‰ N ä¸ªæ¶ˆæ¯è¿˜æ²¡æœ‰ackï¼Œåˆ™è¯¥ consumer å°†é˜»å¡ï¼Œç›´åˆ°æ¶ˆæ¯è¢«ack--&gt;&lt;!-- acknowledge-mode: manual æ‰‹åŠ¨ç¡®è®¤--&gt;&lt;rabbit:listener-container connection-factory=&quot;connectionFactory&quot; prefetch=&quot;3&quot; acknowledge=&quot;manual&quot;&gt; &lt;rabbit:listener ref=&quot;consumerListener&quot; queue-names=&quot;test_spring_queue_1&quot; /&gt;&lt;/rabbit:listener-container&gt; 12345678910111213141516171819202122232425262728// AbstractAdaptableMessageListenerç”¨äºåœ¨springå®¹å™¨æ¥æ”¶åˆ°æ¶ˆæ¯åç”¨äºå¤„ç†æ¶ˆæ¯çš„æŠ½è±¡ åŸºç±»@Component public class ConsumerListener extends AbstractAdaptableMessageListener &#123; // jacksonæä¾›åºåˆ—åŒ–å’Œååºåˆ—ä¸­ä½¿ç”¨æœ€å¤šçš„ç±»ï¼Œç”¨æ¥è½¬æ¢jsonçš„ private static final ObjectMapper MAPPER = new ObjectMapper(); public void onMessage(Message message, Channel channel) throws Exception &#123; try &#123; // String str = new String(message.getBody()); // å°†messageå¯¹è±¡è½¬æ¢æˆjson JsonNode jsonNode = MAPPER.readTree(message.getBody()); String name = jsonNode.get(&quot;name&quot;).asText(); String email = jsonNode.get(&quot;email&quot;).asText(); System.out.println(&quot;ä»é˜Ÿåˆ—ä¸­è·å–ï¼šã€&quot;+name+&quot;çš„é‚®ç®±æ˜¯:&quot;+email+&quot;ã€‘&quot;); long deliveryTag = message.getMessageProperties().getDeliveryTag(); //ç¡®è®¤æ”¶åˆ°(å‚æ•°1,å‚æ•°2) /* å‚æ•°1ï¼šRabbitMQ å‘è¯¥ Channel æŠ•é€’çš„è¿™æ¡æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯† IDï¼Œæ˜¯ä¸€ä¸ªå•è°ƒé€’ å¢çš„æ­£æ•´æ•°ï¼Œdelivery_tag çš„èŒƒå›´ä»…é™äº Channel å‚æ•°2ï¼šä¸ºäº†å‡å°‘ç½‘ç»œæµé‡ï¼Œæ‰‹åŠ¨ç¡®è®¤å¯ä»¥è¢«æ‰¹å¤„ç†ï¼Œå½“è¯¥å‚æ•°ä¸º true æ—¶ï¼Œåˆ™å¯ä»¥ ä¸€æ¬¡æ€§ç¡®è®¤ delivery_tag å°äºç­‰äºä¼ å…¥å€¼çš„æ‰€æœ‰æ¶ˆæ¯ */ channel.basicAck(deliveryTag , true); Thread.sleep(3000); System.out.println(&quot;ä¼‘æ¯ä¸‰ç§’ç„¶åå†æ¥æ”¶æ¶ˆæ¯&quot;); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; æ¯æ¬¡ç¡®è®¤æ¥æ”¶3æ¡æ¶ˆæ¯ 2.8 è¿‡æœŸæ—¶é—´TTL Time To Liveï¼šç”Ÿå­˜æ—¶é—´ã€è¿˜èƒ½æ´»å¤šä¹…ï¼Œå•ä½æ¯«ç§’ åœ¨è¿™ä¸ªå‘¨æœŸå†…ï¼Œæ¶ˆæ¯å¯ä»¥è¢«æ¶ˆè´¹è€…æ­£å¸¸æ¶ˆè´¹ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œåˆ™è‡ªåŠ¨åˆ é™¤ï¼ˆå…¶å®æ˜¯è¢«ç§°ä¸ºdeadmessageå¹¶æŠ•å…¥åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œæ— æ³•æ¶ˆè´¹è¯¥æ¶ˆæ¯ï¼‰ RabbitMQå¯ä»¥å¯¹æ¶ˆæ¯å’Œé˜Ÿåˆ—è®¾ç½®TTL é€šè¿‡é˜Ÿåˆ—è®¾ç½®ï¼Œé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯éƒ½æœ‰ç›¸åŒçš„è¿‡æœŸæ—¶é—´ å¯¹æ¶ˆæ¯å•ç‹¬è®¾ç½®ï¼Œæ¯æ¡æ¶ˆæ¯çš„TTLå¯ä»¥ä¸åŒï¼ˆæ›´é¢—ç²’åŒ–ï¼‰ 2.8.1 è®¾ç½®é˜Ÿåˆ—TTL spring-rabbitmq-producer.xml 123456&lt;!--2.é‡æ–°é…ç½®ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒåŒæ—¶ï¼Œå¯¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯è®¾ç½®è¿‡æœŸæ—¶é—´--&gt;&lt;rabbit:queue name=&quot;test_spring_queue_ttl&quot; auto-declare=&quot;true&quot;&gt; &lt;rabbit:queue-arguments&gt; &lt;entry key=&quot;x-message-ttl&quot; value-type=&quot;long&quot; value=&quot;5000&quot;&gt;&lt;/entry&gt; &lt;/rabbit:queue-arguments&gt;&lt;/rabbit:queue&gt; 5ç§’ä¹‹åï¼Œæ¶ˆæ¯è‡ªåŠ¨åˆ é™¤ 2.8.2 è®¾ç½®æ¶ˆæ¯TTL è®¾ç½®æŸæ¡æ¶ˆæ¯çš„ttlï¼Œåªéœ€è¦åœ¨åˆ›å»ºå‘é€æ¶ˆæ¯æ—¶æŒ‡å®šå³å¯ 12&lt;!--2.é…ç½®é˜Ÿåˆ—--&gt; &lt;rabbit:queue name=&quot;test_spring_queue_ttl_2&quot;&gt; 12345678910111213141516171819202122232425262728package test;import org.springframework.amqp.core.Message;import org.springframework.amqp.core.MessageProperties;import org.springframework.amqp.rabbit.core.RabbitTemplate;import org.springframework.context.support.ClassPathXmlApplicationContext;import java.util.HashMap;import java.util.Map;/** * @BelongsProject: spring-rabbitmq-producer * @Author: GuoAn.Sun * @Description: ç”Ÿäº§è€… */public class Sender2 &#123; public static void main(String[] args) &#123; ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring/spring-rabbitmq-producer.xml&quot;); RabbitTemplate rabbitTemplate = context.getBean(RabbitTemplate.class); // åˆ›å»ºæ¶ˆæ¯é…ç½®å¯¹è±¡ MessageProperties messageProperties = new MessageProperties(); // è®¾ç½®æ¶ˆæ¯è¿‡æœŸæ—¶é—´ messageProperties.setExpiration(&quot;6000&quot;); // åˆ›å»ºæ¶ˆæ¯ Message message = new Message(&quot;6ç§’åè‡ªåŠ¨åˆ é™¤&quot;.getBytes(), messageProperties); // å‘é€æ¶ˆæ¯ rabbitTemplate.convertAndSend(&quot;msg.user&quot;, message); System.out.println(&quot;æ¶ˆæ¯å·²å‘å‡º...&quot;); context.close(); &#125;&#125; å¦‚æœåŒæ—¶è®¾ç½®äº†queueå’Œmessageçš„TTLå€¼ï¼Œåˆ™äºŒè€…ä¸­è¾ƒå°çš„æ‰ä¼šèµ·ä½œç”¨ 2.9 æ­»ä¿¡é˜Ÿåˆ— DLXï¼ˆDead Letter Exchangesï¼‰æ­»ä¿¡äº¤æ¢æœº&#x2F;æ­»ä¿¡é‚®ç®±ï¼Œå½“æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­ç”±äºæŸäº›åŸå› æ²¡æœ‰è¢«åŠæ—¶æ¶ˆè´¹è€Œå˜æˆæ­»ä¿¡ï¼ˆdead messageï¼‰åï¼Œè¿™äº›æ¶ˆæ¯å°±ä¼šè¢«åˆ†å‘åˆ°DLXäº¤æ¢æœºä¸­ï¼Œè€Œç»‘å®šDLXäº¤æ¢æœºçš„é˜Ÿåˆ—ï¼Œç§°ä¹‹ä¸ºï¼šâ€œæ­»ä¿¡é˜Ÿåˆ—â€ æ¶ˆæ¯æ²¡æœ‰è¢«åŠæ—¶æ¶ˆè´¹çš„åŸå› ï¼š æ¶ˆæ¯è¢«æ‹’ç»ï¼ˆbasic.reject&#x2F; basic.nackï¼‰å¹¶ä¸”ä¸å†é‡æ–°æŠ•é€’ requeue&#x3D;false æ¶ˆæ¯è¶…æ—¶æœªæ¶ˆè´¹ è¾¾åˆ°æœ€å¤§é˜Ÿåˆ—é•¿åº¦ spring-rabbitmq-producer-dlx.xml 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!--1.é…ç½®è¿æ¥--&gt;&lt;rabbit:connection-factory id=&quot;connectionFactory&quot; host=&quot;192.168.204.141&quot; port=&quot;5672&quot; username=&quot;laosun&quot; password=&quot;123123&quot; virtual-host=&quot;/lagou&quot;/&gt;&lt;!--3.é…ç½®rabbitAdmin:ä¸»è¦ç”¨äºåœ¨javaä»£ç ä¸­å¯¹é˜Ÿåˆ—çš„ç®¡ç†ï¼Œç”¨æ¥åˆ›å»ºï¼Œç»‘å®šï¼Œåˆ é™¤é˜Ÿåˆ—ä¸äº¤ æ¢æœºï¼Œå‘é€æ¶ˆæ¯ç­‰--&gt;&lt;rabbit:admin connection-factory=&quot;connectionFactory&quot;/&gt;&lt;!--6.é…ç½®rabbitmqçš„æ¨¡ç‰ˆ--&gt;&lt;rabbit:template id=&quot;rabbitTemplate&quot;connection-factory=&quot;connectionFactory&quot; exchange=&quot;my_exchange&quot;/&gt;&lt;!-- ##################################################################--&gt;&lt;!--æ­»ä¿¡é˜Ÿåˆ—--&gt;&lt;rabbit:queue name=&quot;dlx_queue&quot;/&gt;&lt;!--å®šå‘æ­»ä¿¡äº¤æ¢æœº--&gt;&lt;rabbit:direct-exchange name=&quot;dlx_exchange&quot; &gt; &lt;rabbit:bindings&gt; &lt;rabbit:binding key=&quot;dlx_ttl&quot; queue=&quot;dlx_queue&quot;&gt;&lt;/rabbit:binding&gt; &lt;rabbit:binding key=&quot;dlx_max&quot; queue=&quot;dlx_queue&quot;&gt;&lt;/rabbit:binding&gt; &lt;/rabbit:bindings&gt;&lt;/rabbit:direct-exchange&gt;&lt;!--æµ‹è¯•è¶…æ—¶çš„é˜Ÿåˆ—--&gt;&lt;rabbit:queue name=&quot;test_ttl_queue&quot;&gt; &lt;rabbit:queue-arguments&gt; &lt;!--é˜Ÿåˆ—ttlä¸º6ç§’--&gt; &lt;entry key=&quot;x-message-ttl&quot; value-type=&quot;long&quot; value=&quot;6000&quot;/&gt; &lt;!--è¶…æ—¶ æ¶ˆæ¯ æŠ•é€’ç»™ æ­»ä¿¡äº¤æ¢æœº--&gt; &lt;entry key=&quot;x-dead-letter-exchange&quot; value=&quot;dlx_exchange&quot;/&gt; &lt;/rabbit:queue-arguments&gt;&lt;/rabbit:queue&gt;&lt;!--æµ‹è¯•è¶…é•¿åº¦çš„é˜Ÿåˆ—--&gt;&lt;rabbit:queue name=&quot;test_max_queue&quot;&gt; &lt;rabbit:queue-arguments&gt; &lt;!--é˜Ÿåˆ—ttlä¸º6ç§’--&gt; &lt;entry key=&quot;x-max-length&quot; value-type=&quot;long&quot; value=&quot;2&quot;/&gt; &lt;!--è¶…æ—¶ æ¶ˆæ¯ æŠ•é€’ç»™ æ­»ä¿¡äº¤æ¢æœº--&gt; &lt;entry key=&quot;x-dead-letter-exchange&quot; value=&quot;dlx_exchange&quot;/&gt; &lt;/rabbit:queue-arguments&gt;&lt;/rabbit:queue&gt;&lt;!--å®šå‘æµ‹è¯•äº¤æ¢æœº--&gt;&lt;rabbit:direct-exchange name=&quot;my_exchange&quot; &gt; &lt;rabbit:bindings&gt; &lt;rabbit:binding key=&quot;dlx_ttl&quot; queue=&quot;test_ttl_queue&quot;&gt;&lt;/rabbit:binding&gt; &lt;rabbit:binding key=&quot;dlx_max&quot; queue=&quot;test_max_queue&quot;&gt;&lt;/rabbit:binding&gt; &lt;/rabbit:bindings&gt;&lt;/rabbit:direct-exchange&gt; å‘æ¶ˆæ¯è¿›è¡Œæµ‹è¯• 123456789101112public class SenderDLX &#123; public static void main(String[] args) &#123; ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring/spring-rabbitmq-producer-dlx.xml&quot;); RabbitTemplate rabbitTemplate = context.getBean(RabbitTemplate.class); // rabbitTemplate.convertAndSend(&quot;dlx_ttl&quot;, &quot;æµ‹è¯•è¶…æ—¶&quot;.getBytes()); rabbitTemplate.convertAndSend(&quot;dlx_max&quot;, &quot;æµ‹è¯•é•¿åº¦1&quot;.getBytes()); rabbitTemplate.convertAndSend(&quot;dlx_max&quot;, &quot;æµ‹è¯•é•¿åº¦2&quot;.getBytes()); rabbitTemplate.convertAndSend(&quot;dlx_max&quot;, &quot;æµ‹è¯•é•¿åº¦3&quot;.getBytes()); System.out.println(&quot;æ¶ˆæ¯å·²å‘å‡º...&quot;); context.close(); &#125;&#125; 2.10 å»¶è¿Ÿé˜Ÿåˆ— å»¶è¿Ÿé˜Ÿåˆ—ï¼šTTL + æ­»ä¿¡é˜Ÿåˆ—çš„åˆä½“ æ­»ä¿¡é˜Ÿåˆ—åªæ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œé‡Œé¢çš„æ¶ˆæ¯ä»ç„¶å¯ä»¥æ¶ˆè´¹ åœ¨ç”µå•†å¼€å‘éƒ¨åˆ†ä¸­ï¼Œéƒ½ä¼šæ¶‰åŠåˆ°å»¶æ—¶å…³é—­è®¢å•ï¼Œæ­¤æ—¶å»¶è¿Ÿé˜Ÿåˆ—æ­£å¥½å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ 2.10.1 ç”Ÿäº§è€…æ²¿ç”¨ä¸Šé¢æ­»ä¿¡é˜Ÿåˆ—æ¡ˆä¾‹çš„è¶…æ—¶æµ‹è¯•ï¼Œè¶…æ—¶æ—¶é—´æ”¹ä¸ºè®¢å•å…³é—­æ—¶é—´å³å¯ 2.10.2 æ¶ˆè´¹è€… spring-rabbitmq-consumer.xml 1234&lt;!-- ç›‘å¬æ­»ä¿¡é˜Ÿåˆ— --&gt;&lt;rabbit:listener-container connection-factory=&quot;connectionFactory&quot; prefetch=&quot;3&quot; acknowledge=&quot;manual&quot;&gt; &lt;rabbit:listener ref=&quot;consumerListener&quot; queue-names=&quot;dlx_queue&quot; /&gt;&lt;/rabbit:listener-container&gt; 3. RabbitMQé›†ç¾¤rabbitmqæœ‰3ç§æ¨¡å¼ï¼Œä½†é›†ç¾¤æ¨¡å¼æ˜¯2ç§ã€‚è¯¦ç»†å¦‚ä¸‹ï¼š å•ä¸€æ¨¡å¼ï¼šå³å•æœºæƒ…å†µä¸åšé›†ç¾¤ï¼Œå°±å•ç‹¬è¿è¡Œä¸€ä¸ªrabbitmqè€Œå·²ã€‚ä¹‹å‰æˆ‘ä»¬ä¸€ç›´åœ¨ç”¨ æ™®é€šæ¨¡å¼ï¼šé»˜è®¤æ¨¡å¼ï¼Œä»¥ä¸¤ä¸ªèŠ‚ç‚¹ï¼ˆAã€Bï¼‰ä¸ºä¾‹æ¥è¿›è¡Œè¯´æ˜ å½“æ¶ˆæ¯è¿›å…¥AèŠ‚ç‚¹çš„Queueåï¼Œconsumerä»BèŠ‚ç‚¹æ¶ˆè´¹æ—¶ï¼ŒRabbitMQä¼šåœ¨Aå’ŒBä¹‹é—´åˆ›å»ºä¸´æ—¶é€šé“è¿›è¡Œæ¶ˆæ¯ä¼ è¾“ï¼ŒæŠŠAä¸­çš„æ¶ˆæ¯å®ä½“å–å‡ºå¹¶ç»è¿‡é€šè¿‡äº¤ç»™Bå‘é€ç»™consumer å½“Aæ•…éšœåï¼ŒBå°±æ— æ³•å–åˆ°AèŠ‚ç‚¹ä¸­æœªæ¶ˆè´¹çš„æ¶ˆæ¯å®ä½“ å¦‚æœåšäº†æ¶ˆæ¯æŒä¹…åŒ–ï¼Œé‚£ä¹ˆå¾—ç­‰AèŠ‚ç‚¹æ¢å¤ï¼Œç„¶åæ‰å¯è¢«æ¶ˆè´¹ å¦‚æœæ²¡æœ‰æŒä¹…åŒ–çš„è¯ï¼Œå°±ä¼šäº§ç”Ÿæ¶ˆæ¯ä¸¢å¤±çš„ç°è±¡ é•œåƒæ¨¡å¼ï¼šéå¸¸ç»å…¸çš„ mirror é•œåƒæ¨¡å¼ï¼Œä¿è¯ 100% æ•°æ®ä¸ä¸¢å¤±ã€‚ é«˜å¯é æ€§è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦å°±æ˜¯å®ç°æ•°æ®çš„åŒæ­¥ï¼Œä¸€èˆ¬æ¥è®²æ˜¯ 2 - 3 ä¸ªèŠ‚ç‚¹å®ç°æ•°æ®åŒæ­¥ å¯¹äº 100% æ•°æ®å¯é æ€§è§£å†³æ–¹æ¡ˆï¼Œä¸€èˆ¬æ˜¯é‡‡ç”¨ 3 ä¸ªèŠ‚ç‚¹ã€‚ åœ¨å®é™…å·¥ä½œä¸­ä¹Ÿæ˜¯ç”¨å¾—æœ€å¤šçš„ï¼Œå¹¶ä¸”å®ç°éå¸¸çš„ç®€å•ï¼Œä¸€èˆ¬äº’è”ç½‘å¤§å‚éƒ½ä¼šæ„å»ºè¿™ç§é•œåƒé›†ç¾¤æ¨¡å¼ è¿˜æœ‰ä¸»å¤‡æ¨¡å¼ï¼Œè¿œç¨‹æ¨¡å¼ï¼Œå¤šæ´»æ¨¡å¼ç­‰ï¼Œæœ¬æ¬¡è¯¾ç¨‹ä¸ä½œä¸ºé‡ç‚¹ï¼Œå¯è‡ªè¡ŒæŸ¥é˜…èµ„æ–™äº†è§£ 3.1 é›†ç¾¤æ­å»ºå‰ç½®æ¡ä»¶ï¼šå‡†å¤‡ä¸¤å°linuxï¼Œå¹¶å®‰è£…å¥½rabbitmq é›†ç¾¤æ­¥éª¤å¦‚ä¸‹ï¼š ä¿®æ”¹ &#x2F;etc&#x2F;hosts æ˜ å°„æ–‡ä»¶ AæœåŠ¡å™¨ï¼š 1234567127.0.0.1 A localhost localhost.localdomain localhost4localhost4.localdomain4::1 A localhost localhost.localdomain localhost6localhost6.localdomain6192.168.204.141 A192.168.204.142 B BæœåŠ¡å™¨ï¼š 1234567127.0.0.1 B localhost localhost.localdomain localhost4localhost4.localdomain4::1 B localhost localhost.localdomain localhost6localhost6.localdomain6192.168.204.141 A192.168.204.142 B ç›¸äº’é€šä¿¡ï¼Œcookieå¿…é¡»ä¿æŒä¸€è‡´ï¼ŒåŒæ­¥ rabbitmqçš„cookie æ–‡ä»¶ï¼šè·¨æœåŠ¡å™¨æ‹·è´ .erlang.cookieï¼ˆéšè—æ–‡ä»¶ï¼Œä½¿ç”¨ ls -all æ˜¾ç¤ºï¼‰ 1[root@A opt]# scp /var/lib/rabbitmq/.erlang.cookie 192.168.204.142:/var/lib/rabbitmq ä¿®æ”¹cookieæ–‡ä»¶ï¼Œè¦é‡å¯æœåŠ¡å™¨ï¼Œreboot åœæ­¢é˜²ç«å¢™ï¼Œå¯åŠ¨rabbitmqæœåŠ¡ 12[root@A ~]# systemctl stop firewalld [root@A ~]# systemctl start rabbitmq-server åŠ å…¥é›†ç¾¤èŠ‚ç‚¹ 123[root@B ~]# rabbitmqctl stop_app [root@B ~]# rabbitmqctl join_cluster rabbit@A [root@B ~]# rabbitmqctl start_app æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ 1[root@B ~]# rabbitmqctl cluster_status æŸ¥çœ‹ç®¡ç†ç«¯ æ­å»ºé›†ç¾¤ç»“æ„ä¹‹åï¼Œä¹‹å‰åˆ›å»ºçš„äº¤æ¢æœºã€é˜Ÿåˆ—ã€ç”¨æˆ·éƒ½å±äºå•ä¸€ç»“æ„ï¼Œåœ¨æ–°çš„é›†ç¾¤ç¯å¢ƒä¸­æ˜¯ä¸èƒ½ç”¨çš„ æ‰€ä»¥åœ¨æ–°çš„é›†ç¾¤ä¸­é‡æ–°æ‰‹åŠ¨æ·»åŠ ç”¨æˆ·å³å¯ï¼ˆä»»æ„èŠ‚ç‚¹æ·»åŠ ï¼Œæ‰€æœ‰èŠ‚ç‚¹å…±äº«ï¼‰ 123[root@A ~]# rabbitmqctl add_user laosun 123123 [root@A ~]# rabbitmqctl set_user_tags laosun administrator [root@A ~]# rabbitmqctl set_permissions -p &quot;/&quot; laosun &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; æ³¨æ„ï¼šå½“èŠ‚ç‚¹è„±ç¦»é›†ç¾¤è¿˜åŸæˆå•ä¸€ç»“æ„åï¼Œäº¤æ¢æœºï¼Œé˜Ÿåˆ—å’Œç”¨æˆ·ç­‰æ•°æ® éƒ½ä¼šé‡æ–°å›æ¥ æ­¤æ—¶ï¼Œé›†ç¾¤æ­å»ºå®Œæ¯•ï¼Œä½†æ˜¯é»˜è®¤é‡‡ç”¨çš„æ¨¡å¼**â€œæ™®é€šæ¨¡å¼â€**ï¼Œå¯é æ€§ä¸é«˜ 3.2 é•œåƒæ¨¡å¼ å°†æ‰€æœ‰é˜Ÿåˆ—è®¾ç½®ä¸ºé•œåƒé˜Ÿåˆ—ï¼Œå³é˜Ÿåˆ—ä¼šè¢«å¤åˆ¶åˆ°å„ä¸ªèŠ‚ç‚¹ï¼Œå„ä¸ªèŠ‚ç‚¹çŠ¶æ€ä¸€è‡´ è¯­æ³•ï¼šset_policy {name} {pattern} {definition} nameï¼šç­–ç•¥åï¼Œå¯è‡ªå®šä¹‰ patternï¼šé˜Ÿåˆ—çš„åŒ¹é…æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ â€œ^â€ å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚â€^queue_â€ è¡¨ç¤ºå¯¹é˜Ÿåˆ—åç§°ä»¥â€œqueue_â€å¼€å¤´çš„æ‰€æœ‰é˜Ÿåˆ—è¿›è¡Œé•œåƒï¼Œè€Œâ€^â€è¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„é˜Ÿåˆ— definitionï¼šé•œåƒå®šä¹‰ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ha-mode, ha-params, ha-sync-mode ha-modeï¼šï¼ˆHigh Availableï¼Œé«˜å¯ç”¨ï¼‰æ¨¡å¼ï¼ŒæŒ‡æ˜é•œåƒé˜Ÿåˆ—çš„æ¨¡å¼ï¼Œæœ‰æ•ˆå€¼ä¸ºall&#x2F;exactly&#x2F;nodesï¼Œå½“å‰ç­–ç•¥æ¨¡å¼ä¸º allï¼Œå³å¤åˆ¶åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼ŒåŒ…å«æ–°å¢èŠ‚ç‚¹ 123allï¼šè¡¨ç¤ºåœ¨é›†ç¾¤ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒ exactlyï¼šè¡¨ç¤ºåœ¨æŒ‡å®šä¸ªæ•°çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒï¼ŒèŠ‚ç‚¹çš„ä¸ªæ•°ç”±ha-paramsæŒ‡å®š nodesï¼šè¡¨ç¤ºåœ¨æŒ‡å®šçš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒï¼ŒèŠ‚ç‚¹åç§°é€šè¿‡ha-paramsæŒ‡å®š ha-paramsï¼šha-modeæ¨¡å¼éœ€è¦ç”¨åˆ°çš„å‚æ•° ha-sync-modeï¼šè¿›è¡Œé˜Ÿåˆ—ä¸­æ¶ˆæ¯çš„åŒæ­¥æ–¹å¼ï¼Œæœ‰æ•ˆå€¼ä¸ºautomaticå’Œmanual 1[root@A ~]# rabbitmqctl set_policy xall &quot;^&quot; &#x27;&#123;&quot;ha-mode&quot;:&quot;all&quot;&#125;&#x27; é€šè¿‡ç®¡ç†ç«¯è®¾ç½®é•œåƒç­–ç•¥ 3.3 HAProxyå®ç°é•œåƒé˜Ÿåˆ—çš„è´Ÿè½½å‡è¡¡ è™½ç„¶æˆ‘ä»¬åœ¨ç¨‹åºä¸­è®¿é—®AæœåŠ¡å™¨ï¼Œå¯ä»¥å®ç°æ¶ˆæ¯çš„åŒæ­¥ï¼Œè™½ç„¶åœ¨åŒæ­¥ï¼Œä½†éƒ½æ˜¯AæœåŠ¡å™¨åœ¨æ¥æ”¶æ¶ˆæ¯ï¼ŒAå¤ªç´¯ æ˜¯å¦å¯ä»¥æƒ³Nginxä¸€æ ·ï¼Œåšè´Ÿè½½å‡è¡¡ï¼ŒAå’ŒBè½®æµæ¥æ”¶æ¶ˆæ¯ï¼Œå†é•œåƒåŒæ­¥ 3.3.1 HAProxyç®€ä»‹ HAï¼ˆHigh Availableï¼Œé«˜å¯ç”¨ï¼‰ï¼ŒProxyï¼ˆä»£ç†ï¼‰ HAProxyæ˜¯ä¸€æ¬¾æä¾›é«˜å¯ç”¨æ€§ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå¹¶ä¸”åŸºäºTCPå’ŒHTTPåº”ç”¨çš„ä»£ç†è½¯ä»¶ HAProxyå®Œå…¨å…è´¹ HAProxyå¯ä»¥æ”¯æŒæ•°ä»¥ä¸‡è®¡çš„å¹¶å‘è¿æ¥ HAProxyå¯ä»¥ç®€å•åˆå®‰å…¨çš„æ•´åˆè¿›æ¶æ„ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŠ¤webæœåŠ¡å™¨ä¸è¢«æš´éœ²åˆ°ç½‘ç»œä¸Š 3.3.2 HAProxyä¸NginxOSIï¼šï¼ˆOpen System Interconnectionï¼šå¼€æ”¾å¼ç³»ç»Ÿäº’è” æ˜¯æŠŠç½‘ç»œé€šä¿¡çš„å·¥ä½œåˆ†ä¸º7å±‚,åˆ†åˆ«æ˜¯ç‰©ç†å±‚,æ•°æ®é“¾è·¯å±‚,ç½‘ç»œå±‚,ä¼ è¾“å±‚,ä¼šè¯å±‚,è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚ï¼‰ Nginxçš„ä¼˜ç‚¹ï¼š å·¥ä½œåœ¨OSIç¬¬7å±‚ï¼Œå¯ä»¥é’ˆå¯¹httpåº”ç”¨åšä¸€äº›åˆ†æµçš„ç­–ç•¥ Nginxå¯¹ç½‘ç»œçš„ä¾èµ–éå¸¸å°ï¼Œç†è®ºä¸Šèƒ½pingé€šå°±å°±èƒ½è¿›è¡Œè´Ÿè½½åŠŸèƒ½ï¼Œå±¹ç«‹è‡³ä»Šçš„ç»å¯¹ä¼˜åŠ¿ Nginxå®‰è£…å’Œé…ç½®æ¯”è¾ƒç®€å•ï¼Œæµ‹è¯•èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼› Nginxä¸ä»…ä»…æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„è´Ÿè½½å‡è¡¡å™¨&#x2F;åå‘ä»£ç†è½¯ä»¶ï¼Œå®ƒåŒæ—¶ä¹Ÿæ˜¯åŠŸèƒ½å¼ºå¤§çš„Webåº”ç”¨æœåŠ¡å™¨ HAProxyçš„ä¼˜ç‚¹ï¼š å·¥ä½œåœ¨ç½‘ç»œ4å±‚å’Œ7å±‚ï¼Œæ”¯æŒTCPä¸Httpåè®®ï¼Œ å®ƒä»…ä»…å°±åªæ˜¯ä¸€æ¬¾è´Ÿè½½å‡è¡¡è½¯ä»¶ï¼›å•çº¯ä»æ•ˆç‡ä¸Šæ¥è®²HAProxyæ›´ä¼šæ¯”Nginxæœ‰æ›´å‡ºè‰²çš„è´Ÿè½½å‡è¡¡é€Ÿåº¦ï¼Œåœ¨å¹¶å‘å¤„ç†ä¸Šä¹Ÿæ˜¯ä¼˜äºNginxçš„ æ”¯æŒ8ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ ï¼Œæ”¯æŒå¿ƒè·³æ£€æµ‹ æ€§èƒ½ä¸ŠHAèƒœï¼ŒåŠŸèƒ½æ€§å’Œä¾¿åˆ©æ€§ä¸ŠNginxèƒœ å¯¹äºHttpåè®®ï¼ŒHaproxyå¤„ç†æ•ˆç‡æ¯”Nginxé«˜ã€‚æ‰€ä»¥ï¼Œæ²¡æœ‰ç‰¹æ®Šè¦æ±‚çš„æ—¶å€™æˆ–è€…ä¸€èˆ¬åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨Haproxyæ¥åšHttpåè®®è´Ÿè½½ ä½†å¦‚æœæ˜¯Webåº”ç”¨ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨Nginxï¼ æ€»ä¹‹ï¼Œå¤§å®¶å¯ä»¥ç»“åˆå„è‡ªä½¿ç”¨åœºæ™¯çš„ç‰¹ç‚¹æ¥è¿›è¡Œåˆç†åœ°é€‰æ‹© 3.3.3 å®‰è£…å’Œé…ç½®HAProxyä¸‹è½½ï¼šhttp://www.haproxy.org/download/1.8/src/haproxy-1.8.12.tar.gz è§£å‹ 1[root@localhost opt]# tar -zxvf haproxy-1.8.12.tar.gz makeæ—¶éœ€è¦ä½¿ç”¨ TARGET æŒ‡å®šå†…æ ¸åŠç‰ˆæœ¬ 12[root@localhost opt]# uname -r 3.10.0-514.6.2.el7.x86_64 æ ¹æ®å†…æ ¸ç‰ˆæœ¬é€‰æ‹©ç¼–è¯‘å‚æ•°ï¼š è¿›å…¥ç›®å½•ï¼Œç¼–è¯‘å’Œå®‰è£… 123[root@localhost opt]# cd haproxy-1.8.12 [root@localhost haproxy-1.8.12]# make TARGET=linux2628 PREFIX=/usr/local/haproxy [root@localhost haproxy-1.8.12]# make install PREFIX=/usr/local/haproxy å®‰è£…æˆåŠŸåï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ 1[root@localhost haproxy-1.8.12]# /usr/local/haproxy/sbin/haproxy -v é…ç½®å¯åŠ¨æ–‡ä»¶ï¼Œå¤åˆ¶haproxyæ–‡ä»¶åˆ°&#x2F;usr&#x2F;sbinä¸‹ ï¼Œå¤åˆ¶haproxyè„šæœ¬ï¼Œåˆ°&#x2F;etc&#x2F;init.dä¸‹ 123[root@localhost haproxy-1.8.12]# cp /usr/local/haproxy/sbin/haproxy /usr/sbin/[root@localhost haproxy-1.8.12]# cp ./examples/haproxy.init /etc/init.d/haproxy[root@localhost haproxy-1.8.12]# chmod 755 /etc/init.d/haproxy åˆ›å»ºç³»ç»Ÿè´¦å· 1[root@localhost haproxy-1.8.12]# useradd -r haproxy haproxy.cfg é…ç½®æ–‡ä»¶éœ€è¦è‡ªè¡Œåˆ›å»º 12[root@localhost haproxy-1.8.12]# mkdir /etc/haproxy [root@localhost haproxy-1.8.12]# vim /etc/haproxy/haproxy.cfg æ·»åŠ é…ç½®ä¿¡æ¯åˆ°haproxy.cfg 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#å…¨å±€é…ç½® global #è®¾ç½®æ—¥å¿— log 127.0.0.1 local0 info #å½“å‰å·¥ä½œç›®å½• chroot /usr/local/haproxy #ç”¨æˆ·ä¸ç”¨æˆ·ç»„ user haproxy group haproxy #è¿è¡Œè¿›ç¨‹ID uid 99 gid 99 #å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ daemon #æœ€å¤§è¿æ¥æ•° maxconn 4096 #é»˜è®¤é…ç½® defaults #åº”ç”¨å…¨å±€çš„æ—¥å¿—é…ç½® log global #é»˜è®¤çš„æ¨¡å¼mode &#123;tcp|http|health&#125;ï¼ŒTCPæ˜¯4å±‚ï¼ŒHTTPæ˜¯7å±‚ï¼Œhealthåªè¿”å›OK mode tcp #æ—¥å¿—ç±»åˆ«tcplog option tcplog #ä¸è®°å½•å¥åº·æ£€æŸ¥æ—¥å¿—ä¿¡æ¯ option dontlognull #3æ¬¡å¤±è´¥åˆ™è®¤ä¸ºæœåŠ¡ä¸å¯ç”¨ retries 3 #æ¯ä¸ªè¿›ç¨‹å¯ç”¨çš„æœ€å¤§è¿æ¥æ•° maxconn 2000 #è¿æ¥è¶…æ—¶ timeout connect 5s #å®¢æˆ·ç«¯è¶…æ—¶30ç§’ï¼Œhaå°±ä¼šå‘èµ·é‡æ–°è¿æ¥ timeout client 30s #æœåŠ¡ç«¯è¶…æ—¶15ç§’ï¼Œhaå°±ä¼šå‘èµ·é‡æ–°è¿æ¥ timeout server 15s #ç»‘å®šé…ç½® listen rabbitmq_cluster bind 192.168.204.143:5672 #é…ç½®TCPæ¨¡å¼ mode tcp #ç®€å•çš„è½®è¯¢ balance roundrobin #RabbitMQé›†ç¾¤èŠ‚ç‚¹é…ç½®ï¼Œæ¯éš”5ç§’å¯¹mqé›†ç¾¤åšæ£€æŸ¥ï¼Œ2æ¬¡æ­£ç¡®è¯æ˜æœåŠ¡å¯ç”¨ï¼Œ3æ¬¡å¤±è´¥è¯ æ˜æœåŠ¡ä¸å¯ç”¨ server A 192.168.204.141:5672 check inter 5000 rise 2 fall 3 server B 192.168.204.142:5672 check inter 5000 rise 2 fall 3 #haproxyç›‘æ§é¡µé¢åœ°å€ listen monitor bind 192.168.204.143:8100 mode http option httplog stats enable # ç›‘æ§é¡µé¢åœ°å€ http://192.168.204.143:8100/monitor stats uri /monitor stats refresh 5s å¯åŠ¨HAProxy 1[root@localhost haproxy]# service haproxy start è®¿é—®ç›‘æ§ä¸­å¿ƒï¼šhttp://192.168.204.143:8100/monitor è®°å¾—å…³é—­é˜²ç«å¢™ï¼š systemctl stop firewalld é¡¹ç›®å‘æ¶ˆæ¯ï¼Œåªéœ€è¦å°†æœåŠ¡å™¨åœ°å€ä¿®æ”¹ä¸º143å³å¯ï¼Œå…¶ä½™ä¸å˜ æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šäº¤ç»™HAProxyï¼Œå…¶è´Ÿè½½å‡è¡¡ç»™æ¯ä¸ªrabbitmqæœåŠ¡å™¨ 3.4 KeepAlivedæ­å»ºé«˜å¯ç”¨çš„HAProxyé›†ç¾¤ç°åœ¨çš„æœ€åä¸€ä¸ªé—®é¢˜æš´éœ²å‡ºæ¥äº†ï¼Œå¦‚æœHAProxyæœåŠ¡å™¨å®•æœºï¼ŒrabbitmqæœåŠ¡å™¨å°±ä¸å¯ç”¨äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹HAProxyä¹Ÿè¦åšé«˜å¯ç”¨çš„é›†ç¾¤ 3.4.1 æ¦‚è¿° Keepalivedæ˜¯Linuxä¸‹ä¸€ä¸ªè½»é‡çº§åˆ«çš„é«˜å¯ç”¨çƒ­å¤‡è§£å†³æ–¹æ¡ˆ Keepalivedçš„ä½œç”¨æ˜¯æ£€æµ‹æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œå®ƒæ ¹æ®TCP&#x2F;IPå‚è€ƒæ¨¡å‹çš„ç¬¬ä¸‰ã€ç¬¬å››å±‚ã€ç¬¬äº”å±‚äº¤æ¢æœºåˆ¶æ£€æµ‹æ¯ä¸ªæœåŠ¡èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œå¦‚æœæœ‰ä¸€å°webæœåŠ¡å™¨å®•æœºï¼Œæˆ–å·¥ä½œå‡ºç°æ•…éšœï¼ŒKeepalivedå°†æ£€æµ‹åˆ°ï¼Œå¹¶å°†æœ‰æ•…éšœçš„æœåŠ¡å™¨ä»ç³»ç»Ÿä¸­å‰”é™¤ï¼ŒåŒæ—¶ä½¿ç”¨å…¶ä»–æœåŠ¡å™¨ä»£æ›¿è¯¥æœåŠ¡å™¨çš„å·¥ä½œï¼Œå½“æœåŠ¡å™¨å·¥ä½œæ­£å¸¸åKeepalivedè‡ªåŠ¨å°†æœåŠ¡å™¨åŠ å…¥åˆ°æœåŠ¡å™¨ç¾¤ä¸­ï¼Œè¿™äº›å·¥ä½œå…¨éƒ¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦äººå·¥å¹²æ¶‰ï¼Œéœ€è¦äººå·¥åšçš„åªæ˜¯ä¿®å¤æ•…éšœçš„æœåŠ¡å™¨ã€‚ keepalivedåŸºäºvrrpï¼ˆVirtual Router Redundancy Protocolï¼Œè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ï¼‰åè®®ï¼Œvrrpå®ƒæ˜¯ä¸€ç§ä¸»å¤‡ï¼ˆä¸»æœºå’Œå¤‡ç”¨æœºï¼‰æ¨¡å¼çš„åè®®ï¼Œé€šè¿‡VRRPå¯ä»¥åœ¨ç½‘ç»œå‘ç”Ÿæ•…éšœæ—¶é€æ˜çš„è¿›è¡Œè®¾å¤‡åˆ‡æ¢è€Œä¸å½±å“ä¸»æœºä¹‹é—´çš„æ•°æ®é€šä¿¡ ä¸¤å°ä¸»æœºä¹‹é—´ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿçš„ipï¼Œæˆ‘ä»¬ç§°æ¼‚ç§»ipï¼Œæ¼‚ç§»ipç”±ä¸»æœåŠ¡å™¨æ‰¿æ‹…ï¼Œä¸€ä½†ä¸»æœåŠ¡å™¨å®•æœºï¼Œå¤‡ä»½æœåŠ¡å™¨å°±ä¼šæŠ¢å¤ºæ¼‚ç§»ipï¼Œç»§ç»­å·¥ä½œï¼Œæœ‰æ•ˆçš„è§£å†³äº†ç¾¤é›†ä¸­çš„å•ç‚¹æ•…éšœ è¯´ç™½äº†ï¼Œå°†å¤šå°è·¯ç”±å™¨è®¾å¤‡è™šæ‹Ÿæˆä¸€ä¸ªè®¾å¤‡ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€ipï¼ˆVIPï¼‰ 3.4.2 å®‰è£…KeepAlived ä¿®æ”¹hostsæ–‡ä»¶çš„åœ°å€æ˜ å°„ IP ç”¨é€” ä¸»æœºå 192.168.204.143 KeepAlived HAProxy C 192.168.204.144 KeepAlived HAProxy D å®‰è£… keepalived 1[root@C ~]# yum install -y keepalived ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆå†…å®¹å¤§æ”¹ï¼Œä¸å¦‚åˆ æ‰ï¼Œé‡æ–°åˆ›å»ºï¼‰ 12[root@C ~]# rm -rf /etc/keepalived/keepalived.conf [root@C ~]# vim /etc/keepalived/keepalived.conf 1234567891011121314151617181920212223242526272829303132333435363738! Configuration File for keepalivedglobal_defs &#123; router_id C ## éå¸¸é‡è¦ï¼Œæ ‡è¯†æœ¬æœºçš„hostname&#125; vrrp_script chk_haproxy&#123; script &quot;/etc/keepalived/haproxy_check.sh&quot; ## æ‰§è¡Œçš„è„šæœ¬ä½ç½® interval 2 ## æ£€æµ‹æ—¶é—´é—´éš” weight -20 ## å¦‚æœæ¡ä»¶æˆç«‹åˆ™æƒé‡å‡20&#125;vrrp_instance VI_1 &#123; state MASTER ## éå¸¸é‡è¦ï¼Œæ ‡è¯†ä¸»æœºï¼Œå¤‡ç”¨æœº143æ”¹ä¸º BACKUP interface ens33 ## éå¸¸é‡è¦ï¼Œç½‘å¡åï¼ˆifconfigæŸ¥çœ‹ï¼‰ virtual_router_id 66 ## éå¸¸é‡è¦ï¼Œè‡ªå®šä¹‰ï¼Œè™šæ‹Ÿè·¯ç”±IDå·ï¼ˆä¸»å¤‡èŠ‚ç‚¹è¦ç›¸åŒï¼‰ priority 100 ## ä¼˜å…ˆçº§ï¼ˆ0-254ï¼‰ï¼Œä¸€èˆ¬ä¸»æœºçš„å¤§äºå¤‡æœº advert_int 1 ## ä¸»å¤‡ä¿¡æ¯å‘é€é—´éš”ï¼Œä¸¤ä¸ªèŠ‚ç‚¹å¿…é¡»ä¸€è‡´ï¼Œé»˜è®¤1ç§’ authentication &#123; ## è®¤è¯åŒ¹é…ï¼Œè®¾ç½®è®¤è¯ç±»å‹å’Œå¯†ç ï¼ŒMASTERå’ŒBACKUPå¿…é¡»ä½¿ ç”¨ç›¸åŒçš„å¯†ç æ‰èƒ½æ­£å¸¸é€šä¿¡ auth_type PASS auth_pass 1111 &#125; track_script &#123; chk_haproxy ## æ£€æŸ¥haproxyå¥åº·çŠ¶å†µçš„è„šæœ¬ &#125; virtual_ipaddress &#123; ## ç®€ç§°â€œVIPâ€ 192.168.204.66/24 ## éå¸¸é‡è¦ï¼Œè™šæ‹Ÿipï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œä»¥åè¿æ¥mqå°±ç”¨è¿™ä¸ªè™šæ‹Ÿip &#125;&#125;virtual_server 192.168.204.66 5672 &#123; ## è™šæ‹Ÿipçš„è¯¦ç»†é…ç½® delay_loop 6 # å¥åº·æ£€æŸ¥é—´éš”ï¼Œå•ä½ä¸ºç§’ lb_algo rr # lvsè°ƒåº¦ç®—æ³•rr|wrr|lc|wlc|lblc|sh|dh lb_kind NAT # è´Ÿè½½å‡è¡¡è½¬å‘è§„åˆ™ã€‚ä¸€èˆ¬åŒ…æ‹¬DR,NAT,TUN 3ç§ protocol TCP # è½¬å‘åè®®ï¼Œæœ‰TCPå’ŒUDPä¸¤ç§ï¼Œä¸€èˆ¬ç”¨TCP real_server 192.168.204.143 5672 &#123; ## æœ¬æœºçš„çœŸå®ip weight 1 # é»˜è®¤ä¸º1,0ä¸ºå¤±æ•ˆ &#125;&#125; åˆ›å»ºæ‰§è¡Œè„šæœ¬ &#x2F;etc&#x2F;keepalived&#x2F;haproxy_check.sh 123456789#!/bin/bashCOUNT=`ps -C haproxy --no-header |wc -l`if [ $COUNT -eq 0 ];then /usr/local/haproxy/sbin/haproxy -f /etc/haproxy/haproxy.cfg sleep 2 if [ `ps -C haproxy --no-header |wc -l` -eq 0 ];then killall keepalived fifi Keepalived ç»„ä¹‹é—´çš„å¿ƒè·³æ£€æŸ¥å¹¶ä¸èƒ½å¯Ÿè§‰åˆ° HAproxy è´Ÿè½½æ˜¯å¦æ­£å¸¸ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ­¤è„šæœ¬ã€‚åœ¨ Keepalived ä¸»æœºä¸Šï¼Œå¼€å¯æ­¤è„šæœ¬æ£€æµ‹ HAproxy æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œå¦‚æ­£å¸¸å·¥ä½œï¼Œè®°å½•æ—¥å¿—ã€‚å¦‚è¿›ç¨‹ä¸å­˜åœ¨ï¼Œåˆ™å°è¯•é‡å¯ HAproxy ï¼Œ2ç§’åæ£€æµ‹ï¼Œå¦‚æœè¿˜æ²¡æœ‰ï¼Œåˆ™å…³æ‰ä¸» Keepalived ï¼Œæ­¤æ—¶å¤‡Keepalived æ£€æµ‹åˆ°ä¸» Keepalived æŒ‚æ‰ï¼Œæ¥ç®¡VIPï¼Œç»§ç»­æœåŠ¡ æˆæƒï¼Œå¦åˆ™ä¸èƒ½æ‰§è¡Œ 1[root@C etc]# chmod +x /etc/keepalived/haproxy_check.sh å¯åŠ¨keepalivedï¼ˆä¸¤å°éƒ½å¯åŠ¨ï¼‰ 12[root@C etc]# systemctl stop firewalld [root@C etc]# service keepalived start | stop | status | restart æŸ¥çœ‹çŠ¶æ€ 12[root@C etc]# ps -ef | grep haproxy[root@C etc]# ps -ef | grep keepalived æŸ¥çœ‹ipæƒ…å†µ ip addr æˆ– ip a 1[root@C etc]# ip a æ­¤æ—¶ï¼Œå®‰è£…å®Œæ¯•ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤å°±å¯ä»¥å®‰è£…ç¬¬äºŒå°äº†ï¼ˆæœåŠ¡å™¨hostnameå’Œipæ³¨æ„è¦ä¿®æ”¹ï¼‰ å¸¸è§çš„ç½‘ç»œé”™è¯¯ï¼šå­ç½‘æ©ç ã€ç½‘å…³ç­‰ä¿¡æ¯è¦ä¸€è‡´ 3.4.3 æµ‹è¯•ipæ¼‚ç§»çš„è§„åˆ™ æŸ¥çœ‹è™šæ‹Ÿip ip addr æˆ– ip a ç›®å‰ï¼ŒCèŠ‚ç‚¹æ˜¯ä¸»æœºï¼Œæ‰€ä»¥è™šæ‹Ÿipåœ¨CèŠ‚ç‚¹ åœæ­¢Cçš„keepalivedï¼Œè™šæ‹Ÿipæ¼‚ç§»åˆ°DèŠ‚ç‚¹ é‡æ–°å¯åŠ¨CèŠ‚ç‚¹keepalivedï¼Œè™šæ‹Ÿipä¾æ—§åœ¨DèŠ‚ç‚¹ï¼Œå¹¶ä¸ä¼šç”±äºCçš„å›å½’è€Œå›å½’ åœæ­¢Dçš„keepalivedï¼Œè™šæ‹Ÿipå†æ¼‚ç§»å›CèŠ‚ç‚¹ æµ‹è¯•vip+ç«¯å£æ˜¯å¦æä¾›æœåŠ¡ï¼ˆåœ¨141ï¼ŒAæœåŠ¡å™¨ä¸Šæµ‹è¯•ï¼‰ 12[root@A ~]# curl 192.168.204.66:5672AMQP ## æ­£å¸¸æä¾›AMQPæœåŠ¡ï¼Œè¡¨ç¤ºé€šè¿‡vipè®¿é—®mqæœåŠ¡æ­£å¸¸","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"FastDFSè¯¦è§£","slug":"FastDFSè¯¦è§£","date":"2021-06-15T03:44:21.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2021/06/15/FastDFSè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2021/06/15/FastDFS%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"1. åœºæ™¯æ¦‚è¿° å¤©çŒ«ï¼Œæ·˜å®ç­‰è´­ç‰©ç½‘ç«™ï¼Œå¤§é‡çš„å›¾ç‰‡å’Œè§†é¢‘ï¼Œæ–‡ä»¶å¤ªå¤šï¼Œå¦‚ä½•å­˜å‚¨ï¼Ÿ ç”¨æˆ·è®¿é—®é‡å¤§åˆå¦‚ä½•ä¿è¯ä¸‹è½½é€Ÿåº¦ï¼Ÿåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„ï¼ 1.1 ä»€ä¹ˆæ˜¯æ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶æ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿï¼Ÿ 1.2 åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ ä¸€å°ç”µè„‘å­˜å‚¨é‡æœ‰é™ï¼Œå¹¶ä¸”å¹¶å‘ååé‡ä¹Ÿæœ‰é™ï¼Œå¦‚ä½•æé«˜æ€§èƒ½ï¼Ÿ ä¸€å¨è´§ç‰©ï¼Œæˆ‘è¦è¿é€åˆ°åé²ç•ªï¼š 1ä¸ªäººè¿ï¼Œä¸æ•¢æƒ³è±¡ 50ä¸ªäººè¿ï¼Œå¤ªéš¾äº†ï¼› 500ä¸ªäººè¿ï¼Œæ¯ä¸ªäººéƒ½å¾ˆè½»æ¾ï¼› è¿™å°±æ˜¯åˆ†å¸ƒå¼å—ï¼Ÿ è¿™é‡Œé¢æœ‰é›†ç¾¤çš„æ¦‚å¿µï¼Œä¹Ÿæœ‰åˆ†å¸ƒå¼çš„æ¦‚å¿µï¼ŒäºŒè€…ä¸è¦æ··æ·†ï¼Œé¢è¯•å¸¸é—®çš„ç»å…¸é¢˜ç›® åˆ†å¸ƒå¼ï¼šä¸åŒçš„ä¸šåŠ¡æ¨¡å—éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šæˆ–è€…åŒä¸€ä¸ªä¸šåŠ¡æ¨¡å—åˆ†æ‹†å¤šä¸ªå­ä¸šåŠ¡ï¼Œéƒ¨ç½²ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚è§£å†³é«˜å¹¶å‘çš„é—®é¢˜ï¼› é›†ç¾¤ï¼šåŒä¸€ä¸ªä¸šåŠ¡éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œæé«˜ç³»ç»Ÿçš„é«˜å¯ç”¨ 1.3 ä¸»æµçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ1.3.1 HDFS (Hadoop Distributed File System)Hadoop åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼› é«˜å®¹é”™çš„ç³»ç»Ÿï¼Œé€‚åˆéƒ¨ç½²åˆ°å»‰ä»·çš„æœºå™¨ä¸Šï¼› èƒ½æä¾›é«˜ååé‡çš„æ•°æ®è®¿é—®ï¼Œéå¸¸é€‚åˆå¤§è§„æ¨¡æ•°æ®åº”ç”¨ï¼› HDFSé‡‡ç”¨ä¸»ä»ç»“æ„ï¼Œä¸€ä¸ªHDFSæ˜¯ç”±ä¸€ä¸ªnameèŠ‚ç‚¹å’ŒNä¸ªdataèŠ‚ç‚¹ç»„æˆï¼› nameèŠ‚ç‚¹å‚¨å­˜å…ƒæ•°æ®ï¼Œä¸€ä¸ªæ–‡ä»¶åˆ†å‰²æˆNä»½å­˜å‚¨åœ¨ä¸åŒçš„dataèŠ‚ç‚¹ä¸Šã€‚ 1.3.2 GFS Google File System å¯æ‰©å±•çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºå¤§å‹çš„ï¼Œåˆ†å¸ƒå¼çš„ï¼Œå¯¹å¤§é‡æ•°æ®è¿›è¡Œè®¿é—®çš„åº”ç”¨ï¼› è¿è¡Œäºå»‰ä»·çš„æ™®é€šç¡¬ä»¶ä¸Šï¼Œå¯ä»¥æä¾›å®¹é”™åŠŸèƒ½ï¼› å®ƒå¯ä»¥ç»™å¤§é‡çš„ç”¨æˆ·æä¾›æ€»ä½“æ€§èƒ½è¾ƒé«˜çš„æœåŠ¡ï¼› GFSé‡‡ç”¨ä¸»ä»ç»“æ„ï¼Œä¸€ä¸ªGFSé›†ç¾¤ç”±ä¸€ä¸ªmasterå’Œå¤§é‡çš„chunkserverï¼ˆåˆ†å—æœåŠ¡å™¨ï¼‰ç»„æˆï¼› ä¸€ä¸ªæ–‡ä»¶è¢«åˆ†å‰²è‹¥å¹²å—ï¼Œåˆ†æ•£å‚¨å­˜åˆ°å¤šä¸ªåˆ†å—serverä¸­ 1.3.3.FastDFS ç”±æ·˜å®èµ„æ·±æ¶æ„å¸ˆä½™åº†ç¼–å†™å¹¶å¼€æºï¼› ä¸“ä¸ºäº’è”ç½‘é‡èº«å®šåˆ¶ï¼Œå……åˆ†è€ƒè™‘äº†å†—ä½™å¤‡ä»½ã€è´Ÿè½½å‡è¡¡ã€çº¿æ€§æ‰©å®¹ç­‰æœºåˆ¶ï¼Œå¹¶æ³¨é‡é«˜å¯ç”¨ã€é«˜æ€§èƒ½ç­‰æŒ‡æ ‡ï¼Œä½¿ç”¨FastDFSå¾ˆå®¹æ˜“æ­å»ºä¸€å¥—é«˜æ€§èƒ½çš„æ–‡ä»¶æœåŠ¡å™¨é›†ç¾¤æä¾›æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ç­‰æœåŠ¡ï¼› HDFSï¼ŒGFSç­‰éƒ½æ˜¯é€šç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä»–ä»¬çš„ä¼˜ç‚¹æ˜¯å¼€å‘ä½“éªŒå¥½ï¼Œä½†æ˜¯ç³»ç»Ÿçš„å¤æ‚åº¦è¾ƒé«˜ï¼Œæ€§èƒ½ä¹Ÿä¸€èˆ¬ï¼› ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸“ç”¨çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä½“éªŒå·®ï¼Œä½†æ˜¯å¤æ‚åº¦ä½ï¼Œæ€§èƒ½ä¹Ÿé«˜ï¼Œå°¤å…¶fastDFSç‰¹åˆ«é€‚åˆå›¾ç‰‡ï¼Œå°è§†é¢‘ç­‰å°æ–‡ä»¶ï¼Œå› ä¸ºfastDFSå¯¹æ–‡ä»¶æ˜¯ä¸åˆ†å‰²çš„ï¼Œæ‰€ä»¥æ²¡æœ‰æ–‡ä»¶åˆå¹¶çš„å¼€é”€ï¼› ç½‘ç»œé€šä¿¡ç”¨socketï¼Œé€Ÿåº¦å¿«ã€‚ 1.4 å·¥ä½œåŸç† fastDFSåŒ…å«Tracker Serverå’ŒStorage Serverï¼› å®¢æˆ·ç«¯è¯·æ±‚Tracker Serverè¿›è¡Œæ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½ï¼› Tracker Serverè°ƒåº¦Storage Serveræœ€ç»ˆå®Œæˆä¸Šä¼ ä¸ä¸‹è½½ã€‚ Tracker ï¼ˆè¯‘ï¼šè¿½è¸ªè€…ï¼‰ ä½œç”¨æ˜¯è´Ÿè½½å‡è¡¡å’Œè°ƒåº¦ï¼Œå®ƒç®¡ç†ç€å­˜å‚¨æœåŠ¡ï¼ˆStorage Serverï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºï¼šâ€œå¤§ç®¡å®¶ï¼Œè¿½è¸ªè€…ï¼Œè°ƒåº¦å‘˜â€ï¼› Tracker Serverå¯ä»¥é›†ç¾¤ï¼Œå®ç°é«˜å¯ç”¨ï¼Œç­–ç•¥ä¸ºâ€œè½®è¯¢â€ã€‚ Storage ï¼ˆè¯‘ï¼šä»“åº“; è´®å­˜å™¨ï¼‰ ä½œç”¨æ˜¯æ–‡ä»¶å­˜å‚¨ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ çš„æ–‡ä»¶æœ€ç»ˆå­˜å‚¨åˆ°storageæœåŠ¡å™¨ä¸Šï¼› storageé›†ç¾¤é‡‡ç”¨åˆ†ç»„çš„æ–¹å¼ï¼ŒåŒç»„å†…çš„æ¯å°æœåŠ¡å™¨æ˜¯å¹³ç­‰å…³ç³»ï¼Œæ•°æ®åŒæ­¥ï¼Œç›®çš„æ˜¯å®ç°æ•°æ®å¤‡ä»½ï¼Œä»è€Œé«˜å¯ç”¨ï¼Œè€Œä¸åŒç»„çš„æœåŠ¡å™¨ä¹‹é—´æ˜¯ä¸é€šä¿¡çš„ï¼› åŒç»„å†…çš„æ¯å°æœåŠ¡å™¨çš„å­˜å‚¨é‡ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œä¼šé€‰å–å®¹é‡æœ€å°çš„é‚£ä¸ªï¼Œæ‰€ä»¥åŒç»„å†…çš„æœåŠ¡å™¨ä¹‹é—´è½¯ç¡¬ä»¶æœ€å¥½ä¿æŒä¸€è‡´ã€‚ Storage Serverä¼šè¿æ¥é›†ç¾¤ä¸­çš„æ‰€æœ‰Tracker Serverï¼Œå®šæ—¶å‘ä»–ä»¬æ±‡æŠ¥è‡ªå·±çš„çŠ¶æ€ï¼Œä¾‹å¦‚ï¼šå‰©ä½™ç©ºé—´ï¼Œæ–‡ä»¶åŒæ­¥æƒ…å†µï¼Œæ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ¬¡æ•°ç­‰ä¿¡æ¯ã€‚ 1.5 ä¸Šä¼ &#x2F;ä¸‹è½½ åŸç† å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶åï¼Œstorageä¼šå°†æ–‡ä»¶idè¿”å›ç»™å®¢æˆ·ç«¯ group1&#x2F;M00&#x2F;02&#x2F;11&#x2F;aJxAeF21O5wAAAAAAAAGaEIOA12345.sh ç»„åï¼šæ–‡ä»¶ä¸Šä¼ åï¼Œåœ¨storageç»„çš„åç§°ï¼Œæ–‡ä»¶ä¸Šä¼ æˆåŠŸåï¼Œç”±storageè¿”å›ï¼Œéœ€è¦å®¢æˆ·ç«¯è‡ªè¡Œä¿å­˜ã€‚ è™šæ‹Ÿç£ç›˜è·¯å¾„ï¼šstorageé…ç½®çš„è™šæ‹Ÿè·¯å¾„ï¼Œåœ¨ç£ç›˜é€‰é¡¹storage_pathå¯¹åº”ã€‚storage_path0å¯¹åº”M00ï¼Œstorage_path1å¯¹åº”M01ï¼Œ æ•°æ®ä¸¤çº§ç›®å½•ï¼šstorageåœ¨è™šæ‹Ÿç£ç›˜ä¸‹è‡ªè¡Œåˆ›å»ºçš„ç›®å½•ã€‚ æ–‡ä»¶åï¼šä¸ä¸Šä¼ æ—¶ä¸åŒï¼Œæ˜¯ç”¨storageæ ¹æ®ç‰¹å®šä¿¡æ¯ç”Ÿæˆçš„ï¼Œé‡Œé¢åŒ…å«ï¼šstorageæœåŠ¡å™¨çš„ipï¼Œåˆ›å»ºæ—¶é—´æˆ³ï¼Œå¤§å°ï¼Œåç¼€åç­‰ä¿¡æ¯ 2. FastDFSçš„ä¸Šä¼ ä¸ä¸‹è½½2.1 å®‰è£…2.1.1 å®‰è£…gccï¼ˆç¼–è¯‘æ—¶éœ€è¦ï¼‰1yum install -y gcc gcc-c++ 2.1.2 å®‰è£…libeventï¼ˆè¿è¡Œæ—¶éœ€æ±‚ï¼‰1yum -y install libevent 2.1.3 å®‰è£… libfastcommonlibfastcommonæ˜¯FastDFSå®˜æ–¹æä¾›çš„ï¼ŒlibfastcommonåŒ…å«äº†FastDFSè¿è¡Œæ‰€éœ€è¦çš„ä¸€äº›åŸºç¡€åº“ã€‚ ä¸Šä¼  libfastcommon-master.zip åˆ° &#x2F;opt 123å®‰è£…è§£å‹zipåŒ…çš„å‘½ä»¤: yum install -y unzip è§£å‹åŒ…: unzip libfastcommon.zip è¿›å…¥ç›®å½•: cd libfastcommon-master ç¼–è¯‘ 123./make.sh # å¦‚æœï¼šmake.shçš„æƒé™ä¸å¤Ÿï¼Œåˆ™éœ€è¦æˆæƒï¼ˆå¯æ‰§è¡Œçš„æƒåˆ©ï¼‰# chmod 777 make.sh å®‰è£… 12./make.sh install# libfastcommonå®‰è£…å¥½åä¼šåœ¨/usr/lib64 ç›®å½•ä¸‹ç”Ÿæˆ libfastcommon.so åº“æ–‡ä»¶ æ‹·è´åº“æ–‡ä»¶ 12cd /usr/lib64cp libfastcommon.so /usr/lib 2.1.4 å®‰è£…Trackerä¸‹è½½ FastDFS_v5.05.tar.gzï¼Œå¹¶ä¸Šä¼ åˆ° &#x2F;opt 1234tar -zxvf FastDFS_v5.05.tar.gz cd FastDFS ./make.sh ./make.sh install 2.2 é…ç½® Trackeré…ç½® 1vim /etc/fdfs/tracker.conf 12345#ç«¯å£å· port=22122 #åŸºç¡€ç›®å½•ï¼ˆTrackerè¿è¡Œæ—¶ä¼šå‘æ­¤ç›®å½•å­˜å‚¨storageçš„ç®¡ç†æ•°æ®ï¼‰ï¼ˆåŸºç¡€ç›®å½•ä¸å­˜åœ¨çš„è¯ï¼Œéœ€è¦è‡ªè¡Œåˆ›å»º mkdir /home/fastdfsï¼‰ base_path=/home/fastdfs Storageé…ç½® 1vim /etc/fdfs/storage.conf 123456789101112131415161718192021#é…ç½®ç»„å group_name=group1 #ç«¯å£ port=23000 #å‘trackerå¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰ heart_beat_interval=30 #storageåŸºç¡€ç›®å½• #ç›®å½•ä¸å­˜åœ¨ï¼Œéœ€è¦è‡ªè¡Œåˆ›å»º base_path=/home/fastdfs #storeå­˜æ”¾æ–‡ä»¶çš„ä½ç½®(store_path) #å¯ä»¥ç†è§£ä¸€ä¸ªç£ç›˜ä¸€ä¸ªpathï¼Œå¤šä¸ªç£ç›˜ï¼Œå¤šä¸ªstore_path #fdfs_storageç›®å½•ä¸å­˜åœ¨ï¼Œéœ€è¦è‡ªè¡Œåˆ›å»º #mkdir /home/fastdfs/fdfs_storage store_path0=/home/fastdfs/fdfs_storage #å¦‚æœæœ‰å¤šä¸ªæŒ‚è½½ç£ç›˜åˆ™å®šä¹‰å¤šä¸ªstore_pathï¼Œå¦‚ä¸‹ #store_path1=..... (M01) #store_path2=..... (M02) #é…ç½®trackeræœåŠ¡å™¨:IPtracker_server=10.1.220.247:22122 #å¦‚æœæœ‰å¤šä¸ªåˆ™é…ç½®å¤šä¸ªtracker #tracker_server=10.1.220.x:22122 2.3 å¯åŠ¨æœåŠ¡ å¯åŠ¨tracker 1/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf restart å¯åŠ¨storage 1/usr/bin/fdfs_storaged /etc/fdfs/storage.conf restart æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„ç«¯å£ï¼š 1netstat -ntlp 2.4 æ­å»ºJavaå·¥ç¨‹ä½¿ç”¨IDEAåˆ›å»ºmavenå·¥ç¨‹ 2.4.1 pom.xml1234567891011&lt;!--fastdfsçš„javaå®¢æˆ·ç«¯--&gt;&lt;dependency&gt; &lt;groupId&gt;net.oschina.zcx7878&lt;/groupId&gt; &lt;artifactId&gt;fastdfs-client-java&lt;/artifactId&gt; &lt;version&gt;1.27.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt;&lt;/dependency&gt; 2.4.2 åˆ›å»ºé…ç½®æ–‡ä»¶åœ¨resourcesä¸‹åˆ›å»ºconfigç›®å½•ï¼Œåœ¨configç›®å½•ä¸‹åˆ›å»º fastdfs-client.propertiesï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345678##fastdfs-client.properties fastdfs.connect_timeout_in_seconds = 5 fastdfs.network_timeout_in_seconds = 30 fastdfs.charset = UTF-8 fastdfs.http_anti_steal_token = false fastdfs.http_secret_key = FastDFS1234567890 fastdfs.http_tracker_http_port = 80 fastdfs.tracker_servers = 10.1.220.247:22122 2.4.3 æ–‡ä»¶ä¸Šä¼ 12345678910111213141516171819202122232425262728293031323334353637383940package test;import org.csource.common.NameValuePair;import org.csource.fastdfs.*;/** * @BelongsProject: lagou-fastdfs * @Author: GuoAn.Sun * @CreateTime: 2020-07-28 17:33 * @Description: æ–‡ä»¶ä¸Šä¼  */public class TestUpload &#123; public static void main(String[] args) &#123; try &#123; // åŠ è½½é…ç½®æ–‡ä»¶ ClientGlobal.initByProperties(&quot;config/fastdfs-client.properties&quot;); // åˆ›å»ºtrackerå®¢æˆ·ç«¯ TrackerClient trackerClient = new TrackerClient(); // é€šè¿‡trackerå®¢æˆ·ç«¯è·å–trackerçš„è¿æ¥æœåŠ¡å¹¶è¿”å› TrackerServer trackerServer = trackerClient.getConnection(); // å£°æ˜storageæœåŠ¡ StorageServer storageServer = null; // å®šä¹‰storageå®¢æˆ·ç«¯ StorageClient1 client = new StorageClient1(trackerServer, storageServer); // å®šä¹‰æ–‡ä»¶å…ƒä¿¡æ¯ NameValuePair[] list = new NameValuePair[1]; list[0] = new NameValuePair(&quot;fileName&quot;,&quot;1.jpg&quot;); String fileID = client.upload_file1(&quot;F:\\img\\1.jpg&quot;, &quot;jpg&quot;, list); System.out.println(&quot;fileID = &quot; + fileID); // group1/M00/00/00/CgHc918f8l6AFYp0AAWICfQnHuk889.jpg /** * group1ï¼šä¸€å°æœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªç»„ * M00ï¼š store_path0 ----&gt; /home/fastdfs/fdfs_storage/data * 00/00ï¼šä¸¤çº§æ•°æ®ç›®å½• */ trackerServer.close(); &#125; catch(Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; 2.4.4 æ–‡ä»¶æŸ¥è¯¢12345678910111213141516171819202122232425package test;import org.csource.fastdfs.*;/** * @BelongsProject: lagou-fastdfs * @Author: GuoAn.Sun * @CreateTime: 2020-07-28 17:46 * @Description: æ–‡ä»¶æŸ¥è¯¢ */public class TestQuery &#123; public static void main(String[] args) throws Exception &#123; // åŠ è½½é…ç½®æ–‡ä»¶ ClientGlobal.initByProperties(&quot;config/fastdfs-client.properties&quot;); // åˆ›å»ºtrackerå®¢æˆ·ç«¯ TrackerClient trackerClient = new TrackerClient(); // é€šè¿‡trackerå®¢æˆ·ç«¯è·å–trackerçš„è¿æ¥æœåŠ¡å¹¶è¿”å› TrackerServer trackerServer = trackerClient.getConnection(); // å£°æ˜storageæœåŠ¡ StorageServer storageServer = null; // å®šä¹‰storageå®¢æˆ·ç«¯ StorageClient1 client = new StorageClient1(trackerServer, storageServer); FileInfo fileInfo = client.query_file_info1(&quot;group1/M00/00/00/CgHc918f8l6AFYp0AAWICfQnHuk889.jpg&quot;); if(fileInfo!=null) System.out.println(&quot;fileInfo = &quot; + fileInfo); elseSystem.out.println(&quot;æŸ¥æ— æ­¤æ–‡ä»¶ï¼&quot;); trackerServer.close(); &#125;&#125; 2.4.5 æ–‡ä»¶ä¸‹è½½12345678910111213141516171819202122232425262728293031package test;import org.csource.fastdfs.*;import java.io.File;import java.io.FileOutputStream;/** * @BelongsProject: lagou-fastdfs * @Author: GuoAn.Sun * @CreateTime: 2020-07-28 17:49 * @Description: æ–‡ä»¶ä¸‹è½½ */public class TestDownload &#123; public static void main(String[] args) throws Exception&#123; // åŠ è½½é…ç½®æ–‡ä»¶ ClientGlobal.initByProperties(&quot;config/fastdfs-client.properties&quot;); // åˆ›å»ºtrackerå®¢æˆ·ç«¯ TrackerClient trackerClient = new TrackerClient(); // é€šè¿‡trackerå®¢æˆ·ç«¯è·å–trackerçš„è¿æ¥æœåŠ¡å¹¶è¿”å› TrackerServer trackerServer = trackerClient.getConnection(); // å£°æ˜storageæœåŠ¡ StorageServer storageServer = null; // å®šä¹‰storageå®¢æˆ·ç«¯ StorageClient1 client = new StorageClient1(trackerServer, storageServer); byte[] bytes = client.download_file1(&quot;group1/M00/00/00/CgHc918f8l6AFYp0AAWICfQnHuk889.jpg&quot;); // é€šè¿‡ioå°†å­—èŠ‚æ•°ç»„ï¼Œè½¬æ¢æˆä¸€ä¸ªæ–‡ä»¶ FileOutputStream fileOutputStream = new FileOutputStream(new File(&quot;F:/xxxxxx.jpg&quot;)); fileOutputStream.write(bytes); fileOutputStream.close(); trackerServer.close(); System.out.println(&quot;ä¸‹è½½å®Œæ¯•ï¼&quot;); &#125;&#125; 3. é¡¹ç›®å®æˆ˜ æŒæ¡fastDFSåœ¨çœŸå®é¡¹ç›®ä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼› æŒæ¡fastDFSå®ç°å›¾ç‰‡æœåŠ¡å™¨ï¼› 3.1 æ­å»ºå›¾ç‰‡æœåŠ¡å™¨3.1.1 Nginxæ¨¡å—å®‰è£… ï¼ˆStorageï¼‰ ä¸Šä¼  fastdfs-nginx-module_v1.16.tar.gz åˆ° &#x2F;opt è§£å‹nginxæ¨¡å— 1tar -zxvf fastdfs-nginx-module_v1.16.tar.gz ä¿®æ”¹ config æ–‡ä»¶ï¼Œå°†æ–‡ä»¶ä¸­çš„ &#x2F;usr&#x2F;local&#x2F; è·¯å¾„æ”¹ä¸º &#x2F;usr&#x2F; 12cd /opt/fastdfs-nginx-module/src vim config å°† fastdfs-nginx-module&#x2F;srcä¸‹çš„ mod_fastdfs.conf æ‹·è´è‡³ &#x2F;etc&#x2F;fdfs ä¸‹ 1cp mod_fastdfs.conf /etc/fdfs/ ä¿®æ”¹ &#x2F;etc&#x2F;fdfs&#x2F;mod_fastdfs.conf 1vim /etc/fdfs/mod_fastdfs.conf 12345678base_path=/home/fastdfs tracker_server=10.1.220.247:22122 #(nä¸ªtrackeré…ç½®nè¡Œ) #tracker_server=10.1.220.x:22122 #urlä¸­åŒ…å«groupåç§° url_have_group_name=true #æŒ‡å®šæ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼ˆä¸Šé¢é…ç½®çš„storeè·¯å¾„ï¼‰ store_path0=/home/fastdfs/fdfs_storage å°† libfdfsclient.so æ‹·è´è‡³ &#x2F;usr&#x2F;lib ä¸‹ 1cp /usr/lib64/libfdfsclient.so /usr/lib/ åˆ›å»ºnginx&#x2F;clientç›®å½• 1mkdir -p /var/temp/nginx/client 3.1.2 Nginxå®‰è£… ï¼ˆTrackerï¼‰ å°† nginx-1.14.0.tar.gzä¸Šä¼ åˆ°&#x2F;optï¼ˆå®‰è£…è¿‡nginxï¼Œæ­¤æ­¥çœç•¥ï¼‰ è§£å‹ï¼štar -zxvf nginx-1.14.0.tar.gzï¼ˆå®‰è£…è¿‡nginxï¼Œæ­¤æ­¥çœç•¥ï¼‰ å®‰è£…ä¾èµ–åº“ï¼ˆå®‰è£…è¿‡nginxï¼Œæ­¤æ­¥çœç•¥ï¼‰ 123456yum install pcre yum install pcre-devel yum install zlib yum install zlib-devel yum install openssl yum install openssl-devel è¿›å…¥nginxè§£å‹çš„ç›®å½•ä¸‹ cd &#x2F;opt&#x2F;nginx-1.14.0 å®‰è£… 1./configure \\ --prefix=/usr/local/nginx \\ --pid-path=/var/run/nginx/nginx.pid \\ --lock-path=/var/lock/nginx.lock \\ --error-log-path=/var/log/nginx/error.log \\ --http-log-path=/var/log/nginx/access.log \\ --with-http_gzip_static_module \\ --http-client-body-temp-path=/var/temp/nginx/client \\ --http-proxy-temp-path=/var/temp/nginx/proxy \\ --http-fastcgi-temp-path=/var/temp/nginx/fastcgi \\ --http-uwsgi-temp-path=/var/temp/nginx/uwsgi \\ --http-scgi-temp-path=/var/temp/nginx/scgi \\ --add-module=/opt/fastdfs-nginx-module/src **æ³¨æ„ï¼š**ä¸Šè¾¹å°†ä¸´æ—¶æ–‡ä»¶ç›®å½•æŒ‡å®šä¸º &#x2F;var&#x2F;temp&#x2F;nginxï¼Œéœ€è¦åœ¨ &#x2F;var ä¸‹åˆ›å»º temp åŠ nginx ç›®å½•ï¼šmkdir&#x2F;var&#x2F;temp&#x2F;nginx ç¼–è¯‘ï¼šmake å®‰è£…ï¼šmake install æ‹·è´é…ç½®æ–‡ä»¶ 123cd /opt/FastDFS/conf cp http.conf mime.types /etc/fdfs/ æ˜¯å¦è¦†ç›–ï¼šyes ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ 12cd /usr/local/nginx/conf/ vim nginx.conf 123456789server &#123; listen 80; server_name 10.1.220.247; #charset koi8-r; #access_log logs/host.access.log main; location /group1/M00 &#123; root /home/fastdfs/fdfs_storage/data; ngx_fastdfs_module; &#125; å…³é—­nginxï¼Œå¹¶å¯åŠ¨nginx 12pkill -9 nginx/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf è®¿é—®nginxå¹¶æŸ¥çœ‹å›¾ç‰‡ http://10.1.220.247 http://10.1.220.247/group1/M00/00/00/CgHc918f8l6AFYp0AAWICfQnHuk889.jpg 3.2 åˆ›å»ºå‰ç«¯é¡µé¢1234567&lt;!--ä¸Šä¼ æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸æ–‡å­—ç›¸æ¯”è¾ƒèµ·æ¥ï¼Œå±äºå†…å®¹è¾ƒå¤§ï¼Œå¿…é¡»ä½¿ç”¨postæ–¹å¼æäº¤--&gt; &lt;!--ä¸Šä¼ æ–‡ä»¶ï¼Œå’Œæ™®é€šæ–‡ä»¶æœ‰åŒºåˆ«ï¼Œactionæ¥æ”¶å‚æ•°ä¹Ÿä¼šåŒºåˆ«å¯¹å¾…ï¼Œæ‰€ä»¥å£°æ˜å¸¦æ–‡ä»¶æäº¤çš„è¡¨å•ä¸ºâ€œå¤šéƒ¨ ä»¶è¡¨å•â€--&gt; &lt;form action=&quot;upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;fname&quot;&gt; &lt;br&gt; &lt;button&gt;æäº¤&lt;/button&gt; &lt;/form&gt; 3.3 æ­å»ºwebæœåŠ¡3.3.1 pom.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;packaging&gt;war&lt;/packaging&gt;&lt;dependencies&gt; &lt;!-- å› ä¸ºæœ‰jspé¡µé¢ï¼Œæ‰€ä»¥å¼•ç”¨servletä¾èµ–--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;/dependency&gt; &lt;!-- é¡µé¢æäº¤è¿‡æ¥çš„è¯·æ±‚ï¼Œä½¿ç”¨springmvcæ¥å¤„ç†--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.2.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- javaè¿æ¥fastDFSçš„å®¢æˆ·ç«¯å·¥å…·--&gt; &lt;dependency&gt; &lt;groupId&gt;net.oschina.zcx7878&lt;/groupId&gt; &lt;artifactId&gt;fastdfs-client-java&lt;/artifactId&gt; &lt;version&gt;1.27.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å›¾ç‰‡ä¸Šä¼ åˆ°FastDFSéœ€è¦ç”¨çš„åˆ°IOå·¥å…·--&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- å›¾ç‰‡ä¿å­˜åˆ°webæœåŠ¡å™¨éœ€è¦ç”¨åˆ°çš„IOå·¥å…·--&gt; &lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--ç”¨æ¥è½¬æ¢javaå¯¹è±¡å’Œjsonå­—ç¬¦ä¸²ï¼Œæ³¨æ„ï¼Œ2.7ä»¥ä¸Šç‰ˆæœ¬å¿…é¡»æ­é…spring5.0ä»¥ä¸Š--&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.8&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;port&gt;8001&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;run&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 3.3.2 web.xml123456789101112131415161718&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 3.3.3 spring-mvc.xml123456789&lt;!--æ‰«ææ³¨è§£çš„åŒ…--&gt;&lt;context:component-scan base-package=&quot;controller&quot;/&gt;&lt;!--æ‰«ææ§åˆ¶å™¨ä¸­çš„æ³¨è§£ï¼š@Response--&gt;&lt;mvc:annotation-driven/&gt;&lt;!--ä¸Šä¼ æ–‡ä»¶çš„è§£æå™¨ï¼ˆè§„å®šä¸Šä¼ æ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼‰--&gt;&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt; &lt;!-- ä¸Šä¼ æ–‡ä»¶æœ€å¤§é™åˆ¶ï¼š2GB--&gt; &lt;property name=&quot;maxUploadSize&quot; value=&quot;2048000000&quot;/&gt;&lt;/bean&gt; 3.3.4 æ–‡ä»¶å®ä½“ç±»12345public class FileSystem implements Serializable &#123; private String fileId; private String filePath; private String fileName;&#125; 3.3.5 æ§åˆ¶å±‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465package controller;import entity.FileSystem;import org.csource.common.NameValuePair;import org.csource.fastdfs.*;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.multipart.MultipartFile;import org.springframework.web.multipart.MultipartHttpServletRequest;import java.io.File;import java.util.UUID;/** * @BelongsProject: lagou-imageServer * @Author: GuoAn.Sun * @CreateTime: 2020-07-29 14:25 * @Description: å¤„ç†ä¸Šä¼ æ–‡ä»¶çš„æ§åˆ¶å™¨ */@Controller public class FileAction &#123; /** * @param request å¤šéƒ¨ä»¶è¡¨å•çš„è¯·æ±‚å¯¹è±¡ * @return ä¸Šä¼ æ–‡ä»¶å¯¹è±¡çš„jsonå¯¹è±¡ * @throws Exception * * ä¸Šä¼ æ–‡ä»¶çš„æµç¨‹ï¼š * 1ã€å…ˆæŠŠæ–‡ä»¶ä¿å­˜åˆ°webæœåŠ¡å™¨ä¸Š * 2ã€å†ä»webæœåŠ¡å™¨ä¸Šå°†æ–‡ä»¶ ä¸Šä¼  åˆ° FastDFSä¸Š */ @RequestMapping(&quot;upload&quot;) //MultipartHttpServletRequestï¼šæ˜¯httpservletRequestçš„å¼ºåŒ–ç‰ˆæœ¬ï¼Œä¸ä»…å¯ä»¥è£…æ–‡æœ¬ä¿¡ æ¯ï¼Œè¿˜å¯ä»¥è£…å›¾ç‰‡æ–‡ä»¶ä¿¡æ¯ public @ResponseBody FileSystem upload(MultipartHttpServletRequest request) throws Exception &#123; FileSystem fileSystem = new FileSystem(); /* 1ã€æŠŠæ–‡ä»¶ä¿å­˜åˆ°webæœåŠ¡å™¨ */ // ä»é¡µé¢è¯·æ±‚ä¸­ï¼Œè·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡ MultipartFile file = request.getFile(&quot;fname&quot;); // ä»æ–‡ä»¶å¯¹è±¡ä¸­è·å– æ–‡ä»¶çš„åŸå§‹åç§° String oldFileName = file.getOriginalFilename(); // é€šè¿‡å­—ç¬¦ä¸²æˆªå–çš„æ–¹å¼ï¼Œä»æ–‡ä»¶åŸå§‹åä¸­è·å–æ–‡ä»¶çš„åç¼€ 1.jpg String hou = oldFileName.substring(oldFileName.lastIndexOf(&quot;.&quot;) + 1); // ä¸ºäº†é¿å…æ–‡ä»¶å› ä¸ºåŒåè€Œè¦†ç›–ï¼Œç”Ÿæˆå…¨æ–°çš„æ–‡ä»¶å String newFileName = UUID.randomUUID().toString() + &quot;.&quot; + hou; // åˆ›å»ºwebæœåŠ¡å™¨ä¿å­˜æ–‡ä»¶çš„ç›®å½•(é¢„å…ˆåˆ›å»ºå¥½D:/uploadç›®å½•ï¼Œå¦åˆ™ç³»ç»Ÿæ‰¾ä¸åˆ°è·¯å¾„ï¼Œä¼šæŠ›å¼‚ å¸¸) File toSaveFile = new File(&quot;D:/upload/&quot; + newFileName); // å°†è·¯å¾„è½¬æ¢æˆæ–‡ä»¶ file.transferTo(toSaveFile); // è·å–æœåŠ¡å™¨çš„ç»å¯¹è·¯å¾„ String newFilePath = toSaveFile.getAbsolutePath(); /* 2ã€æŠŠæ–‡ä»¶ä»webæœåŠ¡å™¨ä¸Šä¼ åˆ°FastDFS*/ ClientGlobal.initByProperties(&quot;config/fastdfs-client.properties&quot;); TrackerClient trackerClient = new TrackerClient(); TrackerServer trackerServer = trackerClient.getConnection(); StorageServer storageServer = null; StorageClient1 client = new StorageClient1(trackerServer, storageServer); NameValuePair[] list = new NameValuePair[1]; list[0] = new NameValuePair(&quot;fileName&quot;,oldFileName); String fileId = client.upload_file1(newFilePath, hou, list); trackerServer.close(); // å°è£…fileSystemæ•°æ®å¯¹è±¡ fileSystem.setFileId(fileId); fileSystem.setFileName(oldFileName); fileSystem.setFilePath(fileId); //å·²ç»ä¸Šä¼ åˆ°FastDFSä¸Šï¼Œé€šè¿‡fileIdæ¥è®¿é—®å›¾ ç‰‡ï¼Œæ‰€ä»¥fileIdå³ä¸ºæ–‡ä»¶è·¯å¾„ return fileSystem; &#125;&#125; 3.3.6 æ·»åŠ fastDFSçš„é…ç½®æ–‡ä»¶åœ¨resourcesä¸‹åˆ›å»ºconfigç›®å½•ï¼Œåœ¨configç›®å½•ä¸‹åˆ›å»º fastdfs-client.properties å‚è€ƒï¼š2.4.2 3.3.7 å¯åŠ¨fastDFSæœåŠ¡ï¼Œæµ‹è¯•å¼€å§‹1234567[root@localhost /]# /usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf restart [root@localhost /]# /usr/bin/fdfs_storaged /etc/fdfs/storage.conf restart [root@localhost /]# /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf [root@localhost /]# netstat -ntlp [root@localhost /]# systemctl stop firewalld.service [root@localhost /]# cd /home/fastdfs/fdfs_storage/data/ [root@localhost /]# ls 3.6 å…¸å‹é”™è¯¯ é‡å¯linuxæœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šåˆ°nginxå¯åŠ¨å¤±è´¥ï¼š 12[root@localhost logs]# /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf[root@localhost /]# nginx: [emerg] open() &quot;/var/run/nginx/nginx.pid&quot; failed (2: No such file or directory) å¯¼è‡´æœ¬æ¬¡é”™è¯¯çš„åŸå› ï¼Œæ˜¯æ²¡æœ‰ä¿®æ”¹pidæ–‡ä»¶çš„è·¯å¾„ï¼Œç¼–è¾‘nginxçš„é…ç½®æ–‡ä»¶ï¼š 1vim /usr/local/nginx/conf/nginx.conf 1pid /usr/local/nginx/logs/nginx.pid; å†æ¬¡å¯åŠ¨nginxï¼Œæå®šï¼","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Redisè¯¦è§£","slug":"Redisè¯¦è§£","date":"2021-06-08T09:41:17.000Z","updated":"2025-04-17T08:34:52.016Z","comments":true,"path":"2021/06/08/Redisè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2021/06/08/Redis%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"ä¸€ã€æ¦‚è¿°1.1 äº’è”ç½‘æ¶æ„çš„æ¼”å˜å†ç¨‹ ç¬¬1é˜¶æ®µ æ•°æ®è®¿é—®é‡ä¸å¤§ï¼Œç®€å•çš„æ¶æ„å³å¯æå®šï¼ ç¬¬2é˜¶æ®µ æ•°æ®è®¿é—®é‡å¤§ï¼Œä½¿ç”¨ç¼“å­˜æŠ€æœ¯æ¥ç¼“è§£æ•°æ®åº“çš„å‹åŠ›ã€‚ ä¸åŒçš„ä¸šåŠ¡è®¿é—®ä¸åŒçš„æ•°æ®åº“ ç¬¬3é˜¶æ®µ ä¸»ä»è¯»å†™åˆ†ç¦»ã€‚ ä¹‹å‰çš„ç¼“å­˜ç¡®å®èƒ½å¤Ÿç¼“è§£æ•°æ®åº“çš„å‹åŠ›ï¼Œä½†æ˜¯å†™å’Œè¯»éƒ½é›†ä¸­åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸Šï¼Œå‹åŠ›åˆæ¥äº†ã€‚ ä¸€ä¸ªæ•°æ®åº“è´Ÿè´£å†™ï¼Œä¸€ä¸ªæ•°æ®åº“è´Ÿè´£è¯»ã€‚åˆ†å·¥åˆä½œã€‚æ„‰å¿«ï¼ è®©masterï¼ˆä¸»æ•°æ®åº“ï¼‰æ¥å“åº”äº‹åŠ¡æ€§**ï¼ˆå¢åˆ æ”¹ï¼‰æ“ä½œï¼Œè®©slaveï¼ˆä»æ•°æ®åº“ï¼‰æ¥å“åº”éäº‹åŠ¡æ€§ï¼ˆæŸ¥è¯¢ï¼‰**æ“ä½œï¼Œç„¶åå†é‡‡ç”¨ä¸»ä»å¤åˆ¶æ¥æŠŠmasterä¸Šçš„äº‹åŠ¡æ€§æ“ä½œåŒæ­¥åˆ°slaveæ•°æ®åº“ä¸­ mysqlçš„master&#x2F;slaveå°±æ˜¯ç½‘ç«™çš„æ ‡é…ï¼ ç¬¬4é˜¶æ®µ mysqlçš„ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»çš„åŸºç¡€ä¸Šï¼Œmysqlçš„ä¸»åº“å¼€å§‹å‡ºç°ç“¶é¢ˆ ç”±äºMyISAMä½¿ç”¨è¡¨é”ï¼Œæ‰€ä»¥å¹¶å‘æ€§èƒ½ç‰¹åˆ«å·® åˆ†åº“åˆ†è¡¨å¼€å§‹æµè¡Œï¼Œmysqlä¹Ÿæå‡ºäº†è¡¨åˆ†åŒºï¼Œè™½ç„¶ä¸ç¨³å®šï¼Œä½†æˆ‘ä»¬çœ‹åˆ°äº†å¸Œæœ› å¼€å§‹å§ï¼Œmysqlé›†ç¾¤ 1.2 Rediså…¥é—¨ä»‹ç» äº’è”ç½‘éœ€æ±‚çš„3é«˜ é«˜å¹¶å‘ï¼Œé«˜å¯æ‰©ï¼Œé«˜æ€§èƒ½ Redis æ˜¯ä¸€ç§è¿è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶å‘æ€§èƒ½å¾ˆå¼ºï¼Œå¹¶ä¸”è¿è¡Œåœ¨å†…å­˜ä¸Šçš„NoSqlï¼ˆnot only sqlï¼‰æ•°æ®åº“ NoSQLæ•°æ®åº“ å’Œ ä¼ ç»Ÿæ•°æ®åº“ ç›¸æ¯”çš„ä¼˜åŠ¿ NoSQLæ•°æ®åº“æ— éœ€äº‹å…ˆä¸ºè¦å­˜å‚¨çš„æ•°æ®å»ºç«‹å­—æ®µï¼Œéšæ—¶å¯ä»¥å­˜å‚¨è‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼ã€‚ è€Œåœ¨å…³ç³»æ•°æ®åº“é‡Œï¼Œå¢åˆ å­—æ®µæ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚å¦‚æœæ˜¯éå¸¸å¤§æ•°æ®é‡çš„è¡¨ï¼Œå¢åŠ å­—æ®µç®€ç›´å°±æ˜¯ä¸€ä¸ªå™©æ¢¦ Redisçš„å¸¸ç”¨ä½¿ç”¨åœºæ™¯ ç¼“å­˜ï¼Œæ¯«æ— ç–‘é—®è¿™æ˜¯Rediså½“ä»Šæœ€ä¸ºäººç†ŸçŸ¥çš„ä½¿ç”¨åœºæ™¯ã€‚åœ¨æå‡æœåŠ¡å™¨æ€§èƒ½æ–¹é¢éå¸¸æœ‰æ•ˆï¼›ä¸€äº›é¢‘ç¹è¢«è®¿é—®çš„æ•°æ®ï¼Œç»å¸¸è¢«è®¿é—®çš„æ•°æ®å¦‚æœæ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„å¼€é”€éƒ½ä¼šå¾ˆå¤§ï¼Œè€Œæ”¾åœ¨redisä¸­ï¼Œå› ä¸ºredis æ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„å¯ä»¥å¾ˆé«˜æ•ˆçš„è®¿é—® æ’è¡Œæ¦œï¼Œåœ¨ä½¿ç”¨ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼ˆmysql oracle ç­‰ï¼‰æ¥åšè¿™ä¸ªäº‹å„¿ï¼Œéå¸¸çš„éº»çƒ¦ï¼Œè€Œåˆ©ç”¨Redisçš„SortSet(æœ‰åºé›†åˆ)æ•°æ®ç»“æ„èƒ½å¤Ÿç®€å•çš„æå®šï¼› è®¡ç®—å™¨&#x2F;é™é€Ÿå™¨ï¼Œåˆ©ç”¨Redisä¸­åŸå­æ€§çš„è‡ªå¢æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿè®¡ç±»ä¼¼ç”¨æˆ·ç‚¹èµæ•°ã€ç”¨æˆ·è®¿é—®æ•°ç­‰ï¼Œè¿™ç±»æ“ä½œå¦‚æœç”¨MySQLï¼Œé¢‘ç¹çš„è¯»å†™ä¼šå¸¦æ¥ç›¸å½“å¤§çš„å‹åŠ›ï¼›é™é€Ÿå™¨æ¯”è¾ƒå…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯é™åˆ¶æŸä¸ªç”¨æˆ·è®¿é—®æŸä¸ªAPIçš„é¢‘ç‡ï¼Œå¸¸ç”¨çš„æœ‰æŠ¢è´­æ—¶ï¼Œé˜²æ­¢ç”¨æˆ·ç–¯ç‹‚ç‚¹å‡»å¸¦æ¥ä¸å¿…è¦çš„å‹åŠ›ï¼› å¥½å‹å…³ç³»ï¼Œåˆ©ç”¨é›†åˆçš„ä¸€äº›å‘½ä»¤ï¼Œæ¯”å¦‚æ±‚äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰ã€‚å¯ä»¥æ–¹ä¾¿æå®šä¸€äº›å…±åŒå¥½å‹ã€å…±åŒçˆ±å¥½ä¹‹ç±»çš„åŠŸèƒ½ï¼› ç®€å•æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé™¤äº†Redisè‡ªèº«çš„å‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨Listæ¥å®ç°ä¸€ä¸ªé˜Ÿåˆ—æœºåˆ¶ï¼Œæ¯”å¦‚ï¼šåˆ°è´§é€šçŸ¥ã€é‚®ä»¶å‘é€ä¹‹ç±»çš„éœ€æ±‚ï¼Œä¸éœ€è¦é«˜å¯é ï¼Œä½†æ˜¯ä¼šå¸¦æ¥éå¸¸å¤§çš„DBå‹åŠ›ï¼Œå®Œå…¨å¯ä»¥ç”¨Listæ¥å®Œæˆå¼‚æ­¥è§£è€¦ï¼› Session****å…±äº«ï¼Œä»¥jspä¸ºä¾‹ï¼Œé»˜è®¤Sessionæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœæ˜¯é›†ç¾¤æœåŠ¡ï¼ŒåŒä¸€ä¸ªç”¨æˆ·è¿‡æ¥å¯èƒ½è½åœ¨ä¸åŒæœºå™¨ä¸Šï¼Œè¿™å°±ä¼šå¯¼è‡´ç”¨æˆ·é¢‘ç¹ç™»é™†ï¼›é‡‡ç”¨Redisä¿å­˜Sessionåï¼Œæ— è®ºç”¨æˆ·è½åœ¨é‚£å°æœºå™¨ä¸Šéƒ½èƒ½å¤Ÿè·å–åˆ°å¯¹åº”çš„Sessionä¿¡æ¯ã€‚ 1.3 Redis&#x2F;Memcache&#x2F;MongoDBå¯¹æ¯”éƒ½æ˜¯nosqlæ•°æ®åº“çš„è‘—åä»£è¡¨ 1.3.1 Rediså’ŒMemcache Rediså’ŒMemcacheéƒ½æ˜¯å†…å­˜æ•°æ®åº“ã€‚ä¸è¿‡memcacheè¿˜å¯ç”¨äºç¼“å­˜å…¶ä»–ä¸œè¥¿ï¼Œä¾‹å¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ç­‰ã€‚ memcache æ•°æ®ç»“æ„å•ä¸€kvï¼Œredis æ›´ä¸°å¯Œä¸€äº›ï¼Œè¿˜æä¾› listï¼Œsetï¼Œ hash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ï¼Œæœ‰æ•ˆçš„å‡å°‘ç½‘ç»œ IO çš„æ¬¡æ•° è™šæ‹Ÿå†…å­˜â€“Rediså½“ç‰©ç†å†…å­˜ç”¨å®Œæ—¶ï¼Œå¯ä»¥å°†ä¸€äº›å¾ˆä¹…æ²¡ç”¨åˆ°çš„valueäº¤æ¢åˆ°ç£ç›˜ å­˜å‚¨æ•°æ®å®‰å…¨â€“memcacheæŒ‚æ‰åï¼Œæ•°æ®æ²¡äº†ï¼ˆæ²¡æœ‰æŒä¹…åŒ–æœºåˆ¶ï¼‰ï¼›rediså¯ä»¥å®šæœŸä¿å­˜åˆ°ç£ç›˜ï¼ˆæŒä¹…åŒ–ï¼‰ ç¾éš¾æ¢å¤â€“memcacheæŒ‚æ‰åï¼Œæ•°æ®ä¸å¯æ¢å¤; redisæ•°æ®ä¸¢å¤±åå¯ä»¥é€šè¿‡RBDæˆ–AOFæ¢å¤ 1.3.2 Rediså’ŒMongoDB rediså’Œmongodbå¹¶ä¸æ˜¯ç«äº‰å…³ç³»ï¼Œæ›´å¤šçš„æ˜¯ä¸€ç§åä½œå…±å­˜çš„å…³ç³»ã€‚ mongodbæœ¬è´¨ä¸Šè¿˜æ˜¯ç¡¬ç›˜æ•°æ®åº“ï¼Œåœ¨å¤æ‚æŸ¥è¯¢æ—¶ä»ç„¶ä¼šæœ‰å¤§é‡çš„èµ„æºæ¶ˆè€—ï¼Œè€Œä¸”åœ¨å¤„ç†å¤æ‚é€»è¾‘æ—¶ä»ç„¶è¦ä¸å¯é¿å…åœ°è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢ã€‚ è¿™æ—¶å°±éœ€è¦redisæˆ–Memcacheè¿™æ ·çš„å†…å­˜æ•°æ®åº“æ¥ä½œä¸ºä¸­é—´å±‚è¿›è¡Œç¼“å­˜å’ŒåŠ é€Ÿã€‚ æ¯”å¦‚åœ¨æŸäº›å¤æ‚é¡µé¢çš„åœºæ™¯ä¸­ï¼Œæ•´ä¸ªé¡µé¢çš„å†…å®¹å¦‚æœéƒ½ä»mongodbä¸­æŸ¥è¯¢ï¼Œå¯èƒ½è¦å‡ åä¸ªæŸ¥è¯¢è¯­å¥ï¼Œè€—æ—¶å¾ˆé•¿ã€‚å¦‚æœéœ€æ±‚å…è®¸ï¼Œåˆ™å¯ä»¥æŠŠæ•´ä¸ªé¡µé¢çš„å¯¹è±¡ç¼“å­˜è‡³redisä¸­ï¼Œå®šæœŸæ›´æ–°ã€‚è¿™æ ·mongodbå’Œrediså°±èƒ½å¾ˆå¥½åœ°åä½œèµ·æ¥ 1.4 åˆ†å¸ƒå¼æ•°æ®åº“CAPåŸç†1.4.1 CAPç®€ä»‹ ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“äº‹åŠ¡å…·å¤‡ACIDï¼š Aï¼šåŸå­æ€§ Cï¼šä¸€è‡´æ€§ Iï¼šç‹¬ç«‹æ€§ Dï¼šæŒä¹…æ€§ åˆ†å¸ƒå¼æ•°æ®åº“çš„CAP: Cï¼ˆConsistencyï¼‰ï¼šå¼ºä¸€è‡´æ€§ â€œall nodes see the same data at the same timeâ€,å³æ›´æ–°æ“ä½œæˆåŠŸå¹¶è¿”å›å®¢æˆ·ç«¯åï¼Œæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çš„æ•°æ®å®Œå…¨ä¸€è‡´ï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼çš„ä¸€è‡´æ€§ã€‚ä¸€è‡´æ€§çš„é—®é¢˜åœ¨å¹¶å‘ç³»ç»Ÿä¸­ä¸å¯é¿å…ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œä¸€è‡´æ€§æŒ‡çš„æ˜¯å¹¶å‘è®¿é—®æ—¶æ›´æ–°è¿‡çš„æ•°æ®å¦‚ä½•è·å–çš„é—®é¢˜ã€‚ä»æœåŠ¡ç«¯æ¥çœ‹ï¼Œåˆ™æ˜¯æ›´æ–°å¦‚ä½•å¤åˆ¶åˆ†å¸ƒåˆ°æ•´ä¸ªç³»ç»Ÿï¼Œä»¥ä¿è¯æ•°æ®æœ€ç»ˆä¸€è‡´ã€‚ Aï¼ˆAvailabilityï¼‰ï¼šé«˜å¯ç”¨æ€§ å¯ç”¨æ€§æŒ‡â€œReads and writes always succeedâ€ï¼Œå³æœåŠ¡ä¸€ç›´å¯ç”¨ï¼Œè€Œä¸”è¦æ˜¯æ­£å¸¸çš„å“åº”æ—¶é—´ã€‚å¥½çš„å¯ç”¨æ€§ä¸»è¦æ˜¯æŒ‡ç³»ç»Ÿèƒ½å¤Ÿå¾ˆå¥½çš„ä¸ºç”¨æˆ·æœåŠ¡ï¼Œä¸å‡ºç°ç”¨æˆ·æ“ä½œå¤±è´¥æˆ–è€…è®¿é—®è¶…æ—¶ç­‰ç”¨æˆ·ä½“éªŒä¸å¥½çš„æƒ…å†µã€‚ Pï¼ˆPartition toleranceï¼‰ï¼šåˆ†åŒºå®¹é”™æ€§ å³åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°æŸèŠ‚ç‚¹æˆ–ç½‘ç»œåˆ†åŒºæ•…éšœæ—¶ï¼Œä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§æˆ–å¯ç”¨æ€§çš„æœåŠ¡ã€‚ åˆ†åŒºå®¹é”™æ€§è¦æ±‚èƒ½å¤Ÿä½¿åº”ç”¨è™½ç„¶æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè€Œçœ‹ä¸Šå»å´å¥½åƒæ˜¯åœ¨ä¸€ä¸ªå¯ä»¥è¿è½¬æ­£å¸¸çš„æ•´ä½“ã€‚æ¯”å¦‚ç°åœ¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰æŸä¸€ä¸ªæˆ–è€…å‡ ä¸ªæœºå™¨å®•æ‰äº†ï¼Œå…¶ä»–å‰©ä¸‹çš„æœºå™¨è¿˜èƒ½å¤Ÿæ­£å¸¸è¿è½¬æ»¡è¶³ç³»ç»Ÿéœ€æ±‚ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€å¹¶æ²¡æœ‰ä»€ä¹ˆä½“éªŒä¸Šçš„å½±å“ã€‚ 1.4.2 CAPç†è®º CAPç†è®ºæå‡ºå°±æ˜¯é’ˆå¯¹åˆ†å¸ƒå¼æ•°æ®åº“ç¯å¢ƒçš„ï¼Œæ‰€ä»¥ï¼ŒPè¿™ä¸ªå±æ€§å¿…é¡»å®¹å¿å®ƒçš„å­˜åœ¨ï¼Œè€Œä¸”æ˜¯å¿…é¡»å…·å¤‡çš„ã€‚ å› ä¸ºPæ˜¯å¿…é¡»çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦é€‰æ‹©çš„å°±æ˜¯Aå’ŒCã€‚ å¤§å®¶çŸ¥é“ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿è¯ç³»ç»Ÿå¯ç”¨æ€§ï¼Œé€šå¸¸éƒ½é‡‡å–äº†å¤åˆ¶çš„æ–¹å¼ï¼Œé¿å…ä¸€ä¸ªèŠ‚ç‚¹æŸåï¼Œå¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨ã€‚é‚£ä¹ˆå°±å‡ºç°äº†æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®å‡ºç°äº†å¾ˆå¤šä¸ªå‰¯æœ¬çš„æƒ…å†µï¼Œè€Œæ•°æ®ä»ä¸€ä¸ªèŠ‚ç‚¹å¤åˆ¶åˆ°å¦å¤–çš„èŠ‚ç‚¹æ—¶éœ€è¦æ—¶é—´å’Œè¦æ±‚ç½‘ç»œç•…é€šçš„ï¼Œæ‰€ä»¥ï¼Œå½“På‘ç”Ÿæ—¶ï¼Œä¹Ÿå°±æ˜¯æ— æ³•å‘æŸä¸ªèŠ‚ç‚¹å¤åˆ¶æ•°æ®æ—¶ï¼Œè¿™æ—¶å€™ä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š é€‰æ‹©å¯ç”¨æ€§ Aï¼Œæ­¤æ—¶ï¼Œé‚£ä¸ªå¤±å»è”ç³»çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥å‘ç³»ç»Ÿæä¾›æœåŠ¡ï¼Œä¸è¿‡å®ƒçš„æ•°æ®å°±ä¸èƒ½ä¿è¯æ˜¯åŒæ­¥çš„äº†ï¼ˆå¤±å»äº†Cå±æ€§ï¼‰ã€‚ é€‰æ‹©ä¸€è‡´æ€§Cï¼Œä¸ºäº†ä¿è¯æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬å¿…é¡»ç­‰å¾…å¤±å»è”ç³»çš„èŠ‚ç‚¹æ¢å¤è¿‡æ¥ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé‚£ä¸ªèŠ‚ç‚¹æ˜¯ä¸å…è®¸å¯¹å¤–æä¾›æœåŠ¡çš„ï¼Œè¿™æ—¶å€™ç³»ç»Ÿå¤„äºä¸å¯ç”¨çŠ¶æ€(å¤±å»äº†Aå±æ€§)ã€‚ æœ€å¸¸è§çš„ä¾‹å­æ˜¯è¯»å†™åˆ†ç¦»ï¼ŒæŸä¸ªèŠ‚ç‚¹è´Ÿè´£å†™å…¥æ•°æ®ï¼Œç„¶åå°†æ•°æ®åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ï¼Œå…¶å®ƒèŠ‚ç‚¹æä¾›è¯»å–çš„æœåŠ¡ï¼Œå½“ä¸¤ä¸ªèŠ‚ç‚¹å‡ºç°é€šä¿¡é—®é¢˜æ—¶ï¼Œä½ å°±é¢ä¸´ç€é€‰æ‹©Aï¼ˆç»§ç»­æä¾›æœåŠ¡ï¼Œä½†æ˜¯æ•°æ®ä¸ä¿è¯å‡†ç¡®ï¼‰ï¼ŒCï¼ˆç”¨æˆ·å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä¸€ç›´ç­‰åˆ°æ•°æ®åŒæ­¥å®Œæˆï¼‰ã€‚ 1.4.3 CAPæ€»ç»“ åˆ†åŒºæ˜¯å¸¸æ€ï¼Œä¸å¯é¿å…ï¼Œä¸‰è€…ä¸å¯å…±å­˜ å¯ç”¨æ€§å’Œä¸€è‡´æ€§æ˜¯ä¸€å¯¹å†¤å®¶ ä¸€è‡´æ€§é«˜ï¼Œå¯ç”¨æ€§ä½ ä¸€è‡´æ€§ä½ï¼Œå¯ç”¨æ€§é«˜ å› æ­¤ï¼Œæ ¹æ® CAP åŸç†å°† NoSQL æ•°æ®åº“åˆ†æˆäº†æ»¡è¶³ CA åŸåˆ™ã€æ»¡è¶³ CP åŸåˆ™å’Œæ»¡è¶³ AP åŸåˆ™ä¸‰ å¤§ç±»ï¼š CA - å•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸åœ¨å¯æ‰©å±•æ€§ä¸Šä¸å¤ªå¼ºå¤§ã€‚ CP - æ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹å¿æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜ã€‚ AP - æ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹å¿æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›ã€‚ äºŒã€ä¸‹è½½ä¸å®‰è£…2.1 ä¸‹è½½redisï¼šhttp://www.redis.net.cn/ å›¾å½¢å·¥å…·ï¼šhttps://redisdesktop.com/download 2.2 å®‰è£…è™½ç„¶å¯ä»¥åœ¨å®‰è£…åœ¨windowsæ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯å®˜æ–¹ä¸æ¨èï¼Œä¸€å¦‚æ—¢å¾€çš„å®‰è£…åœ¨linuxä¸Šç¯å¢ƒæ˜¯è™šæ‹Ÿæœº ä¸Šä¼ tar.gzåŒ…ï¼Œå¹¶è§£å‹ 1tar -zxvf redis-5.0.4.tar.gz å®‰è£…gccï¼ˆå¿…é¡»æœ‰ç½‘ç»œï¼‰ 1yum -y install gcc è¿›å…¥redisç›®å½•ï¼Œè¿›è¡Œç¼–è¯‘ 1make ç¼–è¯‘ä¹‹åï¼Œå¼€å§‹å®‰è£… 1make install 2.3 å®‰è£…åçš„æ“ä½œ2.3.1 åå°è¿è¡Œæ–¹å¼ redisé»˜è®¤ä¸ä¼šä½¿ç”¨åå°è¿è¡Œï¼Œå¦‚æœä½ éœ€è¦ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶daemonize&#x3D;yesï¼Œå½“ä½ åå°æœåŠ¡å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå†™æˆä¸€ä¸ªè¿›ç¨‹æ–‡ä»¶è¿è¡Œã€‚ 1vim /opt/redis-5.0.4/redis.conf 1daemonize yes ä»¥é…ç½®æ–‡ä»¶çš„æ–¹å¼å¯åŠ¨ 1cd /usr/local/bin redis-server /opt/redis-5.0.4/redis.conf 2.3.2 å…³é—­æ•°æ®åº“ å•å®ä¾‹å…³é—­ 1redis-cli shutdown å¤šå®ä¾‹å…³é—­ 1redis-cli -p 6379 shutdown 2.3.3 å¸¸ç”¨æ“ä½œ æ£€æµ‹6379ç«¯å£æ˜¯å¦åœ¨ç›‘å¬ 1netstat -lntp | grep 6379 ç«¯å£ä¸ºä»€ä¹ˆæ˜¯6379ï¼Ÿ â€‹ 6379åœ¨æ˜¯æ‰‹æœºæŒ‰é”®ä¸ŠMERZå¯¹åº”çš„å·ç ï¼Œ â€‹ è€ŒMERZå–è‡ªæ„å¤§åˆ©æ­Œå¥³Alessia Merzçš„åå­—ã€‚ â€‹ MERZé•¿æœŸä»¥æ¥è¢«antirezï¼ˆredisä½œè€…ï¼‰åŠå…¶æœ‹å‹å½“ä½œæ„šè ¢çš„ä»£åè¯ã€‚ æ£€æµ‹åå°è¿›ç¨‹æ˜¯å¦å­˜åœ¨ 1ps -ef|grep redis 2.3.4 è¿æ¥rediså¹¶æµ‹è¯•12redis-cli ping 2.3.5 HelloWorld1234# ä¿å­˜æ•°æ® set k1 china # è·å–æ•°æ® get kl 2.3.6 æµ‹è¯•æ€§èƒ½ å…ˆ ctrl+cï¼Œé€€å‡ºrediså®¢æˆ·ç«¯ 1redis-benchmark æ‰§è¡Œå‘½ä»¤åï¼Œå‘½ä»¤ä¸ä¼šè‡ªåŠ¨åœæ­¢ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ctrl+cåœæ­¢æµ‹è¯•\\ 123456789101112131415[root@localhost bin]# redis-benchmark====== PING_INLINE ======100000 requests completed in 1.80 seconds # 1.8ç§’å¤„ç†äº†10ä¸‡ä¸ªè¯·æ±‚ï¼Œæ€§èƒ½è¦çœ‹ç¬”è®° æœ¬çš„é…ç½®é«˜ä½50 parallel clients3 bytes payloadkeep alive: 187.69% &lt;= 1 milliseconds99.15% &lt;= 2 milliseconds 99.65% &lt;= 3 milliseconds 99.86% &lt;= 4 milliseconds 99.92% &lt;= 5 milliseconds 99.94% &lt;= 6 milliseconds 99.97% &lt;= 7 milliseconds 100.00% &lt;= 7 milliseconds 55524.71 requests per second # æ¯ç§’å¤„ç†çš„è¯·æ±‚æ•°é‡ 2.3.7 é»˜è®¤16ä¸ªæ•°æ®åº“1vim /opt/redis-5.0.4/redis.conf 123456789101112127.0.0.1:6379&gt; get k1 # æŸ¥è¯¢k1&quot;china&quot;127.0.0.1:6379&gt; select 16 # åˆ‡æ¢16å·æ•°æ®åº“(error) ERR DB index is out of range # æ•°æ®åº“çš„ä¸‹æ ‡è¶…å‡ºäº†èŒƒå›´127.0.0.1:6379&gt; select 15 # åˆ‡æ¢15å·æ•°æ®åº“OK127.0.0.1:6379[15]&gt; get k1 # æŸ¥è¯¢k1(nil)127.0.0.1:6379[15]&gt; select 0 # åˆ‡æ¢0å·æ•°æ®åº“OK127.0.0.1:6379&gt; get k1 # æŸ¥è¯¢k1&quot;china&quot; 2.3.8 æ•°æ®åº“é”®çš„æ•°é‡1dbsize redisåœ¨linuxæ”¯æŒå‘½ä»¤è¡¥å…¨ï¼ˆtabï¼‰ 2.3.9 æ¸…ç©ºæ•°æ®åº“ æ¸…ç©ºå½“å‰åº“ 1flushdb æ¸…ç©ºæ‰€æœ‰ï¼ˆ16ä¸ªï¼‰åº“ï¼Œæ…ç”¨ï¼ï¼ 1flushall 2.3.10 æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆkeyï¼‰æ¨¡ç³ŠæŸ¥è¯¢keyså‘½ä»¤ï¼Œæœ‰ä¸‰ä¸ªé€šé…ç¬¦ï¼š é€šé…ä»»æ„å¤šä¸ªå­—ç¬¦ æŸ¥è¯¢æ‰€æœ‰çš„é”® 1keys * æ¨¡ç³ŠæŸ¥è¯¢kå¼€å¤´ï¼Œåé¢éšä¾¿å¤šå°‘ä¸ªå­—ç¬¦ 1keys k* æ¨¡ç³ŠæŸ¥è¯¢eä¸ºæœ€åä¸€ä½ï¼Œå‰é¢éšä¾¿å¤šå°‘ä¸ªå­—ç¬¦ 1keys *e åŒ * æ¨¡å¼ï¼ŒåŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦ï¼šæŸ¥è¯¢åŒ…å«kçš„é”® 1keys *k* ?ï¼šé€šé…å•ä¸ªå­—ç¬¦ æ¨¡ç³ŠæŸ¥è¯¢kå­—å¤´ï¼Œå¹¶ä¸”åŒ¹é…ä¸€ä¸ªå­—ç¬¦ 1keys k? ä½ åªè®°å¾—ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯kï¼Œä»–çš„é•¿åº¦æ˜¯3 1keys k?? []ï¼šé€šé…æ‹¬å·å†…çš„æŸä¸€ä¸ªå­—ç¬¦ è®°å¾—å…¶ä»–å­—æ¯ï¼Œå°±ç¬¬äºŒä¸ªå­—æ¯å¯èƒ½æ˜¯aæˆ–e 1keys r[ae]dis 2.3.11 é”®ï¼ˆkeyï¼‰ exists keyï¼šåˆ¤æ–­æŸä¸ªkeyæ˜¯å¦å­˜åœ¨ 1234127.0.0.1:6379&gt; exists k1(integer) 1 # å­˜åœ¨127.0.0.1:6379&gt; exists y1(integer) 0 # ä¸å­˜åœ¨ move key dbï¼šç§»åŠ¨ï¼ˆå‰ªåˆ‡ï¼Œç²˜è´´ï¼‰é”®åˆ°å‡ å·åº“ 12345678127.0.0.1:6379&gt; move x1 8 # å°†x1ç§»åŠ¨åˆ°8å·åº“(integer) 1 # ç§»åŠ¨æˆåŠŸ127.0.0.1:6379&gt; exists x1 # æŸ¥çœ‹å½“å‰åº“ä¸­æ˜¯å¦å­˜åœ¨x1(integer) 0 # ä¸å­˜åœ¨ï¼ˆå› ä¸ºå·²ç»ç§»èµ°äº†ï¼‰127.0.0.1:6379&gt; select 8 # åˆ‡æ¢8å·åº“OK127.0.0.1:6379[8]&gt; keys * # æŸ¥çœ‹å½“å‰åº“ä¸­çš„æ‰€æœ‰é”®1) &quot;x1&quot; ttl keyï¼šæŸ¥çœ‹é”®è¿˜æœ‰å¤šä¹…è¿‡æœŸï¼ˆ-1æ°¸ä¸è¿‡æœŸï¼Œ-2å·²è¿‡æœŸï¼‰ 12127.0.0.1:6379[8]&gt; ttl x1(integer) -1 # æ°¸ä¸è¿‡æœŸ time to live è¿˜èƒ½æ´»å¤šä¹… expire key ç§’ï¼šä¸ºé”®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç”Ÿå‘½å€’è®¡æ—¶ï¼‰ 1234567891011121314127.0.0.1:6379[8]&gt; set k1 v1 # ä¿å­˜k1OK127.0.0.1:6379[8]&gt; ttl k1 # æŸ¥çœ‹k1çš„è¿‡æœŸæ—¶é—´(integer) -1 # æ°¸ä¸è¿‡æœŸ127.0.0.1:6379[8]&gt; expire k1 10 # è®¾ç½®k1çš„è¿‡æœŸæ—¶é—´ä¸º10ç§’ï¼ˆ10ç§’åè‡ªåŠ¨é”€æ¯ï¼‰(integer) 1 # è®¾ç½®æˆåŠŸ127.0.0.1:6379[8]&gt; get k1 # è·å–k1&quot;v1&quot;127.0.0.1:6379[8]&gt; ttl k1 # æŸ¥çœ‹k1çš„è¿‡æœŸæ—¶é—´&#x27;(integer) 2 # è¿˜æœ‰2ç§’è¿‡æœŸ127.0.0.1:6379[8]&gt; get k1(nil)127.0.0.1:6379[8]&gt; keys * # ä»å†…å­˜ä¸­é”€æ¯äº†(empty list or set) type keyï¼šæŸ¥çœ‹é”®çš„æ•°æ®ç±»å‹ 12127.0.0.1:6379[8]&gt; type k1 string # k1çš„æ•°æ®ç±»å‹æ˜¯ä¼šstringå­—ç¬¦ä¸² ä¸‰ã€ä½¿ç”¨Redis3.1 äº”å¤§æ•°æ®ç±»å‹ æ“ä½œæ–‡æ¡£ï¼šhttp://redisdoc.com/ 3.1.1 å­—ç¬¦ä¸²String set&#x2F;get&#x2F;del&#x2F;append&#x2F;strlen 12345678910111213141516171819127.0.0.1:6379&gt; set k1 v1 # ä¿å­˜æ•°æ®OK127.0.0.1:6379&gt; set k2 v2 # ä¿å­˜æ•°æ®OK127.0.0.1:6379&gt; keys *1) &quot;k2&quot;2) &quot;k1&quot;127.0.0.1:6379&gt; del k2 # åˆ é™¤æ•°æ®k2(integer) 1127.0.0.1:6379&gt; keys *1) &quot;k1&quot;127.0.0.1:6379&gt; get k1 # è·å–æ•°æ®k1&quot;v1&quot;127.0.0.1:6379&gt; append k1 adc # å¾€k1çš„å€¼è¿½åŠ æ•°æ®abc(integer) 5127.0.0.1:6379&gt; get k1&quot;v1adc&quot;127.0.0.1:6379&gt; strlen k1 # è¿”å›k1å€¼çš„é•¿åº¦ï¼ˆå­—ç¬¦æ•°é‡ï¼‰(integer) 5 incr&#x2F;decr&#x2F;incrby&#x2F;decrbyï¼šåŠ å‡æ“ä½œï¼Œæ“ä½œçš„å¿…é¡»æ˜¯æ•°å­—ç±»å‹ incrï¼šæ„æ€æ˜¯incrementï¼Œå¢åŠ  decrï¼šæ„æ€æ˜¯decrementï¼Œå‡å°‘ 12345678910111213141516171819202122127.0.0.1:6379&gt; set k1 1 # åˆå§‹åŒ–k1çš„å€¼ä¸º1OK127.0.0.1:6379&gt; incr k1 # k1è‡ªå¢1ï¼ˆç›¸å½“äº++ï¼‰(integer) 2127.0.0.1:6379&gt; incr k1(integer) 3127.0.0.1:6379&gt; get k1&quot;3&quot;127.0.0.1:6379&gt; decr k1 # k1è‡ªå‡1ï¼ˆç›¸å½“äº--ï¼‰(integer) 2127.0.0.1:6379&gt; decr k1(integer) 1127.0.0.1:6379&gt; get k1&quot;1&quot;127.0.0.1:6379&gt; incrby k1 3 # k1è‡ªå¢3ï¼ˆç›¸å½“äº+=3ï¼‰(integer) 4127.0.0.1:6379&gt; get k1&quot;4&quot;127.0.0.1:6379&gt; decrby k1 2 # k1è‡ªå‡2ï¼ˆç›¸å½“äº-=2ï¼‰(integer) 2127.0.0.1:6379&gt; get k1&quot;2&quot; getrange&#x2F;setrangeï¼šç±»ä¼¼betweenâ€¦andâ€¦ rangeï¼šèŒƒå›´ 123456789101112127.0.0.1:6379&gt; set k1 abcdef # åˆå§‹åŒ–k1çš„å€¼ä¸ºabcdefOK127.0.0.1:6379&gt; get k1&quot;abcdef&quot;127.0.0.1:6379&gt; getrange k1 0 -1 # æŸ¥è¯¢k1å…¨éƒ¨çš„å€¼&quot;abcdef&quot;127.0.0.1:6379&gt; getrange k1 0 3 # æŸ¥è¯¢k1çš„å€¼ï¼ŒèŒƒå›´æ˜¯ä¸‹æ ‡0~ä¸‹æ ‡3ï¼ˆåŒ…å«0å’Œ3ï¼Œå…± è¿”å›4ä¸ªå­—ç¬¦ï¼‰&quot;abcd&quot;127.0.0.1:6379&gt; setrange k1 1 xxx # æ›¿æ¢k1çš„å€¼ï¼Œä»ä¸‹æ ‡1å¼€å§‹æä¾›ä¸ºxxx(integer) 6127.0.0.1:6379&gt; get k1&quot;axxxef&quot; setex&#x2F;setnx set with expirï¼šæ·»åŠ æ•°æ®çš„åŒæ—¶è®¾ç½®ç”Ÿå‘½å‘¨æœŸ 123456127.0.0.1:6379&gt; setex k1 5 v1 # æ·»åŠ k1 v1æ•°æ®çš„åŒæ—¶ï¼Œè®¾ç½®5ç§’çš„å£°æ˜å‘¨æœŸOK127.0.0.1:6379&gt; get k1&quot;v1&quot;127.0.0.1:6379&gt; get k1 # å·²è¿‡æœŸï¼Œk1çš„å€¼v1è‡ªåŠ¨é”€æ¯(nil) set if not existï¼šæ·»åŠ æ•°æ®çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œé˜²æ­¢å·²å­˜åœ¨çš„æ•°æ®è¢«è¦†ç›–æ‰ 123456127.0.0.1:6379&gt; setnx k1 xu (integer) 0 # æ·»åŠ å¤±è´¥ï¼Œå› ä¸ºk1å·²ç»å­˜åœ¨127.0.0.1:6379&gt; get k1&quot;sun&quot;127.0.0.1:6379&gt; setnx k2 xu(integer) 1 # k2ä¸å­˜åœ¨ï¼Œæ‰€ä»¥æ·»åŠ æˆåŠŸ mset&#x2F;mget&#x2F;msetnx mï¼šmoreæ›´å¤š 123456789101112131415127.0.0.1:6379&gt; set k1 v1 k2 v2 # setä¸æ”¯æŒä¸€æ¬¡æ·»åŠ å¤šæ¡æ•°æ®(error) ERR syntax error127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3 # msetå¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šæ¡æ•°æ®OK127.0.0.1:6379&gt; keys *1) &quot;k3&quot;2) &quot;k2&quot;3) &quot;k1&quot;127.0.0.1:6379&gt; mget k2 k3 # ä¸€æ¬¡è·å–å¤šæ¡æ•°æ®1) &quot;v2&quot;2) &quot;v3&quot;127.0.0.1:6379&gt; msetnx k3 v3 k4 v4 # ä¸€æ¬¡æ·»åŠ å¤šæ¡æ•°æ®æ—¶ï¼Œå¦‚æœæ·»åŠ çš„æ•°æ®ä¸­æœ‰å·²ç»å­˜åœ¨çš„ï¼Œåˆ™å¤±è´¥(integer) 0127.0.0.1:6379&gt; msetnx k4 v4 k5 v5 # ä¸€æ¬¡æ·»åŠ å¤šæ¡æ•°æ®æ—¶ï¼Œå¦‚æœæ·»åŠ çš„æ•°æ® ä¸­éƒ½ä¸å­˜åœ¨çš„ï¼Œåˆ™æˆåŠŸ(integer) 1 getsetï¼šå…ˆgetåset 123456789101112131415127.0.0.1:6379&gt; getset k6 v6(nil) # å› ä¸ºæ²¡æœ‰k6ï¼Œæ‰€ä»¥getä¸ºnullï¼Œç„¶åå°†k6v6çš„å€¼æ·»åŠ åˆ°æ•°æ®åº“127.0.0.1:6379&gt; keys *1) &quot;k2&quot;2) &quot;k5&quot;3) &quot;k4&quot;4) &quot;k6&quot;5) &quot;k3&quot;6) &quot;k1&quot;127.0.0.1:6379&gt; get k6&quot;v6&quot;127.0.0.1:6379&gt; getset k6 vv6 # å…ˆè·å–k6çš„å€¼ï¼Œç„¶åä¿®æ”¹k6çš„å€¼ä¸ºvv6&quot;v6&quot;127.0.0.1:6379&gt; get k6&quot;vv6&quot; 3.1.2 åˆ—è¡¨Listpushå’Œpopï¼Œç±»ä¼¼æœºæªAK47ï¼špushï¼Œå‹å­å¼¹ï¼Œpopï¼Œå°„å‡»å‡ºå­å¼¹ lpush&#x2F;rpush&#x2F;lrange lï¼šleft è‡ªå·¦å‘å³â†’æ·»åŠ  ï¼ˆä»ä¸Šå¾€ä¸‹æ·»åŠ ï¼‰ rï¼šright è‡ªå³å‘å·¦â†æ·»åŠ ï¼ˆä»ä¸‹å¾€ä¸Šæ·»åŠ ï¼‰ 123456789101112131415161718127.0.0.1:6379&gt; lpush list01 1 2 3 4 5 # ä»ä¸Šå¾€ä¸‹æ·»åŠ (integer) 5127.0.0.1:6379&gt; keys *1) &quot;list01&quot;127.0.0.1:6379&gt; lrange list01 0 -1 # æŸ¥è¯¢list01ä¸­çš„å…¨éƒ¨æ•°æ®0è¡¨ç¤ºå¼€ å§‹ï¼Œ-1è¡¨ç¤ºç»“å°¾1) &quot;5&quot;2) &quot;4&quot;3) &quot;3&quot;4) &quot;2&quot;5) &quot;1&quot;127.0.0.1:6379&gt; rpush list02 1 2 3 4 5 # ä»ä¸‹å¾€ä¸Šæ·»åŠ (integer) 5127.0.0.1:6379&gt; lrange list02 0 -11) &quot;1&quot;2) &quot;2&quot;3) &quot;3&quot;4) &quot;4&quot;5) &quot;5&quot; lpop&#x2F;rpopï¼šç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆä¸Šå·¦ä¸‹å³ï¼‰ 1234127.0.0.1:6379&gt; lpop list02 # ä»å·¦ï¼ˆä¸Šï¼‰è¾¹ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ &quot;1&quot;127.0.0.1:6379&gt; rpop list02 # ä»å³ï¼ˆä¸‹ï¼‰è¾¹ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ &quot;5&quot; lindexï¼šæ ¹æ®ä¸‹æ ‡æŸ¥è¯¢å…ƒç´ ï¼ˆä»å·¦å‘å³ï¼Œè‡ªä¸Šè€Œä¸‹ï¼‰ 12345678910127.0.0.1:6379&gt; lrange list01 0 -11) &quot;5&quot; 2) &quot;4&quot; 3) &quot;3&quot; 4) &quot;2&quot; 5) &quot;1&quot;127.0.0.1:6379&gt; lindex list01 2 # ä»ä¸Šåˆ°ä¸‹æ•°ï¼Œä¸‹æ ‡ä¸º2çš„å€¼&quot;3&quot;127.0.0.1:6379&gt; lindex list01 1 # ä»ä¸Šåˆ°ä¸‹æ•°ï¼Œä¸‹æ ‡ä¸º1çš„å€¼&quot;4&quot; llenï¼šè¿”å›é›†åˆé•¿åº¦ 12127.0.0.1:6379&gt; llen list01(integer) 5 lremï¼šåˆ é™¤nä¸ªvalue 12345678910111213127.0.0.1:6379&gt; lpush list01 1 2 2 3 3 3 4 4 4 4 (integer) 10 127.0.0.1:6379&gt; lrem list01 2 3 # ä»list01ä¸­ç§»é™¤2ä¸ª3 (integer) 2 127.0.0.1:6379&gt; lrange list01 0 -1 1) &quot;4&quot; 2) &quot;4&quot; 3) &quot;4&quot; 4) &quot;4&quot; 5) &quot;3&quot; 6) &quot;2&quot; 7) &quot;2&quot; 8) &quot;1&quot; ltrimï¼šæˆªå–æŒ‡å®šèŒƒå›´çš„å€¼ï¼Œåˆ«çš„å…¨æ‰”æ‰ ltrim key begindex endindex 12345678910111213141516171819127.0.0.1:6379&gt; lpush list01 1 2 3 4 5 6 7 8 9(integer) 9127.0.0.1:6379&gt; lrange list01 0 -11) &quot;9&quot; # ä¸‹æ ‡0 2) &quot;8&quot; # ä¸‹æ ‡1 3) &quot;7&quot; # ä¸‹æ ‡2 4) &quot;6&quot; # ä¸‹æ ‡3 5) &quot;5&quot; # ä¸‹æ ‡4 6) &quot;4&quot; # ä¸‹æ ‡5 7) &quot;3&quot; # ä¸‹æ ‡6 8) &quot;2&quot; # ä¸‹æ ‡7 9) &quot;1&quot; # ä¸‹æ ‡8127.0.0.1:6379&gt; ltrim list01 3 6 # æˆªå–ä¸‹æ ‡3~6çš„å€¼ï¼Œåˆ«çš„å…¨æ‰”æ‰OK127.0.0.1:6379&gt; lrange list01 0 -11) &quot;6&quot; 2) &quot;5&quot; 3) &quot;4&quot; 4) &quot;3&quot; rpoplpushï¼šä»ä¸€ä¸ªé›†åˆæä¸€ä¸ªå…ƒç´ åˆ°å¦ä¸€ä¸ªé›†åˆä¸­ï¼ˆå³å‡ºä¸€ä¸ªï¼Œå·¦è¿›ä¸€ä¸ªï¼‰ 123456789101112131415161718192021222324252627282930127.0.0.1:6379&gt; rpush list01 1 2 3 4 5(integer) 5127.0.0.1:6379&gt; lrange list01 0 -11) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot; 4) &quot;4&quot; 5) &quot;5&quot;127.0.0.1:6379&gt; rpush list02 1 2 3 4 5(integer) 5127.0.0.1:6379&gt; lrange list02 0 -11) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot; 4) &quot;4&quot; 5) &quot;5&quot;127.0.0.1:6379&gt; rpoplpush list01 list02 # list01å³è¾¹å‡ºä¸€ä¸ªï¼Œä»å·¦è¿›å…¥åˆ°list02çš„ç¬¬ä¸€ä¸ªä½ç½®&quot;5&quot;127.0.0.1:6379&gt; lrange list01 0 -11) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot; 4) &quot;4&quot;127.0.0.1:6379&gt; lrange list02 0 -11) &quot;5&quot; 2) &quot;1&quot; 3) &quot;2&quot; 4) &quot;3&quot; 5) &quot;4&quot; 6) &quot;5&quot; lsetï¼šæ”¹å˜æŸä¸ªä¸‹æ ‡çš„æŸä¸ªå€¼ lset key index value 12345678910111213141516127.0.0.1:6379&gt; lrange list02 0 -11) &quot;5&quot; 2) &quot;1&quot; 3) &quot;2&quot; 4) &quot;3&quot; 5) &quot;4&quot; 6) &quot;5&quot;127.0.0.1:6379&gt; lset list02 0 x # å°†list02ä¸­ä¸‹æ ‡ä¸º0çš„å…ƒç´ ä¿®æ”¹æˆxOK127.0.0.1:6379&gt; lrange list02 0 -11) &quot;x&quot;2) &quot;1&quot; 3) &quot;2&quot; 4) &quot;3&quot; 5) &quot;4&quot; 6) &quot;5&quot; linsertï¼šæ’å…¥å…ƒç´ ï¼ˆæŒ‡å®šæŸä¸ªå…ƒç´ ä¹‹å‰&#x2F;ä¹‹åï¼‰ linsert key before&#x2F;after oldvalue new value 12345678910111213141516171819202122232425262728127.0.0.1:6379&gt; lrange list02 0 -1 1) &quot;x&quot; 2) &quot;1&quot; 3) &quot;2&quot; 4) &quot;3&quot; 5) &quot;4&quot; 6) &quot;5&quot;127.0.0.1:6379&gt; linsert list02 before 2 java # ä»å·¦è¾¹è¿›å…¥ï¼Œåœ¨list02ä¸­çš„2ç´ ä¹‹å‰æ’å…¥java(integer) 7127.0.0.1:6379&gt; lrange list02 0 -11) &quot;x&quot; 2) &quot;1&quot; 3) &quot;java&quot; 4) &quot;2&quot; 5) &quot;3&quot; 6) &quot;4&quot; 7) &quot;5&quot;127.0.0.1:6379&gt; linsert list02 after 2 redis # ä»å·¦è¾¹è¿›å…¥ï¼Œåœ¨list02ä¸­çš„å…ƒç´ ä¹‹åæ’å…¥redis(integer) 8127.0.0.1:6379&gt; lrange list02 0 -11) &quot;x&quot; 2) &quot;1&quot; 3) &quot;java&quot; 4) &quot;2&quot; 5) &quot;redis&quot; 6) &quot;3&quot; 7) &quot;4&quot; 8) &quot;5&quot; æ€§èƒ½æ€»ç»“ï¼šç±»ä¼¼æ·»åŠ ç«è½¦çš®ä¸€æ ·ï¼Œå¤´å°¾æ“ä½œæ•ˆç‡é«˜ï¼Œä¸­é—´æ“ä½œæ•ˆç‡æƒ¨ï¼› 3.1.3 é›†åˆSetå’Œjavaä¸­çš„setç‰¹ç‚¹ç±»ä¼¼ï¼Œä¸å…è®¸é‡å¤ sadd&#x2F;smembers&#x2F;sismemberï¼šæ·»åŠ &#x2F;æŸ¥çœ‹&#x2F;åˆ¤æ–­æ˜¯å¦å­˜åœ¨ 12345678910127.0.0.1:6379&gt; sadd set01 1 2 2 3 3 3 # æ·»åŠ å…ƒç´ ï¼ˆè‡ªåŠ¨æ’é™¤é‡å¤å…ƒç´ ï¼‰(integer) 3127.0.0.1:6379&gt; smembers set01 # æŸ¥è¯¢set01é›†åˆ1) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot;127.0.0.1:6379&gt; sismember set01 2(integer) 1 # å­˜åœ¨127.0.0.1:6379&gt; sismember set01 5(integer) 0 # ä¸å­˜åœ¨ æ³¨æ„ï¼š1å’Œ0å¯ä¸æ˜¯ä¸‹æ ‡ï¼Œè€Œæ˜¯å¸ƒå°”ã€‚1ï¼štrueå­˜åœ¨ï¼Œ2ï¼šfalseä¸å­˜åœ¨ scardï¼šè·å¾—é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•° 12127.0.0.1:6379&gt; scard set01 (integer) 3 # é›†åˆä¸­æœ‰3ä¸ªå…ƒç´  sremï¼šåˆ é™¤é›†åˆä¸­çš„å…ƒç´  srem key value 12127.0.0.1:6379&gt; srem set01 2 # ç§»é™¤set01ä¸­çš„å…ƒç´ 2(integer) 1 # 1è¡¨ç¤ºç§»é™¤æˆåŠŸ srandmemberï¼šä»é›†åˆä¸­éšæœºè·å–å‡ ä¸ªå…ƒç´ â€™ srandmember æ•´æ•°ï¼ˆä¸ªæ•°ï¼‰ 12345678910111213141516171819202122127.0.0.1:6379&gt; sadd set01 1 2 3 4 5 6 7 8 9 (integer) 9 127.0.0.1:6379&gt; smembers set01 1) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot; 4) &quot;4&quot; 5) &quot;5&quot; 6) &quot;6&quot; 7) &quot;7&quot; 8) &quot;8&quot; 9) &quot;9&quot;127.0.0.1:6379&gt; srandmember set01 3 # ä»set01ä¸­éšæœºè·å–3ä¸ªå…ƒç´ 1) &quot;8&quot; 2) &quot;2&quot; 3) &quot;3&quot;127.0.0.1:6379&gt; srandmember set01 5 # ä»set01ä¸­éšæœºè·å–5ä¸ªå…ƒç´ 1) &quot;5&quot; 2) &quot;8&quot; 3) &quot;7&quot; 4) &quot;4&quot; 5) &quot;6&quot; spopï¼šéšæœºå‡ºæ ˆï¼ˆç§»é™¤ï¼‰ 1234567891011121314127.0.0.1:6379&gt; smembers set011) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot; 4) &quot;4&quot; 5) &quot;5&quot; 6) &quot;6&quot; 7) &quot;7&quot; 8) &quot;8&quot; 9) &quot;9&quot;127.0.0.1:6379&gt; spop set01 # éšæœºç§»é™¤ä¸€ä¸ªå…ƒç´ &quot;8&quot;127.0.0.1:6379&gt; spop set01 # éšæœºç§»é™¤ä¸€ä¸ªå…ƒç´ &quot;7&quot; smoveï¼šç§»åŠ¨å…ƒç´ ï¼šå°†key1æŸä¸ªå€¼èµ‹å€¼ç»™key2 123456127.0.0.1:6379&gt; sadd set01 1 2 3 4 5(integer) 5127.0.0.1:6379&gt; sadd set02 x y z(integer) 3127.0.0.1:6379&gt; smove set01 set02 3 # å°†set01ä¸­çš„å…ƒç´ 3ç§»åŠ¨åˆ°set02ä¸­(integer) 1 # ç§»åŠ¨æˆåŠŸ æ•°å­¦é›†åˆç±» äº¤é›†ï¼šsinter å¹¶é›†ï¼šsunion å·®é›†ï¼šsdiff 123456789101112131415161718192021222324127.0.0.1:6379&gt; sadd set01 1 2 3 4 5 (integer) 5 127.0.0.1:6379&gt; sadd set02 2 a 1 b 3 (integer) 5 127.0.0.1:6379&gt; sinter set01 set02 # set01å’Œset02å…±åŒå­˜åœ¨çš„å…ƒç´  1) &quot;1&quot; 2) &quot;2&quot; 3) &quot;3&quot; 127.0.0.1:6379&gt; sunion set01 set02 # å°†set01å’Œset02ä¸­æ‰€æœ‰å…ƒç´ åˆå¹¶èµ·æ¥ï¼ˆæ’é™¤é‡å¤çš„ï¼‰ 1) &quot;5&quot; 2) &quot;4&quot; 3) &quot;3&quot; 4) &quot;2&quot; 5) &quot;b&quot; 6) &quot;a&quot; 7) &quot;1&quot; 127.0.0.1:6379&gt; sdiff setr01 set02 (empty list or set) 127.0.0.1:6379&gt; sdiff set01 set02 # åœ¨set01ä¸­å­˜åœ¨ï¼Œåœ¨set02ä¸­ä¸å­˜åœ¨1) &quot;4&quot; 2) &quot;5&quot; 127.0.0.1:6379&gt; sdiff set02 set01 # åœ¨set02ä¸­å­˜åœ¨ï¼Œåœ¨set01ä¸­ä¸å­˜åœ¨ 1) &quot;b&quot; 2) &quot;a&quot; 3.1.4 å“ˆå¸ŒHashç±»ä¼¼javaé‡Œé¢çš„Map&lt;String,Object&gt;KVæ¨¡å¼ä¸å˜ï¼Œä½†Væ˜¯ä¸€ä¸ªé”®å€¼å¯¹ hset&#x2F;hget&#x2F;hmset&#x2F;hmget&#x2F;hgetall&#x2F;hdelï¼šæ·»åŠ &#x2F;å¾—åˆ°&#x2F;å¤šæ·»åŠ &#x2F;å¤šå¾—åˆ°&#x2F;å¾—åˆ°å…¨éƒ¨&#x2F;åˆ é™¤å±æ€§ 12345678910111213141516171819202122232425127.0.0.1:6379&gt; hset user id 1001 # æ·»åŠ userï¼Œå€¼ä¸ºid=1001 (integer) 1 127.0.0.1:6379&gt; hget user (error) ERR wrong number of arguments for &#x27;hget&#x27; command 127.0.0.1:6379&gt; hget user id # æŸ¥è¯¢userï¼Œå¿…é¡»æŒ‡æ˜å…·ä½“çš„å­—æ®µ &quot;1001&quot; 127.0.0.1:6379&gt; hmset student id 101 name tom age 22 # æ·»åŠ å­¦ç”Ÿstudentï¼Œå±æ€§ä¸€å † OK127.0.0.1:6379&gt; hget student name # è·å–å­¦ç”Ÿåå­— &quot;tom&quot; 127.0.0.1:6379&gt; hmget student name age # è·å–å­¦ç”Ÿå¹´é¾„ 1) &quot;tom&quot; 2) &quot;22&quot; 127.0.0.1:6379&gt; hgetall student # è·å–å­¦ç”Ÿå…¨éƒ¨ä¿¡æ¯ 1) &quot;id&quot; 2) &quot;101&quot; 3) &quot;name&quot; 4) &quot;tom&quot; 5) &quot;age&quot; 6) &quot;22&quot; 127.0.0.1:6379&gt; hdel student age # åˆ é™¤å­¦ç”Ÿå¹´é¾„å±æ€§ (integer) 1 # åˆ é™¤æˆåŠŸ 127.0.0.1:6379&gt; hgetall student 1) &quot;id&quot; 2) &quot;101&quot; 3) &quot;name&quot; 4) &quot;tom&quot; hlenï¼šè¿”å›å…ƒç´ çš„å±æ€§ä¸ªæ•° 1234567127.0.0.1:6379&gt; hgetall student 1) &quot;id&quot; 2) &quot;101&quot; 3) &quot;name&quot; 4) &quot;tom&quot; 127.0.0.1:6379&gt; hlen student (integer) 2 # studentå±æ€§çš„æ•°é‡ï¼Œidå’Œnameï¼Œå…±ä¸¤ä¸ªå±æ€§ hexistsï¼šåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ 1234127.0.0.1:6379&gt; hexists student name # studentä¸­æ˜¯å¦å­˜åœ¨nameå±æ€§(integer) 1 # å­˜åœ¨127.0.0.1:6379&gt; hexists student age # studentä¸­æ˜¯å¦å­˜åœ¨ageå±æ€§(integer) 0 # ä¸å­˜åœ¨ hkeys&#x2F;hvalsï¼šè·å¾—å±æ€§çš„æ‰€æœ‰key&#x2F;è·å¾—å±æ€§çš„æ‰€æœ‰value 123456127.0.0.1:6379&gt; hkeys student # è·å–studentæ‰€æœ‰çš„å±æ€§å1) &quot;id&quot; 2) &quot;name&quot; 127.0.0.1:6379&gt; hvals student # è·å–studentæ‰€æœ‰å±æ€§çš„å€¼ï¼ˆå†…å®¹ï¼‰ 1) &quot;101&quot; 2) &quot;tom&quot; hincrby&#x2F;hincrbyfloatï¼šè‡ªå¢ï¼ˆæ•´æ•°ï¼‰&#x2F;è‡ªå¢ï¼ˆå°æ•°ï¼‰ 123456789101112127.0.0.1:6379&gt; hmset student id 101 name tom age 22OK127.0.0.1:6379&gt; hincrby student age 2 # è‡ªå¢æ•´æ•°2(integer) 24127.0.0.1:6379&gt; hget student age&quot;24&quot;127.0.0.1:6379&gt; hmset user id 1001 money 1000OK127.0.0.1:6379&gt; hincrbyfloat user money 5.5 # è‡ªå¢å°æ•°5.5&quot;1005.5&quot;127.0.0.1:6379&gt; hget user money&quot;1005.5&quot; hsetnxï¼šæ·»åŠ çš„æ—¶å€™ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ 12345678910111213127.0.0.1:6379&gt; hsetnx student age 18 # æ·»åŠ æ—¶ï¼Œåˆ¤æ–­ageæ˜¯å¦å­˜åœ¨ (integer) 0 # æ·»åŠ å¤±è´¥ï¼Œå› ä¸ºageå·²å­˜åœ¨ 127.0.0.1:6379&gt; hsetnx student sex ç”· # æ·»åŠ æ—¶ï¼Œåˆ¤æ–­sexæ˜¯å¦å­˜åœ¨ (integer) 1 # æ·»åŠ æˆåŠŸï¼Œå› ä¸ºsexä¸å­˜åœ¨ 127.0.0.1:6379&gt; hgetall student 1) &quot;id&quot; 2) &quot;101&quot; 3) &quot;name&quot; 4) &quot;tom&quot; 5) &quot;age&quot; 6) &quot;24&quot; 7) &quot;sex&quot; 8) &quot;\\xe7\\x94\\xb7&quot; # å¯ä»¥æ·»åŠ ä¸­æ–‡ï¼Œä½†æ˜¯æ˜¾ç¤ºä¸ºä¹±ç ï¼ˆåæœŸè§£å†³ï¼‰ 3.1.5 æœ‰åºé›†åˆZsetçœŸå®éœ€æ±‚ï¼šå……10å…ƒå¯äº«vip1ï¼›å……20å…ƒå¯äº«vip2ï¼›å……30å…ƒå¯äº«vip3ï¼›ä»¥æ­¤ç±»æ¨â€¦ zadd&#x2F;zrange ï¼ˆwithscoresï¼‰ï¼šæ·»åŠ &#x2F;æŸ¥è¯¢ 12345678910111213141516171819127.0.0.1:6379&gt; zadd zset01 10 vip1 20 vip2 30 vip3 40 vip4 50 vip5 (integer) 5 127.0.0.1:6379&gt; zrange zset01 0 -1 # æŸ¥è¯¢æ•°æ® 1) &quot;vip1&quot; 2) &quot;vip2&quot; 3) &quot;vip3&quot; 4) &quot;vip4&quot; 5) &quot;vip5&quot; 127.0.0.1:6379&gt; zrange zset01 0 -1 withscores # å¸¦ç€åˆ†æ•°æŸ¥è¯¢æ•°æ® 1) &quot;vip1&quot; 2) &quot;10&quot; 3) &quot;vip2&quot; 4) &quot;20&quot; 5) &quot;vip3&quot; 6) &quot;30&quot; 7) &quot;vip4&quot; 8) &quot;40&quot; 9) &quot;vip5&quot; 10) &quot;50&quot; zrangebyscoreï¼šæ¨¡ç³ŠæŸ¥è¯¢ ( ï¼š ä¸åŒ…å« limitï¼šè·³è¿‡å‡ ä¸ªæˆªå–å‡ ä¸ª 1234567891011121314127.0.0.1:6379&gt; zrangebyscore zset01 20 40 # 20 &lt;= score &lt;= 40 1) &quot;vip2&quot; 2) &quot;vip3&quot; 3) &quot;vip4&quot; 127.0.0.1:6379&gt; zrangebyscore zset01 20 (40 # 20 &lt;= score &lt; 40 1) &quot;vip2&quot; 2) &quot;vip3&quot; 127.0.0.1:6379&gt; zrangebyscore zset01 (20 (40 # 20 &lt; score &lt; 40 1) &quot;vip3&quot; 127.0.0.1:6379&gt; zrangebyscore zset01 10 40 limit 2 2 # 10 &lt;= score &lt;= 40ï¼Œå…±è¿”å›å››ä¸ªï¼Œè·³è¿‡å‰2ä¸ªï¼Œå–2ä¸ª 1) &quot;vip3&quot; 2) &quot;vip4&quot; 127.0.0.1:6379&gt; zrangebyscore zset01 10 40 limit 2 1 # 20 &lt;= score &lt;= 40ï¼Œå…±è¿”å›å››ä¸ªï¼Œè·³è¿‡å‰2ä¸ªï¼Œå–1ä¸ª 1) &quot;vip3&quot; zremï¼šåˆ é™¤å…ƒç´  12127.0.0.1:6379&gt; zrem zset01 vip5 # ç§»é™¤vip5(integer) 1 zcard&#x2F;zcount&#x2F;zrank&#x2F;zscoreï¼šé›†åˆé•¿åº¦&#x2F;èŒƒå›´å†…å…ƒç´ ä¸ªæ•°&#x2F;å¾—å…ƒç´ ä¸‹æ ‡&#x2F;é€šè¿‡å€¼å¾—åˆ†æ•° 12345678127.0.0.1:6379&gt; zcard zset01 # é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•° (integer) 4 127.0.0.1:6379&gt; zcount zset01 20 30 # åˆ†æ•°åœ¨20~40ä¹‹é—´ï¼Œå…±æœ‰å‡ ä¸ªå…ƒç´  (integer) 2 127.0.0.1:6379&gt; zrank zset01 vip3 # vip3åœ¨é›†åˆä¸­çš„ä¸‹æ ‡ï¼ˆä»ä¸Šå‘ä¸‹ï¼‰ (integer) 2 127.0.0.1:6379&gt; zscore zset01 vip2 # é€šè¿‡å…ƒç´ è·å¾—å¯¹åº”çš„åˆ†æ•° &quot;20&quot; zrevrankï¼šé€†åºæ‰¾ä¸‹æ ‡ï¼ˆä»ä¸‹å‘ä¸Šï¼‰ 12127.0.0.1:6379&gt; zrevrank zset01 vip3(integer) 1 zrevrangeï¼šé€†åºæŸ¥è¯¢ 12345678910127.0.0.1:6379&gt; zrange zset01 0 -1 # é¡ºåºæŸ¥è¯¢1) &quot;vip1&quot; 2) &quot;vip2&quot; 3) &quot;vip3&quot; 4) &quot;vip4&quot; 127.0.0.1:6379&gt; zrevrange zset01 0 -1 # é€†åºæŸ¥è¯¢ 1) &quot;vip4&quot; 2) &quot;vip3&quot; 3) &quot;vip2&quot; 4) &quot;vip1&quot; zrevrangebyscoreï¼šé€†åºèŒƒå›´æŸ¥æ‰¾ 1234127.0.0.1:6379&gt; zrevrangebyscore zset01 30 20 # é€†åºæŸ¥è¯¢åˆ†æ•°åœ¨30~20ä¹‹é—´çš„ ï¼ˆæ³¨æ„ï¼Œå…ˆå†™å¤§å€¼ï¼Œå†å†™å°å€¼ï¼‰1) &quot;vip3&quot; 2) &quot;vip2&quot;127.0.0.1:6379&gt; zrevrangebyscore zset01 20 30 # å¦‚æœå°å€¼åœ¨å‰ï¼Œåˆ™ç»“æœä¸ºnull (empty list or set) 3.3 æŒä¹…åŒ–3.3.1 RDBRedis DataBase åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®é›†çš„å¿«ç…§å†™å…¥ç£ç›˜ï¼› é»˜è®¤ä¿å­˜åœ¨&#x2F;usr&#x2F;local&#x2F;binä¸­ï¼Œæ–‡ä»¶ådump.rdb; 3.3.1.1 è‡ªåŠ¨å¤‡ä»½ redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå½“æˆ‘ä»¬æ¯æ¬¡ç”¨å®Œredisï¼Œå…³é—­linuxæ—¶ï¼ŒæŒ‰é“ç†æ¥è¯´ï¼Œå†…å­˜é‡Šæ”¾ï¼Œredisä¸­çš„æ•°æ®ä¹Ÿä¼šéšä¹‹æ¶ˆå¤± ä¸ºä»€ä¹ˆæˆ‘ä»¬å†æ¬¡å¯åŠ¨redisçš„æ—¶å€™ï¼Œæ˜¨å¤©çš„æ•°æ®è¿˜åœ¨ï¼Œå¹¶æ²¡æœ‰æ¶ˆå¤±å‘¢ï¼Ÿ æ­£æ˜¯å› ä¸ºï¼Œæ¯æ¬¡å…³æœºæ—¶ï¼Œredisä¼šè‡ªåŠ¨å°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ ï¼š&#x2F;usr&#x2F;local&#x2F;bin&#x2F;dump.rdb æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å…¨æ–¹ä½çš„è®¤è¯† è‡ªåŠ¨å¤‡ä»½æœºåˆ¶ é»˜è®¤çš„è‡ªåŠ¨å¤‡ä»½ç­–ç•¥ä¸åˆ©äºæˆ‘ä»¬æµ‹è¯•ï¼Œæ‰€ä»¥ä¿®æ”¹redis.confæ–‡ä»¶ä¸­çš„è‡ªåŠ¨å¤‡ä»½ç­–ç•¥ 123456vim redis.conf/SNAP # æœç´¢save 900 1 # 900ç§’å†…ï¼Œè‡³å°‘å˜æ›´1æ¬¡ï¼Œæ‰ä¼šè‡ªåŠ¨å¤‡ä»½save 120 10 # 120ç§’å†…ï¼Œè‡³å°‘å˜æ›´10æ¬¡ï¼Œæ‰ä¼šè‡ªåŠ¨å¤‡ä»½save 60 10000 # 60ç§’å†…ï¼Œè‡³å°‘å˜æ›´10000æ¬¡ï¼Œæ‰ä¼šè‡ªåŠ¨å¤‡ä»½ å½“ç„¶å¦‚æœä½ åªæ˜¯ç”¨Redisçš„ç¼“å­˜åŠŸèƒ½ï¼Œä¸éœ€è¦æŒä¹…åŒ–ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ³¨é‡Šæ‰æ‰€æœ‰çš„ save è¡Œæ¥åœç”¨ä¿å­˜åŠŸèƒ½ã€‚å¯ä»¥ç›´æ¥ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ¥å®ç°åœç”¨ï¼šsave â€œâ€ ä½¿ç”¨shutdownæ¨¡æ‹Ÿå…³æœº ï¼Œå…³æœºä¹‹å‰å’Œå…³æœºä¹‹åï¼Œå¯¹æ¯”dump.rdbæ–‡ä»¶çš„æ›´æ–°æ—¶é—´ã€‚æ³¨æ„ï¼šå½“æˆ‘ä»¬ä½¿ç”¨shutdownå‘½ä»¤ï¼Œredisä¼šè‡ªåŠ¨å°†æ•°æ®åº“å¤‡ä»½ï¼Œæ‰€ä»¥ï¼Œdump.rdbæ–‡ä»¶åˆ›å»ºæ—¶é—´æ›´æ–°äº† å¼€æœºå¯åŠ¨redisï¼Œæˆ‘ä»¬è¦åœ¨120ç§’å†…ä¿å­˜10æ¡æ•°æ®ï¼Œå†æŸ¥çœ‹dump.rdbæ–‡ä»¶çš„æ›´æ–°æ—¶é—´ï¼ˆå¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼Œæ–¹ä¾¿æŸ¥çœ‹ï¼‰ 120ç§’å†…ä¿å­˜10æ¡æ•°æ®è¿™ä¸€åŠ¨ä½œè§¦å‘äº†å¤‡ä»½æŒ‡ä»¤ï¼Œç›®å‰ï¼Œdump.rdbæ–‡ä»¶ä¸­ä¿å­˜äº†10æ¡æ•°æ®ï¼Œå°†dump.rdbæ‹·è´ä¸€ä»½dump10.rdbï¼Œæ­¤æ—¶ä¸¤ä¸ªæ–‡ä»¶ä¸­éƒ½ä¿å­˜10æ¡æ•°æ® æ—¢ç„¶æœ‰æ•°æ®å·²ç»å¤‡ä»½äº†ï¼Œé‚£æˆ‘ä»¬å°±è‚†æ— å¿Œæƒ®çš„å°†æ•°æ®å…¨éƒ¨åˆ é™¤flushallï¼Œå†æ¬¡shutdownå…³æœº å†æ¬¡å¯åŠ¨redisï¼Œå‘ç°æ•°æ®çœŸçš„æ¶ˆå¤±äº†ï¼Œå¹¶æ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬æ‰€æƒ³çš„ å°†dump.rdbæ–‡ä»¶ä¸­çš„å†…å®¹æ¢å¤åˆ°redisä¸­ã€‚ä¸ºä»€ä¹ˆï¼Ÿ å› ä¸ºï¼Œå½“æˆ‘ä»¬ä¿å­˜10æ¡ä»¥ä¸Šçš„æ•°æ®æ—¶ï¼Œæ•°æ®å¤‡ä»½èµ·æ¥äº†ï¼› ç„¶ååˆ é™¤æ•°æ®åº“ï¼Œå¤‡ä»½æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œä¹Ÿæ²¡é—®é¢˜ï¼› ä½†æ˜¯ï¼Œé—®é¢˜å‡ºåœ¨shutdownä¸Šï¼Œè¿™ä¸ªå‘½ä»¤ä¸€æ—¦æ‰§è¡Œï¼Œå°±ä¼šç«‹åˆ»å¤‡ä»½ï¼Œå°†åˆ é™¤ä¹‹åçš„ç©ºæ•°æ®åº“ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ï¼Œå°†ä¹‹å‰è£…10æ¡æ•°æ®çš„å¤‡ä»½æ–‡ä»¶è¦†ç›–æ‰äº†ã€‚æ‰€ä»¥ï¼Œå°±å‡ºç°äº†ä¸Šå›¾çš„ç»“æœã€‚è‡ªåŠ¨æ¢å¤å¤±è´¥ã€‚ æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¦å°†å¤‡ä»½æ–‡ä»¶å†å¤‡ä»½ å°†dump.rdbæ–‡ä»¶åˆ é™¤ï¼Œå°†dump10.rdbé‡å‘½åä¸ºdump.rdb å¯åŠ¨redisæœåŠ¡ï¼Œç™»å½•redisï¼Œæ•°æ®10æ¡ï¼Œå…¨éƒ¨æ¢å¤ï¼ 3.3.1.2 æ‰‹åŠ¨å¤‡ä»½ ä¹‹å‰è‡ªåŠ¨å¤‡ä»½ï¼Œå¿…é¡»æ›´æ”¹å¥½å¤šæ•°æ®ï¼Œä¾‹å¦‚ä¸Šè¾¹ï¼Œæˆ‘ä»¬æ”¹å˜äº†åå¤šæ¡æ•°æ®ï¼Œæ‰ä¼šè‡ªåŠ¨å¤‡ä»½ï¼› ç°åœ¨ï¼Œæˆ‘åªä¿å­˜ä¸€æ¡æ•°æ®ï¼Œå°±æƒ³ç«‹åˆ»å¤‡ä»½ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ æ¯æ¬¡æ“ä½œå®Œæˆï¼Œæ‰§è¡Œå‘½ä»¤ save å°±ä¼šç«‹åˆ»å¤‡ä»½ 3.3.1.3 ä¸RDBç›¸å…³çš„é…ç½® stop-writes-on-bgsave-errorï¼šè¿›æ°´å£å’Œå‡ºæ°´å£ï¼Œå‡ºæ°´å£å‘ç”Ÿæ•…éšœä¸å¦ yesï¼šå½“åå°å¤‡ä»½æ—¶å€™åç”Ÿé”™è¯¯ï¼Œå‰å°åœæ­¢å†™å…¥ noï¼šä¸ç®¡æ­»æ´»ï¼Œå°±æ˜¯å¾€é‡Œæ€¼ rdbcompressionï¼šå¯¹äºå­˜å‚¨åˆ°ç£ç›˜ä¸­çš„å¿«ç…§ï¼Œæ˜¯å¦å¯åŠ¨LZFå‹ç¼©ç®—æ³•ï¼Œä¸€èˆ¬éƒ½ä¼šå¯åŠ¨ï¼Œå› ä¸ºè¿™ç‚¹æ€§èƒ½ï¼Œå¤šä¹°ä¸€å°ç”µè„‘ï¼Œå®Œå…¨æå®šNä¸ªæ¥å›äº†ã€‚ yesï¼šå¯åŠ¨ noï¼šä¸å¯åŠ¨ï¼ˆä¸æƒ³æ¶ˆè€—CPUèµ„æºï¼Œå¯å…³é—­ï¼‰ dbfilenameï¼šå¿«ç…§å¤‡ä»½æ–‡ä»¶åå­— dirï¼šå¿«ç…§å¤‡ä»½æ–‡ä»¶ä¿å­˜çš„ç›®å½•ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½• ä¼˜åŠ¿andåŠ£åŠ¿ ä¼˜ï¼šé€‚åˆå¤§è§„æ¨¡æ•°æ®æ¢å¤ï¼Œå¯¹æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´è¡Œè¦æ±‚ä¸é«˜ï¼› åŠ£ï¼šä¸€å®šé—´éš”å¤‡ä»½ä¸€æ¬¡ï¼Œæ„å¤–downæ‰ï¼Œå°±å¤±å»æœ€åä¸€æ¬¡å¿«ç…§çš„æ‰€æœ‰ä¿®æ”¹ 3.3.2 AOFAppend Only File ä»¥æ—¥å¿—çš„å½¢å¼è®°å½•æ¯ä¸ªå†™æ“ä½œï¼› å°†redisæ‰§è¡Œè¿‡çš„å†™æŒ‡ä»¤å…¨éƒ¨è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼› åªè®¸è¿½åŠ æ–‡ä»¶ï¼Œä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼› redisåœ¨å¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶ä»å¤´åˆ°å°¾æ‰§è¡Œä¸€éï¼Œè¿™æ ·æ¥é‡æ–°æ„å»ºæ•°æ®ï¼› 3.3.2.1 å¼€å¯AOF ä¸ºäº†é¿å…å¤±è¯¯ï¼Œæœ€å¥½å°†redis.confæ€»é…ç½®æ–‡ä»¶å¤‡ä»½ä¸€ä¸‹ï¼Œç„¶åå†ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š 12appendonly yesappendfilename appendonly.aof é‡æ–°å¯åŠ¨redisï¼Œä»¥æ–°é…ç½®æ–‡ä»¶å¯åŠ¨ 1redis-server /usr/local/redis5.0.4/redis.conf è¿æ¥redisï¼ŒåŠ æ•°æ®ï¼Œåˆ åº“ï¼Œé€€å‡º æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹å¤šä¸€ä¸ªaofæ–‡ä»¶ï¼Œçœ‹çœ‹æ–‡ä»¶ä¸­çš„å†…å®¹,ä¿å­˜çš„éƒ½æ˜¯ å†™ æ“ä½œ æ–‡ä»¶ä¸­æœ€åä¸€å¥è¦åˆ é™¤ï¼Œå¦åˆ™æ•°æ®æ¢å¤ä¸äº† ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œæœ€åè¦ :wq**!** å¼ºåˆ¶æ‰§è¡Œ åªéœ€è¦é‡æ–°è¿æ¥ï¼Œæ•°æ®æ¢å¤æˆåŠŸ 3.3.2.2 å…±å­˜ï¼Ÿè°ä¼˜å…ˆï¼Ÿæˆ‘ä»¬æŸ¥çœ‹redis.confæ–‡ä»¶ï¼ŒAOFå’ŒRDBä¸¤ç§å¤‡ä»½ç­–ç•¥å¯ä»¥åŒæ—¶å¼€å¯ï¼Œé‚£ç³»ç»Ÿä¼šæ€æ ·é€‰æ‹©ï¼Ÿ åŠ¨æ‰‹è¯•è¯•ï¼Œç¼–è¾‘appendonly.aofï¼Œèƒ¡æä¹±ç ï¼Œä¿å­˜é€€å‡º å¯åŠ¨redis å¤±è´¥ï¼Œæ‰€ä»¥æ˜¯AOFä¼˜å…ˆè½½å…¥æ¥æ¢å¤åŸå§‹æ•°æ®ï¼å› ä¸ºAOFæ¯”RDBæ•°æ®ä¿å­˜çš„å®Œæ•´æ€§æ›´é«˜ï¼ ä¿®å¤AOFæ–‡ä»¶ï¼Œæ€å…‰ä¸ç¬¦åˆredisè¯­æ³•è§„èŒƒçš„ä»£ç  1reids-check-aof --fix appendonly.aof 3.3.2.3 ä¸AOFç›¸å…³çš„é…ç½® appendonlyï¼šå¼€å¯aofæ¨¡å¼ appendfilenameï¼šaofçš„æ–‡ä»¶åå­—ï¼Œæœ€å¥½åˆ«æ”¹ï¼ appendfsyncï¼šè¿½å†™ç­–ç•¥ alwaysï¼šæ¯æ¬¡æ•°æ®å˜æ›´ï¼Œå°±ä¼šç«‹å³è®°å½•åˆ°ç£ç›˜ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œä½†æ•°æ®å®Œæ•´æ€§å¥½ everysecï¼šé»˜è®¤è®¾ç½®ï¼Œå¼‚æ­¥æ“ä½œï¼Œæ¯ç§’è®°å½•ï¼Œå¦‚æœä¸€ç§’å†…å®•æœºï¼Œä¼šæœ‰æ•°æ®ä¸¢å¤± noï¼šä¸è¿½å†™ no-appendfsync-on-rewriteï¼šé‡å†™æ—¶æ˜¯å¦è¿ç”¨Appendfsyncè¿½å†™ç­–ç•¥ï¼›ç”¨é»˜è®¤noå³å¯ï¼Œä¿è¯æ•°æ®å®‰å…¨æ€§ã€‚ AOFé‡‡ç”¨æ–‡ä»¶è¿½åŠ çš„æ–¹å¼ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¢åŠ äº†é‡å†™æœºåˆ¶ï¼Œredisä¼šè‡ªåŠ¨è®°å½•ä¸Šä¸€æ¬¡AOFæ–‡ä»¶çš„å¤§å°ï¼Œå½“AOFæ–‡ä»¶å¤§å°è¾¾åˆ°é¢„å…ˆè®¾å®šçš„å¤§å°æ—¶ï¼Œrediså°±ä¼šå¯åŠ¨AOFæ–‡ä»¶è¿›è¡Œå†…å®¹å‹ç¼©ï¼Œåªä¿ç•™å¯ä»¥æ¢å¤æ•°æ®çš„æœ€å°æŒ‡ä»¤é›†åˆ auto-aof-rewrite-percentageï¼šå¦‚æœAOFæ–‡ä»¶å¤§å°å·²ç»è¶…è¿‡åŸæ¥çš„100%ï¼Œä¹Ÿå°±æ˜¯ä¸€å€ï¼Œæ‰é‡å†™å‹ç¼© auto-aof-rewrite-min-sizeï¼šå¦‚æœAOFæ–‡ä»¶å·²ç»è¶…è¿‡äº†64mbï¼Œæ‰é‡å†™å‹ç¼© 3.3.3 æ€»ç»“ï¼ˆå¦‚ä½•é€‰æ‹©ï¼Ÿï¼‰ RDBï¼šåªç”¨ä½œåå¤‡ç”¨é€”ï¼Œå»ºè®®15åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡å°±å¥½ AOFï¼š åœ¨æœ€æ¶åŠ£çš„æƒ…å†µä¸‹ï¼Œä¹Ÿåªä¸¢å¤±ä¸è¶…è¿‡2ç§’çš„æ•°æ®ï¼Œæ•°æ®å®Œæ•´æ€§æ¯”è¾ƒé«˜ï¼Œä½†ä»£ä»·å¤ªå¤§ï¼Œä¼šå¸¦æ¥æŒç»­çš„IO å¯¹ç¡¬ç›˜çš„å¤§å°è¦æ±‚ä¹Ÿé«˜ï¼Œé»˜è®¤64mbå¤ªå°äº†ï¼Œä¼ä¸šçº§æœ€å°‘éƒ½æ˜¯5Gä»¥ä¸Šï¼› åé¢è¦å­¦ä¹ çš„master&#x2F;slaveæ‰æ˜¯æ–°æµªå¾®åšçš„é€‰æ‹©ï¼ï¼ 3.4 äº‹åŠ¡ å¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤ç»„ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ï¼ˆæ’é˜Ÿï¼‰ï¼Œä¸ä¼šè¢«æ’é˜Ÿï¼› ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œä¸€æ¬¡æ€§ï¼Œé¡ºåºæ€§ï¼Œæ’ä»–æ€§çš„æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤ ä¸‰ç‰¹æ€§ éš”ç¦»æ€§ï¼šæ‰€æœ‰å‘½ä»¤éƒ½ä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯é€æ¥çš„å‘½ä»¤æ‰“æ–­ æ²¡æœ‰éš”ç¦»çº§åˆ«ï¼šé˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ²¡æœ‰æäº¤ä¹‹å‰éƒ½ä¸ä¼šè¢«å®é™…çš„æ‰§è¡Œï¼Œä¸å­˜åœ¨â€œäº‹åŠ¡ä¸­æŸ¥è¯¢è¦çœ‹åˆ°äº‹åŠ¡é‡Œçš„æ›´æ–°ï¼Œäº‹åŠ¡å¤–æŸ¥è¯¢ä¸èƒ½çœ‹åˆ°â€è¿™ä¸ªå¤´ç–¼çš„é—®é¢˜ ä¸ä¿è¯åŸå­æ€§ï¼šå†¤æœ‰å¤´å€ºæœ‰ä¸»ï¼Œå¦‚æœä¸€ä¸ªå‘½ä»¤å¤±è´¥ï¼Œä½†æ˜¯åˆ«çš„å‘½ä»¤å¯èƒ½ä¼šæ‰§è¡ŒæˆåŠŸï¼Œæ²¡æœ‰å›æ»š ä¸‰æ­¥èµ° å¼€å¯multi å…¥é˜Ÿqueued æ‰§è¡Œexec ä¸å…³ç³»å‹æ•°æ®åº“äº‹åŠ¡ç›¸æ¯”ï¼Œ multiï¼šå¯ä»¥ç†è§£æˆå…³ç³»å‹äº‹åŠ¡ä¸­çš„ begin exec ï¼šå¯ä»¥ç†è§£æˆå…³ç³»å‹äº‹åŠ¡ä¸­çš„ commit discard ï¼šå¯ä»¥ç†è§£æˆå…³ç³»å‹äº‹åŠ¡ä¸­çš„ rollback 3.4.1 ä¸€èµ·ç”Ÿå¼€å¯äº‹åŠ¡ï¼ŒåŠ å…¥é˜Ÿåˆ—ï¼Œä¸€èµ·æ‰§è¡Œï¼Œå¹¶æˆåŠŸ 123456789101112131415127.0.0.1:6379&gt; multi # å¼€å¯äº‹åŠ¡ OK127.0.0.1:6379&gt; set k1 v1 QUEUED # åŠ å…¥é˜Ÿåˆ— 127.0.0.1:6379&gt; set k2 v2QUEUED # åŠ å…¥é˜Ÿåˆ— 127.0.0.1:6379&gt; get k2 QUEUED # åŠ å…¥é˜Ÿåˆ— 127.0.0.1:6379&gt; set k3 v3 QUEUED # åŠ å…¥é˜Ÿåˆ— 127.0.0.1:6379&gt; exec # æ‰§è¡Œï¼Œä¸€èµ·æˆåŠŸï¼ 1) OK 2) OK 3) &quot;v2&quot; 4) OK 3.4.2 ä¸€èµ·æ­»æ”¾å¼ƒä¹‹å‰çš„æ“ä½œï¼Œæ¢å¤åˆ°åŸæ¥çš„å€¼ 123456789127.0.0.1:6379&gt; multi # å¼€å¯äº‹åŠ¡ OK127.0.0.1:6379&gt; set k1 v1111 QUEUED 127.0.0.1:6379&gt; set k2 v2222 QUEUED 127.0.0.1:6379&gt; discard # æ”¾å¼ƒæ“ä½œ OK127.0.0.1:6379&gt; get k1 &quot;v1&quot; # è¿˜æ˜¯åŸæ¥çš„å€¼ 3.4.3 ä¸€ç²’è€é¼ å±åä¸€é”…æ±¤ä¸€å¥æŠ¥é”™ï¼Œå…¨éƒ¨å–æ¶ˆï¼Œæ¢å¤åˆ°åŸæ¥çš„å€¼ 1234567891011121314127.0.0.1:6379&gt; multi OK127.0.0.1:6379&gt; set k4 v4 QUEUED 127.0.0.1:6379&gt; setlalala # ä¸€å¥æŠ¥é”™ (error) ERR unknown command `setlalala`, with args beginning with: 127.0.0.1:6379&gt; set k5 v5 QUEUED 127.0.0.1:6379&gt; exec # é˜Ÿåˆ—ä¸­å‘½ä»¤å…¨éƒ¨å–æ¶ˆ (error) EXECABORT Transaction discarded because of previous errors. 127.0.0.1:6379&gt; keys * # è¿˜æ˜¯åŸæ¥çš„å€¼ 1) &quot;k2&quot; 2) &quot;k3&quot; 3) &quot;k1&quot; 3.4.4 å†¤æœ‰å¤´å€ºæœ‰ä¸»è¿½ç©¶è´£ä»»ï¼Œè°çš„é”™ï¼Œæ‰¾è°å» 1234567891011121314151617127.0.0.1:6379&gt; multi OK127.0.0.1:6379&gt; incr k1 # è™½ç„¶v1ä¸èƒ½++ï¼Œä½†æ˜¯åŠ å…¥é˜Ÿåˆ—å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œç±»ä¼¼javaä¸­çš„é€šè¿‡ç¼– è¯‘QUEUED 127.0.0.1:6379&gt; set k4 v4 QUEUED 127.0.0.1:6379&gt; set k5 v5 QUEUED 127.0.0.1:6379&gt; exec 1) (error) ERR value is not an integer or out of range # çœŸæ­£æ‰§è¡Œçš„æ—¶å€™ï¼ŒæŠ¥é”™ 2) OK # æˆåŠŸ 3) OK # æˆåŠŸ 127.0.0.1:6379&gt; keys * 1) &quot;k5&quot; 2) &quot;k1&quot; 3) &quot;k3&quot; 4) &quot;k2&quot; 5) &quot;k4&quot; 3.4.5 watchç›‘æ§æµ‹è¯•ï¼šæ¨¡æ‹Ÿæ”¶å…¥ä¸æ”¯å‡º æ­£å¸¸æƒ…å†µä¸‹ï¼š 12345678910111213127.0.0.1:6379&gt; set in 100 # æ”¶å…¥100å…ƒ OK127.0.0.1:6379&gt; set out 0 # æ”¯å‡º0å…ƒ OK127.0.0.1:6379&gt; multi OK127.0.0.1:6379&gt; decrby in 20 # æ”¶å…¥-20 QUEUED 127.0.0.1:6379&gt; incrby out 20 # æ”¯å‡º+20 QUEUED 127.0.0.1:6379&gt; exec 1) (integer) 80 2) (integer) 20 # ç»“æœï¼Œæ²¡é—®é¢˜ï¼ ç‰¹æ®Šæƒ…å†µä¸‹ï¼š 12345678910127.0.0.1:6379&gt; watch in # ç›‘æ§æ”¶å…¥in OK127.0.0.1:6379&gt; multi OK127.0.0.1:6379&gt; decrby in 20 QUEUED 127.0.0.1:6379&gt; incrby out 20 QUEUED 127.0.0.1:6379&gt; exec (nil) # åœ¨execä¹‹å‰ï¼Œæˆ‘å¼€å¯äº†å¦ä¸€ä¸ªçª—å£ï¼ˆçº¿ç¨‹ï¼‰ï¼Œå¯¹ç›‘æ§çš„inåšäº†ä¿®æ”¹ï¼Œæ‰€ä»¥æœ¬æ¬¡çš„äº‹åŠ¡å°† è¢«æ‰“æ–­ï¼ˆå¤±æ•ˆï¼‰ï¼Œç±»ä¼¼äºâ€œä¹è§‚é”â€ unwatchï¼šå–æ¶ˆwatchå‘½ä»¤å¯¹æ‰€æœ‰keyçš„æ“ä½œ ä¸€æ—¦æ‰§è¡Œäº†execå‘½ä»¤ï¼Œé‚£ä¹ˆä¹‹å‰åŠ çš„æ‰€æœ‰ç›‘æ§è‡ªåŠ¨å¤±æ•ˆï¼ 3.5 Redisçš„å‘å¸ƒè®¢é˜… è¿›ç¨‹é—´çš„ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼šå¾®ä¿¡è®¢é˜…å· è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ 1234567891011121314127.0.0.1:6379&gt; subscribe cctv1 cctv5 cctv6 # 1.è®¢é˜…ä¸‰ä¸ªé¢‘é“ Reading messages... (press Ctrl-C to quit) 1) &quot;subscribe&quot; 2) &quot;cctv1&quot; 3) (integer) 1 1) &quot;subscribe&quot; 2) &quot;cctv5&quot;3) (integer) 2 1) &quot;subscribe&quot; 2) &quot;cctv6&quot; 3) (integer) 3 1) &quot;message&quot; # 3.cctv5æ¥æ”¶åˆ°æ¨é€è¿‡æ¥çš„ä¿¡æ¯ 2) &quot;cctv5&quot; 3) &quot;NBA&quot; å‘é€æ¶ˆæ¯ 12127.0.0.1:6379&gt; publish cctv5 NBA # 2.å‘é€æ¶ˆæ¯ç»™cctv5 (integer) 1 3.5 ä¸»ä»å¤åˆ¶ å°±æ˜¯ redisé›†ç¾¤çš„ç­–ç•¥ é…ä»ï¼ˆåº“ï¼‰ä¸é…ä¸»ï¼ˆåº“ï¼‰ï¼šå°å¼Ÿå¯ä»¥é€‰æ‹©è°æ˜¯å¤§å“¥ï¼Œä½†å¤§å“¥æ²¡æœ‰æƒåˆ©å»é€‰æ‹©å°å¼Ÿ è¯»å†™åˆ†ç¦»ï¼šä¸»æœºå†™ï¼Œä»æœºè¯» 3.5.1 ä¸€ä¸»äºŒä»† å‡†å¤‡ä¸‰å°æœåŠ¡å™¨ï¼Œå¹¶ä¿®æ”¹redis.conf 1bind 0.0.0.0 å¯åŠ¨ä¸‰å°redisï¼Œå¹¶æŸ¥çœ‹æ¯å°æœºå™¨çš„è§’è‰²ï¼Œéƒ½æ˜¯master 1info replication æµ‹è¯•å¼€å§‹ é¦–å…ˆï¼Œå°†ä¸‰ä¸ªæœºå™¨å…¨éƒ½æ¸…ç©ºï¼Œç¬¬ä¸€å°æ·»åŠ å€¼ 1mset k1 v1 k2 v2 å…¶ä½™ä¸¤å°æœºå™¨ï¼Œå¤åˆ¶ï¼ˆæ‰¾å¤§å“¥ï¼‰ 1slaveof 192.168.204.141 6379 ç¬¬ä¸€å°å†æ·»åŠ å€¼ 1set k3 v3 **æ€è€ƒ1ï¼š**slaveä¹‹å‰çš„k1å’Œk2æ˜¯å¦èƒ½æ‹¿åˆ°ï¼Ÿ **æ€è€ƒ2ï¼š**slaveä¹‹åçš„k3æ˜¯å¦èƒ½æ‹¿åˆ°ï¼Ÿ **æ€è€ƒ3ï¼š**åŒæ—¶æ·»åŠ k4ï¼Œç»“æœå¦‚ä½•ï¼Ÿ **æ€è€ƒ4ï¼š**ä¸»æœºshutdownï¼Œä»æœºå¦‚ä½•ï¼Ÿ **æ€è€ƒ5ï¼š**ä¸»æœºé‡å¯ï¼Œä»æœºåˆå¦‚ä½•ï¼Ÿ **æ€è€ƒ6ï¼š**ä»æœºæ­»äº†ï¼Œä¸»æœºå¦‚ä½•ï¼Ÿä»æœºå½’æ¥èº«ä»½æ˜¯å¦å˜åŒ–ï¼Ÿ 3.5.2 è¡€è„‰ç›¸ä¼  ä¸€ä¸ªä¸»æœºç†è®ºä¸Šå¯ä»¥å¤šä¸ªä»æœºï¼Œä½†æ˜¯è¿™æ ·çš„è¯ï¼Œè¿™ä¸ªä¸»æœºä¼šå¾ˆç´¯ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨javaé¢å‘å¯¹è±¡ç»§æ‰¿ä¸­çš„ä¼ é€’æ€§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡è½»ä¸»æœºçš„è´Ÿæ‹… å½¢æˆç¥–å­™ä¸‰ä»£ï¼š 1234127.0.0.1:6379&gt; slaveof 192.168.204.141 6379 # 142è·Ÿéš141OK127.0.0.1:6379&gt; slaveof 192.168.204.142 6379 # 143è·Ÿéš142 &#x27;OK 3.5.3 è°‹æƒç¯¡ä½ 1ä¸ªä¸»æœºï¼Œ2ä¸ªä»æœºï¼Œå½“1ä¸ªä¸»æœºæŒ‚æ‰äº†ï¼Œåªèƒ½ä»2ä¸ªä»æœºä¸­å†æ¬¡é€‰1ä¸ªä¸»æœº å›½ä¸å¯ä¸€æ—¥æ— å›ï¼Œå†›ä¸å¯ä¸€æ—¥æ— å¸… æ‰‹åŠ¨é€‰è€å¤§ æ¨¡æ‹Ÿæµ‹è¯•ï¼š1ä¸ºmasterï¼Œ2å’Œ3ä¸ºslaveï¼Œå½“1æŒ‚æ‰åï¼Œ2ç¯¡æƒä¸ºmasterï¼Œ3è·Ÿ2 1slaveof no one # 2ä¸Šæ‰§è¡Œï¼Œæ²¡æœ‰äººèƒ½è®©æˆ‘è‡£æœï¼Œé‚£æˆ‘å°±æ˜¯è€å¤§ 1slaveof 192.168.204.142 6379 # 3è·Ÿéš2å· **æ€è€ƒï¼š**å½“1å†æ¬¡å›å½’ï¼Œä¼šæ€æ ·ï¼Ÿ 2å’Œ3å·²ç»å½¢æˆæ–°çš„é›†ç¾¤ï¼Œå’Œ1æ²¡æœ‰ä»»ä½•çš„å…³ç³»äº†ã€‚æ‰€ä»¥1æˆä¸ºäº†å…‰æ†å¸ä»¤ 3.5.4 å¤åˆ¶åŸç† å®Œæˆä¸Šé¢å‡ ä¸ªæ­¥éª¤åå°±å®Œæˆäº†ä»æœåŠ¡å™¨æ•°æ®åˆå§‹åŒ–çš„æ‰€æœ‰æ“ä½œï¼Œä»æœåŠ¡å™¨æ­¤æ—¶å¯ä»¥æ¥æ”¶æ¥è‡ªç”¨æˆ·çš„è¯»è¯·æ±‚ å…¨é‡å¤åˆ¶ï¼šSlaveåˆå§‹åŒ–é˜¶æ®µï¼Œè¿™æ—¶Slaveéœ€è¦å°†Masterä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½å¤åˆ¶ä¸€ä»½slaveæ¥æ”¶åˆ°æ•°æ®æ–‡ä»¶åï¼Œå­˜ç›˜ï¼Œå¹¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼›ï¼ˆæ­¥éª¤1234ï¼‰ å¢é‡å¤åˆ¶ï¼šSlaveåˆå§‹åŒ–åï¼Œå¼€å§‹æ­£å¸¸å·¥ä½œæ—¶ä¸»æœåŠ¡å™¨å‘ç”Ÿçš„å†™æ“ä½œåŒæ­¥åˆ°ä»æœåŠ¡å™¨çš„è¿‡ç¨‹ï¼›ï¼ˆæ­¥éª¤56ï¼‰ä½†ï¼Œåªè¦æ˜¯é‡æ–°è¿æ¥masterï¼Œä¸€æ¬¡æ€§ï¼ˆå…¨é‡å¤åˆ¶ï¼‰åŒæ­¥å°†è‡ªåŠ¨æ‰§è¡Œï¼› Redisä¸»ä»åŒæ­¥ç­–ç•¥ï¼šä¸»ä»åˆšåˆšè¿æ¥çš„æ—¶å€™ï¼Œè¿›è¡Œå…¨é‡åŒæ­¥ï¼›å…¨åŒæ­¥ç»“æŸåï¼Œè¿›è¡Œå¢é‡åŒæ­¥ã€‚ å½“ç„¶ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œslave åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å‘èµ·å…¨é‡åŒæ­¥ã€‚ redis ç­–ç•¥æ˜¯ï¼Œæ— è®ºå¦‚ä½•ï¼Œé¦–å…ˆä¼šå°è¯•è¿›è¡Œå¢é‡åŒæ­¥ï¼Œå¦‚ä¸æˆåŠŸï¼Œè¦æ±‚ä»æœºè¿›è¡Œå…¨é‡åŒæ­¥ã€‚ 3.5.5 å“¨å…µæ¨¡å¼ è‡ªåŠ¨ç‰ˆçš„è°‹æƒç¯¡ä½ï¼ æœ‰ä¸ªå“¨å…µä¸€ç›´åœ¨å·¡é€»ï¼Œçªç„¶å‘ç°ï¼ï¼ï¼ï¼ï¼è€å¤§æŒ‚äº†ï¼Œå°å¼Ÿä»¬ä¼šè‡ªåŠ¨æŠ•ç¥¨ï¼Œä»ä¼—å°å¼Ÿä¸­é€‰å‡ºæ–°çš„è€å¤§ Sentinelæ˜¯Redisçš„é«˜å¯ç”¨æ€§è§£å†³æ–¹æ¡ˆï¼š ç”±ä¸€ä¸ªæˆ–å¤šä¸ªSentinelå®ä¾‹ç»„æˆçš„Sentinelç³»ç»Ÿå¯ä»¥ç›‘è§†ä»»æ„å¤šä¸ªä¸»æœåŠ¡å™¨ï¼Œä»¥åŠæ‰€æœ‰ä»æœåŠ¡å™¨ï¼Œå¹¶åœ¨è¢«ç›‘è§†çš„ä¸»æœåŠ¡å™¨è¿›å…¥ä¸‹çº¿çŠ¶æ€æ—¶ï¼Œè‡ªåŠ¨å°†ä¸‹çº¿ä¸»æœåŠ¡å™¨å±ä¸‹çš„æŸä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œç„¶åç”±æ–°çš„ä¸»æœåŠ¡å™¨ä»£æ›¿å·²ä¸‹çº¿çš„ä¸»æœåŠ¡å™¨ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ æ¨¡æ‹Ÿæµ‹è¯• 1ä¸»ï¼Œ2å’Œ3ä» æ¯ä¸€å°æœåŠ¡å™¨ä¸­åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶sentinel.confï¼Œåå­—ç»ä¸èƒ½é”™ï¼Œå¹¶ç¼–è¾‘sentinel.conf 12# sentinel monitor è¢«ç›‘æ§ä¸»æœºåï¼ˆè‡ªå®šä¹‰ï¼‰ ip port ç¥¨æ•° sentinel monitor redis141 192.168.204.141 6379 1 å¯åŠ¨æœåŠ¡çš„é¡ºåºï¼šä¸»Redis â€“&gt; ä»Redis â€“&gt; Sentinel1&#x2F;2&#x2F;3 1redis-sentinel sentinel.conf å°†1å·è€å¤§æŒ‚æ‰ï¼Œåå°è‡ªåŠ¨å‘èµ·æ¿€çƒˆçš„æŠ•ç¥¨ï¼Œé€‰å‡ºæ–°çš„è€å¤§ 12127.0.0.1:6379&gt; shutdownnot connected&gt; exit æŸ¥çœ‹æœ€åæƒåˆ©çš„åˆ†é… 3æˆä¸ºäº†æ–°çš„è€å¤§ï¼Œ2è¿˜æ˜¯å°å¼Ÿ å¦‚æœä¹‹å‰çš„è€å¤§å†æ¬¡å½’æ¥å‘¢ï¼Ÿ 1å·å†æ¬¡å½’æ¥ï¼Œè‡ªå·±æˆä¸ºäº†masterï¼Œå’Œ3å¹³èµ·å¹³å è¿‡äº†å‡ ç§’ä¹‹åï¼Œè¢«å“¨å…µæ£€æµ‹åˆ°äº†1å·æœºçš„å½’æ¥ï¼Œ1å·ä½ åˆ«è‡ªå·±ç©äº†ï¼Œè¿›å…¥é›†ä½“å§ï¼Œä½†æ˜¯æ–°çš„è€å¤§å·²ç»äº§ç”Ÿäº†ï¼Œä½ åªèƒ½ä½œä¸ºå°å¼Ÿå†æ¬¡è¿›å…¥é›†ä½“ï¼ 3.5.6 ç¼ºç‚¹ ç”±äºæ‰€æœ‰çš„å†™æ“ä½œéƒ½æ˜¯åœ¨masterä¸Šå®Œæˆçš„ï¼› ç„¶åå†åŒæ­¥åˆ°slaveä¸Šï¼Œæ‰€ä»¥ä¸¤å°æœºå™¨ä¹‹é—´é€šä¿¡ä¼šæœ‰å»¶è¿Ÿï¼› å½“ç³»ç»Ÿå¾ˆç¹å¿™çš„æ—¶å€™ï¼Œå»¶è¿Ÿé—®é¢˜ä¼šåŠ é‡ï¼› slaveæœºå™¨æ•°é‡å¢åŠ ï¼Œé—®é¢˜ä¹Ÿä¼šåŠ é‡ 3.6 æ€»é…ç½®redis.conf è¯¦è§£123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478# Redis é…ç½®æ–‡ä»¶ç¤ºä¾‹# æ³¨æ„å•ä½: å½“éœ€è¦é…ç½®å†…å­˜å¤§å°æ—¶, å¯èƒ½éœ€è¦æŒ‡å®šåƒ1k,5GB,4Mç­‰å¸¸è§æ ¼å¼ ## 1k =&gt; 1000 bytes # 1kb =&gt; 1024 bytes # 1m =&gt; 1000000 bytes# 1mb =&gt; 1024*1024 bytes # 1g =&gt; 1000000000 bytes # 1gb =&gt; 1024*1024*1024 bytes ## å•ä½æ˜¯å¯¹å¤§å°å†™ä¸æ•æ„Ÿçš„ 1GB 1Gb 1gB æ˜¯ç›¸åŒçš„ã€‚ ################################## INCLUDES åŒ…å«æ–‡ä»¶ç›¸å…³ ################################### # å¯ä»¥åœ¨è¿™é‡ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªé€‚ç”¨äºæ‰€æœ‰RedisæœåŠ¡å™¨çš„æ ‡å‡†é…ç½®æ¨¡æ¿ # ä½†ä¹Ÿéœ€è¦ä¸€äº›æ¯ä¸ªæœåŠ¡å™¨è‡ªå®šä¹‰çš„è®¾ç½®ï¼Œè¿™ä¸ªåŠŸèƒ½å°†å¾ˆæœ‰ç”¨ã€‚è¢«åŒ…å«çš„é…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥åŒ…å«å…¶ä»–é…ç½®æ–‡ ä»¶ï¼Œ# æ‰€ä»¥éœ€è¦è°¨æ…çš„ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚ ## æ³¨æ„â€œinclueâ€é€‰é¡¹ä¸èƒ½è¢«adminæˆ–Rediså“¨å…µçš„&quot;CONFIG REWRITE&quot;å‘½ä»¤é‡å†™ã€‚ # å› ä¸ºRedisæ€»æ˜¯ä½¿ç”¨æœ€åè§£æçš„é…ç½®è¡Œæœ€ä¸ºé…ç½®æŒ‡ä»¤çš„å€¼, ä½ æœ€å¥½åœ¨è¿™ä¸ªæ–‡ä»¶çš„å¼€å¤´é…ç½®includesæ¥ # é¿å…å®ƒåœ¨è¿è¡Œæ—¶é‡å†™é…ç½®ã€‚ # å¦‚æœç›¸åä½ æƒ³ç”¨includesçš„é…ç½®è¦†ç›–åŸæ¥çš„é…ç½®ï¼Œä½ æœ€å¥½åœ¨è¯¥æ–‡ä»¶çš„æœ€åä½¿ç”¨include ## include /path/to/local.conf # include /path/to/other.conf ################################ GENERAL ç»¼åˆé…ç½® ##################################### # é»˜è®¤Rdisä¸ä¼šä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œã€‚å¦‚æœéœ€è¦çš„è¯é…ç½®æˆ&#x27;yes&#x27; # æ³¨æ„é…ç½®æˆå®ˆæŠ¤è¿›ç¨‹åRedisä¼šå°†è¿›ç¨‹å·å†™å…¥æ–‡ä»¶/var/run/redis.pid daemonize no # å½“ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œæ—¶ï¼Œé»˜è®¤Redisä¼šæŠŠè¿›ç¨‹IDå†™åˆ° /var/run/redis.pidã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œä¿®æ”¹è·¯ å¾„ã€‚pidfile /var/run/redis.pid # æ¥å—è¿æ¥çš„ç‰¹å®šç«¯å£ï¼Œé»˜è®¤æ˜¯6379 # å¦‚æœç«¯å£è®¾ç½®ä¸º0ï¼ŒRediså°±ä¸ä¼šç›‘å¬TCPå¥—æ¥å­—ã€‚ port 6379 # TCP listen() backlog. # serveråœ¨ä¸å®¢æˆ·ç«¯å»ºç«‹tcpè¿æ¥çš„è¿‡ç¨‹ä¸­ï¼ŒSYNé˜Ÿåˆ—çš„å¤§å° # åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ä½ éœ€è¦ä¸€ä¸ªé«˜backlogå€¼æ¥é¿å…æ…¢å®¢æˆ·ç«¯è¿æ¥é—®é¢˜ã€‚æ³¨æ„Linuxå†…æ ¸é»˜é»˜åœ°å°†è¿™ä¸ªå€¼å‡å° # åˆ°/proc/sys/net/core/somaxconnçš„å€¼ï¼Œæ‰€ä»¥éœ€è¦ç¡®è®¤å¢å¤§somaxconnå’Œtcp_max_syn_backlog # ä¸¤ä¸ªå€¼æ¥è¾¾åˆ°æƒ³è¦çš„æ•ˆæœã€‚tcp-backlog 511# é»˜è®¤Redisç›‘å¬æœåŠ¡å™¨ä¸Šæ‰€æœ‰å¯ç”¨ç½‘ç»œæ¥å£çš„è¿æ¥ã€‚å¯ä»¥ç”¨&quot;bind&quot;é…ç½®æŒ‡ä»¤è·Ÿä¸€ä¸ªæˆ–å¤šä¸ªipåœ°å€æ¥å®ç° # ç›‘å¬ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œæ¥å£ ## ç¤ºä¾‹: ## bind 192.168.1.100 10.0.0.1 # bind 127.0.0.1 # æŒ‡å®šç”¨æ¥ç›‘å¬Unixå¥—å¥—æ¥å­—çš„è·¯å¾„ã€‚æ²¡æœ‰é»˜è®¤å€¼ï¼Œ æ‰€ä»¥åœ¨æ²¡æœ‰æŒ‡å®šçš„æƒ…å†µä¸‹Redisä¸ä¼šç›‘å¬Unixå¥—æ¥ å­—## unixsocket /tmp/redis.sock # unixsocketperm 755 # ä¸€ä¸ªå®¢æˆ·ç«¯ç©ºé—²å¤šå°‘ç§’åå…³é—­è¿æ¥ã€‚(0ä»£è¡¨ç¦ç”¨ï¼Œæ°¸ä¸å…³é—­) timeout 0 # TCP keepalive. ## å¦‚æœéé›¶ï¼Œåˆ™è®¾ç½®SO_KEEPALIVEé€‰é¡¹æ¥å‘ç©ºé—²è¿æ¥çš„å®¢æˆ·ç«¯å‘é€ACKï¼Œç”±äºä»¥ä¸‹ä¸¤ä¸ªåŸå› è¿™æ˜¯å¾ˆæœ‰ç”¨ çš„ï¼š## 1ï¼‰èƒ½å¤Ÿæ£€æµ‹æ— å“åº”çš„å¯¹ç«¯ # 2ï¼‰è®©è¯¥è¿æ¥ä¸­é—´çš„ç½‘ç»œè®¾å¤‡çŸ¥é“è¿™ä¸ªè¿æ¥è¿˜å­˜æ´» ## åœ¨Linuxä¸Šï¼Œè¿™ä¸ªæŒ‡å®šçš„å€¼(å•ä½ï¼šç§’)å°±æ˜¯å‘é€ACKçš„æ—¶é—´é—´éš”ã€‚ # æ³¨æ„ï¼šè¦å…³é—­è¿™ä¸ªè¿æ¥éœ€è¦ä¸¤å€çš„è¿™ä¸ªæ—¶é—´å€¼ã€‚ # åœ¨å…¶ä»–å†…æ ¸ä¸Šè¿™ä¸ªæ—¶é—´é—´éš”ç”±å†…æ ¸é…ç½®å†³å®š ## è¿™ä¸ªé€‰é¡¹çš„ä¸€ä¸ªåˆç†å€¼æ˜¯60ç§’ tcp-keepalive 0 # æŒ‡å®šæœåŠ¡å™¨è°ƒè¯•ç­‰çº§ # å¯èƒ½å€¼ï¼š # debug ï¼ˆå¤§é‡ä¿¡æ¯ï¼Œå¯¹å¼€å‘/æµ‹è¯•æœ‰ç”¨ï¼‰ # verbose ï¼ˆå¾ˆå¤šç²¾ç®€çš„æœ‰ç”¨ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åƒdebugç­‰çº§é‚£ä¹ˆå¤šï¼‰ # notice ï¼ˆé€‚é‡çš„ä¿¡æ¯ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä½ ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦çš„ï¼‰ # warning ï¼ˆåªæœ‰å¾ˆé‡è¦/ä¸¥é‡çš„ä¿¡æ¯ä¼šè®°å½•ä¸‹æ¥ï¼‰ loglevel notice # æŒ‡æ˜æ—¥å¿—æ–‡ä»¶åã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨&quot;stdout&quot;æ¥å¼ºåˆ¶è®©RedisæŠŠæ—¥å¿—ä¿¡æ¯å†™åˆ°æ ‡å‡†è¾“å‡ºä¸Šã€‚ # æ³¨æ„:å¦‚æœRedisä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œï¼Œè€Œè®¾ç½®æ—¥å¿—æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡ºçš„è¯ï¼Œæ—¥å¿—ä¼šå‘é€åˆ°/dev/null logfile &quot;&quot; # è¦ä½¿ç”¨ç³»ç»Ÿæ—¥å¿—è®°å½•å™¨ï¼Œåªè¦è®¾ç½® &quot;syslog-enabled&quot; ä¸º &quot;yes&quot; å°±å¯ä»¥äº†ã€‚ # ç„¶åæ ¹æ®éœ€è¦è®¾ç½®å…¶ä»–ä¸€äº›syslogå‚æ•°å°±å¯ä»¥äº†ã€‚ # syslog-enabled no # æŒ‡æ˜syslogèº«ä»½ # syslog-ident redis # æŒ‡æ˜syslogçš„è®¾å¤‡ã€‚å¿…é¡»æ˜¯useræˆ–LOCAL0 ~ LOCAL7ä¹‹ä¸€ã€‚ # syslog-facility local0 # è®¾ç½®æ•°æ®åº“ä¸ªæ•°ã€‚é»˜è®¤æ•°æ®åº“æ˜¯ DB 0ï¼Œ# å¯ä»¥é€šè¿‡select &lt;dbid&gt; (0 &lt;= dbid &lt;= &#x27;databases&#x27; - 1 ï¼‰æ¥ä¸ºæ¯ä¸ªè¿æ¥ä½¿ç”¨ä¸åŒçš„æ•°æ® åº“ã€‚databases 16 ################################ SNAPSHOTTING å¿«ç…§ï¼ŒæŒä¹…åŒ–æ“ä½œé…ç½® ################################ ## æŠŠæ•°æ®åº“å­˜åˆ°ç£ç›˜ä¸Š: ## save &lt;seconds&gt; &lt;changes&gt; ## ä¼šåœ¨æŒ‡å®šç§’æ•°å’Œæ•°æ®å˜åŒ–æ¬¡æ•°ä¹‹åæŠŠæ•°æ®åº“å†™åˆ°ç£ç›˜ä¸Šã€‚ ## ä¸‹é¢çš„ä¾‹å­å°†ä¼šè¿›è¡ŒæŠŠæ•°æ®å†™å…¥ç£ç›˜çš„æ“ä½œ: # 900ç§’ï¼ˆ15åˆ†é’Ÿï¼‰ä¹‹åï¼Œä¸”è‡³å°‘1æ¬¡å˜æ›´ # 300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰ä¹‹åï¼Œä¸”è‡³å°‘10æ¬¡å˜æ›´ # 60ç§’ä¹‹åï¼Œä¸”è‡³å°‘10000æ¬¡å˜æ›´ ## æ³¨æ„ï¼šä½ è¦æƒ³ä¸å†™ç£ç›˜çš„è¯å°±æŠŠæ‰€æœ‰ &quot;save&quot; è®¾ç½®æ³¨é‡Šæ‰å°±è¡Œäº†ã€‚ ## é€šè¿‡æ·»åŠ ä¸€æ¡å¸¦ç©ºå­—ç¬¦ä¸²å‚æ•°çš„saveæŒ‡ä»¤ä¹Ÿèƒ½ç§»é™¤ä¹‹å‰æ‰€æœ‰é…ç½®çš„saveæŒ‡ä»¤ # åƒä¸‹é¢çš„ä¾‹å­ï¼š # save &quot;&quot; save 900 1 save 300 10 save 60 10000 # é»˜è®¤å¦‚æœå¼€å¯RDBå¿«ç…§(è‡³å°‘ä¸€æ¡saveæŒ‡ä»¤)å¹¶ä¸”æœ€æ–°çš„åå°ä¿å­˜å¤±è´¥ï¼ŒRediså°†ä¼šåœæ­¢æ¥å—å†™æ“ä½œ # è¿™å°†ä½¿ç”¨æˆ·çŸ¥é“æ•°æ®æ²¡æœ‰æ­£ç¡®çš„æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Œå¦åˆ™å¯èƒ½æ²¡äººæ³¨æ„åˆ°å¹¶ä¸”é€ æˆä¸€äº›ç¾éš¾ã€‚ ## å¦‚æœåå°ä¿å­˜è¿›ç¨‹èƒ½é‡æ–°å¼€å§‹å·¥ä½œï¼ŒRediså°†è‡ªåŠ¨å…è®¸å†™æ“ä½œ ## ç„¶è€Œå¦‚æœä½ å·²ç»éƒ¨ç½²äº†é€‚å½“çš„RedisæœåŠ¡å™¨å’ŒæŒä¹…åŒ–çš„ç›‘æ§ï¼Œä½ å¯èƒ½æƒ³å…³æ‰è¿™ä¸ªåŠŸèƒ½ä»¥ä¾¿äºå³ä½¿æ˜¯ # ç¡¬ç›˜ï¼Œæƒé™ç­‰å‡ºé—®é¢˜äº†Redisä¹Ÿèƒ½å¤Ÿåƒå¹³æ—¶ä¸€æ ·æ­£å¸¸å·¥ä½œï¼Œ stop-writes-on-bgsave-error yes # å½“å¯¼å‡ºåˆ° .rdb æ•°æ®åº“æ—¶æ˜¯å¦ç”¨LZFå‹ç¼©å­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ # é»˜è®¤è®¾ç½®ä¸º &quot;yes&quot;ï¼Œå› ä¸ºå‡ ä¹åœ¨ä»»ä½•æƒ…å†µä¸‹å®ƒéƒ½æ˜¯ä¸é”™çš„ã€‚ # å¦‚æœä½ æƒ³èŠ‚çœCPUçš„è¯ä½ å¯ä»¥æŠŠè¿™ä¸ªè®¾ç½®ä¸º &quot;no&quot;ï¼Œä½†æ˜¯å¦‚æœä½ æœ‰å¯å‹ç¼©çš„keyå’Œvalueçš„è¯ï¼Œ # é‚£æ•°æ®æ–‡ä»¶å°±ä¼šæ›´å¤§äº†ã€‚ rdbcompression yes # å› ä¸ºç‰ˆæœ¬5çš„RDBæœ‰ä¸€ä¸ªCRC64ç®—æ³•çš„æ ¡éªŒå’Œæ”¾åœ¨äº†æ–‡ä»¶çš„æœ€åã€‚è¿™å°†ä½¿æ–‡ä»¶æ ¼å¼æ›´åŠ å¯é ä½†åœ¨ # ç”Ÿäº§å’ŒåŠ è½½RDBæ–‡ä»¶æ—¶ï¼Œè¿™æœ‰ä¸€ä¸ªæ€§èƒ½æ¶ˆè€—(å¤§çº¦10%)ï¼Œæ‰€ä»¥ä½ å¯ä»¥å…³æ‰å®ƒæ¥è·å–æœ€å¥½çš„æ€§èƒ½ã€‚ ## ç”Ÿæˆçš„å…³é—­æ ¡éªŒçš„RDBæ–‡ä»¶æœ‰ä¸€ä¸ª0çš„æ ¡éªŒå’Œï¼Œå®ƒå°†å‘Šè¯‰åŠ è½½ä»£ç è·³è¿‡æ£€æŸ¥ rdbchecksum yes # æŒä¹…åŒ–æ•°æ®åº“çš„æ–‡ä»¶å dbfilename dump.rdb # å·¥ä½œç›®å½• ## æ•°æ®åº“ä¼šå†™åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œæ–‡ä»¶åå°±æ˜¯ä¸Šé¢çš„ &quot;dbfilename&quot; çš„å€¼ã€‚ ## ç´¯åŠ æ–‡ä»¶ä¹Ÿæ”¾è¿™é‡Œã€‚ ## æ³¨æ„ä½ è¿™é‡ŒæŒ‡å®šçš„å¿…é¡»æ˜¯ç›®å½•ï¼Œä¸æ˜¯æ–‡ä»¶åã€‚ dir ./ ################################# REPLICATION ä¸»ä»å¤åˆ¶çš„é…ç½® ################################# # ä¸»ä»åŒæ­¥ã€‚é€šè¿‡ slaveof æŒ‡ä»¤æ¥å®ç°Rediså®ä¾‹çš„å¤‡ä»½ã€‚ # æ³¨æ„ï¼Œè¿™é‡Œæ˜¯æœ¬åœ°ä»è¿œç«¯å¤åˆ¶æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°å¯ä»¥æœ‰ä¸åŒçš„æ•°æ®åº“æ–‡ä»¶ã€ç»‘å®šä¸åŒçš„IPã€ç›‘å¬ # ä¸åŒçš„ç«¯å£ã€‚ ## slaveof &lt;masterip&gt; &lt;masterport&gt; # å¦‚æœmasterè®¾ç½®äº†å¯†ç ä¿æŠ¤ï¼ˆé€šè¿‡ &quot;requirepass&quot; é€‰é¡¹æ¥é…ç½®ï¼‰ï¼Œé‚£ä¹ˆslaveåœ¨å¼€å§‹åŒæ­¥ä¹‹å‰å¿…é¡» # è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¦åˆ™å®ƒçš„åŒæ­¥è¯·æ±‚ä¼šè¢«æ‹’ç»ã€‚ ## masterauth &lt;master-password&gt; # å½“ä¸€ä¸ªslaveå¤±å»å’Œmasterçš„è¿æ¥ï¼Œæˆ–è€…åŒæ­¥æ­£åœ¨è¿›è¡Œä¸­ï¼Œslaveçš„è¡Œä¸ºæœ‰ä¸¤ç§å¯èƒ½ï¼š ## 1) å¦‚æœ slave-serve-stale-data è®¾ç½®ä¸º &quot;yes&quot; (é»˜è®¤å€¼)ï¼Œslaveä¼šç»§ç»­å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼Œ # å¯èƒ½æ˜¯æ­£å¸¸æ•°æ®ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿˜æ²¡è·å¾—å€¼çš„ç©ºæ•°æ®ã€‚ # 2) å¦‚æœ slave-serve-stale-data è®¾ç½®ä¸º &quot;no&quot;ï¼Œslaveä¼šå›å¤&quot;æ­£åœ¨ä»masteråŒæ­¥ # ï¼ˆSYNC with master in progressï¼‰&quot;æ¥å¤„ç†å„ç§è¯·æ±‚ï¼Œé™¤äº† INFO å’Œ SLAVEOF å‘½ä»¤ã€‚ #slave-serve-stale-data yes # ä½ å¯ä»¥é…ç½®salveå®ä¾‹æ˜¯å¦æ¥å—å†™æ“ä½œã€‚å¯å†™çš„slaveå®ä¾‹å¯èƒ½å¯¹å­˜å‚¨ä¸´æ—¶æ•°æ®æ¯”è¾ƒæœ‰ç”¨(å› ä¸ºå†™å…¥ salve # çš„æ•°æ®åœ¨åŒmasteråŒæ­¥ä¹‹åå°†å¾ˆå®¹è¢«åˆ é™¤)ï¼Œä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯ç”±äºé…ç½®é”™è¯¯åœ¨å†™å…¥æ—¶ä¹Ÿå¯èƒ½äº§ç”Ÿä¸€äº›é—® é¢˜ã€‚## ä»Redis2.6é»˜è®¤æ‰€æœ‰çš„slaveä¸ºåªè¯» ## æ³¨æ„:åªè¯»çš„slaveä¸æ˜¯ä¸ºäº†æš´éœ²ç»™äº’è”ç½‘ä¸Šä¸å¯ä¿¡çš„å®¢æˆ·ç«¯è€Œè®¾è®¡çš„ã€‚å®ƒåªæ˜¯ä¸€ä¸ªé˜²æ­¢å®ä¾‹è¯¯ç”¨çš„ä¿æŠ¤ å±‚ã€‚# ä¸€ä¸ªåªè¯»çš„slaveæ”¯æŒæ‰€æœ‰çš„ç®¡ç†å‘½ä»¤æ¯”å¦‚config,debugç­‰ã€‚ä¸ºäº†é™åˆ¶ä½ å¯ä»¥ç”¨&#x27;rename- command&#x27;æ¥ # éšè—æ‰€æœ‰çš„ç®¡ç†å’Œå±é™©å‘½ä»¤æ¥å¢å¼ºåªè¯»slaveçš„å®‰å…¨æ€§ slave-read-only yes # slaveæ ¹æ®æŒ‡å®šçš„æ—¶é—´é—´éš”å‘masterå‘é€pingè¯·æ±‚ã€‚ # æ—¶é—´é—´éš”å¯ä»¥é€šè¿‡ repl_ping_slave_period æ¥è®¾ç½®ã€‚ # é»˜è®¤10ç§’ã€‚ ## repl-ping-slave-period 10 # ä»¥ä¸‹é€‰é¡¹è®¾ç½®åŒæ­¥çš„è¶…æ—¶æ—¶é—´ ## 1ï¼‰slaveåœ¨ä¸master SYNCæœŸé—´æœ‰å¤§é‡æ•°æ®ä¼ è¾“ï¼Œé€ æˆè¶…æ—¶ # 2ï¼‰åœ¨slaveè§’åº¦ï¼Œmasterè¶…æ—¶ï¼ŒåŒ…æ‹¬æ•°æ®ã€pingç­‰ # 3ï¼‰åœ¨masterè§’åº¦ï¼Œslaveè¶…æ—¶ï¼Œå½“masterå‘é€REPLCONF ACK pings ## ç¡®ä¿è¿™ä¸ªå€¼å¤§äºæŒ‡å®šçš„repl-ping-slave-periodï¼Œå¦åˆ™åœ¨ä¸»ä»é—´æµé‡ä¸é«˜æ—¶æ¯æ¬¡éƒ½ä¼šæ£€æµ‹åˆ°è¶…æ—¶ ## repl-timeout 60 # æ˜¯å¦åœ¨slaveå¥—æ¥å­—å‘é€SYNCä¹‹åç¦ç”¨ TCP_NODELAY ï¼Ÿ ## å¦‚æœä½ é€‰æ‹©â€œyesâ€Rediså°†ä½¿ç”¨æ›´å°‘çš„TCPåŒ…å’Œå¸¦å®½æ¥å‘slaveså‘é€æ•°æ®ã€‚ä½†æ˜¯è¿™å°†ä½¿æ•°æ®ä¼ è¾“åˆ° slave # ä¸Šæœ‰å»¶è¿Ÿï¼ŒLinuxå†…æ ¸çš„é»˜è®¤é…ç½®ä¼šè¾¾åˆ°40æ¯«ç§’ ## å¦‚æœä½ é€‰æ‹©äº† &quot;no&quot; æ•°æ®ä¼ è¾“åˆ°salveçš„å»¶è¿Ÿå°†ä¼šå‡å°‘ä½†è¦ä½¿ç”¨æ›´å¤šçš„å¸¦å®½ ## é»˜è®¤æˆ‘ä»¬ä¼šä¸ºä½å»¶è¿Ÿåšä¼˜åŒ–ï¼Œä½†é«˜æµé‡æƒ…å†µæˆ–ä¸»ä»ä¹‹é—´çš„è·³æ•°è¿‡å¤šæ—¶ï¼ŒæŠŠè¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸ºâ€œyesâ€ # æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ repl-disable-tcp-nodelay no # è®¾ç½®æ•°æ®å¤‡ä»½çš„backlogå¤§å°ã€‚backlogæ˜¯ä¸€ä¸ªslaveåœ¨ä¸€æ®µæ—¶é—´å†…æ–­å¼€è¿æ¥æ—¶è®°å½•salveæ•°æ®çš„ç¼“ å†²ï¼Œ# æ‰€ä»¥ä¸€ä¸ªslaveåœ¨é‡æ–°è¿æ¥æ—¶ï¼Œä¸å¿…è¦å…¨é‡çš„åŒæ­¥ï¼Œè€Œæ˜¯ä¸€ä¸ªå¢é‡åŒæ­¥å°±è¶³å¤Ÿäº†ï¼Œå°†åœ¨æ–­å¼€è¿æ¥çš„è¿™æ®µ # æ—¶é—´å†…slaveä¸¢å¤±çš„éƒ¨åˆ†æ•°æ®ä¼ é€ç»™å®ƒã€‚ ## åŒæ­¥çš„backlogè¶Šå¤§ï¼Œslaveèƒ½å¤Ÿè¿›è¡Œå¢é‡åŒæ­¥å¹¶ä¸”å…è®¸æ–­å¼€è¿æ¥çš„æ—¶é—´å°±è¶Šé•¿ã€‚ ## backlogåªåˆ†é…ä¸€æ¬¡å¹¶ä¸”è‡³å°‘éœ€è¦ä¸€ä¸ªslaveè¿æ¥ ## repl-backlog-size 1mb # å½“masteråœ¨ä¸€æ®µæ—¶é—´å†…ä¸å†ä¸ä»»ä½•slaveè¿æ¥ï¼Œbacklogå°†ä¼šé‡Šæ”¾ã€‚ä»¥ä¸‹é€‰é¡¹é…ç½®äº†ä»æœ€åä¸€ä¸ª # slaveæ–­å¼€å¼€å§‹è®¡æ—¶å¤šå°‘ç§’åï¼Œbacklogç¼“å†²å°†ä¼šé‡Šæ”¾ã€‚ ## 0è¡¨ç¤ºæ°¸ä¸é‡Šæ”¾backlog ## repl-backlog-ttl 3600 # slaveçš„ä¼˜å…ˆçº§æ˜¯ä¸€ä¸ªæ•´æ•°å±•ç¤ºåœ¨Redisçš„Infoè¾“å‡ºä¸­ã€‚å¦‚æœmasterä¸å†æ­£å¸¸å·¥ä½œäº†ï¼Œå“¨å…µå°†ç”¨å®ƒæ¥ # é€‰æ‹©ä¸€ä¸ªslaveæå‡=å‡ä¸ºmasterã€‚ ## ä¼˜å…ˆçº§æ•°å­—å°çš„salveä¼šä¼˜å…ˆè€ƒè™‘æå‡ä¸ºmasterï¼Œæ‰€ä»¥ä¾‹å¦‚æœ‰ä¸‰ä¸ªslaveä¼˜å…ˆçº§åˆ†åˆ«ä¸º10ï¼Œ100ï¼Œ25ï¼Œ # å“¨å…µå°†æŒ‘é€‰ä¼˜å…ˆçº§æœ€å°æ•°å­—ä¸º10çš„slaveã€‚ ## 0ä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„ä¼˜å…ˆçº§ï¼Œæ ‡è¯†è¿™ä¸ªslaveä¸èƒ½ä½œä¸ºmasterï¼Œæ‰€ä»¥ä¸€ä¸ªä¼˜å…ˆçº§ä¸º0çš„slaveæ°¸è¿œä¸ä¼šè¢« # å“¨å…µæŒ‘é€‰æå‡ä¸ºmaster ## é»˜è®¤ä¼˜å…ˆçº§ä¸º100 slave-priority 100 # å¦‚æœmasterå°‘äºNä¸ªå»¶æ—¶å°äºç­‰äºMç§’çš„å·²è¿æ¥slaveï¼Œå°±å¯ä»¥åœæ­¢æ¥æ”¶å†™æ“ä½œã€‚ ## Nä¸ªslaveéœ€è¦æ˜¯â€œonelineâ€çŠ¶æ€ ## å»¶æ—¶æ˜¯ä»¥ç§’ä¸ºå•ä½ï¼Œå¹¶ä¸”å¿…é¡»å°äºç­‰äºæŒ‡å®šå€¼ï¼Œæ˜¯ä»æœ€åä¸€ä¸ªä»slaveæ¥æ”¶åˆ°çš„pingï¼ˆé€šå¸¸æ¯ç§’å‘é€ï¼‰ # å¼€å§‹è®¡æ•°ã€‚ ## This option does not GUARANTEES that N replicas will accept the write, but # will limit the window of exposure for lost writes in case not enough slaves # are available, to the specified number of seconds. ## ä¾‹å¦‚è‡³å°‘éœ€è¦3ä¸ªå»¶æ—¶å°äºç­‰äº10ç§’çš„slaveç”¨ä¸‹é¢çš„æŒ‡ä»¤ï¼š ## min-slaves-to-write 3 # min-slaves-max-lag 10 ## ä¸¤è€…ä¹‹ä¸€è®¾ç½®ä¸º0å°†ç¦ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚ ## é»˜è®¤ min-slaves-to-write å€¼æ˜¯0ï¼ˆè¯¥åŠŸèƒ½ç¦ç”¨ï¼‰å¹¶ä¸” min-slaves-max-lag å€¼æ˜¯10ã€‚ ################################## SECURITY å®‰å…¨ç›¸å…³é…ç½® ################################### # è¦æ±‚å®¢æˆ·ç«¯åœ¨å¤„ç†ä»»ä½•å‘½ä»¤æ—¶éƒ½è¦éªŒè¯èº«ä»½å’Œå¯†ç ã€‚ # è¿™ä¸ªåŠŸèƒ½åœ¨æœ‰ä½ ä¸ä¿¡ä»»çš„å…¶å®ƒå®¢æˆ·ç«¯èƒ½å¤Ÿè®¿é—®redisæœåŠ¡å™¨çš„ç¯å¢ƒé‡Œéå¸¸æœ‰ç”¨ã€‚ ## ä¸ºäº†å‘åå…¼å®¹çš„è¯è¿™æ®µåº”è¯¥æ³¨é‡Šæ‰ã€‚è€Œä¸”å¤§å¤šæ•°äººä¸éœ€è¦èº«ä»½éªŒè¯(ä¾‹å¦‚:å®ƒä»¬è¿è¡Œåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Š) \\## è­¦å‘Šï¼šå› ä¸ºRediså¤ªå¿«äº†ï¼Œæ‰€ä»¥å¤–é¢çš„äººå¯ä»¥å°è¯•æ¯ç§’150kçš„å¯†ç æ¥è¯•å›¾ç ´è§£å¯†ç ã€‚è¿™æ„å‘³ç€ä½ éœ€è¦ # ä¸€ä¸ªé«˜å¼ºåº¦çš„å¯†ç ï¼Œå¦åˆ™ç ´è§£å¤ªå®¹æ˜“äº†ã€‚ ## requirepass foobared # å‘½ä»¤é‡å‘½å ## åœ¨å…±äº«ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä¸ºå±é™©å‘½ä»¤æ”¹å˜åå­—ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ä¸º CONFIG æ”¹ä¸ªå…¶ä»–ä¸å¤ªå®¹æ˜“çŒœåˆ°çš„åå­—ï¼Œ # è¿™æ ·å†…éƒ¨çš„å·¥å…·ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œè€Œæ™®é€šçš„å®¢æˆ·ç«¯å°†ä¸è¡Œã€‚ ## ä¾‹å¦‚ï¼š ## rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52 ## ä¹Ÿå¯ä»¥é€šè¿‡æ”¹åä¸ºç©ºå­—ç¬¦ä¸²æ¥å®Œå…¨ç¦ç”¨ä¸€ä¸ªå‘½ä»¤ ## rename-command CONFIG &quot;&quot; ## è¯·æ³¨æ„ï¼šæ”¹å˜å‘½ä»¤åå­—è¢«è®°å½•åˆ°AOFæ–‡ä»¶æˆ–è¢«ä¼ é€åˆ°ä»æœåŠ¡å™¨å¯èƒ½äº§ç”Ÿé—®é¢˜ã€‚ ################################### LIMITS èŒƒå›´é…ç½® #################################### # è®¾ç½®æœ€å¤šåŒæ—¶è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ã€‚é»˜è®¤è¿™ä¸ªé™åˆ¶æ˜¯10000ä¸ªå®¢æˆ·ç«¯ï¼Œç„¶è€Œå¦‚æœRedisæœåŠ¡å™¨ä¸èƒ½é…ç½® # å¤„ç†æ–‡ä»¶çš„é™åˆ¶æ•°æ¥æ»¡è¶³æŒ‡å®šçš„å€¼ï¼Œé‚£ä¹ˆæœ€å¤§çš„å®¢æˆ·ç«¯è¿æ¥æ•°å°±è¢«è®¾ç½®æˆå½“å‰æ–‡ä»¶é™åˆ¶æ•°å‡32ï¼ˆå›  # ä¸ºRedisæœåŠ¡å™¨ä¿ç•™äº†ä¸€äº›æ–‡ä»¶æè¿°ç¬¦ä½œä¸ºå†…éƒ¨ä½¿ç”¨ï¼‰ ## ä¸€æ—¦è¾¾åˆ°è¿™ä¸ªé™åˆ¶ï¼ŒRedisä¼šå…³é—­æ‰€æœ‰æ–°è¿æ¥å¹¶å‘é€é”™è¯¯&#x27;max number of clients reached&#x27; ## maxclients 10000 # ä¸è¦ç”¨æ¯”è®¾ç½®çš„ä¸Šé™æ›´å¤šçš„å†…å­˜ã€‚ä¸€æ—¦å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸Šé™ï¼ŒRedisä¼šæ ¹æ®é€‰å®šçš„å›æ”¶ç­–ç•¥ï¼ˆå‚è§ï¼š # maxmemmory-policyï¼‰åˆ é™¤key ## å¦‚æœå› ä¸ºåˆ é™¤ç­–ç•¥Redisæ— æ³•åˆ é™¤keyï¼Œæˆ–è€…ç­–ç•¥è®¾ç½®ä¸º &quot;noeviction&quot;ï¼ŒRedisä¼šå›å¤éœ€è¦æ›´ # å¤šå†…å­˜çš„é”™è¯¯ä¿¡æ¯ç»™å‘½ä»¤ã€‚ä¾‹å¦‚ï¼ŒSET,LPUSHç­‰ç­‰ï¼Œä½†æ˜¯ä¼šç»§ç»­å“åº”åƒGetè¿™æ ·çš„åªè¯»å‘½ä»¤ã€‚ ## åœ¨ä½¿ç”¨Redisä½œä¸ºLRUç¼“å­˜ï¼Œæˆ–è€…ä¸ºå®ä¾‹è®¾ç½®äº†ç¡¬æ€§å†…å­˜é™åˆ¶çš„æ—¶å€™ï¼ˆä½¿ç”¨ &quot;noeviction&quot; ç­–ç•¥ï¼‰ # çš„æ—¶å€™ï¼Œè¿™ä¸ªé€‰é¡¹é€šå¸¸äº‹å¾ˆæœ‰ç”¨çš„ã€‚ ## è­¦å‘Šï¼šå½“æœ‰å¤šä¸ªslaveè¿ä¸Šè¾¾åˆ°å†…å­˜ä¸Šé™çš„å®ä¾‹æ—¶ï¼Œmasterä¸ºåŒæ­¥slaveçš„è¾“å‡ºç¼“å†²åŒºæ‰€éœ€ # å†…å­˜ä¸è®¡ç®—åœ¨ä½¿ç”¨å†…å­˜ä¸­ã€‚è¿™æ ·å½“é©±é€keyæ—¶ï¼Œå°±ä¸ä¼šå› ç½‘ç»œé—®é¢˜ / é‡æ–°åŒæ­¥äº‹ä»¶è§¦å‘é©±é€key # çš„å¾ªç¯ï¼Œåè¿‡æ¥slavesçš„è¾“å‡ºç¼“å†²åŒºå……æ»¡äº†keyè¢«é©±é€çš„DELå‘½ä»¤ï¼Œè¿™å°†è§¦å‘åˆ é™¤æ›´å¤šçš„keyï¼Œ # ç›´åˆ°è¿™ä¸ªæ•°æ®åº“å®Œå…¨è¢«æ¸…ç©ºä¸ºæ­¢ ## æ€»ä¹‹...å¦‚æœä½ éœ€è¦é™„åŠ å¤šä¸ªslaveï¼Œå»ºè®®ä½ è®¾ç½®ä¸€ä¸ªç¨å°maxmemoryé™åˆ¶ï¼Œè¿™æ ·ç³»ç»Ÿå°±ä¼šæœ‰ç©ºé—² # çš„å†…å­˜ä½œä¸ºslaveçš„è¾“å‡ºç¼“å­˜åŒº(ä½†æ˜¯å¦‚æœæœ€å¤§å†…å­˜ç­–ç•¥è®¾ç½®ä¸º&quot;noeviction&quot;çš„è¯å°±æ²¡å¿…è¦äº†)## maxmemory &lt;bytes&gt; # æœ€å¤§å†…å­˜ç­–ç•¥ï¼šå¦‚æœè¾¾åˆ°å†…å­˜é™åˆ¶äº†ï¼ŒRediså¦‚ä½•é€‰æ‹©åˆ é™¤keyã€‚ä½ å¯ä»¥åœ¨ä¸‹é¢äº”ä¸ªè¡Œä¸ºé‡Œé€‰ï¼š ## volatile-lru -&gt; æ ¹æ®LRUç®—æ³•ç”Ÿæˆçš„è¿‡æœŸæ—¶é—´æ¥åˆ é™¤ã€‚ # allkeys-lru -&gt; æ ¹æ®LRUç®—æ³•åˆ é™¤ä»»ä½•keyã€‚ # volatile-random -&gt; æ ¹æ®è¿‡æœŸè®¾ç½®æ¥éšæœºåˆ é™¤keyã€‚ # allkeys-&gt;random -&gt; æ— å·®åˆ«éšæœºåˆ ã€‚ # volatile-ttl -&gt; æ ¹æ®æœ€è¿‘è¿‡æœŸæ—¶é—´æ¥åˆ é™¤ï¼ˆè¾…ä»¥TTLï¼‰ # noeviction -&gt; è°ä¹Ÿä¸åˆ ï¼Œç›´æ¥åœ¨å†™æ“ä½œæ—¶è¿”å›é”™è¯¯ã€‚ ## æ³¨æ„ï¼šå¯¹æ‰€æœ‰ç­–ç•¥æ¥è¯´ï¼Œå¦‚æœRedisæ‰¾ä¸åˆ°åˆé€‚çš„å¯ä»¥åˆ é™¤çš„keyéƒ½ä¼šåœ¨å†™æ“ä½œæ—¶è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ ## ç›®å‰ä¸ºæ­¢æ¶‰åŠçš„å‘½ä»¤ï¼šset setnx setex append # incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd# sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby # zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby # getset mset msetnx exec sort ## é»˜è®¤å€¼å¦‚ä¸‹ï¼š ## maxmemory-policy volatile-lru # LRUå’Œæœ€å°TTLç®—æ³•çš„å®ç°éƒ½ä¸æ˜¯å¾ˆç²¾ç¡®ï¼Œä½†æ˜¯å¾ˆæ¥è¿‘ï¼ˆä¸ºäº†çœå†…å­˜ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨æ ·æœ¬é‡åšæ£€æµ‹ã€‚ # ä¾‹å¦‚ï¼šé»˜è®¤Redisä¼šæ£€æŸ¥3ä¸ªkeyç„¶åå–æœ€æ—§çš„é‚£ä¸ªï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„é…ç½®æŒ‡ä»¤æ¥è®¾ç½®æ ·æœ¬çš„ä¸ªæ•°ã€‚ ## maxmemory-samples 3 ############################## APPEND ONLY MODE AOFæ¨¡å¼é…ç½® ############################### # é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedisæ˜¯å¼‚æ­¥çš„æŠŠæ•°æ®å¯¼å‡ºåˆ°ç£ç›˜ä¸Šã€‚è¿™ç§æ¨¡å¼åœ¨å¾ˆå¤šåº”ç”¨é‡Œå·²ç»è¶³å¤Ÿå¥½ï¼Œä½†Redisè¿›ç¨‹ # å‡ºé—®é¢˜æˆ–æ–­ç”µæ—¶å¯èƒ½é€ æˆä¸€æ®µæ—¶é—´çš„å†™æ“ä½œä¸¢å¤±(è¿™å–å†³äºé…ç½®çš„saveæŒ‡ä»¤)ã€‚ ## AOFæ˜¯ä¸€ç§æä¾›äº†æ›´å¯é çš„æ›¿ä»£æŒä¹…åŒ–æ¨¡å¼ï¼Œä¾‹å¦‚ä½¿ç”¨é»˜è®¤çš„æ•°æ®å†™å…¥æ–‡ä»¶ç­–ç•¥ï¼ˆå‚è§åé¢çš„é…ç½®ï¼‰ # åœ¨é‡åˆ°åƒæœåŠ¡å™¨æ–­ç”µæˆ–å•å†™æƒ…å†µä¸‹Redisè‡ªèº«è¿›ç¨‹å‡ºé—®é¢˜ä½†æ“ä½œç³»ç»Ÿä»æ­£å¸¸è¿è¡Œç­‰çªå‘äº‹ä»¶æ—¶ï¼ŒRedis # èƒ½åªä¸¢å¤±1ç§’çš„å†™æ“ä½œã€‚ ## AOFå’ŒRDBæŒä¹…åŒ–èƒ½åŒæ—¶å¯åŠ¨å¹¶ä¸”ä¸ä¼šæœ‰é—®é¢˜ã€‚ # å¦‚æœAOFå¼€å¯ï¼Œé‚£ä¹ˆåœ¨å¯åŠ¨æ—¶Rediså°†åŠ è½½AOFæ–‡ä»¶ï¼Œå®ƒæ›´èƒ½ä¿è¯æ•°æ®çš„å¯é æ€§ã€‚ ## è¯·æŸ¥çœ‹ http://redis.io/topics/persistence æ¥è·å–æ›´å¤šä¿¡æ¯. appendonly no # çº¯ç´¯åŠ æ–‡ä»¶åå­—ï¼ˆé»˜è®¤ï¼š&quot;appendonly.aof&quot;ï¼‰ appendfilename &quot;appendonly.aof&quot; # fsync() ç³»ç»Ÿè°ƒç”¨å‘Šè¯‰æ“ä½œç³»ç»ŸæŠŠæ•°æ®å†™åˆ°ç£ç›˜ä¸Šï¼Œè€Œä¸æ˜¯ç­‰æ›´å¤šçš„æ•°æ®è¿›å…¥è¾“å‡ºç¼“å†²åŒºã€‚ # æœ‰äº›æ“ä½œç³»ç»Ÿä¼šçœŸçš„æŠŠæ•°æ®é©¬ä¸Šåˆ·åˆ°ç£ç›˜ä¸Šï¼›æœ‰äº›åˆ™ä¼šå°½å¿«å»å°è¯•è¿™ä¹ˆåšã€‚ ## Redisæ”¯æŒä¸‰ç§ä¸åŒçš„æ¨¡å¼ï¼š ## noï¼šä¸è¦ç«‹åˆ»åˆ·ï¼Œåªæœ‰åœ¨æ“ä½œç³»ç»Ÿéœ€è¦åˆ·çš„æ—¶å€™å†åˆ·ã€‚æ¯”è¾ƒå¿«ã€‚# alwaysï¼šæ¯æ¬¡å†™æ“ä½œéƒ½ç«‹åˆ»å†™å…¥åˆ°aofæ–‡ä»¶ã€‚æ…¢ï¼Œä½†æ˜¯æœ€å®‰å…¨ã€‚ # everysecï¼šæ¯ç§’å†™ä¸€æ¬¡ã€‚æŠ˜ä¸­æ–¹æ¡ˆã€‚ ## é»˜è®¤çš„ &quot;everysec&quot; é€šå¸¸æ¥è¯´èƒ½åœ¨é€Ÿåº¦å’Œæ•°æ®å®‰å…¨æ€§ä¹‹é—´å–å¾—æ¯”è¾ƒå¥½çš„å¹³è¡¡ã€‚æ ¹æ®ä½ çš„ç†è§£æ¥ # å†³å®šï¼Œå¦‚æœä½ èƒ½æ”¾å®½è¯¥é…ç½®ä¸º&quot;no&quot; æ¥è·å–æ›´å¥½çš„æ€§èƒ½(ä½†å¦‚æœä½ èƒ½å¿å—ä¸€äº›æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ # é»˜è®¤çš„å¿«ç…§æŒä¹…åŒ–æ¨¡å¼)ï¼Œæˆ–è€…ç›¸åï¼Œç”¨â€œalwaysâ€ä¼šæ¯”è¾ƒæ…¢ä½†æ¯”everysecè¦æ›´å®‰å…¨ã€‚ ## è¯·æŸ¥çœ‹ä¸‹é¢çš„æ–‡ç« æ¥è·å–æ›´å¤šçš„ç»†èŠ‚ # http://antirez.com/post/redis-persistence-demystified.html ## å¦‚æœä¸èƒ½ç¡®å®šï¼Œå°±ç”¨ &quot;everysec&quot; # appendfsync always appendfsync everysec # appendfsync no # å¦‚æœAOFçš„åŒæ­¥ç­–ç•¥è®¾ç½®æˆ &quot;always&quot; æˆ–è€… &quot;everysec&quot;ï¼Œå¹¶ä¸”åå°çš„å­˜å‚¨è¿›ç¨‹ï¼ˆåå°å­˜å‚¨æˆ–å†™å…¥AOF # æ—¥å¿—ï¼‰ä¼šäº§ç”Ÿå¾ˆå¤šç£ç›˜I/Oå¼€é”€ã€‚æŸäº›Linuxçš„é…ç½®ä¸‹ä¼šä½¿Rediså› ä¸º fsync()ç³»ç»Ÿè°ƒç”¨è€Œé˜»å¡å¾ˆä¹…ã€‚ # æ³¨æ„ï¼Œç›®å‰å¯¹è¿™ä¸ªæƒ…å†µè¿˜æ²¡æœ‰å®Œç¾ä¿®æ­£ï¼Œç”šè‡³ä¸åŒçº¿ç¨‹çš„ fsync() ä¼šé˜»å¡æˆ‘ä»¬åŒæ­¥çš„write(2)è°ƒç”¨ã€‚ ## ä¸ºäº†ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªé€‰é¡¹ã€‚å®ƒå¯ä»¥åœ¨ BGSAVE æˆ– BGREWRITEAOF å¤„ç†æ—¶é˜»æ­¢ fsync()ã€‚ ## è¿™å°±æ„å‘³ç€å¦‚æœæœ‰å­è¿›ç¨‹åœ¨è¿›è¡Œä¿å­˜æ“ä½œï¼Œé‚£ä¹ˆRediså°±å¤„äº&quot;ä¸å¯åŒæ­¥&quot;çš„çŠ¶æ€ã€‚ # è¿™å®é™…ä¸Šæ˜¯è¯´ï¼Œåœ¨æœ€å·®çš„æƒ…å†µä¸‹å¯èƒ½ä¼šä¸¢æ‰30ç§’é’Ÿçš„æ—¥å¿—æ•°æ®ã€‚ï¼ˆé»˜è®¤Linuxè®¾å®šï¼‰ ## å¦‚æœæŠŠè¿™ä¸ªè®¾ç½®æˆ&quot;yes&quot;å¸¦æ¥äº†å»¶è¿Ÿé—®é¢˜ï¼Œå°±ä¿æŒ&quot;no&quot;ï¼Œè¿™æ˜¯ä¿å­˜æŒä¹…æ•°æ®çš„æœ€å®‰å…¨çš„æ–¹å¼ã€‚ no-appendfsync-on-rewrite no # è‡ªåŠ¨é‡å†™AOFæ–‡ä»¶ # å¦‚æœAOFæ—¥å¿—æ–‡ä»¶å¢å¤§åˆ°æŒ‡å®šç™¾åˆ†æ¯”ï¼ŒRedisèƒ½å¤Ÿé€šè¿‡ BGREWRITEAOF è‡ªåŠ¨é‡å†™AOFæ—¥å¿—æ–‡ä»¶ã€‚ ## å·¥ä½œåŸç†ï¼šRedisè®°ä½ä¸Šæ¬¡é‡å†™æ—¶AOFæ–‡ä»¶çš„å¤§å°ï¼ˆå¦‚æœé‡å¯åè¿˜æ²¡æœ‰å†™æ“ä½œï¼Œå°±ç›´æ¥ç”¨å¯åŠ¨æ—¶çš„AOFå¤§ å°ï¼‰## è¿™ä¸ªåŸºå‡†å¤§å°å’Œå½“å‰å¤§å°åšæ¯”è¾ƒã€‚å¦‚æœå½“å‰å¤§å°è¶…è¿‡æŒ‡å®šæ¯”ä¾‹ï¼Œå°±ä¼šè§¦å‘é‡å†™æ“ä½œã€‚ä½ è¿˜éœ€è¦æŒ‡å®šè¢«é‡å†™ # æ—¥å¿—çš„æœ€å°å°ºå¯¸ï¼Œè¿™æ ·é¿å…äº†è¾¾åˆ°æŒ‡å®šç™¾åˆ†æ¯”ä½†å°ºå¯¸ä»ç„¶å¾ˆå°çš„æƒ…å†µè¿˜è¦é‡å†™ã€‚ ## æŒ‡å®šç™¾åˆ†æ¯”ä¸º0ä¼šç¦ç”¨AOFè‡ªåŠ¨é‡å†™ç‰¹æ€§ã€‚ auto-aof-rewrite-percentage 100 auto-aof-rewrite-min-size 64mb ################################ LUA SCRIPTING ############################### # è®¾ç½®luaè„šæœ¬çš„æœ€å¤§è¿è¡Œæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œredisä¼šè®°ä¸ªlogï¼Œç„¶åè¿”å›errorã€‚å½“ä¸€ä¸ªè„šæœ¬è¶…è¿‡äº†æœ€ å¤§æ—¶é™ã€‚åªæœ‰SCRIPT KILLå’ŒSHUTDOWN NOSAVEå¯ä»¥ç”¨ã€‚ç¬¬ä¸€ä¸ªå¯ä»¥æ€æ²¡æœ‰è°ƒwriteå‘½ä»¤çš„ä¸œè¥¿ã€‚è¦æ˜¯å·² ç»è°ƒç”¨äº†writeï¼Œåªèƒ½ç”¨ç¬¬äºŒä¸ªå‘½ä»¤æ€ã€‚ lua-time-limit 5000 ################################## SLOW LOG ################################### # æ˜¯redisç”¨äºè®°å½•æ…¢æŸ¥è¯¢æ‰§è¡Œæ—¶é—´çš„æ—¥å¿—ç³»ç»Ÿã€‚ç”±äºslowlogåªä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤slowlogçš„æ•ˆç‡å¾ˆ é«˜ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒä¼šå½±å“åˆ°redisçš„æ€§èƒ½ã€‚ # åªæœ‰queryæ‰§è¡Œæ—¶é—´å¤§äºslowlog-log-slower-thançš„æ‰ä¼šå®šä¹‰æˆæ…¢æŸ¥è¯¢ï¼Œæ‰ä¼šè¢«slowlogè¿›è¡Œè®° å½•ã€‚# å•ä½æ˜¯å¾®å¦™ slowlog-log-slower-than 10000# slowlog-max-lenè¡¨ç¤ºæ…¢æŸ¥è¯¢æœ€å¤§çš„æ¡æ•° slowlog-max-len 128 ############################ EVENT NOTIFICATION ############################## # è¿™ä¸ªåŠŸèƒ½å¯ä»¥è®©å®¢æˆ·ç«¯é€šè¿‡è®¢é˜…ç»™å®šçš„é¢‘é“æˆ–è€…æ¨¡å¼ï¼Œæ¥è·çŸ¥æ•°æ®åº“ä¸­é”®çš„å˜åŒ–ï¼Œä»¥åŠæ•°æ®åº“ä¸­å‘½ä»¤çš„æ‰§ è¡Œæƒ…å†µï¼Œæ‰€ä»¥åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œè¯¥åŠŸèƒ½å¤„äºå…³é—­çŠ¶æ€ã€‚ # notify-keyspace-events çš„å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹å­—ç¬¦çš„ä»»æ„ç»„åˆï¼Œå®ƒæŒ‡å®šäº†æœåŠ¡å™¨è¯¥å‘é€å“ªäº›ç±»å‹çš„é€š çŸ¥ï¼š# K é”®ç©ºé—´é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ __keyspace@__ ä¸ºå‰ç¼€ # E é”®äº‹ä»¶é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ __keyevent@__ ä¸ºå‰ç¼€ # g DEL ã€ EXPIRE ã€ RENAME ç­‰ç±»å‹æ— å…³çš„é€šç”¨å‘½ä»¤çš„é€šçŸ¥ # $ å­—ç¬¦ä¸²å‘½ä»¤çš„é€šçŸ¥ # l åˆ—è¡¨å‘½ä»¤çš„é€šçŸ¥ # s é›†åˆå‘½ä»¤çš„é€šçŸ¥ # h å“ˆå¸Œå‘½ä»¤çš„é€šçŸ¥ # z æœ‰åºé›†åˆå‘½ä»¤çš„é€šçŸ¥ # x è¿‡æœŸäº‹ä»¶ï¼šæ¯å½“æœ‰è¿‡æœŸé”®è¢«åˆ é™¤æ—¶å‘é€ # e é©±é€(evict)äº‹ä»¶ï¼šæ¯å½“æœ‰é”®å› ä¸º maxmemory æ”¿ç­–è€Œè¢«åˆ é™¤æ—¶å‘é€ # A å‚æ•° g$lshzxe çš„åˆ«å # è¾“å…¥çš„å‚æ•°ä¸­è‡³å°‘è¦æœ‰ä¸€ä¸ª K æˆ–è€… Eï¼Œå¦åˆ™çš„è¯ï¼Œä¸ç®¡å…¶ä½™çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½• é€šçŸ¥è¢«åˆ† å‘ã€‚è¯¦ç»†ä½¿ç”¨å¯ä»¥å‚è€ƒhttp://redis.io/topics/notifications notify-keyspace-events &quot;&quot; ############################### ADVANCED CONFIG ############################### # å•ä½å­—èŠ‚:æ•°æ®é‡å°äºç­‰äºhash-max-ziplist-entriesçš„ç”¨ziplistï¼Œå¤§äºhash-max-ziplist- entriesç”¨hash hash-max-ziplist-entries 512 # valueå¤§å°å°äºç­‰äºhash-max-ziplist-valueçš„ç”¨ziplistï¼Œå¤§äºhash-max-ziplist-valueç”¨ hashã€‚ hash-max-ziplist-value 64 # æ•°æ®é‡å°äºç­‰äºlist-max-ziplist-entriesç”¨ziplist(å‹ç¼©åˆ—è¡¨)ï¼Œå¤§äºlist-max-ziplist- entriesç”¨listã€‚ list-max-ziplist-entries 512 # valueå¤§å°å°äºç­‰äºlist-max-ziplist-valueçš„ç”¨ziplistï¼Œå¤§äºlist-max-ziplist-valueç”¨ listã€‚ list-max-ziplist-value 64 # æ•°æ®é‡å°äºç­‰äºset-max-intset-entriesç”¨inisetï¼Œå¤§äºset-max-intset-entriesç”¨setã€‚ set-max-intset-entries 512 # æ•°æ®é‡å°äºç­‰äºzset-max-ziplist-entriesç”¨ziplistï¼Œå¤§äºzset-max-ziplist-entriesç”¨ zsetã€‚ zset-max-ziplist-entries 128 # valueå¤§å°å°äºç­‰äºzset-max-ziplist-valueç”¨ziplistï¼Œå¤§äºzset-max-ziplist-valueç”¨ zsetã€‚ zset-max-ziplist-value 64 # åŸºæ•°ç»Ÿè®¡çš„ç®—æ³• HyperLogLog é”®åªéœ€è¦èŠ±è´¹ 12 KB å†…å­˜ï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘ 2^64 ä¸ªä¸åŒå…ƒç´ çš„åŸº æ•°# è®¾ç½®HyeperLogLogçš„å­—èŠ‚æ•°é™åˆ¶ï¼Œè¿™ä¸ªå€¼é€šå¸¸åœ¨0~15000ä¹‹é—´ï¼Œé»˜è®¤ä¸º3000ï¼ŒåŸºæœ¬ä¸è¶…è¿‡16000ã€‚ valueå¤§å°å°äºç­‰äºhll-sparse-max-bytesä½¿ç”¨ç¨€ç–æ•°æ®ç»“æ„ï¼ˆsparseï¼‰ï¼Œå¤§äºhll-sparse-max- bytesä½¿ç”¨ç¨ å¯†çš„æ•°æ®ç»“æ„ï¼ˆdenseï¼‰ã€‚ä¸€ä¸ªæ¯”16000å¤§çš„valueæ˜¯å‡ ä¹æ²¡ç”¨çš„ï¼Œå»ºè®®çš„valueå¤§æ¦‚ä¸º 3000ã€‚å¦‚æœå¯¹CPUè¦æ±‚ä¸é«˜ï¼Œå¯¹ç©ºé—´è¦æ±‚è¾ƒé«˜çš„ï¼Œå»ºè®®è®¾ç½®åˆ°10000å·¦å³ã€‚ hll-sparse-max-bytes 3000# é‡ç½®hashã€‚ Rediså°†åœ¨æ¯100æ¯«ç§’æ—¶ä½¿ç”¨1æ¯«ç§’çš„CPUæ—¶é—´æ¥å¯¹redisçš„hashè¡¨è¿›è¡Œé‡æ–°hashï¼Œå¯ä»¥é™ ä½å†…å­˜çš„ä½¿ç”¨ã€‚å½“ä½ çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œæœ‰éå¸¸ä¸¥æ ¼çš„å®æ—¶æ€§éœ€è¦ï¼Œä¸èƒ½å¤Ÿæ¥å—Redisæ—¶ä¸æ—¶çš„å¯¹è¯·æ±‚æœ‰2æ¯«ç§’ çš„å»¶è¿Ÿçš„è¯ï¼ŒæŠŠè¿™é¡¹é…ç½®ä¸ºnoã€‚å¦‚æœæ²¡æœ‰è¿™ä¹ˆä¸¥æ ¼çš„å®æ—¶æ€§è¦æ±‚ï¼Œå¯ä»¥è®¾ç½®ä¸ºyesï¼Œä»¥ä¾¿èƒ½å¤Ÿå°½å¯èƒ½å¿«çš„é‡Š æ”¾å†…å­˜ã€‚ activerehashing yes # å¯¹äºRedisæœåŠ¡å™¨çš„è¾“å‡ºï¼ˆä¹Ÿå°±æ˜¯å‘½ä»¤çš„è¿”å›å€¼ï¼‰æ¥è¯´ï¼Œå…¶å¤§å°é€šå¸¸æ˜¯ä¸å¯æ§åˆ¶çš„ã€‚æœ‰å¯èƒ½ä¸€ä¸ªç®€å•çš„å‘½ ä»¤ï¼Œèƒ½å¤Ÿäº§ç”Ÿä½“ç§¯åºå¤§çš„è¿”å›æ•°æ®ã€‚å¦å¤–ä¹Ÿæœ‰å¯èƒ½å› ä¸ºæ‰§è¡Œäº†å¤ªå¤šå‘½ä»¤ï¼Œå¯¼è‡´äº§ç”Ÿè¿”å›æ•°æ®çš„é€Ÿç‡è¶…è¿‡äº†å¾€ å®¢æˆ·ç«¯å‘é€çš„é€Ÿç‡ï¼Œè¿™æ˜¯ä¹Ÿä¼šå¯¼è‡´æœåŠ¡å™¨å †ç§¯å¤§é‡æ¶ˆæ¯ï¼Œä»è€Œå¯¼è‡´è¾“å‡ºç¼“å†²åŒºè¶Šæ¥è¶Šå¤§ï¼Œå ç”¨è¿‡å¤šå†…å­˜ï¼Œç”š è‡³å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚ # ç”¨äºå¼ºåˆ¶æ–­å¼€å‡ºäºæŸäº›åŸå› è€Œæ— æ³•ä»¥è¶³å¤Ÿå¿«çš„é€Ÿåº¦ä»æœåŠ¡å™¨è¯»å–æ•°æ®çš„å®¢æˆ·ç«¯çš„è¿æ¥ã€‚ #å¯¹äºnormal clientï¼ŒåŒ…æ‹¬monitorã€‚ç¬¬ä¸€ä¸ª0è¡¨ç¤ºå–æ¶ˆhard limitï¼Œç¬¬äºŒä¸ª0å’Œç¬¬ä¸‰ä¸ª0è¡¨ç¤ºå–æ¶ˆ soft limitï¼Œnormal clienté»˜è®¤å–æ¶ˆé™åˆ¶ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰å¯»é—®ï¼Œä»–ä»¬æ˜¯ä¸ä¼šæ¥æ”¶æ•°æ®çš„ã€‚ client-output-buffer-limit normal 0 0 0 #å¯¹äºslave clientå’ŒMONITER clientï¼Œå¦‚æœclient-output-bufferä¸€æ—¦è¶…è¿‡256mbï¼Œåˆæˆ–è€…è¶…è¿‡ 64mbæŒç»­60ç§’ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç«‹å³æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚ client-output-buffer-limit slave 256mb 64mb 60 #å¯¹äºpubsub clientï¼Œå¦‚æœclient-output-bufferä¸€æ—¦è¶…è¿‡32mbï¼Œåˆæˆ–è€…è¶…è¿‡8mbæŒç»­60ç§’ï¼Œé‚£ä¹ˆ æœåŠ¡å™¨å°±ä¼šç«‹å³æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚ client-output-buffer-limit pubsub 32mb 8mb 60 # redisæ‰§è¡Œä»»åŠ¡çš„é¢‘ç‡ hz 10# aof rewriteè¿‡ç¨‹ä¸­,æ˜¯å¦é‡‡å–å¢é‡&quot;æ–‡ä»¶åŒæ­¥&quot;ç­–ç•¥,é»˜è®¤ä¸º&quot;yes&quot;,è€Œä¸”å¿…é¡»ä¸ºyes. # rewriteè¿‡ç¨‹ä¸­,æ¯32Mæ•°æ®è¿›è¡Œä¸€æ¬¡æ–‡ä»¶åŒæ­¥,è¿™æ ·å¯ä»¥å‡å°‘&quot;aofå¤§æ–‡ä»¶&quot;å†™å…¥å¯¹ç£ç›˜çš„æ“ä½œæ¬¡æ•°. aof-rewrite-incremental-fsync yes é€šå¸¸æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„é…ç½®è¶³å¤Ÿä½ è§£å†³é—®é¢˜ï¼ æ²¡æœ‰æç‰¹æ®Šçš„è¦æ±‚ï¼Œä¸è¦ä¹±æ”¹é…ç½®ï¼ 3.7 Jedisjavaå’Œredisæ‰“äº¤é“çš„APIå®¢æˆ·ç«¯ 12345&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt;&lt;/dependency&gt; 3.7.1 è¿æ¥redis123456789public static void main(String[] args) &#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); String pong = jedis.ping(); System.out.println(&quot;pong = &quot; + pong); &#125;// è¿è¡Œå‰ï¼š// 1.å…³é—­é˜²ç«å¢™ systemctl stop firewalld.service// 2.ä¿®æ”¹redis.conf [ bind 0.0.0.0 ] å…è®¸ä»»ä½•ipè®¿é—®ï¼Œä»¥è¿™ä¸ªredis.confå¯åŠ¨redisæœåŠ¡ ï¼ˆé‡å¯redisï¼‰// redis-server /opt/redis5.0.4/redis.conf 3.7.2 å¸¸ç”¨API1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677private void testString()&#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); // string jedis.set(&quot;k1&quot;,&quot;v1&quot;); jedis.set(&quot;k2&quot;,&quot;v2&quot;); jedis.set(&quot;k3&quot;,&quot;v3&quot;); Set&lt;String&gt; set = jedis.keys(&quot;*&quot;); Iterator&lt;String&gt; iterator = set.iterator(); for (set.iterator();iterator.hasNext();)&#123; String k = iterator.next(); System.out.println(k+&quot;-&gt;&quot;+jedis.get(k)); &#125; Boolean k2Exists = jedis.exists(&quot;k2&quot;); // æŸ¥çœ‹k2æ˜¯å¦å­˜åœ¨ System.out.println(&quot;k2Exists = &quot; + k2Exists); System.out.println( jedis.ttl(&quot;k1&quot;) ); // æŸ¥çœ‹k1çš„è¿‡æœŸæ—¶é—´ jedis.mset(&quot;k4&quot;,&quot;v4&quot;,&quot;k5&quot;,&quot;v5&quot;); System.out.println( jedis.mget(&quot;k1&quot;,&quot;k2&quot;,&quot;k3&quot;,&quot;k4&quot;,&quot;k5&quot;) ); System.out.println(&quot;-------------------------------------------------------- &quot;);&#125;private void testList()&#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); // list jedis.lpush(&quot;list01&quot;, &quot;l1&quot;,&quot;l2&quot;,&quot;l3&quot;,&quot;l4&quot;,&quot;l5&quot;); List&lt;String&gt; list01 = jedis.lrange(&quot;list01&quot;, 0, -1); for (String s : list01)&#123; System.out.println(s); &#125; System.out.println(&quot;-------------------------------------------------------- &quot;);&#125;private void testSet()&#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); // set jedis.sadd(&quot;order&quot;,&quot;jd001&quot;); jedis.sadd(&quot;order&quot;,&quot;jd002&quot;); jedis.sadd(&quot;order&quot;,&quot;jd003&quot;); Set&lt;String&gt; order = jedis.smembers(&quot;order&quot;); Iterator&lt;String&gt; order_iterator = order.iterator(); while(order_iterator.hasNext())&#123; String s = order_iterator.next(); System.out.println(s); &#125; jedis.srem(&quot;order&quot;, &quot;jd002&quot;); System.out.println( jedis.smembers(&quot;order&quot;).size() );&#125;private void testHash()&#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); jedis.hset(&quot;user1&quot;, &quot;username&quot;,&quot;james&quot;); System.out.println( jedis.hget(&quot;user1&quot;, &quot;username&quot;) ); HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); map.put(&quot;username&quot;, &quot;tom&quot;); map.put(&quot;gender&quot;, &quot;boy&quot;); map.put(&quot;address&quot;, &quot;beijing&quot;); map.put(&quot;phone&quot;, &quot;13590875543&quot;); jedis.hmset(&quot;user2&quot;, map); List&lt;String&gt; list = jedis.hmget(&quot;user2&quot;, &quot;username&quot;, &quot;phone&quot;); for (String s: list)&#123; System.out.println(s); &#125;&#125;private void testZset()&#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); jedis.zadd(&quot;zset01&quot;, 60d, &quot;zs1&quot;); jedis.zadd(&quot;zset01&quot;, 70d, &quot;zs2&quot;); jedis.zadd(&quot;zset01&quot;, 80d, &quot;zs3&quot;); jedis.zadd(&quot;zset01&quot;, 90d, &quot;zs4&quot;); Set&lt;String&gt; zset01 = jedis.zrange(&quot;zset01&quot;, 0, -1); Iterator&lt;String&gt; iterator = zset01.iterator(); while (iterator.hasNext())&#123; String s = iterator.next(); System.out.println(s); &#125;&#125;public static void main(String[] args) &#123; new Test2_API().testZset();&#125; 3.7.3 äº‹åŠ¡ åˆå§‹åŒ–ä½™é¢å’Œæ”¯å‡º 12set yue 100 set zhichu 0 123456789101112131415161718192021222324public static void main(String[] args) throws Exception&#123; Jedis jedis = new Jedis(&quot;192.168.204.141&quot;,6379); int yue = Integer.parseint( jedis.get(&quot;yue&quot;) ); int zhichu = 10; jedis.watch(&quot;yue&quot;); // ç›‘æ§ä½™é¢ Thread.sleep(5000); // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ if(yue &lt; zhichu)&#123; jedis.unwatch(); //è§£é™¤ç›‘æ§ System.out.println(&quot;ä½™é¢ä¸è¶³ï¼&quot;); &#125; else&#123; Transaction transaction = jedis.multi(); // å¼€å¯äº‹åŠ¡ transaction.decrBy(&quot;yue&quot;, zhichu); // ä½™é¢å‡å°‘ transaction.incrBy(&quot;zhichu&quot;, zhichu); // ç´¯è®¡æ¶ˆè´¹å¢åŠ  transaction.exec(); System.out.println(&quot;ä½™é¢ï¼š&quot; + jedis.get(&quot;yue&quot;)); System.out.println(&quot;ç´¯è®¡æ”¯å‡ºï¼š&quot; + jedis.get(&quot;zhichu&quot;)); &#125;&#125; æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿï¼šï¼Œ10ç§’å†…ï¼Œè¿›å…¥linuxä¿®æ”¹ä½™é¢ä¸º5ï¼Œè¿™æ ·ï¼Œä½™é¢&lt;æ”¯å‡ºï¼Œå°±ä¼šè¿›å…¥if 3.7.4 JedisPool redisçš„è¿æ¥æ± æŠ€æœ¯ è¯¦æƒ…ï¼šhttps://help.aliyun.com/document_detail/98726.html 12345&lt;dependency&gt; &lt;groupId&gt;commons-pool&lt;/groupId&gt; &lt;artifactId&gt;commons-pool&lt;/artifactId&gt; &lt;version&gt;1.6&lt;/version&gt;&lt;/dependency&gt; ä½¿ç”¨å•ä¾‹æ¨¡å¼è¿›è¡Œä¼˜åŒ– 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import jdk.nashorn.internal.scripts.JD;import redis.clients.jedis.Jedis;import redis.clients.jedis.JedisPool;import redis.clients.jedis.JedisPoolConfig;/** * @BelongsProject: lagou-jedis * @Author: GuoAn.Sun * @CreateTime: 2020-08-05 17:46 * @Description: å•ä¾‹æ¨¡å¼ä¼˜åŒ–jedisè¿æ¥æ±  */public class JedisPoolUtil &#123; private JedisPoolUtil()&#123; &#125; private volatile static JedisPool jedisPool = null; private volatile static Jedis jedis = null; // è¿”å›ä¸€ä¸ªè¿æ¥æ±  private static JedisPool getInstance()&#123; // åŒå±‚æ£€æµ‹é”ï¼ˆä¼ä¸šä¸­ç”¨çš„éå¸¸é¢‘ç¹ï¼‰ if(jedisPool == null)&#123; // ç¬¬ä¸€å±‚ï¼šæ£€æµ‹ä½“æ¸© synchronized (JedisPoolUtil.class)&#123; // æ’é˜Ÿè¿›ç«™ if(jedisPool == null) &#123; //ç¬¬äºŒå±‚ï¼šæŸ¥çœ‹å¥åº·ç  JedisPoolConfig config = new JedisPoolConfig(); config.setMaxTotal(1000); // èµ„æºæ± ä¸­çš„æœ€å¤§è¿æ¥æ•° config.setMaxIdle(30); // èµ„æºæ± å…è®¸çš„æœ€å¤§ç©ºé—²è¿æ¥æ•° config.setMaxWaitMillis(60*1000); // å½“èµ„æºæ± è¿æ¥ç”¨å°½åï¼Œè°ƒç”¨è€… çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰ config.setTestOnBorrow(true); //å‘èµ„æºæ± å€Ÿç”¨è¿æ¥æ—¶æ˜¯å¦åšè¿æ¥æœ‰æ•ˆ æ€§æ£€æµ‹(ä¸šåŠ¡é‡å¾ˆå¤§æ—¶å€™å»ºè®®è®¾ç½®ä¸ºfalseï¼Œå‡å°‘ä¸€æ¬¡pingçš„å¼€é”€) jedisPool = new JedisPool( config, &quot;192.168.204.141&quot;,6379 ); &#125; &#125; &#125; return jedisPool; &#125; // è¿”å›jediså¯¹è±¡ public static Jedis getJedis()&#123; if(jedis == null)&#123; jedis = getInstance().getResource(); &#125; return jedis; &#125;&#125; æµ‹è¯•ç±» 12345678910111213/** * @BelongsProject: lagou-jedis * @Author: GuoAn.Sun * @CreateTime: 2020-08-05 17:54 * @Description: æµ‹è¯•jedisè¿æ¥æ±  */public class Test_JedisPool &#123; public static void main(String[] args) &#123; Jedis jedis1 = JedisPoolUtil.getJedis(); Jedis jedis2 = JedisPoolUtil.getJedis(); System.out.println(jedis1==jedis2); &#125;&#125; 3.8 é«˜å¹¶å‘ä¸‹çš„åˆ†å¸ƒå¼é” ç»å…¸æ¡ˆä¾‹ï¼šç§’æ€ï¼ŒæŠ¢è´­ä¼˜æƒ åˆ¸ç­‰ 3.8.1 æ­å»ºå·¥ç¨‹å¹¶æµ‹è¯•å•çº¿ç¨‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;packaging&gt;war&lt;/packaging&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.2.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.redisson&lt;/groupId&gt; &lt;artifactId&gt;redisson&lt;/artifactId&gt; &lt;version&gt;3.6.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.data&lt;/groupId&gt; &lt;artifactId&gt;spring-data-redis&lt;/artifactId&gt; &lt;version&gt;2.3.2.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.8&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;port&gt;8001&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;run&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;context:component-scan base-package=&quot;controller&quot;/&gt; &lt;bean id=&quot;stringRedisTemplate&quot; class=&quot;org.springframework.data.redis.core.StringRedisTemplate&quot;&gt; &lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;connectionFactory&quot; class=&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;&gt; &lt;property name=&quot;hostName&quot; value=&quot;192.168.204.141&quot;&gt;&lt;/property&gt; &lt;property name=&quot;port&quot; value=&quot;6379&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; 1234567891011121314151617181920212223242526package controller;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.StringRedisTemplate;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controller public class TestKill &#123; @Autowired private StringRedisTemplate stringRedisTemplate; @RequestMapping(&quot;kill&quot;) // åªèƒ½è§£å†³ä¸€ä¸ªtomcatçš„å¹¶å‘é—®é¢˜ï¼šsynchronizedé”çš„ä¸€ä¸ªè¿›ç¨‹ä¸‹çš„çº¿ç¨‹å¹¶å‘ï¼Œå¦‚æœåˆ†å¸ƒå¼ç¯ å¢ƒï¼Œå¤šä¸ªè¿›ç¨‹å¹¶å‘ï¼Œè¿™ç§æ–¹æ¡ˆå°±å¤±æ•ˆäº†ï¼ public @ResponseBody synchronized String kill() &#123; // 1.ä»redisä¸­è·å– æ‰‹æœºçš„åº“å­˜æ•°é‡ int phoneCount = Integer.parseint(stringRedisTemplate.opsForValue().get(&quot;phone&quot;)); // 2.åˆ¤æ–­æ‰‹æœºçš„æ•°é‡æ˜¯å¦å¤Ÿç§’æ€çš„ if(phoneCount &gt; 0)&#123; phoneCount--; // åº“å­˜å‡å°‘åï¼Œå†å°†åº“å­˜çš„å€¼ä¿å­˜å›redis stringRedisTemplate.opsForValue().set(&quot;phone&quot;, phoneCount+&quot;&quot;); System.out.println(&quot;åº“å­˜-1ï¼Œå‰©ä½™ï¼š&quot;+ phoneCount); &#125; else&#123; System.out.println(&quot;åº“å­˜ä¸è¶³ï¼&quot;); &#125; return &quot;over!&quot;; &#125;&#125; 3.8.2 é«˜å¹¶å‘æµ‹è¯• å¯åŠ¨ä¸¤æ¬¡å·¥ç¨‹ï¼Œç«¯å£å·åˆ†åˆ«8001å’Œ8002 ä½¿ç”¨nginxåšè´Ÿè½½å‡è¡¡ 12345678910111213upstream sga&#123; server 192.168.204.1:8001; server 192.168.204.1:8002; &#125;server &#123; listen 80; server_name localhost; location / &#123; proxy_pass http://sga; root html; index index.html index.htm; &#125;&#125; 1/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf ä½¿ç”¨ JMeter æ¨¡æ‹Ÿ1ç§’å†…å‘å‡º100ä¸ªhttpè¯·æ±‚ï¼Œä¼šå‘ç°åŒä¸€ä¸ªå•†å“ä¼šè¢«ä¸¤å°æœåŠ¡å™¨åŒæ—¶æŠ¢è´­ï¼ 3.8.3 å®ç°åˆ†å¸ƒå¼é”çš„æ€è·¯ å› ä¸ºredis****æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å‘½ä»¤ä¹Ÿå°±å…·å¤‡åŸå­æ€§ï¼Œä½¿ç”¨setnxå‘½ä»¤å®ç°é”ï¼Œä¿å­˜k-v å¦‚æœkä¸å­˜åœ¨ï¼Œä¿å­˜ï¼ˆå½“å‰çº¿ç¨‹åŠ é”ï¼‰ï¼Œæ‰§è¡Œå®Œæˆåï¼Œåˆ é™¤kè¡¨ç¤ºé‡Šæ”¾é” å¦‚æœkå·²å­˜åœ¨ï¼Œé˜»å¡çº¿ç¨‹æ‰§è¡Œï¼Œè¡¨ç¤ºæœ‰é” å¦‚æœåŠ é”æˆåŠŸï¼Œåœ¨æ‰§è¡Œä¸šåŠ¡ä»£ç çš„è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´æ²¡æœ‰åˆ é™¤kï¼ˆé‡Šæ”¾é”å¤±è´¥ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆæ­»é”ï¼ˆåé¢çš„æ‰€æœ‰çº¿ç¨‹éƒ½æ— æ³•æ‰§è¡Œï¼‰ è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¾‹å¦‚10ç§’åï¼Œredisè‡ªåŠ¨åˆ é™¤ é«˜å¹¶å‘ä¸‹ï¼Œç”±äºæ—¶é—´æ®µç­‰å› ç´ å¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§æˆ–è¿‡å°ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ—¶é—´ä¸åŒ ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œéœ€è¦13ç§’ï¼Œæ‰§è¡Œåˆ°ç¬¬10ç§’æ—¶ï¼Œredisè‡ªåŠ¨è¿‡æœŸäº†kï¼ˆé‡Šæ”¾é”ï¼‰ ç¬¬äºŒä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œéœ€è¦7ç§’ï¼ŒåŠ é”ï¼Œæ‰§è¡Œç¬¬3ç§’ï¼ˆé” è¢«é‡Šæ”¾äº†ï¼Œä¸ºä»€ä¹ˆï¼Œæ˜¯è¢«ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„finallyä¸»åŠ¨deleteKeyé‡Šæ”¾æ‰äº†ï¼‰ ã€‚ã€‚ã€‚è¿é”ååº”ï¼Œå½“å‰çº¿ç¨‹åˆšåŠ çš„é”ï¼Œå°±è¢«å…¶ä»–çº¿ç¨‹é‡Šæ”¾æ‰äº†ï¼Œå‘¨è€Œå¤å§‹ï¼Œå¯¼è‡´é”ä¼šæ°¸ä¹…å¤±æ•ˆ ç»™æ¯ä¸ªçº¿ç¨‹åŠ ä¸Šå”¯ä¸€çš„æ ‡è¯†UUIDéšæœºç”Ÿæˆï¼Œé‡Šæ”¾çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰çš„æ ‡è¯†å³å¯ é—®é¢˜åˆæ¥äº†ï¼Œè¿‡æœŸæ—¶é—´å¦‚æœè®¾å®šï¼Ÿ å¦‚æœ10ç§’å¤ªçŸ­ä¸å¤Ÿç”¨æ€ä¹ˆåŠï¼Ÿ è®¾ç½®60ç§’ï¼Œå¤ªé•¿åˆæµªè´¹æ—¶é—´ å¯ä»¥å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨çº¿ç¨‹ï¼Œå½“è¿‡æœŸæ—¶é—´å°äºæ€»è¿‡æœŸæ—¶é—´çš„1&#x2F;3æ—¶ï¼Œå¢é•¿æ€»è¿‡æœŸæ—¶é—´ï¼ˆåƒä»™ä¸¹ç»­å‘½ï¼ï¼‰ è‡ªå·±å®ç°åˆ†å¸ƒå¼é”ï¼Œå¤ªéš¾äº†ï¼ 3.8.4 Redisson Redis æ˜¯æœ€æµè¡Œçš„ NoSQL æ•°æ®åº“è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œè€Œ Java æ˜¯ä¸–ç•Œä¸Šæœ€æµè¡Œï¼ˆæ³¨æ„ï¼Œæˆ‘æ²¡æœ‰è¯´â€œæœ€ å¥½â€ï¼‰çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚ è™½ç„¶ä¸¤è€…çœ‹èµ·æ¥å¾ˆè‡ªç„¶åœ°åœ¨ä¸€èµ·â€œå·¥ä½œâ€ï¼Œä½†æ˜¯è¦çŸ¥é“ï¼ŒRedis å…¶å®å¹¶æ²¡æœ‰å¯¹ Java æä¾›åŸç”Ÿæ”¯æŒ ç›¸åï¼Œä½œä¸º Java å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬è‹¥æƒ³åœ¨ç¨‹åºä¸­é›†æˆ Redisï¼Œå¿…é¡»ä½¿ç”¨ Redis çš„ç¬¬ä¸‰æ–¹åº“ã€‚ è€Œ Redisson å°±æ˜¯ç”¨äºåœ¨ Java ç¨‹åºä¸­æ“ä½œ Redis çš„åº“ï¼Œå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­è½»æ¾åœ°ä½¿ç”¨Redisã€‚ Redisson åœ¨ java.util ä¸­å¸¸ç”¨æ¥å£çš„åŸºç¡€ä¸Šï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç³»åˆ—å…·æœ‰åˆ†å¸ƒå¼ç‰¹æ€§çš„å·¥å…·ç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package controller;import org.redisson.Redisson;import org.redisson.api.RLock;import org.redisson.config.Config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.data.redis.core.StringRedisTemplate;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import java.util.concurrent.TimeUnit;@Controller public class TestKill &#123; @Autowired private Redisson redisson; @Autowired private StringRedisTemplate stringRedisTemplate; @RequestMapping(&quot;kill&quot;) // åªèƒ½è§£å†³ä¸€ä¸ªtomcatçš„å¹¶å‘é—®é¢˜ï¼šsynchronizedé”çš„ä¸€ä¸ªè¿›ç¨‹ä¸‹çš„çº¿ç¨‹å¹¶å‘ï¼Œå¦‚æœåˆ†å¸ƒå¼ç¯ å¢ƒï¼Œå¤šä¸ªè¿›ç¨‹å¹¶å‘ï¼Œè¿™ç§æ–¹æ¡ˆå°±å¤±æ•ˆäº†ï¼ public @ResponseBody synchronized String kill() &#123; // å®šä¹‰å•†å“id String productKey = &quot;HUAWEI-P40&quot;; // é€šè¿‡redissonè·å–é” RLock rLock = redisson.getLock(productKey); // åº•å±‚æºç å°±æ˜¯é›†æˆäº†setnxï¼Œè¿‡ æœŸæ—¶é—´ç­‰æ“ä½œ// ä¸Šé”ï¼ˆè¿‡æœŸæ—¶é—´ä¸º30ç§’ï¼‰ rLock.lock(30, TimeUnit.SECONDS); try&#123; // 1.ä»redisä¸­è·å– æ‰‹æœºçš„åº“å­˜æ•°é‡ int phoneCount = Integer.parseint(stringRedisTemplate.opsForValue().get(&quot;phone&quot;)); // 2.åˆ¤æ–­æ‰‹æœºçš„æ•°é‡æ˜¯å¦å¤Ÿç§’æ€çš„ if (phoneCount &gt; 0) &#123; phoneCount--; // åº“å­˜å‡å°‘åï¼Œå†å°†åº“å­˜çš„å€¼ä¿å­˜å›redis stringRedisTemplate.opsForValue().set(&quot;phone&quot;, phoneCount + &quot;&quot;); System.out.println(&quot;åº“å­˜-1ï¼Œå‰©ä½™ï¼š&quot; + phoneCount); &#125; else &#123; System.out.println(&quot;åº“å­˜ä¸è¶³ï¼&quot;); &#125; &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; finally &#123; // é‡Šæ”¾é” rLock.unlock(); &#125; return &quot;over!&quot;; &#125; @Bean public Redisson redisson()&#123; Config config = new Config(); // ä½¿ç”¨å•ä¸ªredisæœåŠ¡å™¨ config.useSingleServer().setAddress(&quot;redis://192.168.204.141:6379&quot;).setDatabase (0); // ä½¿ç”¨é›†ç¾¤redis // config.useClusterServers().setScanInterval(2000).addNodeAddress(&quot;redis://192.168 .204.141:6379&quot;,&quot;redis://192.168.204.142:6379&quot;,&quot;redis://192.168.204.143:6379&quot;); return (Redisson)Redisson.create(config); &#125;&#125; å®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆå…¶å®æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä¹‹å‰ç”¨è¿‡çš„zookeeperçš„ç‰¹ç‚¹å°±æ˜¯é«˜å¯é æ€§ï¼Œç°åœ¨æˆ‘ä»¬ç”¨çš„redisç‰¹ç‚¹å°±æ˜¯é«˜æ€§èƒ½ã€‚ ç›®å‰åˆ†å¸ƒå¼é”ï¼Œåº”ç”¨æœ€å¤šçš„ä»ç„¶æ˜¯â€œRedisâ€","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"zookeeperè¯¦è§£","slug":"zookeeperè¯¦è§£","date":"2021-06-01T12:39:00.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/06/01/zookeeperè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2021/06/01/zookeeper%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"ä¸€ã€Zookeeperæ¦‚è¿°1.1 æ¦‚è¿° ç¾å›¢ï¼Œé¥¿äº†ä¹ˆï¼Œæ·˜å®ï¼Œ58åŒåŸç­‰ç­‰åº”ç”¨éƒ½æ˜¯zookeeperçš„ç°å®ç”Ÿæ´»ç‰ˆ è€å­™æˆ‘å¼€äº†ä¸ªé¥­åº—ï¼Œå¦‚ä½•æ‰èƒ½è®©å¤§å®¶éƒ½èƒ½åƒåˆ°æˆ‘ä»¬çš„é¥­èœï¼Ÿéœ€è¦å…¥é©»ç¾å›¢ï¼Œè¿™æ ·å¤§å®¶å°±å¯ä»¥åœ¨ç¾å›¢ appä¸­çœ‹åˆ°æˆ‘çš„é¥­åº—ï¼Œä¸‹è®¢å•ï¼Œä»è€Œå®Œæˆä¸€æ¬¡äº¤æ˜“ Zookeeperæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ï¼ˆå¤šå°æœåŠ¡å™¨å¹²ä¸€ä»¶äº‹ï¼‰çš„ï¼Œä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›åè°ƒæœåŠ¡çš„Apacheé¡¹ç›®ã€‚ åœ¨å¤§æ•°æ®æŠ€æœ¯ç”Ÿæ€åœˆä¸­ï¼Œzookeeperï¼ˆåŠ¨ç‰©ç®¡ç†å‘˜ï¼‰ï¼ŒHadoopï¼ˆå¤§è±¡ï¼‰ï¼ŒHiveï¼ˆèœœèœ‚ï¼‰ï¼ŒPigï¼ˆçŒªï¼‰ç­‰æŠ€æœ¯ 1.2 å·¥ä½œæœºåˆ¶ Zookeeperä»è®¾è®¡æ¨¡å¼è§’åº¦æ¥ç†è§£ï¼šæ˜¯ä¸€ä¸ªåŸºäºè§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸€ä¸ªäººå¹²æ´»ï¼Œæœ‰äººç›¯ç€ä»–ï¼‰è®¾è®¡çš„åˆ†å¸ƒå¼æœåŠ¡ç®¡ç†æ¡†æ¶ å®ƒè´Ÿè´£ å­˜å‚¨ å’Œ ç®¡ç† å¤§å®¶éƒ½å…³å¿ƒçš„æ•°æ® ç„¶åæ¥å—è§‚å¯Ÿè€…çš„æ³¨å†Œï¼Œä¸€æ—¦è¿™äº›æ•°æ®çš„å‘ç”Ÿå˜åŒ– Zookeeperå°±å°†è´Ÿè´£é€šçŸ¥å·²ç»æ³¨å†Œçš„é‚£äº›è§‚å¯Ÿè€…åšå‡ºç›¸åº”çš„ååº” ä»è€Œå®ç°é›†ç¾¤ä¸­ç±»ä¼¼Master&#x2F;Slaveç®¡ç†æ¨¡å¼ Zookeeper &#x3D; æ–‡ä»¶ç³»ç»Ÿ + é€šçŸ¥æœºåˆ¶ å•†å®¶è¥ä¸šå¹¶å…¥é©» è·å–åˆ°å½“å‰è¥ä¸šçš„é¥­åº—åˆ—è¡¨ æœåŠ¡å™¨èŠ‚ç‚¹ä¸‹çº¿ æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šä¸‹çº¿äº‹ä»¶é€šçŸ¥ é‡æ–°å†å»è·å–æœåŠ¡å™¨åˆ—è¡¨ï¼Œå¹¶æ³¨å†Œç›‘å¬ 1.3 ç‰¹ç‚¹åˆ†å¸ƒå¼å’Œé›†ç¾¤çš„åŒºåˆ«ï¼Ÿ æ— è®ºåˆ†å¸ƒå¼å’Œé›†ç¾¤ï¼Œéƒ½æ˜¯å¾ˆå¤šäººåœ¨åšäº‹æƒ…ã€‚å…·ä½“åŒºåˆ«å¦‚ä¸‹ï¼š ä¾‹å¦‚ï¼šæˆ‘æœ‰ä¸€ä¸ªé¥­åº—ï¼Œè¶Šæ¥è¶Šç«çˆ†ï¼Œæˆ‘å¾—å¤šæ‹›è˜ä¸€äº›å·¥ä½œäººå‘˜ åˆ†å¸ƒå¼ï¼šæ‹›è˜1ä¸ªå¨å¸ˆï¼Œ1ä¸ªæœåŠ¡å‘˜ï¼Œ1ä¸ªå‰å°ï¼Œä¸‰ä¸ªäººè´Ÿè´£çš„å·¥ä½œä¸ä¸€æ ·ï¼Œä½†æ˜¯æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºé¥­åº—å·¥ä½œ é›†ç¾¤ï¼šæ‹›è˜3ä¸ªæœåŠ¡å‘˜ï¼Œ3ä¸ªäººçš„å·¥ä½œä¸€æ · 1.4 æ•°æ®ç»“æ„ ZooKeeperæ•°æ®æ¨¡å‹çš„ç»“æ„ä¸linuxæ–‡ä»¶ç³»ç»Ÿå¾ˆç±»ä¼¼ï¼Œæ•´ä½“ä¸Šå¯ä»¥çœ‹ä½œæ˜¯ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç§°åšä¸€ä¸ªZNodeï¼ˆZookeeperNodeï¼‰ã€‚ æ¯ä¸€ä¸ªZNodeé»˜è®¤èƒ½å¤Ÿå­˜å‚¨1MBçš„æ•°æ®ï¼ˆå…ƒæ•°æ®ï¼‰ï¼Œæ¯ä¸ªZNodeçš„è·¯å¾„éƒ½æ˜¯å”¯ä¸€çš„ å…ƒæ•°æ®ï¼ˆMetadataï¼‰ï¼Œåˆç§°ä¸­ä»‹æ•°æ®ã€ä¸­ç»§æ•°æ®ï¼Œä¸ºæè¿°æ•°æ®çš„æ•°æ®ï¼ˆdata about dataï¼‰ï¼Œä¸»è¦æ˜¯æè¿°æ•°æ®å±æ€§ï¼ˆpropertyï¼‰çš„ä¿¡æ¯ï¼Œç”¨æ¥æ”¯æŒå¦‚æŒ‡ç¤ºå­˜å‚¨ä½ç½®ã€å†å²æ•°æ®ã€èµ„æºæŸ¥æ‰¾ã€æ–‡ä»¶è®°å½•ç­‰åŠŸèƒ½ 1.5 åº”ç”¨åœºæ™¯ æä¾›çš„æœåŠ¡åŒ…æ‹¬ï¼šç»Ÿä¸€å‘½åæœåŠ¡ã€ç»Ÿä¸€é…ç½®ç®¡ç†ã€ç»Ÿä¸€é›†ç¾¤ç®¡ç†ã€æœåŠ¡å™¨èŠ‚ç‚¹åŠ¨æ€ä¸Šä¸‹çº¿ã€è½¯è´Ÿè½½å‡è¡¡ç­‰ 1.5.1 ç»Ÿä¸€å‘½åæœåŠ¡ åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé€šå¸¸éœ€è¦å¯¹åº”ç”¨æˆ–æœåŠ¡è¿›è¡Œç»Ÿä¸€çš„å‘½åï¼Œä¾¿äºè¯†åˆ« ä¾‹å¦‚ï¼šæœåŠ¡å™¨çš„IPåœ°å€ä¸å®¹æ˜“è®°ï¼Œä½†åŸŸåç›¸æ¯”ä¹‹ä¸‹å´æ˜¯å¾ˆå®¹æ˜“è®°ä½ 1.5.2 ç»Ÿä¸€é…ç½®ç®¡ç† åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé…ç½®æ–‡ä»¶åšåŒæ­¥æ˜¯å¿…ç»ä¹‹è·¯ 1000å°æœåŠ¡å™¨ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä½œå‡ºä¿®æ”¹ï¼Œé‚£ä¸€å°ä¸€å°çš„ä¿®æ”¹ï¼Œè¿ç»´äººå‘˜è‚¯å®šä¼šç–¯ï¼Œå¦‚ä½•åšåˆ°ä¿®æ”¹ä¸€å¤„å°±å¿«é€ŸåŒæ­¥åˆ°æ¯å°æœåŠ¡å™¨ä¸Š å°†é…ç½®ç®¡ç†äº¤ç»™Zookeeper å°†é…ç½®ä¿¡æ¯å†™å…¥åˆ°Zookeeperçš„æŸä¸ªèŠ‚ç‚¹ä¸Š æ¯ä¸ªå®¢æˆ·ç«¯éƒ½ç›‘å¬è¿™ä¸ªèŠ‚ç‚¹ ä¸€æ—¦èŠ‚ç‚¹ä¸­çš„æ•°æ®æ–‡ä»¶è¢«ä¿®æ”¹ï¼ŒZookeeperè¿™ä¸ªè¯åŒ£å­å°±ä¼šé€šçŸ¥æ¯å°å®¢æˆ·ç«¯æœåŠ¡å™¨ 1.5.3 æœåŠ¡å™¨èŠ‚ç‚¹åŠ¨æ€ä¸Šä¸‹çº¿ å®¢æˆ·ç«¯èƒ½å®æ—¶è·å–æœåŠ¡å™¨ä¸Šä¸‹çº¿çš„å˜åŒ– åœ¨ç¾å›¢APPä¸Šå®æ—¶å¯ä»¥çœ‹åˆ°å•†å®¶æ˜¯å¦æ­£åœ¨è¥ä¸šæˆ–æ‰“æ · 1.5.4 è½¯è´Ÿè½½å‡è¡¡ Zookeeperä¼šè®°å½•æ¯å°æœåŠ¡å™¨çš„è®¿é—®æ•°ï¼Œè®©è®¿é—®æ•°æœ€å°‘çš„æœåŠ¡å™¨å»å¤„ç†æœ€æ–°çš„å®¢æˆ·è¯·æ±‚ï¼ˆé›¨éœ²å‡æ²¾ï¼‰ éƒ½æ˜¯è‡ªå·±çš„å­©å­ï¼Œå¾—ä¸€ç¢—æ°´ç«¯å¹³ 1.6 ä¸‹è½½åœ°å€é•œåƒåº“åœ°å€ï¼šhttp://archive.apache.org/dist/zookeeper/ apache-zookeeper-3.6.0.tar.gzéœ€è¦å®‰è£…mavenï¼Œç„¶åå†è¿è¡Œmvn clean install å’Œmvnjavadoc:aggregateï¼Œå‰ä¸€ä¸ªå‘½ä»¤ä¼šä¸‹è½½å®‰è£…å¥½å¤šjaråŒ…ï¼Œä¸çŸ¥é“è¦èŠ±å¤šé•¿æ—¶é—´ apache-zookeeper-3.6.0-bin.tar.gzå·²ç»è‡ªå¸¦æ‰€éœ€è¦çš„å„ç§jaråŒ… äºŒã€Zookeeperæœ¬åœ°æ¨¡å¼å®‰è£…2.1 æœ¬åœ°æ¨¡å¼å®‰è£…2.1.1 å®‰è£…å‰å‡†å¤‡ å®‰è£…jdk æ‹·è´apache-zookeeper-3.6.0-bin.tar.gzåˆ°optç›®å½• è§£å‹å®‰è£…åŒ… 1[root@localhost opt]# tar -zxvf apache-zookeeper-3.6.0-bin.tar.gz é‡å‘½å 1[root@localhost opt]# mv apache-zookeeper-3.6.0-bin zookeeper 2.1.2 é…ç½®ä¿®æ”¹1ã€åœ¨&#x2F;opt&#x2F;zookeeper&#x2F;è¿™ä¸ªç›®å½•ä¸Šåˆ›å»ºzkDataå’ŒzkLogç›®å½• 12[root@localhost zookeeper]# mkdir zkData [root@localhost zookeeper]# mkdir zkLog 2ã€è¿›å…¥&#x2F;opt&#x2F;zookeeper&#x2F;confè¿™ä¸ªè·¯å¾„ï¼Œå¤åˆ¶ä¸€ä»½ zoo_sample.cfg æ–‡ä»¶å¹¶å‘½åä¸º zoo.cfg 1[root@localhost conf]# cp zoo_sample.cfg zoo.cfg 3ã€ç¼–è¾‘zoo.cfgæ–‡ä»¶ï¼Œä¿®æ”¹dataDirè·¯å¾„ï¼š 12dataDir=/opt/zookeeper/zkDatadataLogDir=/opt/zookeeper/zkLog 2.1.3 æ“ä½œZookeeper1ã€å¯åŠ¨Zookeeper 1[root@localhost bin]# ./zkServer.sh start 2ã€æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¯åŠ¨ 1[root@localhost bin]# jps QuorumPeerMainï¼šæ˜¯zookeeperé›†ç¾¤çš„å¯åŠ¨å…¥å£ç±»ï¼Œæ˜¯ç”¨æ¥åŠ è½½é…ç½®å¯åŠ¨QuorumPeerçº¿ç¨‹çš„ 3ã€æŸ¥çœ‹çŠ¶æ€ï¼š 1[root@localhost bin]# ./zkServer.sh status 4ã€å¯åŠ¨å®¢æˆ·ç«¯ 1[root@localhost bin]# ./zkCli.sh 5ã€é€€å‡ºå®¢æˆ·ç«¯ 1[zk: localhost:2181(CONNECTED) 0] quit 2.2 é…ç½®å‚æ•°è§£è¯»Zookeeperä¸­çš„é…ç½®æ–‡ä»¶zoo.cfgä¸­å‚æ•°å«ä¹‰è§£è¯»å¦‚ä¸‹ï¼š tickTime &#x3D;2000ï¼šé€šä¿¡å¿ƒè·³æ•°ï¼ŒZookeeperæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å¿ƒè·³æ—¶é—´ï¼Œå•ä½æ¯«ç§’ Zookeeperä½¿ç”¨çš„åŸºæœ¬æ—¶é—´ï¼ŒæœåŠ¡å™¨ä¹‹é—´æˆ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªtickTimeæ—¶é—´å°±ä¼šå‘é€ä¸€ä¸ªå¿ƒè·³ï¼Œæ—¶é—´å•ä½ä¸ºæ¯«ç§’ã€‚ initLimit &#x3D;10ï¼šLFåˆå§‹é€šä¿¡æ—¶é™ é›†ç¾¤ä¸­çš„Followerè·Ÿéšè€…æœåŠ¡å™¨ä¸Leaderé¢†å¯¼è€…æœåŠ¡å™¨ä¹‹é—´ï¼Œå¯åŠ¨æ—¶èƒ½å®¹å¿çš„æœ€å¤šå¿ƒè·³æ•° 10*2000ï¼ˆ10ä¸ªå¿ƒè·³æ—¶é—´ï¼‰å¦‚æœé¢†å¯¼å’Œè·Ÿéšè€…æ²¡æœ‰å‘å‡ºå¿ƒè·³é€šä¿¡ï¼Œå°±è§†ä¸ºå¤±æ•ˆçš„è¿æ¥ï¼Œé¢†å¯¼å’Œè·Ÿéšè€…å½»åº•æ–­å¼€ syncLimit &#x3D;5ï¼šLFåŒæ­¥é€šä¿¡æ—¶é™ é›†ç¾¤å¯åŠ¨åï¼ŒLeaderä¸Followerä¹‹é—´çš„æœ€å¤§å“åº”æ—¶é—´å•ä½ï¼Œå‡å¦‚å“åº”è¶…è¿‡syncLimit * tickTime-&gt;10ç§’ï¼ŒLeaderå°±è®¤ä¸ºFollwerå·²ç»æ­»æ‰ï¼Œä¼šå°†Follwerä»æœåŠ¡å™¨åˆ—è¡¨ä¸­åˆ é™¤ dataDirï¼šæ•°æ®æ–‡ä»¶ç›®å½•+æ•°æ®æŒä¹…åŒ–è·¯å¾„ ä¸»è¦ç”¨äºä¿å­˜Zookeeperä¸­çš„æ•°æ®ã€‚ dataLogDirï¼šæ—¥å¿—æ–‡ä»¶ç›®å½• clientPort &#x3D;2181ï¼šå®¢æˆ·ç«¯è¿æ¥ç«¯å£ ç›‘å¬å®¢æˆ·ç«¯è¿æ¥çš„ç«¯å£ ä¸‰ã€Zookeeperå†…éƒ¨åŸç†3.1 é€‰ä¸¾æœºåˆ¶ï¼ˆé¢è¯•é‡ç‚¹ï¼‰ åŠæ•°æœºåˆ¶ï¼šé›†ç¾¤ä¸­åŠæ•°ä»¥ä¸Šæœºå™¨å­˜æ´»ï¼Œé›†ç¾¤å¯ç”¨ã€‚æ‰€ä»¥Zookeeperé€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ è™½ç„¶åœ¨é…ç½®æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰æŒ‡å®šMasterå’ŒSlaveã€‚ä½†æ˜¯ï¼ŒZookeeperå·¥ä½œæ—¶ï¼Œæ˜¯æœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºLeaderï¼Œå…¶ä»–åˆ™ä¸ºFollowerï¼ŒLeaderæ˜¯é€šè¿‡å†…éƒ¨çš„é€‰ä¸¾æœºåˆ¶ä¸´æ—¶äº§ç”Ÿçš„ Server1å…ˆæŠ•ç¥¨ï¼ŒæŠ•ç»™è‡ªå·±ï¼Œè‡ªå·±ä¸º1ç¥¨ï¼Œæ²¡æœ‰è¶…è¿‡åŠæ•°ï¼Œæ ¹æœ¬æ— æ³•æˆä¸ºleaderï¼Œé¡ºæ°´æ¨èˆŸå°†ç¥¨æ•°æŠ•ç»™äº†idæ¯”è‡ªå·±å¤§çš„Server2 Server2ä¹ŸæŠŠè‡ªå·±çš„ç¥¨æ•°æŠ•ç»™äº†è‡ªå·±ï¼Œå†åŠ ä¸ŠServer1ç»™çš„ç¥¨æ•°ï¼Œæ€»ç¥¨æ•°ä¸º2ç¥¨ï¼Œæ²¡æœ‰è¶…è¿‡åŠæ•°ï¼Œä¹Ÿæ— æ³•æˆä¸ºleaderï¼Œä¹Ÿå­¦ä¹ Server1ï¼Œé¡ºæ°´æ¨èˆŸï¼Œå°†è‡ªå·±æ‰€æœ‰çš„ç¥¨æ•°ç»™äº†idæ¯”è‡ªå·±å¤§çš„Server3 Server3å¾—åˆ°äº†Server1å’ŒServer2çš„ä¸¤ç¥¨ï¼Œå†åŠ ä¸Šè‡ªå·±æŠ•ç»™è‡ªå·±çš„ä¸€ç¥¨ã€‚3ç¥¨è¶…è¿‡åŠæ•°ï¼Œé¡ºåˆ©æˆä¸ºleader Server4å’ŒServer5éƒ½æŠ•ç»™è‡ªå·±ï¼Œä½†æ˜¯æ— æ³•æ”¹å˜Server3çš„ç¥¨æ•°ï¼Œåªå¥½å¬å¤©ç”±å‘½ï¼Œæ‰¿è®¤Server3æ˜¯leader 3.2 èŠ‚ç‚¹ç±»å‹ æŒä¹…å‹ï¼ˆpersistentï¼‰ï¼š æŒä¹…åŒ–ç›®å½•èŠ‚ç‚¹ï¼ˆpersistentï¼‰å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨ æŒä¹…åŒ–é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹ï¼ˆpersistent_sequentialï¼‰å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨ï¼Œåˆ›å»ºznodeæ—¶è®¾ç½®é¡ºåºæ ‡è¯†ï¼Œznodeåç§°åä¼šé™„åŠ ä¸€ä¸ªå€¼ï¼Œé¡ºåºå·æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢çš„è®¡æ•°å™¨ï¼Œç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤ï¼Œä¾‹å¦‚ï¼šZnode001ï¼ŒZnode002â€¦ çŸ­æš‚å‹ï¼ˆephemeralï¼‰ï¼š ä¸´æ—¶ç›®å½•èŠ‚ç‚¹ï¼ˆephemeralï¼‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ–­å¼€è¿æ¥åï¼Œåˆ›å»ºçš„èŠ‚ç‚¹è‡ªåŠ¨åˆ é™¤ ä¸´æ—¶é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹ï¼ˆephemeral_sequentialï¼‰å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œåˆ›å»ºznodeæ—¶è®¾ç½®é¡ºåºæ ‡è¯†ï¼Œznodeåç§°åä¼šé™„åŠ ä¸€ä¸ªå€¼ï¼Œé¡ºåºå·æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢çš„è®¡æ•°å™¨ï¼Œç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤ï¼Œä¾‹å¦‚ï¼šZnode001ï¼ŒZnode002â€¦ æ³¨æ„ï¼šåºå·æ˜¯ç›¸å½“äºi++ï¼Œå’Œæ•°æ®åº“ä¸­çš„è‡ªå¢é•¿ç±»ä¼¼ 3.3 ç›‘å¬å™¨åŸç†ï¼ˆé¢è¯•é‡ç‚¹ï¼‰ åœ¨mainæ–¹æ³•ä¸­åˆ›å»ºZookeeperå®¢æˆ·ç«¯çš„åŒæ—¶å°±ä¼šåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè´Ÿè´£ç½‘ç»œè¿æ¥é€šä¿¡ï¼Œä¸€ä¸ªè´Ÿè´£ç›‘å¬ ç›‘å¬äº‹ä»¶å°±ä¼šé€šè¿‡ç½‘ç»œé€šä¿¡å‘é€ç»™zookeeper zookeeperè·å¾—æ³¨å†Œçš„ç›‘å¬äº‹ä»¶åï¼Œç«‹åˆ»å°†ç›‘å¬äº‹ä»¶æ·»åŠ åˆ°ç›‘å¬åˆ—è¡¨é‡Œ zookeeperç›‘å¬åˆ° æ•°æ®å˜åŒ– æˆ– è·¯å¾„å˜åŒ–ï¼Œå°±ä¼šå°†è¿™ä¸ªæ¶ˆæ¯å‘é€ç»™ç›‘å¬çº¿ç¨‹ ç›‘å¬èŠ‚ç‚¹æ•°æ®çš„å˜åŒ–ï¼šget path [watch] ç›‘å¬å­èŠ‚ç‚¹å¢å‡çš„å˜åŒ–ï¼šls path [watch] ç›‘å¬çº¿ç¨‹å°±ä¼šåœ¨å†…éƒ¨è°ƒç”¨processæ–¹æ³•ï¼ˆéœ€è¦æˆ‘ä»¬å®ç°processæ–¹æ³•å†…å®¹ï¼‰ 3.4 å†™æ•°æ®æµç¨‹ Client æƒ³å‘ ZooKeeper çš„ Server1 ä¸Šå†™æ•°æ®ï¼Œå¿…é¡»çš„å…ˆå‘é€ä¸€ä¸ªå†™çš„è¯·æ±‚ å¦‚æœServer1ä¸æ˜¯Leaderï¼Œé‚£ä¹ˆServer1 ä¼šæŠŠæ¥æ”¶åˆ°çš„è¯·æ±‚è¿›ä¸€æ­¥è½¬å‘ç»™Leaderã€‚ è¿™ä¸ªLeader ä¼šå°†å†™è¯·æ±‚å¹¿æ’­ç»™å„ä¸ªServerï¼Œå„ä¸ªServerå†™æˆåŠŸåå°±ä¼šé€šçŸ¥Leaderã€‚ å½“Leaderæ”¶åˆ°åŠæ•°ä»¥ä¸Šçš„ Server æ•°æ®å†™æˆåŠŸäº†ï¼Œé‚£ä¹ˆå°±è¯´æ˜æ•°æ®å†™æˆåŠŸäº†ã€‚ éšåï¼ŒLeaderä¼šå‘Šè¯‰Server1æ•°æ®å†™æˆåŠŸäº†ã€‚ Server1ä¼šåé¦ˆé€šçŸ¥ Client æ•°æ®å†™æˆåŠŸäº†ï¼Œæ•´ä¸ªæµç¨‹ç»“æŸ å››ã€Zookeeperå®æˆ˜ï¼ˆå¼€å‘é‡ç‚¹ï¼‰è¿™é‡Œæ˜¯ç”¨è™šæ‹Ÿæœºåšçš„æ¼”ç¤º 4.1 åˆ†å¸ƒå¼å®‰è£…éƒ¨ç½²é›†ç¾¤æ€è·¯ï¼šå…ˆæå®šä¸€å°æœåŠ¡å™¨ï¼Œå†å…‹éš†å‡ºä¸¤å°ï¼Œå½¢æˆé›†ç¾¤ï¼ 4.1.1 å®‰è£…zookeeperè¯·å‚è€ƒæœ¬æ–‡ 2.1 4.1.2 é…ç½®æœåŠ¡å™¨ç¼–å· åœ¨&#x2F;opt&#x2F;zookeeper&#x2F;zkDataåˆ›å»ºmyidæ–‡ä»¶ 1[root@localhost zkData]# vim myid åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸serverå¯¹åº”çš„ç¼–å·ï¼š1 å…¶ä½™ä¸¤å°æœåŠ¡å™¨åˆ†åˆ«å¯¹åº”2å’Œ3 4.1.3 é…ç½®zoo.cfgæ–‡ä»¶ æ‰“å¼€zoo.cfgæ–‡ä»¶ï¼Œå¢åŠ å¦‚ä¸‹é…ç½® 1234#######################cluster########################## server.1=192.168.204.141:2888:3888 server.2=192.168.204.142:2888:3888 server.3=192.168.204.143:2888:3888 é…ç½®å‚æ•°è§£è¯» server.A&#x3D;B:C:D Aï¼šä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ å·æœåŠ¡å™¨ é›†ç¾¤æ¨¡å¼ä¸‹é…ç½®çš„&#x2F;opt&#x2F;zookeeper&#x2F;zkData&#x2F;myidæ–‡ä»¶é‡Œé¢çš„æ•°æ®å°±æ˜¯Açš„å€¼ Bï¼šæœåŠ¡å™¨çš„ipåœ°å€ Cï¼šä¸é›†ç¾¤ä¸­LeaderæœåŠ¡å™¨äº¤æ¢ä¿¡æ¯çš„ç«¯å£ Dï¼šé€‰ä¸¾æ—¶ä¸“ç”¨ç«¯å£ï¼Œä¸‡ä¸€é›†ç¾¤ä¸­çš„LeaderæœåŠ¡å™¨æŒ‚äº†ï¼Œéœ€è¦ä¸€ä¸ªç«¯å£æ¥é‡æ–°è¿›è¡Œé€‰ä¸¾é€‰å‡ºä¸€ä¸ªæ–°çš„Leaderï¼Œè€Œè¿™ä¸ªç«¯å£å°±æ˜¯ç”¨æ¥æ‰§è¡Œé€‰ä¸¾æ—¶æœåŠ¡å™¨ç›¸äº’é€šä¿¡çš„ç«¯å£ã€‚ 4.1.4 é…ç½®å…¶ä½™ä¸¤å°æœåŠ¡å™¨ åœ¨è™šæ‹Ÿæœºæ•°æ®ç›®å½•vmsä¸‹ï¼Œåˆ›å»ºzk02 å°†æœ¬å°æœåŠ¡å™¨æ•°æ®ç›®å½•ä¸‹çš„.vmxæ–‡ä»¶å’Œæ‰€æœ‰çš„.vmdkæ–‡ä»¶åˆ†åˆ«æ‹·è´zk02ä¸‹ è™šæ‹Ÿæœº-&gt;æ–‡ä»¶-&gt;æ‰“å¼€ ï¼ˆé€‰æ‹©zk02ä¸‹çš„.vmxæ–‡ä»¶ï¼‰ å¼€å¯æ­¤è™šæ‹Ÿæœºï¼Œå¼¹å‡ºå¯¹è¯æ¡†ï¼Œé€‰æ‹©â€œæˆ‘å·²å¤åˆ¶è¯¥è™šæ‹Ÿæœºâ€ è¿›å…¥ç³»ç»Ÿåï¼Œä¿®æ”¹linuxä¸­çš„ipï¼Œä¿®æ”¹&#x2F;opt&#x2F;zookeeper&#x2F;zkData&#x2F;myidä¸­çš„æ•°å€¼ä¸º2 ç¬¬ä¸‰å°æœåŠ¡å™¨zk03,é‡å¤ä¸Šé¢çš„æ­¥éª¤ 4.1.5 é›†ç¾¤æ“ä½œ æ¯å°æœåŠ¡å™¨çš„é˜²ç«å¢™å¿…é¡»å…³é—­ 1[root@localhost bin]# systemctl stop firewalld.service å¯åŠ¨ç¬¬1å° 1[root@localhost bin]# ./zkServer.sh start æŸ¥çœ‹çŠ¶æ€ 1[root@localhost bin]# ./zkServer.sh status 1234ZooKeeper JMX enabled by default Using config: /opt/zookeeper/bin/../conf/zoo.cfg Client port found: 2181. Client address: localhost. Error contacting service. It is probably not running. æ³¨æ„ï¼šå› ä¸ºæ²¡æœ‰è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥é›†ç¾¤å¤±è´¥ ï¼ˆé˜²ç«å¢™æ²¡æœ‰å…³é—­ä¹Ÿä¼šå¯¼è‡´å¤±è´¥ï¼‰ å½“å¯åŠ¨ç¬¬2å°æœåŠ¡å™¨æ—¶ æŸ¥çœ‹ç¬¬1å°çš„çŠ¶æ€ï¼šMode: follower æŸ¥çœ‹ç¬¬2å°çš„çŠ¶æ€ï¼šMode: leader 4.2 å®¢æˆ·ç«¯å‘½ä»¤è¡Œæ“ä½œ å¯åŠ¨å®¢æˆ·ç«¯ 1[root@localhost bin]# ./zkCli.sh æ˜¾ç¤ºæ‰€æœ‰æ“ä½œå‘½ä»¤ 1help æŸ¥çœ‹å½“å‰znodeä¸­æ‰€åŒ…å«çš„å†…å®¹ 1ls / æŸ¥çœ‹å½“å‰èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯ zookeeperè€ç‰ˆæœ¬ä½¿ç”¨ ls2 &#x2F; ï¼Œç°åœ¨å·²ç»è¢«æ–°å‘½ä»¤æ›¿ä»£ 1ls -s / ä¿¡æ¯å­—æ®µ æ„æ€ cZxid åˆ›å»ºèŠ‚ç‚¹çš„äº‹åŠ¡:æ¯æ¬¡ä¿®æ”¹ZooKeeperçŠ¶æ€éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªzxidå½¢å¼çš„æ—¶é—´æˆ³ï¼Œä¹Ÿå°±æ˜¯ZooKeeperäº‹åŠ¡IDã€‚äº‹åŠ¡IDæ˜¯ZooKeeperä¸­æ‰€æœ‰ä¿®æ”¹æ€»çš„æ¬¡åºã€‚æ¯ä¸ªä¿®æ”¹éƒ½æœ‰å”¯ä¸€çš„zxidï¼Œå¦‚æœzxid1å°äºzxid2ï¼Œé‚£ä¹ˆzxid1åœ¨zxid2ä¹‹å‰å‘ç”Ÿã€‚ ctime è¢«åˆ›å»ºçš„æ¯«ç§’æ•°(ä»1970å¹´å¼€å§‹) mZxid æœ€åæ›´æ–°çš„äº‹åŠ¡zxid mtime æœ€åä¿®æ”¹çš„æ¯«ç§’æ•°(ä»1970å¹´å¼€å§‹) pZxid æœ€åæ›´æ–°çš„å­èŠ‚ç‚¹zxid cversion åˆ›å»ºç‰ˆæœ¬å·ï¼Œå­èŠ‚ç‚¹ä¿®æ”¹æ¬¡æ•° dataVersion æ•°æ®å˜åŒ–ç‰ˆæœ¬å· aclVersion æƒé™ç‰ˆæœ¬å· ephemeralOwner å¦‚æœæ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯znodeæ‹¥æœ‰è€…çš„session idã€‚å¦‚æœä¸æ˜¯ä¸´æ—¶èŠ‚ç‚¹åˆ™æ˜¯0ã€‚ dataLength æ•°æ®é•¿åº¦ numChildren å­èŠ‚ç‚¹æ•° åˆ†åˆ«åˆ›å»º2ä¸ªæ™®é€šèŠ‚ç‚¹ åœ¨æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸­å›½å’Œç¾å›½ä¸¤ä¸ªèŠ‚ç‚¹ 12create /china create /usa åœ¨æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¿„ç½—æ–¯èŠ‚ç‚¹ï¼Œå¹¶ä¿å­˜â€œæ™®äº¬â€æ•°æ®åˆ°èŠ‚ç‚¹ä¸Š 1create /ru &quot;pujing&quot; å¤šçº§åˆ›å»ºèŠ‚ç‚¹ åœ¨ä¸­å›½èŠ‚ç‚¹ä¸‹ï¼Œåˆ›å»ºæ­¦æ±‰â€ä¸‹é›¨â€ chinaå¿…é¡»æå‰åˆ›å»ºå¥½ï¼Œå¦åˆ™ä¼šæŠ¥é”™â€œèŠ‚ç‚¹ä¸å­˜åœ¨â€ 1create /china/wuhan &quot;ä¸‹é›¨&quot; è·å¾—èŠ‚ç‚¹çš„å€¼ 1get /china/wuhan åˆ›å»ºçŸ­æš‚èŠ‚ç‚¹ï¼šåˆ›å»ºæˆåŠŸä¹‹åï¼Œquité€€å‡ºå®¢æˆ·ç«¯ï¼Œé‡æ–°è¿æ¥ï¼ŒçŸ­æš‚çš„èŠ‚ç‚¹æ¶ˆå¤± 1234create -e /uk ls / quit ls / åˆ›å»ºå¸¦åºå·çš„èŠ‚ç‚¹ åˆ›å»ºå¸¦åºå·çš„èŠ‚ç‚¹ 123create -s /ru/city # æ‰§è¡Œä¸‰æ¬¡ls /ru[city0000000000, city0000000001, city0000000002] å¦‚æœåŸæ¥æ²¡æœ‰åºå·èŠ‚ç‚¹ï¼Œåºå·ä»0å¼€å§‹é€’å¢ã€‚ å¦‚æœåŸèŠ‚ç‚¹ä¸‹å·²æœ‰2ä¸ªèŠ‚ç‚¹ï¼Œåˆ™å†æ’åºæ—¶ä»2å¼€å§‹ï¼Œä»¥æ­¤ç±»æ¨ ä¿®æ”¹èŠ‚ç‚¹æ•°æ®å€¼ 1set /china/wuhan &quot;å¤ªé˜³&quot; ç›‘å¬ èŠ‚ç‚¹çš„å€¼å˜åŒ– æˆ– å­èŠ‚ç‚¹å˜åŒ–ï¼ˆè·¯å¾„å˜åŒ–ï¼‰ åœ¨server3ä¸»æœºä¸Šæ³¨å†Œç›‘å¬&#x2F;usaèŠ‚ç‚¹çš„æ•°æ®å˜åŒ– 1addWatch /usa åœ¨Server1ä¸»æœºä¸Šä¿®æ”¹&#x2F;usaçš„æ•°æ® 1set /usa &quot;telangpu&quot; Server3ä¼šç«‹åˆ»å“åº” WatchedEvent state:SyncConnected type:NodeDataChanged path:&#x2F;usa å¦‚æœåœ¨Server1çš„&#x2F;usaä¸‹é¢åˆ›å»ºå­èŠ‚ç‚¹NewYork 1create /usa/NewYork Server3ä¼šç«‹åˆ»å“åº” WatchedEvent state:SyncConnected type:NodeCreatedpath:&#x2F;usa&#x2F;NewYork åˆ é™¤èŠ‚ç‚¹ 1delete /usa/NewYork é€’å½’åˆ é™¤èŠ‚ç‚¹ ï¼ˆéç©ºèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸‹æœ‰å­èŠ‚ç‚¹ï¼‰ 1deleteall /ru ä¸ä»…åˆ é™¤&#x2F;ruï¼Œè€Œä¸”&#x2F;ruä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ä¹Ÿéšä¹‹åˆ é™¤ 4.3 APIåº”ç”¨4.3.1 IDEAç¯å¢ƒæ­å»º1) åˆ›å»ºä¸€ä¸ªMavenå·¥ç¨‹ 2) æ·»åŠ pomæ–‡ä»¶ 1234567891011121314151617&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j-core&lt;/artifactId&gt; &lt;version&gt;2.8.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;version&gt;3.6.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 3) åœ¨resourcesä¸‹åˆ›å»ºlog4j.properties 12345678log4j.rootLogger=INFO, stdout log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n log4j.appender.logfile=org.apache.log4j.FileAppender log4j.appender.logfile.File=target/zk.log log4j.appender.logfile.layout=org.apache.log4j.PatternLayout log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n 4.3.2 åˆ›å»ºZooKeeperå®¢æˆ·ç«¯12345678910111213141516171819public class TestZK &#123; // é›†ç¾¤ip private String connStr =&quot;192.168.249.81:2181,192.168.249.82:2181,192.168.249.83:2181&quot;; /* * sessionè¶…æ—¶ 60ç§’ï¼šä¸€å®šä¸èƒ½å¤ªå°‘ï¼Œå› ä¸ºè¿æ¥zookeeperå’ŒåŠ è½½é›†ç¾¤ç¯å¢ƒä¼šå› ä¸ºæ€§èƒ½åŸå› å»¶è¿Ÿç•¥é«˜ * å¦‚æœæ—¶é—´å¤ªå°‘ï¼Œè¿˜æ²¡æœ‰åˆ›å»ºå¥½å®¢æˆ·ç«¯ï¼Œå°±å¼€å§‹æ“ä½œèŠ‚ç‚¹ï¼Œä¼šæŠ¥é”™çš„ */ private int sessionTimeout = 60000; @Test public void init() throws IOException &#123; // åˆ›å»ºç›‘å¬å™¨ Watcher watcher = new Watcher() &#123; public void process(WatchedEvent watchedEvent) &#123; &#125; &#125;; // åˆ›å»ºzookeeperå®¢æˆ·ç«¯ ZooKeeper zk = new ZooKeeper(connStr, sessionTimeout, watcher); &#125;&#125; 4.3.3 åˆ›å»ºèŠ‚ç‚¹ä¸€ä¸ªACLå¯¹è±¡å°±æ˜¯ä¸€ä¸ªIdå’Œpermissionå¯¹ è¡¨ç¤ºå“ªä¸ª&#x2F;å“ªäº›èŒƒå›´çš„Idï¼ˆWhoï¼‰åœ¨é€šè¿‡äº†æ€æ ·çš„é‰´æƒï¼ˆHowï¼‰ä¹‹åï¼Œå°±å…è®¸è¿›è¡Œé‚£äº›æ“ä½œï¼ˆWhatï¼‰ï¼šWho How Whatï¼› permissionï¼ˆWhatï¼‰å°±æ˜¯ä¸€ä¸ªintè¡¨ç¤ºçš„ä½ç ï¼Œæ¯ä¸€ä½ä»£è¡¨ä¸€ä¸ªå¯¹åº”æ“ä½œçš„å…è®¸çŠ¶æ€ã€‚ ç±»ä¼¼linuxçš„æ–‡ä»¶æƒé™ï¼Œä¸åŒçš„æ˜¯å…±æœ‰5ç§æ“ä½œï¼šCREATEã€READã€WRITEã€DELETEã€ADMIN(å¯¹åº”æ›´æ”¹ACLçš„æƒé™) OPEN_ACL_UNSAFEï¼šåˆ›å»ºå¼€æ”¾èŠ‚ç‚¹ï¼Œå…è®¸ä»»æ„æ“ä½œ ï¼ˆç”¨çš„æœ€å°‘ï¼Œå…¶ä½™çš„æƒé™ç”¨çš„å¾ˆå°‘ï¼‰ READ_ACL_UNSAFEï¼šåˆ›å»ºåªè¯»èŠ‚ç‚¹ CREATOR_ALL_ACLï¼šåˆ›å»ºè€…æ‰æœ‰å…¨éƒ¨æƒé™ 1234567891011121314@Before public void init() throws IOException&#123; // çœç•¥...&#125;@Test public void createNode() throws Exception &#123; String nodeCreated = zKcli.create(&quot;/lagou&quot;, &quot;laosun&quot;.getBytes(), Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT); // å‚æ•°1ï¼šè¦åˆ›å»ºçš„èŠ‚ç‚¹çš„è·¯å¾„ // å‚æ•°2ï¼šèŠ‚ç‚¹æ•°æ® // å‚æ•°3ï¼šèŠ‚ç‚¹æƒé™ // å‚æ•°4ï¼šèŠ‚ç‚¹çš„ç±»å‹ System.out.println(&quot;nodeCreated = &quot; + nodeCreated);&#125; 4.3.4 æŸ¥è¯¢èŠ‚ç‚¹çš„å€¼1234567@Test public void find() throws Exception&#123; byte[] bs = zKcli.getData(&quot;/lagou&quot;, false, new Stat()); // è·¯å¾„ä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™ String data = new String(bs); System.out.println(&quot;æŸ¥è¯¢åˆ°æ•°æ®ï¼š&quot;+data);&#125; 4.3.5 ä¿®æ”¹èŠ‚ç‚¹çš„å€¼123456@Test public void update()throws Exception&#123; Stat stat = zKcli.setData(&quot;/lagou&quot;, &quot;laosunA&quot;.getBytes(), 0); //å…ˆæŸ¥çœ‹èŠ‚ç‚¹è¯¦ æƒ…ï¼Œè·å¾—dataVersion = 0 System.out.println(stat);&#125; 4.3.6 åˆ é™¤èŠ‚ç‚¹123456@Test public void delete() throws Exception &#123; zKcli.delete(&quot;/lagou&quot;, 1); // å…ˆæŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…ï¼Œè·å¾—dataVersion = 1 System.out.println(&quot;åˆ é™¤æˆåŠŸï¼&quot;);&#125; 4.3.7 è·å–å­èŠ‚ç‚¹12345678@Test public void getChildren() throws Exception &#123; List&lt;String&gt; children = zKcli.getChildren(&quot;/&quot;,false); // false:ä¸ç›‘å¬ for (String child : children) &#123; System.out.println(child); &#125;&#125; 4.3.8 ç›‘å¬å­èŠ‚ç‚¹çš„å˜åŒ–12345678910@Test public void getChildren() throws Exception &#123; List&lt;String&gt; children = zKcli.getChildren(&quot;/&quot;, true); // trueï¼šæ³¨å†Œç›‘å¬ for (String child : children) &#123; System.out.println(child); &#125; // è®©çº¿ç¨‹ä¸åœæ­¢ï¼Œç­‰å¾…ç›‘å¬çš„å“åº” System.in.read();&#125; ç¨‹åºåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨linuxä¸‹åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ IDEAçš„æ§åˆ¶å°å°±ä¼šåšå‡ºå“åº”ï¼šNodeChildrenChangedâ€“&#x2F; 4.3.9 åˆ¤æ–­Znodeæ˜¯å¦å­˜åœ¨12345@Test public void exist() throws Exception &#123; Stat stat = zKcli.exists(&quot;/lagou&quot;, false); System.out.println(stat == null ? &quot;ä¸å­˜åœ¨&quot; : &quot;å­˜åœ¨&quot;);&#125; 4.4 æ¡ˆä¾‹1ï¼šæ¨¡æ‹Ÿç¾å›¢å•†å®¶ä¸Šä¸‹çº¿4.4.1 éœ€æ±‚ æ¨¡æ‹Ÿç¾å›¢æœåŠ¡å¹³å°ï¼Œå•†å®¶è¥ä¸šé€šçŸ¥ï¼Œå•†å®¶æ‰“çƒŠé€šçŸ¥ æå‰åœ¨æ ¹èŠ‚ç‚¹ä¸‹ï¼Œåˆ›å»ºå¥½ &#x2F;meituan èŠ‚ç‚¹ 4.4.2 å•†å®¶æœåŠ¡ç±»123456789101112131415161718192021222324252627282930313233public class ShopServer &#123; private static String connectString = &quot;192.168.204.141:2181,192.168.204.142:2181,192.168.204.143:2181&quot;; private static int sessionTimeout = 60000; private ZooKeeper zk = null; // åˆ›å»ºåˆ°zkçš„å®¢æˆ·ç«¯è¿æ¥ public void getConnect() throws IOException &#123; zk = new ZooKeeper(connectString, sessionTimeout, new Watcher() &#123; public void process(WatchedEvent event) &#123; &#125; &#125; ); &#125; // æ³¨å†Œåˆ°é›†ç¾¤ public void register(String ShopName) throws Exception &#123; // ä¸€å®šæ˜¯&quot;EPHEMERAL_SEQUENTIALçŸ­æš‚æœ‰åºå‹&quot;çš„èŠ‚ç‚¹ï¼Œæ‰èƒ½ç»™shopç¼–å·ï¼Œshop1ï¼Œ shop2...â€ String create = zk.create(&quot;/meituan/Shop&quot;, ShopName.getBytes(), ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.EPHEMERAL_SEQUENTIAL); System.out.println(&quot;ã€&quot;+ShopName+&quot;ã€‘ å¼€å§‹è¥ä¸šï¼ &quot; + create); &#125; // ä¸šåŠ¡åŠŸèƒ½ public void business(String ShopName) throws Exception &#123; System.out.println(&quot;ã€&quot;+ShopName+&quot;ã€‘ æ­£åœ¨è¥ä¸šä¸­ ...&quot;); System.in.read(); &#125; public static void main(String[] args) throws Exception &#123; ShopServer shop = new ShopServer(); // 1.è¿æ¥zookeeperé›†ç¾¤ï¼ˆå’Œç¾å›¢å–å¾—è”ç³»ï¼‰ shop.getConnect(); // 2.å°†æœåŠ¡å™¨èŠ‚ç‚¹æ³¨å†Œï¼ˆå…¥ä½ç¾å›¢ï¼‰ shop.register(args[0]); // 3.ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼ˆåšç”Ÿæ„ï¼‰ shop.business(args[0]); &#125;&#125; 4.4.3 å®¢æˆ·ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public class Customers &#123; private static String connectString = &quot;192.168.204.141:2181,192.168.204.142:2181,192.168.204.143:2181&quot;; private static int sessionTimeout = 60000; private ZooKeeper zk = null; // åˆ›å»ºåˆ°zkçš„å®¢æˆ·ç«¯è¿æ¥ public void getConnect() throws IOException &#123; zk = new ZooKeeper(connectString, sessionTimeout, new Watcher() &#123; public void process(WatchedEvent event) &#123; // å†æ¬¡è·å–æ‰€æœ‰å•†å®¶ try &#123; getShopList(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; ); &#125; // è·å–æœåŠ¡å™¨åˆ—è¡¨ä¿¡æ¯ public void getShopList() throws Exception &#123; // 1è·å–æœåŠ¡å™¨å­èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¹¶ä¸”å¯¹çˆ¶èŠ‚ç‚¹è¿›è¡Œç›‘å¬ List&lt;String&gt; shops = zk.getChildren(&quot;/meituan&quot;, true); // 2å­˜å‚¨æœåŠ¡å™¨ä¿¡æ¯åˆ—è¡¨ ArrayList&lt;String&gt; shoplist = new ArrayList(); // 3éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œè·å–èŠ‚ç‚¹ä¸­çš„ä¸»æœºåç§°ä¿¡æ¯ for (String shop : shops) &#123; byte[] data = zk.getData(&quot;/meituan/&quot; + shop, false, new Stat()); shoplist.add(new String(data)); &#125; // 4æ‰“å°æœåŠ¡å™¨åˆ—è¡¨ä¿¡æ¯ System.out.println(shoplist); &#125; // ä¸šåŠ¡åŠŸèƒ½ public void business() throws Exception &#123; System.out.println(&quot;å®¢æˆ·æ­£åœ¨æµè§ˆå•†å®¶ ...&quot;); System.in.read(); &#125; public static void main(String[] args) throws Exception &#123; // 1.è·å–zkè¿æ¥ ï¼ˆå®¢æˆ·æ‰“å¼€ç¾å›¢ï¼‰ Customers client = new Customers(); client.getConnect(); // 2.è·å–/meituançš„å­èŠ‚ç‚¹ä¿¡æ¯ï¼Œä»ä¸­è·å–æœåŠ¡å™¨ä¿¡æ¯åˆ—è¡¨ï¼ˆä»ç¾å›¢ä¸­è·å–å•†å®¶åˆ—è¡¨ï¼‰ client.getShopList(); // 3.ä¸šåŠ¡è¿›ç¨‹å¯åŠ¨ ï¼ˆå¯¹æ¯”å•†å®¶ï¼Œç‚¹é¤ï¼‰ client.business(); &#125;&#125; 1ï¼‰è¿è¡Œå®¢æˆ·ç±»ï¼Œå°±ä¼šå¾—åˆ°å•†å®¶åˆ—è¡¨ 2ï¼‰é¦–å…ˆåœ¨linuxä¸­æ·»åŠ ä¸€ä¸ªå•†å®¶ï¼Œç„¶åè§‚å¯Ÿå®¢æˆ·ç«¯çš„æ§åˆ¶å°è¾“å‡ºï¼ˆå•†å®¶åˆ—è¡¨ä¼šç«‹åˆ»æ›´æ–°å‡ºæœ€æ–°å•†å®¶ï¼‰ï¼Œå¤šæ·»åŠ å‡ ä¸ªï¼Œä¹Ÿä¼šå®æ—¶è¾“å‡ºå•†å®¶åˆ—è¡¨ 123create /meituan/KFC &quot;KFC&quot; create /meituan/BKC &quot;BurgerKing&quot; create /meituan/baozi &quot;baozi&quot; 3ï¼‰åœ¨linuxä¸­åˆ é™¤å•†å®¶ï¼Œåœ¨å®¢æˆ·ç«¯çš„æ§åˆ¶å°ä¹Ÿä¼šå®æ—¶çœ‹åˆ°å•†å®¶ç§»é™¤åçš„æœ€æ–°å•†å®¶åˆ—è¡¨ 1delete /meituan/baozi 4ï¼‰è¿è¡Œå•†å®¶æœåŠ¡ç±»ï¼ˆä»¥mainæ–¹æ³•å¸¦å‚æ•°çš„å½¢å¼è¿è¡Œï¼‰ 4.5 æ¡ˆä¾‹2ï¼šåˆ†å¸ƒå¼é”-å•†å“ç§’æ€ é”ï¼šæˆ‘ä»¬åœ¨å¤šçº¿ç¨‹ä¸­æ¥è§¦è¿‡ï¼Œä½œç”¨å°±æ˜¯è®©å½“å‰çš„èµ„æºä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼ æˆ‘çš„æ—¥è®°æœ¬ï¼Œä¸å¯ä»¥è¢«åˆ«äººçœ‹åˆ°ã€‚æ‰€ä»¥è¦é”åœ¨ä¿é™©æŸœä¸­ å½“æˆ‘æ‰“å¼€é”ï¼Œå°†æ—¥è®°æœ¬æ‹¿èµ°äº†ï¼Œåˆ«äººæ‰èƒ½ä½¿ç”¨è¿™ä¸ªä¿é™©æŸœ åœ¨zookeeperä¸­ä½¿ç”¨ä¼ ç»Ÿçš„é”å¼•å‘çš„ â€œç¾Šç¾¤æ•ˆåº”â€ ï¼š1000ä¸ªäººåˆ›å»ºèŠ‚ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªäººèƒ½æˆåŠŸï¼Œ999äººéœ€è¦ç­‰å¾…ï¼ ç¾Šç¾¤æ˜¯ä¸€ç§å¾ˆæ•£ä¹±çš„ç»„ç»‡ï¼Œå¹³æ—¶åœ¨ä¸€èµ·ä¹Ÿæ˜¯ç›²ç›®åœ°å·¦å†²å³æ’ï¼Œä½†ä¸€æ—¦æœ‰ä¸€åªå¤´ç¾ŠåŠ¨èµ·æ¥ï¼Œå…¶ä»–çš„ç¾Šä¹Ÿä¼šä¸å‡æ€ç´¢åœ°ä¸€å“„è€Œä¸Šï¼Œå…¨ç„¶ä¸é¡¾æ—è¾¹å¯èƒ½æœ‰çš„ç‹¼å’Œä¸è¿œå¤„æ›´å¥½çš„è‰ã€‚ç¾Šç¾¤æ•ˆåº”å°±æ˜¯æ¯”å–»äººéƒ½æœ‰ä¸€ç§ä»ä¼—å¿ƒç†ï¼Œä»ä¼—å¿ƒç†å¾ˆå®¹æ˜“å¯¼è‡´ç›²ä»ï¼Œè€Œç›²ä»å¾€å¾€ä¼šé™·å…¥éª—å±€æˆ–é­åˆ°å¤±è´¥ã€‚ é¿å…â€œç¾Šç¾¤æ•ˆåº”â€ï¼Œzookeeperé‡‡ç”¨åˆ†å¸ƒå¼é” æ‰€æœ‰è¯·æ±‚è¿›æ¥ï¼Œåœ¨&#x2F;lockä¸‹åˆ›å»º ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ ï¼Œæ”¾å¿ƒï¼Œzookeeperä¼šå¸®ä½ ç¼–å·æ’åº åˆ¤æ–­è‡ªå·±æ˜¯ä¸æ˜¯&#x2F;lockä¸‹æœ€å°çš„èŠ‚ç‚¹ æ˜¯ï¼Œè·å¾—é”ï¼ˆåˆ›å»ºèŠ‚ç‚¹ï¼‰ å¦ï¼Œå¯¹å‰é¢å°æˆ‘ä¸€çº§çš„èŠ‚ç‚¹è¿›è¡Œç›‘å¬ è·å¾—é”è¯·æ±‚ï¼Œå¤„ç†å®Œä¸šåŠ¡é€»è¾‘ï¼Œé‡Šæ”¾é”ï¼ˆåˆ é™¤èŠ‚ç‚¹ï¼‰ï¼Œåä¸€ä¸ªèŠ‚ç‚¹å¾—åˆ°é€šçŸ¥ï¼ˆæ¯”ä½ å¹´è½»çš„æ­»äº†ï¼Œä½ æˆä¸ºæœ€å«©çš„äº†ï¼‰ é‡å¤æ­¥éª¤2 å®ç°æ­¥éª¤ 1ï¼‰åˆå§‹åŒ–æ•°æ®åº“åˆ›å»ºæ•°æ®åº“zkproductï¼Œä½¿ç”¨é»˜è®¤çš„å­—ç¬¦é›†utf8 12345678-- å•†å“è¡¨ create table product( id int primary key auto_increment, -- å•†å“ç¼–å· product_name varchar(20) not null, -- å•†å“åç§° stock int not null, -- åº“å­˜ version int not null -- ç‰ˆæœ¬ )insert into product (product_name,stock,version) values(&#x27;é”¦é²¤-æ¸…ç©ºè´­ç‰©è½¦-å¤§å¥–&#x27;,5,0) 123456-- è®¢å•è¡¨ create table `order`( id varchar(100) primary key, -- è®¢å•ç¼–å· pid int not null, -- å•†å“ç¼–å· userid int not null -- ç”¨æˆ·ç¼–å· ) 2ï¼‰æ­å»ºå·¥ç¨‹æ­å»ºssmæ¡†æ¶ï¼Œå¯¹åº“å­˜è¡¨-1ï¼Œå¯¹è®¢å•è¡¨+1 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;packaging&gt;war&lt;/packaging&gt;&lt;properties&gt; &lt;spring.version&gt;5.2.7.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;!-- Spring --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.5&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;2.0.5&lt;/version&gt; &lt;/dependency&gt; &lt;!-- è¿æ¥æ±  --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.10&lt;/version&gt; &lt;/dependency&gt; &lt;!-- æ•°æ®åº“ --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.20&lt;/version&gt; &lt;/dependency&gt; &lt;!-- junit --&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;!-- mavenå†…åµŒçš„tomcatæ’ä»¶ --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;!-- ç›®å‰apacheåªæä¾›äº†tomcat6å’Œtomcat7ä¸¤ä¸ªæ’ä»¶ --&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;port&gt;8001&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;!-- æ‰“åŒ…å®Œæˆå,è¿è¡ŒæœåŠ¡ --&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;run&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;!-- åå°çš„æ—¥å¿—è¾“å‡ºï¼šé’ˆå¯¹å¼€å‘è€…--&gt; &lt;settings&gt; &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt; &lt;/settings&gt;&lt;/configuration&gt; 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt; &lt;!-- 1.æ‰«æåŒ…ä¸‹çš„æ³¨è§£ --&gt; &lt;context:component-scan base-package=&quot;controller,service,mapper&quot;/&gt; &lt;!-- 2.åˆ›å»ºæ•°æ®è¿æ¥æ± å¯¹è±¡ --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; destroy-method=&quot;close&quot;&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://192.168.204.131:3306/zkproduct? serverTimezone=GMT&quot; /&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;123123&quot; /&gt; &lt;property name=&quot;maxActive&quot; value=&quot;10&quot; /&gt; &lt;property name=&quot;minIdle&quot; value=&quot;5&quot; /&gt; &lt;/bean&gt; &lt;!-- 3.åˆ›å»ºSqlSessionFactoryï¼Œå¹¶å¼•å…¥æ•°æ®æºå¯¹è±¡ --&gt; &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis/mybatis- config.xml&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- 4.å‘Šè¯‰springå®¹å™¨ï¼Œæ•°æ®åº“è¯­å¥ä»£ç åœ¨å“ªä¸ªæ–‡ä»¶ä¸­--&gt; &lt;!-- mapper.xDaoæ¥å£å¯¹åº”resources/mapper/xDao.xml--&gt; &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt; &lt;property name=&quot;basePackage&quot; value=&quot;mapper&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- 5.å°†æ•°æ®æºå…³è”åˆ°äº‹åŠ¡ --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- 6.å¼€å¯äº‹åŠ¡ --&gt; &lt;tx:annotation-driven/&gt;&lt;/beans&gt; 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; version=&quot;3.1&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;async-supported&gt;true&lt;/async-supported&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 1234567@Mapper @Component public interface OrderMapper &#123; // ç”Ÿæˆè®¢å• @Insert(&quot;insert into `order` (id,pid,userid) values (#&#123;id&#125;,#&#123;pid&#125;,# &#123;userid&#125;)&quot;) int insert(Order order); &#125; 12345678910@Mapper @Component public interface ProductMapper &#123; // æŸ¥è¯¢å•†å“ï¼ˆç›®çš„æŸ¥åº“å­˜ï¼‰ @Select(&quot;select * from product where id = #&#123;id&#125;&quot;) Product getProduct(@Param(&quot;id&quot;) int id); // å‡åº“å­˜ @Update(&quot;update product set stock = stock-1 where id = #&#123;id&#125;&quot;) int reduceStock(@Param(&quot;id&quot;) int id); &#125; 1234567891011121314151617181920212223@Service public class OrderServiceImpl implements OrderService &#123; @Autowired ProductMapper productMapper; @Autowired OrderMapper orderMapper; @Override public void reduceStock(int id) throws Exception &#123; // 1.è·å–åº“å­˜ Product product = productMapper.getProduct(id); // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ Thread.sleep(1000); if(product.getStock() &lt;= 0) throw new RuntimeException(&quot;å·²æŠ¢å…‰ï¼&quot;); // 2.å‡åº“å­˜ int i = productMapper.reduceStock(id); if(i == 1)&#123; Order order = new Order(); order.setId(UUID.randomUUID().toString()); order.setPid(id); order.setUserid(101); orderMapper.insert(order); &#125; elsethrow new RuntimeException(&quot;å‡åº“å­˜å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&quot;); &#125;&#125; 12345678910@Controller public class ProductAction &#123; @Autowired private OrderService orderService; @GetMapping(&quot;/product/reduce&quot;) @ResponseBody public Object reduceStock(int id) throws Exception&#123; orderService.reduceStock(id); return &quot;ok&quot;; &#125; &#125; 3ï¼‰å¯åŠ¨æµ‹è¯• å¯åŠ¨ä¸¤æ¬¡å·¥ç¨‹ï¼Œç«¯å£å·åˆ†åˆ«8001å’Œ8002 ä½¿ç”¨nginxåšè´Ÿè½½å‡è¡¡ 12345678910111213upstream sga&#123; server 192.168.204.1:8001; server 192.168.204.1:8002; &#125;server &#123; listen 80; server_name localhost; location / &#123; proxy_pass http://sga; root html; index index.html index.htm; &#125;&#125; ä½¿ç”¨ JMeter æ¨¡æ‹Ÿ1ç§’å†…å‘å‡º10ä¸ªhttpè¯·æ±‚ ä¸‹è½½åœ°å€ï¼šhttp://jmeter.apache.org/download_jmeter.cgi æŸ¥çœ‹æµ‹è¯•ç»“æœï¼Œ10æ¬¡è¯·æ±‚å…¨éƒ¨æˆåŠŸ æŸ¥çœ‹æ•°æ®åº“ï¼Œstockåº“å­˜å˜æˆ -5 ï¼ˆå¹¶å‘å¯¼è‡´çš„æ•°æ®ç»“æœé”™è¯¯ï¼‰ 4ï¼‰apahceæä¾›çš„zookeeperå®¢æˆ·ç«¯åŸºäºzookeeperåŸç”Ÿæ€çš„å®¢æˆ·ç«¯ç±»å®ç°åˆ†å¸ƒå¼æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨apahceæä¾›äº†ä¸€ä¸ªzookeeperå®¢æˆ·ç«¯æ¥å®ç° Curatorï¼šhttp://curator.apache.org/ 12345&lt;dependency&gt; &lt;groupId&gt;org.apache.curator&lt;/groupId&gt; &lt;artifactId&gt;curator-recipes&lt;/artifactId&gt; &lt;version&gt;4.2.0&lt;/version&gt; &lt;!-- ç½‘å‹æŠ•ç¥¨æœ€ç‰›é€¼ç‰ˆæœ¬ --&gt; &lt;/dependency&gt; recipesæ˜¯curatoræ—è°±å¤§å…¨ï¼Œé‡Œé¢åŒ…å«zookeeperå’Œframework 5ï¼‰åœ¨æ§åˆ¶å±‚ä¸­åŠ å…¥åˆ†å¸ƒå¼é”çš„é€»è¾‘ä»£ç 1234567891011121314151617181920212223242526272829303132@Controller public class ProductAction &#123; @Autowired private ProductService productService; private static String connectString = &quot;192.168.204.141:2181,192.168.204.142:2181,192.168.204.143:2181&quot;; @GetMapping(&quot;/product/reduce&quot;) @ResponseBody public Object reduce( int id) throws Exception &#123; // é‡è¯•ç­–ç•¥ ï¼ˆ1000æ¯«ç§’è¯•1æ¬¡ï¼Œæœ€å¤šè¯•3æ¬¡ï¼‰ RetryPolicy retryPolicy = new ExponentialBackoffRetry(1000, 3); //1.åˆ›å»ºcuratorå·¥å…·å¯¹è±¡ CuratorFramework client = CuratorFrameworkFactory.newClient(connectString, retryPolicy); client.start(); //2.æ ¹æ®å·¥å…·å¯¹è±¡åˆ›å»ºâ€œå†…éƒ¨äº’æ–¥é”â€ InterProcessMutex lock = new InterProcessMutex(client, &quot;/product_&quot;+id); try &#123; //3.åŠ é” lock.acquire(); productService.reduceStock(id); &#125; catch(Exception e)&#123; if(e instanceof RuntimeException)&#123; throw e; &#125; &#125; finally&#123; //4.é‡Šæ”¾é” lock.release(); &#125; return &quot;ok&quot;; &#125;&#125; 6ï¼‰å†æ¬¡æµ‹è¯•ï¼Œå¹¶å‘é—®é¢˜è§£å†³ï¼","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Dubboè¯¦è§£","slug":"Dubboè¯¦è§£","date":"2021-05-23T07:58:17.000Z","updated":"2025-04-17T08:34:51.958Z","comments":true,"path":"2021/05/23/Dubboè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2021/05/23/Dubbo%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"ä¸€ã€Dubboæ¦‚è¿°1.1 ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ ã€Šåˆ†å¸ƒå¼ç³»ç»ŸåŸç†ä¸èŒƒå‹ã€‹å®šä¹‰ï¼š â€œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œè¿™äº›è®¡ç®—æœºå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒå•ä¸ªç›¸å…³ç³»ç»Ÿâ€ åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆdistributed systemï¼‰æ˜¯å»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿã€‚ ç®€å•æ¥è¯´ï¼šå¤šä¸ªï¼ˆä¸åŒèŒè´£ï¼‰äººå…±åŒæ¥å®Œæˆä¸€ä»¶äº‹ï¼ ä»»ä½•ä¸€å°æœåŠ¡å™¨éƒ½æ— æ³•æ»¡è¶³æ·˜å®çš„åŒåä¸€çš„æ•°æ®ååé‡ï¼Œä¸€å®šæ˜¯å¾ˆå¤šå°æœåŠ¡å™¨å…¬å…±æ¥å®Œæˆçš„ã€‚ æ­‡åè¯­ï¼šâ€œä¸‰ä¸ªè‡­çš®åŒ èµ›è¿‡è¯¸è‘›äº®â€ï¼Œå°±æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„çœŸå®å†™ç…§ 1.1.1 å•ä¸€åº”ç”¨æ¶æ„ å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€è¦ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰çš„åŠŸèƒ½éƒ¨ç½²åˆ°ä¸€èµ·ï¼ˆæ‰€æœ‰ä¸šåŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªtomcaté‡Œï¼‰ï¼Œä»è€Œå‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ï¼› æ­¤æ—¶ï¼Œç”¨äºç®€åŒ– å¢åˆ æ”¹æŸ¥ å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æ¶ ï¼ˆORMï¼‰æ˜¯å…³é”®ï¼› ä¾‹å¦‚ï¼šæŸä¸ªè¶…å¸‚çš„æ”¶é“¶ç³»ç»Ÿï¼ŒæŸä¸ªå…¬å¸çš„å‘˜å·¥ç®¡ç†ç³»ç»Ÿ ORMï¼šå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆObject Relational Mappingï¼‰ ä¼˜ç‚¹ å°é¡¹ç›®å¼€å‘å¿« æˆæœ¬ä½ æ¶æ„ç®€å• æ˜“äºæµ‹è¯• æ˜“äºéƒ¨ç½² ç¼ºç‚¹ å¤§é¡¹ç›®æ¨¡å—è€¦åˆä¸¥é‡ ä¸æ˜“å¼€å‘ ç»´æŠ¤ æ²Ÿé€šæˆæœ¬é«˜ æ–°å¢ä¸šåŠ¡å›°éš¾ æ ¸å¿ƒä¸šåŠ¡ä¸è¾¹ç¼˜ä¸šåŠ¡æ··åˆåœ¨ä¸€å—ï¼Œå‡ºç°é—®é¢˜äº’ç›¸å½±å“ 1.1.2 å‚ç›´åº”ç”¨æ¶æ„ å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆå‡ ä¸ªäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨,ä»¥æé«˜æ•ˆç‡ï¼› å¤§æ¨¡å—æŒ‰ç…§mvcåˆ†å±‚æ¨¡å¼ï¼Œè¿›è¡Œæ‹†åˆ†æˆå¤šä¸ªäº’ä¸ç›¸å…³çš„å°æ¨¡å—ï¼Œå¹¶ä¸”æ¯ä¸ªå°æ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„æœåŠ¡å™¨ æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„webæ¡†æ¶ï¼ˆMVCï¼‰æ˜¯å…³é”®ï¼›å› ä¸ºæ¯ä¸ªå°åº”ç”¨éƒ½æœ‰ç‹¬ç«‹çš„é¡µé¢ MVCï¼šæ¨¡å‹è§†å›¾æ§åˆ¶å™¨ ï¼ˆModel View Controllerï¼‰ ç¼ºç‚¹ï¼š æ¨¡å—ä¹‹é—´ä¸å¯èƒ½å®Œå…¨æ²¡æœ‰äº¤é›†ï¼Œå…¬ç”¨æ¨¡å—æ— æ³•é‡å¤åˆ©ç”¨ï¼Œå¼€å‘æ€§çš„æµªè´¹ 1.1.3 åˆ†å¸ƒå¼æœåŠ¡æ¶æ„ å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„ä¸šåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å¥çš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ï¼› æ­¤æ—¶ï¼Œç”¨æˆ·æé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼ˆRPCï¼‰è¿œç¨‹è°ƒç”¨æ˜¯å…³é”®ï¼› RPCï¼šç‹¬ç«‹çš„åº”ç”¨æœåŠ¡å™¨ä¹‹é—´ï¼Œè¦ä¾é RPCï¼ˆRomote Procedure Callï¼‰æ‰èƒ½è°ƒç”¨ ç‰©æµæœåŠ¡ä¸å¿™ï¼Œæœ‰100å°æœåŠ¡å™¨ï¼› å•†å“æœåŠ¡ç‰¹åˆ«å¿™ï¼Œä¹Ÿæ˜¯100å°æœåŠ¡å™¨ï¼› å¦‚ä½•åšåˆ°èµ„æºä¼˜åŒ–è°ƒé…ï¼Ÿâ†“ 1.1.4 æµåŠ¨è®¡ç®—æ¶æ„ å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸å‘ˆç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ï¼› æ­¤æ—¶ï¼Œç”¨äºæé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒï¼ˆSOAï¼‰æ˜¯å…³é”®ï¼› SOAï¼šé¢å‘æœåŠ¡æ¶æ„ï¼ˆService-Oriented Architectureï¼‰ï¼Œç®€å•ç†è§£å°±æ˜¯â€œæœåŠ¡æ²»ç†â€ï¼Œä¾‹å¦‚ï¼šå…¬äº¤è½¦ç«™çš„â€œè°ƒåº¦å‘˜â€ 1.2 Dubboç®€ä»‹ Dubboæ˜¯åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºé¡¹ç›®ï¼Œç°äº¤ç»™apacheè¿›è¡Œç»´æŠ¤ Dubboè‡´åŠ›äºæé«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆ ç®€å•æ¥è¯´ï¼Œdubboæ˜¯ä¸ªæœåŠ¡æ¡†æ¶ï¼Œå¦‚æœæ²¡æœ‰åˆ†å¸ƒå¼çš„éœ€æ±‚ï¼Œæ˜¯ä¸éœ€è¦ç”¨çš„ 1.2.1 RPC RPCã€Remote Procedure Callã€‘æ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ RPCåŸºæœ¬çš„é€šä¿¡åŸç† åœ¨å®¢æˆ·ç«¯å°†å¯¹è±¡è¿›è¡Œåºåˆ—åŒ– åº•å±‚é€šä¿¡æ¡†æ¶ä½¿ç”¨nettyï¼ˆåŸºäºtcpåè®®çš„socketï¼‰ï¼Œå°†åºåˆ—åŒ–çš„å¯¹è±¡å‘ç»™æœåŠ¡æ–¹æä¾›æ–¹ æœåŠ¡æä¾›æ–¹é€šè¿‡socketå¾—åˆ°æ•°æ®æ–‡ä»¶ä¹‹åï¼Œè¿›è¡Œååºåˆ—åŒ–ï¼Œè·å¾—è¦æ“ä½œçš„å¯¹è±¡ å¯¹è±¡æ•°æ®æ“ä½œå®Œæ¯•ï¼Œå°†æ–°çš„å¯¹è±¡åºåˆ—åŒ–ï¼Œå†é€šè¿‡æœåŠ¡æä¾›æ–¹çš„socketè¿”å›ç»™å®¢æˆ·ç«¯ å®¢æˆ·ç«¯è·å¾—åºåˆ—åŒ–æ•°æ®ï¼Œå†ååºåˆ—åŒ–ï¼Œå¾—åˆ°æœ€æ–°çš„æ•°æ®å¯¹è±¡ï¼Œè‡³æ­¤ï¼Œå®Œæˆä¸€æ¬¡è¯·æ±‚ RPCä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šé€šè®¯ï¼ˆsocketï¼‰ï¼Œåºåˆ—åŒ–ã€‚ 1.2.2 èŠ‚ç‚¹è§’è‰² èŠ‚ç‚¹ è§’è‰²è¯´æ˜ Provider æœåŠ¡çš„æä¾›æ–¹ï¼ˆæ´—æµ´ä¸­å¿ƒï¼‰ Consumer æœåŠ¡çš„æ¶ˆè´¹æ–¹ï¼ˆå®¢äººï¼‰ Registry æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒï¼ˆä¾¿æ°‘æœåŠ¡ä¸­å¿ƒï¼Œæ‰€æœ‰çš„é¥­åº—å¨±ä¹åœºæ‰€éƒ½åœ¨å·²åœ¨æœ¬ä¸­å¿ƒæ³¨å†Œï¼‰ Monitor ç›‘æ§æœåŠ¡çš„ç»Ÿè®¡ä¸­å¿ƒï¼ˆç»Ÿè®¡æœåŠ¡è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼‰ Container æœåŠ¡è¿è¡Œå®¹å™¨ï¼ˆçƒ§çƒ¤ä¸€æ¡è¡—ï¼Œæ´—æµ´ä¸€æ¡è¡—ï¼‰ 1.2.3 è°ƒç”¨å…³ç³» æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ï¼› æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ï¼› æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼› åœ¨æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ï¼› æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ï¼› æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒï¼› äºŒã€å¿«é€Ÿå…¥é—¨http://dubbo.apache.org/ 2.1 æ³¨å†Œä¸­å¿ƒ2.1.1 Zookeeper å®˜æ–¹æ¨èä½¿ç”¨zookeeperæ³¨å†Œä¸­å¿ƒï¼› æ³¨å†Œä¸­å¿ƒè´Ÿè´£æœåŠ¡åœ°å€çš„æ³¨å†Œä¸æŸ¥æ‰¾ï¼Œç›¸å½“äºç›®å½•æœåŠ¡ï¼› æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…åªåœ¨å¯åŠ¨æ—¶ä¸æ³¨å†Œä¸­å¿ƒäº¤äº’ï¼Œæ³¨å†Œä¸­ä¸è½¬å‘è¯·æ±‚ï¼Œå‹åŠ›è¾ƒå°ï¼› Zookeeperæ˜¯apache hadoopçš„å­é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªæ ‘å½¢çš„ç›®å½•æœåŠ¡ï¼Œæ”¯æŒå˜æ›´æ¨é€ï¼Œé€‚åˆä½œä¸ºdubboçš„æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œå·¥ä¸šå¼ºåº¦è¾ƒé«˜ï¼Œå¯ç”¨äºç”Ÿäº§ç¯å¢ƒï¼› dubboå³æ˜¯æ±‚èŒçš„äººï¼Œä¹Ÿæ˜¯æ‹›è˜å•ä½ï¼Œè€Œzookeeperå°±æ˜¯äººæ‰å¸‚åœºæ‹›è˜ç½‘ç«™ï¼› 2.1.2 å®‰è£…ç‚¹ä¸‹è¯•è¯• 2.2 æœåŠ¡æä¾›æ–¹ ä¸€ä¸ªç©ºçš„mavené¡¹ç›® æä¾›ä¸€ä¸ªæœåŠ¡æ¥å£å³å¯ 2.2.1 æœåŠ¡æ–¹çš„pom.xmlå„ç§ä¾èµ–è¯·ä¸¥æ ¼æŒ‰ç…§ä¸‹é¢çš„ç‰ˆæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;packaging&gt;war&lt;/packaging&gt;&lt;properties&gt; &lt;spring.version&gt;5.0.6.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!--dubbo --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;dubbo&lt;/artifactId&gt; &lt;version&gt;2.5.7&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;version&gt;3.4.6&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt; &lt;artifactId&gt;zkclient&lt;/artifactId&gt; &lt;version&gt;0.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javassist&lt;/groupId&gt; &lt;artifactId&gt;javassist&lt;/artifactId&gt; &lt;version&gt;3.11.0.GA&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven &lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;port&gt;8001&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;!-- æ‰“åŒ…å®Œæˆå,è¿è¡ŒæœåŠ¡ --&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;run&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 2.2.2 æœåŠ¡æ–¹æ¥å£123public interface HelloService &#123; String sayHello(String name); &#125; 2.2.3 æœåŠ¡æ–¹å®ç°1234567@com.alibaba.dubbo.config.annotation.Service public class HelloServiceImpl implements HelloService &#123; @Override public String sayHello(String name) &#123; return &quot;Hello,&quot; + name + &quot;!!!&quot;; &#125; &#125; 2.2.4 æœåŠ¡æ–¹çš„é…ç½®æ–‡ä»¶spring.xml123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;&gt; &lt;!--1.æœåŠ¡æä¾›æ–¹åœ¨zookeeperä¸­çš„â€œåˆ«åâ€--&gt; &lt;dubbo:application name=&quot;dubbo-server&quot;/&gt; &lt;!--2.æ³¨å†Œä¸­å¿ƒçš„åœ°å€--&gt; &lt;dubbo:registry address=&quot;zookeeper://192.168.204.141:2181&quot;/&gt; &lt;!--3.æ‰«æç±»ï¼ˆå°†ä»€ä¹ˆåŒ…ä¸‹çš„ç±»ä½œä¸ºæœåŠ¡æä¾›ç±»ï¼‰--&gt; &lt;dubbo:annotation package=&quot;service.impl&quot;/&gt;&lt;/beans&gt; 2.2.5 æœåŠ¡æ–¹çš„web.xml12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt; &lt;listener&gt; &lt;listener- class&gt;org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt; &lt;/listener&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring.xml&lt;/param-value&gt; &lt;/context-param&gt;&lt;/web-app&gt; 2.3 æœåŠ¡æ¶ˆè´¹æ–¹2.3.1 æ¶ˆè´¹æ–¹çš„pom.xmlä¸æœåŠ¡æ–¹ä¸€è‡´ï¼Œåªéœ€è¦ä¿®æ”¹tomcatçš„ç«¯å£ä¸º8002 2.3.2 æ¶ˆè´¹æ–¹çš„Controller12345678910@RestController public class HelloAction &#123; @com.alibaba.dubbo.config.annotation.Reference private HelloService hs; @RequestMapping(&quot;hello&quot;) @ResponseBody public String hello( String name)&#123; return hs.sayHello(name); &#125;&#125; 2.3.3 æ¶ˆè´¹æ–¹çš„æ¥å£æ³¨æ„ï¼šcontrollerä¸­è¦ä¾èµ–HelloServiceï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å£ï¼›è¿™é‡Œæ˜¯æ¶ˆè´¹æ–¹ï¼Œä¸éœ€è¦å®ç°ï¼Œå› ä¸ºå®ç°ä¼šè®©æœåŠ¡æ–¹æå®šï¼ 123public interface HelloService &#123; String sayHello(String name); &#125; 2.3.4 æ¶ˆè´¹æ–¹çš„web.xml1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 2.3.5 æ¶ˆè´¹æ–¹çš„springmvc.xml12345678910111213141516&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;&gt; &lt;!--Dubboçš„åº”ç”¨åç§°ï¼Œé€šå¸¸ä½¿ç”¨é¡¹ç›®å --&gt; &lt;dubbo:application name=&quot;dubbo-consumer&quot; /&gt; &lt;!--é…ç½®Dubboçš„æ³¨å†Œä¸­å¿ƒåœ°å€ --&gt; &lt;dubbo:registry address=&quot;zookeeper://192.168.204.141:2181&quot; /&gt; &lt;!--é…ç½®Dubboæ‰«æç±»ï¼Œå°†è¿™ä¸ªç±»ä½œä¸ºæœåŠ¡è¿›è¡Œå‘å¸ƒ --&gt; &lt;dubbo:annotation package=&quot;controller&quot; /&gt;&lt;/beans&gt; 2.4 å¯åŠ¨æœåŠ¡æµ‹è¯•é¦–å…ˆå¯åŠ¨æœåŠ¡æ–¹ï¼Œå†å¯åŠ¨æ¶ˆè´¹æ–¹ã€‚ è®¿é—®ï¼šhttp://localhost:8002/hello?name=james ä¸‰ã€ç›‘æ§ä¸­å¿ƒæˆ‘ä»¬åœ¨å¼€å‘æ—¶ï¼Œéœ€è¦çŸ¥é“æ³¨å†Œä¸­å¿ƒéƒ½æ³¨å†Œäº†å“ªäº›æœåŠ¡ï¼Œä»¥ä¾¿æˆ‘ä»¬å¼€å‘å’Œæµ‹è¯•ã€‚å›¾å½¢åŒ–æ˜¾ç¤ºæ³¨å†Œä¸­å¿ƒçš„ä¸­ æœåŠ¡åˆ—è¡¨æˆ‘ä»¬å¯ä»¥é€šè¿‡éƒ¨ç½²ä¸€ä¸ªwebåº”ç”¨ç‰ˆçš„ç®¡ç†ä¸­å¿ƒæ¥å®ç°ã€‚ 3.1 æœåŠ¡ç®¡ç†ç«¯3.1.1 å®‰è£…ç®¡ç†ç«¯ è§£å‹ dubbo-admin-master.zip ä¿®æ”¹é…ç½®æ–‡ä»¶ è¿”å›åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œä½¿ç”¨mavenæ‰“åŒ…ï¼šmvn clean package åœ¨dosä¸‹è¿è¡Œtargetç›®å½•ä¸­çš„jaræ–‡ä»¶ï¼šjava -jar dubbo-admin-0.0.1-SNAPSHOT.jar æ­¤æ—¶æ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:7001/ ï¼› ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œéœ€è¦ç™»å½•ï¼Œå¸å·å¯†ç éƒ½æ˜¯root 3.1.2 ç®¡ç†ç«¯ä½¿ç”¨ å¯åŠ¨æœåŠ¡æ–¹ï¼Œå°†æœåŠ¡æ³¨å†Œåˆ°zookeeper å¯åŠ¨dubbo-serveræœåŠ¡æ–¹åï¼Œåˆ·æ–°ç®¡ç†ç«¯ï¼ŒæœåŠ¡æ³¨å†ŒæˆåŠŸï¼Œåªæ˜¯æ²¡æœ‰æ¶ˆè´¹è€… ç‚¹å‡»æœåŠ¡åï¼Œè¿›å…¥æœåŠ¡æä¾›è€…é¡µé¢ æŠŠæ¶ˆè´¹è€…ä¹Ÿè¿è¡Œèµ·æ¥ï¼Œåˆ·æ–°æœåŠ¡ï¼Œæ˜¾ç¤ºæ­£å¸¸ æŸ¥çœ‹æ¶ˆè´¹è€… 3.2 ç›‘æ§ç»Ÿè®¡ä¸­å¿ƒMonitorï¼šç»Ÿè®¡ä¸­å¿ƒ ï¼Œè®°å½•æœåŠ¡è¢«è°ƒç”¨å¤šå°‘æ¬¡ç­‰ è§£å‹dubbo-monitor-simple-2.5.3.zip ä¿®æ”¹dubbo-monitor-simple-2.5.3\\conf\\dubbo.properties åŒå‡»è¿è¡Œdubbo-monitor-simple-2.5.3\\bin\\start.bat åˆ†åˆ«ä¿®æ”¹dubbo-serverå’Œdubbo-consumerçš„spring.xmlï¼ŒåŠ å…¥ä¸‹é¢æ ‡ç­¾ 12&lt;!-- è®©ç›‘æ§ å»æ³¨å†Œä¸­å¿ƒ è‡ªåŠ¨æ‰¾æœåŠ¡ --&gt; &lt;dubbo:monitor protocol=&quot;registry&quot;/&gt; å››ã€ç»¼åˆå®æˆ˜4.1 é…ç½®è¯´æ˜4.1.1 å¯åŠ¨æ—¶æ£€æŸ¥ å¯åŠ¨æ—¶ä¼šåœ¨æ³¨å†Œä¸­å¿ƒæ£€æŸ¥ä¾èµ–çš„æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œä¸å¯ç”¨æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ åœ¨æ¶ˆè´¹æ–¹ç¼–å†™åˆå§‹åŒ–å®¹å™¨çš„mainæ–¹æ³•å¯åŠ¨ï¼ˆtomcatå¯åŠ¨æ–¹å¼ï¼Œå¿…é¡»è®¿é—®ä¸€æ¬¡actionæ‰èƒ½åˆå§‹åŒ–springï¼‰ 123456public class Test &#123; public static void main(String[] args) throws IOException &#123; ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;classpath:spring/spring.xml&quot;); System.in.read(); &#125;&#125; 12&lt;!--é»˜è®¤æ˜¯true:æŠ›å¼‚å¸¸ï¼›false:ä¸æŠ›å¼‚å¸¸--&gt; &lt;dubbo:consumer check=&quot;false&quot; /&gt; ç³»ç»Ÿçº§åˆ«æ—¥å¿—ï¼Œéœ€è¦é…åˆlog4jæ‰è¾“å‡ºï¼Œåœ¨resourcesä¸‹æ·»åŠ log4j.propertiesï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567891011log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.Target=System.outlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %m%nlog4j.appender.file=org.apache.log4j.FileAppenderlog4j.appender.file.File=dubbo.log log4j.appender.file.layout=org.apache.log4j.PatternLayout log4j.appender.file.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %l %m%n log4j.rootLogger=error, stdout,file 4.1.2 è¶…æ—¶æ—¶é—´ ç”±äºç½‘ç»œæˆ–æœåŠ¡ç«¯ä¸å¯é ï¼Œä¼šå¯¼è‡´è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°ä¸ç¡®å®šçš„é˜»å¡çŠ¶æ€ï¼ˆè¶…æ—¶ï¼‰ ä¸ºäº†é¿å…è¶…æ—¶å¯¼è‡´å®¢æˆ·ç«¯èµ„æºï¼ˆçº¿ç¨‹ï¼‰æŒ‚èµ·è€—å°½ï¼Œå¿…é¡»è®¾ç½®è¶…æ—¶æ—¶é—´ åœ¨æœåŠ¡æä¾›è€…æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 12&lt;!--è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º2ç§’ï¼Œé»˜è®¤ä¸º1ç§’--&gt; &lt;dubbo:provider timeout=&quot;2000&quot;/&gt; å¯ä»¥å°†æœåŠ¡å®ç°HelloServiceImpl.javaä¸­åŠ å…¥æ¨¡æ‹Ÿçš„ç½‘ç»œå»¶è¿Ÿè¿›è¡Œæµ‹è¯•ï¼š 123456789101112@Service public class HelloServiceImpl implements HelloService &#123; public String sayHello(String name) &#123; try &#123; Thread.sleep(3000); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; return &quot;Hello,&quot;+name+&quot;!!!!!&quot;; &#125;&#125; è¶…æ—¶è®¾ç½®2ç§’ï¼Œè€Œæ¨¡æ‹Ÿçš„ç½‘ç»œå»¶è¿Ÿæœ‰3ç§’ï¼Œè¶…å‡ºæ—¶é™ï¼ŒæŠ¥é”™ï¼ é…ç½®åŸåˆ™ï¼š dubboæ¨èåœ¨Providerä¸Šå°½é‡å¤šé…ç½®Consumerç«¯å±æ€§ï¼š ä½œæœåŠ¡çš„æä¾›è€…ï¼Œæ¯”æœåŠ¡ä½¿ç”¨æ–¹æ›´æ¸…æ¥šæœåŠ¡æ€§èƒ½å‚æ•°ï¼Œå¦‚è°ƒç”¨çš„è¶…æ—¶æ—¶é—´ï¼Œåˆç†çš„é‡è¯•æ¬¡æ•°ï¼Œç­‰ç­‰ åœ¨Provideré…ç½®åï¼ŒConsumerä¸é…ç½®åˆ™ä¼šä½¿ç”¨Providerçš„é…ç½®å€¼ï¼Œå³Provideré…ç½®å¯ä»¥ä½œæ¶ˆè´¹è€…çš„ç¼ºçœå€¼ã€‚ 4.1.3 é‡è¯•æ¬¡æ•° å½“å‡ºç°å¤±è´¥ï¼Œè‡ªåŠ¨åˆ‡æ¢å¹¶é‡è¯•å…¶å®ƒæœåŠ¡å™¨ï¼Œdubboé‡è¯•çš„ç¼ºçœå€¼æ˜¯2æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œè®¾ç½® åœ¨provideræä¾›æ–¹é…ç½®ï¼š 12&lt;!-- æ¶ˆè´¹æ–¹è¿æ¥ç¬¬1æ¬¡ä¸ç®—ï¼Œå†æ¥é‡è¯•3æ¬¡ï¼Œæ€»å…±é‡è¯•4æ¬¡ --&gt; &lt;dubbo:provider timeout=&quot;2000&quot; retries=&quot;3&quot;/&gt; 12345678910111213@Service public class HelloServiceImpl implements HelloService &#123; public String sayHello(String name) &#123; System.out.println(&quot;=============è¢«è°ƒç”¨ 1 æ¬¡===============&quot;); try &#123; Thread.sleep(3000); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; return &quot;Hello,&quot;+name+&quot;!!!!!&quot;; &#125;&#125; å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–¹æ³•éƒ½é€‚åˆè®¾ç½®é‡è¯•æ¬¡æ•° å¹‚ç­‰æ–¹æ³•ï¼šé€‚åˆï¼ˆå½“å‚æ•°ä¸€æ ·ï¼Œæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¾‹å¦‚ï¼šæŸ¥è¯¢ï¼Œä¿®æ”¹ï¼‰ éå¹‚ç­‰æ–¹æ³•ï¼šä¸é€‚åˆï¼ˆå½“å‚æ•°ä¸€æ ·ï¼Œæ‰§è¡Œç»“æœä¸ä¸€æ ·ï¼Œä¾‹å¦‚ï¼šåˆ é™¤ï¼Œæ·»åŠ ï¼‰ å•ç‹¬è®¾ç½®æŸä¸ªæ–¹æ³• æä¾›æ–¹æ¥å£æ·»åŠ sayNo()æ–¹æ³•å¹¶å®ç° 1234public interface HelloService &#123; String sayHello( String name ); String sayNo(); &#125; 1234567891011121314151617@Service public class HelloServiceImpl implements HelloService &#123; public String sayHello(String name) &#123; System.out.println(&quot;=============helloè¢«è°ƒç”¨ä¸€æ¬¡ ===============&quot;); try &#123; Thread.sleep(3000); &#125; catch (Exception e)&#123; e.printStackTrace(); &#125; return &quot;Hello,&quot;+name+&quot;!!!!!&quot;; &#125; public String sayNo() &#123; System.out.println(&quot;-------noè¢«è°ƒç”¨ä¸€æ¬¡-------&quot;); return &quot;no!&quot;; &#125;&#125; æ¶ˆè´¹æ–¹æ¥å£æ·»åŠ sayNo()æ–¹æ³•å£°æ˜ 1234public interface HelloService &#123; String sayHello( String name ); String sayNo(); &#125; æ¶ˆè´¹æ–¹controller 1234567891011121314@Controller public class HelloAction &#123; //@Reference æ­¤æ³¨è§£å·²ç»åœ¨xmlæ–‡ä»¶ä¸­è¢«&lt;dubbo:reference&gt;é¡¶æ›¿ï¼Œæ‰€ä»¥è‡ªåŠ¨æ³¨å…¥ å³å¯ @Autowired private HelloService helloService; @GetMapping(&quot;hello&quot;) @ResponseBody public String sayHi(String name)&#123; return helloService.sayHello(name); &#125; @GetMapping(&quot;no&quot;) @ResponseBody public String no()&#123; return helloService.sayNo(); &#125;&#125; æ¶ˆè´¹æ–¹é…ç½®æ–¹æ³•é‡è¯•æ¬¡æ•° 12345&lt;dubbo:reference interface=&quot;service.HelloService&quot; id=&quot;helloService&quot;&gt; &lt;dubbo:method name=&quot;sayHello&quot; retries=&quot;3&quot;/&gt; &lt;dubbo:method name=&quot;sayNo&quot; retries=&quot;0&quot;/&gt; &lt;!-- ä¸é‡è¯• --&gt;&lt;/dubbo:reference&gt; 4.1.4 å¤šç‰ˆæœ¬ ä¸€ä¸ªæ¥å£ï¼Œå¤šä¸ªï¼ˆç‰ˆæœ¬çš„ï¼‰å®ç°ç±»ï¼Œå¯ä»¥ä½¿ç”¨å®šä¹‰ç‰ˆæœ¬çš„æ–¹å¼å¼•å…¥ ä¸ºHelloServiceæ¥å£å®šä¹‰ä¸¤ä¸ªå®ç°ç±»ï¼Œæä¾›è€…ä¿®æ”¹é…ç½®ï¼š 12&lt;dubbo:service interface=&quot;service.HelloService&quot; class=&quot;service.impl.HelloServiceImpl01&quot; version=&quot;1.0.0&quot;/&gt;&lt;dubbo:service interface=&quot;service.HelloService&quot; class=&quot;service.impl.HelloServiceImpl02&quot; version=&quot;2.0.0&quot;/&gt; æ³¨æ„ï¼šæ¶ˆè´¹è€…çš„æ§åˆ¶å±‚è¦æ”¹ä¸ºè‡ªåŠ¨æ³¨å…¥ï¼Œå› ä¸º@Referenceæ³¨è§£å’Œ &lt;dubbo:reference&gt;åœ¨è¿™é‡Œå†²çª 12345@Controller public class HelloAction &#123; @Autowired private HelloService helloService; &#125; å½“æ¶ˆè´¹è€…çš„ç‰ˆæœ¬ä¿®æ”¹ä¸º version&#x3D;â€*â€œï¼Œé‚£ä¹ˆå°±ä¼šéšæœºè°ƒç”¨æœåŠ¡æä¾›è€…çš„ç‰ˆæœ¬ 123456-------1.0è¢«è°ƒç”¨ä¸€æ¬¡------- -------2.0è¢«è°ƒç”¨ä¸€æ¬¡------- -------1.0è¢«è°ƒç”¨ä¸€æ¬¡------- -------1.0è¢«è°ƒç”¨ä¸€æ¬¡------- -------1.0è¢«è°ƒç”¨ä¸€æ¬¡------- -------2.0è¢«è°ƒç”¨ä¸€æ¬¡------- 4.1.5 æœ¬åœ°å­˜æ ¹ ç›®å‰æˆ‘ä»¬çš„åˆ†å¸ƒå¼æ¶æ„æ­å»ºèµ·æ¥æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯æ‰€æœ‰çš„æ“ä½œå…¨éƒ½æ˜¯ æ¶ˆè´¹è€…å‘èµ·ï¼Œç”±æœåŠ¡æä¾›è€…æ‰§è¡Œ æ¶ˆè´¹è€…åŠ¨åŠ¨å˜´çš®å­å´ä»€ä¹ˆæ´»éƒ½ä¸å¹²ï¼Œè¿™æ ·ä¼šè®©æä¾›è€…å¾ˆç´¯ï¼Œä¾‹å¦‚ç®€å•çš„å‚æ•°éªŒè¯ï¼Œæ¶ˆè´¹è€…å®Œå…¨èƒ½å¤Ÿèƒœä»»ï¼ŒæŠŠåˆæ³•çš„å‚æ•°å†å‘é€ç»™æä¾›è€…æ‰§è¡Œï¼Œæ•ˆç‡é«˜äº†ï¼Œæä¾›è€…ä¹Ÿæ²¡é‚£ä¹ˆç´¯äº† ä¾‹å¦‚ï¼šå»æˆ¿äº§å±€åŠç†æˆ¿å±‹è¿‡æˆ·ï¼Œè¯·å¸¦å¥½è‡ªå·±çš„è¯ä»¶å’Œèµ„æ–™ï¼Œå¦‚æœä»€ä¹ˆéƒ½ä¸å¸¦ï¼Œé‚£ä¹ˆåŠç†è¿‡æˆ·æ‰‹ç»­ä¼šå¾ˆéº»çƒ¦ï¼Œå¾—å…ˆè°ƒæŸ¥ä½ æœ‰ä»€ä¹ˆè´·æ¬¾ï¼Œæœ‰æ²¡æœ‰æŠµæŠ¼ï¼Œä¸åŠ¨äº§è¯æ˜¯ä¸æ˜¯ä½ æœ¬äººï¼Œå¤å°èµ„æ–™ç­‰æ“ä½œã€‚ä¸€å¤©è‚¯å®šåŠä¸å®Œã€‚æ˜å¤©è¿˜è¦æ¥ã€‚å¦‚æœä½ èƒ½æå‰å°†è¿™äº›ä¸œè¥¿å‡†å¤‡å¥½ï¼ŒåŠç†è¿‡æˆ·ï¼Œ1ä¸ªå°æ—¶è¶³çŸ£ï¼Œè¿™å°±æ˜¯â€œæˆ¿äº§ä¸­ä»‹åŠäº‹æ•ˆç‡é«˜çš„åŸå› â€ è¯ä¸å¤šè¯´ï¼Œå…ˆåœ¨æ¶ˆè´¹è€…å¤„ç†ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œå†è°ƒç”¨æä¾›è€…çš„è¿‡ç¨‹ï¼Œå°±æ˜¯â€œæœ¬åœ°å­˜æ ¹â€ ä»£ç å®ç°è‚¯å®šåœ¨ æ¶ˆè´¹è€…ï¼Œåˆ›å»ºä¸€ä¸ªHelloServiceStubç±»å¹¶ä¸”å®ç°HelloServiceæ¥å£ æ³¨æ„ï¼šå¿…é¡»ä½¿ç”¨æ„é€ æ–¹æ³•çš„æ–¹å¼æ³¨å…¥ 1234567891011121314151617public class HelloServiceStub implements HelloService &#123; private HelloService helloService; // æ³¨å…¥HelloService public HelloServiceStub(HelloService helloService) &#123; this.helloService = helloService; &#125; public String sayHello(String name) &#123; System.out.println(&quot;æœ¬åœ°å­˜æ ¹æ•°æ®éªŒè¯ã€‚ã€‚ã€‚&quot;); if(!StringUtils.isEmpty(name))&#123; return helloService.sayHello(name); &#125; return &quot;i am sorry!&quot;; &#125; public String sayNo() &#123; return helloService.sayNo(); &#125;&#125; ä¿®æ”¹æ¶ˆè´¹è€…é…ç½®ï¼š 1234&lt;dubbo:reference interface=&quot;service.HelloService&quot; id=&quot;helloService&quot; version=&quot;1.0.0&quot; stub=&quot;service.impl.HelloServiceStub&quot;&gt; &lt;dubbo:method name=&quot;sayHello&quot; retries=&quot;3&quot;/&gt; &lt;dubbo:method name=&quot;sayNo&quot; retries=&quot;0&quot;/&gt;&lt;/dubbo:reference&gt; 4.2 è´Ÿè½½å‡è¡¡ç­–ç•¥ è´Ÿè½½å‡è¡¡ï¼ˆLoad Balanceï¼‰, å…¶å®å°±æ˜¯å°†è¯·æ±‚åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œä»è€Œå…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚ ç®€å•çš„è¯´ï¼Œå¥½å¤šå°æœåŠ¡å™¨ï¼Œä¸èƒ½æ€»æ˜¯è®©ä¸€å°æœåŠ¡å™¨å¹²æ´»ï¼Œåº”è¯¥â€œé›¨éœ²å‡æ²¾â€ dubboä¸€å…±æä¾›4ç§ç­–ç•¥ï¼Œç¼ºçœä¸º random éšæœºåˆ†é…è°ƒç”¨ ä¿®æ”¹æä¾›è€…é…ç½®å¹¶å¯åŠ¨3ä¸ªæä¾›è€…ï¼Œè®©æ¶ˆè´¹è€…å¯¹å…¶è¿›è¡Œè®¿é—® tomcatç«¯å£8001ï¼Œ8002ï¼Œ8003 providerç«¯å£20881ï¼Œ20882ï¼Œ20883 1&lt;dubbo:provider timeout=&quot;2000&quot; retries=&quot;3&quot; port=&quot;20881&quot;/&gt; HelloServiceImpl01ç±»ï¼ŒæœåŠ¡å™¨1ï¼ŒæœåŠ¡å™¨2ï¼ŒæœåŠ¡å™¨3 1234public String sayNo() &#123; System.out.println(&quot;----æœåŠ¡å™¨1---1.0è¢«è°ƒç”¨ä¸€æ¬¡-------&quot;); return &quot;no!&quot;;&#125; å¯åŠ¨consumerè¿›è¡Œæµ‹è¯• æ¶ˆè´¹æ–¹ä¿®æ”¹æƒé‡ 1234&lt;dubbo:reference loadbalance=&quot;roundrobin&quot; interface=&quot;service.HelloService&quot; id=&quot;helloService&quot; version=&quot;2.0.0&quot; stub=&quot;stub.HelloServiceStub&quot;&gt; &lt;dubbo:method name=&quot;sayHello&quot; retries=&quot;3&quot;/&gt; &lt;dubbo:method name=&quot;sayNo&quot; retries=&quot;0&quot;/&gt;&lt;/dubbo:reference&gt; æœ€å¥½ä½¿ç”¨ç®¡ç†ç«¯ä¿®æ”¹æƒé‡ 4.3 é«˜å¯ç”¨4.3.1 zookeeperå®•æœº zookeeperæ³¨å†Œä¸­å¿ƒå®•æœºï¼Œè¿˜å¯ä»¥æ¶ˆè´¹dubboæš´éœ²çš„æœåŠ¡ ç›‘æ§ä¸­å¿ƒå®•æ‰ä¸å½±å“ä½¿ç”¨ï¼Œåªæ˜¯ä¸¢å¤±éƒ¨åˆ†é‡‡æ ·æ•°æ®â€™] æ•°æ®åº“å®•æ‰åï¼Œæ³¨å†Œä¸­å¿ƒä»èƒ½é€šè¿‡ç¼“å­˜æä¾›æœåŠ¡åˆ—è¡¨æŸ¥è¯¢ï¼Œä½†ä¸èƒ½æ³¨å†Œæ–°æœåŠ¡ æ³¨å†Œä¸­å¿ƒå¯¹ç­‰é›†ç¾¤ï¼Œä»»æ„ä¸€å°å®•æ‰åï¼Œå°†è‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€å° æ³¨å†Œä¸­å¿ƒå…¨éƒ¨å®•æ‰åï¼ŒæœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ä»èƒ½é€šè¿‡æœ¬åœ°ç¼“å­˜é€šè®¯ æœåŠ¡æä¾›è€…æ— çŠ¶æ€ï¼Œä»»æ„ä¸€å°å®•æ‰åï¼Œä¸å½±å“ä½¿ç”¨ æœåŠ¡æä¾›è€…å…¨éƒ¨å®•æ‰åï¼ŒæœåŠ¡æ¶ˆè´¹è€…åº”ç”¨å°†æ— æ³•ä½¿ç”¨ï¼Œå¹¶æ— é™æ¬¡é‡è¿ç­‰å¾…æœåŠ¡æä¾›è€…æ¢å¤ æµ‹è¯•ï¼š æ­£å¸¸å‘å‡ºè¯·æ±‚â€™ å…³é—­zookeeperï¼š.&#x2F;zkServer.sh stop æ¶ˆè´¹è€…ä»ç„¶å¯ä»¥æ­£å¸¸æ¶ˆè´¹ 4.4 æœåŠ¡é™çº§ å£è™é‡åˆ°å±é™©ä¼šè‡ªåŠ¨è„±è½å°¾å·´ï¼Œç›®çš„æ˜¯æŸå¤±ä¸é‡è¦çš„ä¸œè¥¿ï¼Œä¿ä½é‡è¦çš„ æœåŠ¡é™çº§ï¼Œå°±æ˜¯æ ¹æ®å®é™…çš„æƒ…å†µå’Œæµé‡ï¼Œå¯¹ä¸€äº›æœåŠ¡æœ‰ç­–ç•¥çš„åœæ­¢æˆ–æ¢ç§ç®€å•çš„æ–¹å¼å¤„ç†ï¼Œä»è€Œé‡Šæ”¾æœåŠ¡å™¨çš„èµ„æºæ¥ä¿è¯æ ¸å¿ƒä¸šåŠ¡çš„æ­£å¸¸è¿è¡Œ 4.4.1 ä¸ºä»€ä¹ˆè¦æœåŠ¡é™çº§ è€Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æœåŠ¡é™çº§ï¼Œè¿™æ˜¯é˜²æ­¢åˆ†å¸ƒå¼æœåŠ¡å‘ç”Ÿé›ªå´©æ•ˆåº” ä»€ä¹ˆæ˜¯é›ªå´©ï¼Ÿå°±æ˜¯è´è¶æ•ˆåº”ï¼Œå½“ä¸€ä¸ªè¯·æ±‚å‘ç”Ÿè¶…æ—¶ï¼Œä¸€ç›´ç­‰å¾…ç€æœåŠ¡å“åº”ï¼Œé‚£ä¹ˆåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ï¼Œå¾ˆå¤šè¯·æ±‚éƒ½æ˜¯å› ä¸ºè¿™æ ·ä¸€ç›´ç­‰ç€å“åº”ï¼Œç›´åˆ°æœåŠ¡èµ„æºè€—å°½äº§ç”Ÿå®•æœºï¼Œè€Œå®•æœºä¹‹åä¼šå¯¼è‡´åˆ†å¸ƒå¼å…¶ä»–æœåŠ¡è°ƒç”¨è¯¥å®•æœºçš„æœåŠ¡ä¹Ÿä¼šå‡ºç°èµ„æºè€—å°½å®•æœºï¼Œè¿™æ ·ä¸‹å»å°†å¯¼è‡´æ•´ä¸ªåˆ†å¸ƒå¼æœåŠ¡éƒ½ç˜«ç—ªï¼Œè¿™å°±æ˜¯é›ªå´©ã€‚ 4.4.2 æœåŠ¡é™çº§å®ç°æ–¹å¼ åœ¨ ç®¡ç†æ§åˆ¶å°é…ç½®æœåŠ¡é™çº§ï¼šå±è”½å’Œå®¹é”™ å±è”½ï¼šmock&#x3D;force:return+null è¡¨ç¤ºæ¶ˆè´¹æ–¹å¯¹è¯¥æœåŠ¡çš„æ–¹æ³•è°ƒç”¨éƒ½ ç›´æ¥è¿”å› null å€¼ï¼Œä¸å‘èµ·è¿œç¨‹è°ƒç”¨ã€‚ç”¨æ¥å±è”½ä¸é‡è¦æœåŠ¡ä¸å¯ç”¨æ—¶å¯¹è°ƒç”¨æ–¹çš„å½±å“ã€‚ å®¹é”™ï¼šmock&#x3D;fail:return+null è¡¨ç¤ºæ¶ˆè´¹æ–¹å¯¹è¯¥æœåŠ¡çš„æ–¹æ³•è°ƒç”¨åœ¨ å¤±è´¥åï¼Œå†è¿”å› null å€¼ï¼Œä¸æŠ›å¼‚å¸¸ã€‚ç”¨æ¥å®¹å¿ä¸é‡è¦æœåŠ¡ä¸ç¨³å®šæ—¶å¯¹è°ƒç”¨æ–¹çš„å½±å“ã€‚ 4.5 æ•´åˆMyBatiså®ç°ç”¨æˆ·æ³¨å†Œ4.5.1 åˆå§‹åŒ–æ•°æ®åº“123456789CREATE DATABASE smd USE smd CREATE TABLE users( uid INT(11) AUTO_INCREMENT PRIMARY KEY, username VARCHAR(50) NOT NULL, PASSWORD VARCHAR(50) NOT NULL, phone VARCHAR(50) NOT NULL, createtime VARCHAR(50) NOT NULL ) 4.5.2 åˆ›å»ºèšåˆé¡¹ç›®-é¡¹ç›®æ¨¡å—åŒ– lagou-dubboï¼ˆé¡¹ç›®ç›®å½•ï¼‰ lagou-dubbo-parentï¼ˆçˆ¶å·¥ç¨‹ï¼Œèšåˆé¡¹ç›®ï¼šå®šä¹‰æ‰€æœ‰æ¨¡å—ç”¨çš„ä¾èµ–ç‰ˆæœ¬ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;groupId&gt;com.sunguoan&lt;/groupId&gt;&lt;artifactId&gt;sun-parent&lt;/artifactId&gt;&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;packaging&gt;pom&lt;/packaging&gt;&lt;properties&gt; &lt;spring.version&gt;5.0.6.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;!-- JSPç›¸å…³ --&gt; &lt;dependency&gt; &lt;groupId&gt;jstl&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;version&gt;2.0&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Spring --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.2.8&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.2.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- è¿æ¥æ±  --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.0.9&lt;/version&gt; &lt;/dependency&gt; &lt;!-- æ•°æ®åº“ --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.32&lt;/version&gt; &lt;/dependency&gt; &lt;!--dubbo --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;dubbo&lt;/artifactId&gt; &lt;version&gt;2.5.7&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt; &lt;artifactId&gt;zookeeper&lt;/artifactId&gt; &lt;version&gt;3.4.6&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.github.sgroschupf&lt;/groupId&gt; &lt;artifactId&gt;zkclient&lt;/artifactId&gt; &lt;version&gt;0.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javassist&lt;/groupId&gt; &lt;artifactId&gt;javassist&lt;/artifactId&gt; &lt;version&gt;3.11.0.GA&lt;/version&gt; &lt;/dependency&gt; &lt;!-- fastjson --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.47&lt;/version&gt; &lt;/dependency&gt; &lt;!-- junit --&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; lagou-dubbo-entityï¼ˆå®ä½“å·¥ç¨‹ï¼Œjaré¡¹ç›®ï¼‰ lagou-dubbo-daoï¼ˆæ•°æ®è®¿é—®å±‚å·¥ç¨‹ï¼Œjaré¡¹ç›®ï¼‰ lagou-dubbo-interfaceï¼ˆæœåŠ¡æ¥å£å®šä¹‰å·¥ç¨‹ï¼Œjaré¡¹ç›®ï¼‰ lagou-dubbo-serviceï¼ˆprivoderæœåŠ¡æä¾›è€…å·¥ç¨‹ï¼Œjaré¡¹ç›®ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;parent&gt; &lt;groupId&gt;com.sunguoan&lt;/groupId&gt; &lt;artifactId&gt;sun-parent&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;/parent&gt;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;artifactId&gt;sun-service&lt;/artifactId&gt;&lt;packaging&gt;war&lt;/packaging&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.sunguoan&lt;/groupId&gt; &lt;artifactId&gt;sun-interface&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.sunguoan&lt;/groupId&gt; &lt;artifactId&gt;sun-dao&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt; &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;port&gt;8001&lt;/port&gt; &lt;path&gt;/&lt;/path&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;!-- æ‰“åŒ…å®Œæˆå,è¿è¡ŒæœåŠ¡ --&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;run&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; lagou-dubbo-webï¼ˆconsumeræœåŠ¡æ¶ˆè´¹è€…å·¥ç¨‹ï¼Œwaré¡¹ç›®ï¼‰ 12345678910111213141516171819202122232425262728293031&lt;!-- è§£å†³postä¹±ç  --&gt;&lt;filter&gt; &lt;filter-name&gt;charset&lt;/filter-name&gt; &lt;filter- class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;charset&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;&lt;servlet&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring/spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; 4.5.3 å¯åŠ¨æµ‹è¯• å…ˆé€‰æ‹©çˆ¶é¡¹ç›®ï¼ˆèšåˆå·¥ç¨‹ï¼‰è¿›è¡Œå…¨å‘˜å®‰è£…æˆjar å¯åŠ¨æœåŠ¡service å¯åŠ¨è°ƒç”¨è€…web","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°å­¦é—®é¢˜ï¼š412.Fizz Buzz","slug":"Fizz-Buzz","date":"2021-05-22T03:18:18.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2021/05/22/Fizz-Buzz/","link":"","permalink":"http://yournotes.cn/2021/05/22/Fizz-Buzz/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/fizz-buzz/ å†™ä¸€ä¸ªç¨‹åºï¼Œè¾“å‡ºä» 1 åˆ° n æ•°å­—çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ å¦‚æœ n æ˜¯3çš„å€æ•°ï¼Œè¾“å‡ºâ€œFizzâ€ï¼› å¦‚æœ n æ˜¯5çš„å€æ•°ï¼Œè¾“å‡ºâ€œBuzzâ€ï¼› å¦‚æœ n åŒæ—¶æ˜¯3å’Œ5çš„å€æ•°ï¼Œè¾“å‡º â€œFizzBuzzâ€ã€‚ ç¤ºä¾‹ï¼š 1234567891011121314151617181920n = 15,è¿”å›:[ &quot;1&quot;, &quot;2&quot;, &quot;Fizz&quot;, &quot;4&quot;, &quot;Buzz&quot;, &quot;Fizz&quot;, &quot;7&quot;, &quot;8&quot;, &quot;Fizz&quot;, &quot;Buzz&quot;, &quot;11&quot;, &quot;Fizz&quot;, &quot;13&quot;, &quot;14&quot;, &quot;FizzBuzz&quot;] é¢˜è§£ä¸€è¿™ä¸ªé¢˜è§£çš„è¯ç›´æ¥æŒ‰ç…§æ„æ€æ¥å°±å¯ä»¥äº† 123456789101112131415public List&lt;String&gt; fizzBuzz(int n) &#123; List&lt;String&gt; res = new ArrayList(); for (int i = 1; i &lt;= n; i++)&#123; if(i%3==0 &amp;&amp; i%5==0)&#123; res.add(&quot;FizzBuzz&quot;); &#125; else if(i%3==0)&#123; res.add(&quot;Fizz&quot;); &#125; else if(i%5==0)&#123; res.add(&quot;Buzz&quot;); &#125; else&#123; res.add(String.valueOf(i)); &#125; &#125; return res;&#125; é¢˜è§£äºŒè¿™é¢˜è§£é¢˜ç¡®å®æ˜¯ç®€å•ï¼Œä½†é¢˜å¯èƒ½æ˜¯å¸Œæœ›è€ƒè™‘åˆ°ä»£ç çš„é»æ€§å‡å°‘ä»£ç é‡å¤é™ä½è€¦åˆï¼Œæ‰€ä»¥å®˜æ–¹è§£é¢˜ä¹Ÿä¸¾äº†ä¾‹å­ï¼ˆå‡è®¾é¢˜ç›®æ¡ä»¶ä¸ä»…ä»…ä¸¤ä¸ªï¼‰ã€‚è¿™è¾¹ä¹Ÿå†™ä¸€ä¸‹å§ï¼Œå°±æ˜¯è¯´æœ‰å‡ ç§æƒ…å†µå°±æˆ‘ä»¬å°±è‡ªå·±æ‰‹åŠ¨ç»„åˆååˆ—ä¸¾ï¼Œä»£ç é‡å°±ä¼šå¤§å…¨éƒ½æ˜¯ifç¤ºä¾‹ 123456789101112131415161718192021222324/* * å‡è®¾æœ‰ä¸‰ä¸ªæ¡ä»¶äº† * i = 3 Three * i = 5 Five * i = 7 Seven * é‚£ä¹ˆä¼šç»„åˆå‡º8ç§åˆ†æ”¯ */if(i%3==0 &amp;&amp; i%5==0 &amp;&amp; i%7==0)&#123; res.add(&quot;ThreeFiveSeven&quot;);&#125; else if(i%3==0 &amp;&amp; i%5==0)&#123; res.add(&quot;ThreeFive&quot;);&#125; else if(i%3==0 &amp;&amp; i%7==0)&#123; res.add(&quot;ThreeSeven&quot;);&#125; else if(i%5==0 &amp;&amp; i%7==0)&#123; res.add(&quot;FiveSeven&quot;);&#125; else if(i%3==0)&#123; res.add(&quot;Three&quot;);&#125; else if(i%5==0)&#123; res.add(&quot;Five&quot;);&#125; else if(i%7==0)&#123; res.add(Seven);&#125; else &#123; res.add(String.valueOf(i));&#125; å¦‚æœæ›´å¤šä¸€ç‚¹ï¼Œé‚£è¿™ä¸ªifåˆ†æ”¯å°±å¤ªå¤§é‡äº†ã€‚å…¶å®å¾ˆç®€å•æˆ‘ä»¬å¹³æ—¶å†™ä»£ç å³ä½¿æˆ‘ä»¬ä¸å¤ªæ³¨é‡è¿™ä¸ªéšæ„çš„å»å†™ï¼Œä¹Ÿä¸ä¼šåƒä¸Šé¢è¿™æ ·å†™ã€‚ä¸¾ä¸ªä¾‹å­ï¼šç¤ºä¾‹ 1234567891011/* * strå¼€å¤´è‹¥æ˜¯&#x27;a&#x27; æ‰§è¡Œaæ–¹æ³• * strç»“å°¾è‹¥æ˜¯&#x27;b&#x27; æ‰§è¡Œbæ–¹æ³• * å’Œé¢˜ç›®ä¸€æ ·ä¸¤ä¸ªéƒ½æ»¡è¶³å½“ç„¶æ˜¯éƒ½è¦æ‰§è¡Œçš„ */if(str.charAt(0) == &#x27;a&#x27;)&#123; a();&#125;if(str.charAt(length-1) == &#x27;b&#x27;)&#123; b();&#125; ä¸€èˆ¬ä¼šåƒä¸Šé¢è¿™æ ·ä¸¤ä¸ªå•ifï¼Œè€Œä¸æ˜¯å¦‚ä¸‹ï¼š 12345678if(str.charAt(0) == &#x27;a&#x27; &amp;&amp; str.charAt(length-1) == &#x27;b&#x27;)&#123; a(); b();&#125; else if(str.charAt(0) == &#x27;a&#x27;)&#123; a();&#125; else if(str.charAt(length-1) == &#x27;b&#x27;)&#123; b();&#125; æ‰€ä»¥è¿™é¢˜ä¹Ÿæ˜¯ä¸€æ · 1234567891011121314151617public List&lt;String&gt; fizzBuzz(int n) &#123; List&lt;String&gt; res = new ArrayList(); for (int i = 1; i &lt;= n; i++)&#123; String str = &quot;&quot;; if (i%3 == 0) &#123; str += &quot;Fizz&quot;; &#125; if (i%5 == 0) &#123; str += &quot;Buzz&quot;; &#125; if (str.equals(&quot;&quot;)) &#123; str += String.valueOf(i); &#125; res.add(str); &#125; return res;&#125; é¢˜è§£ä¸‰åƒé¢˜è§£äºŒæˆ‘ä»¬ä½¿ç”¨å•ifä¹‹åï¼Œä¸å»æ‰‹åŠ¨ç»„åˆã€‚åˆ†æ”¯æ•°é‡ä¼šä¸‹é™ï¼Œå¹¶ä¸”ç»“æ„æ›´æ¸…æ™°ï¼ˆé¿å…åµŒå¥—æˆ–è€…å¤šåˆ†æ”¯ï¼‰ï¼Œè™½ç„¶å€ç‡ä¸‹é™ä½†è¿˜æ˜¯ä¼šéšç€æ¡ä»¶çš„å¢å¤šè€Œå¢å¤šifã€‚æ‰€ä»¥è‹¥æ˜¯æœ‰å¾ˆå¤šæ¡ä»¶çš„æƒ…å†µä¸‹ä¸å¦¨å»å­˜åœ¨å®¹å™¨é‡ŒæŠŠå¾ˆå¤šifå˜æˆå¾ªç¯+if 123Map&lt;Integer,String&gt; map = new HashMap();map.put(3,&quot;Fizz&quot;);map.put(5,&quot;Buzz&quot;); 12345for (Integer key : map.keySet()) &#123; if (num % key == 0) &#123; str += map.get(key); &#125;&#125; æ‰€ä»¥ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819public List&lt;String&gt; fizzBuzz(int n) &#123; Map&lt;Integer,String&gt; map = new HashMap(); map.put(3,&quot;Fizz&quot;); map.put(5,&quot;Buzz&quot;); List&lt;String&gt; res = new ArrayList(); for (int i = 1; i &lt;= n; i++)&#123; String str = &quot;&quot;; for (Integer key : map.keySet()) &#123; if (i % key == 0) &#123; str += map.get(key); &#125; &#125; if (str.equals(&quot;&quot;)) &#123; str += String.valueOf(i); &#125; res.add(str); &#125; return res;&#125; æ€»ç»“è¿™é¢˜æœ¬èº«æ˜¯ç®€å•çš„ï¼Œä½†ä¸»è¦æ˜¯æ€ä¹ˆå»å¤„ç†å˜å¾—é€šç”¨ï¼Œå°±åƒåœ¨è¿‡å»æˆ‘ä»¬å­¦ä¹ javaEEå»æ”¹å†™é€šç”¨servletä¸€æ ·ï¼ŒæŠŠnä¸ªæ–¹æ³•åçš„åˆ¤æ–­é€šè¿‡æ³›å‹ç»™å…å»äº†ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·nä¸ªifä¸å¯èƒ½éƒ½å†™å‡ºæ¥æ¢æˆå¾ªç¯éå†nä¸ªifï¼Œå…¶å®è¿˜æœ‰æ”¹è¿›çš„ç‚¹ï¼Œå°±æ¯”å¦‚åƒåœ¨é¢˜è§£äºŒä¸¾å¾—ä¾‹å­å¦‚æœè¯´è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³æ‰€ä»¥ä¸¤ä¸ªæ–¹æ³•éƒ½æ‰§è¡Œï¼Œä½†æ˜¯å®ƒä»¬éœ€è¦æœ‰å…ˆåé¡ºåºä¹ˆï¼Ÿå¦‚æœå®é™…çš„é€»è¾‘æ˜¯éœ€è¦çš„é‚£ä¹ˆè§£æ³•äºŒå¯ä»¥æ‰‹åŠ¨è°ƒæ•´å•ifé¡ºåºï¼Œä½†è§£æ³•ä¸‰ä¸è¡Œå› ä¸ºhashmapçš„keySet()æ–¹æ³•å–æ˜¯ä¹±åºçš„ï¼Œä½†å¯ä»¥ä½¿ç”¨TreeMapæˆ–LinkMap.TreeMapæ˜¯æŒ‰keyå‡åºï¼Œè€ŒLinkMapæ˜¯æŒ‰putçš„é¡ºåº","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"SSMæ•´åˆ","slug":"SSMæ•´åˆ","date":"2021-05-16T08:09:22.000Z","updated":"2025-04-17T08:34:52.016Z","comments":true,"path":"2021/05/16/SSMæ•´åˆ/","link":"","permalink":"http://yournotes.cn/2021/05/16/SSM%E6%95%B4%E5%90%88/","excerpt":"","text":"1. éœ€æ±‚å’Œæ­¥éª¤åˆ†æéœ€æ±‚ â€‹ ä½¿ç”¨ssmæ¡†æ¶å®Œæˆå¯¹ account è¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚ æ­¥éª¤åˆ†æ å‡†å¤‡æ•°æ®åº“å’Œè¡¨è®°å½• åˆ›å»ºwebé¡¹ç›® ç¼–å†™mybatisåœ¨ssmç¯å¢ƒä¸­å¯ä»¥å•ç‹¬ä½¿ç”¨ ç¼–å†™springåœ¨ssmç¯å¢ƒä¸­å¯ä»¥å•ç‹¬ä½¿ç”¨ springæ•´åˆmybatis ç¼–å†™springMVCåœ¨ssmç¯å¢ƒä¸­å¯ä»¥å•ç‹¬ä½¿ç”¨ springæ•´åˆspringMVC 2. ç¯å¢ƒæ­å»º2.1 å‡†å¤‡æ•°æ®åº“å’Œè¡¨è®°å½•123456789CREATE TABLE `account` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(32) DEFAULT NULL, `money` double DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8; insert into `account`(`id`,`name`,`money`) values (1,&#x27;tom&#x27;,1000), (2,&#x27;jerry&#x27;,1000); 2.2 åˆ›å»ºwebé¡¹ç›®3. ç¼–å†™mybatisåœ¨ssmç¯å¢ƒä¸­å¯ä»¥å•ç‹¬ä½¿ç”¨éœ€æ±‚ï¼šåŸºäºmybatiså…ˆæ¥å®ç°å¯¹accountè¡¨çš„æŸ¥è¯¢ 3.1 ç›¸å…³åæ ‡123456789101112131415161718192021&lt;!--mybatisåæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.15&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt;&lt;/dependency&gt; 3.2 Accounå®ä½“12345public class Account &#123; private Integer id; private String name; private Double money; &#125; 3.3 AccountDaoæ¥å£123public interface AccountDao &#123; public List&lt;Account&gt; findAll(); &#125; 3.4 AccountDao.xmlæ˜ å°„12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.lagou.dao.AccountDao&quot;&gt; &lt;select id=&quot;findAll&quot; resultType=&quot;Account&quot;&gt; select * from account &lt;/select&gt;&lt;/mapper&gt; 3.5 mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶jdbc.properties 1234jdbc.driver=com.mysql.jdbc.Driver jdbc.url=jdbc:mysql://localhost:3306/spring_db jdbc.username=root jdbc.password=root SqlMapConfig.xml 123456789101112131415161718192021222324252627&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;!--åŠ è½½properties--&gt; &lt;properties resource=&quot;jdbc.properties&quot;/&gt; &lt;!--ç±»å‹åˆ«åé…ç½®--&gt; &lt;typeAliases&gt; &lt;package name=&quot;com.lagou.domain&quot;/&gt; &lt;/typeAliases&gt; &lt;!--ç¯å¢ƒé…ç½®--&gt; &lt;environments default=&quot;mysql&quot;&gt; &lt;!--ä½¿ç”¨MySQLç¯å¢ƒ--&gt; &lt;environment id=&quot;mysql&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„--&gt; &lt;mappers&gt; &lt;package name=&quot;com.lagou.dao&quot;/&gt; &lt;/mappers&gt;&lt;/configuration&gt; 3.6 æµ‹è¯•ä»£ç 1234567891011121314151617181920public class MyBatisTest &#123; @Test public void testMybatis() throws Exception &#123; // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å¾—sqlsessionå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å¾—sqlsessionä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // è·å¾—mapperä»£ç†å¯¹è±¡ AccountDao accountDao = sqlSession.getMapper(AccountDao.class); // æ‰§è¡Œ List&lt;Account&gt; list = accountDao.findAll(); for (Account account : list) &#123; System.out.println(account); &#125; // é‡Šæ”¾èµ„æº sqlSession.close(); &#125;&#125; 4. ç¼–å†™springåœ¨ssmç¯å¢ƒä¸­å¯ä»¥å•ç‹¬ä½¿ç”¨4.1 ç›¸å…³åæ ‡1234567891011121314151617181920212223242526&lt;!--springåæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt;&lt;/dependency&gt; 4.2 AccountServiceæ¥å£123public interface AccountService &#123; public List&lt;Account&gt; findAll(); &#125; 4.3 AccountServiceImplå®ç°12345678@Service public class AccountServiceImpl implements AccountService &#123; @Override public List&lt;Account&gt; findAll() &#123; System.out.println(&quot;findAllæ‰§è¡Œäº†....&quot;); return null; &#125;&#125; 4.4 springæ ¸å¿ƒé…ç½®æ–‡ä»¶applicationContext.xml 1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!--æ³¨è§£ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou.service&quot;/&gt; &lt;/beans&gt; 4.5 æµ‹è¯•ä»£ç 1234567891011@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class SpringTest &#123; @Autowired private AccountService accountService; @Test public void testSpring() throws Exception &#123; List&lt;Account&gt; list = accountService.findAll(); System.out.println(list); &#125;&#125; 5. springæ•´åˆmybatis5.1 æ•´åˆæ€æƒ³â€‹ å°†mybatisæ¥å£ä»£ç†å¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™springç®¡ç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠdaoçš„ä»£ç†å¯¹è±¡æ³¨å…¥åˆ°serviceä¸­æ­¤æ—¶ä¹Ÿå°±å®Œæˆäº†springä¸mybatisçš„æ•´åˆäº†ã€‚ 5.2 å¯¼å…¥æ•´åˆåŒ…123456&lt;!--mybatisæ•´åˆspringåæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt;&lt;/dependency&gt; 5.3 springé…ç½®æ–‡ä»¶ç®¡ç†mybatisæ³¨æ„ï¼šæ­¤æ—¶å¯ä»¥å°†mybatisä¸»é…ç½®æ–‡ä»¶åˆ é™¤ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!--æ³¨è§£ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou.service&quot;/&gt; &lt;!--springæ•´åˆmybatis--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/bean&gt; &lt;!--SqlSessionFactoryåˆ›å»ºäº¤ç»™springçš„IOCå®¹å™¨--&gt; &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt; &lt;!--æ•°æ®åº“ç¯å¢ƒé…ç½®--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;!--ç±»å‹åˆ«åé…ç½®--&gt; &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.lagou.domain&quot;/&gt; &lt;!--å¦‚æœè¦å¼•å…¥mybatisä¸»é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹é…ç½®--&gt; &lt;!--&lt;property name=&quot;configLocation&quot; value=&quot;classpath:SqlMapConfig.xml&quot;/&gt;--&gt; &lt;/bean&gt; &lt;!--æ˜ å°„æ¥å£æ‰«æé…ç½®ï¼Œç”±springåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œäº¤ç»™IOCå®¹å™¨--&gt; &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt; &lt;property name=&quot;basePackage&quot; value=&quot;com.lagou.dao&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; 5.4 ä¿®æ”¹AccountServiceImpl123456789@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Override public List&lt;Account&gt; findAll() &#123; return accountDao.findAll(); &#125;&#125; 6. ç¼–å†™springMVCåœ¨ssmç¯å¢ƒä¸­å¯ä»¥å•ç‹¬ä½¿ç”¨éœ€æ±‚ï¼šè®¿é—®åˆ°controlleré‡Œé¢çš„æ–¹æ³•æŸ¥è¯¢æ‰€æœ‰è´¦æˆ·ï¼Œå¹¶è·³è½¬åˆ°list.jspé¡µé¢è¿›è¡Œåˆ—è¡¨å±•ç¤º 6.1 ç›¸å…³åæ ‡1234567891011121314151617181920212223&lt;!--springMVCåæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;jstl&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt;&lt;/dependency&gt; 6.2 å¯¼å…¥é¡µé¢èµ„æº 6.3 å‰ç«¯æ§åˆ¶å™¨DispathcerServlet12345678910111213141516171819202122232425262728293031323334&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; version=&quot;3.1&quot;&gt; &lt;!--å‰ç«¯æ§åˆ¶å™¨--&gt; &lt;servlet&gt; &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;2&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!--postä¸­æ–‡å¤„ç†--&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter- class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; 6.4 AccountControllerå’Œ list.jsp123456789101112@Controller @RequestMapping(&quot;/account&quot;) public class AccountController &#123; @RequestMapping(&quot;/findAll&quot;) public String findAll(Model model) &#123; List&lt;Account&gt; list = new ArrayList&lt;&gt;(); list.add(new Account(1,&quot;å¼ ä¸‰&quot;,1000d)); list.add(new Account(2,&quot;æå››&quot;,1000d)); model.addAttribute(&quot;list&quot;, list); return &quot;list&quot;; &#125;&#125; 1234567891011&lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;account&quot;&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ids&quot;&gt;&lt;/td&gt; &lt;td&gt;$&#123;account.id&#125;&lt;/td&gt; &lt;td&gt;$&#123;account.name&#125;&lt;/td&gt; &lt;td&gt;$&#123;account.money&#125;&lt;/td&gt; &lt;td&gt;&lt;a class=&quot;btn btn-default btn-sm&quot; href=&quot;update.jsp&quot;&gt;ä¿®æ”¹&lt;/a&gt;&amp;nbsp; &lt;a class=&quot;btn btn-default btn-sm&quot; href=&quot;&quot;&gt;åˆ é™¤&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt;&lt;/c:forEach&gt; 6.5 springMVCæ ¸å¿ƒé…ç½®æ–‡ä»¶123456789101112131415161718192021222324&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou.controller&quot;/&gt; &lt;!--mvcæ³¨è§£å¢å¼º--&gt; &lt;mvc:annotation-driven/&gt; &lt;!--è§†å›¾è§£æå™¨--&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/&quot;/&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt; &lt;/bean&gt; &lt;!--å®ç°é™æ€èµ„æºæ˜ å°„--&gt; &lt;mvc:default-servlet-handler/&gt;&lt;/beans&gt; 7. springæ•´åˆspringMVC7.1 æ•´åˆæ€æƒ³â€‹ springå’ŒspringMVCå…¶å®æ ¹æœ¬å°±ä¸ç”¨æ•´åˆï¼Œæœ¬æ¥å°±æ˜¯ä¸€å®¶ã€‚ â€‹ ä½†æ˜¯æˆ‘ä»¬éœ€è¦åšåˆ°springå’Œwebå®¹å™¨æ•´åˆï¼Œè®©webå®¹å™¨å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨åŠ è½½springé…ç½®æ–‡ä»¶ï¼Œwebå®¹å™¨é”€æ¯çš„æ—¶å€™springçš„iocå®¹å™¨ä¹Ÿé”€æ¯ã€‚ 7.2 springå’Œwebå®¹å™¨æ•´åˆContextLoaderListeneråŠ è½½ã€æŒæ¡ã€‘ â€‹ å¯ä»¥ä½¿ç”¨spring-webåŒ…ä¸­çš„ContextLoaderListenerç›‘å¬å™¨ï¼Œå¯ä»¥ç›‘å¬servletContextå®¹å™¨çš„åˆ›å»ºå’Œé”€æ¯ï¼Œæ¥åŒæ—¶åˆ›å»ºæˆ–é”€æ¯IOCå®¹å™¨ã€‚ 12345678&lt;!--spring ä¸ webå®¹å™¨æ•´åˆ--&gt;&lt;listener&gt; &lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt;&lt;/listener&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;&lt;/context-param&gt; 7.3 ä¿®æ”¹AccountController123456789101112@Controller@RequestMapping(&quot;/account&quot;) public class AccountController &#123; @Autowired private AccountService accountService; @RequestMapping(&quot;/findAll&quot;) public String findAll(Model model) &#123; List&lt;Account&gt; list = accountService.findAll(); model.addAttribute(&quot;list&quot;, list); return &quot;list&quot;; &#125;&#125; 8. springé…ç½®å£°æ˜å¼äº‹åŠ¡8.1 springé…ç½®æ–‡ä»¶åŠ å…¥å£°æ˜å¼äº‹åŠ¡123456&lt;!--äº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--å¼€å¯äº‹åŠ¡æ³¨è§£æ”¯æŒ--&gt;&lt;tx:annotation-driven/&gt; 1234@Service @Transactional public class AccountServiceImpl implements AccountService &#123;&#125; 8.2 add.jsp12345678910111213141516&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/account/save&quot; method=&quot;post&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;name&quot;&gt;å§“åï¼š&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;name&quot; name=&quot;name&quot; placeholder=&quot;è¯·è¾“å…¥å§“å&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;age&quot;&gt;ä½™é¢ï¼š&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;age&quot; name=&quot;age&quot; placeholder=&quot;è¯·è¾“å…¥ä½™é¢&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot; style=&quot;text-align: center&quot;&gt; &lt;input class=&quot;btn btn-primary&quot; type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt; &lt;input class=&quot;btn btn-default&quot; type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt; &lt;input class=&quot;btn btn-default&quot; type=&quot;button&quot; onclick=&quot;history.go(-1)&quot; value=&quot;è¿”å›&quot; /&gt; &lt;/div&gt;&lt;/form&gt; 8.3 AccountController12345@RequestMapping(&quot;/save&quot;) public String save(Account account)&#123; accountService.save(account); return &quot;redirect:/account/findAll&quot;; &#125; 8.4 AccountServiceæ¥å£å’Œå®ç°ç±»1public void save(Account account); 12345678@Service @Transactional public class AccountServiceImpl implements AccountService &#123; @Override public void save(Account account) &#123; accountDao.save(account); &#125;&#125; 8.5 AccountDao1void save(Account account); AccountDao.xml123&lt;insert id=&quot;save&quot; parameterType=&quot;Account&quot;&gt; insert into account (name, money) values (#&#123;name&#125;, #&#123;money&#125;) &lt;/insert&gt; 9. ä¿®æ”¹æ“ä½œ9.1 æ•°æ®å›æ˜¾â‘  AccountController 12345@RequestMapping(&quot;/findById&quot;) public String findById(Integer id, Model model) &#123; Account account = accountService.findById(id); model.addAttribute(&quot;account&quot;, account); return &quot;update&quot;; &#125; â‘¡ AccountServiceæ¥å£å’Œå®ç°ç±» 1Account findById(Integer id); 1234@Override public Account findById(Integer id) &#123; return accountDao.findById(id); &#125; â‘¢ AccountDaoæ¥å£å’Œæ˜ å°„æ–‡ä»¶ 1Account findById(Integer id); 123&lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;Account&quot;&gt; select * from account where id = #&#123;id&#125; &lt;/select&gt; â‘£ update.jsp 12345678910111213141516171819&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/account/update&quot; method=&quot;post&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;$&#123;account.id&#125;&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;name&quot;&gt;å§“åï¼š&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;name&quot; name=&quot;name&quot; value=&quot;$&#123;account.name&#125;&quot; placeholder=&quot;è¯·è¾“å…¥å§“å&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;money&quot;&gt;ä½™é¢ï¼š&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;money&quot; name=&quot;money&quot; value=&quot;$&#123;account.money&#125;&quot; placeholder=&quot;è¯·è¾“å…¥ä½™é¢&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot; style=&quot;text-align: center&quot;&gt; &lt;input class=&quot;btn btn-primary&quot; type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt; &lt;input class=&quot;btn btn-default&quot; type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt; &lt;input class=&quot;btn btn-default&quot; type=&quot;button&quot; onclick=&quot;history.go(-1)&quot; value=&quot;è¿”å›&quot; /&gt; &lt;/div&gt;&lt;/form&gt; 9.2 è´¦æˆ·æ›´æ–°â‘  AccountController 12345@RequestMapping(&quot;/update&quot;) public String update(Account account)&#123; accountService.update(account); return &quot;redirect:/account/findAll&quot;; &#125; â‘¡ AccountServiceæ¥å£å’Œå®ç°ç±» 1void update(Account account); 1234@Override public void update(Account account) &#123; accountDao.update(account); &#125; â‘¢ AccountDaoæ¥å£å’Œæ˜ å°„æ–‡ä»¶ 1void update(Account account); 123&lt;update id=&quot;update&quot; parameterType=&quot;Account&quot;&gt; update account set name = #&#123;name&#125;,money = #&#123;money&#125; where id = #&#123;id&#125; &lt;/update&gt; 10. æ‰¹é‡åˆ é™¤10.1 list.jsp12345678910111213&lt;script&gt; $(&#x27;#checkAll&#x27;).click(function() &#123; $(&#x27;input[name=&quot;ids&quot;]&#x27;).prop(&#x27;checked&#x27;, $(this).prop(&#x27;checked&#x27;)); &#125;) $(&#x27;#deleteBatchBtn&#x27;).click(function() &#123; if (confirm(&#x27;æ‚¨ç¡®å®šè¦åˆ é™¤å—?&#x27;)) &#123; if ($(&#x27;input[name=&quot;ids&quot;]:checked&#x27;).length &gt; 0) &#123; $(&#x27;#deleteBatchForm&#x27;).submit(); &#125; else &#123; alert(&#x27;æƒ³å•¥å‘¢ï¼Ÿ&#x27;) &#125; &#125; &#125;)&lt;/script&gt; 10.2 AccountController12345@RequestMapping(&quot;/deleteBatch&quot;) public String deleteBatch(Integer[] ids) &#123; accountService.deleteBatch(ids); return &quot;redirect:/account/findAll&quot;; &#125; 10.3 AccountServiceæ¥å£å’Œå®ç°ç±»1void deleteBatch(Integer[] ids); 1234@Override public void deleteBatch(Integer[] ids) &#123; accountDao.deleteBatch(ids); &#125; 10.4 AccountDaoæ¥å£å’Œæ˜ å°„æ–‡ä»¶1void deleteBatch(Integer[] ids); 12345&lt;delete id=&quot;deleteBatch&quot; parameterType=&quot;int&quot;&gt; delete from account &lt;where&gt; &lt;foreach collection=&quot;array&quot; open=&quot;id in(&quot; close=&quot;)&quot; separator=&quot;,&quot; item=&quot;id&quot;&gt; #&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/delete&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"SpringMVC è¿›é˜¶","slug":"springmvc-è¿›é˜¶","date":"2021-05-09T07:22:02.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/05/09/springmvc-è¿›é˜¶/","link":"","permalink":"http://yournotes.cn/2021/05/09/springmvc-%E8%BF%9B%E9%98%B6/","excerpt":"","text":"1. ajaxå¼‚æ­¥äº¤äº’Springmvcé»˜è®¤ç”¨MappingJackson2HttpMessageConverterå¯¹jsonæ•°æ®è¿›è¡Œè½¬æ¢ï¼Œéœ€è¦åŠ å…¥jacksonçš„åŒ…ï¼›åŒæ—¶ä½¿ç”¨ &lt;mvc:annotation-driven /&gt; 123456789101112131415&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.8&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;2.9.8&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt;&lt;/dependency&gt; 1.1 @RequestBodyè¯¥æ³¨è§£ç”¨äºControllerçš„æ–¹æ³•çš„å½¢å‚å£°æ˜ï¼Œå½“ä½¿ç”¨ajaxæäº¤å¹¶æŒ‡å®šcontentTypeä¸ºjsonå½¢å¼æ—¶ï¼Œé€šè¿‡HttpMessageConverteræ¥å£è½¬æ¢ä¸ºå¯¹åº”çš„POJOå¯¹è±¡ã€‚ 123456789101112131415161718&lt;button id=&quot;btn1&quot;&gt; ajaxå¼‚æ­¥æäº¤&lt;/button&gt;&lt;script&gt; $(&quot;#btn1&quot;).click(function() &#123; let url = &#x27;$&#123;pageContext.request.contextPath&#125;/ajaxRequest&#x27;; let data = &#x27;[&#123;&quot;id&quot;:1,&quot;username&quot;:&quot;å¼ ä¸‰&quot;&#125;,&#123;&quot;id&quot;:2,&quot;username&quot;:&quot;æå››&quot;&#125;]&#x27;; $.ajax(&#123; type: &#x27;POST&#x27;, url: url, data: data, contentType: &#x27;application/json;charset=utf-8&#x27;, success: function(resp) &#123; alert(JSON.stringify(resp)) &#125; &#125;) &#125;)&lt;/script&gt; 1234@RequestMapping(value = &quot;/ajaxRequest&quot;) public void ajaxRequest(@RequestBody List&lt;User&gt;list) &#123; System.out.println(list); &#125; 1.2 @ResponseBodyè¯¥æ³¨è§£ç”¨äºå°†Controllerçš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œé€šè¿‡HttpMessageConverteræ¥å£è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„æ•°æ®å¦‚ï¼šjson,xmlç­‰ï¼Œé€šè¿‡Responseå“åº”ç»™å®¢æˆ·ç«¯ã€‚ 12345678910/* * @RequestMapping produces = &quot;application/json; * charset=utf-8&quot; å“åº”è¿”å›æ•°æ®çš„mimeç±»å‹å’Œç¼–ç ï¼Œé»˜è®¤ä¸º json */@RequestMapping(value = &quot;/ajaxRequest&quot;) @ResponseBody public List&lt;User&gt; ajaxRequest(@RequestBody List&lt;User&gt; list) &#123; System.out.println(list); return list;&#125; 2. RESTful2.1 ä»€ä¹ˆæ˜¯RESTfulRestfulæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼ï¼Œè€Œä¸æ˜¯æ ‡å‡†ï¼Œåªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚ä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ï¼ŒåŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜æœºåˆ¶ç­‰ã€‚ Restfulé£æ ¼çš„è¯·æ±‚æ˜¯ä½¿ç”¨â€œurl+è¯·æ±‚æ–¹å¼â€è¡¨ç¤ºä¸€æ¬¡è¯·æ±‚ç›®çš„çš„ï¼ŒHTTP åè®®é‡Œé¢å››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¦‚ä¸‹ï¼š GETï¼šè¯»å–ï¼ˆReadï¼‰ POSTï¼šæ–°å»ºï¼ˆCreateï¼‰ PUTï¼šæ›´æ–°ï¼ˆUpdateï¼‰ DELETEï¼šåˆ é™¤ï¼ˆDeleteï¼‰ å®¢æˆ·ç«¯è¯·æ±‚ åŸæ¥é£æ ¼URLåœ°å€ RESTfulé£æ ¼URLåœ°å€ æŸ¥è¯¢æ‰€æœ‰ /user/findAll GET /user æ ¹æ®IDæŸ¥è¯¢ /user/findById?id=1 GET /user/{1} æ–°å¢ /user/save POST /user ä¿®æ”¹ /user/update PUT /user åˆ é™¤ /user/delete?id=1 DELETE /user/{1} 2.2 ä»£ç å®ç°@PathVariable ç”¨æ¥æ¥æ”¶RESTfulé£æ ¼è¯·æ±‚åœ°å€ä¸­å ä½ç¬¦çš„å€¼ @RestController RESTfulé£æ ¼å¤šç”¨äºå‰åç«¯åˆ†ç¦»é¡¹ç›®å¼€å‘ï¼Œå‰ç«¯é€šè¿‡ajaxä¸æœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥äº¤äº’ï¼Œæˆ‘ä»¬å¤„ç†å™¨é€šå¸¸è¿”å›çš„æ˜¯jsonæ•°æ®æ‰€ä»¥ä½¿ç”¨@RestControlleræ¥æ›¿ä»£@Controllerå’Œ@ResponseBodyä¸¤ä¸ªæ³¨è§£ã€‚ 1234567891011121314151617181920212223// @Controller @RestController public class RestFulController &#123; @GetMapping(value = &quot;/user/&#123;id&#125;&quot;) // ç›¸å½“äº @RequestMapping(value = &quot;/user/&#123;id&#125;&quot;,method = RequestMethod.GET) // @ResponseBody public String get(@PathVariable Integer id) &#123; return &quot;getï¼š&quot; + id; &#125; @PostMapping(value = &quot;/user&quot;) // @ResponseBody public String post() &#123; return &quot;post&quot;; &#125; @PutMapping(value = &quot;/user&quot;) // @ResponseBody public String put() &#123; return &quot;put&quot;; &#125; @DeleteMapping(value = &quot;/user/&#123;id&#125;&quot;) // @ResponseBody public String delete(@PathVariable Integer id) &#123; return &quot;deleteï¼š&quot;+ id; &#125;&#125; 3. æ–‡ä»¶ä¸Šä¼ 3.1 æ–‡ä»¶ä¸Šä¼ ä¸‰è¦ç´  è¡¨å•é¡¹ type&#x3D;â€fileâ€ è¡¨å•çš„æäº¤æ–¹å¼ method&#x3D;â€POSTâ€ è¡¨å•çš„enctypeå±æ€§æ˜¯å¤šéƒ¨åˆ†è¡¨å•å½¢å¼ enctype&#x3D;â€œmultipart&#x2F;form-dataâ€ 3.2 æ–‡ä»¶ä¸Šä¼ åŸç† å½“formè¡¨å•ä¿®æ”¹ä¸ºå¤šéƒ¨åˆ†è¡¨å•æ—¶ï¼Œrequest.getParameter()å°†å¤±æ•ˆã€‚ å½“formè¡¨å•çš„enctypeå–å€¼ä¸º application&#x2F;x-www-form-urlencoded æ—¶ï¼Œformè¡¨å•çš„æ­£æ–‡å†…å®¹æ ¼å¼æ˜¯ï¼š name&#x3D;value&amp;name&#x3D;value å½“formè¡¨å•çš„enctypeå–å€¼ä¸º mutilpart&#x2F;form-data æ—¶ï¼Œè¯·æ±‚æ­£æ–‡å†…å®¹å°±å˜æˆå¤šéƒ¨åˆ†å½¢å¼ï¼š 3.3 å•æ–‡ä»¶ä¸Šä¼ æ­¥éª¤åˆ†æ å¯¼å…¥fileuploadå’Œioåæ ‡ é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨ ç¼–å†™æ–‡ä»¶ä¸Šä¼ ä»£ç  1ï¼‰å¯¼å…¥fileuploadå’Œioåæ ‡ 12345678910&lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.3.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.6&lt;/version&gt;&lt;/dependency&gt; 2ï¼‰é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨ 1234567&lt;!--æ–‡ä»¶ä¸Šä¼ è§£æå™¨--&gt;&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt; &lt;!-- è®¾å®šæ–‡ä»¶ä¸Šä¼ çš„æœ€å¤§å€¼ä¸º5MBï¼Œ5*1024*1024 --&gt; &lt;property name=&quot;maxUploadSize&quot; value=&quot;5242880&quot;&gt;&lt;/property&gt; &lt;!-- è®¾å®šæ–‡ä»¶ä¸Šä¼ æ—¶å†™å…¥å†…å­˜çš„æœ€å¤§å€¼ï¼Œå¦‚æœå°äºè¿™ä¸ªå‚æ•°ä¸ä¼šç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œé»˜è®¤ä¸º10240 --&gt; &lt;property name=&quot;maxInMemorySize&quot; value=&quot;40960&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 3ï¼‰ç¼–å†™æ–‡ä»¶ä¸Šä¼ ä»£ç  12345&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/fileUpload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; åç§°ï¼š&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt; æ–‡ä»¶ï¼š&lt;input type=&quot;file&quot; name=&quot;filePic&quot;&gt;&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;å•æ–‡ä»¶ä¸Šä¼ &quot;&gt;&lt;/form&gt; 123456789@RequestMapping(&quot;/fileUpload&quot;) public String fileUpload(String username, MultipartFile filePic) throws IOException &#123; System.out.println(username); // è·å–æ–‡ä»¶å String originalFilename = filePic.getOriginalFilename(); //ä¿å­˜æ–‡ä»¶ filePic.transferTo(new File(&quot;d:/upload/&quot;+originalFilename)); return &quot;success&quot;;&#125; 3.4 å¤šæ–‡ä»¶ä¸Šä¼ 123456&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/filesUpload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; åç§°ï¼š&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt; æ–‡ä»¶1ï¼š&lt;input type=&quot;file&quot; name=&quot;filePic&quot;&gt;&lt;br&gt; æ–‡ä»¶2ï¼š&lt;input type=&quot;file&quot; name=&quot;filePic&quot;&gt;&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;å¤šæ–‡ä»¶ä¸Šä¼ &quot;&gt;&lt;/form&gt; 1234567891011@RequestMapping(&quot;/filesUpload&quot;) public String filesUpload(String username, MultipartFile[] filePic) throws IOException &#123; System.out.println(username); for (MultipartFile multipartFile : filePic) &#123; // è·å–æ–‡ä»¶å String originalFilename = multipartFile.getOriginalFilename(); // ä¿å­˜åˆ°æœåŠ¡å™¨ multipartFile.transferTo(new File(&quot;d:/upload/&quot; + originalFilename)); &#125; return &quot;success&quot;;&#125; 4. å¼‚å¸¸å¤„ç†4.1 å¼‚å¸¸å¤„ç†çš„æ€è·¯åœ¨Javaä¸­ï¼Œå¯¹äºå¼‚å¸¸çš„å¤„ç†ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š ä¸€ç§æ˜¯å½“å‰æ–¹æ³•æ•è·å¤„ç†ï¼ˆtry-catchï¼‰ï¼Œè¿™ç§å¤„ç†æ–¹å¼ä¼šé€ æˆä¸šåŠ¡ä»£ç å’Œå¼‚å¸¸å¤„ç†ä»£ç çš„è€¦åˆã€‚ å¦ä¸€ç§æ˜¯è‡ªå·±ä¸å¤„ç†ï¼Œè€Œæ˜¯æŠ›ç»™è°ƒç”¨è€…å¤„ç†ï¼ˆthrowsï¼‰ï¼Œè°ƒç”¨è€…å†æŠ›ç»™å®ƒçš„è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯ä¸€ç›´å‘ä¸ŠæŠ›ã€‚åœ¨è¿™ç§æ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œè¡ç”Ÿå‡ºäº†SpringMVCçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚ ç³»ç»Ÿçš„daoã€serviceã€controllerå‡ºç°éƒ½é€šè¿‡throws Exceptionå‘ä¸ŠæŠ›å‡ºï¼Œæœ€åç”±springmvcå‰ç«¯æ§åˆ¶å™¨äº¤ç”±å¼‚å¸¸å¤„ç†å™¨è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦‚ä¸‹å›¾ï¼š 4.2 è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨æ­¥éª¤åˆ†æ åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»å®ç°HandlerExceptionResolver é…ç½®å¼‚å¸¸å¤„ç†å™¨ ç¼–å†™å¼‚å¸¸é¡µé¢ æµ‹è¯•å¼‚å¸¸è·³è½¬ 1ï¼‰åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»å®ç°HandlerExceptionResolver 123456789public class GlobalExceptionResolver implements HandlerExceptionResolver &#123; @Override public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) &#123; ModelAndView modelAndView = new ModelAndView(); modelAndView.addObject(&quot;error&quot;, ex.getMessage()); modelAndView.setViewName(&quot;error&quot;); return modelAndView; &#125;&#125; 2ï¼‰é…ç½®å¼‚å¸¸å¤„ç†å™¨ 12@Component public class GlobalExecptionResovler implements HandlerExceptionResolver &#123;&#125; 3ï¼‰ç¼–å†™å¼‚å¸¸é¡µé¢ 12345678910&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;error&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;è¿™æ˜¯ä¸€ä¸ªæœ€ç»ˆå¼‚å¸¸çš„æ˜¾ç¤ºé¡µé¢&lt;/h3&gt; &lt;p&gt;$&#123;error&#125;&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; 4ï¼‰æµ‹è¯•å¼‚å¸¸è·³è½¬ 12345@RequestMapping(&quot;/testException&quot;) public String testException() &#123; int i = 1 / 0; return &quot;success&quot;;&#125; 4.3 webçš„å¤„ç†å¼‚å¸¸æœºåˆ¶12345678910&lt;!--å¤„ç†500å¼‚å¸¸--&gt;&lt;error-page&gt; &lt;error-code&gt;500&lt;/error-code&gt; &lt;location&gt;/500.jsp&lt;/location&gt;&lt;/error-page&gt;&lt;!--å¤„ç†404å¼‚å¸¸--&gt;&lt;error-page&gt; &lt;error-code&gt;404&lt;/error-code&gt; &lt;location&gt;/404.jsp&lt;/location&gt;&lt;/error-page&gt; 5. æ‹¦æˆªå™¨5.1 æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰çš„ä½œç”¨Spring MVC çš„æ‹¦æˆªå™¨ç±»ä¼¼äº Servlet å¼€å‘ä¸­çš„è¿‡æ»¤å™¨ Filterï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚ å°†æ‹¦æˆªå™¨æŒ‰ä¸€å®šçš„é¡ºåºè”ç»“æˆä¸€æ¡é“¾ï¼Œè¿™æ¡é“¾ç§°ä¸ºæ‹¦æˆªå™¨é“¾ï¼ˆInterceptorChainï¼‰ã€‚åœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æˆ–å­—æ®µæ—¶ï¼Œæ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨å°±ä¼šæŒ‰å…¶ä¹‹å‰å®šä¹‰çš„é¡ºåºè¢«è°ƒç”¨ã€‚æ‹¦æˆªå™¨ä¹Ÿæ˜¯AOPæ€æƒ³çš„å…·ä½“å®ç°ã€‚ 5.2 æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨åŒºåˆ«å…³äºinterceptorå’Œfilterçš„åŒºåˆ«ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 5.3 å¿«é€Ÿå…¥é—¨æ­¥éª¤åˆ†æ åˆ›å»ºæ‹¦æˆªå™¨ç±»å®ç°HandlerInterceptoræ¥å£ é…ç½®æ‹¦æˆªå™¨ æµ‹è¯•æ‹¦æˆªå™¨çš„æ‹¦æˆªæ•ˆæœ 1ï¼‰åˆ›å»ºæ‹¦æˆªå™¨ç±»å®ç°HandlerInterceptoræ¥å£ 123456789101112131415161718public class MyInterceptor1 implements HandlerInterceptor &#123; // åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ æ‹¦æˆª @Override public Boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) &#123; System.out.println(&quot;preHendle1&quot;); return true; &#125; // åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å,è§†å›¾å¯¹è±¡è¿”å›ä¹‹å‰ æ‰§è¡Œ @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) &#123; System.out.println(&quot;postHandle1&quot;); &#125; // åœ¨æµç¨‹éƒ½æ‰§è¡Œå®Œæ¯•å æ‰§è¡Œ @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) &#123; System.out.println(&quot;afterCompletion1&quot;); &#125;&#125; 2ï¼‰é…ç½®æ‹¦æˆªå™¨ 12345678&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;&lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;bean class=&quot;com.lagou.interceptor.MyInterceptor1&quot;/&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt; 3ï¼‰æµ‹è¯•æ‹¦æˆªå™¨çš„æ‹¦æˆªæ•ˆæœ ç¼–å†™Controller,å‘è¯·æ±‚åˆ°controller,è·³è½¬é¡µé¢ 12345678@Controller public class TargetController &#123; @RequestMapping(&quot;/target&quot;) public String targetMethod() &#123; System.out.println(&quot;ç›®æ ‡æ–¹æ³•æ‰§è¡Œäº†...&quot;); return &quot;success&quot;; &#125;&#125; ç¼–å†™jspé¡µé¢ 12345678910&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;success&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;success...&lt;/h3&gt; &lt;% System.out.println( &quot;è§†å›¾æ‰§è¡Œäº†....&quot;);%&gt; &lt;/body&gt;&lt;/html&gt; 5.4 æ‹¦æˆªå™¨é“¾å¼€å‘ä¸­æ‹¦æˆªå™¨å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªæ‹¦æˆªå™¨å½¢æˆä¸€æ¡æ‹¦æˆªå™¨é“¾ã€‚å¼€å‘æ­¥éª¤å’Œå•ä¸ªæ‹¦æˆªå™¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ³¨å†Œçš„æ—¶å€™æ³¨å†Œå¤šä¸ªï¼Œæ³¨æ„è¿™é‡Œæ³¨å†Œçš„é¡ºåºå°±ä»£è¡¨æ‹¦æˆªå™¨æ‰§è¡Œçš„é¡ºåºã€‚ åŒä¸Šï¼Œå†ç¼–å†™ä¸€ä¸ªMyHandlerInterceptor2æ“ä½œï¼Œæµ‹è¯•æ‰§è¡Œé¡ºåºï¼š 123456789101112131415&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;&lt;mvc:interceptors&gt; &lt;mvc:interceptor&gt; &lt;!--æ‹¦æˆªå™¨è·¯å¾„é…ç½®--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;!--è‡ªå®šä¹‰æ‹¦æˆªå™¨ç±»--&gt; &lt;bean class=&quot;com.lagou.interceptor.MyInterceptor1&quot;&gt;&lt;/bean&gt; &lt;/mvc:interceptor&gt; &lt;mvc:interceptor&gt; &lt;!--æ‹¦æˆªå™¨è·¯å¾„é…ç½®--&gt; &lt;mvc:mapping path=&quot;/**&quot;/&gt; &lt;!--è‡ªå®šä¹‰æ‹¦æˆªå™¨ç±»--&gt; &lt;bean class=&quot;com.lagou.interceptor.MyInterceptor2&quot;&gt;&lt;/bean&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt; 5.5 çŸ¥è¯†å°ç»“æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•è¯´æ˜å¦‚ä¸‹ï¼š","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"SpringMVC å…¥é—¨","slug":"SpringMVC-å…¥é—¨","date":"2021-05-02T10:19:43.000Z","updated":"2025-04-17T08:34:52.018Z","comments":true,"path":"2021/05/02/SpringMVC-å…¥é—¨/","link":"","permalink":"http://yournotes.cn/2021/05/02/SpringMVC-%E5%85%A5%E9%97%A8/","excerpt":"","text":"1. SpringMVCç®€ä»‹1.1 MVCæ¨¡å¼MVCæ˜¯è½¯ä»¶å·¥ç¨‹ä¸­çš„ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§åˆ†ç¦»ä¸šåŠ¡é€»è¾‘ä¸æ˜¾ç¤ºç•Œé¢çš„å¼€å‘æ€æƒ³ã€‚ Mï¼ˆmodelï¼‰æ¨¡å‹ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå°è£…å®ä½“ Vï¼ˆviewï¼‰ è§†å›¾ï¼šå±•ç¤ºå†…å®¹ Cï¼ˆcontrollerï¼‰æ§åˆ¶å™¨ï¼šè´Ÿè´£è°ƒåº¦åˆ†å‘ï¼ˆ1.æ¥æ”¶è¯·æ±‚ã€2.è°ƒç”¨æ¨¡å‹ã€3.è½¬å‘åˆ°è§†å›¾ï¼‰ 1.2 SpringMVCæ¦‚è¿°SpringMVC æ˜¯ä¸€ç§åŸºäº Java çš„å®ç° MVC è®¾è®¡æ¨¡å¼çš„è½»é‡çº§ Web æ¡†æ¶ï¼Œå±äºSpringFrameWork çš„åç»­äº§å“ï¼Œå·²ç»èåˆåœ¨ Spring Web Flow ä¸­ã€‚ SpringMVC å·²ç»æˆä¸ºç›®å‰æœ€ä¸»æµçš„MVCæ¡†æ¶ä¹‹ä¸€ï¼Œå¹¶ä¸”éšç€Spring3.0 çš„å‘å¸ƒï¼Œå…¨é¢è¶…è¶Š Struts2ï¼Œæˆä¸ºæœ€ä¼˜ç§€çš„ MVC æ¡†æ¶ã€‚å®ƒé€šè¿‡ä¸€å¥—æ³¨è§£ï¼Œè®©ä¸€ä¸ªç®€å•çš„ Java ç±»æˆä¸ºå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œè€Œæ— é¡»å®ç°ä»»ä½•æ¥å£ã€‚åŒæ—¶å®ƒè¿˜æ”¯æŒ RESTful ç¼–ç¨‹é£æ ¼çš„è¯·æ±‚ã€‚ æ€»ç»“ SpringMVCçš„æ¡†æ¶å°±æ˜¯å°è£…äº†åŸæ¥Servletä¸­çš„å…±æœ‰è¡Œä¸ºï¼›ä¾‹å¦‚ï¼šå‚æ•°å°è£…ï¼Œè§†å›¾è½¬å‘ç­‰ã€‚ 1.3 SpringMVCå¿«é€Ÿå…¥é—¨éœ€æ±‚å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼Œæ‰§è¡Œé€»è¾‘å¹¶è¿›è¡Œè§†å›¾è·³è½¬ã€‚ æ­¥éª¤åˆ†æ åˆ›å»ºwebé¡¹ç›®ï¼Œå¯¼å…¥SpringMVCç›¸å…³åæ ‡ é…ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨ DispathcerServlet ç¼–å†™Controllerç±»å’Œè§†å›¾é¡µé¢ ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€ é…ç½®SpringMVCæ ¸å¿ƒæ–‡ä»¶ spring-mvc.xml 1ï¼‰åˆ›å»ºwebé¡¹ç›®ï¼Œå¯¼å…¥SpringMVCç›¸å…³åæ ‡ 123456789101112131415161718192021222324&lt;!-- è®¾ç½®ä¸ºwebå·¥ç¨‹ --&gt;&lt;packaging&gt;war&lt;/packaging&gt;&lt;dependencies&gt; &lt;!--springMVCåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!--servletåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;!--jspåæ ‡--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰é…ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨DispathcerServlet 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; version=&quot;3.1&quot;&gt; &lt;!--å‰ç«¯æ§åˆ¶å™¨--&gt; &lt;servlet&gt; &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt; &lt;servlet- class&gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;2&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 3ï¼‰ç¼–å†™Controllerç±»å’Œè§†å›¾é¡µé¢ UserController.java 123456public class UserController &#123; public String quick() &#123; System.out.println(&quot;quick running.....&quot;); return &quot;/WEB-INF/pages/success.jsp&quot;; &#125;&#125; &#x2F;WEB-INF&#x2F;pages&#x2F; success.jsp 123456789&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;success&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;è¯·æ±‚æˆåŠŸï¼&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; 4ï¼‰ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€ 12345678@Controller public class UserController &#123; @RequestMapping(&quot;/quick&quot;) public String quick() &#123; System.out.println(&quot;quick running.....&quot;); return &quot;/WEB-INF/pages/success.jsp&quot;; &#125;&#125; 5ï¼‰é…ç½®SpringMVCæ ¸å¿ƒæ–‡ä»¶spring-mvc.xml 123456789101112131415&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--é…ç½®æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou.controller&quot;/&gt;&lt;/beans&gt; 1.4 webå·¥ç¨‹æ‰§è¡Œæµç¨‹ 1.5 çŸ¥è¯†å°ç»“ SpringMVCæ˜¯å¯¹MVCè®¾è®¡æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œå±äºè½»é‡çº§çš„WEBæ¡†æ¶ã€‚ SpringMVCçš„å¼€å‘æ­¥éª¤ï¼š åˆ›å»ºwebé¡¹ç›®ï¼Œå¯¼å…¥SpringMVCç›¸å…³åæ ‡ é…ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨ DispathcerServlet ç¼–å†™Controllerç±»å’Œè§†å›¾é¡µé¢ ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€ é…ç½®SpringMVCæ ¸å¿ƒæ–‡ä»¶ spring-mvc.xml 2.SpringMVCç»„ä»¶æ¦‚è¿°2.1 SpringMVCçš„æ‰§è¡Œæµç¨‹ ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletã€‚ DispatcherServletæ”¶åˆ°è¯·æ±‚è°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ã€‚ å¤„ç†å™¨æ˜ å°„å™¨æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨(å¯ä»¥æ ¹æ®xmlé…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾)ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚ æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletã€‚ DispatcherServletè°ƒç”¨HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ã€‚ HandlerAdapterç»è¿‡é€‚é…è°ƒç”¨å…·ä½“çš„å¤„ç†å™¨(Controllerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ã€‚ Controlleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewã€‚ HandlerAdapterå°†controlleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletã€‚ DispatcherServletå°†ModelAndViewä¼ ç»™ViewResloverè§†å›¾è§£æå™¨ã€‚ ViewResloverè§£æåè¿”å›å…·ä½“Viewã€‚ DispatcherServletæ ¹æ®Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚ DispatcherServletå°†æ¸²æŸ“åçš„è§†å›¾å“åº”å“åº”ç”¨æˆ·ã€‚ 2.2 SpringMVCç»„ä»¶è§£æ å‰ç«¯æ§åˆ¶å™¨ï¼šDispatcherServlet â€‹ ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº MVC æ¨¡å¼ä¸­çš„ Cï¼ŒDispatcherServlet æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒDispatcherServlet çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚ å¤„ç†å™¨æ˜ å°„å™¨ï¼šHandlerMapping â€‹ HandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚æ‰¾åˆ° Handler å³å¤„ç†å™¨ï¼ŒSpringMVC æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨ å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚ å¤„ç†å™¨é€‚é…å™¨ï¼šHandlerAdapter â€‹ é€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹ çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚ å¤„ç†å™¨ï¼šHandlerã€å¼€å‘è€…ç¼–å†™ã€‘ â€‹ å®ƒå°±æ˜¯æˆ‘ä»¬å¼€å‘ä¸­è¦ç¼–å†™çš„å…·ä½“ä¸šåŠ¡æ§åˆ¶å™¨ã€‚ç”± DispatcherServlet æŠŠç”¨æˆ·è¯·æ±‚è½¬å‘åˆ° Handlerã€‚ç”±Handler å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ è§†å›¾è§£æå™¨ï¼šViewResolver â€‹ View Resolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒView Resolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰© ç†è§†å›¾åï¼Œå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ View è§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚ è§†å›¾ï¼šView ã€å¼€å‘è€…ç¼–å†™ã€‘ â€‹ SpringMVC æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„ View è§†å›¾ç±»å‹çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼šjstlViewã€freemarkerViewã€pdfViewç­‰ã€‚æœ€å¸¸ç”¨çš„è§†å›¾å°±æ˜¯ jspã€‚ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±• ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚ 1234567891011121314151617181920&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--é…ç½®æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou.controller&quot; /&gt; &lt;!--å¤„ç†å™¨æ˜ å°„å™¨å’Œå¤„ç†å™¨é€‚é…å™¨åŠŸèƒ½å¢å¼º--&gt; &lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt; &lt;!--è§†å›¾è§£æå™¨--&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/pages/&quot;&gt;&lt;/property&gt; &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; 2.3 SpringMVCæ³¨è§£è§£æ@Controller â€‹ SpringMVCåŸºäºSpringå®¹å™¨ï¼Œæ‰€ä»¥åœ¨è¿›è¡ŒSpringMVCæ“ä½œæ—¶ï¼Œéœ€è¦å°†Controllerå­˜å‚¨åˆ°Springå®¹å™¨ä¸­ï¼Œå¦‚æœä½¿ç”¨@Controlleræ³¨è§£æ ‡æ³¨çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨ï¼š 12&lt;!--é…ç½®æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou.controller&quot;/&gt; @RequestMapping ä½œç”¨ï¼š â€‹ ç”¨äºå»ºç«‹è¯·æ±‚ URL å’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³» ä½ç½®ï¼š ç±»ä¸Šï¼šè¯·æ±‚URLçš„ç¬¬ä¸€çº§è®¿é—®ç›®å½•ã€‚æ­¤å¤„ä¸å†™çš„è¯ï¼Œå°±ç›¸å½“äºåº”ç”¨çš„æ ¹ç›®å½•ã€‚å†™çš„è¯éœ€è¦ä»¥&#x2F;å¼€å¤´ã€‚ æ–¹æ³•ä¸Šï¼šè¯·æ±‚URLçš„ç¬¬äºŒçº§è®¿é—®ç›®å½•ï¼Œå’Œä¸€çº§ç›®å½•ç»„æˆä¸€ä¸ªå®Œæ•´çš„ URL è·¯å¾„ã€‚ å±æ€§ï¼š valueï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„URLã€‚å®ƒå’Œpathå±æ€§çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ methodï¼šç”¨æ¥é™å®šè¯·æ±‚çš„æ–¹å¼ paramsï¼šç”¨æ¥é™å®šè¯·æ±‚å‚æ•°çš„æ¡ä»¶ ä¾‹å¦‚ï¼šparams&#x3D;{â€œaccountNameâ€} è¡¨ç¤ºè¯·æ±‚å‚æ•°ä¸­å¿…é¡»æœ‰accountName â€‹ prams&#x3D;{â€œmoney!100â€} è¡¨ç¤ºè¯·æ±‚å‚æ•°ä¸­moneyä¸èƒ½æ˜¯100 2.4 çŸ¥è¯†å°ç»“ SpringMVCçš„ä¸‰å¤§ç»„ä»¶ å¤„ç†å™¨æ˜ å°„å™¨ï¼šHandlerMapping å¤„ç†å™¨é€‚é…å™¨ï¼šHandlerAdapter è§†å›¾è§£æå™¨ï¼šView Resolver å¼€å‘è€…ç¼–å†™ å¤„ç†å™¨ï¼šHandler è§†å›¾ï¼šView 3. SpringMVCçš„è¯·æ±‚3.1 è¯·æ±‚å‚æ•°ç±»å‹ä»‹ç»å®¢æˆ·ç«¯è¯·æ±‚å‚æ•°çš„æ ¼å¼æ˜¯ï¼šname=value&amp;name=valueâ€¦â€¦ æœåŠ¡å™¨è¦è·å–è¯·æ±‚çš„å‚æ•°çš„æ—¶å€™è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæœ‰æ—¶è¿˜éœ€è¦è¿›è¡Œæ•°æ®çš„å°è£… SpringMVCå¯ä»¥æ¥æ”¶å¦‚ä¸‹ç±»å‹çš„å‚æ•°ï¼š åŸºæœ¬ç±»å‹å‚æ•° å¯¹è±¡ç±»å‹å‚æ•° æ•°ç»„ç±»å‹å‚æ•° é›†åˆç±»å‹å‚æ•° 3.2 è·å–åŸºæœ¬ç±»å‹å‚æ•°Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•çš„å‚æ•°åç§°è¦ä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚å¹¶ä¸”èƒ½è‡ªåŠ¨åšç±»å‹è½¬æ¢ï¼›è‡ªåŠ¨çš„ç±»å‹è½¬æ¢æ˜¯æŒ‡ä»Stringå‘å…¶ä»–ç±»å‹çš„è½¬æ¢ã€‚ 123&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/user/simpleParam?id=1&amp;username=æ°å…‹&quot;&gt; åŸºæœ¬ç±»å‹ &lt;/a&gt; 123456@RequestMapping(&quot;/simpleParam&quot;) public String simpleParam(Integer id,String username) &#123; System.out.println(id); System.out.println(username); return &quot;success&quot;; &#125; 3.3 è·å–å¯¹è±¡ç±»å‹å‚æ•°Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•å‚æ•°çš„POJOå±æ€§åä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚ 123456789&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/user/pojoParam&quot; method=&quot;post&quot;&gt; ç¼–å·ï¼š &lt;input type=&quot;text&quot; name=&quot;id&quot;&gt; &lt;br&gt; ç”¨æˆ·åï¼š &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt; &lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;å¯¹è±¡ç±»å‹&quot;&gt;&lt;/form&gt; 12345public class User &#123; Integer id; String username; // setter getter... &#125; 12345@RequestMapping(&quot;/pojoParam&quot;) public String pojoParam(User user) &#123; System.out.println(user); return &quot;success&quot;; &#125; 3.4 ä¸­æ–‡ä¹±ç è¿‡æ»¤å™¨å½“postè¯·æ±‚æ—¶ï¼Œæ•°æ®ä¼šå‡ºç°ä¹±ç ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æ»¤å™¨æ¥è¿›è¡Œç¼–ç çš„è¿‡æ»¤ã€‚ 1234567891011121314&lt;!--é…ç½®å…¨å±€è¿‡æ»¤çš„filter--&gt;&lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter- class&gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; 3.5 è·å–æ•°ç»„ç±»å‹å‚æ•°Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•æ•°ç»„åç§°ä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚ 12345678910&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/user/arrayParam&quot;&gt; ç¼–å·ï¼š &lt;br&gt; &lt;input type=&quot;checkbox&quot; name=&quot;ids&quot; value=&quot;1&quot;&gt;1&lt;br&gt; &lt;input type=&quot;checkbox&quot; name=&quot;ids&quot; value=&quot;2&quot;&gt;2&lt;br&gt; &lt;input type=&quot;checkbox&quot; name=&quot;ids&quot; value=&quot;3&quot;&gt;3&lt;br&gt; &lt;input type=&quot;checkbox&quot; name=&quot;ids&quot; value=&quot;4&quot;&gt;4&lt;br&gt; &lt;input type=&quot;checkbox&quot; name=&quot;ids&quot; value=&quot;5&quot;&gt;5&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;æ•°ç»„ç±»å‹&quot;&gt;&lt;/form&gt; 12345@RequestMapping(&quot;/arrayParam&quot;) public String arrayParam(Integer[] ids) &#123; System.out.println(Arrays.toString(ids)); return &quot;success&quot;;&#125; 3.6 è·å–é›†åˆï¼ˆå¤æ‚ï¼‰ç±»å‹å‚æ•°è·å¾—é›†åˆå‚æ•°æ—¶ï¼Œè¦å°†é›†åˆå‚æ•°åŒ…è£…åˆ°ä¸€ä¸ªPOJOä¸­æ‰å¯ä»¥ã€‚ 123456789101112131415161718192021222324252627282930&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/user/queryParam&quot; method=&quot;post&quot;&gt; æœç´¢å…³é”®å­—ï¼š &lt;input type=&quot;text&quot; name=&quot;keyword&quot;&gt; &lt;br&gt; userå¯¹è±¡ï¼š &lt;input type=&quot;text&quot; name=&quot;user.id&quot; placeholder=&quot;ç¼–å·&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;user.username&quot; placeholder=&quot;å§“å&quot;&gt; &lt;br&gt; listé›†åˆ &lt;br&gt; ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š &lt;input type=&quot;text&quot; name=&quot;userList[0].id&quot; placeholder=&quot;ç¼–å·&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;userList[0].username&quot; placeholder=&quot;å§“å&quot;&gt; &lt;br&gt; ç¬¬äºŒä¸ªå…ƒç´ ï¼š &lt;input type=&quot;text&quot; name=&quot;userList[1].id&quot; placeholder=&quot;ç¼–å·&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;userList[1].username&quot; placeholder=&quot;å§“å&quot;&gt; &lt;br&gt; mapé›†åˆ &lt;br&gt; ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š &lt;input type=&quot;text&quot; name=&quot;userMap[&#x27;u1&#x27;].id&quot; placeholder=&quot;ç¼–å·&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;userMap[&#x27;u1&#x27;].username&quot; placeholder=&quot;å§“å&quot;&gt; &lt;br&gt; ç¬¬äºŒä¸ªå…ƒç´ ï¼š &lt;input type=&quot;text&quot; name=&quot;userMap[&#x27;u2&#x27;].id&quot; placeholder=&quot;ç¼–å·&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;userMap[&#x27;u2&#x27;].username&quot; placeholder=&quot;å§“å&quot;&gt; &lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;å¤æ‚ç±»å‹&quot;&gt;&lt;/form&gt; 123456public class QueryVo &#123; private String keyword; private User user; private List&lt;User&gt; userList; private Map&lt;String, User&gt; userMap;&#125; 12345@RequestMapping(&quot;/queryParam&quot;) public String queryParam(QueryVo queryVo) &#123; System.out.println(queryVo); return &quot;success&quot;;&#125; 3.7 è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨SpringMVC é»˜è®¤å·²ç»æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ç±»å‹è½¬æ¢å™¨ï¼›ä¾‹å¦‚ï¼šå®¢æˆ·ç«¯æäº¤çš„å­—ç¬¦ä¸²è½¬æ¢æˆintå‹è¿›è¡Œå‚æ•°è®¾ç½®ï¼Œæ—¥æœŸæ ¼å¼ç±»å‹è¦æ±‚ä¸ºï¼šyyyy&#x2F;MM&#x2F;dd ä¸ç„¶çš„è¯ä¼šæŠ¥é”™ï¼Œå¯¹äºç‰¹æœ‰çš„è¡Œä¸ºï¼ŒSpringMVCæä¾›äº†è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨æ–¹ä¾¿å¼€å‘è€…è‡ªå®šä¹‰å¤„ç†ã€‚ 12345&lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/user/converterParam&quot;&gt; ç”Ÿæ—¥ï¼š &lt;input type=&quot;text&quot; name=&quot;birthday&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨&quot;&gt;&lt;/form&gt; 1234567891011121314public class DateConverter implements Converter&lt;String, Date&gt; &#123; public Date convert(String dateStr) &#123; //å°†æ—¥æœŸå­—ç¬¦ä¸²è½¬æ¢æˆæ—¥æœŸå¯¹è±¡ è¿”å› SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); Date date = null; try &#123; date = format.parse(dateStr); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; return date; &#125;&#125; 1234567891011&lt;!--å¤„ç†å™¨æ˜ å°„å™¨å’Œé€‚é…å™¨å¢å¼º--&gt;&lt;mvc:annotation-driven conversion-service=&quot;conversionService&quot;&gt;&lt;/mvc:annotation- driven&gt;&lt;!--è‡ªå®šä¹‰è½¬æ¢å™¨é…ç½®--&gt;&lt;bean id=&quot;conversionService&quot; class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt; &lt;property name=&quot;converters&quot;&gt; &lt;set&gt; &lt;bean class=&quot;com.lagou.converter.DateConverter&quot;&gt;&lt;/bean&gt; &lt;/set&gt; &lt;/property&gt;&lt;/bean&gt; 12345@RequestMapping(&quot;/converterParam&quot;) public String converterParam(Date birthday) &#123; System.out.println(birthday); return &quot;success&quot;;&#125; 3.8 ç›¸å…³æ³¨è§£@RequestParam å½“è¯·æ±‚çš„å‚æ•°nameåç§°ä¸Controllerçš„ä¸šåŠ¡æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦é€šè¿‡@RequestParamæ³¨è§£æ˜¾ç¤ºçš„ç»‘å®š 123&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/user/findByPage?pageNo=2&quot;&gt; åˆ†é¡µæŸ¥è¯¢ &lt;/a&gt; 1234567891011121314/* * @RequestParam() * æ³¨è§£ defaultValue * è®¾ç½®å‚æ•°é»˜è®¤å€¼ name * åŒ¹é…é¡µé¢ä¼ é€’å‚æ•°çš„åç§° required * è®¾ç½®æ˜¯å¦å¿…é¡»ä¼ é€’å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼› * å¦‚æœè®¾ç½®äº†é»˜è®¤å€¼ï¼Œå€¼è‡ªåŠ¨æ”¹ä¸ºfalse */@RequestMapping(&quot;/findByPage&quot;) public String findByPage(@RequestParam(name = &quot;pageNo&quot;, defaultValue = &quot;1&quot;) Integer pageNum, @RequestParam(defaultValue = &quot;5&quot;) Integer pageSize) &#123; System.out.println(pageNum); System.out.println(pageSize); return &quot;success&quot;;&#125; @RequestHeader è·å–è¯·æ±‚å¤´çš„æ•°æ®ã€‚ 12345@RequestMapping(&quot;/requestHead&quot;) public String requestHead(@RequestHeader(&quot;cookie&quot;) String cookie) &#123; System.out.println(cookie); return &quot;success&quot;;&#125; @CookieValue è·å–cookieä¸­çš„æ•°æ®ã€‚ 12345@RequestMapping(&quot;/cookieValue&quot;) public String cookieValue(@CookieValue(&quot;JSESSIONID&quot;) String jesessionId) &#123; System.out.println(jesessionId); return &quot;success&quot;;&#125; 3.9 è·å–Servletç›¸å…³APISpringMVCæ”¯æŒä½¿ç”¨åŸå§‹ServletAPIå¯¹è±¡ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ³¨å…¥ï¼Œå¸¸ç”¨çš„å¯¹è±¡å¦‚ä¸‹ï¼š 1234567@RequestMapping(&quot;/servletAPI&quot;) public String servletAPI(HttpServletRequest request, HttpServletResponse response, HttpSession session) &#123; System.out.println(request); System.out.println(response); System.out.println(session); return &quot;success&quot;;&#125; 4. SpringMVCçš„å“åº”4.1 SpringMVCå“åº”æ–¹å¼ä»‹ç»é¡µé¢è·³è½¬ è¿”å›å­—ç¬¦ä¸²é€»è¾‘è§†å›¾ voidåŸå§‹ServletAPI ModelAndView è¿”å›æ•°æ® ç›´æ¥è¿”å›å­—ç¬¦ä¸²æ•°æ® å°†å¯¹è±¡æˆ–é›†åˆè½¬ä¸ºjsonè¿”å›ï¼ˆä»»åŠ¡äºŒæ¼”ç¤ºï¼‰ 4.2 è¿”å›å­—ç¬¦ä¸²é€»è¾‘è§†å›¾ç›´æ¥è¿”å›å­—ç¬¦ä¸²ï¼šæ­¤ç§æ–¹å¼ä¼šå°†è¿”å›çš„å­—ç¬¦ä¸²ä¸è§†å›¾è§£æå™¨çš„å‰åç¼€æ‹¼æ¥åè·³è½¬åˆ°æŒ‡å®šé¡µé¢ 1234@RequestMapping(&quot;/returnString&quot;) public String returnString() &#123; return &quot;success&quot;;&#125; 4.3 voidåŸå§‹ServletAPIæˆ‘ä»¬å¯ä»¥é€šè¿‡requestã€responseå¯¹è±¡å®ç°å“åº” 1234567891011@RequestMapping(&quot;/returnVoid&quot;) public void returnVoid(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; // 1.é€šè¿‡responseç›´æ¥å“åº”æ•°æ® response.setContentType(&quot;text/html;charset=utf-8&quot;); response.getWriter().write(&quot;æ‹‰å‹¾ç½‘&quot;); request.setAttribute(&quot;username&quot;, &quot;æ‹‰å‹¾æ•™è‚²&quot;); // 2.é€šè¿‡requestå®ç°è½¬å‘ request.getRequestDispatcher(&quot;/WEB-INF/pages/success.jsp&quot;).forward(request, response); // 3.é€šè¿‡responseå®ç°é‡å®šå‘ response.sendRedirect(request.getContextPath() + &quot;/index.jsp&quot;);&#125; 4.4 è½¬å‘å’Œé‡å®šå‘ä¼ä¸šå¼€å‘æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨è¿”å›å­—ç¬¦ä¸²é€»è¾‘è§†å›¾å®ç°é¡µé¢çš„è·³è½¬ï¼Œè¿™ç§æ–¹å¼å…¶å®å°±æ˜¯è¯·æ±‚è½¬å‘ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥å†™æˆï¼šforwardè½¬å‘ å¦‚æœç”¨äº†forwardï¼šåˆ™è·¯å¾„å¿…é¡»å†™æˆå®é™…è§†å›¾urlï¼Œä¸èƒ½å†™é€»è¾‘è§†å›¾ã€‚å®ƒç›¸å½“äºï¼š 1request.getRequestDispatcher(&quot;url&quot;).forward(request,response) ä½¿ç”¨è¯·æ±‚è½¬å‘ï¼Œæ—¢å¯ä»¥è½¬å‘åˆ°jspï¼Œä¹Ÿå¯ä»¥è½¬å‘åˆ°å…¶ä»–çš„æ§åˆ¶å™¨æ–¹æ³•ã€‚ 12345@RequestMapping(&quot;/forward&quot;) public String forward(Model model) &#123; model.addAttribute(&quot;username&quot;, &quot;æ‹‰å‹¾æ‹›è˜&quot;); return &quot;forward:/WEB-INF/pages/success.jsp&quot;;&#125; Redirecté‡å®šå‘ æˆ‘ä»¬å¯ä»¥ä¸å†™è™šæ‹Ÿç›®å½•ï¼ŒspringMVCæ¡†æ¶ä¼šè‡ªåŠ¨æ‹¼æ¥ï¼Œå¹¶ä¸”å°†Modelä¸­çš„æ•°æ®æ‹¼æ¥åˆ°urlåœ°å€ä¸Š 12345@RequestMapping(&quot;/redirect&quot;) public String redirect(Model model) &#123; model.addAttribute(&quot;username&quot;, &quot;æ‹‰å‹¾æ•™è‚²&quot;); return &quot;redirect:/index.jsp&quot;; &#125; 4.5 ModelAndView4.4.1 æ–¹å¼ä¸€åœ¨Controllerä¸­æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ModelAndViewå¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®è§†å›¾åç§° 12345678910@RequestMapping(&quot;/returnModelAndView1&quot;) public ModelAndView returnModelAndView1() &#123; /* Model:æ¨¡å‹ ä½œç”¨å°è£…æ•°æ® Viewï¼šè§†å›¾ ä½œç”¨å±•ç¤ºæ•°æ® */ ModelAndView modelAndView = new ModelAndView(); //è®¾ç½®æ¨¡å‹æ•°æ® modelAndView.addObject(&quot;username&quot;, &quot; lagou&quot;); //è®¾ç½®è§†å›¾åç§° modelAndView.setViewName(&quot;success&quot;); return modelAndView;&#125; 4.4.2 æ–¹å¼äºŒåœ¨Controllerä¸­æ–¹æ³•å½¢å‚ä¸Šç›´æ¥å£°æ˜ModelAndViewï¼Œæ— éœ€åœ¨æ–¹æ³•ä¸­è‡ªå·±åˆ›å»ºï¼Œåœ¨æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨è¯¥å¯¹è±¡è®¾ç½®è§†å›¾ï¼ŒåŒæ ·å¯ä»¥è·³è½¬é¡µé¢ 12345678910@RequestMapping(&quot;/returnModelAndView1&quot;) public ModelAndView returnModelAndView1() &#123; /* Model:æ¨¡å‹ ä½œç”¨å°è£…æ•°æ® Viewï¼šè§†å›¾ ä½œç”¨å±•ç¤ºæ•°æ® */ ModelAndView modelAndView = new ModelAndView(); //è®¾ç½®æ¨¡å‹æ•°æ® modelAndView.addObject(&quot;username&quot;, &quot; lagou&quot;); //è®¾ç½®è§†å›¾åç§° modelAndView.setViewName(&quot;success&quot;); return modelAndView;&#125; 4.6 @SessionAttributeså¦‚æœåœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´å…±ç”¨æ•°æ®ï¼Œåˆ™å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸Šæ ‡æ³¨ä¸€ä¸ª @SessionAttributes,é…ç½®éœ€è¦åœ¨sessionä¸­å­˜æ”¾çš„æ•°æ®èŒƒå›´ï¼ŒSpring MVCå°†å­˜æ”¾åœ¨modelä¸­å¯¹åº”çš„æ•°æ®æš‚å­˜åˆ° HttpSessionä¸­ã€‚ æ³¨æ„ï¼š@SessionAttributesåªèƒ½å®šä¹‰åœ¨ç±»ä¸Š 1234567891011121314@Controller @SessionAttributes(&quot;username&quot;) //å‘requeståŸŸå­˜å…¥çš„keyä¸ºusernameæ—¶ï¼ŒåŒæ­¥åˆ°sessionåŸŸä¸­ public class UserController &#123; @RequestMapping(&quot;/forward&quot;) public String forward(Model model) &#123; model.addAttribute(&quot;username&quot;, &quot;å­æ…•&quot;); return &quot;forward:/WEB-INF/pages/success.jsp&quot;; &#125; @RequestMapping(&quot;/returnString&quot;) public String returnString() &#123; return &quot;success&quot;; &#125;&#125; 4.7 çŸ¥è¯†å°ç»“ é¡µé¢è·³è½¬é‡‡ç”¨è¿”å›å­—ç¬¦ä¸²é€»è¾‘è§†å›¾ forwardè½¬å‘: å¯ä»¥é€šè¿‡Modelå‘requeståŸŸä¸­è®¾ç½®æ•°æ® redirecté‡å®šå‘: ç›´æ¥å†™èµ„æºè·¯å¾„å³å¯ï¼Œè™šæ‹Ÿç›®å½•springMVCæ¡†æ¶è‡ªåŠ¨å®Œæˆæ‹¼æ¥ æ•°æ®å­˜å‚¨åˆ°requeståŸŸä¸­ : model.addAttribute(&quot;username&quot;, &quot;æœ¨ç“œç…²é¸¡è„š&quot;); 5. é™æ€èµ„æºè®¿é—®çš„å¼€å¯å½“æœ‰é™æ€èµ„æºéœ€è¦åŠ è½½æ—¶ï¼Œæ¯”å¦‚jqueryæ–‡ä»¶ï¼Œé€šè¿‡è°·æ­Œå¼€å‘è€…å·¥å…·æŠ“åŒ…å‘ç°ï¼Œæ²¡æœ‰åŠ è½½åˆ°jqueryæ–‡ä»¶ï¼ŒåŸå› æ˜¯SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„url-patterné…ç½®çš„æ˜¯ &#x2F;ï¼ˆç¼ºçœï¼‰,ä»£è¡¨å¯¹æ‰€æœ‰çš„é™æ€èµ„æºéƒ½è¿›è¡Œå¤„ç†æ“ä½œï¼Œè¿™æ ·å°±ä¸ä¼šæ‰§è¡ŒTomcatå†…ç½®çš„DefaultServletå¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æŒ‡å®šæ”¾è¡Œé™æ€èµ„æºï¼š æ–¹å¼ä¸€ 1234&lt;!--åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ”¾è¡Œèµ„æº--&gt; &lt;mvc:resources mapping=&quot;/js/**&quot; location=&quot;/js/&quot;/&gt; &lt;mvc:resources mapping=&quot;/css/**&quot; location=&quot;/css/&quot;/&gt; &lt;mvc:resources mapping=&quot;/img/**&quot; location=&quot;/img/&quot;/&gt; æ–¹å¼äºŒ 12&lt;!--åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­å¼€å¯DefaultServletå¤„ç†é™æ€èµ„æº--&gt; &lt;mvc:default-servlet-handler/&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Spring JDBCtemplate&å£°æ˜å¼äº‹åŠ¡","slug":"Spring-JDBCtemplate-å£°æ˜å¼äº‹åŠ¡","date":"2021-04-25T02:35:46.000Z","updated":"2025-04-17T08:34:52.017Z","comments":true,"path":"2021/04/25/Spring-JDBCtemplate-å£°æ˜å¼äº‹åŠ¡/","link":"","permalink":"http://yournotes.cn/2021/04/25/Spring-JDBCtemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/","excerpt":"","text":"1. Springçš„JdbcTemplateä¸»è¦æ˜¯å­¦ä¹ å£°æ˜æ˜¯äº‹åŠ¡ï¼Œé¡ºä¾¿ç”¨ä¸‹Springçš„JdbcTemplateæ¥åšæ¼”ç¤º 1.1 JdbcTemplateæ˜¯ä»€ä¹ˆï¼ŸJdbcTemplateæ˜¯springæ¡†æ¶ä¸­æä¾›çš„ä¸€ä¸ªæ¨¡æ¿å¯¹è±¡ï¼Œæ˜¯å¯¹åŸå§‹ç¹ççš„Jdbc APIå¯¹è±¡çš„ç®€å•å°è£…ã€‚ æ ¸å¿ƒå¯¹è±¡ 1JdbcTemplate jdbcTemplate = new JdbcTemplate(DataSource dataSource); æ ¸å¿ƒæ–¹æ³• 12345int update(); //æ‰§è¡Œå¢ã€åˆ ã€æ”¹è¯­å¥ List&lt;T&gt; query(); //æŸ¥è¯¢å¤šä¸ª T queryForObject(); //æŸ¥è¯¢ä¸€ä¸ª new BeanPropertyRowMapper&lt;&gt;(); //å®ç°ORMæ˜ å°„å°è£… ä¸¾ä¸ªæ —å­ æŸ¥è¯¢æ•°æ®åº“æ‰€æœ‰è´¦æˆ·ä¿¡æ¯åˆ°Accountå®ä½“ä¸­ 1234567891011public class JdbcTemplateTest &#123; @Test public void testFindAll() throws Exception &#123; // åˆ›å»ºæ ¸å¿ƒå¯¹è±¡ JdbcTemplate jdbcTemplate = new JdbcTemplate(JdbcUtils.getDataSource()); // ç¼–å†™sql String sql = &quot;select * from account&quot;; // æ‰§è¡Œsql List&lt;Account&gt; list = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt; (Account.class)); &#125;&#125; 1.2 Springæ•´åˆJdbcTemplateéœ€æ±‚ åŸºäºSpringçš„xmlé…ç½®å®ç°è´¦æˆ·çš„CRUDæ¡ˆä¾‹ æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ ç¼–å†™Accountå®ä½“ç±» ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ä»£ç  1ï¼‰åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.15&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰ç¼–å†™Accountå®ä½“ç±» 12345public class Account &#123; private Integer id; private String name; private double money;&#125; 3ï¼‰ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» 1234567public interface AccountDao &#123; public List&lt;Account&gt; findAll(); public Account findById(Integer id); public void save(Account account); public void update(Account account); public void delete(Integer id);&#125; 1234567891011121314151617181920212223242526272829303132333435363738@Repository public class AccountDaoImpl implements AccountDao &#123; @Autowired private JdbcTemplate jdbcTemplate; @Override public List&lt;Account&gt; findAll() &#123; // ç¼–å†™sql String sql = &quot;select * from account&quot;; // æ‰§è¡Œsql return jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;&gt; (Account.class)); &#125; @Override public Account findById(Integer id) &#123; // ç¼–å†™sql String sql = &quot;select * from account where id = ?&quot;; // æ‰§è¡Œsql return jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;&gt; (Account.class),id); &#125; @Override public void save(Account account) &#123; // ç¼–å†™sql String sql = &quot;insert into account values(null,?,?)&quot;; // æ‰§è¡Œsql jdbcTemplate.update(sql, account.getName(), account.getMoney()); &#125; @Override public void update(Account account) &#123; // ç¼–å†™sql String sql = &quot;update account set name = ?,money = ? where id = ?&quot;; // æ‰§è¡Œsql jdbcTemplate.update(sql, account.getName(), account.getMoney(),account.getId()); &#125; @Override public void delete(Integer id) &#123; // ç¼–å†™sql String sql = &quot;delete from account where id = ?&quot;; // æ‰§è¡Œsql jdbcTemplate.update(sql, id); &#125;&#125; 4ï¼‰ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» 1234567public interface AccountService &#123; public List&lt;Account&gt; findAll(); public Account findById(Integer id); public void save(Account account); public void update(Account account); public void delete(Integer id);&#125; 12345678910111213141516171819202122232425@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Override public List&lt;Account&gt; findAll() &#123; return accountDao.findAll(); &#125; @Override public Account findById(Integer id) &#123; return accountDao.findById(id); &#125; @Override public void save(Account account) &#123; accountDao.save(account); &#125; @Override public void update(Account account) &#123; accountDao.update(account); &#125; @Override public void delete(Integer id) &#123; accountDao.delete(id); &#125;&#125; 5ï¼‰ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ 12345678910111213141516171819202122&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;context:component-scan base-package=&quot;com.lagou&quot;/&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;constructor-arg name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt;&lt;/beans&gt; 6ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class AccountServiceTest &#123; @Autowired private AccountService accountService; //æµ‹è¯•ä¿å­˜ @Test public void testSave() &#123; Account account = new Account(); account.setName(&quot;lucy&quot;); account.setMoney(100d); accountService.save(account); &#125; //æµ‹è¯•æŸ¥è¯¢ @Test public void testFindById() &#123; Account account = accountService.findById(3); System.out.println(account); &#125; //æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰ ã€ @Test public void testFindAll() &#123; List&lt;Account&gt; accountList = accountService.findAll(); for (Account account : accountList) &#123; System.out.println(account); &#125; &#125; //æµ‹è¯•ä¿®æ”¹ @Test public void testUpdate() &#123; Account account = new Account(); account.setId(3); account.setName(&quot;rose&quot;); account.setMoney(2000d); accountService.update(account); &#125; //æµ‹è¯•åˆ é™¤ @Test public void testDelete() &#123; accountService.delete(3); &#125;&#125; 1.4 å®ç°è½¬è´¦æ¡ˆä¾‹æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ ç¼–å†™Accountå®ä½“ç±» ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ä»£ç  1ï¼‰åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.15&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰ç¼–å†™Accountå®ä½“ç±» 123456public class Account &#123; private Integer id; private String name; private double money; // setter getter....&#125; 3ï¼‰ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» 1234public interface AccountDao &#123; public void out(String outUser, double money); public void in(String inUser, double money);&#125; 12345678910111213@Repository public class AccountDaoImpl implements AccountDao &#123; @Autowired private JdbcTemplate jdbcTemplate; @Override public void out(String outUser, double money) &#123; jdbcTemplate.update(&quot;update account set money = money - ? where name = ?&quot;, money, outUser); &#125; @Override public void in(String inUser, double money) &#123; jdbcTemplate.update(&quot;update account set money = money + ? where name = ?&quot;, money, inUser); &#125;&#125; 4ï¼‰ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» 123public interface AccountService &#123; public void transfer(String outUser, String inUser, double money);&#125; 12345678910@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Override public void transfer(String outUser, String inUser, double money) &#123; accountDao.out(outUser, money); accountDao.in(inUser, money); &#125;&#125; 5ï¼‰ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ 1234567891011121314151617181920212223242526272829&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--IOCæ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou&quot;/&gt; &lt;!--åŠ è½½jdbcé…ç½®æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!--æŠŠæ•°æ®åº“è¿æ¥æ± äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠJdbcTemplateäº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt; &lt;constructor-arg name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt;&lt;/beans&gt; 6ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  12345678910@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class AccountServiceTest &#123; @Autowired private AccountService accountService; @Test public void testTransfer() throws Exception &#123; accountService.transfer(&quot;tom&quot;, &quot;jerry&quot;, 100d); &#125;&#125; 2. Springçš„äº‹åŠ¡2.1 Springä¸­çš„äº‹åŠ¡æ§åˆ¶æ–¹å¼Springçš„äº‹åŠ¡æ§åˆ¶å¯ä»¥åˆ†ä¸ºç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶å’Œå£°æ˜å¼äº‹åŠ¡æ§åˆ¶ã€‚ ç¼–ç¨‹å¼å¼€å‘è€…ç›´æ¥æŠŠäº‹åŠ¡çš„ä»£ç å’Œä¸šåŠ¡ä»£ç è€¦åˆåˆ°ä¸€èµ·ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¸ç”¨ã€‚ å£°æ˜å¼å¼€å‘è€…é‡‡ç”¨é…ç½®çš„æ–¹å¼æ¥å®ç°çš„äº‹åŠ¡æ§åˆ¶ï¼Œä¸šåŠ¡ä»£ç ä¸äº‹åŠ¡ä»£ç å®ç°è§£è€¦åˆï¼Œä½¿ç”¨çš„AOPæ€æƒ³ã€‚ 2.2 ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ç›¸å…³å¯¹è±¡ã€äº†è§£ã€‘2.2.1 PlatformTransactionManagerPlatformTransactionManageræ¥å£ï¼Œæ˜¯springçš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œé‡Œé¢æä¾›äº†æˆ‘ä»¬å¸¸ç”¨çš„æ“ä½œäº‹åŠ¡çš„æ–¹æ³•ã€‚ æ–¹æ³• è¯´æ˜ TransactionStatus getTransaction(TransactionDefinition definition) è·å–äº‹åŠ¡çš„çŠ¶æ€ä¿¡æ¯ void commit(TransactionStatus status)ï¼› æäº¤äº‹åŠ¡ void rollback(TransactionStatus status)ï¼› å›æ»šäº‹åŠ¡ æ³¨æ„ PlatformTransactionManager æ˜¯æ¥å£ç±»å‹ï¼Œä¸åŒçš„ Dao å±‚æŠ€æœ¯åˆ™æœ‰ä¸åŒçš„å®ç°ç±»ã€‚ Daoå±‚æŠ€æœ¯æ˜¯jdbcTemplateæˆ–mybatisæ—¶ï¼š DataSourceTransactionManager Daoå±‚æŠ€æœ¯æ˜¯hibernateæ—¶ï¼š HibernateTransactionManager Daoå±‚æŠ€æœ¯æ˜¯JPAæ—¶ï¼š JpaTransactionManager 2.2.2 TransactionDefinitionTransactionDefinitionæ¥å£æä¾›äº‹åŠ¡çš„å®šä¹‰ä¿¡æ¯ï¼ˆäº‹åŠ¡éš”ç¦»çº§åˆ«ã€äº‹åŠ¡ä¼ æ’­è¡Œä¸ºç­‰ç­‰ï¼‰ æ–¹æ³• è¯´æ˜ int getIsolationLevel() è·å¾—äº‹åŠ¡çš„éš”ç¦»çº§åˆ« int getPropogationBehavior() è·å¾—äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º int getTimeout() è·å¾—è¶…æ—¶æ—¶é—´ boolean isReadOnly() æ˜¯å¦åªè¯» 1ï¼‰äº‹åŠ¡éš”ç¦»çº§åˆ« è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥è§£å†³äº‹åŠ¡å¹¶å‘äº§ç”Ÿçš„é—®é¢˜ï¼Œå¦‚è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œè™šè¯»ï¼ˆå¹»è¯»ï¼‰ã€‚ ISOLATION_DEFAULT ä½¿ç”¨æ•°æ®åº“é»˜è®¤çº§åˆ« ISOLATION_READ_UNCOMMITTED è¯»æœªæäº¤ ISOLATION_READ_COMMITTED è¯»å·²æäº¤ ISOLATION_REPEATABLE_READ å¯é‡å¤è¯» ISOLATION_SERIALIZABLE ä¸²è¡ŒåŒ– 2ï¼‰äº‹åŠ¡ä¼ æ’­è¡Œä¸º äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæŒ‡çš„å°±æ˜¯å½“ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•ã€è¢«ã€‘å¦ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œåº”è¯¥å¦‚ä½•è¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚ å‚æ•° è¯´æ˜ REQUIRED å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ã€‚ä¸€èˆ¬çš„é€‰æ‹©ï¼ˆé»˜è®¤å€¼ï¼‰ SUPPORTS æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼ˆæ²¡æœ‰äº‹åŠ¡ï¼‰ MANDATORY ä½¿ç”¨å½“å‰çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ REQUERS_NEW æ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰åœ¨äº‹åŠ¡ä¸­ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ· NOT_SUPPORTED ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ· NEVER ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠ›å‡ºå¼‚å¸¸ NESTED å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡ŒREQUIRED ç±»ä¼¼çš„æ“ä½œ read-onlyï¼ˆæ˜¯å¦åªè¯»ï¼‰ï¼šå»ºè®®æŸ¥è¯¢æ—¶è®¾ç½®ä¸ºåªè¯» timeoutï¼ˆè¶…æ—¶æ—¶é—´ï¼‰ï¼šé»˜è®¤å€¼æ˜¯-1ï¼Œæ²¡æœ‰è¶…æ—¶é™åˆ¶ã€‚å¦‚æœæœ‰ï¼Œä»¥ç§’ä¸ºå•ä½è¿›è¡Œè®¾ç½® 2.2.3 TransactionStatusTransactionStatus æ¥å£æä¾›çš„æ˜¯äº‹åŠ¡å…·ä½“çš„è¿è¡ŒçŠ¶æ€ã€‚ æ–¹æ³• è¯´æ˜ boolean isNewTransaction() æ˜¯å¦æ˜¯æ–°äº‹åŠ¡ boolean hasSavepoint() æ˜¯å¦æ˜¯å›æ»šç‚¹ boolean isRollbackOnly() äº‹åŠ¡æ˜¯å¦å›æ»š boolean isCompleted() äº‹åŠ¡æ˜¯å¦å®Œæˆ å¯ä»¥ç®€å•çš„ç†è§£ä¸‰è€…çš„å…³ç³»ï¼šäº‹åŠ¡ç®¡ç†å™¨é€šè¿‡è¯»å–äº‹åŠ¡å®šä¹‰å‚æ•°è¿›è¡Œäº‹åŠ¡ç®¡ç†ï¼Œç„¶åä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„äº‹åŠ¡çŠ¶æ€ã€‚ 2.2.4 å®ç°ä»£ç 1ï¼‰é…ç½®æ–‡ä»¶ 1234&lt;!--äº‹åŠ¡ç®¡ç†å™¨äº¤ç»™IOC--&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;&lt;/bean&gt; 2ï¼‰ä¸šåŠ¡å±‚ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Autowired private PlatformTransactionManager transactionManager; @Override public void transfer(String outUser, String inUser, double money) &#123; // åˆ›å»ºäº‹åŠ¡å®šä¹‰å¯¹è±¡ DefaultTransactionDefinition def = new DefaultTransactionDefinition(); // è®¾ç½®æ˜¯å¦åªè¯»ï¼Œfalseæ”¯æŒäº‹åŠ¡ def.setReadOnly(false); // è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå¯é‡å¤è¯»mysqlé»˜è®¤çº§åˆ« def.setIsolationLevel(TransactionDefinition.ISOLATION_REPEATABLE_READ); // è®¾ç½®äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œå¿…é¡»æœ‰äº‹åŠ¡ def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED); // é…ç½®äº‹åŠ¡ç®¡ç†å™¨ TransactionStatus status = transactionManager.getTransaction(def); try &#123; // è½¬è´¦ accountDao.out(outUser, money); accountDao.in(inUser, money); // æäº¤äº‹åŠ¡ transactionManager.commit(status); &#125; catch (Exception e) &#123; e.printStackTrace(); // å›æ»šäº‹åŠ¡ figuration(&quot;classpath:applicationContext.xml&quot;) public class AccountServiceTest &#123; @Autowired private AccountService accountService; @Test public void testTransfer() throws Exception &#123; accountService.transfer(&quot;tom&quot;, &quot;jerry&quot;, 100d); &#125; &#125; transactionManager.rollback(status); &#125; &#125;&#125; 2.2.5 çŸ¥è¯†å°ç»“Springä¸­çš„äº‹åŠ¡æ§åˆ¶ä¸»è¦å°±æ˜¯é€šè¿‡è¿™ä¸‰ä¸ªAPIå®ç°çš„ PlatformTransactionManager è´Ÿè´£äº‹åŠ¡çš„ç®¡ç†ï¼Œå®ƒæ˜¯ä¸ªæ¥å£ï¼Œå…¶å­ç±»è´Ÿè´£å…·ä½“å·¥ä½œ TransactionDefinition å®šä¹‰äº†äº‹åŠ¡çš„ä¸€äº›ç›¸å…³å‚æ•° TransactionStatus ä»£è¡¨äº‹åŠ¡è¿è¡Œçš„ä¸€ä¸ªå®æ—¶çŠ¶æ€ ç†è§£ä¸‰è€…çš„å…³ç³»ï¼šäº‹åŠ¡ç®¡ç†å™¨é€šè¿‡è¯»å–äº‹åŠ¡å®šä¹‰å‚æ•°è¿›è¡Œäº‹åŠ¡ç®¡ç†ï¼Œç„¶åä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„äº‹åŠ¡çŠ¶æ€ã€‚ 2.3 åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ã€é‡ç‚¹ã€‘åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å£°æ˜å¼çš„å¤„ç†äº‹åŠ¡æ¥ä»£æ›¿ä»£ç å¼çš„å¤„ç†äº‹åŠ¡ã€‚åº•å±‚é‡‡ç”¨AOPæ€æƒ³æ¥å®ç°çš„ã€‚ å£°æ˜å¼äº‹åŠ¡æ§åˆ¶æ˜ç¡®äº‹é¡¹ï¼š æ ¸å¿ƒä¸šåŠ¡ä»£ç (ç›®æ ‡å¯¹è±¡) ï¼ˆåˆ‡å…¥ç‚¹æ˜¯è°ï¼Ÿï¼‰ äº‹åŠ¡å¢å¼ºä»£ç (Springå·²æä¾›äº‹åŠ¡ç®¡ç†å™¨)ï¼‰ï¼ˆé€šçŸ¥æ˜¯è°ï¼Ÿï¼‰ åˆ‡é¢é…ç½®ï¼ˆåˆ‡é¢å¦‚ä½•é…ç½®ï¼Ÿï¼‰ 2.3.1 å¿«é€Ÿå…¥é—¨ éœ€æ±‚ä½¿ç”¨springå£°æ˜å¼äº‹åŠ¡æ§åˆ¶è½¬è´¦ä¸šåŠ¡ã€‚ æ­¥éª¤åˆ†æ å¼•å…¥txå‘½åç©ºé—´ äº‹åŠ¡ç®¡ç†å™¨é€šçŸ¥é…ç½® äº‹åŠ¡ç®¡ç†å™¨AOPé…ç½® æµ‹è¯•äº‹åŠ¡æ§åˆ¶è½¬è´¦ä¸šåŠ¡ä»£ç  1ï¼‰å¼•å…¥txå‘½åç©ºé—´ 1234567891011121314151617&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w2.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;&lt;/beans&gt; 2ï¼‰äº‹åŠ¡ç®¡ç†å™¨é€šçŸ¥é…ç½® 1234567891011&lt;!--äº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--é€šçŸ¥å¢å¼º--&gt;&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;!--å®šä¹‰äº‹åŠ¡çš„å±æ€§--&gt; &lt;tx:attributes&gt; &lt;tx:method name=&quot;*&quot;/&gt; &lt;/tx:attributes&gt;&lt;/tx:advice&gt; 3ï¼‰äº‹åŠ¡ç®¡ç†å™¨AOPé…ç½® 12345&lt;!--aopé…ç½®--&gt;&lt;aop:config&gt; &lt;!--åˆ‡é¢é…ç½®--&gt; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(* com.lagou.serivce..*.*(..))&quot;&gt;&lt;/aop:advisor&gt;&lt;/aop:config&gt; 4ï¼‰æµ‹è¯•äº‹åŠ¡æ§åˆ¶è½¬è´¦ä¸šåŠ¡ä»£ç  1234567@Override public void transfer(String outUser, String inUser, double money) &#123; accountDao.out(outUser, money); // åˆ¶é€ å¼‚å¸¸ int i = 1 / 0; accountDao.in(inUser, money);&#125; 2.3.2 äº‹åŠ¡å‚æ•°çš„é…ç½®è¯¦è§£ nameï¼šåˆ‡ç‚¹æ–¹æ³•åç§° isolation:äº‹åŠ¡çš„éš”ç¦»çº§åˆ« propogationï¼šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º timeoutï¼šè¶…æ—¶æ—¶é—´ read-onlyï¼šæ˜¯å¦åªè¯» 1234567&lt;tx:method name=&quot;transfer&quot; isolation=&quot;REPEATABLE_READ&quot; propagation=&quot;REQUIRED&quot; timeout=&quot;-1&quot; read-only=&quot;false&quot; /&gt; CRUDå¸¸ç”¨é…ç½® 1234567&lt;tx:attributes&gt; &lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;find*&quot; read-only=&quot;true&quot;/&gt; &lt;tx:method name=&quot;*&quot;/&gt;&lt;/tx:attributes&gt; 2.3.3 çŸ¥è¯†å°ç»“ å¹³å°äº‹åŠ¡ç®¡ç†å™¨é…ç½® äº‹åŠ¡é€šçŸ¥çš„é…ç½® äº‹åŠ¡aopç»‡å…¥çš„é…ç½® 2.4 åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ã€é‡ç‚¹ã€‘2.4.1 å¸¸ç”¨æ³¨è§£æ­¥éª¤åˆ†æ ä¿®æ”¹serviceå±‚ï¼Œå¢åŠ äº‹åŠ¡æ³¨è§£ ä¿®æ”¹springæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£æ”¯æŒ 1ï¼‰ä¿®æ”¹serviceå±‚ï¼Œå¢åŠ äº‹åŠ¡æ³¨è§£ 123456789101112@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.REPEATABLE_READ, timeout = -1, readOnly = false) @Override public void transfer(String outUser, String inUser, double money) &#123; accountDao.out(outUser, money); int i = 1 / 0; accountDao.in(inUser, money); &#125;&#125; 2ï¼‰ä¿®æ”¹springæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£æ”¯æŒ 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w2.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt; &lt;!--çœç•¥ä¹‹å‰datsSourceã€jdbcTemplateã€ç»„ä»¶æ‰«æé…ç½®--&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨--&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--äº‹åŠ¡çš„æ³¨è§£æ”¯æŒ--&gt; &lt;tx:annotation-driven/&gt;&lt;/beans&gt; 2.4.2 çº¯æ³¨è§£æ ¸å¿ƒé…ç½®ç±» 12345678910111213141516@Configuration // å£°æ˜ä¸ºspringé…ç½®ç±» @ComponentScan(&quot;com.lagou&quot;) // æ‰«æåŒ… @Import(DataSourceConfig.class) // å¯¼å…¥å…¶ä»–é…ç½®ç±» @EnableTransactionManagement // äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨ public class SpringConfig &#123; @Bean public JdbcTemplate getJdbcTemplate(@Autowired DataSource dataSource) &#123; return new JdbcTemplate(dataSource); &#125; @Bean(&quot;transactionManager&quot;) public PlatformTransactionManager getPlatformTransactionManager(@Autowired DataSource dataSource) &#123; return new DataSourceTransactionManager(dataSource); &#125;&#125; æ•°æ®æºé…ç½®ç±» 1234567891011121314151617181920@PropertySource(&quot;classpath:jdbc.properties&quot;) public class DataSourceConfig &#123; @Value(&quot;$&#123;jdbc.driver&#125;&quot;) private String driver; @Value(&quot;$&#123;jdbc.url&#125;&quot;) private String url; @Value(&quot;$&#123;jdbc.username&#125;&quot;) private String username; @Value(&quot;$&#123;jdbc.password&#125;&quot;) private String password; @Bean public DataSource getDataSource() &#123; DruidDataSource dataSource = new DruidDataSource(); dataSource.setDriverClassName(driver); dataSource.setUrl(url); dataSource.setUsername(username); dataSource.setPassword(password); return dataSource; &#125;&#125; 2.4.3 çŸ¥è¯†å°ç»“ å¹³å°äº‹åŠ¡ç®¡ç†å™¨é…ç½®ï¼ˆxmlã€æ³¨è§£æ–¹å¼ï¼‰ äº‹åŠ¡é€šçŸ¥çš„é…ç½®ï¼ˆ@Transactionalæ³¨è§£é…ç½®ï¼‰ äº‹åŠ¡æ³¨è§£é©±åŠ¨çš„é…ç½® tx:annotation-driven/ã€@EnableTransactionManagement 3. Springé›†æˆwebç¯å¢ƒ3.1 ApplicationContextåº”ç”¨ä¸Šä¸‹æ–‡è·å–æ–¹å¼åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯é€šè¿‡ new ClasspathXmlApplicationContext(springé…ç½®æ–‡ä»¶) æ–¹å¼è·å–çš„ï¼Œä½†æ˜¯æ¯æ¬¡ä»å®¹å™¨ä¸­è·å¾—Beanæ—¶éƒ½è¦ç¼–å†™ new ClasspathXmlApplicationContext(springé…ç½®æ–‡ä»¶) ï¼Œè¿™æ ·çš„å¼Šç«¯æ˜¯é…ç½®æ–‡ä»¶åŠ è½½å¤šæ¬¡ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡åˆ›å»ºå¤šæ¬¡ã€‚ è§£å†³æ€è·¯åˆ†æï¼š åœ¨Webé¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ServletContextListenerç›‘å¬Webåº”ç”¨çš„å¯åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Webåº”ç”¨å¯åŠ¨æ—¶ï¼Œå°±åŠ è½½Springçš„é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹ApplicationContextï¼Œåœ¨å°†å…¶å­˜å‚¨åˆ°æœ€å¤§çš„åŸŸservletContextåŸŸä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ä½ç½®ä»åŸŸä¸­è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡ApplicationContextå¯¹è±¡äº†ã€‚ 3.2 Springæä¾›è·å–åº”ç”¨ä¸Šä¸‹æ–‡çš„å·¥å…·ä¸Šé¢çš„åˆ†æä¸ç”¨æ‰‹åŠ¨å®ç°ï¼ŒSpringæä¾›äº†ä¸€ä¸ªç›‘å¬å™¨ContextLoaderListenerå°±æ˜¯å¯¹ä¸Šè¿°åŠŸèƒ½çš„å°è£…ï¼Œè¯¥ç›‘å¬å™¨å†…éƒ¨åŠ è½½Springé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¹¶å­˜å‚¨åˆ°ServletContextåŸŸä¸­ï¼Œæä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å·¥å…·WebApplicationContextUtilsä¾›ä½¿ç”¨è€…è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„åªæœ‰ä¸¤ä»¶äº‹ï¼š åœ¨web.xmlä¸­é…ç½®ContextLoaderListenerç›‘å¬å™¨ï¼ˆå¯¼å…¥spring-webåæ ‡ï¼‰ ä½¿ç”¨WebApplicationContextUtilsè·å¾—åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ApplicationContext 3.3 å®ç°1ï¼‰å¯¼å…¥Springé›†æˆwebçš„åæ ‡ 123456789101112&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰é…ç½®ContextLoaderListenerç›‘å¬å™¨ 123456789&lt;!--å…¨å±€å‚æ•°--&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;â€¢ &lt;/context-param&gt;&lt;!--Springçš„ç›‘å¬å™¨--&gt;&lt;listener&gt; &lt;listener-class&gt; org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt;&lt;/listener&gt; 3ï¼‰é€šè¿‡å·¥å…·è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ 12ApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(servletContext);Object obj = applicationContext.getBean(&quot;id&quot;);","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"AOPé¢å‘åˆ‡é¢","slug":"AOPé¢å‘åˆ‡é¢","date":"2021-04-18T09:12:04.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2021/04/18/AOPé¢å‘åˆ‡é¢/","link":"","permalink":"http://yournotes.cn/2021/04/18/AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2/","excerpt":"","text":"1. è½¬è´¦æ¡ˆä¾‹ å…ˆé€šè¿‡ä¸€ä¸ªè½¬è´¦æ¡ˆä¾‹åœ¨æ²¡æœ‰AOPçš„æƒ…å†µä¸‹ï¼Œä½“éªŒæ˜¯å¦‚ä½•é€šè¿‡åŸºæœ¬çš„ä»£ç†å»å®ç°è¿™æ ·çš„åœºæ™¯ï¼Œæœ€ååœ¨äº†è§£AOPï¼Œé€šè¿‡AOPå†æ¬¡å®ç°ä¸€æ¬¡ éœ€æ±‚ ä½¿ç”¨springæ¡†æ¶æ•´åˆDBUtilsæŠ€æœ¯ï¼Œå®ç°ç”¨æˆ·è½¬è´¦åŠŸèƒ½ 1.1 åŸºç¡€åŠŸèƒ½æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ ç¼–å†™Accountå®ä½“ç±» ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ä»£ç  1ï¼‰åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ 1234567891011121314151617181920212223242526272829303132&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.15&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-dbutils&lt;/groupId&gt; &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt; &lt;version&gt;1.6&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰ ç¼–å†™Accountå®ä½“ç±» 123456public class Account &#123; private Integer id; private String name; private double money; // setter getter.... &#125; 3ï¼‰ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» 123456public interface AccountDao &#123; // è½¬å‡ºæ“ä½œ public void out(String outUser, double money); // è½¬å…¥æ“ä½œ public void in(String inUser, double money);&#125; 1234567891011121314151617181920212223@Repository public class AccountDaoImpl implements AccountDao &#123; @Autowired private QueryRunner queryRunner; @Override public void out(String outUser, double money) &#123; try &#123; queryRunner.update(&quot;update account set money=money-? where name=?&quot;, money, outUser); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; @Override public void in(String inUser, double money) &#123; try &#123; queryRunner.update(&quot;update account set money=money+? where name=?&quot;, money, inUser); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 4ï¼‰ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» 123public interface AccountService &#123; public void transfer(String outUser, String inUser, double money);&#125; 12345678910@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Override public void transfer(String outUser, String inUser, double money) &#123; accountDao.out(outUser, money); accountDao.in(inUser, money); &#125;&#125; 5ï¼‰ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ 123456789101112131415161718192021&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--å¼€å¯ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou&quot;/&gt; &lt;!--åŠ è½½jdbcé…ç½®æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!--æŠŠæ•°æ®åº“è¿æ¥æ± äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠQueryRunneräº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;queryRunner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot;&gt; &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt;&lt;/beans&gt; 6ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  12345678910@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)public class AccountServiceTest &#123; @Autowired private AccountService accountService; @Test public void testTransfer() throws Exception &#123; accountService.transfer(&quot;tom&quot;, &quot;jerry&quot;, 100d); &#125;&#125; 7ï¼‰é—®é¢˜åˆ†æ ä¸Šé¢çš„ä»£ç äº‹åŠ¡åœ¨daoå±‚ï¼Œè½¬å‡ºè½¬å…¥æ“ä½œéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡ï¼Œä½†å®é™…å¼€å‘ï¼Œåº”è¯¥æŠŠä¸šåŠ¡é€»è¾‘æ§åˆ¶åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œæ‰€ä»¥åº”è¯¥å°†äº‹åŠ¡æŒªåˆ°serviceå±‚ã€‚ 3.2 ä¼ ç»Ÿäº‹åŠ¡æ­¥éª¤åˆ†æ ç¼–å†™çº¿ç¨‹ç»‘å®šå·¥å…·ç±» ç¼–å†™äº‹åŠ¡ç®¡ç†å™¨ ä¿®æ”¹serviceå±‚ä»£ç  ä¿®æ”¹daoå±‚ä»£ç  1ï¼‰ç¼–å†™çº¿ç¨‹ç»‘å®šå·¥å…·ç±» 12345678910111213141516171819202122232425262728293031323334353637/** * è¿æ¥å·¥å…·ç±»ï¼Œä»æ•°æ®æºä¸­è·å–ä¸€ä¸ªè¿æ¥ï¼Œå¹¶å°†å®ç°å’Œçº¿ç¨‹çš„ç»‘å®š */@Component public class ConnectionUtils &#123; private ThreadLocal&lt;Connection&gt; threadLocal = new ThreadLocal&lt;&gt;(); @Autowired private DataSource dataSource; /** * è·å–å½“å‰çº¿ç¨‹ä¸Šçš„è¿æ¥ * * @return Connection */ public Connection getThreadConnection() &#123; // 1.å…ˆä»ThreadLocalä¸Šè·å– Connection connection = threadLocal.get(); // 2.åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æœ‰è¿æ¥ if (connection == null) &#123; try &#123; // 3.ä»æ•°æ®æºä¸­è·å–ä¸€ä¸ªè¿æ¥ï¼Œå¹¶å­˜å…¥åˆ°ThreadLocalä¸­ connection = dataSource.getConnection(); threadLocal.set(connection); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; return connection; &#125; /*** è§£é™¤å½“å‰çº¿ç¨‹çš„è¿æ¥ç»‘å®š */ public void removeThreadConnection() &#123; threadLocal.remove(); &#125;&#125; 2ï¼‰ç¼–å†™äº‹åŠ¡ç®¡ç†å™¨ 12345678910111213141516171819202122232425262728293031323334353637383940/** * äº‹åŠ¡ç®¡ç†å™¨å·¥å…·ç±»ï¼ŒåŒ…å«ï¼šå¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ã€é‡Šæ”¾èµ„æº */@Component public class TransactionManager &#123; @Autowired private ConnectionUtils connectionUtils; public void beginTransaction() &#123; try &#123; connectionUtils.getThreadConnection().setAutoCommit(false); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public void commit() &#123; try &#123; connectionUtils.getThreadConnection().commit(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public void rollback() &#123; try &#123; connectionUtils.getThreadConnection().rollback(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public void release() &#123; try &#123; connectionUtils.getThreadConnection().setAutoCommit(true);// æ”¹å›è‡ª åŠ¨æäº¤äº‹åŠ¡ connectionUtils.getThreadConnection().close();// å½’è¿˜åˆ°è¿æ¥æ±  connectionUtils.removeThreadConnection();// è§£é™¤çº¿ç¨‹ç»‘å®š &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 3ï¼‰ä¿®æ”¹serviceå±‚ä»£ç  1234567891011121314151617181920212223242526272829@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; @Autowired private TransactionManager transactionManager; @Override public void transfer(String outUser, String inUser, double money) &#123; try &#123; // 1.å¼€å¯äº‹åŠ¡ transactionManager.beginTransaction(); // 2.ä¸šåŠ¡æ“ä½œ accountDao.out(outUser, money); int i = 1 / 0; accountDao.in(inUser, money); // 3.æäº¤äº‹åŠ¡ transactionManager.commit(); &#125; catch (Exception e) &#123; e.printStackTrace(); // 4.å›æ»šäº‹åŠ¡ transactionManager.rollback(); &#125; finally &#123; // 5.é‡Šæ”¾èµ„æº transactionManager.release(); &#125; &#125;&#125; 4ï¼‰ä¿®æ”¹daoå±‚ä»£ç  12345678910111213141516171819202122232425@Repositorypublic class AccountDaoImpl implements AccountDao &#123; @Autowired private QueryRunner queryRunner; @Autowired private ConnectionUtils connectionUtils; @Override public void out(String outUser, double money) &#123; try &#123; queryRunner.update(connectionUtils.getThreadConnection(), &quot;update account set money=money-? where name=?&quot;, money, outUser); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; @Override public void in(String inUser, double money) &#123; try &#123; queryRunner.update(connectionUtils.getThreadConnection(), &quot;update account set money=money+? where name=?&quot;, money, inUser); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 5ï¼‰é—®é¢˜åˆ†æ ä¸Šé¢ä»£ç ï¼Œé€šè¿‡å¯¹ä¸šåŠ¡å±‚æ”¹é€ ï¼Œå·²ç»å¯ä»¥å®ç°äº‹åŠ¡æ§åˆ¶äº†ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ·»åŠ äº†äº‹åŠ¡æ§åˆ¶ï¼Œä¹Ÿäº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼š ä¸šåŠ¡å±‚æ–¹æ³•å˜å¾—è‡ƒè‚¿äº†ï¼Œé‡Œé¢å……æ–¥ç€å¾ˆå¤šé‡å¤ä»£ç ã€‚å¹¶ä¸”ä¸šåŠ¡å±‚æ–¹æ³•å’Œäº‹åŠ¡æ§åˆ¶æ–¹æ³•è€¦åˆäº†ï¼Œè¿èƒŒäº†é¢å‘å¯¹è±¡çš„å¼€å‘æ€æƒ³ã€‚ 2. Proxyä¼˜åŒ–è½¬è´¦æ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ä»£ç è¿›è¡Œæ‹†åˆ†ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼ï¼Œå¯¹ä¸šåŠ¡æ–¹æ³•è¿›è¡Œäº‹åŠ¡çš„å¢å¼ºã€‚è¿™æ ·å°±ä¸ä¼šå¯¹ä¸šåŠ¡å±‚äº§ç”Ÿå½±å“ï¼Œè§£å†³äº†è€¦åˆæ€§çš„é—®é¢˜å•¦ï¼ å¸¸ç”¨çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ JDK ä»£ç† : åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯Â·ï¼šåˆ©ç”¨æ‹¦æˆªå™¨ï¼ˆå¿…é¡»å®ç°invocationHandlerï¼‰åŠ ä¸Šåå°„æœºåˆ¶ç”Ÿæˆä¸€ä¸ªä»£ç†æ¥å£çš„åŒ¿åç±»ï¼Œåœ¨è°ƒç”¨å…·ä½“æ–¹æ³•å‰è°ƒç”¨InvokeHandleræ¥å¤„ç†ï¼Œä»è€Œå®ç°æ–¹æ³•å¢å¼º CGLIBä»£ç†ï¼šåŸºäºçˆ¶ç±»çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼šåŠ¨æ€ç”Ÿæˆä¸€ä¸ªè¦ä»£ç†çš„å­ç±»ï¼Œå­ç±»é‡å†™è¦ä»£ç†çš„ç±»çš„æ‰€æœ‰ä¸æ˜¯finalçš„æ–¹æ³•ã€‚åœ¨å­ç±»ä¸­é‡‡ç”¨æ–¹æ³•æ‹¦æˆªæŠ€æœ¯æ‹¦æˆªæ‰€æœ‰çš„çˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œé¡ºåŠ¿ç»‡å…¥æ¨ªåˆ‡é€»è¾‘ï¼Œå¯¹æ–¹æ³•è¿›è¡Œå¢å¼º 2.1 JDKåŠ¨æ€ä»£ç†æ–¹å¼Jdkå·¥å‚ç±» 123456789101112131415161718192021222324252627282930313233343536@Component public class JdkProxyFactory &#123; @Autowired private AccountService accountService; @Autowired private TransactionManager transactionManager; public AccountService createAccountServiceJdkProxy() &#123; AccountService accountServiceProxy = null; accountServiceProxy = (AccountService) Proxy.newProxyInstance(accountService.getClass().getClassLoader(), accountService.getClass().getInterfaces(), new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; Object result = null; try &#123; // 1.å¼€å¯äº‹åŠ¡ transactionManager.beginTransaction(); // 2.ä¸šåŠ¡æ“ä½œ result = method.invoke(accountService, args); // 3.æäº¤äº‹åŠ¡ transactionManager.commit(); &#125; catch (Exception e) &#123; e.printStackTrace(); // 4.å›æ»šäº‹åŠ¡ transactionManager.rollback()ï¼› &#125; finally &#123; // 5.é‡Šæ”¾èµ„æº transactionManager.release(); &#125; return result; &#125; &#125; ); return accountServiceProxy; &#125;&#125; æµ‹è¯•ä»£ç  12345678910@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class AccountTest &#123; @Autowired private JdkProxyFactory jdkProxyFactory; @Test public void testTransfer() throws Exception &#123; AccountService accountServiceJdkProxy = jdkProxyFactory.createAccountServiceJdkProxy(); accountServiceJdkProxy.transfer(&quot;tom&quot;, &quot;jerry&quot;, 100d); &#125;&#125; 2.2 CGLIBåŠ¨æ€ä»£ç†æ–¹å¼Cglibå·¥å‚ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041@Component public class CglibProxyFactory &#123; @Autowired private AccountService accountService; @Autowired private TransactionManager transactionManager; public AccountService createAccountServiceCglibProxy() &#123; AccountService accountServiceProxy = null; /* * å‚æ•°ä¸€ï¼šç›®æ ‡å¯¹è±¡çš„å­—èŠ‚ç å¯¹è±¡ * å‚æ•°äºŒï¼šåŠ¨ä½œç±»ï¼Œå®ç°å¢å¼ºåŠŸèƒ½ * */ accountServiceProxy = (AccountService) Enhancer.create(accountService.getClass(), new MethodInterceptor() &#123; @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; Object result = null; try &#123; // 1.å¼€å¯äº‹åŠ¡ transactionManager.beginTransaction(); // 2.ä¸šåŠ¡æ“ä½œ result = method.invoke(accountService, objects); // 3.æäº¤äº‹åŠ¡ transactionManager.commit(); &#125; catch (Exception e) &#123; e.printStackTrace(); // 4.å›æ»šäº‹åŠ¡ transactionManager.rollback(); &#125; finally &#123; // 5.é‡Šæ”¾èµ„æº transactionManager.release(); &#125; return result; &#125; &#125; ); return accountServiceProxy; &#125;&#125; æµ‹è¯•ä»£ç  1234567891011@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) public class AccountServiceTest &#123; @Autowired private CglibProxyFactory cglibProxyFactory; @Test public void testTransfer() throws Exception &#123; AccountService accountServiceCglibProxy = cglibProxyFactory.createAccountServiceCglibProxy(); accountServiceCglibProxy.transfer(&quot;tom&quot;, &quot;jerry&quot;, 100d); &#125;&#125; 3. åˆè¯†AOP3.1 ä»€ä¹ˆæ˜¯AOPAOP ä¸º Aspect Oriented Programming çš„ç¼©å†™ï¼Œæ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP æ˜¯ OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰ çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œåˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º é€»è¾‘æ¸…æ™°ï¼Œå¼€å‘æ ¸å¿ƒä¸šåŠ¡çš„æ—¶å€™ï¼Œä¸å¿…å…³æ³¨å¢å¼ºä¸šåŠ¡çš„ä»£ç  å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œä¾¿äºåæœŸç»´æŠ¤ 3.2 AOPåº•å±‚å®ç°å®é™…ä¸Šï¼ŒAOP çš„åº•å±‚æ˜¯é€šè¿‡ Spring æä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚ 3.3 AOPç›¸å…³æœ¯è¯­Spring çš„ AOP å®ç°åº•å±‚å°±æ˜¯å¯¹ä¸Šé¢çš„åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£…ï¼Œå°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹éœ€è¦å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™ï¼Œå¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚ åœ¨æ­£å¼è®²è§£ AOP çš„æ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£ AOP çš„ç›¸å…³æœ¯è¯­ï¼Œå¸¸ç”¨çš„æœ¯è¯­å¦‚ä¸‹ï¼š Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡ Proxy ï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªç±»è¢« AOP ç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±» Joinpointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šæ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›å¯ä»¥è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­,è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•ï¼Œå› ä¸º springåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼šæ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº› Joinpoint è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰ Adviceï¼ˆé€šçŸ¥&#x2F; å¢å¼ºï¼‰ï¼šæ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ° Joinpoint ä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥ åˆ†ç±»ï¼šå‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ã€å¼‚å¸¸é€šçŸ¥ã€æœ€ç»ˆé€šçŸ¥ã€ç¯ç»•é€šçŸ¥ Aspectï¼ˆåˆ‡é¢ï¼‰ï¼šæ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¼•ä»‹ï¼‰çš„ç»“åˆ Weavingï¼ˆç»‡å…¥ï¼‰ï¼šæ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡ å…¥ï¼Œè€ŒAspectJé‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥ 3.4 AOPå¼€å‘æ˜ç¡®äº‹é¡¹3.4.1 å¼€å‘é˜¶æ®µï¼ˆè‡ªå·±åšçš„ï¼‰ ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³•ï¼‰ åˆ‡å…¥ç‚¹ æŠŠå…¬ç”¨ä»£ç æŠ½å–å‡ºæ¥ï¼Œåˆ¶ä½œæˆé€šçŸ¥ï¼ˆå¢å¼ºåŠŸèƒ½æ–¹æ³•ï¼‰ é€šçŸ¥ åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå£°æ˜åˆ‡å…¥ç‚¹ä¸é€šçŸ¥é—´çš„å…³ç³»ï¼Œå³åˆ‡é¢ 3.4.2 è¿è¡Œé˜¶æ®µï¼ˆSpringæ¡†æ¶å®Œæˆçš„ï¼‰Spring æ¡†æ¶ç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œã€‚ä¸€æ—¦ç›‘æ§åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œæ ¹æ®é€šçŸ¥ç±»åˆ«ï¼Œåœ¨ä»£ç†å¯¹è±¡çš„å¯¹åº”ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚ 3.4.3 åº•å±‚ä»£ç†å®ç°åœ¨ Spring ä¸­ï¼Œæ¡†æ¶ä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†çš„æ–¹å¼ã€‚ å½“beanå®ç°æ¥å£æ—¶ï¼Œä¼šç”¨JDKä»£ç†æ¨¡å¼ å½“beanæ²¡æœ‰å®ç°æ¥å£ï¼Œç”¨cglibå®ç°ï¼ˆ å¯ä»¥å¼ºåˆ¶ä½¿ç”¨cglibï¼ˆåœ¨springé…ç½®ä¸­åŠ å…¥&lt;aop:aspectj\u0002autoproxy proxyt-target-class&#x3D;â€trueâ€&#x2F;&gt;ï¼‰ 3.5 çŸ¥è¯†å°ç»“ aopï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ aopåº•å±‚å®ç°ï¼šåŸºäºJDKçš„åŠ¨æ€ä»£ç† å’Œ åŸºäºCglibçš„åŠ¨æ€ä»£ç† aopçš„é‡ç‚¹æ¦‚å¿µï¼š Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼šçœŸæ­£è¢«å¢å¼ºçš„æ–¹æ³• Adviceï¼ˆé€šçŸ¥&#x2F; å¢å¼ºï¼‰ï¼šå°è£…å¢å¼ºä¸šåŠ¡é€»è¾‘çš„æ–¹æ³• Aspectï¼ˆåˆ‡é¢ï¼‰ï¼šåˆ‡ç‚¹+é€šçŸ¥ Weavingï¼ˆç»‡å…¥ï¼‰ï¼šå°†åˆ‡ç‚¹ä¸é€šçŸ¥ç»“åˆï¼Œäº§ç”Ÿä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ 4. åŸºäºXMLçš„AOPå¼€å‘4.1 å¿«é€Ÿå…¥é—¨æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥AOPç›¸å…³åæ ‡ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡å®ç°ç±»ï¼ˆå®šä¹‰åˆ‡å…¥ç‚¹ï¼‰ åˆ›å»ºé€šçŸ¥ç±»åŠæ–¹æ³•ï¼ˆå®šä¹‰é€šçŸ¥ï¼‰ å°†ç›®æ ‡ç±»å’Œé€šçŸ¥ç±»å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®ç»‡å…¥å…³ç³»ï¼ŒåŠåˆ‡é¢ ç¼–å†™æµ‹è¯•ä»£ç  4.1.1 åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥AOPç›¸å…³åæ ‡12345678910111213141516171819202122232425dependencies&gt; &lt;!--å¯¼å…¥springçš„contextåæ ‡ï¼Œcontextä¾èµ–aop--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- aspectjçš„ç»‡å…¥ï¼ˆåˆ‡ç‚¹è¡¨è¾¾å¼éœ€è¦ç”¨åˆ°è¯¥jaråŒ…ï¼‰ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt; &lt;/dependency&gt; &lt;!--springæ•´åˆjunit--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 4.1.2 åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡å®ç°ç±»123public interface AccountService &#123; public void transfer();&#125; 123456public class AccountServiceImpl implements AccountService &#123; @Override public void transfer() &#123; System.out.println(&quot;è½¬è´¦ä¸šåŠ¡...&quot;); &#125;&#125; 4.1.3 åˆ›å»ºé€šçŸ¥ç±»12345public class MyAdvice &#123; public void before() &#123; System.out.println(&quot;å‰ç½®é€šçŸ¥...&quot;); &#125;&#125; 4.1.4 å°†ç›®æ ‡ç±»å’Œé€šçŸ¥ç±»å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring1234&lt;!--ç›®æ ‡ç±»äº¤ç»™IOCå®¹å™¨--&gt;&lt;bean id=&quot;accountService&quot; class=&quot;com.lagou.service.impl.AccountServiceImpl&quot;&gt;&lt;/bean&gt;&lt;!--é€šçŸ¥ç±»äº¤ç»™IOCå®¹å™¨--&gt;&lt;bean id=&quot;myAdvice&quot; class=&quot;com.lagou.advice.MyAdvice&quot;&gt;&lt;/bean&gt; 4.1.5 åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®ç»‡å…¥å…³ç³»ï¼ŒåŠåˆ‡é¢1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!--ç›®æ ‡ç±»äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;accountService&quot; class=&quot;com.lagou.service.impl.AccountServiceImpl&quot;&gt;&lt;/bean&gt; &lt;!--é€šçŸ¥ç±»äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;myAdvice&quot; class=&quot;com.lagou.advice.MyAdvice&quot;&gt;&lt;/bean&gt; &lt;aop:config&gt; &lt;!--å¼•å…¥é€šçŸ¥ç±»--&gt; &lt;aop:aspect ref=&quot;myAdvice&quot;&gt; &lt;!--é…ç½®ç›®æ ‡ç±»çš„transferæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨é€šçŸ¥ç±»çš„beforeæ–¹æ³•è¿›è¡Œå‰ç½®å¢å¼º--&gt; &lt;aop:before method=&quot;before&quot; pointcut=&quot;execution(public void com.lagou.service.impl.AccountServiceImpl.transfer())&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; 4.1.6 ç¼–å†™æµ‹è¯•ä»£ç 123456789@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) class AccountServiceTest &#123; @Autowired private AccountService accountService; @Test public void testTransfer() throws Exception &#123; accountService.transfer(); &#125;&#125; 4.2 XMLé…ç½®AOPè¯¦è§£4.2.1 åˆ‡ç‚¹è¡¨è¾¾å¼è¡¨è¾¾å¼è¯­æ³•ï¼š 1execution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)) è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥ è¿”å›å€¼ç±»å‹ã€åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨æ˜Ÿå· * ä»£æ›¿ï¼Œä»£è¡¨ä»»æ„ åŒ…åä¸ç±»åä¹‹é—´ä¸€ä¸ªç‚¹ . ä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»ï¼Œä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±» å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹ .. è¡¨ç¤ºä»»æ„ä¸ªæ•°ï¼Œä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨ ä¾‹å¦‚ï¼š 1234567execution(public void com.lagou.service.impl.AccountServiceImpl.transfer()) execution(void com.lagou.service.impl.AccountServiceImpl.*(..)) execution(* com.lagou.service.impl.*.*(..)) execution(* com.lagou.service..*.*(..)) åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å– å½“å¤šä¸ªå¢å¼ºçš„åˆ‡ç‚¹è¡¨è¾¾å¼ç›¸åŒæ—¶ï¼Œå¯ä»¥å°†åˆ‡ç‚¹è¡¨è¾¾å¼è¿›è¡ŒæŠ½å–ï¼Œåœ¨å¢å¼ºä¸­ä½¿ç”¨ pointcut-ref å±æ€§ä»£æ›¿pointcut å±æ€§æ¥å¼•ç”¨æŠ½å–åçš„åˆ‡ç‚¹è¡¨è¾¾å¼ã€‚ 1234567&lt;aop:config&gt; &lt;!--æŠ½å–çš„åˆ‡ç‚¹è¡¨è¾¾å¼--&gt; &lt;aop:pointcut id=&quot;myPointcut&quot; expression=&quot;execution(* com.lagou.service..*.* (..))&quot;&gt;&lt;/aop:pointcut&gt; &lt;aop:aspect ref=&quot;myAdvice&quot;&gt; &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;myPointcut&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt;&lt;/aop:config&gt; 4.2.2 é€šçŸ¥ç±»å‹é€šçŸ¥çš„é…ç½®è¯­æ³•ï¼š 1&lt;aop:é€šçŸ¥ç±»å‹ method=â€œé€šçŸ¥ç±»ä¸­æ–¹æ³•åâ€ pointcut=â€œåˆ‡ç‚¹è¡¨è¾¾å¼&quot;&gt;&lt;/aop:é€šçŸ¥ç±»å‹&gt; åç§° æ ‡ç­¾ è¯´æ˜ å‰ç½®é€šçŸ¥ aop:before ç”¨äºé…ç½®å‰ç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰æ‰§è¡Œ åç½®é€šçŸ¥ aop:afterReturning ç”¨äºé…ç½®åç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œ å¼‚å¸¸é€šçŸ¥ aop:afterThrowing ç”¨äºé…ç½®å¼‚å¸¸é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•å‡ºç°å¼‚å¸¸åæ‰§è¡Œ æœ€ç»ˆé€šçŸ¥ aop:after ç”¨äºé…ç½®æœ€ç»ˆé€šçŸ¥ã€‚æ— è®ºåˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œæ—¶æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ ç¯ç»•é€šçŸ¥ aop:around ç”¨äºé…ç½®ç¯ç»•é€šçŸ¥ã€‚å¼€å‘è€…å¯ä»¥æ‰‹åŠ¨æ§åˆ¶å¢å¼ºä»£ç åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ æ³¨æ„ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œç¯ç»•é€šçŸ¥éƒ½æ˜¯ç‹¬ç«‹ä½¿ç”¨çš„ 4.3 çŸ¥è¯†å°ç»“ aopç»‡å…¥çš„é…ç½® 12345&lt;aop:config&gt; &lt;aop:aspect ref=â€œé€šçŸ¥ç±»â€&gt; &lt;aop:before method=â€œé€šçŸ¥æ–¹æ³•åç§°â€ pointcut=â€œåˆ‡ç‚¹è¡¨è¾¾å¼&quot;&gt;&lt;/aop:before&gt; &lt;/aop:aspect&gt;&lt;/aop:config&gt; é€šçŸ¥çš„ç±»å‹ å‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ã€å¼‚å¸¸é€šçŸ¥ã€æœ€ç»ˆé€šçŸ¥ ç¯ç»•é€šçŸ¥ åˆ‡ç‚¹è¡¨è¾¾å¼ execution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°)) 5. åŸºäºæ³¨è§£çš„AOPå¼€å‘5.1 å¿«é€Ÿå…¥é—¨æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥AOPç›¸å…³åæ ‡ åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡å®ç°ç±»ï¼ˆå®šä¹‰åˆ‡å…¥ç‚¹ï¼‰ åˆ›å»ºé€šçŸ¥ç±»ï¼ˆå®šä¹‰é€šçŸ¥ï¼‰ å°†ç›®æ ‡ç±»å’Œé€šçŸ¥ç±»å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring åœ¨é€šçŸ¥ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³»ï¼Œå‡çº§ä¸ºåˆ‡é¢ç±» åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’Œ AOP çš„è‡ªåŠ¨ä»£ç† ç¼–å†™æµ‹è¯•ä»£ç  5.1.1 åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥AOPç›¸å…³åæ ‡12345678910111213141516171819202122232425&lt;dependencies&gt; &lt;!--å¯¼å…¥springçš„contextåæ ‡ï¼Œcontextä¾èµ–aop--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- aspectjçš„ç»‡å…¥ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt; &lt;/dependency&gt; &lt;!--springæ•´åˆjunit--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 5.1.2 åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡å®ç°ç±»123public interface AccountService &#123; public void transfer();&#125; 123456public class AccountServiceImpl implements AccountService &#123; @Override public void transfer() &#123; System.out.println(&quot;è½¬è´¦ä¸šåŠ¡...&quot;); &#125;&#125; 5.1.3 åˆ›å»ºé€šçŸ¥ç±»12345public class MyAdvice &#123; public void before() &#123; System.out.println(&quot;å‰ç½®é€šçŸ¥...&quot;); &#125;&#125; 5.1.4 å°†ç›®æ ‡ç±»å’Œé€šçŸ¥ç±»å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring1234567@Service public class AccountServiceImpl implements AccountService &#123;&#125;@Component public class MyAdvice &#123;&#125; 5.1.5 åœ¨é€šçŸ¥ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³»ï¼Œå‡çº§ä¸ºåˆ‡é¢ç±»12345678@Component @Aspect public class MyAdvice &#123; @Before(&quot;execution(* com.lagou..*.*(..))&quot;) public void before() &#123; System.out.println(&quot;å‰ç½®é€šçŸ¥...&quot;); &#125;&#125; 5.1.6 åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’Œ AOP çš„è‡ªåŠ¨ä»£ç†1234&lt;!--ç»„ä»¶æ‰«æ--&gt;&lt;context:component-scan base-package=&quot;com.lagou&quot;/&gt;&lt;!--aopçš„è‡ªåŠ¨ä»£ç†--&gt;&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt; 5.1.7 ç¼–å†™æµ‹è¯•ä»£ç 12345678910@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) class AccountServiceTest &#123; @Autowired private AccountService accountService; @Test public void testTransfer() throws Exception &#123; accountService.transfer(); &#125;&#125; 5.2 æ³¨è§£é…ç½®AOPè¯¦è§£5.2.1 åˆ‡ç‚¹è¡¨è¾¾å¼åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å– 1234567891011@Component @Aspect public class MyAdvice &#123; @Pointcut(&quot;execution(* com.lagou..*.*(..))&quot;) public void myPoint()&#123; &#125; @Before(&quot;MyAdvice.myPoint()&quot;) public void before() &#123; System.out.println(&quot;å‰ç½®é€šçŸ¥...&quot;); &#125;&#125; 5.2.2 é€šçŸ¥ç±»å‹é€šçŸ¥çš„é…ç½®è¯­æ³•ï¼š@é€šçŸ¥æ³¨è§£(â€œåˆ‡ç‚¹è¡¨è¾¾å¼â€) åç§° æ ‡ç­¾ è¯´æ˜ å‰ç½®é€šçŸ¥ @Before ç”¨äºé…ç½®å‰ç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰æ‰§è¡Œ åç½®é€šçŸ¥ @AfterReturning ç”¨äºé…ç½®åç½®é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œ å¼‚å¸¸é€šçŸ¥ @AfterThrowing ç”¨äºé…ç½®å¼‚å¸¸é€šçŸ¥ã€‚æŒ‡å®šå¢å¼ºçš„æ–¹æ³•å‡ºç°å¼‚å¸¸åæ‰§è¡Œ æœ€ç»ˆé€šçŸ¥ @After ç”¨äºé…ç½®æœ€ç»ˆé€šçŸ¥ã€‚æ— è®ºåˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œæ—¶æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ ç¯ç»•é€šçŸ¥ @Around ç”¨äºé…ç½®ç¯ç»•é€šçŸ¥ã€‚å¼€å‘è€…å¯ä»¥æ‰‹åŠ¨æ§åˆ¶å¢å¼ºä»£ç åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ æ³¨æ„ å½“å‰å››ä¸ªé€šçŸ¥ç»„åˆåœ¨ä¸€èµ·æ—¶ï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š @Before -&gt; @After -&gt; @AfterReturningï¼ˆå¦‚æœæœ‰å¼‚å¸¸ï¼š@AfterThrowingï¼‰ 5.2.3 çº¯æ³¨è§£é…ç½®12345@Configuration @ComponentScan(&quot;com.lagou&quot;) @EnableAspectJAutoProxy //æ›¿ä»£ &lt;aop:aspectj-autoproxy /&gt; public class SpringConfig &#123;&#125; 5.3 çŸ¥è¯†å°ç»“ ä½¿ç”¨@Aspectæ³¨è§£ï¼Œæ ‡æ³¨åˆ‡é¢ç±» ä½¿ç”¨@Beforeç­‰æ³¨è§£ï¼Œæ ‡æ³¨é€šçŸ¥æ–¹æ³• ä½¿ç”¨@Pointcutæ³¨è§£ï¼ŒæŠ½å–åˆ‡ç‚¹è¡¨è¾¾å¼ é…ç½®aopè‡ªåŠ¨ä»£ç† &lt;aop:aspectj-autoproxy/&gt; æˆ– @EnableAspectJAutoProxy 6. AOPä¼˜åŒ–è½¬è´¦æ¡ˆä¾‹ä¾ç„¶ä½¿ç”¨å‰é¢çš„è½¬è´¦æ¡ˆä¾‹ï¼Œå°†ä¸¤ä¸ªä»£ç†å·¥å‚å¯¹è±¡ç›´æ¥åˆ é™¤ï¼æ”¹ä¸ºspringçš„aopæ€æƒ³æ¥å®ç° 6.1 xmlé…ç½®å®ç°1ï¼‰é…ç½®æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--å¼€å¯ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou&quot;/&gt; &lt;!--åŠ è½½jdbcé…ç½®æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!--æŠŠæ•°æ®åº“è¿æ¥æ± äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠQueryRunneräº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;queryRunner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot;&gt; &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt; &lt;!--AOPé…ç½®--&gt; &lt;aop:config&gt; &lt;!--åˆ‡ç‚¹è¡¨è¾¾å¼--&gt; &lt;aop:pointcut id=&quot;myPointcut&quot; expression=&quot;execution(* com.lagou.service..*.*(..))&quot;/&gt; &lt;!-- åˆ‡é¢é…ç½® --&gt; &lt;aop:aspect ref=&quot;transactionManager&quot;&gt; &lt;aop:before method=&quot;beginTransaction&quot; pointcut-ref=&quot;myPointcut&quot;/&gt; &lt;aop:after-returning method=&quot;commit&quot; pointcut-ref=&quot;myPointcut&quot;/&gt; &lt;aop:after-throwing method=&quot;rollback&quot; pointcut-ref=&quot;myPointcut&quot;/&gt; &lt;aop:after method=&quot;release&quot; pointcut-ref=&quot;myPointcut&quot;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; 2ï¼‰äº‹åŠ¡ç®¡ç†å™¨ï¼ˆé€šçŸ¥ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940// äº‹åŠ¡ç®¡ç†å™¨å·¥å…·ç±»ï¼ŒåŒ…æ‹¬ï¼šå¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ã€é‡Šæ”¾èµ„æº ã€@Component public class TransactionManager &#123; @Autowired ConnectionUtils connectionUtils; public void begin()&#123; try &#123; connectionUtils.getThreadConnection().setAutoCommit(false); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public void commit()&#123; try &#123; connectionUtils.getThreadConnection().commit(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public void rollback()&#123; try &#123; connectionUtils.getThreadConnection().rollback(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; public void release()&#123; try &#123; connectionUtils.getThreadConnection().setAutoCommit(true); connectionUtils.getThreadConnection().close(); connectionUtils.removeThreadConnection(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 6.2 æ³¨è§£é…ç½®å®ç°1ï¼‰é…ç½®æ–‡ä»¶ 123456789101112131415161718192021222324&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--å¼€å¯ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou&quot;/&gt; &lt;!--å¼€å¯AOPæ³¨è§£æ”¯æŒ--&gt; &lt;aop:aspectj-autoproxy/&gt; &lt;!--åŠ è½½jdbcé…ç½®æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt; &lt;!--æŠŠæ•°æ®åº“è¿æ¥æ± äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠQueryRunneräº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;queryRunner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot;&gt; &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt;&lt;/beans&gt; 2ï¼‰äº‹åŠ¡ç®¡ç†å™¨ï¼ˆé€šçŸ¥ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839@Component @Aspectpublic class TransactionManager &#123; @Autowired ConnectionUtils connectionUtils; @Around(&quot;execution(* com.lagou.serivce..*.*(..))&quot;) public Object around(ProceedingJoinPoint pjp) &#123; Object object = null; try &#123; // å¼€å¯äº‹åŠ¡ connectionUtils.getThreadConnection().setAutoCommit(false); // ä¸šåŠ¡é€»è¾‘ pjp.proceed(); // æäº¤äº‹åŠ¡ connectionUtils.getThreadConnection().commit(); &#125; catch (Throwable throwable) &#123; throwable.printStackTrace(); // å›æ»šäº‹åŠ¡ try &#123; connectionUtils.getThreadConnection().rollback(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; finally &#123; try &#123; connectionUtils.getThreadConnection().setAutoCommit(true); connectionUtils.getThreadConnection().close(); connectionUtils.removeThreadConnection(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; return object; &#125;&#125;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹è®¾è®¡é—®é¢˜ï¼š155.æœ€å°æ ˆ","slug":"æœ€å°æ ˆ","date":"2021-04-12T03:08:45.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2021/04/12/æœ€å°æ ˆ/","link":"","permalink":"http://yournotes.cn/2021/04/12/%E6%9C%80%E5%B0%8F%E6%A0%88/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€:https://leetcode-cn.com/problems/min-stack/ è®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚ push(x) â€”â€” å°†å…ƒç´  x æ¨å…¥æ ˆä¸­ã€‚ pop() â€”â€” åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚ top() â€”â€” è·å–æ ˆé¡¶å…ƒç´ ã€‚ getMin() â€”â€” æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚ ç¤ºä¾‹: 12345678910111213141516è¾“å…¥ï¼š[&quot;MinStack&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;getMin&quot;,&quot;pop&quot;,&quot;top&quot;,&quot;getMin&quot;][[],[-2],[0],[-3],[],[],[],[]]è¾“å‡ºï¼š[null,null,null,null,-3,null,0,-2]è§£é‡Šï¼šMinStack minStack = new MinStack();minStack.push(-2);minStack.push(0);minStack.push(-3);minStack.getMin(); --&gt; è¿”å› -3.minStack.pop();minStack.top(); --&gt; è¿”å› 0.minStack.getMin(); --&gt; è¿”å› -2. è§£æ³•ä¸€ï¼šæ·»åŠ è¾…åŠ©æ ˆé¦–å…ˆæ˜¯å…·å¤‡æ ˆçš„åŸºæœ¬æ“ä½œ,é™¤æ­¤ä¹‹å¤–æ·»åŠ äº†ä¸ªè·å–æœ€å°å…ƒç´ çš„æ–¹æ³•,ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦è®°å½•æœ€å°å…ƒç´ ,ä½†æ ˆçš„å…ƒç´ å˜åŠ¨æœ‰ä¸¤ç§ä¸€ç§æ˜¯å…¥æ ˆä¸€ç§æ˜¯å‡ºæ ˆ,è¿™ä¸¤ç§æƒ…å†µéƒ½ä¼šå½±å“æœ€å°å…ƒç´ .æ‰€ä»¥æˆ‘ä»¬æ²¡åŠæ³•åªç”¨ä¸€ä¸ªå˜é‡æ¥è®°å½•æœ€å°å€¼å› ä¸ºä¼šå›é€€,å¿…é¡»æ˜¯å®¹å™¨å­˜æ¯ä¸ªé˜¶æ®µæœ€å°å€¼ä¸”å˜åŒ–é€»è¾‘ä¸æ•°æ®æ ˆåŒæ­¥,è¿™æ ·ä¸€æƒ³çš„è¯å°±æ˜¯å†ç”¨ä¸€ä¸ªæ ˆå‘—. å¦‚å›¾: è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±æ˜¯ç”¨å¦å¤–ä¸€ä¸ªæ ˆè®°å½•æœ€å°å€¼ï¼Œå¹¶ä¸”å¯ä»¥è·Ÿéšæ•°æ®æ ˆçš„å˜åŒ–å›é€€æˆ–è€…æ·»åŠ ï¼Œæœ€ç»ˆå¦å¤–æ ˆçš„é¡¶éƒ¨å°±æ˜¯å½“å‰çš„æœ€å°å€¼ ä¸‹é¢æˆ‘å…ˆæ‰‹åŠ¨å®ç°ä¸ªç®€å•çš„æ ˆå†æ“ä½œï¼ˆå› ä¸ºæ˜¯æœ‰ä¸¤ä¸ªæ ˆéƒ½æœ‰åŸºæœ¬æ“ä½œï¼Œæ‰€ä»¥ç›´æ¥å†™åœ¨è§£é¢˜ç±»é‡Œå°±ä¼šæœ‰é‡å¤ï¼Œå› æ­¤æŠŠæ ˆçš„æ“ä½œæå‡ºæ¥ï¼‰ï¼Œä¹Ÿå¯ä»¥å°±ç”¨javaåŒ…çš„æ ˆ 12345678910111213141516171819202122232425262728class MyStack &#123; private int[] data; private int size = -1; public MyStack() &#123; //data = new int[10000]; data = new int[50]; &#125; public void push(int x) &#123; // æ˜¯å¦éœ€è¦æ‰©å®¹ size++; if (size&gt;data.length-1) &#123; data=Arrays.copyOf(data, data.length*2); &#125; data[size] = x; &#125; public void pop() &#123; size--; &#125; public int peek() &#123; if(!isEmpty())&#123; // æŠ›å¼‚å¸¸ &#125; return data[size]; &#125; public Boolean isEmpty()&#123; return size &lt; 0; &#125;&#125; å†ç”¨è¿™ä¸ªæ ˆå»æ˜¯å®ç°æˆ‘ä»¬çš„æœ€å°æ ˆï¼šåœ¨å…¥æ ˆæ—¶åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦æ¯”æœ€å°æ ˆçš„æ ˆé¡¶è¦å°ï¼Œå‡ºæ ˆæ—¶åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦æ˜¯æœ€å°æ ˆçš„æ ˆé¡¶ã€‚ 1234567891011121314151617181920212223242526class MinStack &#123; MyStack data; MyStack min; public MinStack() &#123; data = new MyStack(); min = new MyStack(); &#125; public void push(int x) &#123; data.push(x); if(min.isEmpty() || x &lt;= min.peek())&#123; min.push(x); &#125; &#125; public void pop() &#123; if(data.peek() == min.peek())&#123; min.pop(); &#125; data.pop(); &#125; public int top() &#123; return data.peek(); &#125; public int getMin() &#123; return min.peek(); &#125;&#125; æ—¶é—´å¤æ‚åº¦ï¼šåªæœ‰æ ˆçš„æ“ä½œï¼Œæ— è®ºæ˜¯å¼¹å‡ºè¿˜æ˜¯å‹æ ˆéƒ½æ˜¯O(1)çš„æ“ä½œç©ºé—´å¤æ‚åº¦ï¼šå®šä¹‰äº†ä¸¤ä¸ªæ ˆéœ€è¦å»å­˜å‚¨æ•°æ®ï¼Œæœ€å·®æƒ…å†µæ˜¯2nï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºO(n) è§£æ³•äºŒï¼šå°è£…å…ƒç´ æ•°æ®ä¸è§£æ³•ä¸€ä¸€ä¸ªé€»è¾‘ï¼Œæ—¢ç„¶ä¸¤ä¸ªæ ˆæ˜¯åŒæ­¥çš„å…³ç³»ï¼ŒæŠŠè¾…åŠ©æ ˆçš„æ•°æ®æ”¾åˆ°åˆ°é€šä¸€ä¸ªæ ˆä¹Ÿå¯ä»¥ã€‚æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡å…¶ä¸­ä¸ä»…åŒ…å«å½“å‰æ•°å€¼ä¹ŸåŒ…å«å½“å‰æœ€å°æ ˆé‡Œæœ€å°å€¼ 12345678910111213141516class StackNode&#123; private int value; private int min; public void setValue(int value)&#123; this.value = value; &#125; public void setMin(int min)&#123; this.min = min; &#125; public int getValue()&#123; return value; &#125; public int getMin()&#123; return min; &#125;&#125; ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425class MinStack &#123; MyStack&lt;StackNode&gt; data; public MinStack() &#123; data = new MyStack&lt;StackNode&gt;(); &#125; public void push(int x) &#123; StackNode node = new StackNode(); node.setValue(x); if(data.isEmpty() || x &lt;= data.peek().getMin())&#123; node.setMin(x); &#125; else&#123; node.setMin(data.peek().getMin()); &#125; data.push(node); &#125; public void pop() &#123; data.pop(); &#125; public int top() &#123; return data.peek().getValue(); &#125; public int getMin() &#123; return data.peek().getMin(); &#125;&#125; åˆ¤å®šç‚¹ä¸è§£æ³•ä¸€ä¸€æ ·ï¼Œåªæ˜¯æ”¾åˆ°äº†åŒä¸€å…ƒç´ çš„ç¬¬äºŒå±æ€§ã€‚ä¸Šé¢æˆ‘ä»¬å†™çš„æ ˆMyStackæ˜¯å†™æ­»çš„æ•°æ®ç±»å‹intæ•°ç»„ï¼Œè¿™é‡Œè¦å…¨éƒ¨æ¢æˆStackNodeä¸å¦‚å°±å†™ä¸ªæ³›å‹çš„ä¸Šé¢çš„è§£ä¹Ÿæ˜¯ç”¨çš„è¿™ä¸ªæ ˆï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728class MyStack&lt;T&gt; &#123; private T[] data; private int size = -1; public MyStack() &#123; //data = new int[10000]; data = (T[])new Object[50]; &#125; public void push(T x) &#123; // æ˜¯å¦éœ€è¦æ‰©å®¹ size++; if (size&gt;data.length-1) &#123; data=Arrays.copyOf(data, data.length*2); &#125; data[size] = x; &#125; public void pop() &#123; size--; &#125; public T peek() &#123; if(!isEmpty())&#123; // æŠ›å¼‚å¸¸ &#125; return data[size]; &#125; public Boolean isEmpty()&#123; return size &lt; 0; &#125;&#125; æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸è§£ä¸€ä¸€æ ·åˆ†åˆ«æ˜¯O(1)ä¸O(n) æ€»ç»“æ€»ä½“ä¸Šæ˜¯æ¯”è¾ƒç®€å•å¯ä»¥å¿«çš„æ‰¾åˆ°æ€è·¯çš„ï¼ŒåŒæ—¶ä¹Ÿå¤šç†Ÿæ‚‰ç†Ÿæ‚‰æ ˆçš„æ•°æ®ç»“æ„ã€‚è¿™æ¬¡åŠ¨å›¾æ˜¯ç”¨adobeçš„anç”»çš„ä»¥åå¤§æ¦‚éƒ½ä¼šç”¨è¿™ä¸ªåšã€‚è®¾è®¡é—®é¢˜çš„ä¸¤é¢˜å°±å®Œç»“äº†ä¸‹ç¯‡å¼€å§‹åˆçº§çš„åˆé›†çš„æ•°å­¦é—®é¢˜","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"Spring IOCæ§åˆ¶åè½¬","slug":"Spring-IOCæ§åˆ¶åè½¬","date":"2021-04-11T03:32:47.000Z","updated":"2025-04-17T08:34:52.017Z","comments":true,"path":"2021/04/11/Spring-IOCæ§åˆ¶åè½¬/","link":"","permalink":"http://yournotes.cn/2021/04/11/Spring-IOC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/","excerpt":"","text":"1. Springæ¦‚è¿°1.1 Springæ˜¯ä»€ä¹ˆSpringæ˜¯åˆ†å±‚çš„ Java SE&#x2F;EEåº”ç”¨ full-stack(å…¨æ ˆå¼) è½»é‡çº§å¼€æºæ¡†æ¶ã€‚ æä¾›äº†è¡¨ç°å±‚ SpringMVCå’ŒæŒä¹…å±‚ Spring JDBC Templateä»¥åŠ ä¸šåŠ¡å±‚ äº‹åŠ¡ç®¡ç†ç­‰ä¼—å¤šçš„ä¼ä¸šçº§åº”ç”¨æŠ€æœ¯ï¼Œè¿˜èƒ½æ•´åˆå¼€æºä¸–ç•Œä¼—å¤šè‘—åçš„ç¬¬ä¸‰æ–¹æ¡†æ¶å’Œç±»åº“ï¼Œé€æ¸æˆä¸ºä½¿ç”¨æœ€å¤šçš„Java EE ä¼ä¸šåº”ç”¨å¼€æºæ¡†æ¶ã€‚ ä¸¤å¤§æ ¸å¿ƒ: ä»¥ IOCï¼ˆInverse Of Controlï¼šæ§åˆ¶åè½¬ï¼‰å’Œ AOPï¼ˆAspect Oriented Programmingï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ä¸ºå†…æ ¸ã€‚ 1.2 Springå‘å±•å†ç¨‹EJB 1997 å¹´ï¼ŒIBMæå‡ºäº†EJB çš„æ€æƒ³ 1998 å¹´ï¼ŒSUNåˆ¶å®šå¼€å‘æ ‡å‡†è§„èŒƒ EJB1.0 1999 å¹´ï¼ŒEJB1.1 å‘å¸ƒ 2001 å¹´ï¼ŒEJB2.0 å‘å¸ƒ 2003 å¹´ï¼ŒEJB2.1 å‘å¸ƒ 2006 å¹´ï¼ŒEJB3.0 å‘å¸ƒ Spring Rod Johnsonï¼ˆ Spring ä¹‹çˆ¶ï¼‰ æ”¹å˜Javaä¸–ç•Œçš„å¤§å¸ˆçº§äººç‰© 2002å¹´ç¼–è‘—ã€ŠExpert one on one J2EE design and developmentã€‹ æŒ‡å‡ºäº†JavaEEå’ŒEJBç»„ä»¶æ¡†æ¶ä¸­çš„å­˜åœ¨çš„ä¸€äº›ä¸»è¦ç¼ºé™·ï¼›æå‡ºæ™®é€šjavaç±»ä¾èµ–æ³¨å…¥æ›´ä¸ºç®€å•çš„è§£ å†³æ–¹æ¡ˆã€‚ 2004å¹´ç¼–è‘—ã€ŠExpert one-on-one J2EE Development without EJBã€‹ é˜è¿°äº†JavaEEå¼€å‘æ—¶ä¸ä½¿ç”¨EJBçš„è§£å†³æ–¹å¼ï¼ˆSpring é›å½¢ï¼‰ åŒå¹´4æœˆspring1.0è¯ç”Ÿ 2006å¹´10æœˆï¼Œå‘å¸ƒ Spring2.0 2009å¹´12æœˆï¼Œå‘å¸ƒ Spring3.0 2013å¹´12æœˆï¼Œå‘å¸ƒ Spring4.0 2017å¹´9æœˆï¼Œ å‘å¸ƒæœ€æ–° Spring5.0 é€šç”¨ç‰ˆï¼ˆGAï¼‰ 1.3 Springä¼˜åŠ¿1ï¼‰æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ Springå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡åˆ›å»ºå’Œå…³ç³»ç»´æŠ¤äº¤ç»™Springç®¡ç† ä»€ä¹ˆæ˜¯è€¦åˆåº¦ï¼Ÿå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œé€šå¸¸è¯´å½“ä¸€ä¸ªæ¨¡å—(å¯¹è±¡)æ›´æ”¹æ—¶ä¹Ÿéœ€è¦æ›´æ”¹å…¶ä»–æ¨¡å—(å¯¹è±¡)ï¼Œè¿™å°±æ˜¯ è€¦åˆï¼Œè€¦åˆåº¦è¿‡é«˜ä¼šä½¿ä»£ç çš„ç»´æŠ¤æˆæœ¬å¢åŠ ã€‚è¦å°½é‡è§£è€¦ 2ï¼‰AOPç¼–ç¨‹çš„æ”¯æŒ Springæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ–¹ä¾¿å®ç°ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªï¼Œè¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚ 3ï¼‰å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ é€šè¿‡é…ç½®å®Œæˆäº‹åŠ¡çš„ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ 4ï¼‰æ–¹ä¾¿æµ‹è¯•ï¼Œé™ä½JavaEE APIçš„ä½¿ç”¨ Springå¯¹Junit4æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨æ³¨è§£æµ‹è¯• 5ï¼‰æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ ä¸æ’é™¤å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒ Springä½“ç³»ç»“æ„ 2. åˆè¯†IOC2.1 æ¦‚è¿°**æ§åˆ¶åè½¬ï¼ˆInverse Of Controlï¼‰**ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚å®ƒçš„ç›®çš„æ˜¯æŒ‡å¯¼æˆ‘ä»¬è®¾è®¡å‡ºæ›´åŠ æ¾è€¦åˆçš„ç¨‹åºã€‚ æ§åˆ¶ï¼šåœ¨javaä¸­æŒ‡çš„æ˜¯å¯¹è±¡çš„æ§åˆ¶æƒé™ï¼ˆåˆ›å»ºã€é”€æ¯åè½¬ï¼šæŒ‡çš„æ˜¯å¯¹è±¡æ§åˆ¶æƒç”±åŸæ¥ ç”±å¼€å‘è€…åœ¨ç±»ä¸­æ‰‹åŠ¨æ§åˆ¶ åè½¬åˆ° ç”±Springå®¹å™¨æ§åˆ¶ ä¸¾ä¸ªæ —å­ ä¼ ç»Ÿæ–¹å¼ ä¹‹å‰æˆ‘ä»¬éœ€è¦ä¸€ä¸ªuserDaoå®ä¾‹ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±æ‰‹åŠ¨åˆ›å»º new UserDao(); IOCæ–¹å¼ ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªuserDaoå®ä¾‹ï¼Œç›´æ¥ä»springçš„IOCå®¹å™¨è·å¾—ï¼Œå¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™äº†springæ§åˆ¶ 2.2 è‡ªå®šä¹‰IOCå®¹å™¨2.2.1 ä»‹ç»éœ€æ±‚ å®ç°serviceå±‚ä¸daoå±‚ä»£ç è§£è€¦åˆ æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥è‡ªå®šä¹‰IOCç›¸å…³åæ ‡ ç¼–å†™Daoæ¥å£å’Œå®ç°ç±» ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±» ç¼–å†™æµ‹è¯•ä»£ç  2.2.2 å®ç°1ï¼‰åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥è‡ªå®šä¹‰IOCç›¸å…³åæ ‡ 1234567891011121314151617&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;dom4j&lt;/groupId&gt; &lt;artifactId&gt;dom4j&lt;/artifactId&gt; &lt;version&gt;1.6.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;jaxen&lt;/groupId&gt; &lt;artifactId&gt;jaxen&lt;/artifactId&gt; &lt;version&gt;1.1.6&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰ç¼–å†™Daoæ¥å£å’Œå®ç°ç±» 123public interface UserDao &#123; public void save();&#125; 12345public class UserDaoImpl implements UserDao &#123; public void save() &#123; System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 3ï¼‰ç¼–å†™Serviceæ¥å£å’Œå®ç°ç±» 123public interface UserService &#123; public void save();&#125; 1234567public class UserServiceImpl implements UserService &#123; private UserDao userDao; public void save()&#123; userDao = new UserDaoImpl(); userDao.save(); &#125;&#125; 4ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  1234567public class UserTest &#123; @Test public void testSave() throws Exception &#123; UserService userService = new UserServiceImpl(); userService.save(); &#125;&#125; 5ï¼‰é—®é¢˜ å½“å‰serviceå¯¹è±¡å’Œdaoå¯¹è±¡è€¦åˆåº¦å¤ªé«˜ï¼Œè€Œä¸”æ¯æ¬¡newçš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ã€‚ è§£è€¦åˆçš„åŸåˆ™æ˜¯ç¼–è¯‘æœŸä¸ä¾èµ–ï¼Œè€Œè¿è¡ŒæœŸä¾èµ–å°±è¡Œäº†ã€‚ 6ï¼‰ç¼–å†™beans.xml æŠŠæ‰€æœ‰éœ€è¦åˆ›å»ºå¯¹è±¡çš„ä¿¡æ¯å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ 1234&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;beans&gt; &lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; 7ï¼‰ç¼–å†™BeanFactoryå·¥å…·ç±» 12345678910111213141516171819202122232425262728293031public class BeanFactory &#123; private static Map&lt;String, Object&gt; ioc = new HashMap&lt;&gt;(); // ç¨‹åºå¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–å¯¹è±¡å®ä¾‹ static &#123; try &#123; // 1.è¯»å–é…ç½®æ–‡ä»¶ InputStream in = BeanFactory.class.getClassLoader().getResourceAsStream(&quot;beans.xml&quot;); // 2.è§£æxml SAXReader saxReader = new SAXReader(); Document document = saxReader.read(in); // 3.ç¼–å†™xpathè¡¨è¾¾å¼ String xpath = &quot;//bean&quot;; // 4.è·å–æ‰€æœ‰çš„beanæ ‡ç­¾ List&lt;Element&gt; list = document.selectNodes(xpath); // 5.éå†å¹¶åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œè®¾ç½®åˆ°mapé›†åˆä¸­ for (Element element : list) &#123; String id = element.attributeValue(&quot;id&quot;); String className = element.attributeValue(&quot;class&quot;); Object object = Class.forName(className).newInstance(); ioc.put(id, object); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; // è·å–æŒ‡å®šidçš„å¯¹è±¡å®ä¾‹ public static Object getBean(String beandId) &#123; return ioc.get(beandId); &#125;&#125; 8ï¼‰ä¿®æ”¹UserServiceImplå®ç°ç±» 1234567public class UserServiceImpl implements UserService &#123; private UserDao userDao; public void save() throws Exception &#123; userDao = (UserDao) BeanFactory.getBean(&quot;userDao&quot;); userDao.save(); &#125;&#125; 2.2.3 çŸ¥è¯†å°ç»“ å…¶å®å‡çº§åçš„BeanFactoryå°±æ˜¯ä¸€ä¸ªç®€å•çš„Springçš„IOCå®¹å™¨æ‰€å…·å¤‡çš„åŠŸèƒ½ã€‚ ä¹‹å‰æˆ‘ä»¬éœ€è¦ä¸€ä¸ªuserDaoå®ä¾‹ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±æ‰‹åŠ¨åˆ›å»º new UserDao(); ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªuserdaoå®ä¾‹ï¼Œç›´æ¥ä»springçš„IOCå®¹å™¨è·å¾—ï¼Œå¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™äº†springæ§åˆ¶ æœ€ç»ˆç›®æ ‡ï¼šä»£ç è§£è€¦åˆ 3. Springå¿«é€Ÿå…¥é—¨3.1 ä»‹ç»**éœ€æ±‚ï¼š**å€ŸåŠ©springçš„IOCå®ç°serviceå±‚ä¸daoå±‚ä»£ç è§£è€¦åˆ æ­¥éª¤åˆ†æ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥springå¼€å‘åŸºæœ¬åæ ‡ ç¼–å†™Daoæ¥å£å’Œå®ç°ç±» åˆ›å»ºspringæ ¸å¿ƒé…ç½®æ–‡ä»¶ åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½® UserDaoImpl ä½¿ç”¨springç›¸å…³APIè·å¾—Beanå®ä¾‹ 3.2 å®ç°1ï¼‰åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥springå¼€å‘åŸºæœ¬åæ ‡ 123456789101112&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2ï¼‰ç¼–å†™Daoæ¥å£å’Œå®ç°ç±» 123public interface UserDao &#123; public void save();&#125; 12345public class UserDaoImpl implements UserDao &#123; public void save() &#123; System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 3ï¼‰åˆ›å»ºspringæ ¸å¿ƒé…ç½®æ–‡ä»¶ 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;&lt;/beans&gt; 4ï¼‰åœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½® UserDaoImpl 123&lt;beans ...&gt; &lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt;&lt;/bean&gt;&lt;/beans&gt; 5ï¼‰ä½¿ç”¨springç›¸å…³APIè·å¾—Beanå®ä¾‹ 12345678public class UserTest &#123; @Test public void testSave() throws Exception &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); UserDao userDao = (UserDao) applicationContext.getBean(&quot;userDao&quot;); userDao.save(); &#125;&#125; 3.3 çŸ¥è¯†å°ç»“Springçš„å¼€å‘æ­¥éª¤ å¯¼å…¥åæ ‡ åˆ›å»ºBean åˆ›å»ºapplicationContext.xml åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡ŒBeané…ç½® åˆ›å»ºApplicationContextå¯¹è±¡ï¼Œæ‰§è¡ŒgetBean 4. Springç›¸å…³API4.1 APIç»§æ‰¿ä½“ç³»ä»‹ç»Springçš„APIä½“ç³»å¼‚å¸¸åºå¤§ï¼Œæˆ‘ä»¬ç°åœ¨åªå…³æ³¨ä¸¤ä¸ªBeanFactoryå’ŒApplicationContext 4.2 BeanFactoryBeanFactoryæ˜¯ IOC å®¹å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒå®šä¹‰äº†IOCçš„åŸºæœ¬åŠŸèƒ½ã€‚ ç‰¹ç‚¹ï¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨getBean()æ–¹æ³•æ—¶ï¼Œåˆ›å»ºæŒ‡å®šå¯¹è±¡çš„å®ä¾‹ 1BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource(&quot;applicationContext.xml&quot;)); 4.3 ApplicationContextä»£è¡¨åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¯ä»¥è·å¾—springä¸­IOCå®¹å™¨çš„Beanå¯¹è±¡ã€‚ ç‰¹ç‚¹ï¼šåœ¨springå®¹å™¨å¯åŠ¨æ—¶ï¼ŒåŠ è½½å¹¶åˆ›å»ºæ‰€æœ‰å¯¹è±¡çš„å®ä¾‹ å¸¸ç”¨å®ç°ç±» ClassPathXmlApplicationContext å®ƒæ˜¯ä»ç±»çš„æ ¹è·¯å¾„ä¸‹åŠ è½½é…ç½®æ–‡ä»¶ æ¨èä½¿ç”¨è¿™ç§ã€‚ FileSystemXmlApplicationContext å®ƒæ˜¯ä»ç£ç›˜è·¯å¾„ä¸ŠåŠ è½½é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥åœ¨ç£ç›˜çš„ä»»æ„ä½ç½®ã€‚ AnnotationConfigApplicationContext å½“ä½¿ç”¨æ³¨è§£é…ç½®å®¹å™¨å¯¹è±¡æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ­¤ç±»æ¥åˆ›å»º spring å®¹å™¨ã€‚å®ƒç”¨æ¥è¯»å–æ³¨è§£ã€‚ 1ApplicationContext app =new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); å¸¸ç”¨æ–¹æ³• Object getBean(String name); æ ¹æ®Beançš„idä»å®¹å™¨ä¸­è·å¾—Beanå®ä¾‹ï¼Œè¿”å›æ˜¯Objectï¼Œéœ€è¦å¼ºè½¬ã€‚ &lt;T&gt; T getBean(Class&lt;T&gt; requiredType); æ ¹æ®ç±»å‹ä»å®¹å™¨ä¸­åŒ¹é…Beanå®ä¾‹ï¼Œå½“å®¹å™¨ä¸­ç›¸åŒç±»å‹çš„Beanæœ‰å¤šä¸ªæ—¶ï¼Œåˆ™æ­¤æ–¹æ³•ä¼šæŠ¥é”™ &lt;T&gt; T getBean(String name,Class&lt;T&gt; requiredType); æ ¹æ®Beançš„idå’Œç±»å‹è·å¾—Beanå®ä¾‹ï¼Œè§£å†³å®¹å™¨ä¸­ç›¸åŒç±»å‹Beanæœ‰å¤šä¸ªæƒ…å†µã€‚ 4.4 çŸ¥è¯†å°ç»“123ApplicationContext app = new ClasspathXmlApplicationContext(&quot;xmlæ–‡ä»¶&quot;); app.getBean(&quot;id&quot;); app.getBean(Class); 5. Springé…ç½®æ–‡ä»¶5.1 Beanæ ‡ç­¾åŸºæœ¬é…ç½®&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;&lt;/bean&gt; ç”¨äºé…ç½®å¯¹è±¡äº¤ç”±Springæ¥åˆ›å»ºã€‚ åŸºæœ¬å±æ€§ï¼š idï¼šBeanå®ä¾‹åœ¨Springå®¹å™¨ä¸­çš„å”¯ä¸€æ ‡è¯† classï¼šBeançš„å…¨é™å®šå é»˜è®¤æƒ…å†µä¸‹å®ƒè°ƒç”¨çš„æ˜¯ç±»ä¸­çš„ æ— å‚æ„é€ å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰æ— å‚æ„é€ å‡½æ•°åˆ™ä¸èƒ½åˆ›å»ºæˆåŠŸã€‚ 5.2 Beanæ ‡ç­¾èŒƒå›´é…ç½®1&lt;bean id=&quot;&quot; class=&quot;&quot; scope=&quot;&quot;&gt;&lt;/bean&gt; scopeå±æ€§æŒ‡å¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼Œå–å€¼å¦‚ä¸‹ï¼š å–å€¼èŒƒå›´ è¯´æ˜ singleton é»˜è®¤å€¼ï¼Œå•ä¾‹çš„ prototype å¤šä¾‹çš„ request WEBé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºä¸€ä¸ªBeançš„å¯¹è±¡ï¼Œå°†å¯¹è±¡å­˜å…¥åˆ°requeståŸŸä¸­ session WEBé¡¹ç›®ä¸­ï¼ŒSpringåˆ›å»ºä¸€ä¸ªBeançš„å¯¹è±¡ï¼Œå°†å¯¹è±¡å­˜å…¥åˆ°sessionåŸŸä¸­ global sessio WEBé¡¹ç›®ä¸­ï¼Œåº”ç”¨åœ¨Portletç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰Portletç¯å¢ƒé‚£ä¹ˆglobalSession ç›¸å½“äºsession 1ï¼‰å½“scopeçš„å–å€¼ä¸ºsingletonæ—¶ Beançš„å®ä¾‹åŒ–ä¸ªæ•°ï¼š1ä¸ª Beançš„å®ä¾‹åŒ–æ—¶æœºï¼šå½“Springæ ¸å¿ƒæ–‡ä»¶è¢«åŠ è½½æ—¶ï¼Œå®ä¾‹åŒ–é…ç½®çš„Beanå®ä¾‹ Beançš„ç”Ÿå‘½å‘¨æœŸï¼š å¯¹è±¡åˆ›å»ºï¼šå½“åº”ç”¨åŠ è½½ï¼Œåˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«åˆ›å»ºäº† å¯¹è±¡è¿è¡Œï¼šåªè¦å®¹å™¨åœ¨ï¼Œå¯¹è±¡ä¸€ç›´æ´»ç€ å¯¹è±¡é”€æ¯ï¼šå½“åº”ç”¨å¸è½½ï¼Œé”€æ¯å®¹å™¨æ—¶ï¼Œå¯¹è±¡å°±è¢«é”€æ¯äº† 2ï¼‰å½“scopeçš„å–å€¼ä¸ºprototypeæ—¶ Beançš„å®ä¾‹åŒ–ä¸ªæ•°ï¼šå¤šä¸ª Beançš„å®ä¾‹åŒ–æ—¶æœºï¼šå½“è°ƒç”¨getBean()æ–¹æ³•æ—¶å®ä¾‹åŒ–Bean Beançš„ç”Ÿå‘½å‘¨æœŸï¼š å¯¹è±¡åˆ›å»ºï¼šå¯¹è±¡åˆ›å»ºï¼šå½“ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹ å¯¹è±¡è¿è¡Œï¼šåªè¦å¯¹è±¡åœ¨ä½¿ç”¨ä¸­ï¼Œå°±ä¸€ç›´æ´»ç€ å¯¹è±¡é”€æ¯ï¼šå½“å¯¹è±¡é•¿æ—¶é—´ä¸ç”¨æ—¶ï¼Œè¢« Java çš„åƒåœ¾å›æ”¶å™¨å›æ”¶äº† 5.3 Beanç”Ÿå‘½å‘¨æœŸé…ç½®&lt;bean id=&quot;&quot; class=&quot;&quot; scope=&quot;&quot; init-method=&quot;&quot; destroy-method=&quot;&quot;&gt;&lt;/bean&gt; init-methodï¼šæŒ‡å®šç±»ä¸­çš„åˆå§‹åŒ–æ–¹æ³•åç§° destroy-methodï¼šæŒ‡å®šç±»ä¸­é”€æ¯æ–¹æ³•åç§° 5.4 Beanå®ä¾‹åŒ–ä¸‰ç§æ–¹å¼ æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ– å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ– å·¥å‚æ™®é€šæ–¹æ³•å®ä¾‹åŒ– 5.4.1 æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–å®ƒä¼šæ ¹æ®é»˜è®¤æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»ºç±»å¯¹è±¡ï¼Œå¦‚æœbeanä¸­æ²¡æœ‰é»˜è®¤æ— å‚æ„é€ å‡½æ•°ï¼Œå°†ä¼šåˆ›å»ºå¤±è´¥ 1&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;/&gt; 5.4.2 å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ–åº”ç”¨åœºæ™¯ ä¾èµ–çš„jaråŒ…ä¸­æœ‰ä¸ªAç±»ï¼ŒAç±»ä¸­æœ‰ä¸ªé™æ€æ–¹æ³•m1ï¼Œm1æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªBå¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬é¢‘ç¹ä½¿ç”¨Bå¯¹è±¡ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†Bå¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™springçš„IOCå®¹å™¨ï¼Œä»¥åæˆ‘ä»¬åœ¨ä½¿ç”¨Bå¯¹è±¡æ—¶ï¼Œæ— éœ€è°ƒç”¨Aç±»ä¸­çš„m1æ–¹æ³•ï¼Œç›´æ¥ä»IOCå®¹å™¨è·å¾—ã€‚ 12345public class StaticFactoryBean &#123; public static UserDao createUserDao()&#123; return new UserDaoImpl(); &#125;&#125; 1&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.factory.StaticFactoryBean&quot; factory-method=&quot;createUserDao&quot; /&gt; 5.4.3 å·¥å‚æ™®é€šæ–¹æ³•å®ä¾‹åŒ–åº”ç”¨åœºæ™¯ ä¾èµ–çš„jaråŒ…ä¸­æœ‰ä¸ªAç±»ï¼ŒAç±»ä¸­æœ‰ä¸ªæ™®é€šæ–¹æ³•m1ï¼Œm1æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªBå¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬é¢‘ç¹ä½¿ç”¨Bå¯¹è±¡ï¼Œ æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†Bå¯¹è±¡çš„åˆ›å»ºæƒäº¤ç»™springçš„IOCå®¹å™¨ï¼Œä»¥åæˆ‘ä»¬åœ¨ä½¿ç”¨Bå¯¹è±¡æ—¶ï¼Œæ— éœ€è°ƒç”¨Aç±»ä¸­çš„m1æ–¹æ³•ï¼Œç›´æ¥ä»IOCå®¹å™¨è·å¾—ã€‚ 12345public class DynamicFactoryBean &#123; public UserDao createUserDao()&#123; return new UserDaoImpl(); &#125;&#125; 12&lt;bean id=&quot;dynamicFactoryBean&quot; class=&quot;com.lagou.factory.DynamicFactoryBean&quot;/&gt; &lt;bean id=&quot;userDao&quot; factory-bean=&quot;dynamicFactoryBean&quot; factory- method=&quot;createUserDao&quot;/&gt; 5.5 Beanä¾èµ–æ³¨å…¥æ¦‚è¿°**ä¾èµ–æ³¨å…¥ DIï¼ˆDependency Injectionï¼‰ï¼š**å®ƒæ˜¯ Spring æ¡†æ¶æ ¸å¿ƒ IOC çš„å…·ä½“å®ç°ã€‚ åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œé€šè¿‡æ§åˆ¶åè½¬ï¼ŒæŠŠå¯¹è±¡çš„åˆ›å»ºäº¤ç»™äº† Springï¼Œä½†æ˜¯ä»£ç ä¸­ä¸å¯èƒ½å‡ºç°æ²¡æœ‰ä¾èµ–çš„æƒ…å†µã€‚IOC è§£è€¦åªæ˜¯é™ä½ä»–ä»¬çš„ä¾èµ–å…³ç³»ï¼Œä½†ä¸ä¼šæ¶ˆé™¤ã€‚ä¾‹å¦‚ï¼šä¸šåŠ¡å±‚ä»ä¼šè°ƒç”¨æŒä¹…å±‚çš„æ–¹æ³•ã€‚ é‚£è¿™ç§ä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ä¾èµ–å…³ç³»ï¼Œåœ¨ä½¿ç”¨ Spring ä¹‹åï¼Œå°±è®© Spring æ¥ç»´æŠ¤äº†ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯é€šè¿‡æ¡†æ¶æŠŠæŒä¹…å±‚å¯¹è±¡ä¼ å…¥ä¸šåŠ¡å±‚ï¼Œè€Œä¸ç”¨æˆ‘ä»¬è‡ªå·±å»è·å–ã€‚ 5.6 Beanä¾èµ–æ³¨å…¥æ–¹å¼5.6.1 æ„é€ æ–¹æ³•åœ¨UserServiceImplä¸­åˆ›å»ºæœ‰å‚æ„é€  12345678910public class UserServiceImpl implements UserService &#123; private UserDao userDao; public UserServiceImpl(UserDao userDao) &#123; this.userDao = userDao; &#125; @Override public void save() &#123; userDao.save(); &#125;&#125; é…ç½®Springå®¹å™¨è°ƒç”¨æœ‰å‚æ„é€ æ—¶è¿›è¡Œæ³¨å…¥ 12345&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;/&gt;&lt;bean id=&quot;userService&quot; class=&quot;com.lagou.service.impl.UserServiceImpl&quot;&gt; &lt;!--&lt;constructor-arg index=&quot;0&quot; type=&quot;com.lagou.dao.UserDao&quot; ref=&quot;userDao&quot;/&gt;--&gt; &lt;constructor-arg name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;&lt;/bean&gt; 5.6.2 setæ–¹æ³•åœ¨UserServiceImplä¸­åˆ›å»ºsetæ–¹æ³• 12345678910public class UserServiceImpl implements UserService &#123; private UserDao userDao; public void setUserDao(UserDao userDao) &#123; this.userDao = userDao; &#125; @Override public void save() &#123; userDao.save(); &#125;&#125; é…ç½®Springå®¹å™¨è°ƒç”¨setæ–¹æ³•è¿›è¡Œæ³¨å…¥ 1234&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;/&gt;&lt;bean id=&quot;userService&quot; class=&quot;com.lagou.service.impl.UserServiceImpl&quot;&gt; &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;&lt;/bean&gt; 5.6.3 På‘½åç©ºé—´æ³¨å…¥På‘½åç©ºé—´æ³¨å…¥æœ¬è´¨ä¹Ÿæ˜¯setæ–¹æ³•æ³¨å…¥ï¼Œä½†æ¯”èµ·ä¸Šè¿°çš„setæ–¹æ³•æ³¨å…¥æ›´åŠ æ–¹ä¾¿ï¼Œä¸»è¦ä½“ç°åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹ï¼š é¦–å…ˆï¼Œéœ€è¦å¼•å…¥På‘½åç©ºé—´ï¼š 1xmlns:p=&quot;http://www.springframework.org/schema/p&quot; å…¶æ¬¡ï¼Œéœ€è¦ä¿®æ”¹æ³¨å…¥æ–¹å¼ï¼š 12&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;/&gt;&lt;bean id=&quot;userService&quot; class=&quot;com.lagou.service.impl.UserServiceImpl&quot; p:userDao-ref=&quot;userDao&quot;/&gt; 5.7 Beanä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹ä¸Šé¢æ“ä½œï¼Œéƒ½æ˜¯æ³¨å…¥Beanå¯¹è±¡ï¼Œé™¤äº†å¯¹è±¡çš„å¼•ç”¨å¯ä»¥æ³¨å…¥ï¼Œæ™®é€šæ•°æ®ç±»å‹å’Œé›†åˆéƒ½å¯ä»¥åœ¨å®¹å™¨ä¸­è¿›è¡Œæ³¨å…¥ã€‚ æ³¨å…¥æ•°æ®çš„ä¸‰ç§æ•°æ®ç±»å‹ æ™®é€šæ•°æ®ç±»å‹ å¼•ç”¨æ•°æ®ç±»å‹ é›†åˆæ•°æ®ç±»å‹ å…¶ä¸­å¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°äº†ï¼Œä¹‹å‰çš„æ“ä½œéƒ½æ˜¯å¯¹UserDaoå¯¹è±¡çš„å¼•ç”¨è¿›è¡Œæ³¨å…¥çš„ã€‚ä¸‹é¢å°†ä»¥setæ–¹æ³•æ³¨å…¥ä¸ºä¾‹ï¼Œæ¼”ç¤ºæ™®é€šæ•°æ®ç±»å‹å’Œé›†åˆæ•°æ®ç±»å‹çš„æ³¨å…¥ã€‚ 5.7.1 æ³¨å…¥æ™®é€šæ•°æ®ç±»å‹12345678910public class User &#123; private String username; private String age; public void setUsername(String username) &#123; this.username = username; &#125; public void setAge(String age) &#123; this.age = age; &#125;&#125; 1234&lt;bean id=&quot;user&quot; class=&quot;com.lagou.domain.User&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;jack&quot;/&gt; &lt;property name=&quot;age&quot; value=&quot;18&quot;/&gt;&lt;/bean&gt; 5.7.2 æ³¨å…¥é›†åˆæ•°æ®ç±»å‹1ï¼‰Listé›†åˆæ³¨å…¥ 1234567public class UserDaoImpl implements UserDao &#123; private List&lt;Object&gt; list; public void save() &#123; System.out.println(list); System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 123456789101112&lt;bean id=&quot;user&quot; class=&quot;com.lagou.domain.User&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;jack&quot;/&gt; &lt;property name=&quot;age&quot; value=&quot;18&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;list&quot;&gt; &lt;list&gt; &lt;value&gt;aaa&lt;/value&gt; &lt;ref bean=&quot;user&quot;&gt;&lt;/ref&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt; 2ï¼‰Seté›†åˆæ³¨å…¥ 12345678910public class UserDaoImpl implements UserDao &#123; private Set&lt;Object&gt; set; public void setSet(Set&lt;Object&gt; set) &#123; this.set = set; &#125; public void save() &#123; System.out.println(set); System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 123456789101112&lt;bean id=&quot;user&quot; class=&quot;com.lagou.domain.User&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;jack&quot;/&gt; &lt;property name=&quot;age&quot; value=&quot;18&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;set&quot;&gt; &lt;list&gt; &lt;value&gt;bbb&lt;/value&gt; &lt;ref bean=&quot;user&quot;&gt;&lt;/ref&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt; 3ï¼‰Arrayæ•°ç»„æ³¨å…¥ 12345678910public class UserDaoImpl implements UserDao &#123; private Object[] array; public void setArray(Object[] array) &#123; this.array = array; &#125; public void save() &#123; System.out.println(Arrays.toString(array)); System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 123456789101112&lt;bean id=&quot;user&quot; class=&quot;com.lagou.domain.User&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;jack&quot;/&gt; &lt;property name=&quot;age&quot; value=&quot;18&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;array&quot;&gt; &lt;array&gt; &lt;value&gt;ccc&lt;/value&gt; &lt;ref bean=&quot;user&quot;&gt;&lt;/ref&gt; &lt;/array&gt; &lt;/property&gt;&lt;/bean&gt; 4ï¼‰Mapé›†åˆæ³¨å…¥ 12345678910public class UserDaoImpl implements UserDao &#123; private Map&lt;String, Object&gt; map; public void setMap(Map&lt;String, Object&gt; map) &#123; this.map = map; &#125; public void save() &#123; System.out.println(map); System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 123456789101112&lt;bean id=&quot;user&quot; class=&quot;com.lagou.domain.User&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;jack&quot;/&gt; &lt;property name=&quot;age&quot; value=&quot;18&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;map&quot;&gt; &lt;map&gt; &lt;entry key=&quot;k1&quot; value=&quot;ddd&quot;/&gt; &lt;entry key=&quot;k2&quot; value-ref=&quot;user&quot;&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt;&lt;/bean&gt; 5ï¼‰Propertiesé…ç½®æ³¨å…¥ 12345678910public class UserDaoImpl implements UserDao &#123; private Properties properties; public void setProperties(Properties properties) &#123; this.properties = properties; &#125; public void save() &#123; System.out.println(properties); System.out.println(&quot;ä¿å­˜æˆåŠŸäº†...&quot;); &#125;&#125; 123456789&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt; &lt;property name=&quot;properties&quot;&gt; &lt;props&gt; &lt;prop key=&quot;k1&quot;&gt;v1&lt;/prop&gt; &lt;prop key=&quot;k2&quot;&gt;v2&lt;/prop&gt; &lt;prop key=&quot;k3&quot;&gt;v3&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt;&lt;/bean&gt; 5.8 é…ç½®æ–‡ä»¶æ¨¡å—åŒ–å®é™…å¼€å‘ä¸­ï¼ŒSpringçš„é…ç½®å†…å®¹éå¸¸å¤šï¼Œè¿™å°±å¯¼è‡´Springé…ç½®å¾ˆç¹æ‚ä¸”ä½“ç§¯å¾ˆå¤§ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥å°†éƒ¨åˆ†é…ç½®æ‹†è§£åˆ°å…¶ä»–é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„é…ç½®æ–‡ä»¶æ¨¡å—åŒ–ã€‚ 1ï¼‰å¹¶åˆ—çš„å¤šä¸ªé…ç½®æ–‡ä»¶ 1ApplicationContext act = new ClassPathXmlApplicationContext(&quot;beans1.xml&quot;,&quot;beans2.xml&quot;,&quot;...&quot;); 2ï¼‰ä¸»ä»é…ç½®æ–‡ä»¶ 1&lt;import resource=&quot;applicationContext-xxx.xml&quot;/&gt; æ³¨æ„ï¼š åŒä¸€ä¸ªxmlä¸­ä¸èƒ½å‡ºç°ç›¸åŒåç§°çš„bean,å¦‚æœå‡ºç°ä¼šæŠ¥é”™ å¤šä¸ªxmlå¦‚æœå‡ºç°ç›¸åŒåç§°çš„beanï¼Œä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ååŠ è½½çš„ä¼šè¦†ç›–å‰åŠ è½½çš„bean 5.9 çŸ¥è¯†å°ç»“Springçš„é‡ç‚¹é…ç½® &lt;bean&gt;æ ‡ç­¾ï¼šåˆ›å»ºå¯¹è±¡å¹¶æ”¾åˆ°springçš„IOCå®¹å™¨ idå±æ€§:åœ¨å®¹å™¨ä¸­Beanå®ä¾‹çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸å…è®¸é‡å¤ classå±æ€§:è¦å®ä¾‹åŒ–çš„Beançš„å…¨é™å®šå scopeå±æ€§:Beançš„ä½œç”¨èŒƒå›´ï¼Œå¸¸ç”¨æ˜¯Singleton(é»˜è®¤)å’Œprototype &lt;constructor-arg&gt;æ ‡ç­¾ï¼šå±æ€§æ³¨å…¥ nameå±æ€§ï¼šå±æ€§åç§° valueå±æ€§ï¼šæ³¨å…¥çš„æ™®é€šå±æ€§å€¼ refå±æ€§ï¼šæ³¨å…¥çš„å¯¹è±¡å¼•ç”¨å€¼ &lt;property&gt;æ ‡ç­¾ï¼šå±æ€§æ³¨å…¥ nameå±æ€§ï¼šå±æ€§åç§° valueå±æ€§ï¼šæ³¨å…¥çš„æ™®é€šå±æ€§å€¼ refå±æ€§ï¼šæ³¨å…¥çš„å¯¹è±¡å¼•ç”¨å€¼ &lt;list&gt; &lt;set&gt; &lt;array&gt; &lt;map&gt; &lt;props&gt; &lt;import&gt;æ ‡ç­¾:å¯¼å…¥å…¶ä»–çš„Springçš„åˆ†æ–‡ä»¶ 6. DbUtilsï¼ˆIOCå®æˆ˜ï¼‰6.1 DbUtilsæ˜¯ä»€ä¹ˆï¼ŸDbUtilsæ˜¯Apacheçš„ä¸€æ¬¾ç”¨äºç®€åŒ–Daoä»£ç çš„å·¥å…·ç±»ï¼Œå®ƒåº•å±‚å°è£…äº†JDBCæŠ€æœ¯ã€‚ æ ¸å¿ƒå¯¹è±¡ 1QueryRunner queryRunner = new QueryRunner(DataSource dataSource); æ ¸å¿ƒæ–¹æ³• int update(); æ‰§è¡Œå¢ã€åˆ ã€æ”¹è¯­å¥ T query(); æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ ResultSetHandler è¿™æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸»è¦ä½œç”¨æ˜¯å°†æ•°æ®åº“è¿”å›çš„è®°å½•å°è£…åˆ°å®ä½“å¯¹è±¡ ä¸¾ä¸ªä¾‹å­ æŸ¥è¯¢æ•°æ®åº“æ‰€æœ‰è´¦æˆ·ä¿¡æ¯åˆ°Accountå®ä½“ä¸­ 123456789101112131415public class DbUtilsTest &#123; @Test public void findAllTest() throws Exception &#123; // åˆ›å»ºDBUtilså·¥å…·ç±»ï¼Œä¼ å…¥è¿æ¥æ±  QueryRunner queryRunner = new QueryRunner(JdbcUtils.getDataSource()); // ç¼–å†™sql String sql = &quot;select * from account&quot;; // æ‰§è¡Œsql List&lt;Account&gt; list = queryRunner.query(sql, new BeanListHandler&lt;Account&gt; (Account.class)); // æ‰“å°ç»“æœ for (Account account : list) &#123; System.out.println(account); &#125; &#125;&#125; 6.2 Springçš„xmlæ•´åˆDbUtils6.2.1 ä»‹ç»éœ€æ±‚ åŸºäºSpringçš„xmlé…ç½®å®ç°è´¦æˆ·çš„CRUDæ¡ˆä¾‹ æ­¥éª¤åˆ†æ å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ ç¼–å†™Accountå®ä½“ç±» ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ä»£ç  6.2.2 å®ç°1ï¼‰å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ 123456789101112131415CREATE DATABASE `spring_db`; USE `spring_db`; CREATE TABLE `account` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(32) DEFAULT NULL, `money` double DEFAULT NULL, PRIMARY KEY (`id`)); insert into `account`(`id`, `name`, `money`) values (1, &#x27;tom&#x27;, 1000), (2, &#x27;jerry&#x27;, 1000); 2ï¼‰åˆ›å»ºjavaé¡¹ç›®ï¼Œå¯¼å…¥åæ ‡ 123456789101112131415161718192021222324252627&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.9&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-dbutils&lt;/groupId&gt; &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt; &lt;version&gt;1.6&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 3ï¼‰ç¼–å†™Accountå®ä½“ç±» 12345public class Account &#123; private Integer id; private String name; private double money;&#125; 4ï¼‰ç¼–å†™AccountDaoæ¥å£å’Œå®ç°ç±» 1234567public interface AccountDao &#123; public List&lt;Account&gt; findAll(); public Account findById(Integer id); public void save(Account account); public void update(Account account); public void delete(Integer id);&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970public class AccountDaoImpl implements AccountDao &#123; private QueryRunner queryRunner; public void setQueryRunner(QueryRunner queryRunner) &#123; this.queryRunner = queryRunner; &#125; @Override public List&lt;Account&gt; findAll() &#123; List&lt;Account&gt; list = null; // ç¼–å†™ sql String sql = &quot;select * from account&quot;; try &#123; // æ‰§è¡Œsql list = queryRunner.query(sql, new BeanListHandler&lt;Account&gt; (Account.class)); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; return list; &#125; @Override public Account findById(Integer id) &#123; Account account = null; // ç¼–å†™sql String sql = &quot;select * from account where id = ?&quot;; try &#123; // æ‰§è¡Œsql account = queryRunner.query(sql, new BeanHandler&lt;Account&gt; (Account.class), id); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; return account; &#125; @Override public void save(Account account) &#123; // ç¼–å†™sql String sql = &quot;insert into account values(null,?,?)&quot;; // æ‰§è¡Œsql try &#123; queryRunner.update(sql, account.getName(), account.getMoney()); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; @Override public void update(Account account) &#123; // ç¼–å†™sql String sql = &quot;update account set name = ?,money = ? where id = ?&quot;; // æ‰§è¡Œsql try &#123; queryRunner.update(sql, account.getName(), account.getMoney(),account.getId()); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; @Override public void delete(Integer id) &#123; // ç¼–å†™sql String sql = &quot;delete from account where id = ?&quot;; // æ‰§è¡Œsql try &#123; queryRunner.update(sql, id); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 5ï¼‰ç¼–å†™AccountServiceæ¥å£å’Œå®ç°ç±» 1234567public interface AccountService &#123; public List&lt;Account&gt; findAll(); public Account findById(Integer id); public void save(Account account); public void update(Account account); public void delete(Integer id);&#125; 1234567891011121314151617181920212223242526public class AccountServiceImpl implements AccountService &#123; private AccountDao accountDao; public void setAccountDao(AccountDao accountDao) &#123; this.accountDao = accountDao; &#125; @Override public List&lt;Account&gt; findAll() &#123; return accountDao.findAll(); &#125; @Override public Account findById(Integer id) &#123; return accountDao.findById(id); &#125; @Override public void save(Account account) &#123; accountDao.save(account); &#125; @Override public void update(Account account) &#123; accountDao.update(account); &#125; @Override public void delete(Integer id) &#123; accountDao.delete(id); &#125;&#125; 6ï¼‰ç¼–å†™springæ ¸å¿ƒé…ç½®æ–‡ä»¶ applicationContext.xml 123456789101112131415161718192021222324&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!--æŠŠæ•°æ®åº“è¿æ¥æ± äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/spring_db&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠQueryRunneräº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;queryRunner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot;&gt; &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt; &lt;!--æŠŠAccountDaoäº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;accountDao&quot; class=&quot;com.lagou.dao.impl.AccountDaoImpl&quot;&gt; &lt;property name=&quot;queryRunner&quot; ref=&quot;queryRunner&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠAccountServiceäº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;accountService&quot; class=&quot;com.lagou.service.impl.AccountServiceImpl&quot;&gt; &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; 7ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940public class AccountServiceTest &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); AccountService accountService = applicationContext.getBean(AccountService.class); //æµ‹è¯•ä¿å­˜ @Test public void testSave() &#123; Account account = new Account(); account.setName(&quot;lucy&quot;); account.setMoney(100d); accountService.save(account); &#125; //æµ‹è¯•æŸ¥è¯¢ @Test public void testFindById() &#123; Account account = accountService.findById(3); System.out.println(account); &#125; //æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰ @Testpublic void testFindAll() &#123; List&lt;Account&gt; accountList = accountService.findAll(); for (Account account : accountList) &#123; System.out.println(account); &#125; &#125; //æµ‹è¯•ä¿®æ”¹ @Test public void testUpdate() &#123; Account account = new Account(); account.setId(3); account.setName(&quot;jack&quot;); account.setMoney(2000d); accountService.update(account); &#125; //æµ‹è¯•åˆ é™¤ @Test public void testDelete() &#123; accountService.delete(3); &#125;&#125; 8ï¼‰æŠ½å–jdbcé…ç½®æ–‡ä»¶ applicationContext.xmlåŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶è·å¾—è¿æ¥ä¿¡æ¯ã€‚ é¦–å…ˆï¼Œéœ€è¦å¼•å…¥contextå‘½åç©ºé—´å’Œçº¦æŸè·¯å¾„ï¼š å‘½åç©ºé—´ï¼š xmlns:context&#x3D;â€http://www.springframework.org/schema/contextâ€œ çº¦æŸè·¯å¾„ï¼š http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd 1234567&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;&lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 6.3 çŸ¥è¯†å°ç»“ DataSourceçš„åˆ›å»ºæƒäº¤ç”±Springå®¹å™¨å»å®Œæˆ QueryRunnerçš„åˆ›å»ºæƒäº¤ç”±Springå®¹å™¨å»å®Œæˆï¼Œä½¿ç”¨æ„é€ æ–¹æ³•ä¼ é€’DataSource Springå®¹å™¨åŠ è½½propertiesæ–‡ä»¶ &lt;context:property-placeholder location=&quot;xx.properties&quot;/&gt; &lt;property name=&quot;&quot; value=&quot;${key}&quot;/&gt; 7. Springæ³¨è§£å¼€å‘Springæ˜¯è½»ä»£ç è€Œé‡é…ç½®çš„æ¡†æ¶ï¼Œé…ç½®æ¯”è¾ƒç¹é‡ï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œæ‰€ä»¥æ³¨è§£å¼€å‘æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œæ³¨è§£ä»£æ›¿xmlé…ç½®æ–‡ä»¶å¯ä»¥ç®€åŒ–é…ç½®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ 7.1 Springå¸¸ç”¨æ³¨è§£7.1.1 ä»‹ç»Springå¸¸ç”¨æ³¨è§£ä¸»è¦æ˜¯æ›¿ä»£&lt;bean&gt;çš„é…ç½® æ³¨é‡Š è¯´æ˜ @Component ä½¿ç”¨åœ¨ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Controller ä½¿ç”¨åœ¨webå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Service ä½¿ç”¨åœ¨serviceå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Repository ä½¿ç”¨åœ¨daoå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean @Autowired ä½¿ç”¨åœ¨å­—æ®µä¸Šç”¨äºæ ¹æ®ç±»å‹ä¾èµ–æ³¨å…¥ @Qualifier ç»“åˆ@Autowiredä¸€èµ·ä½¿ç”¨,æ ¹æ®åç§°è¿›è¡Œä¾èµ–æ³¨å…¥ @Resource ç›¸å½“äº@Autowired+@Qualifierï¼ŒæŒ‰ç…§åç§°è¿›è¡Œæ³¨å…¥ @Value æ³¨å…¥æ™®é€šå±æ€§ @Scope æ ‡æ³¨Beançš„ä½œç”¨èŒƒå›´ @PostConstruct ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„åˆå§‹åŒ–æ–¹æ³• @PreDestroy ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„é”€æ¯æ–¹æ³• è¯´æ˜ï¼š JDK11ä»¥åå®Œå…¨ç§»é™¤äº†javaxæ‰©å±•å¯¼è‡´ä¸èƒ½ä½¿ç”¨@resourceæ³¨è§£ 123456&lt;!--éœ€è¦å¼•å…¥--&gt;&lt;dependency&gt; &lt;groupId&gt;javax.annotation&lt;/groupId&gt; &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt;&lt;/dependency&gt; 7.1.2 å®ç°1ï¼‰Beanå®ä¾‹åŒ–ï¼ˆIOCï¼‰ 1&lt;bean id=&quot;userDao&quot; class=&quot;com.lagou.dao.impl.UserDaoImpl&quot;&gt;&lt;/bean&gt; ä½¿ç”¨@Compontæˆ–@Repositoryæ ‡è¯†UserDaoImpléœ€è¦Springè¿›è¡Œå®ä¾‹åŒ–ã€‚ 12345// @Component(value = &quot;userDao&quot;) @Repository // å¦‚æœæ²¡æœ‰å†™valueå±æ€§å€¼ï¼ŒBeançš„idä¸ºï¼šç±»åé¦–å­—æ¯å°å†™ public class UserDaoImpl implements UserDao &#123;&#125; 2ï¼‰å±æ€§ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ 123&lt;bean id=&quot;userService&quot; class=&quot;com.lagou.service.impl.UserServiceImpl&quot;&gt; &lt;property name=&quot;userDao&quot; ref=&quot;userDaoImpl&quot;/&gt;&lt;/bean&gt; ä½¿ç”¨@Autowiredæˆ–è€…@Autowired+@Qulifieræˆ–è€…@Resourceè¿›è¡ŒuserDaoçš„æ³¨å…¥ 123456789101112@Service public class UserServiceImpl implements UserService &#123; @Autowired private UserDao userDao; // &lt;property name=&quot;userDao&quot; ref=&quot;userDaoImpl&quot;/&gt; // @Autowired // @Qualifier(&quot;userDaoImpl&quot;) // @Resource(name = &quot;userDaoImpl&quot;) public void setUserDao(UserDao userDao) &#123; this.userDao = userDao; &#125;&#125; 3ï¼‰@Value ä½¿ç”¨@Valueè¿›è¡Œå­—ç¬¦ä¸²çš„æ³¨å…¥ï¼Œç»“åˆSPELè¡¨è¾¾å¼è·å¾—é…ç½®å‚æ•° 12345678@Service public class UserServiceImpl implements UserService &#123; @Value(&quot;æ³¨å…¥æ™®é€šæ•°æ®&quot;) private String str; @Value(&quot;$&#123;jdbc.driver&#125;&quot;) private String driver;&#125; 4ï¼‰@Scope 1&lt;bean scope=&quot;&quot;/&gt; ä½¿ç”¨@Scopeæ ‡æ³¨Beançš„èŒƒå›´ 12345@Service @Scope(&quot;singleton&quot;) public class UserServiceImpl implements UserService &#123;&#125; 5ï¼‰Beanç”Ÿå‘½å‘¨æœŸ 1&lt;bean init-method=&quot;init&quot; destroy-method=&quot;destory&quot; /&gt; ä½¿ç”¨@PostConstructæ ‡æ³¨åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨@PreDestroyæ ‡æ³¨é”€æ¯æ–¹æ³• 12345678@PostConstruct public void init()&#123; System.out.println(&quot;åˆå§‹åŒ–æ–¹æ³•....&quot;);&#125;@PreDestroy public void destroy()&#123; System.out.println(&quot;é”€æ¯æ–¹æ³•.....&quot;);&#125; 7.2 Springå¸¸ç”¨æ³¨è§£æ•´åˆDbUtilsæ­¥éª¤åˆ†æ æ‹·è´xmlé…ç½®é¡¹ç›®ï¼Œæ”¹ä¸ºæ³¨è§£é…ç½®é¡¹ç›® ä¿®æ”¹AccountDaoImplå®ç°ç±» ä¿®æ”¹AccountServiceImplå®ç°ç±» ä¿®æ”¹springæ ¸å¿ƒé…ç½®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ä»£ç  1ï¼‰æ‹·è´xmlé…ç½®é¡¹ç›®ï¼Œæ”¹ä¸ºå¸¸ç”¨æ³¨è§£é…ç½®é¡¹ç›® è¿‡ç¨‹ç•¥â€¦. 2ï¼‰ä¿®æ”¹AccountDaoImplå®ç°ç±» 123456@Repository public class AccountDaoImpl implements AccountDao &#123; @Autowired private QueryRunner queryRunner; ....&#125; 3ï¼‰ä¿®æ”¹AccountServiceImplå®ç°ç±» 123456@Service public class AccountServiceImpl implements AccountService &#123; @Autowired private AccountDao accountDao; ....&#125; 4ï¼‰ä¿®æ”¹springæ ¸å¿ƒé…ç½®æ–‡ä»¶ 123456789101112131415161718192021&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w1.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;!--æ³¨è§£çš„ç»„ä»¶æ‰«æ--&gt; &lt;context:component-scan base-package=&quot;com.lagou&quot;&gt;&lt;/context:component-scan&gt; &lt;!--åŠ è½½jdbcé…ç½®æ–‡ä»¶--&gt; &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;&gt;&lt;/context:property-placeholder&gt; &lt;!--æŠŠæ•°æ®åº“è¿æ¥æ± äº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--æŠŠQueryRunneräº¤ç»™IOCå®¹å™¨--&gt; &lt;bean id=&quot;queryRunner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot;&gt; &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt; &lt;/bean&gt;&lt;/beans&gt; 5ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  12345678910public class AccountServiceTest &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); AccountService accountService = applicationContext.getBean(AccountService.class); //æµ‹è¯•æŸ¥è¯¢ @Test public void findByIdTest() &#123; Account account = accountService.findById(3); System.out.println(account); &#125;&#125; 7.3 Springæ–°æ³¨è§£ä½¿ç”¨ä¸Šé¢çš„æ³¨è§£è¿˜ä¸èƒ½å…¨éƒ¨æ›¿ä»£xmlé…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦ä½¿ç”¨æ³¨è§£æ›¿ä»£çš„é…ç½®å¦‚ä¸‹ï¼š éè‡ªå®šä¹‰çš„Beançš„é…ç½®ï¼š&lt;bean&gt; åŠ è½½propertiesæ–‡ä»¶çš„é…ç½®ï¼š&lt;context:property-placeholder&gt; ç»„ä»¶æ‰«æçš„é…ç½®ï¼š&lt;context:component-scan&gt; å¼•å…¥å…¶ä»–æ–‡ä»¶ï¼š&lt;import&gt; æ³¨è§£ è¯´æ˜ @Configuration ç”¨äºæŒ‡å®šå½“å‰ç±»æ˜¯ä¸€ä¸ªSpring é…ç½®ç±»ï¼Œå½“åˆ›å»ºå®¹å™¨æ—¶ä¼šä»è¯¥ç±»ä¸ŠåŠ è½½æ³¨è§£ @Bean ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œæ ‡æ³¨å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼å­˜å‚¨åˆ° Spring å®¹å™¨ä¸­ @PropertySource ç”¨äºåŠ è½½ properties æ–‡ä»¶ä¸­çš„é…ç½® @ComponentScan ç”¨äºæŒ‡å®š Spring åœ¨åˆå§‹åŒ–å®¹å™¨æ—¶è¦æ‰«æçš„åŒ… @Import ç”¨äºå¯¼å…¥å…¶ä»–é…ç½®ç±» 7.4 Springçº¯æ³¨è§£æ•´åˆDbUtilsæ­¥éª¤åˆ†æ ç¼–å†™Springæ ¸å¿ƒé…ç½®ç±» ç¼–å†™æ•°æ®åº“é…ç½®ä¿¡æ¯ç±» ç¼–å†™æµ‹è¯•ä»£ç  1ï¼‰ç¼–å†™Springæ ¸å¿ƒé…ç½®ç±» 123456789@Configuration @ComponentScan(&quot;com.lagou&quot;) @Import(DataSourceConfig.class) public class SpringConfig &#123; @Bean(&quot;queryRunner&quot;) public QueryRunner getQueryRunner(@Autowired DataSource dataSource) &#123; return new QueryRunner(dataSource); &#125;&#125; 2ï¼‰ç¼–å†™æ•°æ®åº“é…ç½®ä¿¡æ¯ç±» 123456789101112131415161718192021222324@PropertySource(&quot;classpath:jdbc.properties&quot;) public class DataSourceConfig &#123; @Value(&quot;$&#123;jdbc.driver&#125;&quot;) private String driver; @Value(&quot;$&#123;jdbc.url&#125;&quot;) private String url; @Value(&quot;$&#123;jdbc.username&#125;&quot;) private String username; @Value(&quot;$&#123;jdbc.password&#125;&quot;) private String password; @Bean(&quot;dataSource&quot;) public DataSource getDataSource() &#123; DruidDataSource dataSource = new DruidDataSource(); dataSource.setDriverClassName(driver); dataSource.setUrl(url); dataSource.setUsername(username); dataSource.setPassword(password); return dataSource; &#125;&#125; 3ï¼‰ç¼–å†™æµ‹è¯•ä»£ç  12345678910public class AccountServiceTest &#123; ApplicationContext applicationContext = new AnnotationConfigApplicationContext(SpringConfig.class); AccountService accountService = applicationContext.getBean(AccountService.class); //æµ‹è¯•æŸ¥è¯¢ @Test public void testFindById() &#123; Account account = accountService.findById(3); System.out.println(account); &#125;&#125; 8. Springæ•´åˆJunit8.1æ™®é€šJunitæµ‹è¯•é—®é¢˜åœ¨æ™®é€šçš„æµ‹è¯•ç±»ä¸­ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨åŠ è½½é…ç½®æ–‡ä»¶å¹¶åˆ›å»ºSpringå®¹å™¨ï¼Œç„¶åé€šè¿‡Springç›¸å…³APIè·å¾—Beanå®ä¾‹ï¼›å¦‚æœä¸è¿™ä¹ˆåšï¼Œé‚£ä¹ˆæ— æ³•ä»å®¹å™¨ä¸­è·å¾—å¯¹è±¡ã€‚ 123ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); AccountService accountService = applicationContext.getBean(AccountService.class); 8.2 Springæ•´åˆJunitæ­¥éª¤åˆ†æ å¯¼å…¥springé›†æˆJunitçš„åæ ‡ ä½¿ç”¨@Runwithæ³¨è§£æ›¿æ¢åŸæ¥çš„è¿è¡Œå™¨ ä½¿ç”¨@ContextConfigurationæŒ‡å®šé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±» ä½¿ç”¨@Autowiredæ³¨å…¥éœ€è¦æµ‹è¯•çš„å¯¹è±¡ åˆ›å»ºæµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯• 1ï¼‰å¯¼å…¥springé›†æˆJunitçš„åæ ‡ 123456789101112&lt;!--æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œspring5 åŠä»¥ä¸Šç‰ˆæœ¬è¦æ±‚ junit çš„ç‰ˆæœ¬å¿…é¡»æ˜¯ 4.12 åŠä»¥ä¸Š--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.1.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; 2ï¼‰ä½¿ç”¨@Runwithæ³¨è§£æ›¿æ¢åŸæ¥çš„è¿è¡Œå™¨ 1234@RunWith(SpringJUnit4ClassRunner.class) public class SpringJunitTest &#123; &#125; 3ï¼‰ä½¿ç”¨@ContextConfigurationæŒ‡å®šé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±» 123456@RunWith(SpringJUnit4ClassRunner.class) //@ContextConfiguration(value = &#123;&quot;classpath:applicationContext.xml&quot;&#125;) åŠ è½½spring æ ¸å¿ƒé…ç½®æ–‡ä»¶ @ContextConfiguration(classes = &#123;SpringConfig.class&#125;) // åŠ è½½springæ ¸å¿ƒé…ç½®ç±» public class SpringJunitTest &#123; &#125; 4ï¼‰ä½¿ç”¨@Autowiredæ³¨å…¥éœ€è¦æµ‹è¯•çš„å¯¹è±¡ 123456@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(classes = &#123;SpringConfig.class&#125;) public class SpringJunitTest &#123; @Autowired private AccountService accountService; &#125; 5ï¼‰åˆ›å»ºæµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯• 123456789101112@RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(classes = &#123;SpringConfig.class&#125;) public class SpringJunitTest &#123; @Autowired private AccountService accountService; //æµ‹è¯•æŸ¥è¯¢ @Test public void testFindById() &#123; Account account = accountService.findById(3); System.out.println(account); &#125;&#125;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"MybatisåŠ è½½ç­–ç•¥&æ³¨è§£å¼€å‘","slug":"MybatisåŠ è½½ç­–ç•¥-æ³¨è§£å¼€å‘","date":"2021-04-04T06:51:54.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2021/04/04/MybatisåŠ è½½ç­–ç•¥-æ³¨è§£å¼€å‘/","link":"","permalink":"http://yournotes.cn/2021/04/04/Mybatis%E5%8A%A0%E8%BD%BD%E7%AD%96%E7%95%A5-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/","excerpt":"","text":"1. MybatisåŠ è½½ç­–ç•¥1.1 ä»€ä¹ˆæ˜¯å»¶è¿ŸåŠ è½½ï¼Ÿé—®é¢˜ é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†Mybatisä¸­ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šå…³ç³»çš„é…ç½®åŠå®ç°ï¼Œå¯ä»¥å®ç°å¯¹è±¡çš„å…³è”æŸ¥è¯¢ã€‚å®é™…å¼€å‘è¿‡ç¨‹ä¸­å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦æ€»æ˜¯åœ¨åŠ è½½ç”¨æˆ·ä¿¡æ¯æ—¶å°±ä¸€å®šè¦åŠ è½½ä»–çš„è®¢å•ä¿¡æ¯ã€‚æ­¤æ—¶å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å»¶è¿ŸåŠ è½½ã€‚ ä¸¾ä¸ªæ —å­ åœ¨ä¸€å¯¹å¤šä¸­ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œå®ƒæœ‰ä¸ª100ä¸ªè®¢å• åœ¨æŸ¥è¯¢ç”¨æˆ·çš„æ—¶å€™ï¼Œè¦ä¸è¦æŠŠå…³è”çš„è®¢å•æŸ¥å‡ºæ¥ï¼Ÿ åœ¨æŸ¥è¯¢è®¢å•çš„æ—¶å€™ï¼Œè¦ä¸è¦æŠŠå…³è”çš„ç”¨æˆ·æŸ¥å‡ºæ¥ï¼Ÿ å›ç­” åœ¨æŸ¥è¯¢ç”¨æˆ·æ—¶ï¼Œç”¨æˆ·ä¸‹çš„è®¢å•åº”è¯¥æ˜¯ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ï¼Œä»€ä¹ˆæ—¶å€™æŸ¥è¯¢ã€‚ åœ¨æŸ¥è¯¢è®¢å•æ—¶ï¼Œè®¢å•æ‰€å±çš„ç”¨æˆ·ä¿¡æ¯åº”è¯¥æ˜¯éšç€è®¢å•ä¸€èµ·æŸ¥è¯¢å‡ºæ¥ã€‚ å»¶è¿ŸåŠ è½½ å°±æ˜¯åœ¨éœ€è¦ç”¨åˆ°æ•°æ®æ—¶æ‰è¿›è¡ŒåŠ è½½ï¼Œä¸éœ€è¦ç”¨åˆ°æ•°æ®æ—¶å°±ä¸åŠ è½½æ•°æ®ã€‚å»¶è¿ŸåŠ è½½ä¹Ÿç§°æ‡’åŠ è½½ã€‚ ä¼˜ç‚¹ å…ˆä»å•è¡¨æŸ¥è¯¢ï¼Œéœ€è¦æ—¶å†ä»å…³è”è¡¨å»å…³è”æŸ¥è¯¢ï¼Œå¤§å¤§æé«˜æ•°æ®åº“æ€§èƒ½ï¼Œå› ä¸ºæŸ¥è¯¢å•è¡¨è¦æ¯”å…³è”æŸ¥è¯¢å¤šå¼ è¡¨ é€Ÿåº¦è¦å¿«ã€‚ ç¼ºç‚¹ å› ä¸ºåªæœ‰å½“éœ€è¦ç”¨åˆ°æ•°æ®æ—¶ï¼Œæ‰ä¼šè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œè¿™æ ·åœ¨å¤§æ‰¹é‡æ•°æ®æŸ¥è¯¢æ—¶ï¼Œå› ä¸ºæŸ¥è¯¢å·¥ä½œä¹Ÿè¦æ¶ˆè€—æ—¶ é—´ï¼Œæ‰€ä»¥å¯èƒ½é€ æˆç”¨æˆ·ç­‰å¾…æ—¶é—´å˜é•¿ï¼Œé€ æˆç”¨æˆ·ä½“éªŒä¸‹é™ã€‚ åœ¨å¤šè¡¨ä¸­ï¼š ä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šï¼šé€šå¸¸æƒ…å†µä¸‹é‡‡ç”¨å»¶è¿ŸåŠ è½½ ä¸€å¯¹ä¸€ï¼ˆå¤šå¯¹ä¸€ï¼‰ï¼šé€šå¸¸æƒ…å†µä¸‹é‡‡ç”¨ç«‹å³åŠ è½½ æ³¨æ„ï¼š å»¶è¿ŸåŠ è½½æ˜¯åŸºäºåµŒå¥—æŸ¥è¯¢æ¥å®ç°çš„ 1.2 å®ç°1.2.1 å±€éƒ¨å»¶è¿ŸåŠ è½½åœ¨associationå’Œcollectionæ ‡ç­¾ä¸­éƒ½æœ‰ä¸€ä¸ªfetchTypeå±æ€§ï¼Œé€šè¿‡ä¿®æ”¹å®ƒçš„å€¼ï¼Œå¯ä»¥ä¿®æ”¹å±€éƒ¨çš„åŠ è½½ç­–ç•¥ã€‚ 1234567891011121314&lt;!-- å¼€å¯ä¸€å¯¹å¤š å»¶è¿ŸåŠ è½½ --&gt;&lt;resultMap id=&quot;userMap&quot; type=&quot;user&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;password&quot; property=&quot;password&quot;&gt;&lt;/result&gt; &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt; &lt;!--fetchType=&quot;lazy&quot; æ‡’åŠ è½½ç­–ç•¥ fetchType=&quot;eager&quot; ç«‹å³åŠ è½½ç­–ç•¥ --&gt; &lt;collection property=&quot;orderList&quot; ofType=&quot;order&quot; column=&quot;id&quot; select=&quot;com.lagou.dao.OrderMapper.findByUid&quot; fetchType=&quot;lazy&quot;&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAll&quot; resultMap=&quot;userMap&quot;&gt; SELECT * FROM `user` &lt;/select&gt; 1.2.2 è®¾ç½®è§¦å‘å»¶è¿ŸåŠ è½½çš„æ–¹æ³•å¤§å®¶åœ¨é…ç½®äº†å»¶è¿ŸåŠ è½½ç­–ç•¥åï¼Œå‘ç°å³ä½¿æ²¡æœ‰è°ƒç”¨å…³è”å¯¹è±¡çš„ä»»ä½•æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ä½ è°ƒç”¨å½“å‰å¯¹è±¡çš„equalsã€cloneã€hashCodeã€toStringæ–¹æ³•æ—¶ä¹Ÿä¼šè§¦å‘å…³è”å¯¹è±¡çš„æŸ¥è¯¢ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨lazyLoadTriggerMethodsé…ç½®é¡¹è¦†ç›–æ‰ä¸Šé¢å››ä¸ªæ–¹æ³•ã€‚ 1234&lt;settings&gt; &lt;!--æ‰€æœ‰æ–¹æ³•éƒ½ä¼šå»¶è¿ŸåŠ è½½--&gt; &lt;setting name=&quot;lazyLoadTriggerMethods&quot; value=&quot;toString()&quot;/&gt; &lt;/settings&gt; 1.2.3 å…¨å±€å»¶è¿ŸåŠ è½½åœ¨Mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨settingæ ‡ç­¾ä¿®æ”¹å…¨å±€çš„åŠ è½½ç­–ç•¥ã€‚ 1234&lt;settings&gt; &lt;!--å¼€å¯å…¨å±€å»¶è¿ŸåŠ è½½åŠŸèƒ½--&gt; &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt; &lt;/settings&gt; æ³¨æ„ å±€éƒ¨çš„åŠ è½½ç­–ç•¥ä¼˜å…ˆçº§é«˜äºå…¨å±€çš„åŠ è½½ç­–ç•¥ã€‚ 12345678910111213&lt;!-- å…³é—­ä¸€å¯¹ä¸€ å»¶è¿ŸåŠ è½½ --&gt;&lt;resultMap id=&quot;orderMap&quot; type=&quot;order&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;ordertime&quot; property=&quot;ordertime&quot;&gt;&lt;/result&gt; &lt;result column=&quot;total&quot; property=&quot;total&quot;&gt;&lt;/result&gt; &lt;!--fetchType=&quot;lazy&quot; æ‡’åŠ è½½ç­–ç•¥fetchType=&quot;eager&quot; ç«‹å³åŠ è½½ç­–ç•¥ --&gt; &lt;association property=&quot;user&quot; column=&quot;uid&quot; javaType=&quot;user&quot; select=&quot;com.lagou.dao.UserMapper.findById&quot; fetchType=&quot;eager&quot;&gt; &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAll&quot; resultMap=&quot;orderMap&quot;&gt; SELECT * from orders &lt;/select&gt; 2. MyBatisç¼“å­˜2.1 ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿå½“ç”¨æˆ·é¢‘ç¹æŸ¥è¯¢æŸäº›å›ºå®šçš„æ•°æ®æ—¶,ç¬¬ä¸€æ¬¡å°†è¿™äº›æ•°æ®ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥,ä¿å­˜åœ¨ç¼“å­˜ä¸­ã€‚å½“ç”¨æˆ·å†æ¬¡æŸ¥è¯¢è¿™äº›æ•°æ®æ—¶,ä¸ç”¨å†é€šè¿‡æ•°æ®åº“æŸ¥è¯¢,è€Œæ˜¯å»ç¼“å­˜é‡Œé¢æŸ¥è¯¢ã€‚å‡å°‘ç½‘ç»œè¿æ¥å’Œæ•°æ®åº“æŸ¥è¯¢å¸¦æ¥çš„æŸè€—,ä»è€Œæé«˜æˆ‘ä»¬çš„æŸ¥è¯¢æ•ˆç‡,å‡å°‘é«˜å¹¶å‘è®¿é—®å¸¦æ¥çš„ç³»ç»Ÿæ€§èƒ½é—®é¢˜ã€‚ ä¸€å¥è¯æ¦‚æ‹¬ï¼š ç»å¸¸æŸ¥è¯¢ä¸€äº›ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–çš„æ•°æ®ï¼Œä½¿ç”¨ç¼“å­˜æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ åƒå¤§å¤šæ•°çš„æŒä¹…åŒ–æ¡†æ¶ä¸€æ ·ï¼ŒMybatisä¹Ÿæä¾›äº†ç¼“å­˜ç­–ç•¥ï¼Œé€šè¿‡ç¼“å­˜ç­–ç•¥æ¥å‡å°‘æ•°æ®åº“çš„æŸ¥è¯¢æ¬¡æ•°ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ Mybatisä¸­ç¼“å­˜åˆ†ä¸ºä¸€çº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜ã€‚ 2.2 ä¸€çº§ç¼“å­˜2.2.1 ä»‹ç»ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯é»˜è®¤å¼€å¯çš„ æ‰€ä»¥åœ¨å‚æ•°å’ŒSQLå®Œå…¨ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒä¸€ä¸ªSqlSessionå¯¹è±¡è°ƒç”¨ä¸€ä¸ªMapperæ–¹æ³•ï¼Œå¾€å¾€åªæ‰§è¡Œä¸€æ¬¡SQLï¼Œå› ä¸ºä½¿ç”¨SelSessionç¬¬ä¸€æ¬¡æŸ¥è¯¢åï¼ŒMyBatisä¼šå°†å…¶æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œä»¥åå†æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰å£°æ˜éœ€è¦åˆ·æ–°ï¼Œå¹¶ä¸”ç¼“å­˜æ²¡æœ‰è¶…æ—¶çš„æƒ…å†µä¸‹ï¼ŒSqlSessionéƒ½ä¼šå–å‡ºå½“å‰ç¼“å­˜çš„æ•°æ®ï¼Œè€Œä¸ä¼šå†æ¬¡å‘é€SQLåˆ°æ•°æ®åº“ã€‚ 2.2.2 éªŒè¯12345678910@Test public void testOneCache() throws Exception &#123; SqlSession sqlSession = MyBatisUtils.openSession(); UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user1 = userMapper.findById(1); System.out.println(&quot;ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç”¨æˆ·ï¼š&quot; + user1); User user2 = userMapper.findById(1); System.out.println(&quot;ç¬¬äºŒæ¬¡æŸ¥è¯¢çš„ç”¨æˆ·ï¼š&quot; + user2); sqlSession.close();&#125; æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè™½ç„¶åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬æŸ¥è¯¢äº†ä¸¤æ¬¡ï¼Œä½†æœ€ååªæ‰§è¡Œäº†ä¸€æ¬¡æ•°æ®åº“æ“ä½œï¼Œè¿™å°±æ˜¯Mybatisæä¾›ç»™æˆ‘ä»¬çš„ä¸€çº§ç¼“å­˜åœ¨èµ·ä½œç”¨äº†ã€‚å› ä¸ºä¸€çº§ç¼“å­˜çš„å­˜åœ¨ï¼Œå¯¼è‡´ç¬¬äºŒæ¬¡æŸ¥è¯¢idä¸º1çš„è®°å½•æ—¶ï¼Œå¹¶æ²¡æœ‰å‘å‡ºsqlè¯­å¥ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œè€Œæ˜¯ä»ä¸€çº§ç¼“å­˜ä¸­æŸ¥è¯¢ã€‚ 2.2.3 åˆ†æä¸€çº§ç¼“å­˜æ˜¯SqlSessionèŒƒå›´çš„ç¼“å­˜ï¼Œæ‰§è¡ŒSqlSessionçš„Cï¼ˆå¢åŠ ï¼‰Uï¼ˆæ›´æ–°ï¼‰Dï¼ˆåˆ é™¤ï¼‰æ“ä½œï¼Œæˆ–è€…è°ƒç”¨clearCache()ã€commit()ã€close()æ–¹æ³•ï¼Œéƒ½ä¼šæ¸…ç©ºç¼“å­˜ã€‚ ç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º41çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º41çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“ æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚ å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚ å¦‚æœsqlSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œæ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™ æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚ ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º41çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º41çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“ å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚ 2.2.4 æ¸…é™¤1234567891011@Test public void testClearOneCache() throws Exception &#123; SqlSession sqlSession = MybatisUtils.openSession(); UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user1 = userMapper.findById(41); System.out.println(&quot;ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç”¨æˆ·ï¼š&quot; + user1); //è°ƒç”¨sqlSessionæ¸…é™¤ç¼“å­˜çš„æ–¹æ³• sqlSession.clearCache(); User user2 = userMapper.findById(41); System.out.println(&quot;ç¬¬äºŒæ¬¡æŸ¥è¯¢çš„ç”¨æˆ·ï¼š&quot; + user2);&#125; 12&lt;!-- æ¯æ¬¡æŸ¥è¯¢æ—¶ï¼Œéƒ½ä¼šæ¸…é™¤ç¼“å­˜ --&gt; &lt; select flushCache=&quot;true&quot;&gt;&lt;/select&gt; 2.3 äºŒçº§ç¼“å­˜2.3.1 ä»‹ç»äºŒçº§ç¼“å­˜æ˜¯namspaceçº§åˆ«ï¼ˆè·¨sqlSessionï¼‰çš„ç¼“å­˜ï¼Œæ˜¯é»˜è®¤ä¸å¼€å¯çš„ äºŒçº§ç¼“å­˜çš„å¼€å¯éœ€è¦è¿›è¡Œé…ç½®ï¼Œå®ç°äºŒçº§ç¼“å­˜çš„æ—¶å€™ï¼ŒMyBatisè¦æ±‚è¿”å›çš„POJOå¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚ä¹Ÿå°±æ˜¯è¦æ±‚å®ç°Serializableæ¥å£ï¼Œé…ç½®æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨æ˜ å°„XMLæ–‡ä»¶é…ç½® &lt;cache/&gt; å°±å¯ä»¥å¼€å¯äºŒçº§ç¼“å­˜äº†ã€‚ 2.3.2 éªŒè¯1ï¼‰æ ¸å¿ƒé…ç½®æ–‡ä»¶ 1234567&lt;settings&gt; &lt;!-- å› ä¸ºcacheEnabledçš„å–å€¼é»˜è®¤å°±ä¸ºtrueï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å¯ä»¥çœç•¥ä¸é…ç½®ã€‚ ä¸ºtrueä»£è¡¨å¼€å¯äºŒçº§ç¼“å­˜ï¼›ä¸ºfalseä»£è¡¨ä¸å¼€å¯äºŒçº§ç¼“å­˜ã€‚ --&gt; &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; &lt;/settings&gt; 2ï¼‰é…ç½®UserMapper.xmlæ˜ å°„ 12345678910111213&lt;mapper namespace=&quot;com.lagou.dao.UserMapper&quot;&gt; &lt;!--å½“å‰æ˜ å°„æ–‡ä»¶å¼€å¯äºŒçº§ç¼“å­˜--&gt; &lt;cache&gt;&lt;/cache&gt; &lt;!-- &lt;select&gt;æ ‡ç­¾ä¸­è®¾ç½®useCache=â€trueâ€ä»£è¡¨å½“å‰è¿™ä¸ªstatementè¦ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚ å¦‚æœä¸ä½¿ç”¨äºŒçº§ç¼“å­˜å¯ä»¥è®¾ç½®ä¸ºfalse æ³¨æ„ï¼š é’ˆå¯¹æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦æœ€æ–°çš„æ•°æ®sqlï¼Œè¦è®¾ç½®æˆuseCache=&quot;false&quot;ï¼Œç¦ç”¨äºŒçº§ç¼“å­˜ã€‚ --&gt; &lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;user&quot; useCache=&quot;true&quot; &gt; SELECT * FROM `user` where id = #&#123;id&#125; &lt;/select&gt; &lt;/mapper&gt; 3ï¼‰ä¿®æ”¹Userå®ä½“ 123456789public class User implements Serializable &#123; private Integer id; private String username; private Date birthday; private String sex; private String address; private List&lt;Role&gt; roleList; private List&lt;Order&gt; orderList;&#125; 3ï¼‰æµ‹è¯•ç»“æœ 12345678910111213@Test public void testTwoCache() throws Exception &#123; SqlSession sqlSession = MyBatisUtils.openSession(); UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user = userMapper.findById(41); System.out.println(&quot;ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç”¨æˆ·ï¼š&quot; + user); sqlSession.close(); SqlSession sqlSession1 = MyBatisUtils.openSession(); UserMapper userMapper1 = sqlSession1.getMapper(UserMapper.class); User user1 = userMapper1.findById(41); System.out.println(&quot;ç¬¬äºŒæ¬¡æŸ¥è¯¢çš„ç”¨æˆ·ï¼š&quot;+user1); sqlSession1.close();&#125; 2.3.3 åˆ†æäºŒçº§ç¼“å­˜æ˜¯mapperæ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperæ˜ å°„çš„sqlè¯­å¥ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚ æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰selectè¯­å¥å°†ä¼šè¢«ç¼“å­˜ã€‚ æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰insertã€updateå’Œdeleteè¯­å¥ä¼šåˆ·æ–°ç¼“å­˜ã€‚ 2.3.4 æ³¨æ„é—®é¢˜ï¼ˆè„è¯»ï¼‰mybatisçš„äºŒçº§ç¼“å­˜å› ä¸ºæ˜¯namespaceçº§åˆ«ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œå¤šè¡¨æŸ¥è¯¢æ—¶ä¼šäº§ç”Ÿè„è¯»é—®é¢˜ 2.4 å°ç»“ mybatisçš„ç¼“å­˜ï¼Œéƒ½ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å­˜å‚¨å’Œè·å–æ•°æ®ã€‚mybatisè‡ªåŠ¨ç»´æŠ¤çš„ã€‚ mybatiså¼€å¯äº†äºŒçº§ç¼“å­˜åï¼Œé‚£ä¹ˆæŸ¥è¯¢é¡ºåºï¼šäºŒçº§ç¼“å­˜â€“ã€‹ä¸€çº§ç¼“å­˜â€“ã€‹æ•°æ®åº“ æ³¨æ„ï¼šmybatisçš„äºŒçº§ç¼“å­˜ä¼šå­˜åœ¨è„è¯»é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ç¼“å­˜æŠ€æœ¯è§£å†³é—®é¢˜ã€‚ 3. MyBatisæ³¨è§£3.1 MyBatiså¸¸ç”¨æ³¨è§£è¿™å‡ å¹´æ¥æ³¨è§£å¼€å‘è¶Šæ¥è¶Šæµè¡Œï¼ŒMybatisä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£å¼€å‘æ–¹å¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‡å°‘ç¼–å†™Mapperæ˜ å°„æ–‡ä»¶äº†ã€‚æˆ‘ä»¬å…ˆå›´ç»•ä¸€äº›åŸºæœ¬çš„CRUDæ¥å­¦ä¹ ï¼Œå†å­¦ä¹ å¤æ‚æ˜ å°„å¤šè¡¨æ“ä½œã€‚ @Insertï¼šå®ç°æ–°å¢ï¼Œä»£æ›¿äº†&lt;insert&gt;&lt;/insert&gt; @Deleteï¼šå®ç°åˆ é™¤ï¼Œä»£æ›¿äº†&lt;delete&gt;&lt;/delete&gt; @Updateï¼šå®ç°æ›´æ–°ï¼Œä»£æ›¿äº†&lt;update&gt;&lt;/update&gt; @Selectï¼šå®ç°æŸ¥è¯¢ï¼Œä»£æ›¿äº†&lt;select&gt;&lt;/select&gt; @Resultï¼šå®ç°ç»“æœé›†å°è£…ï¼Œä»£æ›¿äº†&lt;result&gt;&lt;/result&gt; @Resultsï¼šå¯ä»¥ä¸@Result ä¸€èµ·ä½¿ç”¨ï¼Œå°è£…å¤šä¸ªç»“æœé›†ï¼Œä»£æ›¿äº†&lt;resultMap&gt;&lt;/resultMap&gt; @Oneï¼šå®ç°ä¸€å¯¹ä¸€ç»“æœé›†å°è£…ï¼Œä»£æ›¿äº†&lt;association&gt;&lt;/association&gt; @Manyï¼šå®ç°ä¸€å¯¹å¤šç»“æœé›†å°è£…ï¼Œä»£æ›¿äº†&lt;collection&gt;&lt;/collection&gt; 3.2 MyBatisæ³¨è§£çš„å¢åˆ æ”¹æŸ¥ã€é‡ç‚¹ã€‘3.2.1 åˆ›å»ºUserMapperæ¥å£12345678910public interface UserMapper &#123; @Select(&quot;SELECT * FROM `user`&quot;) public List&lt;User&gt; findAll(); @Insert(&quot;INSERT INTO `user`(username,birthday,sex,address) VALUES(# &#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)&quot;) public void save(User user); @Update(&quot;UPDATE `user` SET username = #&#123;username&#125;,birthday = #&#123;birthday&#125;,sex = #&#123;sex&#125;,address = #&#123;address&#125; WHERE id = #&#123;id&#125;&quot;) public void update(User user); @Delete(&quot;DELETE FROM `user` where id = #&#123;id&#125;&quot;) public void delete(Integer id);&#125; 3.2.2 ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶1234&lt;!--æˆ‘ä»¬ä½¿ç”¨äº†æ³¨è§£æ›¿ä»£çš„æ˜ å°„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åŠ è½½ä½¿ç”¨äº†æ³¨è§£çš„Mapperæ¥å£å³å¯--&gt; &lt;mappers&gt; &lt;!--æ‰«æä½¿ç”¨æ³¨è§£çš„Mapperç±»--&gt; &lt;mapper class=&quot;com.lagou.mapper.UserMapper&quot;&gt;&lt;/mapper&gt; &lt;/mappers&gt; 12345&lt;!--æˆ–è€…æŒ‡å®šæ‰«æåŒ…å«æ˜ å°„å…³ç³»çš„æ¥å£æ‰€åœ¨çš„åŒ…ä¹Ÿå¯ä»¥--&gt; &lt;mappers&gt; &lt;!--æ‰«æä½¿ç”¨æ³¨è§£çš„Mapperç±»æ‰€åœ¨çš„åŒ…--&gt; &lt;package name=&quot;com.lagou.mapper&quot;&gt;&lt;/package&gt; &lt;/mappers&gt; 3.2.3 æµ‹è¯•ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940public class TestUser extends TestBaseMapper &#123; // æŸ¥è¯¢ @Test public void testFindAll() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAll(); for (User user : list) &#123; System.out.println(user); &#125; &#125; // æ·»åŠ  @Test public void testSave() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user = new User(); user.setUsername(&quot;äºè°¦&quot;); user.setBirthday(new Date()); user.setSex(&quot;ç”·&quot;); user.setAddress(&quot;åŒ—äº¬å¾·äº‘ç¤¾&quot;); userMapper.save(user); &#125; // æ›´æ–° @Test public void testUpdate() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user = new User(); user.setId(49); user.setUsername(&quot;éƒ­å¾·çº²&quot;); user.setBirthday(new Date()); user.setSex(&quot;ç”·&quot;); user.setAddress(&quot;åŒ—äº¬å¾·äº‘ç¤¾&quot;); userMapper.update(user); &#125; // åˆ é™¤ @Test public void testDelete() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); userMapper.delete(49); &#125;&#125; 3.3 ä½¿ç”¨æ³¨è§£å®ç°å¤æ‚æ˜ å°„å¼€å‘ä¹‹å‰æˆ‘ä»¬åœ¨æ˜ å°„æ–‡ä»¶ä¸­é€šè¿‡é…ç½® &lt;resultMap&gt;ã€&lt;association&gt;ã€&lt;collection&gt; æ¥å®ç°å¤æ‚å…³ç³»æ˜ å°„ã€‚ ä½¿ç”¨æ³¨è§£å¼€å‘åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @Resultsã€@Resultï¼Œ@Oneã€@Many æ³¨è§£ç»„åˆå®Œæˆå¤æ‚å…³ç³»çš„é…ç½®ã€‚ 3.4 ä¸€å¯¹ä¸€æŸ¥è¯¢3.4.1 ä»‹ç»éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªè®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥è®¢å•æ‰€å±çš„ç”¨æˆ· ä¸€å¯¹ä¸€æŸ¥è¯¢è¯­å¥ 12SELECT * FROM orders; SELECT * FROM `user` WHERE id = #&#123;è®¢å•çš„uid&#125;; 3.4.2 ä»£ç å®ç°1ï¼‰OrderMapperæ¥å£ 1234567891011public interface OrderMapper &#123; @Select(&quot;SELECT * FROM orders&quot;) @Results(&#123; @Result(id = true, column = &quot;id&quot;, property = &quot;id&quot;), @Result(column = &quot;ordertime&quot;, property = &quot;ordertime&quot;), @Result(column = &quot;money&quot;, property = &quot;money&quot;), @Result(property = &quot;user&quot;, javaType = User.class, column = &quot;uid&quot;, one = @One(select = &quot;com.lagou.mapper.UserMapper.findById&quot;, fetchType = FetchType.EAGER)) &#125;) public List&lt;Order&gt; findAllWithUser();&#125; 2ï¼‰UserMapperæ¥å£ 1234public interface UserMapper &#123; @Select(&quot;SELECT * FROM `user` WHERE id = #&#123;id&#125;&quot;) public User findById(Integer id); &#125; 3ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testOrderWithUser() throws Exception &#123; OrderMapper orderMapper = sqlSession.getMapper(OrderMapper.class); List&lt;Order&gt; list = orderMapper.findAllWithUser(); for (Order order : list) &#123; System.out.println(order); &#125;&#125; 3.5 ä¸€å¯¹å¤šæŸ¥è¯¢3.5.1 ä»‹ç»éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·å…·æœ‰çš„è®¢å• ä¸€å¯¹å¤šæŸ¥è¯¢è¯­å¥ 12SELECT * FROM `user`; SELECT * FROM orders where uid = #&#123;ç”¨æˆ·id&#125;; 3.5.2 ä»£ç å®ç°1ï¼‰UserMapperæ¥å£ 123456789101112public interface UserMapper &#123; @Select(&quot;SELECT * FROM `user`&quot;) @Results(&#123; @Result(id = true, column = &quot;id&quot;, property = &quot;id&quot;), @Result(column = &quot;brithday&quot;, property = &quot;brithday&quot;), @Result(column = &quot;sex&quot;, property = &quot;sex&quot;), @Result(column = &quot;address&quot;, property = &quot;address&quot;), @Result(property = &quot;orderList&quot;, javaType = List.class, column = &quot;id&quot; , many = @Many(select = &quot;com.lagou.mapper.OrderMapper.findByUid&quot;)) &#125;) public List&lt;User&gt; findAllWithOrder(); &#125; 2ï¼‰OrderMapperæ¥å£ 1234public interface OrderMapper &#123; @Select(&quot;SELECT * FROM orders WHERE uid = #&#123;uid&#125;&quot;) public List&lt;Order&gt; findByUid(Integer uid); &#125; 3ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testUserWithOrder() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllWithOrder(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 3.6 å¤šå¯¹å¤šæŸ¥è¯¢3.6.1 ä»‹ç»éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ŒåŒæ—¶æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·çš„æ‰€æœ‰è§’è‰² å¤šå¯¹å¤šæŸ¥è¯¢è¯­å¥ 12SELECT * FROM `user`; SELECT * FROM role r INNER JOIN user_role ur ON r.`id` = ur.`rid` WHERE ur.`uid` = #&#123;ç”¨æˆ·id&#125;; 3.6.2 ä»£ç å®ç°1ï¼‰UserMapperæ¥å£ 12345678910111213public interface UserMapper &#123; @Select(&quot;SELECT * FROM `user`&quot;) @Results(&#123; @Result(id = true, column = &quot;id&quot;, property = &quot;id&quot;), @Result(column = &quot;brithday&quot;, property = &quot;brithday&quot;), @Result(column = &quot;sex&quot;, property = &quot;sex&quot;), @Result(column = &quot;address&quot;, property = &quot;address&quot;), @Result(property = &quot;roleList&quot;, javaType = List.class, column = &quot;id&quot; , many = @Many(select = &quot;com.lagou.mapper.RoleMapper.findByUid&quot;)) &#125;) public List&lt;User&gt; findAllWithRole(); &#125; 2ï¼‰RoleMapperæ¥å£ 1234public interface RoleMapper &#123; @Select(&quot;SELECT * FROM role r INNER JOIN user_role ur ON r.`id` = ur.`rid` WHERE ur.`uid` = #&#123;uid&#125;&quot;) public List&lt;Role&gt; findByUid(Integer uid); &#125; 3ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testUserWithRole() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllWithRole(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 3.7 åŸºäºæ³¨è§£çš„äºŒçº§ç¼“å­˜3.7.1 é…ç½®SqlMapConfig.xmlæ–‡ä»¶å¼€å¯äºŒçº§ç¼“å­˜çš„æ”¯æŒ1234567&lt;settings&gt; &lt;!-- å› ä¸ºcacheEnabledçš„å–å€¼é»˜è®¤å°±ä¸ºtrueï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å¯ä»¥çœç•¥ä¸é…ç½®ã€‚ ä¸ºtrueä»£è¡¨å¼€å¯äºŒçº§ç¼“å­˜ï¼›ä¸ºfalseä»£è¡¨ä¸å¼€å¯äºŒçº§ç¼“å­˜ã€‚ --&gt; &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; &lt;/settings&gt; 3.7.2 åœ¨Mapperæ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®äºŒçº§ç¼“å­˜12@CacheNamespace public interface UserMapper &#123;...&#125; 3.8 æ³¨è§£å»¶è¿ŸåŠ è½½ä¸ç®¡æ˜¯ä¸€å¯¹ä¸€è¿˜æ˜¯ä¸€å¯¹å¤š ï¼Œåœ¨æ³¨è§£é…ç½®ä¸­éƒ½æœ‰fetchTypeçš„å±æ€§ fetchType &#x3D; FetchType.LAZY è¡¨ç¤ºæ‡’åŠ è½½ fetchType &#x3D; FetchType.EAGER è¡¨ç¤ºç«‹å³åŠ è½½ fetchType &#x3D; FetchType.DEFAULT è¡¨ç¤ºä½¿ç”¨å…¨å±€é…ç½® 3.9 å°ç»“ æ³¨è§£å¼€å‘å’Œxmlé…ç½®ä¼˜åŠ£åˆ†æ æ³¨è§£å¼€å‘å’Œxmlé…ç½®ç›¸æ¯”ï¼Œä»å¼€å‘æ•ˆç‡æ¥è¯´ï¼Œæ³¨è§£ç¼–å†™æ›´ç®€å•ï¼Œæ•ˆç‡æ›´é«˜ã€‚ ä»å¯ç»´æŠ¤æ€§æ¥è¯´ï¼Œæ³¨è§£å¦‚æœè¦ä¿®æ”¹ï¼Œå¿…é¡»ä¿®æ”¹æºç ï¼Œä¼šå¯¼è‡´ç»´æŠ¤æˆæœ¬å¢åŠ ã€‚xmlç»´æŠ¤æ€§æ›´å¼ºã€‚","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"å³é”®æ‰“å¼€cmd","slug":"å³é”®æ‰“å¼€cmd","date":"2021-03-27T05:47:59.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2021/03/27/å³é”®æ‰“å¼€cmd/","link":"","permalink":"http://yournotes.cn/2021/03/27/%E5%8F%B3%E9%94%AE%E6%89%93%E5%BC%80cmd/","excerpt":"å‰è¨€ å‰é¢å†æ³¨å†Œè¡¨ä¿®æ”¹äº†cmdé»˜è®¤åœ°å€ï¼Œåæ¥å‘ç°è¿™æ ·å¹¶ä¸å¥½ï¼Œå½±å“äº†å…¶ä»–åœ°æ–¹çš„ä½¿ç”¨ã€‚è¿˜ä¸å¦‚é…ç½®å¯ä»¥è®©windowså³é”®åœ¨å½“å‰ä½ç½®æ‰“å¼€ç»ˆç«¯.","text":"å‰è¨€ å‰é¢å†æ³¨å†Œè¡¨ä¿®æ”¹äº†cmdé»˜è®¤åœ°å€ï¼Œåæ¥å‘ç°è¿™æ ·å¹¶ä¸å¥½ï¼Œå½±å“äº†å…¶ä»–åœ°æ–¹çš„ä½¿ç”¨ã€‚è¿˜ä¸å¦‚é…ç½®å¯ä»¥è®©windowså³é”®åœ¨å½“å‰ä½ç½®æ‰“å¼€ç»ˆç«¯. ç¼–è¾‘é…ç½®æŒ‰shiftå³é”®åªæœ‰Powershellï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±é…ç½®cmdçš„ æ–°å»ºæ–‡ä»¶cmd.txté”®å…¥ä¸‹åˆ—å†…å®¹ï¼Œ@&#x3D;ä¸ºå³é”®æ˜¾ç¤ºæ–‡å­— 1234567891011121314151617181920212223242526272829Windows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\Directory\\shell\\OpenCmdHere]@=&quot;åœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£&quot;&quot;Icon&quot;=&quot;cmd.exe&quot;[HKEY_CLASSES_ROOT\\Directory\\shell\\OpenCmdHere\\command]@=&quot;cmd.exe /s /k pushd \\&quot;%V\\&quot;&quot;[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\OpenCmdHere]@=&quot;åœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£&quot;&quot;Icon&quot;=&quot;cmd.exe&quot;[HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\OpenCmdHere\\command]@=&quot;cmd.exe /s /k pushd \\&quot;%V\\&quot;&quot;[HKEY_CLASSES_ROOT\\Drive\\shell\\OpenCmdHere]@=&quot;åœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£&quot;&quot;Icon&quot;=&quot;cmd.exe&quot;[HKEY_CLASSES_ROOT\\Drive\\shell\\OpenCmdHere\\command]@=&quot;cmd.exe /s /k pushd \\&quot;%V\\&quot;&quot;[HKEY_CLASSES_ROOT\\LibraryFolder\\background\\shell\\OpenCmdHere]@=&quot;åœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£&quot;&quot;Icon&quot;=&quot;cmd.exe&quot;[HKEY_CLASSES_ROOT\\LibraryFolder\\background\\shell\\OpenCmdHere\\command]@=&quot;cmd.exe /s /k pushd \\&quot;%V\\&quot;&quot; ä¹‹åä¿®æ”¹åç¼€ä¸º.reg åŒå‡»ç¡®å®š ï¼Œæ³¨æ„æ–‡æœ¬ç¼–ç æ˜¯ANSI ï¼Œå¦åˆ™æç¤ºè¯­ä¹±ç ã€‚ æ›´æ­£ä¹±ç å½“ç„¶æç¤ºä¹±ä¸ä¹±ç éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå·²ç»æ³¨å†Œå®Œäº†æ˜¯ä¹±ç éœ€è¦æ”¹çš„è¯ä¹Ÿå¯ä»¥ã€‚win+ræ‰“å¼€æ³¨å†Œè¡¨ æ‰“å¼€è¿™ä¸ªåœ°å€ï¼šHKEY_CLASSES_ROOT\\Directory\\Background\\shell\\OpenCmdHere å³é”®ä¿®æ”¹å³å¯","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"æŠ˜è…¾","slug":"æ—¥å¸¸/æŠ˜è…¾","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E6%8A%98%E8%85%BE/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"Mybatisé…ç½®æ·±å…¥","slug":"Mybatisé…ç½®æ·±å…¥","date":"2021-03-27T03:09:54.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2021/03/27/Mybatisé…ç½®æ·±å…¥/","link":"","permalink":"http://yournotes.cn/2021/03/27/Mybatis%E9%85%8D%E7%BD%AE%E6%B7%B1%E5%85%A5/","excerpt":"","text":"1. Mybatisé«˜çº§æŸ¥è¯¢1.1 ResutlMapå±æ€§å»ºç«‹å¯¹è±¡å…³ç³»æ˜ å°„ resultType å¦‚æœå®ä½“çš„å±æ€§åä¸è¡¨ä¸­å­—æ®µåä¸€è‡´ï¼Œå°†æŸ¥è¯¢ç»“æœè‡ªåŠ¨å°è£…åˆ°å® ResutlMap å¦‚æœå®ä½“çš„å±æ€§åä¸è¡¨ä¸­å­—æ®µåä¸ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨ResutlMapå®ç°æ‰‹åŠ¨å°è£…åˆ°å®ä½“ç±»ä¸­ 1ï¼‰ç¼–å†™UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAllResultMap();&#125; 2ï¼‰ç¼–å†™UserMapper.xml 123456789101112131415161718192021&lt;!-- å®ç°æ‰‹åŠ¨æ˜ å°„å°è£… resultMap id=&quot;userResultMap&quot; æ­¤æ ‡ç­¾å”¯ä¸€æ ‡è¯† type=&quot;user&quot; å°è£…åçš„å®ä½“ç±»å‹ &lt;id column=&quot;uid&quot; property=&quot;id&quot;&gt;&lt;/id&gt; è¡¨ä¸­ä¸»é”®å­—æ®µå°è£… column=&quot;uid&quot; è¡¨ä¸­çš„å­—æ®µå property=&quot;id&quot; userå®ä½“çš„å±æ€§å &lt;result column=&quot;NAME&quot; property=&quot;username&quot;&gt;&lt;/result&gt; è¡¨ä¸­æ™®é€šå­—æ®µå°è£… column=&quot;NAME&quot; è¡¨ä¸­çš„å­—æ®µå property=&quot;username&quot; userå®ä½“çš„å±æ€§å è¡¥å……ï¼šå¦‚æœæœ‰æŸ¥è¯¢ç»“æœæœ‰ å­—æ®µä¸å±æ€§æ˜¯å¯¹åº”çš„ï¼Œå¯ä»¥çœç•¥æ‰‹åŠ¨å°è£… ã€äº†è§£ã€‘ --&gt;&lt;resultMap id=&quot;userResultMap&quot; type=&quot;user&quot;&gt; &lt;id column=&quot;uid&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;NAME&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;PASSWORD&quot; property=&quot;username&quot;&gt;&lt;/result&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAllResultMap&quot; resultMap=&quot;userResultMap&quot;&gt; SELECT id AS uid,username AS NAME,password AS PASSWORD FROM USER &lt;/select&gt; 3ï¼‰ä»£ç æµ‹è¯• 12345678@Test public void testFindAllResultMap() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllResultMap(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 1.2 å¤šæ¡ä»¶æŸ¥è¯¢ï¼ˆä¸‰ç§ï¼‰éœ€æ±‚æ ¹æ®idå’ŒusernameæŸ¥è¯¢userè¡¨ 1ï¼‰æ–¹å¼ä¸€ ä½¿ç”¨#&#123;arg0&#125;-#&#123;argn&#125;æˆ–è€… #&#123;param1&#125;-#&#123;paramn&#125;è·å–å‚æ•° UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findByIdAndUsername1(Integer id, String username);&#125; UserMapper.xml 123456&lt;mapper namespace=&quot;com.lagou.mapper.UserMapper&quot;&gt; &lt;select id=&quot;findByIdAndUsername1&quot; resultType=&quot;user&quot;&gt; &lt;!-- select * from user where id = #&#123;arg0&#125; and username = #&#123;arg1&#125; --&gt; select * from user where id = #&#123;param1&#125; and username = #&#123;param2&#125; &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯• 123456@Test public void testFindByIdAndUsername() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findByIdAndUsername1(1 , &quot;æœ¨ç“œ&quot;); System.out.println(list);&#125; 2ï¼‰æ–¹å¼äºŒ ä½¿ç”¨æ³¨è§£ï¼Œå¼•å…¥ @Param() æ³¨è§£è·å–å‚æ•° UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findByIdAndUsername2(@Param(&quot;id&quot;) Integer id,@Param(&quot;username&quot;) String username);&#125; UserMapper.xml 12345&lt;mapper namespace=&quot;com.lagou.mapper.UserMapper&quot;&gt; &lt;select id=&quot;findByIdAndUsername2&quot; resultType=&quot;user&quot;&gt; select * from user where id = #&#123;id&#125; and username = #&#123;username&#125; &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯• 123456@Test public void testFindByIdAndUsername() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findByIdAndUsername2(1, &quot;å­æ…•&quot;); System.out.println(list);&#125; 3ï¼‰æ–¹å¼ä¸‰ï¼ˆæ¨èï¼‰ ä½¿ç”¨pojoå¯¹è±¡ä¼ é€’å‚æ•° UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findByIdAndUsername3(User user);&#125; UserMapper.xml 12345&lt;mapper namespace=&quot;com.lagou.mapper.UserMapper&quot;&gt; &lt;select id=&quot;findByIdAndUsername3&quot; parameterType=&quot;com.lagou.domain.User&quot; resultType=&quot;com.lagou.domain.User&quot;&gt; select * from user where id = #&#123;id&#125; and username = #&#123;username&#125; &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯• 123456789@Test public void testFindByIdAndUsername() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User param = new User(); param.setId(1); param.setUsername(&quot;æœ¨ç“œç…²é¸¡è„š&quot;); List&lt;User&gt; list = userMapper.findByIdAndUsername3(param); System.out.println(list);&#125; 1.3 æ¨¡ç³ŠæŸ¥è¯¢éœ€æ±‚ æ ¹æ®usernameæ¨¡ç³ŠæŸ¥è¯¢userè¡¨ 1ï¼‰æ–¹å¼ä¸€ UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findByUsername1(String username);&#125; UserMapper.xml 12345&lt;mapper namespace=&quot;com.lagou.mapper.UserMapper&quot;&gt; &lt;select id=&quot;findByUsername1&quot; parameterType=&quot;string&quot; resultType=&quot;user&quot;&gt; select * from user where username like #&#123;username&#125; &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯• 12345678@Test public void testFindByUsername() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findByUsername1(&quot;%ç‹%&quot;); for (User user : list) &#123; System.out.println(user); &#125;&#125; 2ï¼‰æ–¹å¼äºŒ UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findByUsername2(String username);&#125; UserMapper.xml 123456&lt;mapper namespace=&quot;com.lagou.mapper.UserMapper&quot;&gt; &lt;!--ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºä¼šå‡ºç°sqlæ³¨å…¥é—®é¢˜--&gt; &lt;select id=&quot;findByUsername2&quot; parameterType=&quot;string&quot; resultType=&quot;user&quot;&gt; select * from user where username like &#x27;$&#123;value&#125;&#x27; &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯• 12345678@Test public void testFindByUsername() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findByUsername2(&quot;%ç‹%&quot;); for (User user : list) &#123; System.out.println(user); &#125;&#125; 3ï¼‰ ${} ä¸ #{} åŒºåˆ«ã€ç¬”è¯•é¢˜ã€‘ #&#123;&#125;ï¼šè¡¨ç¤ºä¸€ä¸ªå ä½ç¬¦å· é€šè¿‡ #{} å¯ä»¥å®ç°preparedStatementå‘å ä½ç¬¦ä¸­è®¾ç½®å€¼ï¼Œè‡ªåŠ¨è¿›è¡Œjavaç±»å‹å’Œjdbcç±»å‹è½¬æ¢ï¼Œ#{}å¯ä»¥æœ‰æ•ˆé˜²æ­¢sqlæ³¨å…¥ã€‚ #{} å¯ä»¥æ¥æ”¶ç®€å•ç±»å‹å€¼æˆ–pojoå±æ€§å€¼ã€‚ å¦‚æœparameterTypeä¼ è¾“å•ä¸ªç®€å•ç±»å‹å€¼ï¼Œ #{} æ‹¬å·ä¸­åç§°éšä¾¿å†™ã€‚ $&#123;&#125;ï¼šè¡¨ç¤ºä¸€ä¸ªå ä½ç¬¦å· é€šè¿‡ ${} å¯ä»¥å°†parameterType ä¼ å…¥çš„å†…å®¹æ‹¼æ¥åœ¨sqlä¸­ä¸”ä¸è¿›è¡Œjdbcç±»å‹è½¬æ¢ï¼Œä¼šå‡ºç°sqlæ³¨å…¥é—®é¢˜ã€‚ ${} å¯ä»¥æ¥æ”¶ç®€å•ç±»å‹å€¼æˆ–pojoå±æ€§å€¼ã€‚ å¦‚æœparameterTypeä¼ è¾“å•ä¸ªç®€å•ç±»å‹å€¼ï¼Œ ${} æ‹¬å·ä¸­åªèƒ½æ˜¯value è¡¥å……ï¼šTextSqlNode.java æºç å¯ä»¥è¯æ˜ 2. Mybatisæ˜ å°„æ–‡ä»¶æ·±å…¥2.1 è¿”å›ä¸»é”®åº”ç”¨åœºæ™¯ æˆ‘ä»¬å¾ˆå¤šæ—¶å€™æœ‰è¿™ç§éœ€æ±‚ï¼Œå‘æ•°æ®åº“æ’å…¥ä¸€æ¡è®°å½•åï¼Œå¸Œæœ›èƒ½ç«‹å³æ‹¿åˆ°è¿™æ¡è®°å½•åœ¨æ•°æ®åº“ä¸­çš„ä¸»é”®å€¼ã€‚ 2.1.1 useGeneratedKeysmapperæ¥å£ 1234public interface UserMapper &#123; // è¿”å›ä¸»é”® public void save(User user);&#125; mapper.xml 1234567&lt;!-- useGeneratedKeys=&quot;true&quot; å£°æ˜è¿”å›ä¸»é”® keyProperty=&quot;id&quot; æŠŠè¿”å›ä¸»é”®çš„å€¼ï¼Œå°è£…åˆ°å®ä½“çš„idå±æ€§ä¸­ æ³¨æ„ï¼šåªé€‚ç”¨äºä¸»é”®è‡ªå¢çš„æ•°æ®åº“ï¼Œmysqlå’Œsqlserveræ”¯æŒï¼Œoracleä¸æ”¯æŒ --&gt;&lt;insert id=&quot;save&quot; parameterType=&quot;user&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt; INSERT INTO `user`(username,birthday,sex,address) values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;) &lt;/insert&gt; æ³¨æ„ï¼šåªé€‚ç”¨äºä¸»é”®è‡ªå¢çš„æ•°æ®åº“ï¼Œmysqlå’Œsqlserveræ”¯æŒï¼Œoracleä¸è¡Œã€‚ 2.1.2 selectKeymapperæ¥å£ 1234public interface UserMapper &#123; // è¿”å›ä¸»é”® public void save(User user);&#125; mapper.xml 12345678910111213&lt;!-- selectKey é€‚ç”¨èŒƒå›´å¹¿ï¼Œæ”¯æŒæ‰€æœ‰ç±»å‹æ•°æ®åº“ keyColumn=&quot;id&quot; æŒ‡å®šä¸»é”®åˆ—å keyProperty=&quot;id&quot; æŒ‡å®šä¸»é”®å°è£…åˆ°å®ä½“çš„idå±æ€§ä¸­ resultType=&quot;int&quot; æŒ‡å®šä¸»é”®ç±»å‹ order=&quot;AFTER&quot; è®¾ç½®åœ¨sqlè¯­å¥æ‰§è¡Œå‰ï¼ˆåï¼‰ï¼Œæ‰§è¡Œæ­¤è¯­å¥ --&gt;&lt;insert id=&quot;save&quot; parameterType=&quot;user&quot;&gt; &lt;selectKey keyColumn=&quot;id&quot; keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;AFTER&quot;&gt; SELECT LAST_INSERT_ID(); &lt;/selectKey&gt; INSERT INTO `user`(username,birthday,sex,address) values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;) &lt;/insert&gt; 2.1.3 æµ‹è¯•ä»£ç 1234567891011@Testpublic void testSave() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user = new User(); user.setUsername(&quot;å­æ…•&quot;); user.setAddress(&quot;åŒ—äº¬&quot;); user.setBirthday(new Date()); user.setSex(&quot;ç”·&quot;); userMapper.save(user); System.out.println(&quot;è¿”å›ä¸»é”®:&quot; + user.getId());&#125; 2.2 åŠ¨æ€SQLåº”ç”¨åœºæ™¯ å½“æˆ‘ä»¬è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œæ¥æ‰§è¡Œä¸åŒçš„sqlè¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°åŠ¨æ€sqlã€‚ 2.2.1 åŠ¨æ€ SQL ä¹‹&lt;if&gt;éœ€æ±‚æ ¹æ®idå’ŒusernameæŸ¥è¯¢ï¼Œä½†æ˜¯ä¸ç¡®å®šä¸¤ä¸ªéƒ½æœ‰å€¼ã€‚ 1ï¼‰UserMapperæ¥å£ 1public List&lt;User&gt; findByIdAndUsernameIf(User user); 2ï¼‰UserMapper.xml 123456789101112&lt;!-- whereæ ‡ç­¾ç›¸å½“äº where 1=1ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œå°±ä¸ä¼šæ‹¼æ¥whereå…³é”®å­— --&gt;&lt;select id=&quot;findByIdAndUsernameIf&quot; parameterType=&quot;user&quot; resultType=&quot;user&quot;&gt; SELECT * FROM `user` &lt;where&gt; &lt;if test=&quot;id != null&quot;&gt; AND id = #&#123;id&#125; &lt;/if&gt; &lt;if test=&quot;username != null&quot;&gt; AND username = #&#123;username&#125; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; 3ï¼‰æµ‹è¯•ä»£ç  12345678910// ifæ ‡ç­¾ whereæ ‡ç­¾ @Test public void testFindByIdAndUsernameIf() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User param = new User(); // param.setId(42); // param.setUsername(&quot;ç‹å°äºŒ&quot;); List&lt;User&gt; list = userMapper.findByIdAndUsernameIf(param); System.out.println(list);&#125; 2.2.2 åŠ¨æ€ SQL ä¹‹&lt;set&gt;éœ€æ±‚åŠ¨æ€æ›´æ–°userè¡¨æ•°æ®ï¼Œå¦‚æœè¯¥å±æ€§æœ‰å€¼å°±æ›´æ–°ï¼Œæ²¡æœ‰å€¼ä¸åšå¤„ç†ã€‚ 1ï¼‰UserMapperæ¥å£ 1public void updateIf(User user); 2ï¼‰UserMapper.xml 123456789&lt;!-- setæ ‡ç­¾åœ¨æ›´æ–°çš„æ—¶å€™ï¼Œè‡ªåŠ¨åŠ ä¸Šsetå…³é”®å­—ï¼Œç„¶åå»æ‰æœ€åä¸€ä¸ªæ¡ä»¶çš„é€—å· --&gt;&lt;update id=&quot;updateIf&quot; parameterType=&quot;user&quot;&gt; UPDATE `user` &lt;set&gt; &lt;if test=&quot;username != null&quot;&gt; username = #&#123;username&#125;, &lt;/if&gt; &lt;if test=&quot;birthday != null&quot;&gt; birthday = #&#123;birthday&#125;, &lt;/if&gt; &lt;if test=&quot;sex !=null&quot;&gt; sex = #&#123;sex&#125;, &lt;/if&gt; &lt;if test=&quot;address !=null&quot;&gt; address = #&#123;address&#125;, &lt;/if&gt; &lt;/set&gt; WHERE id = #&#123;id&#125; &lt;/update&gt; 3ï¼‰æµ‹è¯•ä»£ç  123456789// setæ ‡ç­¾ @Test public void testUpdateIf()throws Exception&#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); User user = new User(); user.setId(1); user.setUsername(&quot;å°äºŒç‹&quot;); user.setSex(&quot;å¥³&quot;); userMapper.updateIf(user);&#125; 2.2.3 åŠ¨æ€ SQL ä¹‹&lt;foreach&gt;foreachä¸»è¦æ˜¯ç”¨æ¥åšæ•°æ®çš„å¾ªç¯éå† ä¾‹å¦‚ï¼š select * from user where id in (1,2,3) åœ¨è¿™æ ·çš„è¯­å¥ä¸­ï¼Œä¼ å…¥çš„å‚æ•°éƒ¨åˆ†å¿…é¡»ä¾é foreachéå†æ‰èƒ½å®ç°ã€‚ &lt;foreach&gt;æ ‡ç­¾ç”¨äºéå†é›†åˆï¼Œå®ƒçš„å±æ€§ï¼š collectionï¼šä»£è¡¨è¦éå†çš„é›†åˆå…ƒç´  openï¼šä»£è¡¨è¯­å¥çš„å¼€å§‹éƒ¨åˆ† closeï¼šä»£è¡¨ç»“æŸéƒ¨åˆ† itemï¼šä»£è¡¨éå†é›†åˆçš„æ¯ä¸ªå…ƒç´ ï¼Œç”Ÿæˆçš„å˜é‡å speratorï¼šä»£è¡¨åˆ†éš”ç¬¦ é›†åˆ 1ï¼‰UserMapperæ¥å£ 1public List&lt;User&gt; findByList(List&lt;Integer&gt; ids); 2ï¼‰UserMapper.xml 123456789&lt;!-- å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸ºæ™®é€šç±»å‹ Listé›†åˆï¼Œcollectionå±æ€§å€¼ä¸ºï¼šcollection æˆ–è€… list --&gt;&lt;select id=&quot;findByList&quot; parameterType=&quot;list&quot; resultType=&quot;user&quot; &gt; SELECT * FROM `user` &lt;where&gt; &lt;foreach collection=&quot;collection&quot; open=&quot;id in(&quot; close=&quot;)&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt; #&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/select&gt; 3ï¼‰æµ‹è¯•ä»£ç  1234567891011// foreachæ ‡ç­¾ list @Test public void testFindByList() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;Integer&gt; ids = new ArrayList&lt;&gt;(); ids.add(46); ids.add(48); ids.add(51); List&lt;User&gt; list = userMapper.findByList(ids); System.out.println(list);&#125; æ•°ç»„ 1ï¼‰UserMapperæ¥å£ 1public List&lt;User&gt; findByArray(Integer[] ids); 2ï¼‰UserMapper.xml 123456789&lt;!-- å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸ºæ™®é€šç±»å‹ Arrayæ•°ç»„ï¼Œcollectionå±æ€§å€¼ä¸ºï¼šarray --&gt;&lt;select id=&quot;findByArray&quot; parameterType=&quot;int&quot; resultType=&quot;user&quot;&gt; SELECT * FROM `user` &lt;where&gt; &lt;foreach collection=&quot;array&quot; open=&quot;id in(&quot; close=&quot;)&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt; #&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/select&gt; 3ï¼‰æµ‹è¯•ä»£ç  12345678// foreachæ ‡ç­¾ array @Test public void testFindByArray() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); Integer[] ids = &#123;46, 48, 51&#125;; List&lt;User&gt; list = userMapper.findByArray(ids); System.out.println(list);&#125; 2.3 SQLç‰‡æ®µåº”ç”¨åœºæ™¯ æ˜ å°„æ–‡ä»¶ä¸­å¯å°†é‡å¤çš„ sql æå–å‡ºæ¥ï¼Œä½¿ç”¨æ—¶ç”¨ include å¼•ç”¨å³å¯ï¼Œæœ€ç»ˆè¾¾åˆ° sql é‡ç”¨çš„ç›®çš„ 1234567891011121314151617181920&lt;!--æŠ½å–çš„sqlç‰‡æ®µ--&gt;&lt;sql id=&quot;selectUser&quot;&gt; SELECT * FROM `user` &lt;/sql&gt;&lt;select id=&quot;findByList&quot; parameterType=&quot;list&quot; resultType=&quot;user&quot; &gt; &lt;!--å¼•å…¥sqlç‰‡æ®µ--&gt; &lt;include refid=&quot;selectUser&quot;&gt;&lt;/include&gt; &lt;where&gt; &lt;foreach collection=&quot;collection&quot; open=&quot;id in(&quot; close=&quot;)&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt;#&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/select&gt;&lt;select id=&quot;findByArray&quot; parameterType=&quot;integer[]&quot; resultType=&quot;user&quot;&gt; &lt;!--å¼•å…¥sqlç‰‡æ®µ--&gt; &lt;include refid=&quot;selectUser&quot;&gt;&lt;/include&gt; &lt;where&gt; &lt;foreach collection=&quot;array&quot; open=&quot;id in(&quot; close=&quot;)&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt;#&#123;id&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/select&gt; 2.4 çŸ¥è¯†å°ç»“MyBatisæ˜ å°„æ–‡ä»¶é…ç½® 12345678910&lt;select&gt;ï¼šæŸ¥è¯¢ &lt;insert&gt;ï¼šæ’å…¥ &lt;update&gt;ï¼šä¿®æ”¹ &lt;delete&gt;ï¼šåˆ é™¤ &lt;selectKey&gt;ï¼šè¿”å›ä¸»é”® &lt;where&gt;ï¼šwhereæ¡ä»¶ &lt;if&gt;ï¼šifåˆ¤æ–­ &lt;foreach&gt;ï¼šforå¾ªç¯ &lt;set&gt;ï¼šsetè®¾ç½® &lt;sql&gt;ï¼šsqlç‰‡æ®µæŠ½å– Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶æ·±å…¥3.1 pluginsæ ‡ç­¾MyBatiså¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶æ¥å¯¹åŠŸèƒ½è¿›è¡Œæ‰©å±•ï¼Œåˆ†é¡µåŠ©æ‰‹PageHelperæ˜¯å°†åˆ†é¡µçš„å¤æ‚æ“ä½œè¿›è¡Œå°è£…ï¼Œä½¿ç”¨ç®€å•çš„æ–¹å¼å³å¯è·å¾—åˆ†é¡µçš„ç›¸å…³æ•°æ® å¼€å‘æ­¥éª¤ï¼š â‘ å¯¼å…¥é€šç”¨PageHelperçš„åæ ‡ â‘¡åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®PageHelperæ’ä»¶ â‘¢æµ‹è¯•åˆ†é¡µæ•°æ®è·å– â‘ å¯¼å…¥é€šç”¨PageHelperåæ ‡ 1234567891011&lt;!-- åˆ†é¡µåŠ©æ‰‹ --&gt;&lt;dependency&gt; &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt; &lt;artifactId&gt;pagehelper&lt;/artifactId&gt; &lt;version&gt;3.7.5&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.github.jsqlparser&lt;/groupId&gt; &lt;artifactId&gt;jsqlparser&lt;/artifactId&gt; &lt;version&gt;0.9.1&lt;/version&gt;&lt;/dependency&gt; â‘¡åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®PageHelperæ’ä»¶ 12345&lt;!-- åˆ†é¡µåŠ©æ‰‹çš„æ’ä»¶ --&gt;&lt;plugin interceptor=&quot;com.github.pagehelper.PageHelper&quot;&gt; &lt;!-- æŒ‡å®šæ–¹è¨€ --&gt; &lt;property name=&quot;dialect&quot; value=&quot;mysql&quot;/&gt;&lt;/plugin&gt; â‘¢æµ‹è¯•åˆ†é¡µä»£ç å®ç° 123456789@Test public void testPageHelper()&#123; //è®¾ç½®åˆ†é¡µå‚æ•° PageHelper.startPage(1,2); List&lt;User&gt; select = userMapper2.select(null); for (User user : select)&#123; System.out.println(user); &#125;&#125; è·å¾—åˆ†é¡µç›¸å…³çš„å…¶ä»–å‚æ•° 12345678//å…¶ä»–åˆ†é¡µçš„æ•°æ® PageInfo&lt;User&gt; pageInfo = new PageInfo&lt;User&gt;(select); System.out.println(&quot;æ€»æ¡æ•°ï¼š&quot;+pageInfo.getTotal()); System.out.println(&quot;æ€»é¡µæ•°ï¼š&quot;+pageInfo.getPages()); System.out.println(&quot;å½“å‰é¡µï¼š&quot;+pageInfo.getPageNum()); System.out.println(&quot;æ¯é¡µæ˜¾ç¤ºé•¿åº¦ï¼š&quot;+pageInfo.getPageSize()); System.out.println(&quot;æ˜¯å¦ç¬¬ä¸€é¡µï¼š&quot;+pageInfo.isIsFirstPage()); System.out.println(&quot;æ˜¯å¦æœ€åä¸€é¡µï¼š&quot;+pageInfo.isIsLastPage()); 3.2 çŸ¥è¯†å°ç»“MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶å¸¸ç”¨æ ‡ç­¾ï¼š propertiesæ ‡ç­¾ï¼šè¯¥æ ‡ç­¾å¯ä»¥åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶ typeAliasesæ ‡ç­¾ï¼šè®¾ç½®ç±»å‹åˆ«å environmentsæ ‡ç­¾ï¼šæ•°æ®æºç¯å¢ƒé…ç½®æ ‡ç­¾ pluginsæ ‡ç­¾ï¼šé…ç½®MyBatisçš„æ’ä»¶ 4. Mybatiså¤šè¡¨æŸ¥è¯¢4.1 æ•°æ®åº“è¡¨å…³ç³»ä»‹ç»å…³ç³»å‹æ•°æ®åº“è¡¨å…³ç³»åˆ†ä¸º: ä¸€å¯¹ä¸€ ä¸€å¯¹å¤š å¤šå¯¹å¤š æ¡ˆä¾‹ç¯å¢ƒå‡†å¤‡ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455DROP TABLE IF EXISTS `orders`; CREATE TABLE `orders` ( `id` INT(11) NOT NULL AUTO_INCREMENT, `ordertime` VARCHAR(255) DEFAULT NULL, `total` DOUBLE DEFAULT NULL, `uid` INT(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `uid` (`uid`), CONSTRAINT `orders_ibfk_1` FOREIGN KEY (`uid`) REFERENCES `user` (`id`)) ENGINE = INNODB AUTO_INCREMENT = 4 DEFAULT CHARSET = utf8; -- ---------------------------- -- Records of orders -- ---------------------------- INSERT INTO `orders` VALUES (&#x27;1&#x27;, &#x27;2020-12-12&#x27;, &#x27;3000&#x27;, &#x27;1&#x27;); INSERT INTO `orders` VALUES (&#x27;2&#x27;, &#x27;2020-12-12&#x27;, &#x27;4000&#x27;, &#x27;1&#x27;); INSERT INTO `orders` VALUES (&#x27;3&#x27;, &#x27;2020-12-12&#x27;, &#x27;5000&#x27;, &#x27;2&#x27;); -- ---------------------------- -- Table structure for sys_role -- ---------------------------- DROP TABLE IF EXISTS `sys_role`; CREATE TABLE `sys_role` ( `id` INT(11) NOT NULL AUTO_INCREMENT, `rolename` VARCHAR(255) DEFAULT NULL, `roleDesc` VARCHAR(255) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE = INNODB AUTO_INCREMENT = 3 DEFAULT CHARSET = utf8; -- ---------------------------- -- Records of sys_role -- ---------------------------- INSERT INTO `sys_role` VALUES (&#x27;1&#x27;, &#x27;CTO&#x27;, &#x27;CTO&#x27;); INSERT INTO `sys_role` VALUES (&#x27;2&#x27;, &#x27;CEO&#x27;, &#x27;CEO&#x27;); -- ------------------------------ Table structure for sys_user_role -- ---------------------------- DROP TABLE IF EXISTS `sys_user_role`; CREATE TABLE `sys_user_role` ( `userid` INT(11) NOT NULL, `roleid` INT(11) NOT NULL, PRIMARY KEY (`userid`, `roleid`), KEY `roleid` (`roleid`), CONSTRAINT `sys_user_role_ibfk_1` FOREIGN KEY (`userid`) REFERENCES `sys_role` (`id`), CONSTRAINT `sys_user_role_ibfk_2` FOREIGN KEY (`roleid`) REFERENCES `user` (`id`)) ENGINE = INNODB DEFAULT CHARSET = utf8; -- ---------------------------- -- Records of sys_user_role -- ---------------------------- INSERT INTO `sys_user_role` VALUES (&#x27;1&#x27;, &#x27;1&#x27;); INSERT INTO `sys_user_role` VALUES (&#x27;2&#x27;, &#x27;1&#x27;); INSERT INTO `sys_user_role` VALUES (&#x27;1&#x27;, &#x27;2&#x27;); INSERT INTO `sys_user_role` VALUES (&#x27;2&#x27;, &#x27;2&#x27;); 4.2 ä¸€å¯¹ä¸€ï¼ˆå¤šå¯¹ä¸€ï¼‰4.2.1 ä»‹ç»ä¸€å¯¹ä¸€æŸ¥è¯¢æ¨¡å‹ ç”¨æˆ·è¡¨å’Œè®¢å•è¡¨çš„å…³ç³»ä¸ºï¼Œä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè®¢å•ï¼Œä¸€ä¸ªè®¢å•åªä»å±äºä¸€ä¸ªç”¨æˆ· ä¸€å¯¹ä¸€æŸ¥è¯¢çš„éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰è®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºæ¯ä¸ªè®¢å•æ‰€å±çš„ç”¨æˆ· ä¸€å¯¹ä¸€æŸ¥è¯¢è¯­å¥ 1SELECT * FROM orders o LEFT JOIN USER u ON o.`uid`=u.`id`; 4.2.2 ä»£ç å®ç°1ï¼‰Orderå®ä½“ 1234567public class Order &#123; private Integer id; private Date ordertime; private double money; // è¡¨ç¤ºå½“å‰è®¢å•å±äºå“ªä¸ªç”¨æˆ· private User user;&#125; 2ï¼‰OrderMapperæ¥å£ 123public interface OrderMapper &#123; public List&lt;Order&gt; findAllWithUser(); &#125; 3ï¼‰OrderMapper.xml 12345678910111213&lt;resultMap id=&quot;orderMap&quot; type=&quot;com.lagou.domain.Order&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;ordertime&quot; property=&quot;ordertime&quot;&gt;&lt;/result&gt; &lt;result column=&quot;money&quot; property=&quot;money&quot;&gt;&lt;/result&gt; &lt;!--ä¸€å¯¹ä¸€ï¼ˆå¤šå¯¹ä¸€ï¼‰ä½¿ç”¨associationæ ‡ç­¾å…³è” property=&quot;user&quot; å°è£…å®ä½“çš„å±æ€§å javaType=&quot;user&quot; å°è£…å®ä½“çš„å±æ€§ç±»å‹ --&gt; &lt;association property=&quot;user&quot; javaType=&quot;com.lagou.domain.User&quot;&gt; &lt;id column=&quot;uid&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt; &lt;result column=&quot;address&quot; property=&quot;address&quot;&gt;&lt;/result&gt; &lt;/association&gt;&lt;/resultMap&gt; 4ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testOrderWithUser() throws Exception &#123; OrderMapper orderMapper = sqlSession.getMapper(OrderMapper.class); List&lt;Order&gt; list = orderMapper.findAllWithUser(); for (Order order : list) &#123; System.out.println(order); &#125;&#125; 4.3 ä¸€å¯¹å¤š4.3.1 ä»‹ç»ä¸€å¯¹å¤šæŸ¥è¯¢æ¨¡å‹ ç”¨æˆ·è¡¨å’Œè®¢å•è¡¨çš„å…³ç³»ä¸ºï¼Œä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè®¢å•ï¼Œä¸€ä¸ªè®¢å•åªä»å±äºä¸€ä¸ªç”¨æˆ· ä¸€å¯¹ä¸€æŸ¥è¯¢çš„éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰è®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºæ¯ä¸ªè®¢å•æ‰€å±çš„ç”¨æˆ· ä¸€å¯¹å¤šæŸ¥è¯¢è¯­å¥ 1SELECT *,o.id oid FROM USER u LEFT JOIN orders o ON u.`id` = o.`uid`; 4.3.2 ä»£ç å®ç°1ï¼‰Userå®ä½“ 123456789public class User &#123; private Integer id; private String username; private Date birthday; private String sex; private String address; // ä»£è¡¨å½“å‰ç”¨æˆ·å…·å¤‡çš„è®¢å•åˆ—è¡¨ private List&lt;Order&gt; orderList;&#125; 2ï¼‰UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAllWithOrder(); &#125; 3ï¼‰UserMapper.xml 1234567891011121314&lt;resultMap id=&quot;userMap&quot; type=&quot;com.lagou.domain.User&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt; &lt;result column=&quot;address&quot; property=&quot;address&quot;&gt;&lt;/result&gt; &lt;!--ä¸€å¯¹å¤šä½¿ç”¨collectionæ ‡ç­¾å…³è” property=&quot;orderList&quot; å°è£…åˆ°é›†åˆçš„å±æ€§å ofType=&quot;order&quot; å°è£…é›†åˆçš„æ³›å‹ç±»å‹ --&gt; &lt;collection property=&quot;orderList&quot; ofType=&quot;com.lagou.domain.Order&quot;&gt; &lt;id column=&quot;oid&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;ordertime&quot; property=&quot;ordertime&quot;&gt;&lt;/result&gt; &lt;result column=&quot;money&quot; property=&quot;money&quot;&gt;&lt;/result&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAllWithOrder&quot; resultMap=&quot;userMap&quot;&gt; SELECT *,o.id oid FROM USER u LEFT JOIN orders o ON u.`id`=o.`uid`; &lt;/select&gt; 4ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testUserWithOrder() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllWithOrder(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 4.4 å¤šå¯¹å¤š4.4.1 ä»‹ç»å¤šå¯¹å¤šæŸ¥è¯¢çš„æ¨¡å‹ å¤šå¯¹å¤šæŸ¥è¯¢è¯­å¥ 12345SELECT * FROMUSER u -- ç”¨æˆ·è¡¨ LEFT JOIN user_role ur -- å·¦å¤–è¿æ¥ä¸­é—´è¡¨ ON u.`id` = ur.`uid` LEFT JOIN role r -- å·¦å¤–è¿æ¥ä¸­é—´è¡¨ ON ur.`rid` = r.`id` ; 4.4.2 ä»£ç å®ç°1ï¼‰Userå’ŒRole å®ä½“ 123456789101112131415public class User &#123; private Integer id; private String username; private Date birthday; private String sex; private String address; // ä»£è¡¨å½“å‰ç”¨æˆ·å…³è”çš„è§’è‰²åˆ—è¡¨ private List&lt;Role&gt; roleList;&#125;public class Role &#123; private Integer id; private String roleName; private String roleDesc;&#125; 2ï¼‰UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAllWithRole(); &#125; 3ï¼‰UserMapper.xmlæ˜ å°„ 123456789101112131415&lt;resultMap id=&quot;userAndRoleMap&quot; type=&quot;com.lagou.domain.User&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt; &lt;result column=&quot;address&quot; property=&quot;address&quot;&gt;&lt;/result&gt; &lt;collection property=&quot;orderList&quot; ofType=&quot;com.lagou.domain.Role&quot;&gt; &lt;id column=&quot;rid&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;role_name&quot; property=&quot;roleName&quot;&gt;&lt;/result&gt; &lt;result column=&quot;role_desc&quot; property=&quot;roleDesc&quot;&gt;&lt;/result&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAllWithRole&quot; resultMap=&quot;userAndRoleMap&quot;&gt; SELECT * FROM USER u LEFT JOIN user_role ur ON u.`id`=ur.`uid` INNER JOIN role r ON ur.`rid` = r.`id`; &lt;/select&gt; 4ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testUserWithRole() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllWithRole(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 4.5 å°ç»“MyBatiså¤šè¡¨é…ç½®æ–¹å¼ å¤šå¯¹ä¸€ï¼ˆä¸€å¯¹ä¸€ï¼‰é…ç½®ï¼šä½¿ç”¨&lt;resultMap&gt;+&lt;association&gt;åšé…ç½® ä¸€å¯¹å¤šé…ç½®ï¼šä½¿ç”¨&lt;resultMap&gt;+&lt;collection&gt;åšé…ç½® å¤šå¯¹å¤šé…ç½®ï¼šä½¿ç”¨&lt;resultMap&gt;+&lt;collection&gt;åšé…ç½® å¤šå¯¹å¤šçš„é…ç½®è·Ÿä¸€å¯¹å¤šå¾ˆç›¸ä¼¼ï¼Œéš¾åº¦åœ¨äºSQLè¯­å¥çš„ç¼–å†™ã€‚ 5. MyBatisåµŒå¥—æŸ¥è¯¢5.1 ä»€ä¹ˆæ˜¯åµŒå¥—æŸ¥è¯¢åµŒå¥—æŸ¥è¯¢å°±æ˜¯å°†åŸæ¥å¤šè¡¨æŸ¥è¯¢ä¸­çš„è”åˆæŸ¥è¯¢è¯­å¥æ‹†æˆå•ä¸ªè¡¨çš„æŸ¥è¯¢ï¼Œå†ä½¿ç”¨mybatisçš„è¯­æ³•åµŒå¥—åœ¨ä¸€èµ·ã€‚ ä¸¾ä¸ªæ —å­ éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªè®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥è®¢å•æ‰€å±çš„ç”¨æˆ· è”åˆæŸ¥è¯¢SELECT * FROM orders o LEFT JOIN USER u ON o.uid&#x3D;u.id; åµŒå¥—æŸ¥è¯¢ å…ˆæŸ¥è¯¢è®¢å• SELECT * FROM orders å†æ ¹æ®è®¢å•uidå¤–é”®ï¼ŒæŸ¥è¯¢ç”¨æˆ· SELECT * FROM user WHERE id &#x3D; #{æ ¹æ®è®¢å•æŸ¥è¯¢çš„uid} æœ€åä½¿ç”¨mybatisï¼Œå°†ä»¥ä¸ŠäºŒæ­¥åµŒå¥—èµ·æ¥ 5.2 ä¸€å¯¹ä¸€åµŒå¥—æŸ¥è¯¢5.2.1 ä»‹ç»éœ€æ±‚ï¼šæŸ¥è¯¢ä¸€ä¸ªè®¢å•ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥è®¢å•æ‰€å±çš„ç”¨æˆ· ä¸€å¯¹ä¸€æŸ¥è¯¢è¯­å¥ 12345-- å…ˆæŸ¥è¯¢è®¢å•SELECT * FROM orders;-- å†æ ¹æ®è®¢å•uidå¤–é”®ï¼ŒæŸ¥è¯¢ç”¨æˆ·SELECT * FROM `user` WHERE id = #&#123;è®¢å•çš„uid&#125;; 5.2.2 ä»£ç å®ç°1ï¼‰OrderMapperæ¥å£ 123public interface OrderMapper &#123; public List&lt;Order&gt; findAllWithUser();&#125; 2ï¼‰OrderMapper.xmlæ˜ å°„ 1234567891011121314&lt;!--ä¸€å¯¹ä¸€åµŒå¥—æŸ¥è¯¢--&gt;&lt;resultMap id=&quot;orderMap&quot; type=&quot;order&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;ordertime&quot; property=&quot;ordertime&quot;&gt;&lt;/result&gt; &lt;result column=&quot;money&quot; property=&quot;money&quot;&gt;&lt;/result&gt; &lt;!--æ ¹æ®è®¢å•ä¸­uidå¤–é”®ï¼ŒæŸ¥è¯¢ç”¨æˆ·è¡¨--&gt; &lt;association property=&quot;user&quot; javaType=&quot;user&quot; column=&quot;uid&quot; select=&quot;com.lagou.mapper.UserMapper.findById&quot;&gt; &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAllWithUser&quot; resultMap=&quot;orderMap&quot; &gt; SELECT * FROM orders &lt;/select&gt; 3ï¼‰UserMapperæ¥å£ 123public interface UserMapper &#123; public User findById(Integer id);&#125; 4ï¼‰UserMapper.xmlæ˜ å°„ 123&lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;user&quot;&gt; SELECT * FROM `user` where id = #&#123;uid&#125; &lt;/select&gt; 5ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testOrderWithUser() throws Exception &#123; OrderMapper orderMapper = sqlSession.getMapper(OrderMapper.class); List&lt;Order&gt; list = orderMapper.findAllWithUser(); for (Order order : list) &#123; System.out.println(order); &#125;&#125; 5.3 ä¸€å¯¹å¤šåµŒå¥—æŸ¥è¯¢5.3.1 ä»‹ç»éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·å…·æœ‰çš„è®¢å• ä¸€å¯¹å¤šæŸ¥è¯¢è¯­å¥ 12345-- å…ˆæŸ¥è¯¢ç”¨æˆ·SELECT * FROM `user`;-- å†æ ¹æ®ç”¨æˆ·idä¸»é”®ï¼ŒæŸ¥è¯¢è®¢å•åˆ—è¡¨SELECT * FROM orders where uid = #&#123;ç”¨æˆ·id&#125;; 5.3.2 ä»£ç å®ç°1ï¼‰UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAllWithOrder();&#125; 2ï¼‰UserMapper.xmlæ˜ å°„ 12345678910111213141516&lt;!--ä¸€å¯¹å¤šåµŒå¥—æŸ¥è¯¢--&gt;&lt;resultMap id=&quot;userMap&quot; type=&quot;user&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt; &lt;result column=&quot;address&quot; property=&quot;address&quot;&gt;&lt;/result&gt; &lt;!--æ ¹æ®ç”¨æˆ·idï¼ŒæŸ¥è¯¢è®¢å•è¡¨--&gt; &lt;collection property=&quot;orderList&quot; column=&quot;id&quot; ofType=&quot;order&quot; select=&quot;com.lagou.mapper.OrderMapper.findByUid&quot;&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAllWithOrder&quot; resultMap=&quot;userMap&quot;&gt; SELECT * FROM `user` &lt;/select&gt; 3ï¼‰OrderMapper.xmlæ¥å£ 123public interface OrderMapper &#123; public List&lt;Order&gt; findByUid(Integer uid);&#125; 4ï¼‰OderMapper.xmlæ˜ å°„ 123&lt;select id=&quot;findByUid&quot; parameterType=&quot;int&quot; resultType=&quot;order&quot;&gt; SELECT * FROM orders where uid = #&#123;uid&#125; &lt;/select&gt; 5ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testUserWithOrder() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllWithOrder(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 5.4 å¤šå¯¹å¤šåµŒå¥—æŸ¥è¯¢5.4.1 ä»‹ç»éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼Œä¸æ­¤åŒæ—¶æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·å…·æœ‰çš„è®¢å• ä¸€å¯¹å¤šæŸ¥è¯¢è¯­å¥ 12345678-- å…ˆæŸ¥è¯¢ç”¨æˆ·SELECT * FROM `user`;-- å†æ ¹æ®ç”¨æˆ·idä¸»é”®ï¼ŒæŸ¥è¯¢è§’è‰²åˆ—è¡¨SELECT * FROM role r INNER JOIN user_role ur ON r.`id` = ur.`rid` WHERE ur.`uid` = #&#123;ç”¨æˆ·id&#125;; 5.4.2 ä»£ç å®ç°1ï¼‰UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAllWithRole(); &#125; 2ï¼‰UserMapper.xmlæ˜ å°„ 123456789101112131415&lt;!--å¤šå¯¹å¤šåµŒå¥—æŸ¥è¯¢--&gt;&lt;resultMap id=&quot;userAndRoleMap&quot; type=&quot;user&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt; &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt; &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt; &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt; &lt;result column=&quot;adress&quot; property=&quot;address&quot;&gt;&lt;/result&gt; &lt;!--æ ¹æ®ç”¨æˆ·idï¼ŒæŸ¥è¯¢è§’è‰²åˆ—è¡¨--&gt; &lt;collection property=&quot;roleList&quot; column=&quot;id&quot; ofType=&quot;role&quot; select=&quot;com.lagou.mapper.RoleMapper.findByUid&quot;&gt; &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=&quot;findAllWithRole&quot; resultMap=&quot;userAndRoleMap&quot;&gt; SELECT * FROM `user` &lt;/select&gt; 3ï¼‰RoleMapperæ¥å£ 123public interface RoleMapper &#123; public List&lt;Role&gt; findByUid(Integer uid); &#125; 4ï¼‰RoleMapper.xmlæ˜ å°„ 12345&lt;select id=&quot;findByUid&quot; parameterType=&quot;int&quot; resultType=&quot;role&quot;&gt; SELECT r.id,r.`role_name` roleName,r.`role_desc` roleDesc FROM role r INNER JOIN user_role ur ON r.`id` = ur.`rid` WHERE ur.`uid` = #&#123;uid&#125; &lt;/select&gt; 5ï¼‰æµ‹è¯•ä»£ç  12345678@Test public void testUserWithRole() throws Exception &#123; UserMapper userMapper = sqlSession.getMapper(UserMapper.class); List&lt;User&gt; list = userMapper.findAllWithRole(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 5.5 å°ç»“12345678ä¸€å¯¹ä¸€é…ç½®ï¼šä½¿ç”¨&lt;resultMap&gt;+&lt;association&gt;åšé…ç½®ï¼Œé€šè¿‡columnæ¡ä»¶ï¼Œæ‰§è¡ŒselectæŸ¥è¯¢ ä¸€å¯¹å¤šé…ç½®ï¼šä½¿ç”¨&lt;resultMap&gt;+&lt;collection&gt;åšé…ç½®ï¼Œé€šè¿‡columnæ¡ä»¶ï¼Œæ‰§è¡ŒselectæŸ¥è¯¢ å¤šå¯¹å¤šé…ç½®ï¼šä½¿ç”¨&lt;resultMap&gt;+&lt;collection&gt;åšé…ç½®ï¼Œé€šè¿‡columnæ¡ä»¶ï¼Œæ‰§è¡ŒselectæŸ¥è¯¢ ä¼˜ç‚¹ï¼šç®€åŒ–å¤šè¡¨æŸ¥è¯¢æ“ä½œ ç¼ºç‚¹ï¼šæ‰§è¡Œå¤šæ¬¡sqlè¯­å¥ï¼Œæµªè´¹æ•°æ®åº“æ€§èƒ½","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"æ›´æ–°hexoç‰ˆæœ¬","slug":"æ›´æ–°hexoç‰ˆæœ¬","date":"2021-03-27T02:58:44.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2021/03/27/æ›´æ–°hexoç‰ˆæœ¬/","link":"","permalink":"http://yournotes.cn/2021/03/27/%E6%9B%B4%E6%96%B0hexo%E7%89%88%E6%9C%AC/","excerpt":"å‰è¨€ æ˜¨å¤©ä½¿ç”¨vue 3å‘ç°nodeç‰ˆæœ¬å¤ªè€ï¼Œä½†è¿™ä¸ªç‰ˆæœ¬æ˜¯hexoéœ€è¦çš„ç‰ˆæœ¬ã€‚åªæ›´æ–°nodeçš„è¯ï¼Œhexoç”Ÿæˆçš„publicä¼šå…¨éƒ¨ä¸ºç©ºï¼Œæ‰€ä»¥æ›´æ–°ä¸‹æ–°ç‰ˆæœ¬hexoã€‚è¿™æ¬¡æ˜¯ç›´æ¥æ‰‹åŠ¨æ›´æ–°ï¼Œé‡æ–°åˆå§‹åŒ–hexoï¼Œå› æ­¤åšæ‰‹åŠ¨å¤‡ä»½","text":"å‰è¨€ æ˜¨å¤©ä½¿ç”¨vue 3å‘ç°nodeç‰ˆæœ¬å¤ªè€ï¼Œä½†è¿™ä¸ªç‰ˆæœ¬æ˜¯hexoéœ€è¦çš„ç‰ˆæœ¬ã€‚åªæ›´æ–°nodeçš„è¯ï¼Œhexoç”Ÿæˆçš„publicä¼šå…¨éƒ¨ä¸ºç©ºï¼Œæ‰€ä»¥æ›´æ–°ä¸‹æ–°ç‰ˆæœ¬hexoã€‚è¿™æ¬¡æ˜¯ç›´æ¥æ‰‹åŠ¨æ›´æ–°ï¼Œé‡æ–°åˆå§‹åŒ–hexoï¼Œå› æ­¤åšæ‰‹åŠ¨å¤‡ä»½ å¤‡ä»½å…³é”®æ–‡ä»¶ä¹‹å‰æºæ–‡ä»¶æ˜¯æ¨é€åœ¨githubï¼Œè¿™è¾¹å…ˆæœ¬åœ°æŠŠç¯å¢ƒé‡æ„ä¹‹åå†æ¨é€ï¼Œæˆ‘ä»¬è¿™è¾¹å°±æ˜¯æŠŠä¸ªäººçš„é…ç½®çš„éƒ¨åˆ†éƒ½å¤‡ä»½ä¸€ä¸‹å…¶ä»–éƒ½ä¸è¦ã€‚ .git å¯ä»¥å…ˆå¤åˆ¶ä¸€ä»½åˆ°æ—¶å€™å°±å¯ä»¥ç›´æ¥æäº¤ source ä¸ç”¨è¯´æ–‡ç« ä»€ä¹ˆéƒ½åœ¨é‡Œé¢ themes æˆ‘ä»¬é…ç½®çš„ä¸»é¢˜æ ·å¼ .gitignore å…¶å®ä¸ç”¨ä¹‹åæ–°ç‰ˆæœ¬çš„hexoåˆå§‹åŒ–ä¹Ÿæœ‰ _config.yml é¡µé¢çš„å„ç§é€šç”¨å±æ€§é…ç½®ï¼ˆå¤´åƒç­‰ç­‰ï¼‰ README.md ä»“åº“çš„è¯´æ˜ï¼Œä¸æ˜¯å…³é”®çš„æˆ‘è¿™è¾¹ç•™ç€ å‡†å¤‡æ–°hexoå®‰è£…14ç‰ˆæœ¬node é…ç½®ä¾èµ–åº“é•œåƒ 1npm config set registry https://registry.npm.taobao.org å®‰è£…hexo 1npm install -g hexo-cli æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ 1hexo -v åˆå§‹åŒ–åšå®¢ 12hexo init myblogcd myblog å®‰è£…ä¾èµ–åæµ‹è¯•ä¸€ä¸‹ 123npm ihexo ghexo s å¡«å……åŸåšå®¢æ²¡æœ‰é—®é¢˜ï¼Œé‚£ç°åœ¨å°±ç›¸å½“äºæŠŠæˆ‘ä»¬çš„å¤‡ä»½å…¨éƒ½å¤åˆ¶è¿‡æ¥å°±å¯ä»¥äº† å†æ¬¡ä½¿ç”¨å‡ºé”™è¿™æ—¶å€™å°±å‡ºäº†é—®é¢˜ï¼Œä¹Ÿæ˜¯æˆ‘å½“æ—¶ä½¿ç”¨å‘½ä»¤æ›´æ–°åçš„é—®é¢˜ï¼Œå› æ­¤æ‰é‡‡ç”¨äº†é‡æ–°ä¸‹è½½æ–°ç‰ˆhexoåˆå§‹åŒ–è¿™æ ·çš„æ–¹æ³•ï¼Œæ—¢ç„¶è¿˜æ˜¯èº²ä¸æ‰è¿™ä¸ªé—®é¢˜å°±å»è§£å†³è¿™ä¸ªé—®é¢˜å‘— ä¸€å¼€å§‹å‘ç°åªè¦ä¸æ”¾_config.ymlè¿›å»ï¼Œå…¶ä»–çš„æ²¡é—®é¢˜ ä¹Ÿå°±æ˜¯é—®é¢˜åœ¨é…ç½®æ–‡ä»¶ä¸Šï¼Œå†çœ‹é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬æ‰¾åˆ°jsçš„é‚£ä¸€è¡Œçœ‹çœ‹ï¼Œçœ‹è¿™ä¸ªconfig.urlæ˜¯ä»€ä¹ˆäºæ˜¯æˆ‘æŠŠå®ƒæ‹¼æ¥åœ¨é”™è¯¯ä¿¡æ¯åé¢ å†æ¬¡å¯åŠ¨çœ‹é”™è¯¯ä¿¡æ¯ï¼Œè¿™ä¸å°±æ˜¯åœ¨_config.ymlä¸­é…ç½®çš„urlä¹ˆ å°è¯•å»åœ¨åœ°å€å‰åŠ ä¸Š http: å°±å¥½äº†ï¼Œå¥‡äº†æ€ªäº†ä»¥å‰çš„hexoé…ç½®ä¸ç”¨åŠ httpæ‰€ä»¥ä½¿ç”¨æ­£å¸¸ï¼Œæ›´æ–°æ–°çš„ç‰ˆæœ¬åurlå°±ä¸èƒ½è¿™ä¹ˆé…ç½®äº†ï¼Œè¦å†™å…¨ å®Œç¾ï¼Œ .git æ–‡ä»¶å¤¹ä¹Ÿå¤åˆ¶è¿‡å»äº†æ‰€ä»¥ç›´æ¥pushåˆ°æˆ‘ä»¬çš„æºæ–‡ä»¶å¤‡ä»½åˆ†æ”¯ã€‚ æœ€åæœ€åè¿˜æ²¡å®Œï¼Œåˆå§‹çš„hexo-cliæ˜¯ä¸ä¼šè‡ªå¸¦gitéƒ¨ç½²æ’ä»¶çš„ï¼Œè¿˜æœ‰å…¶ä»–ã€‚å¯ä»¥å¯¹æ¯”åŸåšå®¢çš„package.jsonçœ‹è‡ªå·±ä»¥å‰ç”¨äº†å“ªäº›è¦è£…ä¸Šçš„ æˆ‘è¿™è¾¹è¦ç»™æ–°çš„hexoè£…ä¸Šï¼Œä»¥ä¸‹ä¸‰ä¸ªä¹Ÿæ˜¯ä»¥å‰çš„hexoæœ‰ç”¨åˆ° gitéƒ¨ç½² npm install hexo-deployer-git --save ç™¾åº¦ç«™ç‚¹ npm install hexo-generator-sitemap --save yiliaä¸»é¢˜ç›®å½• npm i hexo-generator-json-content --save","categories":[{"name":"åšå®¢ç³»ç»Ÿ","slug":"åšå®¢ç³»ç»Ÿ","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"},{"name":"Hexo","slug":"åšå®¢ç³»ç»Ÿ/Hexo","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://yournotes.cn/tags/Hexo/"}]},{"title":"hexoå¤šç«¯åŒæ­¥","slug":"hexoå¤šç«¯åŒæ­¥","date":"2021-03-27T02:43:51.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2021/03/27/hexoå¤šç«¯åŒæ­¥/","link":"","permalink":"http://yournotes.cn/2021/03/27/hexo%E5%A4%9A%E7%AB%AF%E5%90%8C%E6%AD%A5/","excerpt":"å‰è¨€ ä½¿ç”¨Hexoåœ¨githubæ­å»ºçš„åšå®¢ï¼Œåšå®¢ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„GitHubä»“åº“å­˜åœ¨ï¼Œä½†æ˜¯è¿™ä¸ªä»“åº“åªæœ‰ç”Ÿæˆçš„é™æ€ç½‘é¡µæ–‡ä»¶ï¼Œå¹¶æ²¡æœ‰Hexoçš„æºæ–‡ä»¶ï¼Œå¦‚æœè¦æ¢ç”µè„‘æˆ–è€…åœ¨å¦å¤–çš„ç”µè„‘ä½¿ç”¨ï¼Œå°±éœ€è¦å¤‡ä»½hexoç¯å¢ƒæ–‡ä»¶ã€‚","text":"å‰è¨€ ä½¿ç”¨Hexoåœ¨githubæ­å»ºçš„åšå®¢ï¼Œåšå®¢ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„GitHubä»“åº“å­˜åœ¨ï¼Œä½†æ˜¯è¿™ä¸ªä»“åº“åªæœ‰ç”Ÿæˆçš„é™æ€ç½‘é¡µæ–‡ä»¶ï¼Œå¹¶æ²¡æœ‰Hexoçš„æºæ–‡ä»¶ï¼Œå¦‚æœè¦æ¢ç”µè„‘æˆ–è€…åœ¨å¦å¤–çš„ç”µè„‘ä½¿ç”¨ï¼Œå°±éœ€è¦å¤‡ä»½hexoç¯å¢ƒæ–‡ä»¶ã€‚ æœ¬åœ°ç¯å¢ƒä¸Šä¼ è¿™é‡Œå°±ç›´æ¥ä½¿ç”¨ä½ é™æ€æ–‡ä»¶éƒ¨ç½²çš„ä»“åº“ï¼Œåœ¨è¿™ä¸ªä»“åº“ä¸‹ç”¨å¦å¤–ä¸€ä¸ªåˆ†æ”¯hexoæ¥å­˜ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è¿›è¡Œæ‹‰å–å’Œæ¨é€çš„åªæ˜¯æˆ‘ä»¬çš„æºæ–‡ä»¶ï¼Œç”Ÿæˆçš„é™æ€æ–‡ä»¶åªæ˜¯å•æ–¹å‘çš„éƒ¨ç½²ã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠhexoåˆ†æ”¯è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯æ›´æ–¹ä¾¿ã€‚ åˆšåˆ›å»ºæ˜¯ä¸€ä¸ªç©ºåˆ†æ”¯ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°cloneä¸‹æ¥æŠŠ.gitæ–‡ä»¶å¤¹æ”¾åˆ°é¡¹ç›®åå³å¯å»pushæˆ‘ä»¬çš„æºæ–‡ä»¶åˆ°hexoåˆ†æ”¯ï¼Œä¹‹åæˆ‘ä»¬åœ¨å¦ä¸€å°ç”µè„‘è¦ç”¨cloneä¸‹æ¥å³å¯ hexoé¡¹ç›®é‡Œæ˜¯æœ‰ä¸€ä¸ª.gitignoreçš„æ–‡ä»¶çš„ï¼Œé‡Œé¢å°±æ˜¯è¿‡æ»¤gitæ¨é€çš„æ–‡ä»¶ï¼Œä¸€äº›æ˜¯ç¯å¢ƒæ–‡ä»¶ç”Ÿæˆçš„ä¸ç”¨æäº¤çš„ä¼šè¿‡æ»¤æ‰ æ–°ç”µè„‘ç¯å¢ƒå‡†å¤‡ å®‰è£…git å®‰è£…node æ‹‰å–åšå®¢ç¯å¢ƒï¼Œæ‹‰ä¸‹æ¥æ˜¯æ²¡æœ‰node_modulesçš„è¢«è¿‡æ»¤äº† æ‰§è¡Œ npm i è¿›è¡Œå®‰è£…ä¾èµ–2.5é…ç½®nodeç¯å¢ƒå˜é‡åˆ°åšå®¢ç›®å½•ä¸‹çš„node_modulesF:\\WorkSpace\\blog\\Jasper-zh.github.io\\node_modules\\.bin æµ‹è¯•ä¸Šé¢éƒ½å®Œæˆä¹‹åï¼Œå°±å¯ä½¿ç”¨hexoå‘½ä»¤è¿›è¡Œæµ‹è¯•äº† 12hexo ghexo s æ³¨æ„äº‹é¡¹æ–°ç”µè„‘nodeç‰ˆæœ¬å°½é‡å’Œæœ€åˆä¸Šä¼ çš„hexoç¯å¢ƒçš„ç”µè„‘å·®ä¸å¤š æ–°ç¯å¢ƒæˆ–è€…æ›´æ”¹äº†nodeç¯å¢ƒï¼Œhexoå‘½ä»¤æ‰¾ä¸åˆ°å°±é‡æ–°å…¨å±€è£…ä¸€ä¸‹hexo-cli 1npm install -g hexo-cli","categories":[{"name":"åšå®¢ç³»ç»Ÿ","slug":"åšå®¢ç³»ç»Ÿ","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"},{"name":"hexo","slug":"åšå®¢ç³»ç»Ÿ/hexo","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://yournotes.cn/tags/Hexo/"}]},{"title":"Linuxå®‰è£…mysql8é—®é¢˜","slug":"Linuxå®‰è£…mysql8é—®é¢˜","date":"2021-03-24T04:33:16.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2021/03/24/Linuxå®‰è£…mysql8é—®é¢˜/","link":"","permalink":"http://yournotes.cn/2021/03/24/Linux%E5%AE%89%E8%A3%85mysql8%E9%97%AE%E9%A2%98/","excerpt":"æ˜¨å¤©è¿˜å¿ƒæƒ³11ç‚¹å‡†æ—¶ç¡è§‰ç»“æœå°±é‡åˆ°äº†é—®é¢˜æåˆ°å‡Œæ™¨2ç‚¹å·®ç‚¹ä¸ç”¨ç¡äº†ğŸ˜¢ï¼Œæœ‰å¿…è¦è®°å½•ä¸€ä¸‹","text":"æ˜¨å¤©è¿˜å¿ƒæƒ³11ç‚¹å‡†æ—¶ç¡è§‰ç»“æœå°±é‡åˆ°äº†é—®é¢˜æåˆ°å‡Œæ™¨2ç‚¹å·®ç‚¹ä¸ç”¨ç¡äº†ğŸ˜¢ï¼Œæœ‰å¿…è¦è®°å½•ä¸€ä¸‹ è¿™æ¬¡æ˜¯åœ¨ä¸€å°CentOSå®‰è£…Mysqlæ•°æ®åº“ï¼Œå¤§å®¶å¯èƒ½éƒ½ç›´æ¥ç”¨rpmæˆ–è€…å¦‚æœæ˜¯Debianç³»ç»Ÿå°±æ˜¯aptçš„æ–¹å¼æ¥å»å®‰è£…mysqlã€‚è¿™ä¸ªç¡®å®ä¼šæ¯”è¾ƒçœå¿ƒä½†å®‰è£…çš„åŸºæœ¬ä¸Šæ˜¯è€ç‰ˆæœ¬5.7è¿™ç§æœ€åä¸€ä¸ªå¼€æºç‰ˆæœ¬ è¿™é‡Œæ˜¯åœ¨å®˜ç½‘ä¸‹è½½8ç‰ˆæœ¬çš„linuxé€šç”¨åŒ…è¿›è¡Œå®‰è£…ï¼Œå…¶å®å…³äºè¿™ä¸ªçš„å®‰è£…æ­¥éª¤æˆ‘åœ¨å¦ä¸€ç¯‡æ–‡ç« æœ‰å†™ã€‚æŒ‰ç…§è¿™ç¯‡æ–‡ç« çš„æ­¥éª¤ä¼šå‡å°‘å¾ˆå¤šé—®é¢˜ï¼Œ ä½†æ˜¨å¤©é‡åˆ°äº†æ–°é—®é¢˜ å›¾ä¸Šæ˜¯å·²ç»è§£å†³å¾—æ—¶å€™ï¼ˆä¸»è¦é—®é¢˜ä¸æ˜¯å›¾ä¸Šçš„ç«¯å£å‰é¢å…ˆè§£å†³äº†åé¢æ‰ä¼šæœ‰ï¼‰ï¼Œå¼€å¯mysql.serveræ—¶é—®é¢˜æç¤ºå°±æ˜¯è¿™ä¸ª 12Starting MySQL..The server quit without updating PID file (/usr/local/mysql/var/MyServer.pid). ... failed! æˆ– 12Starting MySQL.Logging to &#x27;/etc/mysql/localhost.localdomain.err&#x27;..... ERROR! The server quit without updating PID file (/etc/mysql/localhost.localdomain.pid). æŒ‰ç…§ç½‘ä¸Šè§£å†³æ–¹æ¡ˆéƒ½é€ƒä¸äº†ä¸‹é¢è¿™ä¸ƒç§å¯¹æˆ‘æ¥è¯´æ˜¯æ²¡ç”¨çš„ã€‚ä½†åƒç«¯å£å ç”¨è¿™ç§è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œç„¶åå°±æ˜¯å®‰è£…æ­¥éª¤æœ‰é—®é¢˜æ¼äº†æƒé™æˆ–è€…é»˜è®¤è·¯å¾„æ˜ å°„ã€‚å…¶ä¸­åƒmy.cnfè¿™ç§é…ç½®çš„è§£å†³æ–¹æ¡ˆå¯¹mysql8æ˜¯æ²¡ç”¨çš„å› ä¸ºmysql8æ²¡æœ‰è¿™äº›ä¸œè¥¿éƒ½æ˜¯å†…ç½®é»˜è®¤ï¼Œç¬¬äºŒæ˜¯æƒé™çš„é—®é¢˜æ€»ä¹‹æŒ‰ç…§ä¹‹å‰é‚£ç¯‡æ–‡ç« å®‰è£…å…¶å®éƒ½ä¸ä¼šå‡ºç°è¿™äº›é—®é¢˜ 1.å¯èƒ½æ˜¯&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;rekfan.pidæ–‡ä»¶æ²¡æœ‰å†™çš„æƒé™è§£å†³æ–¹æ³• ï¼šç»™äºˆæƒé™ï¼Œæ‰§è¡Œ â€œchown -R mysql:mysql &#x2F;var&#x2F;dataâ€ â€œchmod -R 755 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;dataâ€ ç„¶åé‡æ–°å¯åŠ¨mysqldï¼ 2.å¯èƒ½è¿›ç¨‹é‡Œå·²ç»å­˜åœ¨mysqlè¿›ç¨‹è§£å†³æ–¹æ³•ï¼šç”¨å‘½ä»¤â€œps -ef|grep mysqldâ€æŸ¥çœ‹æ˜¯å¦æœ‰mysqldè¿›ç¨‹ï¼Œå¦‚æœæœ‰ä½¿ç”¨â€œkill -9 è¿›ç¨‹å·â€æ€æ­»ï¼Œç„¶åé‡æ–°å¯åŠ¨mysqldï¼ 3.å¯èƒ½æ˜¯ç¬¬äºŒæ¬¡åœ¨æœºå™¨ä¸Šå®‰è£…mysqlï¼Œæœ‰æ®‹ä½™æ•°æ®å½±å“äº†æœåŠ¡çš„å¯åŠ¨ã€‚è§£å†³æ–¹æ³•ï¼šå»mysqlçš„æ•°æ®ç›®å½•&#x2F;dataçœ‹çœ‹ï¼Œå¦‚æœå­˜åœ¨mysql-bin.indexï¼Œå°±èµ¶å¿«æŠŠå®ƒåˆ é™¤æ‰å§ï¼Œå®ƒå°±æ˜¯ç½ªé­ç¥¸é¦–äº†ã€‚ 4.mysqlåœ¨å¯åŠ¨æ—¶æ²¡æœ‰æŒ‡å®šé…ç½®æ–‡ä»¶æ—¶ä¼šä½¿ç”¨&#x2F;etc&#x2F;my.cnfé…ç½®æ–‡ä»¶ï¼Œè¯·æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æŸ¥çœ‹åœ¨[mysqld]èŠ‚ä¸‹æœ‰æ²¡æœ‰æŒ‡å®šæ•°æ®ç›®å½•(datadir)ã€‚è§£å†³æ–¹æ³•ï¼šè¯·åœ¨[mysqld]ä¸‹è®¾ç½®è¿™ä¸€è¡Œï¼šdatadir &#x3D; &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data 5.skip-federatedå­—æ®µé—®é¢˜è§£å†³æ–¹æ³•ï¼šæ£€æŸ¥ä¸€ä¸‹&#x2F;etc&#x2F;my.cnfæ–‡ä»¶ä¸­æœ‰æ²¡æœ‰æ²¡è¢«æ³¨é‡Šæ‰çš„skip-federatedå­—æ®µï¼Œå¦‚æœæœ‰å°±ç«‹å³æ³¨é‡Šæ‰å§ã€‚ 6.é”™è¯¯æ—¥å¿—ç›®å½•ä¸å­˜åœ¨è§£å†³æ–¹æ³•ï¼šä½¿ç”¨â€œchownâ€ â€œchmodâ€å‘½ä»¤èµ‹äºˆmysqlæ‰€æœ‰è€…åŠæƒé™ 7.selinuxæƒ¹çš„ç¥¸ï¼Œå¦‚æœæ˜¯centosç³»ç»Ÿï¼Œé»˜è®¤ä¼šå¼€å¯selinuxè§£å†³æ–¹æ³•ï¼šå…³é—­å®ƒï¼Œæ‰“å¼€&#x2F;etc&#x2F;selinux&#x2F;configï¼ŒæŠŠSELINUX&#x3D;enforcingæ”¹ä¸ºSELINUX&#x3D;disabledåå­˜ç›˜é€€å‡ºé‡å¯æœºå™¨è¯•è¯•ã€‚ èŠ±äº†ä¸¤ä¸‰ä¸ªå°æ—¶ä¸»è¦æ˜¯googleéƒ½ç¿»äº†å‡ é¡µç„¶åéƒ½å°è¯•äº†ä¸å¤Ÿä¹Ÿå°±ä¸Šé¢è¿™ä¸ƒç§ã€‚æœ€åæ‰æƒ³èµ·æ¥å»çœ‹localhost.localdmain.erræ–‡ä»¶ æˆ‘è¿™è¾¹é—®é¢˜çš„æ ¹æºå°±æ˜¯tempä¸‹çš„mysql.sockã€mysql.sock.lockã€mysqlx.sockã€mysql.sock.lockï¼Œåˆ é™¤å®Œäº‹æˆåŠŸå¯åŠ¨æœåŠ¡é‡æ–°ç”Ÿæˆã€‚åº”è¯¥æ˜¯ä¹‹å‰æœåŠ¡æ®‹ç•™ã€‚å¼€å§‹åˆå§‹åŒ–å®‰è£…mysqlåˆå§‹åŒ–å¯†ç æ²¡è®°å½•ä½†åˆä¸èƒ½åƒä»¥å‰ç‰ˆæœ¬å¯é€šè¿‡é…ç½®æ–‡ä»¶æŸ¥é‚£ä¸ªéšæœºå¯†ç ã€‚åªèƒ½é‡æ–°åˆå§‹åŒ–è¿™å°±æ˜¯é—®é¢˜çš„æ ¹æºï¼Œä¹‹å‰åˆå§‹åŒ–çš„å·²ç»å¯åŠ¨è¿‡äº†ç”Ÿæˆäº†è¿™äº›ã€‚ å¦‚æœä¸æ˜¯æˆ‘ä¸Šé¢è¿™ä¸ªï¼Œæ˜¯ç«¯å£å ç”¨çš„è¯å°±æ›´ç®€å•äº† lsof -i:3306 kill -9 5398 1234[root@localhost hao]# lsof -i:3306COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEmysqld 5398 mysql 36u IPv6 77510 0t0 TCP *:mysql (LISTEN)[root@localhost hao]# kill -9 5398 æ•´å®Œç¡è§‰ğŸ±â€ğŸ‘¤","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"ä¿®æ”¹cmdåˆå§‹åœ°å€","slug":"ä¿®æ”¹cmdåˆå§‹åœ°å€","date":"2021-03-24T04:32:30.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/03/24/ä¿®æ”¹cmdåˆå§‹åœ°å€/","link":"","permalink":"http://yournotes.cn/2021/03/24/%E4%BF%AE%E6%94%B9cmd%E5%88%9D%E5%A7%8B%E5%9C%B0%E5%9D%80/","excerpt":"ç”±äºè‡ªå·±å¹³æ—¶hexoä½¿ç”¨çš„è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹æ€»æ˜¯åˆ‡æ¢éº»çƒ¦ï¼Œæ‰€ä»¥æ›´æ”¹ä¸€ä¸‹cmdçš„é»˜è®¤åœ°å€ä¸ºhexoåœ°å€å°±éšä¾¿è®°å½•ä¸‹","text":"ç”±äºè‡ªå·±å¹³æ—¶hexoä½¿ç”¨çš„è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹æ€»æ˜¯åˆ‡æ¢éº»çƒ¦ï¼Œæ‰€ä»¥æ›´æ”¹ä¸€ä¸‹cmdçš„é»˜è®¤åœ°å€ä¸ºhexoåœ°å€å°±éšä¾¿è®°å½•ä¸‹ è¿™æ˜¯æˆ‘ä»¬cmdçš„é»˜è®¤åœ°å€ï¼Œæ¢åœ°å€æœ‰å‡ ç§æ–¹å¼ã€‚è¿™é‡Œä¸ç”¨å¿«æ·æ–¹å¼çš„ã€‚æ”¹å¼€å§‹å‘½ä»¤æ cmdè¿›çš„çª—å£çš„åœ°å€ï¼Œè€Œä¸æ˜¯æŸä¸ªcmdå¿«æ·æ–¹å¼çš„åœ°å€ã€‚ æ‰“å¼€æ³¨å†Œè¡¨win+r è¾“å…¥ regedit åœ°å€æ é”®å…¥ï¼šHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Command Processor è¿™é‡Œæˆ‘å·²ç»åˆ›å»ºäº†AutoRunçš„é…ç½®ï¼Œå¼€å§‹æ˜¯æ²¡æœ‰çš„ã€‚ç©ºç™½å¤„å³é”®æ–°å»ºå­—ç¬¦ä¸²ï¼Œåç§°AutoRunæ•°å€¼æ•°æ®cd /d ä½ çš„åœ°å€ ä¿å­˜åå…³æ‰cmdï¼Œé‡æ–°æ‰“å¼€å°±å·²ç»æ›´æ”¹äº†åœ°å€äº†","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"æŠ˜è…¾","slug":"æ—¥å¸¸/æŠ˜è…¾","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E6%8A%98%E8%85%BE/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"MybatisåŸºæœ¬åº”ç”¨","slug":"MybatisåŸºæœ¬åº”ç”¨","date":"2021-03-20T11:56:53.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2021/03/20/MybatisåŸºæœ¬åº”ç”¨/","link":"","permalink":"http://yournotes.cn/2021/03/20/Mybatis%E5%9F%BA%E6%9C%AC%E5%BA%94%E7%94%A8/","excerpt":"","text":"1. æ¡†æ¶ç®€ä»‹1.1 ä¸‰å±‚æ¶æ„è½¯ä»¶å¼€å‘å¸¸ç”¨çš„æ¶æ„æ˜¯ä¸‰å±‚æ¶æ„ï¼Œä¹‹æ‰€ä»¥æµè¡Œæ˜¯å› ä¸ºæœ‰ç€æ¸…æ™°çš„ä»»åŠ¡åˆ’åˆ†ã€‚ä¸€èˆ¬åŒ…æ‹¬ä»¥ä¸‹ä¸‰å±‚ï¼š æŒä¹…å±‚ï¼šä¸»è¦å®Œæˆä¸æ•°æ®åº“ç›¸å…³çš„æ“ä½œï¼Œå³å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ã€‚å› ä¸ºæ•°æ®åº“è®¿é—®çš„å¯¹è±¡ä¸€èˆ¬ç§°ä¸ºData Access Objectï¼ˆç®€ç§°DAOï¼‰ï¼Œæ‰€ä»¥æœ‰äººæŠŠæŒä¹…å±‚å«åšDAOå±‚ã€‚ ä¸šåŠ¡å±‚ï¼šä¸»è¦æ ¹æ®åŠŸèƒ½éœ€æ±‚å®Œæˆä¸šåŠ¡é€»è¾‘çš„å®šä¹‰å’Œå®ç°ã€‚å› ä¸ºå®ƒä¸»è¦æ˜¯ä¸ºä¸Šå±‚æä¾›æœåŠ¡çš„ï¼Œæ‰€ä»¥æœ‰äººæŠŠä¸šåŠ¡å±‚å«åšServiceå±‚æˆ–Businesså±‚ã€‚ è¡¨ç°å±‚ï¼šä¸»è¦å®Œæˆä¸æœ€ç»ˆè½¯ä»¶ä½¿ç”¨ç”¨æˆ·çš„äº¤äº’ï¼Œéœ€è¦æœ‰äº¤äº’ç•Œé¢ï¼ˆUIï¼‰ã€‚å› æ­¤ï¼Œæœ‰äººæŠŠè¡¨ç°å±‚ç§°ä¹‹ä¸ºwebå±‚æˆ–Viewå±‚ã€‚ ä¸‰å±‚æ¶æ„ä¹‹é—´è°ƒç”¨å…³ç³»ä¸º:è¡¨ç°å±‚è°ƒç”¨ä¸šåŠ¡å±‚ï¼Œä¸šåŠ¡å±‚è°ƒç”¨æŒä¹…å±‚ã€‚å„å±‚ä¹‹é—´å¿…ç„¶è¦è¿›è¡Œæ•°æ®äº¤äº’ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨javaå®ä½“å¯¹è±¡æ¥ä¼ é€’æ•°æ® 1.2 æ¡†æ¶1.2.1 ä»€ä¹ˆæ˜¯æ¡†æ¶ï¼Ÿæ¡†æ¶å°±æ˜¯ä¸€å¥—è§„èŒƒï¼Œæ—¢ç„¶æ˜¯è§„èŒƒï¼Œä½ ä½¿ç”¨è¿™ä¸ªæ¡†æ¶å°±è¦éµå®ˆè¿™ä¸ªæ¡†æ¶æ‰€è§„å®šçš„çº¦æŸã€‚æ¡†æ¶å¯ä»¥ç†è§£ä¸ºåŠæˆå“è½¯ä»¶ï¼Œæ¡†æ¶åšå¥½ä»¥åï¼Œæ¥ä¸‹æ¥åœ¨å®ƒåŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ã€‚ 1.2.2 ä¸ºä»€ä¹ˆä½¿ç”¨æ¡†æ¶ï¼Ÿæ¡†æ¶ä¸ºæˆ‘ä»¬å°è£…å¥½äº†ä¸€äº›å†—ä½™ï¼Œä¸”é‡ç”¨ç‡ä½çš„ä»£ç ã€‚å¹¶ä¸”ä½¿ç”¨åå°„ä¸åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå°†ä»£ç å®ç°äº†é€šç”¨æ€§ï¼Œè®© å¼€å‘äººå‘˜æŠŠç²¾åŠ›ä¸“æ³¨åœ¨æ ¸å¿ƒçš„ä¸šåŠ¡ä»£ç å®ç°ä¸Šã€‚ æ¯”å¦‚åœ¨ä½¿ç”¨servletè¿›è¡Œå¼€å‘æ—¶ï¼Œéœ€è¦åœ¨servletè·å–è¡¨å•çš„å‚æ•°ï¼Œæ¯æ¬¡éƒ½è¦è·å–å¾ˆéº»çƒ¦ï¼Œè€Œæ¡†æ¶åº•å±‚å°±ä½¿ç”¨åå°„æœºåˆ¶å’Œæ‹¦æˆªå™¨æœºåˆ¶å¸®åŠ©æˆ‘ä»¬è·å–è¡¨å•çš„å€¼ï¼Œä½¿ç”¨jdbcæ¯æ¬¡åšä¸“ä¸€äº›ç®€å•çš„crudçš„æ—¶å€™éƒ½å¿…é¡»å†™sqlï¼Œä½†ä½¿ç”¨æ¡†æ¶å°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•å°±å¯ä»¥ã€‚å½“ç„¶ï¼Œæ—¢ç„¶æ˜¯ä½¿ç”¨æ¡†æ¶ï¼Œé‚£ä¹ˆè¿˜æ˜¯è¦éµå¾ªå…¶ä¸€äº›è§„èŒƒè¿›è¡Œé…ç½® 1.2.3 å¸¸è§çš„æ¡†æ¶Javaä¸–ç•Œä¸­çš„æ¡†æ¶éå¸¸çš„å¤šï¼Œæ¯ä¸€ä¸ªæ¡†æ¶éƒ½æ˜¯ä¸ºäº†è§£å†³æŸä¸€éƒ¨åˆ†æˆ–æŸäº›é—®é¢˜è€Œå­˜åœ¨çš„ã€‚ä¸‹é¢åˆ—å‡ºåœ¨ç›®å‰ä¼ä¸šä¸­ æµè¡Œçš„å‡ ç§æ¡†æ¶ï¼ˆä¸€å®šè¦æ³¨æ„ä»–ä»¬æ˜¯ç”¨æ¥è§£å†³å“ªä¸€å±‚é—®é¢˜çš„ï¼‰ï¼š æŒä¹…å±‚æ¡†æ¶ï¼šä¸“æ³¨äºè§£å†³æ•°æ®æŒä¹…åŒ–çš„æ¡†æ¶ã€‚å¸¸ç”¨çš„æœ‰mybatisã€hibernateã€spring jdbcç­‰ç­‰ã€‚ è¡¨ç°å±‚æ¡†æ¶ï¼šä¸“æ³¨äºè§£å†³ä¸ç”¨æˆ·äº¤äº’çš„æ¡†æ¶ã€‚å¸¸è§çš„æœ‰struts2ã€spring mvcç­‰ç­‰ã€‚ å…¨æ ˆæ¡†æ¶: èƒ½åœ¨å„å±‚éƒ½ç»™å‡ºè§£å†³æ–¹æ¡ˆçš„æ¡†æ¶ã€‚æ¯”è¾ƒè‘—åçš„å°±æ˜¯springã€‚ è¿™ä¹ˆå¤šæ¡†æ¶ï¼Œæˆ‘ä»¬æ€ä¹ˆé€‰æ‹©å‘¢?æˆ‘ä»¬ä»¥ä¼ä¸šä¸­æœ€å¸¸ç”¨çš„ç»„åˆä¸ºå‡†æ¥å­¦ä¹ Spring + Spring MVC + mybatisï¼ˆSSMï¼‰ 2. Mybatisç®€ä»‹2.1 åŸå§‹jdbcæ“ä½œï¼ˆæŸ¥è¯¢æ•°æ®ï¼‰ 2.2 åŸå§‹jdbcæ“ä½œçš„åˆ†æåŸå§‹jdbcå¼€å‘å­˜åœ¨çš„é—®é¢˜å¦‚ä¸‹ï¼šâ‘  æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹é€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½â‘¡ sql è¯­å¥åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ï¼Œé€ æˆä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œå®é™…åº”ç”¨ sql å˜åŒ–çš„å¯èƒ½è¾ƒå¤§ï¼Œsql å˜åŠ¨éœ€è¦æ”¹å˜javaä»£ç ã€‚â‘¢ æŸ¥è¯¢æ“ä½œæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨å°†ç»“æœé›†ä¸­çš„æ•°æ®æ‰‹åŠ¨å°è£…åˆ°å®ä½“ä¸­ã€‚ åº”å¯¹ä¸Šè¿°é—®é¢˜ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆï¼šâ‘  ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± åˆå§‹åŒ–è¿æ¥èµ„æºâ‘¡ å°†sqlè¯­å¥æŠ½å–åˆ°xmlé…ç½®æ–‡ä»¶ä¸­â‘¢ ä½¿ç”¨åå°„ã€å†…çœç­‰åº•å±‚æŠ€æœ¯ï¼Œè‡ªåŠ¨å°†å®ä½“ä¸è¡¨è¿›è¡Œå±æ€§ä¸å­—æ®µçš„è‡ªåŠ¨æ˜ å°„ 2.3 Mybatisç®€ä»‹MyBatisæ˜¯ä¸€ä¸ªä¼˜ç§€çš„åŸºäºORMçš„åŠè‡ªåŠ¨è½»é‡çº§æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒå¯¹jdbcçš„æ“ä½œæ•°æ®åº“çš„è¿‡ç¨‹è¿›è¡Œå°è£…ï¼Œä½¿å¼€å‘è€…åªéœ€è¦å…³æ³¨ SQL æœ¬èº«ï¼Œè€Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†ä¾‹å¦‚æ³¨å†Œé©±åŠ¨ã€åˆ›å»ºconnectionã€åˆ›å»ºstatementã€æ‰‹åŠ¨è®¾ç½®å‚æ•°ã€ç»“æœé›†æ£€ç´¢ç­‰jdbcç¹æ‚çš„è¿‡ç¨‹ä»£ç  mybatis å†å² MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´6æœˆè¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œéšç€å¼€å‘å›¢é˜Ÿè½¬æŠ•åˆ°Google Codeæ——ä¸‹ï¼ŒiBatisæ­£å¼æ”¹åä¸ºMyBatis ï¼Œä»£ç äº2013å¹´11æœˆè¿ç§»åˆ°Github Githubåœ°å€ï¼šhttps://github.com/mybatis/mybatis-3/ 2.4 ORMæ€æƒ³ORMï¼ˆObject Relational Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ Oï¼ˆå¯¹è±¡æ¨¡å‹ï¼‰ï¼š å®ä½“å¯¹è±¡ï¼Œå³æˆ‘ä»¬åœ¨ç¨‹åºä¸­æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„å»ºç«‹çš„ä¸€ä¸ªä¸ªå®ä½“javaBean Rï¼ˆå…³ç³»å‹æ•°æ®åº“çš„æ•°æ®ç»“æ„ï¼‰ï¼š å…³ç³»æ•°æ®åº“é¢†åŸŸçš„Relationalï¼ˆå»ºç«‹çš„æ•°æ®åº“è¡¨ï¼‰ Mï¼ˆæ˜ å°„ï¼‰ï¼š ä»Rï¼ˆæ•°æ®åº“ï¼‰åˆ°Oï¼ˆå¯¹è±¡æ¨¡å‹ï¼‰çš„æ˜ å°„ï¼Œå¯é€šè¿‡XMLæ–‡ä»¶æ˜ å°„ å®ç°ï¼š è®©å®ä½“ç±»å’Œæ•°æ®åº“è¡¨è¿›è¡Œä¸€ä¸€å¯¹åº”å…³ç³» å…ˆè®©å®ä½“ç±»å’Œæ•°æ®åº“è¡¨å¯¹åº” å†è®©å®ä½“ç±»å±æ€§å’Œè¡¨é‡Œé¢å­—æ®µå¯¹åº” ä¸éœ€è¦ç›´æ¥æ“ä½œæ•°æ®åº“è¡¨ï¼Œç›´æ¥æ“ä½œè¡¨å¯¹åº”çš„å®ä½“ç±»å¯¹è±¡ ORMä½œä¸ºæ˜¯ä¸€ç§æ€æƒ³å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªå®ä½“çš„å˜åŒ–,å¹¶å°†å®ä½“çš„å˜åŒ–ç¿»è¯‘æˆsqlè„šæœ¬,æ‰§è¡Œåˆ°æ•°æ®åº“ä¸­å»,ä¹Ÿå°±æ˜¯å°†å®ä½“çš„å˜åŒ–æ˜ å°„åˆ°äº†è¡¨çš„å˜åŒ–ã€‚mybatisé‡‡ç”¨ORMæ€æƒ³è§£å†³äº†å®ä½“å’Œæ•°æ®åº“æ˜ å°„çš„é—®é¢˜ï¼Œå¯¹jdbc è¿›è¡Œäº†å°è£…ï¼Œå±è”½äº†jdbc api åº•å±‚è®¿é—®ç»†èŠ‚ï¼Œä½¿æˆ‘ä»¬ä¸ç”¨ä¸jdbc api æ‰“äº¤é“ï¼Œå°±å¯ä»¥å®Œæˆå¯¹æ•°æ®åº“çš„æŒä¹…åŒ–æ“ä½œ 3. Mybatiså¿«é€Ÿå…¥é—¨3.1 MyBatiså¼€å‘æ­¥éª¤MyBatiså®˜ç½‘åœ°å€ï¼šhttp://www.mybatis.org/mybatis-3/ æ¡ˆä¾‹éœ€æ±‚ï¼šé€šè¿‡mybatisæŸ¥è¯¢æ•°æ®åº“userè¡¨çš„æ‰€æœ‰è®°å½•ï¼Œå°è£…åˆ°Userå¯¹è±¡ä¸­ï¼Œæ‰“å°åˆ°æ§åˆ¶å°ä¸Šæ­¥éª¤åˆ†æï¼š 1234567891011121314â‘  åˆ›å»ºæ•°æ®åº“åŠuserè¡¨ â‘¡ åˆ›å»ºmavenå·¥ç¨‹ï¼Œå¯¼å…¥ä¾èµ–ï¼ˆMySQLé©±åŠ¨ã€mybatisã€junitï¼‰â‘¢ ç¼–å†™Userå®ä½“ç±» â‘£ ç¼–å†™UserMapper.xmlæ˜ å°„é…ç½®æ–‡ä»¶ï¼ˆORMæ€æƒ³ï¼‰â‘¤ ç¼–å†™SqlMapConfig.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ æ•°æ®åº“ç¯å¢ƒé…ç½® æ˜ å°„å…³ç³»é…ç½®çš„å¼•å…¥(å¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶çš„è·¯å¾„) â‘¥ ç¼–å†™æµ‹è¯•ä»£ç  // 1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ // 2.è·å–sqlSessionFactoryå·¥å‚å¯¹è±¡ // 3.è·å–sqlSessionä¼šè¯å¯¹è±¡ // 4.æ‰§è¡Œsql // 5.æ‰“å°ç»“æœ // 6.é‡Šæ”¾èµ„æº 3.2 ä»£ç å®ç°1ï¼‰ åˆ›å»ºuseræ•°æ®è¡¨ 1234567891011121314CREATE DATABASE `mybatis_db`; USE `mybatis_db`; CREATE TABLE `user` ( `id` int(11) NOT NULL auto_increment, `username` varchar(32) NOT NULL COMMENT &#x27;ç”¨æˆ·åç§°&#x27;, `birthday` datetime default NULL COMMENT &#x27;ç”Ÿæ—¥&#x27;, `sex` char(1) default NULL COMMENT &#x27;æ€§åˆ«&#x27;, `address` varchar(256) default NULL COMMENT &#x27;åœ°å€&#x27;, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; -- insert.... insert into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (1,&#x27;å­ æ…•&#x27;,&#x27;2020-11-11 00:00:00&#x27;,&#x27;ç”·&#x27;,&#x27;åŒ—äº¬æµ·æ·€&#x27;),(2,&#x27;åº”é¢ &#x27;,&#x27;2020-12-12 00:00:00&#x27;,&#x27;ç”·&#x27;,&#x27;åŒ— äº¬æµ·æ·€&#x27;); 2ï¼‰ å¯¼å…¥MyBatisçš„åæ ‡å’Œå…¶ä»–ç›¸å…³åæ ‡ 12345678910111213141516171819202122232425262728&lt;!--æŒ‡å®šç¼–ç å’Œç‰ˆæœ¬--&gt;&lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.encoding&gt;UTF-8&lt;/maven.compiler.encoding&gt; &lt;java.version&gt;1.11&lt;/java.version&gt; &lt;maven.compiler.source&gt;1.11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.11&lt;/maven.compiler.target&gt;&lt;/properties&gt;&lt;!--mybatisåæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.4&lt;/version&gt;&lt;/dependency&gt;&lt;!--mysqlé©±åŠ¨åæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.6&lt;/version&gt; &lt;scope&gt;runtime&lt;/scope&gt;&lt;/dependency&gt;&lt;!--å•å…ƒæµ‹è¯•åæ ‡--&gt;&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; 3ï¼‰ ç¼–å†™Userå®ä½“ 12345678public class User &#123; private Integer id; private String username; private Date birthday; private String sex; private String address; // getter/setter ç•¥ &#125; 4ï¼‰ ç¼–å†™UserMapperæ˜ å°„æ–‡ä»¶ 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt; &lt;mapper namespace=&quot;UserMapper&quot;&gt; &lt;!--æŸ¥è¯¢æ‰€æœ‰--&gt; &lt;select id=&quot;findAll&quot; resultType=&quot;com.lagou.domain.User&quot;&gt; select * from user &lt;/select&gt; &lt;/mapper&gt; 5ï¼‰ ç¼–å†™MyBatisæ ¸å¿ƒæ–‡ä»¶ 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;!--ç¯å¢ƒé…ç½®--&gt; &lt;environments default=&quot;mysql&quot;&gt; &lt;!--ä½¿ç”¨MySQLç¯å¢ƒ--&gt; &lt;environment id=&quot;mysql&quot;&gt; &lt;!--ä½¿ç”¨JDBCç±»å‹äº‹åŠ¡ç®¡ç†å™¨--&gt; &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt; &lt;!--ä½¿ç”¨è¿æ¥æ± --&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///mybatis_db&quot;&gt;&lt;/property&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„é…ç½®--&gt; &lt;mappers&gt; &lt;mapper resource=&quot;com/lagou/mapper/UserMapper.xml&quot;&gt;&lt;/mapper&gt; &lt;/mappers&gt;&lt;/configuration&gt; 6ï¼‰ ç¼–å†™æµ‹è¯•ç±» 12345678910111213141516@Test public void testFindAll() throws Exception &#123; // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å–SqlSessionFactoryå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å–SqlSessionä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // æ‰§è¡Œsql List&lt;User&gt; list = sqlSession.selectList(&quot;UserMapper.findAll&quot;); for (User user : list) &#123; System.out.println(user); &#125; // é‡Šæ”¾èµ„æº sqlSession.close(); &#125; 3.3 çŸ¥è¯†å°ç»“1234561.åˆ›å»ºmybatis_dbæ•°æ®åº“å’Œuserè¡¨ 2.åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ– 3.åˆ›å»ºUserå®ä½“ç±» 4.ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml5.ç¼–å†™æ ¸å¿ƒæ–‡ä»¶SqlMapConfig.xml6.ç¼–å†™æµ‹è¯•ç±» 4. Mybatisæ˜ å°„æ–‡ä»¶æ¦‚è¿° 5. Mybatiså¢åˆ æ”¹æŸ¥5.1 æ–°å¢1ï¼‰ ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml 12345&lt;!--æ–°å¢--&gt; &lt;insert id=&quot;save&quot; parameterType=&quot;com.lagou.domain.User&quot;&gt; insert into user(username,birthday,sex,address) values(#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;) &lt;/insert&gt; 2ï¼‰ç¼–å†™æµ‹è¯•ç±» 1234567891011121314151617181920@Test public void testSave() throws Exception &#123; // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å–SqlSessionFactoryå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å–SqlSessionä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // æ‰§è¡Œsql User user = new User(); user.setUsername(&quot;jack&quot;); user.setBirthday(new Date()); user.setSex(&quot;ç”·&quot;); user.setAddress(&quot;åŒ—äº¬æµ·æ·€&quot;); sqlSession.insert(&quot;UserMapper.save&quot;, user); // DMLè¯­å¥ï¼Œæ‰‹åŠ¨æäº¤äº‹åŠ¡ sqlSession.commit(); // é‡Šæ”¾èµ„æº sqlSession.close();&#125; 3ï¼‰æ–°å¢æ³¨æ„äº‹é¡¹ 123456789- æ’å…¥è¯­å¥ä½¿ç”¨insertæ ‡ç­¾ - åœ¨æ˜ å°„æ–‡ä»¶ä¸­ä½¿ç”¨parameterTypeå±æ€§æŒ‡å®šè¦æ’å…¥çš„æ•°æ®ç±»å‹ - Sqlè¯­å¥ä¸­ä½¿ç”¨#&#123;å®ä½“å±æ€§å&#125;æ–¹å¼å¼•ç”¨å®ä½“ä¸­çš„å±æ€§å€¼ - æ’å…¥æ“ä½œä½¿ç”¨çš„APIæ˜¯sqlSession.insert(â€œå‘½åç©ºé—´.idâ€,å®ä½“å¯¹è±¡); - æ’å…¥æ“ä½œæ¶‰åŠæ•°æ®åº“æ•°æ®å˜åŒ–ï¼Œæ‰€ä»¥è¦ä½¿ç”¨sqlSessionå¯¹è±¡æ˜¾ç¤ºçš„æäº¤äº‹åŠ¡ï¼Œå³ sqlSession.commit() 5.2 ä¿®æ”¹1ï¼‰ ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml 1234&lt;!--ä¿®æ”¹--&gt; &lt;update id=&quot;update&quot; parameterType=&quot;com.lagou.domain.User&quot;&gt; update user set username = #&#123;username&#125;,birthday = #&#123;birthday&#125;, sex = #&#123;sex&#125;,address = #&#123;address&#125; where id = #&#123;id&#125; &lt;/update&gt; 2ï¼‰ç¼–å†™æµ‹è¯•ç±» 123456789101112131415161718192021@Test public void testUpdate() throws Exception &#123; // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å–SqlSessionFactoryå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å–SqlSessionä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // æ‰§è¡Œsql User user = new User(); user.setId(4); user.setUsername(&quot;lucy&quot;); user.setBirthday(new Date()); user.setSex(&quot;å¥³&quot;); user.setAddress(&quot;åŒ—äº¬æœé˜³&quot;); sqlSession.update(&quot;UserMapper.update&quot;, user); // DMLè¯­å¥ï¼Œæ‰‹åŠ¨æäº¤äº‹åŠ¡ sqlSession.commit(); // é‡Šæ”¾èµ„æº sqlSession.close();&#125; 3ï¼‰ä¿®æ”¹æ³¨æ„äº‹é¡¹ 123- ä¿®æ”¹è¯­å¥ä½¿ç”¨updateæ ‡ç­¾ - ä¿®æ”¹æ“ä½œä½¿ç”¨çš„APIæ˜¯sqlSession.update(â€œå‘½åç©ºé—´.idâ€,å®ä½“å¯¹è±¡); 5.3 åˆ é™¤1ï¼‰ ç¼–å†™æ˜ å°„æ–‡ä»¶UserMapper.xml 1234&lt;!--åˆ é™¤--&gt; &lt;delete id=&quot;delete&quot; parameterType=&quot;java.lang.Integer&quot;&gt; delete from user where id = #&#123;id&#125; &lt;/delete&gt; 2ï¼‰ç¼–å†™æµ‹è¯•ç±» 123456789101112131415@Test public void testDelete() throws Exception &#123; // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å–SqlSessionFactoryå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å–SqlSessionä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // æ‰§è¡Œ sqlsqlSession.delete(&quot;UserMapper.delete&quot;, 50); // DMLè¯­å¥ï¼Œæ‰‹åŠ¨æäº¤äº‹åŠ¡ sqlSession.commit(); // é‡Šæ”¾èµ„æº sqlSession.close();&#125; 3ï¼‰åˆ é™¤æ³¨æ„äº‹é¡¹ 12345- åˆ é™¤è¯­å¥ä½¿ç”¨deleteæ ‡ç­¾ - Sqlè¯­å¥ä¸­ä½¿ç”¨#&#123;ä»»æ„å­—ç¬¦ä¸²&#125;æ–¹å¼å¼•ç”¨ä¼ é€’çš„å•ä¸ªå‚æ•° - åˆ é™¤æ“ä½œä½¿ç”¨çš„APIæ˜¯sqlSession.delete(â€œå‘½åç©ºé—´.idâ€,Object); 5.4 çŸ¥è¯†å°ç»“ 6. Mybatisæ ¸å¿ƒæ–‡ä»¶æ¦‚è¿°6.1 MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶å±‚çº§å…³ç³»MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚é…ç½®æ–‡æ¡£çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ï¼š 6.2 MyBatiså¸¸ç”¨é…ç½®è§£æ1ï¼‰environmentsæ ‡ç­¾æ•°æ®åº“ç¯å¢ƒçš„é…ç½®ï¼Œæ”¯æŒå¤šç¯å¢ƒé…ç½® 123456781.å…¶ä¸­ï¼Œäº‹åŠ¡ç®¡ç†å™¨ï¼ˆtransactionManagerï¼‰ç±»å‹æœ‰ä¸¤ç§ï¼š - JDBCï¼š è¿™ä¸ªé…ç½®å°±æ˜¯ç›´æ¥ä½¿ç”¨äº†JDBC çš„æäº¤å’Œå›æ»šè®¾ç½®ï¼Œå®ƒä¾èµ–äºä»æ•°æ®æºå¾—åˆ°çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸã€‚ - MANAGEDï¼š è¿™ä¸ªé…ç½®å‡ ä¹æ²¡åšä»€ä¹ˆã€‚å®ƒä»æ¥ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚ ä¾‹å¦‚ï¼šmybatisä¸springæ•´åˆåï¼Œäº‹åŠ¡äº¤ç»™springå®¹å™¨ç®¡ç†ã€‚ 2.å…¶ä¸­ï¼Œæ•°æ®æºï¼ˆdataSourceï¼‰å¸¸ç”¨ç±»å‹æœ‰ä¸‰ç§ï¼š - UNPOOLEDï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°åªæ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚ - POOLEDï¼š è¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ã€‚ - JNDI : è¿™ä¸ªæ•°æ®æºå®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ® æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„æ•°æ®æºå¼•ç”¨ 2ï¼‰propertiesæ ‡ç­¾ å®é™…å¼€å‘ä¸­ï¼Œä¹ æƒ¯å°†æ•°æ®æºçš„é…ç½®ä¿¡æ¯å•ç‹¬æŠ½å–æˆä¸€ä¸ªpropertiesæ–‡ä»¶ï¼Œè¯¥æ ‡ç­¾å¯ä»¥åŠ è½½é¢å¤–é…ç½®çš„ propertiesï¼š 1234jdbc.driver=com.mysql.jdbc.Driver jdbc.url=jdbc:mysql:///mybatis_db jdbc.username=root jdbc.password=root 3ï¼‰typeAliasesæ ‡ç­¾ ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚ ä¸ºäº†ç®€åŒ–æ˜ å°„æ–‡ä»¶ Java ç±»å‹è®¾ç½®ï¼Œmybatisæ¡†æ¶ä¸ºæˆ‘ä»¬è®¾ç½®å¥½çš„ä¸€äº›å¸¸ç”¨çš„ç±»å‹çš„åˆ«åï¼š åŸæ¥çš„ç±»å‹åç§°é…ç½®å¦‚ä¸‹ï¼š é…ç½®typeAliasesï¼Œä¸ºcom.lagou.domain.Userå®šä¹‰åˆ«åä¸ºuserï¼š 4ï¼‰mappersæ ‡ç­¾ è¯¥æ ‡ç­¾çš„ä½œç”¨æ˜¯åŠ è½½æ˜ å°„çš„ï¼ŒåŠ è½½æ–¹å¼æœ‰å¦‚ä¸‹å‡ ç§ï¼š 12345678910111.ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œä¾‹å¦‚ï¼š &lt;mapper resource=&quot;org/mybatis/builder/userMapper.xml&quot;/&gt; 2.ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ï¼Œä¾‹å¦‚ï¼š &lt;mapper url=&quot;file:///var/mappers/userMapper.xml&quot;/&gt; 3. ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»åï¼Œä¾‹å¦‚ï¼š &lt;mapper class=&quot;org.mybatis.builder.userMapper&quot;/&gt; 4. å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ï¼Œä¾‹å¦‚ï¼š &lt;package name=&quot;org.mybatis.builder&quot;/&gt; çŸ¥è¯†å°ç»“æ ¸å¿ƒé…ç½®æ–‡ä»¶å¸¸ç”¨é…ç½®ï¼špropertiesæ ‡ç­¾ï¼šè¯¥æ ‡ç­¾å¯ä»¥åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶ 1&lt;properties resource=&quot;jdbc.properties&quot;&gt;&lt;/properties&gt; typeAliasesæ ‡ç­¾ï¼šè®¾ç½®ç±»å‹åˆ«å 1&lt;typeAlias type=&quot;com.lagou.domain.User&quot; alias=&quot;user&quot;&gt;&lt;/typeAlias&gt; mappersæ ‡ç­¾ï¼šåŠ è½½æ˜ å°„é…ç½® 1&lt;mapper resource=&quot;com/lagou/mapper/UserMapping.xml&quot;&gt;&lt;/mapper&gt; environmentsæ ‡ç­¾ï¼šæ•°æ®æºç¯å¢ƒé…ç½® 1234567891011&lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; 7. Mybatisçš„APIæ¦‚è¿°7.1 SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilderå¸¸ç”¨APIï¼šSqlSessionFactory build(InputStream inputStream)é€šè¿‡åŠ è½½mybatisçš„æ ¸å¿ƒæ–‡ä»¶çš„è¾“å…¥æµçš„å½¢å¼æ„å»ºä¸€ä¸ªSqlSessionFactoryå¯¹è±¡ 1234String resource = &quot;org/mybatis/builder/mybatis-config.xml&quot;;InputStream inputStream = Resources.getResourceAsStream(resource); SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder(); SqlSessionFactory factory = builder.build(inputStream); å…¶ä¸­ï¼Œ Resources å·¥å…·ç±»ï¼Œè¿™ä¸ªç±»åœ¨ org.apache.ibatis.io åŒ…ä¸­ã€‚Resources ç±»å¸®åŠ©ä½ ä»ç±»è·¯å¾„ä¸‹ã€æ–‡ä»¶ç³»ç»Ÿæˆ–ä¸€ä¸ª web URL ä¸­åŠ è½½èµ„æºæ–‡ä»¶ã€‚ 7.2 SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactorySqlSessionFactory æœ‰å¤šä¸ªä¸ªæ–¹æ³•åˆ›å»ºSqlSession å®ä¾‹ã€‚å¸¸ç”¨çš„æœ‰å¦‚ä¸‹ä¸¤ä¸ªï¼š 7.3 SqlSessionä¼šè¯å¯¹è±¡SqlSession å®ä¾‹åœ¨ MyBatis ä¸­æ˜¯éå¸¸å¼ºå¤§çš„ä¸€ä¸ªç±»ã€‚åœ¨è¿™é‡Œä½ ä¼šçœ‹åˆ°æ‰€æœ‰æ‰§è¡Œè¯­å¥ã€æäº¤æˆ–å›æ»šäº‹åŠ¡å’Œè·å–æ˜ å°„å™¨å®ä¾‹çš„æ–¹æ³•ã€‚ æ‰§è¡Œè¯­å¥çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š 123456789&lt;T&gt; T selectOne(String statement, Object parameter) &lt;E&gt; List&lt;E&gt; selectList(String statement, Object parameter) int insert(String statement, Object parameter) int update(String statement, Object parameter) int delete(String statement, Object parameter) æ“ä½œäº‹åŠ¡çš„æ–¹æ³•ä¸»è¦æœ‰ï¼š 12void commit() void rollback() 7.4 åŸºæœ¬æµç¨‹ 8. Mybatisçš„daoå±‚å¼€å‘ä½¿ç”¨8.1 ä¼ ç»Ÿå¼€å‘æ–¹å¼1ï¼‰ç¼–å†™UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAll() throws Exception;&#125; 2ï¼‰ç¼–å†™UserMapperå®ç° 12345678910111213141516public class UserMapperImpl implements UserMapper &#123; @Override public List&lt;User&gt; findAll() throws Exception &#123; // åŠ è½½é…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å–SqlSessionFactoryå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å–SqlSeä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // æ‰§è¡Œsql List&lt;User&gt; list = sqlSession.selectList(&quot;UserMapper.findAll&quot;); // é‡Šæ”¾èµ„æº sqlSession.close(); return list; &#125;&#125; 3ï¼‰ç¼–å†™UserMapper.xml 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;UserMapper&quot;&gt; &lt;!--æŸ¥è¯¢æ‰€æœ‰--&gt; &lt;select id=&quot;findAll&quot; resultType=&quot;user&quot;&gt; select * from user &lt;/select&gt;&lt;/mapper&gt; 4ï¼‰æµ‹è¯• 12345678910@Test public void testFindAll() throws Exception &#123; // åˆ›å»ºUserMapper å®ç°ç±» UserMapper userMapper = new UserMapperImpl(); // æ‰§è¡ŒæŸ¥è¯¢ List&lt;User&gt; list = userMapper.findAll(); for (User user : list) &#123; System.out.println(user); &#125;&#125; 5ï¼‰çŸ¥è¯†å°ç»“ä¼ ç»Ÿå¼€å‘æ–¹å¼ 1231.ç¼–å†™UserMapperæ¥å£2.ç¼–å†™UserMapperå®ç°3.ç¼–å†™UserMapper.xml ä¼ ç»Ÿæ–¹å¼é—®é¢˜æ€è€ƒï¼š å®ç°ç±»ä¸­ï¼Œå­˜åœ¨mybatisæ¨¡æ¿ä»£ç é‡å¤ å®ç°ç±»è°ƒç”¨æ–¹æ³•æ—¶ï¼Œxmlä¸­çš„sql statement ç¡¬ç¼–ç åˆ°javaä»£ç ä¸­ æ€è€ƒï¼šèƒ½å¦åªå†™æ¥å£ï¼Œä¸å†™å®ç°ç±»ã€‚åªç¼–å†™æ¥å£å’ŒMapper.xmlå³å¯ï¼Ÿå› ä¸ºåœ¨daoï¼ˆmapperï¼‰çš„å®ç°ç±»ä¸­å¯¹sqlsessionçš„ä½¿ç”¨æ–¹å¼å¾ˆç±»ä¼¼ã€‚å› æ­¤mybatisæä¾›äº†æ¥å£çš„åŠ¨æ€ä»£ç†ã€‚ 8.2 ä»£ç†å¼€å‘æ–¹å¼1ï¼‰ä»‹ç»é‡‡ç”¨ Mybatis çš„åŸºäºæ¥å£ä»£ç†æ–¹å¼å®ç° æŒä¹…å±‚ çš„å¼€å‘ï¼Œè¿™ç§æ–¹å¼æ˜¯æˆ‘ä»¬åé¢è¿›å…¥ä¼ä¸šçš„ä¸»æµã€‚åŸºäºæ¥å£ä»£ç†æ–¹å¼çš„å¼€å‘åªéœ€è¦ç¨‹åºå‘˜ç¼–å†™ Mapper æ¥å£ï¼ŒMybatis æ¡†æ¶ä¼šä¸ºæˆ‘ä»¬åŠ¨æ€ç”Ÿæˆå®ç°ç±»çš„å¯¹è±¡ã€‚è¿™ç§å¼€å‘æ–¹å¼è¦æ±‚æˆ‘ä»¬éµå¾ªä¸€å®šçš„è§„èŒƒï¼š Mapper.xmlæ˜ å°„æ–‡ä»¶ä¸­çš„namespaceä¸mapperæ¥å£çš„å…¨é™å®šåç›¸åŒ Mapperæ¥å£æ–¹æ³•åå’ŒMapper.xmlæ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰çš„æ¯ä¸ªstatementçš„idç›¸åŒ Mapperæ¥å£æ–¹æ³•çš„è¾“å…¥å‚æ•°ç±»å‹å’Œmapper.xmlæ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰çš„æ¯ä¸ªsqlçš„parameterTypeçš„ç±»å‹ç›¸åŒ Mapperæ¥å£æ–¹æ³•çš„è¾“å‡ºå‚æ•°ç±»å‹å’Œmapper.xmlæ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰çš„æ¯ä¸ªsqlçš„resultTypeçš„ç±»å‹ç›¸åŒ Mapper æ¥å£å¼€å‘æ–¹æ³•åªéœ€è¦ç¨‹åºå‘˜ç¼–å†™Mapper æ¥å£ï¼ˆç›¸å½“äºDao æ¥å£ï¼‰ï¼Œç”±Mybatis æ¡†æ¶æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºæ¥å£çš„åŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡çš„æ–¹æ³•ä½“åŒä¸Šè¾¹Daoæ¥å£å®ç°ç±»æ–¹æ³•ã€‚ 2ï¼‰ç¼–å†™UserMapperæ¥å£ 123public interface UserMapper &#123; public List&lt;User&gt; findAll() throws Exception;&#125; 3ï¼‰ç¼–å†™UserMapper.xml 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;com.lagou.mapper.UserMapper&quot;&gt; &lt;!--æŸ¥è¯¢æ‰€æœ‰--&gt; &lt;select id=&quot;findAll&quot; resultType=&quot;user&quot;&gt; select * from user &lt;/select&gt;&lt;/mapper&gt; 4ï¼‰æµ‹è¯• 123456789101112131415161718@Test public void testFindAll() throws Exception &#123; // åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶ InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;); // è·å¾—SqlSessionFactoryå·¥å‚å¯¹è±¡ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); // è·å¾—SqlSessionä¼šè¯å¯¹è±¡ SqlSession sqlSession = sqlSessionFactory.openSession(); // è·å¾—Mapperä»£ç†å¯¹è±¡ UserMapper userMapper = sqlSession.getMapper(UserMapper.class); // æ‰§è¡ŒæŸ¥è¯¢ List&lt;User&gt; list = userMapper.findAll(); for (User user : list) &#123; System.out.println(user); &#125; // é‡Šæ”¾èµ„æº sqlSession.close();&#125; 5ï¼‰MybatisåŸºäºæ¥å£ä»£ç†æ–¹å¼çš„å†…éƒ¨æ‰§è¡ŒåŸç†æˆ‘ä»¬çš„æŒä¹…å±‚ç°åœ¨åªæœ‰ä¸€ä¸ªæ¥å£ï¼Œè€Œæ¥å£æ˜¯ä¸å®é™…å¹²æ´»çš„ï¼Œé‚£ä¹ˆæ˜¯è°åœ¨åšæŸ¥è¯¢çš„å®é™…å·¥ä½œå‘¢ï¼Ÿ ä¸‹é¢é€šè¿‡è¿½è¸ªæºç çœ‹ä¸€ä¸‹ï¼š 1ã€é€šè¿‡è¿½è¸ªæºç æˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„mapperå®é™…ä¸Šæ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡,æ˜¯ç”±MapperProxyä»£ç†äº§ç”Ÿçš„ã€‚ 2ã€è¿½è¸ªMapperProxyçš„invokeæ–¹æ³•ä¼šå‘ç°ï¼Œå…¶æœ€ç»ˆè°ƒç”¨äº†mapperMethod.execute(sqlSession, args) 3ã€è¿›å…¥executeæ–¹æ³•ä¼šå‘ç°ï¼Œæœ€ç»ˆå·¥ä½œçš„è¿˜æ˜¯sqlSession","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"ä¸èƒ½è¯´çš„ç§˜å¯†","slug":"ä¸èƒ½è¯´çš„ç§˜å¯†ï¼ˆå‰ä»–è°±ï¼‰","date":"2021-03-07T02:54:25.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/03/07/ä¸èƒ½è¯´çš„ç§˜å¯†ï¼ˆå‰ä»–è°±ï¼‰/","link":"","permalink":"http://yournotes.cn/2021/03/07/%E4%B8%8D%E8%83%BD%E8%AF%B4%E7%9A%84%E7%A7%98%E5%AF%86%EF%BC%88%E5%90%89%E4%BB%96%E8%B0%B1%EF%BC%89/","excerpt":"ã€Šä¸èƒ½è¯´çš„ç§˜å¯†ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šä¸èƒ½è¯´çš„ç§˜å¯†ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"Vue-cli&ElementUI","slug":"Vue-cli-ElementUI","date":"2021-03-06T12:17:44.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2021/03/06/Vue-cli-ElementUI/","link":"","permalink":"http://yournotes.cn/2021/03/06/Vue-cli-ElementUI/","excerpt":"","text":"1. ä»€ä¹ˆæ˜¯Vue-cli Vue cliæ˜¯åŸºäºVueçš„åº”ç”¨å¼€å‘æä¾›çš„ä¸€ä¸ªæ ‡å‡†çš„è„šæ‰‹æ¶å·¥å…·.ä¸ºåº”ç”¨æ­å»ºåŸºç¡€çš„æ¡†æ¶ç»“æ„,æä¾›æ’ä»¶ã€å¼€å‘æœåŠ¡ã€Presetã€æ„å»ºæ‰“åŒ…åŠŸèƒ½ Vue cli èƒŒåé›†æˆäº†ç°ä»£åŒ–å¼€å‘çš„è¯¸å¤šåŠŸèƒ½,é€šè¿‡ç®€å•çš„å‘½ä»¤å°±å¯ä»¥å®Œæˆ â€œé›¶é…ç½®â€çš„é¡¹ç›®ç¯å¢ƒæ­å»º 2. å®‰è£…Vue-cliæ­¥éª¤åœ¨å®‰è£…vue-cliå‰ï¼Œè¦ç¡®è®¤è‡ªå·±çš„ç”µè„‘æ˜¯å¦å®‰è£…äº†nodejså’Œnpm. 2.1 å®‰è£…Node.jså®‰è£…äº†node.jsæ‰æœ‰ä½¿ç”¨npm ï¼Œæ‰èƒ½å®‰è£…vue-cli 2.1.1 ä»€ä¹ˆæ˜¯node.jsä¸ºä»€ä¹ˆä¼šæœ‰node.jsï¼Ÿ ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ JavaScript è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šï¼ŒChrome ä½¿ç”¨çš„ JavaScript å¼•æ“æ˜¯ V8ï¼ŒNode.js æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡ç«¯ çš„æ¡†æ¶ï¼Œå®ƒçš„åº•å±‚å°±ä½¿ç”¨äº† V8 å¼•æ“ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨javascriptå»ç¼–å†™ä¸€äº›æœåŠ¡ç«¯çš„ç¨‹åºï¼Œè¿™æ ·ä¹Ÿå°±å®ç°äº†ç”¨ javaScriptå»å¼€å‘ Apache + PHP ä»¥åŠ Java Servletæ‰€å¼€å‘çš„æœåŠ¡ç«¯åŠŸèƒ½ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å‰ç«¯å’Œåç«¯éƒ½é‡‡ç”¨ javascriptï¼Œå³å¼€å‘ä¸€ä»½jsç¨‹åºå³å¯ä»¥è¿è¡Œåœ¨å‰ç«¯ä¹Ÿå¯ä»¥è¿è¡Œçš„æœåŠ¡ç«¯ï¼Œè¿™æ ·æ¯”ä¸€ä¸ªåº”ç”¨ä½¿ç”¨å¤šç§è¯­è¨€åœ¨å¼€å‘æ•ˆç‡ä¸Š è¦é«˜ï¼Œä¸è¿‡node.jså±äºæ–°å…´äº§å“ï¼Œä¸€äº›å…¬å¸ä¹Ÿåœ¨å°è¯•ä½¿ç”¨node.jså®Œæˆä¸€äº›ä¸šåŠ¡é¢†åŸŸï¼Œnode.jsåŸºäºV8å¼•æ“ï¼ŒåŸºäº äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œåœ¨ç‰¹å®šé¢†åŸŸæ€§èƒ½å‡ºè‰²ï¼Œæ¯”å¦‚ç”¨node.jså®ç°æ¶ˆæ¯æ¨é€ã€çŠ¶æ€ç›‘æ§ç­‰çš„ä¸šåŠ¡åŠŸèƒ½éå¸¸åˆé€‚ã€‚ 2.1.2 å®‰è£…node.js ä¸‹è½½å¯¹åº”ä½ ç³»ç»Ÿçš„Node.jsç‰ˆæœ¬: https://nodejs.org/en/download/ é€‰å®‰è£…ç›®å½•è¿›è¡Œå®‰è£…, æˆ‘é€‰æ‹©å®‰è£…åœ¨äº†Eç›˜: E:\\Program Files\\nodejs æµ‹è¯•: åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹è¾“å…¥å‘½ä»¤ 1node -v //ä¼šæ˜¾ç¤ºå½“å‰nodeçš„ç‰ˆæœ¬ 2.2 å®‰è£…NPMnpmå…¨ç§°Node Package Managerï¼Œä»–æ˜¯nodeåŒ…ç®¡ç†å’Œåˆ†å‘çš„å·¥å…·ï¼Œä½¿ç”¨NPMå¯ä»¥å¯¹åº”ç”¨çš„ä¾èµ–è¿›è¡Œç®¡ç†ï¼ŒNPM çš„åŠŸèƒ½å’ŒæœåŠ¡ç«¯é¡¹ç›®æ„å»ºå·¥å…·mavençš„ä¾èµ–ç®¡ç†åŠŸèƒ½å·®ä¸å¤šï¼Œæˆ‘ä»¬é€šè¿‡npm å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸‹è½½jsåº“ï¼Œæ‰“åŒ…jsæ–‡ä»¶ã€‚ 2.2.1 è‡ªåŠ¨å®‰è£…NPMnode.jså·²ç»é›†æˆäº†npmå·¥å…·åœ¨å‘½ä»¤æç¤ºç¬¦è¾“å…¥ npm -v å¯æŸ¥çœ‹å½“å‰npmç‰ˆæœ¬ 1npm -v 2.2.2 æŸ¥çœ‹åŒ…ç®¡ç†è·¯å¾„åŒ…è·¯å¾„å°±æ˜¯npmä»è¿œç¨‹ä¸‹è½½çš„jsåŒ…æ‰€å­˜æ”¾çš„è·¯å¾„ã€‚ ä½¿ç”¨ npm config ls æŸ¥è¯¢NPMç®¡ç†åŒ…è·¯å¾„ï¼ˆNPMä¸‹è½½çš„ä¾èµ–åŒ…æ‰€å­˜æ”¾çš„è·¯å¾„ï¼‰ 1npm config ls æˆ‘ä»¬å‘ç°NPMé»˜è®¤çš„ç®¡ç†åŒ…è·¯å¾„åœ¨: 1C:\\Users\\hao\\AppData\\Roaming\\npm 2.2.3 è®¾ç½®åŒ…ç®¡ç†è·¯å¾„ä¾èµ–åŒ…æ”¾åœ¨Cç›˜ä¸å¤ªåˆé€‚,ä¸ºäº†æ–¹ä¾¿å¯¹ä¾èµ–åŒ…ç®¡ç†, æˆ‘ä»¬å°†ç®¡ç†åŒ…çš„è·¯å¾„è®¾ç½®åœ¨å•ç‹¬çš„åœ°æ–¹: æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªè·¯å¾„,ä¸“é—¨å­˜æ”¾è¿™äº›ä¾èµ–åŒ….æˆ‘é€‰æ‹©åˆ›å»ºä¸€ä¸ªç›®å½•: H:\\software\\nodejs_package åœ¨ H:\\software\\nodejs_package ä¸‹å†åˆ›å»º npm_modules æ–‡ä»¶å¤¹ å’Œ npm_cache æ–‡ä»¶å¤¹: æ‰§è¡Œä¸‹è¾¹çš„å‘½ä»¤,è®¾ç½®ä¸ºè‡ªå®šä¹‰çš„åŒ…ç®¡ç†è·¯å¾„ï¼š 12npm config set prefix &quot;H:\\software\\nodejs_package\\npm_modules&quot; npm config set cache &quot;H:\\software\\nodejs_package\\npm_cache&quot; æ­¤æ—¶å†ä½¿ç”¨ npm config ls æŸ¥è¯¢NPMç®¡ç†åŒ…è·¯å¾„å‘ç°è·¯å¾„å·²æ›´æ”¹ 2.2.4 NPMç¯å¢ƒå˜é‡é…ç½® æŸ¥çœ‹npmçš„å…¨å±€è·¯å¾„æ˜¯ä»€ä¹ˆ 1npm config get prefix é…ç½®PATHç¯å¢ƒå˜é‡ 2.2.5 å®‰è£…cnpmnpmé»˜è®¤ä¼šå»å›½å¤–çš„é•œåƒå»ä¸‹è½½jsåŒ…ï¼Œåœ¨å¼€å‘ä¸­é€šå¸¸æˆ‘ä»¬ä½¿ç”¨å›½å†…é•œåƒï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ·˜å®é•œåƒä¸‹è¾¹æˆ‘ä»¬æ¥å®‰è£…cnpmï¼š æœ‰æ—¶æˆ‘ä»¬ä½¿ç”¨npmä¸‹è½½èµ„æºä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªcnmp(æ·˜å®é•œåƒ)æ¥åŠ å¿«ä¸‹è½½é€Ÿåº¦ã€‚ è”ç½‘æƒ…å†µä¸‹, è¾“å…¥å‘½ä»¤ï¼Œè¿›è¡Œå…¨å±€å®‰è£…æ·˜å®é•œåƒ: 1234//å®‰è£… npm install -g cnpm --registry=https://registry.npm.taobao.org //æŸ¥çœ‹cnpmçš„ç‰ˆæœ¬ cnpm -v 2.3 å®‰è£…vue-cliç›®å‰ä¸»æµç‰ˆæœ¬æ˜¯ 2.x å’Œ 3.x ç‰ˆæœ¬,å®‰è£…3.x ä»¥ä¸Šçš„ç‰ˆæœ¬æ˜¯å› ä¸ºè¯¥ç‰ˆæœ¬æ—¢å¯ä»¥åˆ›å»º2.xé¡¹ç›®ä¸3.x é¡¹ç›®æ³¨æ„: ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤è¡Œ å®‰è£…å‘½ä»¤ 1npm install -g @vue/cli è¾“å…¥ vueå‘½ä»¤ è¾“å…¥ vue -V æŸ¥çœ‹ç‰ˆæœ¬ 1vue -v 3. å¿«é€Ÿæ„å»ºVueé¡¹ç›®3.1 æ­¥éª¤è¯´æ˜æˆ‘ä»¬ä½¿ç”¨vue-cli å¿«é€Ÿæ„å»ºé¡¹ç›®,æ­¥éª¤å¦‚ä¸‹: æ¡Œé¢åˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd , è¿›å…¥åˆ°vueTestæ–‡ä»¶å¤¹ æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ 123//1.åŸºäºäº¤äº’å¼å‘½ä»¤æ–¹å¼,åˆ›å»ºé¡¹ç›® //æ–‡ä»¶å ä¸æ”¯æŒé©¼å³°ï¼ˆå«å¤§å†™å­—æ¯ï¼‰ä½¿ç”¨çŸ­æ¨ªçº¿æ–¹å¼ vue create my-project é€‰æ‹©è‡ªå®šä¹‰å®‰è£…,ç‚¹å‡»å›è½¦ åœ¨è¿™åˆ—è¡¨ä¸­,é€‰æ‹©æˆ‘ä»¬è¦å®‰è£…çš„ç»„ä»¶,ä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©,é€‰å¥½åå›è½¦ æŒ‰å›è½¦ä¹‹å,æç¤ºé€‰æ‹©ä»€ä¹ˆæ¨¡å¼çš„è·¯ç”±,æˆ‘ä»¬è¾“å…¥ n (è¡¨ç¤ºé€‰æ‹©hashæ¨¡å¼) é€‰æ‹©é¡¹ç›®é…ç½®æ–‡ä»¶å•ç‹¬å­˜æ”¾ æ˜¯å¦ä¿å­˜æ¨¡æ¿,é€‰æ‹©n ä¸åˆ›å»º å®‰è£…å®Œæˆ,æç¤ºè¾“å…¥æ‰§è¡Œä¸‹é¢è¿™ä¸¤ä¸ªå‘½ä»¤ é¦–å…ˆè¿›å…¥é¡¹ç›®ç›®å½• 1cd my-project å¯åŠ¨é¡¹ç›® 1npm run serve è®¿é—®é¡¹ç›®: http://localhost:8080/ åœæ­¢é¡¹ç›® ctr+cæˆ–è€…å…³é—­å‘½ä»¤è¡Œçª—å£å°±å¯ä»¥ 3.2 å¯¼å…¥Vueé¡¹ç›®åˆ°VSCode VSCodeä¸­å³é”®é€‰æ‹©æ‰“å¼€æ–‡ä»¶å¤¹ é€‰æ‹©æ¡Œé¢ä¸Šçš„é¡¹ç›® æ‰“å¼€é¡¹ç›®,å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡¹ç›®ç»“æ„ 3.3 é¡¹ç›®ç»“æ„ä»‹ç»1234567891011121314|--- my-project é¡¹ç›®åç§° |--- node_modules å­˜æ”¾ä¾èµ–åŒ…çš„ç›®å½• |--- public é™æ€èµ„æºç®¡ç†ç›®å½• |--- src ç»„ä»¶æºç ç›®å½•(æˆ‘ä»¬å†™çš„ä»£ç ) |--- assets å­˜æ”¾é™æ€å›¾ç‰‡èµ„æº(CSSä¹Ÿå¯ä»¥æ”¾åœ¨è¿™é‡Œ) |--- components å­˜æ”¾å„ç§ç»„ä»¶(ä¸€ä¸ªé¡µé¢å¯ä»¥çœ‹åšä¸€ä¸ªç»„ä»¶)ï¼Œå„ä¸ªç»„ä»¶è”ç³»åœ¨ä¸€èµ·ç»„æˆä¸€ä¸ª å®Œæ•´çš„é¡¹ç›® |--- router å­˜æ”¾äº†é¡¹ç›®è·¯ç”±æ–‡ä»¶ |--- views æ”¾ç½®çš„ä¸ºå…¬å…±ç»„ä»¶(ä¸»è¦è¿˜æ˜¯å„ä¸ªä¸»è¦é¡µé¢) |--- App.vue app.vueå¯ä»¥å½“åšæ˜¯ç½‘ç«™é¦–é¡µï¼Œæ˜¯ä¸€ä¸ªvueé¡¹ç›®çš„ä¸»ç»„ä»¶ï¼Œé¡µé¢å…¥å£æ–‡ä»¶ |--- main.js æ‰“åŒ…è¿è¡Œçš„å…¥å£æ–‡ä»¶ï¼Œå¼•å…¥äº†vueæ¨¡å—å’Œapp.vueç»„ä»¶ä»¥åŠè·¯ç”±route |--- babel.config.js babelé…ç½®æ–‡ä»¶, å¯¹æºä»£ç è¿›è¡Œè½¬ç (æŠŠes6=&gt;es5) |--- package.json é¡¹ç›®åŠå·¥å…·çš„ä¾èµ–é…ç½®æ–‡ä»¶ |--- paxkage-lock.json ä¾èµ–é…ç½®æ–‡ä»¶ |--- README.md é¡¹ç›®è¯´æ˜ 3.4 Vueè„šæ‰‹æ¶è‡ªå®šä¹‰é…ç½®3.4.1 package.js ä»‹ç»æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹é¢ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå®šä¹‰äº†è¿™ä¸ªé¡¹ç›®æ‰€éœ€è¦çš„å„ç§æ¨¡å—ï¼Œä»¥åŠé¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç­‰å…ƒæ•°æ®ï¼‰ã€‚ npm install å‘½ä»¤æ ¹æ®è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚ 123456789101112131415161718192021222324252627&#123; //1.é¡¹ç›®åŸºæœ¬ä¿¡æ¯ &quot;name&quot;: &quot;project3&quot;, &quot;version&quot;: &quot;0.1.0&quot;, &quot;private&quot;: true, //2.æŒ‡å®šè¿è¡Œè„šæœ¬å‘½ä»¤ &quot;scripts&quot;: &#123; &quot;serve&quot;: &quot;vue-cli-service serve&quot;, &quot;build&quot;: &quot;vue-cli-service build&quot; &#125;, //4.ç”Ÿäº§ç¯å¢ƒæ‰€ä¾èµ–æ¨¡å—çš„ç‰ˆæœ¬ &quot;dependencies&quot;: &#123; &quot;core-js&quot;: &quot;^3.6.5&quot;, &quot;vue&quot;: &quot;^2.6.11&quot;, &quot;vue-router&quot;: &quot;^3.2.0&quot; &#125;, //5.æœ¬åœ°ç¯å¢ƒå¼€å‘æ‰€ä¾èµ–çš„ç‰ˆæœ¬ &quot;devDependencies&quot;: &#123; &quot;@vue/cli-plugin-babel&quot;: &quot;~4.4.0&quot;, &quot;@vue/cli-plugin-router&quot;: &quot;~4.4.0&quot;, &quot;@vue/cli-service&quot;: &quot;~4.4.0&quot;, &quot;vue-template-compiler&quot;: &quot;^2.6.11&quot; &#125; &#125; 3.4.2 é€šè¿‡package.json é…ç½®é¡¹ç›®é…ç½®å†…å®¹é‡‡ç”¨JSONæ ¼å¼,æ‰€æœ‰çš„å†…å®¹éƒ½ç”¨åŒå¼•å·åŒ…è£¹æ‰“å¼€package.json,å†æœ€æœ«ç«¯æ·»åŠ å¦‚ä¸‹é…ç½®: 123456&quot;vue&quot;:&#123; &quot;devServer&quot;:&#123; &quot;port&quot;:&quot;8888&quot;, &quot;open&quot;:true &#125; &#125; é…ç½®è¯´æ˜: è¯¥é…ç½®è®¾ç½®æ‰“åŒ…æ—¶æœåŠ¡å™¨ç›¸å…³çš„ä¿¡æ¯ port : è®¿é—®ç«¯å£ open true: æ‰“åŒ…å®Œæˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ å¯åŠ¨é¡¹ç›® åœ¨VSCodeä¸­é€‰æ‹©é¡¹ç›®,å³é”®åœ¨ç»ˆç«¯æ‰“å¼€ è¾“å…¥å‘½ä»¤ 1npm run serve è¿è¡Œåå‘ç°ç«¯å£å·æ”¹ä¸º 8888,å¹¶ä¸”åœ¨æ‰“åŒ…å®Œæˆåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ æ³¨æ„: ä¸æ¨èè¿™ç§æ–¹å¼,å› ä¸ºpackage.json ä¸»è¦æ˜¯ç”¨æ¥ç®¡ç†åŒ…çš„é…ç½®ä¿¡æ¯.ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤,æˆ‘ä»¬å°†Vueè„šæ‰‹æ¶ç›¸å…³çš„é…ç½®å•ç‹¬å®šä¹‰åˆ° vue.confifig.js é…ç½®æ–‡ä»¶ä¸­ 3.4.3 å•ç‹¬çš„é…ç½®æ–‡ä»¶é…ç½®é¡¹ç›® åœ¨é¡¹ç›®çš„æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶ vue.config.js åˆ é™¤æ‰packageä¸­æ–°æ·»åŠ çš„é…ç½®é¡¹. åœ¨vue.config.js æ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³é…ç½® 12345module.exports = &#123; devServer:&#123; open:true port:8889 &#125; &#125; 3.5 Vue ç»„ä»¶åŒ–å¼€å‘3.5.1 ç»„ä»¶åŒ–å¼€å‘ç»„ä»¶åŒ–æ˜¯Vueçš„ç²¾é«“ï¼ŒVueé¡¹ç›®å°±æ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªçš„ç»„ä»¶æ„æˆçš„ã€‚ æˆ‘ä»¬ä¸»è¦çš„å·¥ä½œå°±æ˜¯å¼€å‘çš„ç»„ä»¶. 3.5.2 ç»„ä»¶ä»‹ç»1ï¼‰æˆ‘ä»¬ç”¨ vue-cli è„šæ‰‹æ¶æ­å»ºçš„é¡¹ç›®ï¼Œé‡Œé¢æœ‰å¾ˆå¤šï¼Œå¦‚ index.vue æˆ–è€… App.vue è¿™ä¸€ç±»çš„æ–‡ä»¶.æ¯ä¸€ä¸ª**.vue æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç»„ä»¶ ï¼Œæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–‡ä»¶ç±»å‹**, æ¯”å¦‚ App.vue å°±æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¹ç»„ä»¶ã€‚ 2ï¼‰å¸¸è§çš„ç»„ä»¶ï¼š é¡µé¢çº§åˆ«çš„ç»„ä»¶ é¡µé¢çº§åˆ«çš„ç»„ä»¶ï¼Œé€šå¸¸æ˜¯ views ç›®å½•ä¸‹çš„.vueç»„ä»¶ï¼Œæ˜¯ç»„æˆæ•´ä¸ªé¡¹ç›®çš„å„ä¸ªä¸»è¦é¡µé¢ ä¸šåŠ¡ä¸Šå¯å¤ç”¨çš„åŸºç¡€ç»„ä»¶ è¿™ä¸€ç±»ç»„ä»¶é€šå¸¸æ˜¯åœ¨ä¸šåŠ¡ä¸­è¢«å„ä¸ªé¡µé¢å¤ç”¨çš„ç»„ä»¶ï¼Œè¿™ä¸€ç±»ç»„ä»¶é€šå¸¸éƒ½å†™åˆ° components ç›®å½•ä¸‹ï¼Œç„¶åé€šè¿‡importåœ¨å„ä¸ªé¡µé¢ä¸­ä½¿ç”¨ 3ï¼‰ç»„ä»¶çš„ç»„æˆéƒ¨åˆ† template : ç»„ä»¶çš„HTMLéƒ¨åˆ† script: ç»„ä»¶çš„JSè„šæœ¬ (ä½¿ç”¨ES6è¯­æ³•ç¼–å†™) style: ç»„ä»¶çš„CSSæ ·å¼ 1234567891011121314151617181920212223&lt;!-- 1.template ä»£è¡¨htmlç»“æ„, templateä¸­çš„å†…å®¹å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´  ç¼–å†™é¡µé¢é™æ€éƒ¨åˆ† å°±æ˜¯ viewéƒ¨åˆ† --&gt; &lt;template&gt; &lt;div&gt;æµ‹è¯•é¡µé¢... &lt;/div&gt; &lt;/template&gt; &lt;!-- 2.ç¼–å†™vue.jsä»£ç  --&gt; &lt;script&gt; //å¯ä»¥å¯¼å…¥å…¶ç»„ä»¶ // import Header from &#x27;../components/header.vue&#x27; //é»˜è®¤å†™æ³•, è¾“å‡ºè¯¥ç»„ä»¶ export default &#123; name:&quot;Home&quot;, // ç»„ä»¶åç§°ï¼Œç”¨äºä»¥åè·¯ç”±è·³è½¬ data() &#123;// å½“å‰ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨çš„æ•°æ® return &#123;&#125; &#125;, methods: &#123;&#125; &#125; &lt;/script&gt; &lt;!-- 3.ç¼–å†™å½“å‰ç»„ä»¶çš„æ ·å¼ä»£ç  --&gt; &lt;style scoped&gt; /* é¡µé¢æ ·å¼ åŠ ä¸Šscoped è¡¨ç¤ºæ ·å¼å°±åªåœ¨å½“å‰ç»„ä»¶æœ‰æ•ˆ*/ &lt;/style&gt; 4. é¡¹ç›®è¿è¡Œæµç¨‹4.1 main.jsé¡¹ç›®è¿è¡Œ ä¼šåŠ è½½å…¥å£æ–‡ä»¶ main.js 1234567891011121314151617/* htmlæ–‡ä»¶ä¸­ï¼Œé€šè¿‡script src = &#x27;xxx&#x27;æ ‡ç­¾å¼•å…¥jsæ–‡ä»¶ã€‚ è€Œvueä¸­ï¼Œé€šè¿‡ import å˜é‡å from æ–‡ä»¶è·¯å¾„ çš„æ–¹å¼å¯¼å…¥æ–‡ä»¶ï¼Œä¸å…‰å¯ä»¥å¯¼å…¥jsæ–‡ä»¶ã€‚ 1.å˜é‡å: æŒ‡çš„æ˜¯ä¸ºå¯¼å…¥çš„æ–‡ä»¶èµ·ä¸€ä¸ªåç§°ï¼Œä¸æ˜¯æŒ‡å¯¼å…¥çš„æ–‡ä»¶çš„åç§°ï¼Œç›¸å½“äºå˜é‡åã€‚ 2.æ–‡ä»¶è·¯å¾„: æŒ‡çš„æ˜¯æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ */import Vue from &#x27;vue&#x27; import App from &#x27;./App.vue&#x27; import router from &#x27;./router&#x27; //å…³é—­å¯åŠ¨æç¤º Vue.config.productionTip = false //åˆ›å»ºVueå®ä¾‹ new Vue(&#123; router, //ä¸ºæ•´ä¸ªé¡¹ç›®æ·»åŠ è·¯ç”± render: h =&gt; h(App) //è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ES6è¯­æ³•,ä½œç”¨æ˜¯ç”Ÿæˆæ¨¡æ¿: App = App.vue &#125;).$mount(&#x27;#app&#x27;) //æŒ‚è½½çš„æ˜¯App.vueç»„ä»¶ä¸­çš„idä¸ºappçš„åŒºåŸŸ 4.2 App.vueApp.vue æ˜¯vueé¡¹ç›®çš„ä¸»ç»„ä»¶ï¼Œæ˜¯é¡µé¢å…¥å£æ–‡ä»¶ ï¼Œæ‰€æœ‰é¡µé¢éƒ½æ˜¯åœ¨App.vueä¸‹è¿›è¡Œåˆ‡æ¢çš„ 123456789101112&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;!--æŒ‚è½½çš„æ˜¯è¿™ä¸ªdiv--&gt; &lt;div id=&quot;nav&quot;&gt; &lt;!--è¿™é‡Œæ˜¯ä¸¤ä¸ªè·¯ç”±å¯¼èˆªé“¾æ¥--&gt; &lt;!--1. to=&quot;/&quot; é¡¹ç›®æ ¹è·¯å¾„ è·³è½¬çš„æ˜¯é¦–é¡µ--&gt; &lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt; | &lt;!--2. to=&quot;/about&quot; ç‚¹å‡»AboutæŒ‰é’®,è·³è½¬åˆ°aboutç»„ä»¶--&gt; &lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt; &lt;/div&gt; &lt;!--router-view çš„ä½œç”¨æ˜¯ æ ¹æ®è®¿é—®çš„è·¯å¾„,æ¸²æŸ“è·¯å¾„åŒ¹é…åˆ°çš„è§†å›¾ç»„ä»¶--&gt; &lt;router-view/&gt; &lt;/div&gt; &lt;/template&gt; 4.3 router è·¯ç”±æ‰¾åˆ°è·¯ç”±æ–‡ä»¶,æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„è·¯ç”±é…ç½® 1234567891011121314151617181920212223242526272829// å¼•å…¥æ‰€éœ€æ–‡ä»¶ import Vue from &#x27;vue&#x27;//vueåº“ import VueRouter from &#x27;vue-router&#x27;//vue-routeråº“ import Home from &#x27;../views/Home.vue&#x27; //é¦–é¡µ //ä½¿ç”¨è·¯ç”±åŠŸèƒ½ Vue.use(VueRouter)//åˆ›å»ºè·¯ç”±è§„åˆ™ const routes = [&#123; path: &#x27;/&#x27;, //è·¯å¾„ name: &#x27;Home&#x27;, //åç§° component: Home //ç»„ä»¶ Home.vue &#125;, &#123; path: &#x27;/about&#x27;, name: &#x27;About&#x27;, component: () =&gt; import ( /* webpackChunkName: &quot;about&quot; */ &#x27;../views/About.vue&#x27;) &#125;] //åˆ›å»ºè·¯ç”±ç®¡ç†å™¨,ç®¡ç†routes const router = new VueRouter(&#123; routes &#125;)//export ç”¨æ¥å¯¼å‡ºæ¨¡å— routerå°±ä»£è¡¨äº†æ•´ä¸ªè·¯ç”±æ–‡ä»¶ export default router 4.4 Home.vueç»„ä»¶ é»˜è®¤è®¿é—®çš„æ˜¯Home.vue é¦–é¡µ 1234567891011121314151617&lt; template&gt; &lt;div class = &quot;home&quot;&gt; é¦–é¡µçš„logo &lt; img alt = &quot;Vue logo&quot; src = &quot;../assets/logo.png&quot; &gt; &lt; HelloWorld msg = &quot;Welcome to Your Vue.js App&quot; / &gt; &lt;/div&gt; &lt;/template&gt;&lt;script&gt; //å¯¼å…¥äº†ä¸€ä¸ªç»„ä»¶ HelloWorld.vue @ç¬¦å·è¡¨ç¤º srcè¿™ä¸ªç›®å½• import HelloWorld from &#x27;@/components/HelloWorld.vue&#x27; export default &#123; name: &#x27;Home&#x27;, components: &#123; HelloWorld &#125; &#125;&lt;/script&gt; HelloWorld.vue ç»„ä»¶é¡µé¢ 12345678910111213141516171819202122232425&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt; &lt;p&gt; For a guide and recipes on how to configure / customize this project, &lt;br&gt; check out the &lt;a href=&quot;https://cli.vuejs.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt; vue-cli documentation &lt;/a&gt; &lt;/p&gt; &lt;h3&gt; Installed CLI Plugins &lt;/h3&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &#x27;HelloWorld&#x27;, props: &#123; msg: String &#125; &#125;&lt;/script&gt; 5. ç»„ä»¶çš„ä½¿ç”¨æ¡ˆä¾‹5.1 åˆ›å»ºHeader.vueç»„ä»¶ åœ¨components ç›®å½•ä¸‹åˆ›å»º Header.vue ç¼–å†™Header.vue 123456789101112131415161718192021222324252627&lt;template&gt; &lt;div class=&quot;header&quot;&gt; &#123;&#123;msg&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; //JS éƒ¨åˆ† export default &#123; name: &quot;Header&quot;, //ç»„ä»¶çš„åç§° data() &#123; //dataå‡½æ•° return &#123; msg: &quot;è¿™æ˜¯ä¸€ä¸ªHeaderç»„ä»¶&quot; &#125; &#125;, &#125;&lt;/script&gt;//scoped è¡¨ç¤ºå½“å‰çš„æ ·å¼,åªä½œç”¨ä¸å½“å‰ç»„ä»¶ä¸­çš„ template è§†å›¾.&lt;style scoped&gt; .header &#123; height: 100px; line-height: 100px; background-color: #eee;text-align: center; color: blue; &#125;&lt;/style&gt; 5.2 å¼•å…¥ Headerç»„ä»¶ä¿®æ”¹Home.vue 1234567891011121314151617181920&lt;template&gt; &lt;div class=&quot;home&quot;&gt; &lt;img alt=&quot;Vue logo&quot; src=&quot;../assets/logo.png&quot;&gt; &lt;!-- &lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot;/&gt; --&gt; &lt;Header/&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; // @ is an alias to /src //import HelloWorld from &#x27;@/components/HelloWorld.vue&#x27; import Header from &#x27;@/components/Header.vue&#x27;; export default &#123; name: &#x27;Home&#x27;, components: &#123; //HelloWorld Header &#125; &#125;&lt;/script&gt; 5.3 ç»„ä»¶çš„ä¼ å‚props : æ˜¯ç»„ä»¶ä¸­çš„å±æ€§, è¡¨ç¤ºç»„ä»¶å¯ä»¥æ¥å—å‚æ•°, 12345678910111213141516&lt;template&gt; &lt;div id=&quot;Header&quot; class=&quot;header&quot;&gt; &#123;&#123;msg&#125;&#125; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &quot;Header&quot;, //ç»„ä»¶åç§°,ç”¨äºè·¯ç”±çš„è·³è½¬ props:[&#x27;msg&#x27;] &#125;; &lt;/script&gt;// scoped è¡¨ç¤ºå½“å‰styleçš„æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶çš„templateä»£ç ä¸­ï¼Œå…¶ä»–åœ°æ–¹ä¸ä¼šè¢«å½±å“&lt;style scoped&gt; .header &#123; height: 100px; line-height: 100px; background-color: #eee;text-align: center; color: blue; &#125;&lt;/style&gt; 6. Element-UIä»‹ç»element-ui æ˜¯é¥¿äº†ä¹ˆå‰ç«¯å‡ºå“çš„åŸºäº Vue.jsçš„ åå°ç»„ä»¶åº“ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜è¿›è¡Œé¡µé¢å¿«é€Ÿå¸ƒå±€å’Œæ„å»ºElement-UIå®˜æ–¹ç«™ç‚¹ï¼šhttps://element.eleme.cn/#/zh-CN 7. Element-UIä½¿ç”¨7.1 å‘½ä»¤è¡Œæ–¹å¼å®‰è£… åˆ›å»º ä¸€ä¸ªæ–°çš„é¡¹ç›® å½“å‰é¡¹ç›®ä¸‹æ‰“å¼€ç»ˆç«¯, å®‰è£…ä¾èµ–åŒ… ,æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ 1npm i element-ui -S æ‰“å¼€ main.js , å¯¼å…¥Element-UI ç›¸å…³èµ„æº. main.jsæ˜¯å·¥ç¨‹çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨æ­¤æ–‡ä»¶ä¸­åŠ è½½äº†å¾ˆå¤šç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œå¦‚ï¼šElement-UIã€Base64ã€ VueRouterç­‰ã€‚ 12345678//å¯¼å…¥ç»„ä»¶åº“ import ElementUI from &#x27;element-ui&#x27; //å¯¼å…¥ç»„ä»¶ç›¸å…³æ ·å¼ import &#x27;element-ui/lib/theme-chalk/index.css&#x27; //é…ç½®Vueæ’ä»¶ å°†Elå®‰è£…åˆ°Vueä¸Š Vue.use(ElementUI); å¤åˆ¶Element æŒ‰é’®æ ·å¼ åˆ°app.vueæ–‡ä»¶çš„ templateä¸‹ 12345678910111213141516171819&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- æµ‹è¯•elementUI --&gt; &lt;el-row&gt; &lt;el-button&gt;é»˜è®¤æŒ‰é’®&lt;/el-button&gt; &lt;el-button type=&quot;primary&quot;&gt;ä¸»è¦æŒ‰é’®&lt;/el-button&gt; &lt;el-button type=&quot;success&quot;&gt;æˆåŠŸæŒ‰é’®&lt;/el-button&gt; &lt;el-button type=&quot;info&quot;&gt;ä¿¡æ¯æŒ‰é’®&lt;/el-button&gt; &lt;el-button type=&quot;warning&quot;&gt;è­¦å‘ŠæŒ‰é’®&lt;/el-button&gt; &lt;el-button type=&quot;danger&quot;&gt;å±é™©æŒ‰é’®&lt;/el-button&gt; &lt;/el-row&gt; &lt;div id=&quot;nav&quot;&gt; &lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt;| &lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt; &lt;/div&gt; &lt;router-view /&gt; &lt;/div&gt;&lt;/template&gt; å¯åŠ¨é¡¹ç›® npm run serve, æŸ¥çœ‹é¡µé¢ 7.2 Vue-CLIå·¥ç¨‹æ”¹é€  åˆ é™¤components ç›®å½•ä¸‹çš„ HelloWord.vueç»„ä»¶ åˆ é™¤App.vueä¸­çš„éƒ¨åˆ†å†…å®¹,åªä¿ç•™å¦‚ä¸‹éƒ¨åˆ† 123456&lt;template&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;/template&gt; &lt;style&gt; &lt;/style&gt; åˆ é™¤routeræ–‡ä»¶ä¸‹çš„è·¯ç”±æ–‡ä»¶ index.jséƒ¨åˆ†å†…å®¹,åªä¿ç•™å¦‚ä¸‹éƒ¨åˆ† 12345678910import Vue from &#x27;vue&#x27;import VueRouter from &#x27;vue-router&#x27;Vue.use(VueRouter) const routes = [] const router = new VueRouter(&#123; routes&#125;) export default router åˆ é™¤viewsç›®å½•ä¸‹çš„ About.vue ä¸ Home.vue 7.3 å®‰è£…axios npmå®‰è£…ï¼šä½¿ç”¨npmä¸‹è½½axiosåŒ… 1npm i axios åœ¨main.jsæ–‡ä»¶ä¸­å¯¼å…¥axios ç›¸å…³èµ„æº 12345//å¼•å…¥axios import axios from &#x27;axios&#x27; //Vueå¯¹è±¡ä½¿ç”¨axios Vue.prototype.axios = axios; 8. ç”¨æˆ·ç™»å½•ç•Œé¢åˆ¶ä½œ8.1 Dialogå¯¹è¯æ¡†ç»„ä»¶æˆ‘ä»¬å¯ä»¥ç”¨Dialogåˆ¶ä½œä¸€ä¸ªç™»é™†å¼¹çª—,é€‰æ‹©è‡ªå®šä¹‰å†…å®¹ 123456789101112131415161718192021222324&lt;el-dialog title=&quot;æ”¶è´§åœ°å€&quot; :visible.sync=&quot;dialogFormVisible&quot;&gt; &lt;el-form :model=&quot;form&quot;&gt; &lt;el-form-item label=&quot;æ´»åŠ¨åç§°&quot; :label-width=&quot;formLabelWidth&quot;&gt; &lt;el-input v-model=&quot;form.name&quot; autocomplete=&quot;off&quot;&gt; &lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-form-item label=&quot;æ´»åŠ¨åŒºåŸŸ&quot; :label-width=&quot;formLabelWidth&quot;&gt; &lt;el-select v-model=&quot;form.region&quot; placeholder=&quot;è¯·é€‰æ‹©æ´»åŠ¨åŒºåŸŸ&quot;&gt; &lt;el-option label=&quot;åŒºåŸŸä¸€&quot; value=&quot;shanghai&quot;&gt; &lt;/el-option&gt; &lt;el-option label=&quot;åŒºåŸŸäºŒ&quot; value=&quot;beijing&quot;&gt; &lt;/el-option&gt; &lt;/el-select&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt; &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt; å– æ¶ˆ &lt;/el-button&gt; &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = false&quot;&gt; ç¡® å®š &lt;/el-button&gt; &lt;/div&gt;&lt;/el-dialog&gt; 8.2 åˆ›å»ºlogin.vue ç»„ä»¶ åœ¨components ä¸‹åˆ›å»ºlogin.vue å°†Diglogç»„ä»¶çš„å†…å®¹,æ‹·è´åˆ°login.vue,è¿›è¡Œä¿®æ”¹: 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;el-dialog title=&quot;ç™»å½•&quot; :visible.sync=&quot;dialogFormVisible&quot;&gt; &lt;el-form&gt; &lt;el-form-item label=&quot;ç”¨æˆ·åç§°&quot; :label-width=&quot;formLabelWidth&quot;&gt; &lt;el-input autocomplete=&quot;off&quot;&gt; &lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-form-item label=&quot;ç”¨æˆ·å¯†ç &quot; :label-width=&quot;formLabelWidth&quot;&gt; &lt;el-input autocomplete=&quot;off&quot;&gt; &lt;/el-input&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt; &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = false&quot;&gt; ç™»å½• &lt;/el-button&gt; &lt;/div&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script&gt; export default &#123; data() &#123; return &#123; formLabelWidth: &quot;120px&quot;, //å®½åº¦ dialogFormVisible: true &#125;; &#125; &#125;; &lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt; 8.3 é…ç½®è·¯ç”±123456789101112131415161718192021import Vue from &quot;vue&quot;;import VueRouter from &quot;vue-router&quot;;import Login from &quot;@/components/Login.vue&quot;Vue.use(VueRouter);const routes = [//è®¿é—® /,ä¹Ÿè·³è½¬åˆ°login &#123; path: &#x27;/&#x27;, redirect: &#x27;login&#x27; //é‡å®šå‘éƒ½login &#125;,//ç™»å½• &#123; path: &#x27;/login&#x27;, name: &#x27;login&#x27;, component: Login&#125;];const router = new VueRouter(&#123; routes,&#125;);export default router; 8.4 ä¿®æ”¹App.vue12345678&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- router-view çš„ä½œç”¨æ˜¯æ ¹æ®è®¿é—®çš„è·¯å¾„,æ¸²æŸ“è·¯å¾„åŒ¹é…åˆ°çš„è§†å›¾ç»„ä»¶ --&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt; &lt;/template&gt; &lt;style&gt; &lt;/style&gt; 8.5 ç¼–å†™ç™»å½•åŠŸèƒ½ å»æ‰å…³é—­æŒ‰é’®, æ·»åŠ ä¸€ä¸ªå±æ€§ :show-close&#x3D;â€falseâ€ 1&lt;el-dialog title=&quot;ç™»å½•&quot; :show-close=&quot;false&quot; :visible.sync=&quot;dialogFormVisible&quot;&gt; ä¿®æ”¹ç™»é™†è§¦å‘äº‹ä»¶ 1&lt;el-button type=&quot;primary&quot; @click=&quot;login&quot;&gt;ç™»å½•&lt;/el-button&gt; åŒå‘æ•°æ®ç»‘å®š data ä¸­å®šä¹‰æ•°æ® 1234567data() &#123; return &#123; formLabelWidth: &quot;120px&quot;, //å®½åº¦ dialogFormVisible: true, //æ˜¯å¦å…³é—­å¯¹è¯æ¡† user: &#123; username: &quot;&quot;, password: &quot;&quot; &#125;, //ç™»å½•æ•°æ® &#125;; &#125;, ä½¿ç”¨ v-model, å°†è§†å›¾ä¸æ¨¡å‹è¿›è¡Œç»‘å®š 12345678&lt;el-form&gt; &lt;el-form-item label=&quot;ç”¨æˆ·åç§°&quot; :label-width=&quot;formLabelWidth&quot;&gt; &lt;el-input v-model=&quot;user.username&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;el-form-item label=&quot;ç”¨æˆ·å¯†ç &quot; :label-width=&quot;formLabelWidth&quot;&gt; &lt;el-input v-model=&quot;user.password&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; ç¼–å†™loginæ–¹æ³• 123456789101112131415161718192021222324methods: &#123; login() &#123; //å®šä¹‰å¸¸é‡ä¿å­˜ url const url = &quot;http&quot;; //å‘é€è¯·æ±‚ this.axios.get(url, &#123; //æºå¸¦å‚æ•° params: &#123; username: this.user.username, password: this.user.password, &#125;, &#125;).then((res) = &gt;&#123; console.log(); //æˆåŠŸå°±å°†å¯¹è¯æ¡†å…³é—­ this.dialogFormVisible = false; &#125;). catch((error) = &gt;&#123; //å‡ºç°é”™è¯¯ä½¿ç”¨ElementUIæä¾›çš„æ¶ˆæ¯æç¤º this.$message.error(&quot;å¯¹ä¸èµ·! ç™»å½•é”™è¯¯!&quot;); &#125;); &#125;,&#125;, 8.6 Postmanæ­å»ºmock server Mock serverå°±æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨Mock serverå¯ä»¥æ¨¡æ‹Ÿåå°æ¥å£,å¯¹è¯·æ±‚è¿›è¡Œå“åº”. åœ¨å‰åç«¯åˆ†ç¦»çš„å¼€å‘ä¸­ å‰ç«¯åˆ©ç”¨mockeserveræ¨¡æ‹Ÿå‡ºå¯¹åº”æ¥å£ï¼Œæ‹¿åˆ°è¿”å›æ•°æ®æ¥è°ƒè¯•ï¼Œæ— éœ€ç­‰åç«¯å¼€å‘äººå‘˜å®Œæˆå·¥ä½œã€‚ postmanæ¨¡æ‹Ÿå‡ºä¸€ä¸ªserver æ­¥éª¤: ä½¿ç”¨postmanæ¨¡æ‹Ÿå‡ºä¸€ä¸ªserver æ‰“å¼€å¦‚ä¸‹çª—ä½“ï¼Œåˆ›å»ºä¸€ä¸ªä¼ªæœåŠ¡ ç¬¬ä¸€æ­¥ ç¬¬äºŒæ­¥ ç¬¬ä¸‰æ­¥ 1const url = &quot;å¤åˆ¶ä¸Šé¢çš„åœ°å€/login&quot;; 8.7 ç™»å½•æˆåŠŸåè·³è½¬ åœ¨jsä¸­è®¾ç½®è·³è½¬ï¼Œå¸¸ç”¨çš„ä¸€ç§æ–¹æ³•æ˜¯ this.$router.push 1234567891011121314151617181920212223242526methods: &#123; login() &#123; //å®šä¹‰å¸¸é‡ä¿å­˜ url const url = &quot;https://33284b33-e976-4124-a3a0-17044addc1e1.mock.pstmn.io/login&quot;; //å‘é€è¯·æ±‚ this.axios.get(url, &#123; //æºå¸¦å‚æ•° params: &#123; username: this.user.username, password: this.user.password, &#125;, &#125;).then((res) = &gt;&#123; console.log(res.data); alert(&quot;ç™»å½•æˆåŠŸ!&quot;); //æˆåŠŸå°±å°†å¯¹è¯æ¡†å…³é—­ this.dialogFormVisible = false; //è·³è½¬é¡µé¢,å‰ç«¯è·³è½¬é¡µé¢å¿…é¡»ä½¿ç”¨è·¯ç”±,ä½¿ç”¨$routerå¯¹è±¡ä¸­çš„pushæ–¹æ³• this.$router.push(&#x27;/index&#x27;); &#125;). catch((error) = &gt;&#123; //å‡ºç°é”™è¯¯ä½¿ç”¨ElementUIæä¾›çš„æ¶ˆæ¯æç¤º this.$message.error(&quot;å¯¹ä¸èµ·! ç™»å½•é”™è¯¯!&quot;); &#125;); &#125;,&#125;, 9. è·¨åŸŸé—®é¢˜9.1 å‡ºç°è·¨åŸŸé—®é¢˜å½“æˆ‘ä»¬åœ¨å‰ç«¯é¡¹ç›®ä¸­,å‘åç«¯å‘é€è¯·æ±‚çš„è·å–è¯¾ç¨‹æ•°æ®çš„æ—¶å€™,å‡ºç°äº†è·¨åŸŸé—®é¢˜: å·²è¢«CORSç­–ç•¥é˜»æ­¢ï¼šè¯·æ±‚çš„èµ„æºä¸Šæ²¡æœ‰â€™ Access-Control-Allow-Originâ€™æ ‡å¤´ï¼ˆè·¨åŸŸè¯·æ±‚å¤±è´¥ï¼‰ 1Access to XMLHttpRequest at &#x27;http://localhost:8080/lagou_edu_home/course? methodName=findCourseList&#x27; from origin &#x27;http://localhost:8088&#x27; has been blocked by CORS policy: No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource. 9.2 ä»€ä¹ˆæ˜¯è·¨åŸŸè·¨åŸŸæ˜¯æŒ‡é€šè¿‡JSåœ¨ä¸åŒçš„åŸŸä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“æˆ–é€šä¿¡ï¼Œæ¯”å¦‚ç”¨ajaxå‘ä¸€ä¸ªä¸åŒçš„åŸŸè¯·æ±‚æ•°æ®ï¼Œåªè¦åè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„åŸŸ,æµè§ˆå™¨å°±ä¸å…è®¸è·¨åŸŸè¯·æ±‚ã€‚ è·¨åŸŸçš„å‡ ç§å¸¸è§æƒ… 9.3 è§£å†³è·¨åŸŸé—®é¢˜è·¨åŸŸçš„å…è®¸ä¸»è¦ç”±æœåŠ¡å™¨ç«¯æ§åˆ¶ã€‚æœåŠ¡å™¨ç«¯é€šè¿‡åœ¨å“åº”çš„ header ä¸­è®¾ç½® Access-Control-Allow- Origin åŠç›¸å…³ä¸€ç³»åˆ—å‚æ•°ï¼Œæä¾›è·¨åŸŸè®¿é—®çš„å…è®¸ç­–ç•¥ è®¾ç½®å“åº”å¤´ä¸­çš„å‚æ•°æ¥å…è®¸è·¨åŸŸåŸŸè¯·æ±‚: Access-Control-Allow-Credentials Access-Control-Allow-Origin æ ‡è¯†å…è®¸è·¨åŸŸçš„è¯·æ±‚æœ‰å“ªäº› 1ï¼‰åœ¨POMæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ– 123456&lt;!-- è§£å†³è·¨åŸŸé—®é¢˜æ‰€éœ€ä¾èµ– --&gt; &lt;dependency&gt; &lt;groupId&gt;com.thetransactioncompany&lt;/groupId&gt; &lt;artifactId&gt;cors-filter&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;/dependency&gt; 1ï¼‰åœ¨web.xmlä¸­ é…ç½®è·¨åŸŸ filter 123456789&lt;!--é…ç½®è·¨åŸŸè¿‡æ»¤å™¨--&gt; &lt;filter&gt; &lt;filter-name&gt;corsFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.thetransactioncompany.cors.CORSFilter&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;corsFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"è½¦ç«™","slug":"è½¦ç«™ï¼ˆå‰ä»–è°±ï¼‰","date":"2021-03-01T02:54:09.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/03/01/è½¦ç«™ï¼ˆå‰ä»–è°±ï¼‰/","link":"","permalink":"http://yournotes.cn/2021/03/01/%E8%BD%A6%E7%AB%99%EF%BC%88%E5%90%89%E4%BB%96%E8%B0%B1%EF%BC%89/","excerpt":"ã€Šè½¦ç«™ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šè½¦ç«™ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹è®¾è®¡é—®é¢˜ï¼š384.æ‰“ä¹±æ•°ç»„","slug":"æ‰“ä¹±æ•°ç»„","date":"2021-02-28T17:41:38.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2021/03/01/æ‰“ä¹±æ•°ç»„/","link":"","permalink":"http://yournotes.cn/2021/03/01/%E6%89%93%E4%B9%B1%E6%95%B0%E7%BB%84/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/shuffle-an-array/ ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè®¾è®¡ç®—æ³•æ¥æ‰“ä¹±ä¸€ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„æ•°ç»„ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/shuffle-an-array/ ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè®¾è®¡ç®—æ³•æ¥æ‰“ä¹±ä¸€ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„æ•°ç»„ã€‚ å®ç° Solution class:Solution(int[] nums) ä½¿ç”¨æ•´æ•°æ•°ç»„ nums åˆå§‹åŒ–å¯¹è±¡int[] reset() é‡è®¾æ•°ç»„åˆ°å®ƒçš„åˆå§‹çŠ¶æ€å¹¶è¿”å›int[] shuffle() è¿”å›æ•°ç»„éšæœºæ‰“ä¹±åçš„ç»“æœ ç¤ºä¾‹ï¼š 12345è¾“å…¥[&quot;Solution&quot;, &quot;shuffle&quot;, &quot;reset&quot;, &quot;shuffle&quot;][[[1, 2, 3]], [], [], []]è¾“å‡º[null, [3, 1, 2], [1, 2, 3], [1, 3, 2]] è§£é‡Š 1234Solution solution = new Solution([1, 2, 3]);solution.shuffle(); // æ‰“ä¹±æ•°ç»„ [1,2,3] å¹¶è¿”å›ç»“æœã€‚ä»»ä½• [1,2,3]çš„æ’åˆ—è¿”å›çš„æ¦‚ç‡åº”è¯¥ç›¸åŒã€‚ä¾‹å¦‚ï¼Œè¿”å› [3, 1, 2]solution.reset(); // é‡è®¾æ•°ç»„åˆ°å®ƒçš„åˆå§‹çŠ¶æ€ [1, 2, 3] ã€‚è¿”å› [1, 2, 3]solution.shuffle(); // éšæœºè¿”å›æ•°ç»„ [1, 2, 3] æ‰“ä¹±åçš„ç»“æœã€‚ä¾‹å¦‚ï¼Œè¿”å› [1, 3, 2] æç¤ºï¼š 1 &lt;&#x3D; nums.length &lt;&#x3D; 200-106 &lt;&#x3D; nums[i] &lt;&#x3D; 106nums ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ å”¯ä¸€çš„æœ€å¤šå¯ä»¥è°ƒç”¨ 5 * 104 æ¬¡ reset å’Œ shuffle è§£æ³•ä¸€ï¼šæš´åŠ›é¢˜ç›®æ„æ€æ˜¯è®©æˆ‘ä»¬å®ç°ä¸€ä¸ªç±»ï¼Œå®ƒæµ‹è¯•å°±ä¼šåˆ›å»ºå¯¹è±¡å¹¶ä¸”è°ƒç”¨æ‰“ä¹±æ–¹æ³•ä¸é‡ç½®æ–¹æ³•ã€‚æ—¢ç„¶æœ‰é‡ç½®çš„è¯æ‰“ä¹±çš„ä¿®æ”¹ä¸æ˜¯åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œã€‚ç¬¬ä¸€æ˜¯æ–°æ•°ç»„ç¬¬äºŒæ˜¯éšæœºä½ç½®ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ArrayListä¸Randomæ¥å®ç° ä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334class Solution &#123; // åŸæ•°ç»„ã€æ‰“ä¹±è¿”å›æ•°ç»„ã€éšæœºæ•° private int[] nums; private int[] result; private Random rand = new Random(); // æ„é€ å™¨åˆå§‹åŒ–åŸæ•°ç»„ä¸æ‰“ä¹±æ•°ç»„çš„ç©ºé—´ public Solution(int[] nums) &#123; this.nums = nums; result = new int[nums.length]; &#125; // é‡ç½®æ–¹æ³•ï¼šå³è¿”å›åŸæ•°ç»„ public int[] reset() &#123; return nums; &#125; // æ‰“ä¹±æ–¹æ³•ï¼šarrayListéšæœºå–[0,size) public int[] shuffle() &#123; //è·å–åŸæ•°ç»„çš„arrayList List&lt;Integer&gt; arrayList = getArrayList(); for (int i = 0; i &lt; nums.length; i++) &#123; int index = rand.nextInt(arrayList.size()); result[i] = arrayList.get(index); arrayList.remove(index); &#125; return result; &#125; // è·å–Listæ–¹æ³• private List&lt;Integer&gt; getArrayList() &#123; List&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; arrayList.add(nums[i]); &#125; return arrayList; &#125;&#125; æ—¶é—´å¤æ‚åº¦ï¼šæœ€å·®æœ‰(51024)(n&#x2F;2)*nï¼Œæ€»ä½“æ¥è¯´O(n^2)çš„æ—¶é—´å¤æ‚åº¦ç©ºé—´å¤æ‚åº¦ï¼šç”±äºè¦ç”¨é¢å¤–æ•°ç»„æ— æ³•é¿å…çš„O(n) è§£æ³•äºŒï¼šä¼˜åŒ–ä¸Šé¢çš„è§£æ³•æ•ˆç‡ç¡®å®æ˜¯ä¸å¤Ÿçš„ï¼Œå…¶å®ä¹‹å‰åšäº†é‚£ä¹ˆä¸€ç³»åˆ—æ•°ç»„çš„ç®—æ³•é¢˜ï¼Œè™½ç„¶éƒ½æ˜¯åˆçº§åˆé›†çš„ä½†æ˜æ˜¾æˆ‘ä»¬èƒ½æ˜ç™½ä¸€ä¸ªå…³äºæ•°ç»„åŸåœ°å˜æ¢çš„ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯é€šè¿‡äº¤æ¢å‡å°‘è§„æ¨¡ä½†è¿™ä¸€é¢˜å¹¶ä¸èƒ½è®©æˆ‘ä»¬é€šè¿‡äº¤æ¢æ¥å‡å°‘ä¸€åŠçš„è§„æ¨¡ï¼Œå› ä¸ºéšæœºå–å†ä¸åé¢çš„äº¤æ¢è™½ç„¶èƒ½è¾¾åˆ°ä¸€åŠçš„å¤æ‚åº¦å¹¶å…¨å‘˜éšæœºæ‰“ä¹±ï¼Œä½†å¹¶ä¸æ˜¯å®Œå…¨éšæœºã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯è¦éå†å®Œæ•´æ¯ä¸ªè¿›è¡Œrandomï¼Œè¿™æ ·åšè¿˜æ˜¯æœ‰ä¸ªå¥½å¤„å°±æ˜¯ä¸éœ€è¦arrayListäº†è¿™æ ·å¯ä»¥å°†n^2çš„å¤æ‚åº¦é™ä¸ºn ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526class Solution &#123; private int[] nums; private int[] result; Random random = new Random(); public Solution(int[] nums) &#123; this.nums = nums; result = nums.clone(); &#125; public int[] reset() &#123; result = nums; nums = nums.clone(); return result; &#125; public int[] shuffle() &#123; for (int i = 0; i &lt; result.length; i++) &#123; int index = random.nextInt(result.length - i) + i; int temp = result[index]; result[index] = result[i]; result[i] = temp; &#125; return result; &#125;&#125; ç©ºé—´å¤æ‚åº¦ï¼šO(n)æ—¶é—´å¤æ‚åº¦ï¼šO(n) æ€»ç»“è¿™ä¸€é¢˜ä¸»è¦éœ€è¦è€ƒè™‘æ‰“ä¹±æ˜¯ä¸€ä¸ªä»€ä¹ˆçŠ¶æ€ï¼Œæ“ä½œé€»è¾‘æœ‰æ²¡æœ‰å½±å“åˆ°â€œéšæœºâ€ï¼Œå…³äºè§£æ³•ä¸€ä¸äºŒé‡‡ç”¨äº†ä¸¤ç§æ–¹å¼è®°å½•åŸæ•°ç»„ä¸æ‰“ä¹±çš„è¿‡ç¨‹æ•°ç»„ï¼Œç”±äºè§£æ³•ä¸€çš„æ‰“ä¹±èµ‹å€¼è¿‡ç¨‹åˆ†äº†ä¸¤ä¸ªå®¹å™¨listå’Œresultæ‰€ä»¥æ‰å¯ä»¥ç®€ç•¥çš„è¿™æ ·å†™ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ¯æ¬¡éƒ½æ˜¯å®Œå…¨çš„æŒ‰ç…§é˜¶ä¹˜çš„ä¸€ä¸ªé€‰å–æƒ…å†µã€‚è§£æ³•äºŒä¸ºäº†å‡å°‘ç”Ÿæˆlistæ‰€å¸¦æ¥nå€çš„å¤æ‚åº¦ï¼Œé‡‡ç”¨äº¤æ¢ï¼Œè¿™æ ·å°±éœ€è¦åœ¨æ‰“ä¹±æ•°ç»„æœ¬èº«åŸåœ°è¿›è¡Œï¼Œå¦‚æœæ˜¯åœ¨åŸæ•°ç»„å–ä¸€å¯¹èµ‹å€¼åˆ°æ‰“ä¹±æ•°ç»„é‚£ä¹ˆå°±ä¼šå‡ºç°é‡å¤ã€‚è¿˜æœ‰ä¸€ä¸ªç‚¹æ˜¯é‡ç½®æ–¹æ³•çš„ï¼Œæˆ‘åœ¨è§£æ³•ä¸€ç›´æ¥æ˜¯è¿”å›åŸæ•°ç»„åªèƒ½è¯´åœ¨å½“å‰é€»è¾‘ä¸Šæ˜¯æ»¡è¶³ï¼Œä½†æœ€å¥½è¿˜æ˜¯åƒè§£æ³•äºŒä¸€æ ·çœŸæ­£çš„å¯¹æ‰“ä¹±æ•°ç»„è¿›è¡Œè¿˜åŸè€Œä¸æ˜¯æŠŠåŸæ•°ç»„è¿”å›å‡ºå»ã€‚å¹¶ä¸”è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œæˆ‘ä»¬åœ¨æ•°ç»„èµ‹å€¼å®é™…ä¸ŠæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ•´ä¸ªæ—¶å€™æˆ‘ä»¬é‡ç½®äº†resultæ•°ç»„ä½†resultæ•°ç»„æ”¹å˜ä¼šå½±å“åŸæ•°ç»„numsä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æŠŠnumsæŒ‡å‘å¦ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯nums &#x3D; nums.clone();","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"Vue.js","slug":"Vue-js","date":"2021-02-27T04:07:10.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2021/02/27/Vue-js/","link":"","permalink":"http://yournotes.cn/2021/02/27/Vue-js/","excerpt":"","text":"è¶…é•¿è­¦å‘Šï¼ï¼ï¼å–„ç”¨ç›®å½• 1. Vue.jsä»‹ç»1.1 Vue.jsæ˜¯ä»€ä¹ˆ? Vue (è¯»éŸ³ &#x2F;vjuË&#x2F;ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼Œ Vue è¢«è®¾è®¡ ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨. Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€ æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚ è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ï¼šä½œä¸ºæ¸è¿›å¼æ¡†æ¶è¦å®ç°çš„ç›®æ ‡å°±æ˜¯æ–¹ä¾¿é¡¹ç›®å¢é‡å¼€å‘(å³æ’å³ç”¨)ã€‚ å®˜æ–¹ç½‘ç«™: https://cn.vuejs.org/v2/guide/ ä½œè€… å°¤é›¨æºªæ˜¯ä¸­å›½äºº 1.2 ä¸ºç”šä¹ˆä½¿ç”¨Vue? å£°æ˜å¼æ¸²æŸ“: å‰åç«¯åˆ†ç¦»æ˜¯æœªæ¥è¶‹åŠ¿ æ¸è¿›å¼æ¡†æ¶: é€‚ç”¨äºå„ç§ä¸šåŠ¡éœ€æ±‚ ç®€å•æ˜“å­¦: å›½äººå¼€å‘,ä¸­æ–‡æ–‡æ¡£,ä¸å­˜åœ¨è¯­è¨€éšœç¢,æ˜“äºç†è§£å’Œå­¦ä¹  2. Vue.js åŸºç¡€2.1 Vue.jsçš„ä½¿ç”¨ åœ¨htmlé¡µé¢ä½¿ç”¨scriptå¼•å…¥vue.jsçš„åº“å³å¯ä½¿ç”¨ã€‚ 1234è¿œç¨‹CDN &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js&quot;&gt;&lt;/script&gt; æœ¬åœ°&lt;script src=&quot;vue.min.js&quot;&gt;&lt;/script&gt; Vue-CLIè„šæ‰‹æ¶:ä½¿ç”¨vue.jså®˜æ–¹æä¾›çš„CLIè„šæœ¬æ¶å¾ˆæ–¹ä¾¿å»åˆ›å»ºvue.jså·¥ç¨‹é›å½¢ 2.2 å…¥é—¨ç¨‹åºåˆ›å»ºä¸€ä¸ªvuetestç›®å½•, å¹¶ä¸”åœ¨ç›®å½•ä¸‹åˆ›å»º 01_vueå…¥é—¨ç¨‹åº.html æ–‡ä»¶ ä»£ç ç¼–å†™æ­¥éª¤ï¼š å®šä¹‰htmlï¼Œå¼•å…¥vue.js å®šä¹‰app divï¼Œæ­¤åŒºåŸŸä½œä¸ºvueçš„æ¥ç®¡åŒºåŸŸ å®šä¹‰Vueå®ä¾‹ï¼Œæ¥ç®¡appåŒºåŸŸã€‚ å®šä¹‰modelï¼ˆæ•°æ®å¯¹è±¡ï¼‰ åœ¨appä¸­å±•ç¤ºæ•°æ® 12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt; Vueå…¥é—¨ &lt;/title&gt; &lt;!-- 1.åˆ›å»ºHTMLæ–‡ä»¶ï¼Œ å¼•å…¥vue.js æœ‰ä¸¤ç§æ–¹å¼--&gt; &lt;!-- ç¬¬ä¸€ç§ å¼•å…¥ vue.jsçš„CDNåœ°å€ --&gt; &lt;!-- &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js&quot;&gt; &lt;/script&gt; --&gt; &lt;!-- ç¬¬äºŒç§ æœ¬åœ°å¯¼å…¥ --&gt; &lt;script src=&quot;vue.min.js&quot;&gt; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;!-- 2. å®šä¹‰app divï¼Œæ­¤åŒºåŸŸä½œä¸ºvueçš„æ¥ç®¡åŒºåŸŸ --&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- &#123;&#123;&#125;&#125; åŒæ‹¬å·æ˜¯VUEä¸­çš„å·®å€¼è¡¨è¾¾å¼,å°†è¡¨è¾¾å¼çš„å€¼è¾“å‡ºåˆ°HTMLé¡µé¢ --&gt; &#123;&#123;name&#125;&#125; &lt;/div&gt; &lt;/body&gt; &lt;script&gt; //3. åˆ›å»ºvueå®ä¾‹ var VM = new Vue(&#123; //å®šä¹‰ Vueå®ä¾‹æŒ‚è½½çš„å…ƒç´ èŠ‚ç‚¹,è¡¨ç¤ºvueæ¥ç®¡è¯¥div el:&#x27;#app&#x27;, //4.å®šä¹‰modelæ¨¡å‹æ•°æ®å¯¹è±¡ data:&#123;name:&quot;å“ˆæ‹‰å°‘&quot; &#125; &#125;); &lt;/script&gt;&lt;/html&gt; åŒå¤§æ‹¬å·ï¼šæ’å€¼è¡¨è¾¾å¼ é€šå¸¸ç”¨æ¥è·å–Vueå®ä¾‹ä¸­å®šä¹‰çš„æ•°æ®(data) å±æ€§èŠ‚ç‚¹ä¸­ ä¸èƒ½å¤Ÿä½¿ç”¨æ’å€¼è¡¨è¾¾å¼ elï¼šæŒ‚è½½ç‚¹ å®šä¹‰ Vueå®ä¾‹æŒ‚è½½çš„å…ƒç´ èŠ‚ç‚¹,è¡¨ç¤ºvueæ¥ç®¡è¯¥åŒºåŸŸ Vueä¼šç®¡ç†elé€‰é¡¹å‘½ä¸­çš„å…ƒç´ ,åŠå…¶å†…éƒ¨å…ƒç´  elé€‰æ‹©æŒ‚è½½ç‚¹æ—¶,æ˜¯å¦å¯ä»¥ä½¿ç”¨å…¶ä»–é€‰æ‹©å™¨ ? å¯ä»¥,ä½†æ˜¯å»ºè®®ä½¿ç”¨ IDé€‰æ‹©å™¨ æ˜¯å¦å¯ä»¥è®¾ç½®å…¶ä»–çš„DOMå…ƒç´ è¿›è¡Œå…³è” ?å¯ä»¥ä½†æ˜¯å»ºè®®é€‰æ‹©DIV, ä¸èƒ½ä½¿ç”¨HTMLå’ŒBodyæ ‡ç­¾ dataï¼šæ•°æ®å¯¹è±¡ Vueä¸­ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨dataä¸­ dataä¸­å¯ä»¥å†™å¤æ‚ç±»å‹ æ¸²æŸ“å¤æ‚ç±»å‹æ•°æ®çš„æ—¶å€™,éµå®ˆjsè¯­æ³• 123456789101112131415161718192021222324252627282930313233343536&lt;body&gt; &lt;!-- æ­¤åŒºåŸŸä½œä¸ºvueçš„æ¥ç®¡åŒºåŸŸ --&gt; &lt;div id=&quot;app&quot;&gt; &#123;&#123;name&#125;&#125; &lt;br&gt; &#123;&#123;school.name&#125;&#125; &#123;&#123;school.mobile&#125;&#125; &lt;br&gt; &lt;ul&gt; &lt;li&gt; &#123;&#123;names[0]&#125;&#125; &lt;/li&gt; &lt;li&gt; &#123;&#123;names[1]&#125;&#125; &lt;/li&gt; &lt;li&gt; &#123;&#123;names[2]&#125;&#125; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; //åˆ›å»ºvueå®ä¾‹ var VM = new Vue(&#123; el: &#x27;#app&#x27;, data: &#123; name: &quot;é›·éœ†å…«å˜&quot;, //å¯¹è±¡ç±»å‹æ•°æ® author: &#123; name: &quot;æœ¨ç“œç…²é¸¡è„š&quot;, mobile: &quot;1001001&quot; &#125;, //æ•°ç»„ç±»å‹ names: [&quot;å°æ–Œ&quot;, &quot;å¼ ç™¾ä¸‡&quot;, &quot;åˆ˜èƒ½&quot;] &#125; &#125;);&lt;/script&gt; 2.3 å£°æ˜å¼æ¸²æŸ“çš„å¥½å¤„Vueä¸­çš„å£°æ˜å¼æ¸²æŸ“,ç®€å•ç†è§£å°±æ˜¯æˆ‘ä»¬å£°æ˜æ•°æ®,Vueå¸®æˆ‘ä»¬å°†æ•°æ®æ¸²æŸ“åˆ°HTML. 123456789101112131415161718192021222324252627282930313233343536&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt; Document &lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;h2&gt; &#123;&#123;name&#125;&#125; &lt;/h2&gt; &lt;/div&gt; &lt;/body&gt; &lt;!-- jQueryä¸­ï¼Œå¦‚æœ DOM å‘ç”Ÿå˜åŒ–, jsä»£ç ä¹Ÿéœ€è¦åšç›¸åº”çš„æ”¹å˜ï¼Œé«˜è€¦åˆ . &lt;script src=&quot;./js/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(document).ready(function () &#123; $(&quot;#app&quot;).append(&quot;&lt;h2&gt;Hello Word! !&lt;/h2&gt;&quot;); &#125;); &lt;/script&gt; --&gt; &lt;!-- åœ¨ç”¨ Vueä¸­ï¼Œåªéœ€è¦å®šä¹‰å¥½å±•ç¤ºæ•°æ®ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨ DOM åˆé€‚çš„ä½ç½®å°±å¯ä»¥. --&gt; &lt;script src=&quot;js/vue.min.js&quot;&gt; &lt;/script&gt; &lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, //æŒ‚è½½ç‚¹ data: &#123; name: &quot;Hello Word! !&quot;, &#125;, &#125;); &lt;/script&gt;&lt;/html&gt; 2.4 Vueå¸¸ç”¨æŒ‡ä»¤æ ¹æ®å®˜ç½‘çš„ä»‹ç»ï¼ŒæŒ‡ä»¤ æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šå±æ€§ã€‚é€šè¿‡æŒ‡ä»¤æ¥æ“ä½œDOMå…ƒç´  2.4.1 v-text æŒ‡ä»¤ä½œç”¨: è·å–dataæ•°æ®, è®¾ç½®æ ‡ç­¾çš„å†…å®¹.æ³¨æ„: é»˜è®¤å†™æ³•ä¼šæ›¿æ¢å…¨éƒ¨å†…å®¹,ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼ åŒæ‹¬å· å¯ä»¥æ›¿æ¢æŒ‡å®šå†…å®¹. ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- v-text è·å–dataæ•°æ®,è®¾ç½®æ ‡ç­¾å†…å®¹,ä¼šè¦†ç›–ä¹‹å‰çš„å†…å®¹ä½“--&gt; &lt;h2 v-text=&quot;message&quot;&gt; ç™¾åº¦ &lt;/h2&gt; &lt;!-- ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼,ä¸ä¼šè¦†ç›– --&gt; &lt;h2&gt; &#123;&#123;message&#125;&#125;ç™¾åº¦ &lt;/h2&gt; &lt;!-- æ‹¼æ¥å­—ç¬¦ä¸² --&gt; &lt;h2 v-text=&quot;message+1&quot;&gt; &lt;/h2&gt; &lt;h2 v-text=&quot;message+&#x27;abc&#x27;&quot;&gt; &lt;/h2&gt; &lt;/div&gt; &lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; message: &quot;Javaç¨‹åºå‘˜&quot; &#125; &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 2.4.2 v-html æŒ‡ä»¤ä½œç”¨: è®¾ç½®å…ƒç´ çš„ innerHTML (å¯ä»¥å‘å…ƒç´ ä¸­å†™å…¥æ–°çš„æ ‡ç­¾) ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- è·å–æ™®é€šæ–‡æœ¬ --&gt; &#123;&#123;message&#125;&#125; &lt;h2 v-text=&quot;message&quot;&gt; &lt;/h2&gt; &lt;h2 v-html=&quot;message&quot;&gt; &lt;/h2&gt; &lt;!-- è®¾ç½®å…ƒç´ çš„innerHTML --&gt; &lt;h2 v-html=&quot;url&quot;&gt; &lt;/h2&gt; &lt;h2 v-text=&quot;url&quot;&gt; &lt;/h2&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./js/vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; message: &quot;Javaç¨‹åºå‘˜&quot;, url: &quot;&lt;a href=&#x27;https://www.baidu.com&#x27;&gt;ç™¾åº¦ä¸€ä¸‹&lt;/a&gt;&quot;, &#125;, &#125;);&lt;/script&gt; 2.4.3 v-on æŒ‡ä»¤ä½œç”¨: ä¸ºå…ƒç´ ç»‘å®šäº‹ä»¶, æ¯”å¦‚: v-on:click,å¯ä»¥ç®€å†™ä¸º @click&#x3D;â€æ–¹æ³•â€ç»‘å®šçš„æ–¹æ³•å®šä¹‰åœ¨ VUEå®ä¾‹çš„, methodå±æ€§ä¸­ è¯­æ³•æ ¼å¼ 12345678910111213141516&lt;div id=&quot;app&quot;&gt; &lt;!-- ä½¿ç”¨v-on ç»‘å®šclick ç‚¹å‡»äº‹ä»¶ --&gt; &lt;input type=&quot;button&quot; value=&quot;ç‚¹å‡»æŒ‰é’®&quot; v-on:click=&quot;æ–¹æ³•å&quot;&gt; &lt;!-- ä½¿ç”¨ @ç¬¦å·ä¹Ÿå¯ä»¥ç»‘å®š--&gt; &lt;input type=&quot;button&quot; value=&quot;ç‚¹å‡»æŒ‰é’®&quot; @click=&quot;æ–¹æ³•å&quot;&gt;&lt;/div&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, //é€šè¿‡methods ,ä¸“é—¨å­˜æ”¾Vueä¸­çš„æ–¹æ³• methods: &#123;æ–¹æ³•å: function() &#123; alert(&quot;123!&quot;) &#125; &#125; &#125;)&lt;/script&gt; ä»£ç ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- ä½¿ç”¨v-on ç»‘å®šclick ç‚¹å‡»äº‹ä»¶ --&gt; &lt;input type=&quot;button&quot; value=&quot;ç‚¹å‡»æŒ‰é’®&quot; v-on:click=&quot;show&quot;&gt; &lt;!-- ç®€å†™ @æ–¹å¼ --&gt; &lt;input type=&quot;button&quot; value=&quot;ç‚¹å‡»æŒ‰é’®&quot; @click=&quot;show&quot;&gt; &lt;!-- åŒå‡»äº‹ä»¶ --&gt; &lt;input type=&quot;button&quot; value=&quot;åŒå‡»å‡»æŒ‰é’®&quot; @dblclick=&quot;show&quot;&gt; &lt;!-- ç»‘å®šç‚¹å‡»äº‹ä»¶ --&gt; &lt;h2 @click=&quot;changeFood&quot;&gt; &#123;&#123;food&#125;&#125; &lt;/h2&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; food: &quot;éº»è¾£å°é¾™è™¾&quot; &#125;, //é€šè¿‡methods ,ä¸“é—¨å­˜æ”¾Vueä¸­çš„æ–¹æ³• methods: &#123; show: function() &#123; alert(&quot;ç¨‹åºå‘˜!&quot;) &#125;, changeFood: function() &#123; //ä½¿ç”¨thisè·å– console.log(this.food); //åœ¨VUEä¸­ä¸éœ€è¦è€ƒè™‘å¦‚ä½•æ›´æ”¹DOMå…ƒç´ , é‡ç‚¹æ”¾åœ¨æ›´æ”¹æ•°æ®,æ•°æ®æ›´æ–°ä¹‹å,ä½¿ç”¨æ•°æ® çš„é‚£ä¸ªå…ƒç´ ä¼šåŒæ­¥æ›´æ–° this.food+=&quot;çœŸå¥½åƒ!&quot;; &#125; &#125; &#125;) &lt;/script&gt; 2.4.4 è®¡æ•°å™¨æ¡ˆä¾‹1ï¼‰ç¼–ç æ­¥éª¤ dataä¸­å®šä¹‰æ•°æ®: æ¯”å¦‚ num å€¼ä¸º1 methodsä¸­æ·»åŠ ä¸¤ä¸ªæ–¹æ³•: æ¯”å¦‚add(é€’å¢) ,sub(é€’å‡) ä½¿ç”¨åŒå¤§æ‹¬å·å°†numè®¾ç½®ç»™ spanæ ‡ç­¾ ä½¿ç”¨v-on å°†add,sub åˆ†åˆ«ç»‘å®šç»™ + ,- æŒ‰é’® ç´¯åŠ åˆ°10 åœæ­¢ é€’å‡åˆ°0 åœæ­¢ 2ï¼‰é¡µé¢å‡†å¤‡ 123456789101112131415161718192021222324&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- è®¡ç®—åŠŸèƒ½åŒºåŸŸ --&gt; &lt;div&gt; &lt;input type=&quot;button&quot; class=&quot;btn btn_plus&quot;&gt; &lt;span&gt; &#123;&#123;num&#125;&#125; &lt;/span&gt; &lt;input type=&quot;button&quot; class=&quot;btn btn_minus&quot;&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //åˆ›å»ºVUEå®ä¾‹ var VM = new Vue(&#123; el:&quot;#app&quot;, data:&#123; num:1 &#125; &#125;) &lt;/script&gt; 3ï¼‰æ¡ˆä¾‹æ¼”ç¤º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt; Document &lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./css/inputNum.css&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- è®¡ç®—åŠŸèƒ½åŒºåŸŸ --&gt; &lt;div&gt; &lt;input type=&quot;button&quot; class=&quot;btn btn_plus&quot; @click=&quot;add&quot;&gt; &lt;span&gt; &#123;&#123;num&#125;&#125; &lt;/span&gt; &lt;input type=&quot;button&quot; class=&quot;btn btn_minus&quot; @click=&quot;sub&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;script src=&quot;vue.min.js&quot;&gt; &lt;/script&gt; &lt;script&gt; //åˆ›å»ºVUEå®ä¾‹ var VM = new Vue(&#123; el:&quot;#app&quot;, data:&#123;num:1 &#125;, methods: &#123; add:function()&#123; //console.log(&quot;add&quot;); if(this.num &lt; 10)&#123; this.num++; &#125;else&#123; alert(&quot;åˆ«ç‚¹å•¦!æœ€å¤§äº†!&quot;) &#125; &#125;, sub:function()&#123; //console.log(&quot;sub&quot;); if(this.num &gt; 0)&#123; this.num--; &#125;else&#123; alert(&quot;åˆ«ç‚¹å•¦!æœ€å°äº†!&quot;) &#125; &#125; &#125; &#125;) &lt;/script&gt;&lt;/html&gt; 4ï¼‰æ¡ˆä¾‹æ€»ç»“ åˆ›å»ºVUEå®ä¾‹æ—¶: el(æŒ‚è½½ç‚¹) , data(æ•°æ®) , methods(æ–¹æ³•) v-on æŒ‡ä»¤çš„ä½œç”¨æ˜¯ç»‘å®šäº‹ä»¶,ç®€å†™ä¸º @ æ–¹æ³•ä¸­ä½¿ç”¨thiså…³é”®å­—,è·å–dataä¸­çš„æ•°æ® v-text ä¸ åŒå¤§æ‹¬å·çš„ä½œç”¨éƒ½æ˜¯ç”¨æ¥ è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å€¼ 2.4.5 v-show æŒ‡ä»¤ä½œç”¨: v-showæŒ‡ä»¤, æ ¹æ®çœŸå‡å€¼,åˆ‡æ¢å…ƒç´ çš„æ˜¾ç¤ºçŠ¶æ€ 123456789101112&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;img src=&quot;./img/car.gif&quot; alt=&quot;&quot;&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot; &#125;)&lt;/script&gt; ä»£ç ç¤ºä¾‹ 123456789101112131415161718192021222324&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;åˆ‡æ¢çŠ¶æ€&quot; @click=&quot;changeShow&quot; /&gt; &lt;img v-show=&quot;isShow&quot; src=&quot;./img/car.gif&quot; /&gt; &lt;img v-show=&quot;age &gt; 18&quot; src=&quot;./img/car.gif&quot; /&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;js/vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; isShow: true, age: 19, &#125;, methods: &#123; changeShow: function() &#123; //è§¦å‘æ–¹æ³•, å¯¹isShowè¿›è¡Œå–å this.isShow = !this.isShow; &#125;, &#125;, &#125;); &lt;/script&gt; v-show æŒ‡ä»¤æ€»ç»“ åŸç†æ˜¯ä¿®æ”¹å…ƒç´ çš„display,å®ç°æ˜¾ç¤ºæˆ–è€…éšè— æŒ‡ä»¤åé¢çš„å†…å®¹,æœ€ç»ˆä¼šè§£æä¸º å¸ƒå°”å€¼ å€¼ä¸ºtrue æ˜¾ç¤º, ä¸ºfalse åˆ™éšè— æ•°æ®æ”¹å˜ä¹‹å,æ˜¾ç¤ºçš„çŠ¶æ€ä¼šåŒæ­¥æ›´æ–° 2.4.6 v-if æŒ‡ä»¤ä½œç”¨: æ ¹æ®è¡¨è¾¾å€¼çš„çœŸå‡,åˆ‡æ¢å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—( æ“çºµdom å…ƒç´  ) ä»£ç ç¤ºä¾‹ 123456789101112131415161718192021&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€&quot; @click=&quot;changeShow&quot;&gt; &lt;img v-if=&quot;isShow&quot; src=&quot;./img/car.gif&quot; alt=&quot;&quot;&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; isShow: false &#125;, methods: &#123; changeShow: function() &#123; this.isShow = !this.isShow; &#125; &#125; &#125;)&lt;/script&gt; v-if æŒ‡ä»¤æ€»ç»“ v-if æŒ‡ä»¤çš„ä½œç”¨: æ ¹æ®è¡¨è¾¾å¼çš„çœŸå‡åˆ‡æ¢å…ƒç´ çš„æ˜¾ç¤ºçŠ¶æ€ æœ¬è´¨æ˜¯é€šè¿‡æ“ä½œdomå…ƒç´ ,æ¥åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€ è¡¨è¾¾å¼ä¸ºtrue å…ƒç´ å­˜åœ¨ä¸domæ ‘,ä¸ºfalseä»domæ ‘ä¸­ç§»é™¤ é¢‘ç¹åˆ‡æ¢ä½¿ç”¨ v-show ,åä¹‹ä½¿ç”¨v-if 2.4.7 v-bind æŒ‡ä»¤ä½œç”¨: è®¾ç½®å…ƒç´ çš„å±æ€§ ï¼ˆæ¯”å¦‚:src,title,classï¼‰è¯­æ³•æ ¼å¼: v-bind:å±æ€§å=è¡¨è¾¾å¼ æˆ– :xxx=xxx 12345678910&lt;img v-bind:src=&quot;imgSrc&quot;&gt;&lt;img :src=&quot;imgSrc&quot;&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; imgSrc: &quot;å›¾ç‰‡åœ°å€&quot; &#125; &#125;)ï¼š&lt;/script&gt; ä»£ç ç¤ºä¾‹ 123456789101112131415161718192021222324&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- ä½¿ç”¨v-bindè®¾ç½®srcå±æ€§å€¼ --&gt; &lt;img v-bind:src=&quot;imgSrc&quot; alt=&quot;&quot;&gt; &lt;!-- ç®€å†™ è®¾ç½®title --&gt; &lt;img :src=&quot;imgSrc&quot; alt=&quot;&quot; :title=&quot;imgTitle&quot;&gt; &lt;!-- è®¾ç½®class --&gt; &lt;div :style=&quot;&#123; fontSize: size + &#x27;px&#x27;&#125;&quot;&gt; v-bindæŒ‡ä»¤ &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; imgSrc: &quot;https://gitee.com/Jasper-zh/blogImage/raw/master/Others/avg/hao.jpg&quot;, imgTitle: &quot;æœ¨ç“œç…²é¸¡è„š&quot;, size: 100 &#125; &#125;)&lt;/script&gt; 2.4.8 v-for æŒ‡ä»¤ä½œç”¨: æ ¹æ®æ•°æ®ç”Ÿæˆåˆ—è¡¨ç»“æ„ è¯­æ³•ç»“æ„ 123456789101112131415161718192021&lt;div id=&quot;app&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;item in arr&quot;&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; arr: [1, 2, 3, 4, 5], objArr: [&#123; name: &quot;tom&quot; &#125;, &#123; name: &quot;jack&quot; &#125;] &#125; &#125;)&lt;/script&gt; ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;æ·»åŠ æ•°æ®&quot; @click=&quot;add&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;ç§»é™¤æ•°æ®&quot; @click=&quot;remove&quot;&gt; &lt;ul&gt; &lt;!-- åœ¨liæ ‡ç­¾ä¸­è·å–æ•°ç»„å…ƒç´  --&gt; &lt;li v-for=&quot;(item,index) in arr&quot;&gt; &#123;&#123;index+1 &#125;&#125;åŸå¸‚: &#123;&#123;item&#125;&#125; &lt;/li&gt; &lt;/ul&gt; &lt;!-- ä½¿ç”¨h2æ ‡ç­¾æ˜¾ç¤º v-for ç»“åˆ v-bindä¸€èµ·ä½¿ç”¨ --&gt; &lt;h2 v-for=&quot;p in persons&quot; v-bind:title=&quot;p.name&quot;&gt; &#123;&#123;p.name&#125;&#125; &lt;/h2&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; //æ™®é€šæ•°ç»„ arr: [&quot;ä¸Šæµ·&quot;, &quot;åŒ—äº¬&quot;, &quot;å¤©æ´¥&quot;, &quot;æ­å·&quot;], //å¯¹è±¡æ•°ç»„ persons: [&#123; name: &quot;å°¼å¤æ‹‰æ–¯Â·èµµå››&quot; &#125;, &#123; name: &quot;è±å®‰çº³å¤šÂ·å°æ²ˆé˜³&quot; &#125;] &#125;, methods: &#123; add: function() &#123; //push æ·»åŠ  this.persons.push(&#123; name: &quot;å¤šåˆ©å®‰Â·åˆ˜èƒ½&quot; &#125;) &#125;, remove: function() &#123; this.persons.shift(); &#125; &#125; &#125;)&lt;/script&gt; v-for æŒ‡ä»¤æ€»ç»“ v-for æŒ‡ä»¤çš„ä½œç”¨: æ ¹æ®æ•°æ®ç”Ÿæˆåˆ—è¡¨ç»“æ„ æ•°ç»„ç»å¸¸å’Œ v-forç»“åˆä½¿ç”¨,æ•°ç»„æœ‰ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•: push() å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  shift() æŠŠæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ åˆ é™¤ è¯­æ³•æ˜¯: (item,index) in æ•°æ® itemå’Œindex å¯ä»¥ç»“åˆå…¶ä»–æŒ‡ä»¤ä¸€èµ·ä½¿ç”¨ æ•°ç»„çš„é•¿åº¦å˜åŒ–,ä¼šåŒæ­¥æ›´æ–°åˆ°é¡µé¢ä¸Š,æ˜¯å“åº”å¼çš„ 2.4.9 v-on æŒ‡ä»¤è¡¥å…… ä¼ é€’è‡ªå®šä¹‰å‚æ•° : å‡½æ•°è°ƒç”¨ä¼ å‚ äº‹ä»¶ä¿®é¥°ç¬¦: å¯¹äº‹ä»¶è§¦å‘çš„æ–¹å¼è¿›è¡Œé™åˆ¶ ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- å‡½æ•°ä¼ å‚ --&gt; &lt;input type=&quot;button&quot; value=&quot;ç¤¼ç‰©åˆ·èµ·æ¥&quot; @click=&quot;showTime(666,&#x27;çˆ±ä½ è€é“!&#x27;)&quot; /&gt; &lt;!-- äº‹ä»¶ä¿®é¥°ç¬¦ æŒ‡å®šå“ªäº›æ–¹å¼å¯ä»¥è§¦å‘äº‹ä»¶ --&gt; &lt;input type=&quot;text&quot; @keyup.enter=&quot;hi&quot; /&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./js/vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123;&#125;, methods: &#123; showTime: function(p1, p2) &#123; console.log(p1); console.log(p2); &#125;, hi: function() &#123; alert(&quot;ä½ å¥½å—?&quot;); &#125;, &#125;, &#125;);&lt;/script&gt; æ€»ç»“ äº‹ä»¶ç»‘å®šæ–¹æ³•,å¯ä»¥ä¼ å…¥è‡ªå®šä¹‰å‚æ•° å®šä¹‰æ–¹æ³•æ—¶,éœ€è¦å®šä¹‰å½¢å‚,æ¥æ¥æ”¶å®é™…çš„å‚æ•° äº‹ä»¶çš„åé¢è·Ÿä¸Š .ä¿®é¥°ç¬¦ å¯ä»¥å¯¹äº‹ä»¶è¿›è¡Œé™åˆ¶ .enter å¯ä»¥é™åˆ¶è§¦å‘çš„æŒ‰é”®ä¸ºå›è½¦ äº‹ä»¶ä¿®é¥°ç¬¦æœ‰è®¸å¤š ä½¿ç”¨æ—¶å¯ä»¥æŸ¥è¯¢æ–‡æ¡£ 2.4.10 MVVMæ¨¡å¼ MVVM æ˜¯Model-View-ViewModel çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäºå‰ç«¯å¼€å‘çš„æ¶æ„æ¨¡å¼. MVVMæ¨¡å¼å°†é¡µé¢,åˆ†å±‚äº† M ã€Vã€å’ŒVM ,è§£é‡Šä¸ºï¼š Model: è´Ÿè´£æ•°æ®å­˜å‚¨ View: è´Ÿè´£é¡µé¢å±•ç¤º View Model: è´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼ˆæ¯”å¦‚Ajaxè¯·æ±‚ç­‰ï¼‰ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŠ å·¥åäº¤ç»™è§†å›¾å±•ç¤º 1234567891011121314151617181920&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- View è§†å›¾éƒ¨åˆ† --&gt; &lt;h2&gt; &#123;&#123;name&#125;&#125; &lt;/h2&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./js/vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //åˆ›å»ºçš„vueå®ä¾‹,å°±æ˜¯ VM ViewModel var VM = new Vue(&#123; el: &quot;#app&quot;, //dataå°±æ˜¯MVVMæ¨¡å¼ä¸­çš„ model data: &#123; name: &quot;hello&quot;, &#125;, &#125;);&lt;/script&gt; é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä¸Šå›¾ä¸­çš„DOM Listenerså’ŒData Bindingsçœ‹ä½œä¸¤ä¸ªå·¥å…·ï¼Œå®ƒä»¬æ˜¯å®ç°åŒå‘ç»‘å®šçš„å…³é”®ã€‚ ä»Viewä¾§çœ‹ï¼ŒViewModelä¸­çš„DOM Listenerså·¥å…·ä¼šå¸®æˆ‘ä»¬ç›‘æµ‹é¡µé¢ä¸ŠDOMå…ƒç´ çš„å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œåˆ™æ›´æ”¹Modelä¸­çš„æ•°æ®ï¼› ä»Modelä¾§çœ‹ï¼Œå½“æˆ‘ä»¬æ›´æ–°Modelä¸­çš„æ•°æ®æ—¶ï¼ŒData Bindingså·¥å…·ä¼šå¸®æˆ‘ä»¬æ›´æ–°é¡µé¢ä¸­çš„DOMå…ƒç´ ã€‚ MVVMçš„æ€æƒ³,ä¸»è¦æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„å¼€å‘æ›´åŠ çš„æ–¹ä¾¿,å› ä¸ºMVVMæä¾›äº†æ•°æ®çš„åŒå‘ç»‘å®š 2.4.11 v-mode æŒ‡ä»¤ä½œç”¨: è·å–å’Œè®¾ç½®è¡¨å•å…ƒç´ çš„å€¼(å®ç°åŒå‘æ•°æ®ç»‘å®š) åŒå‘æ•°æ®ç»‘å®š å•å‘ç»‘å®š: å°±æ˜¯æŠŠModelç»‘å®šåˆ°Viewï¼Œå½“æˆ‘ä»¬ç”¨JavaScriptä»£ç æ›´æ–°Modelæ—¶ï¼ŒViewå°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ åŒå‘ç»‘å®š: ç”¨æˆ·æ›´æ–°äº†Viewï¼ŒModelçš„æ•°æ®ä¹Ÿè‡ªåŠ¨è¢«æ›´æ–°äº†ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯åŒå‘ç»‘å®šã€‚ ä»€ä¹ˆæƒ…å†µä¸‹ç”¨æˆ·å¯ä»¥æ›´æ–°Viewå‘¢ï¼Ÿ å¡«å†™è¡¨å•å°±æ˜¯ä¸€ä¸ªæœ€ç›´æ¥çš„ä¾‹å­ã€‚å½“ç”¨æˆ·å¡«å†™è¡¨å•æ—¶ï¼ŒViewçš„çŠ¶æ€å°±è¢«æ›´æ–°äº†ï¼Œå¦‚æœæ­¤æ—¶MVVMæ¡†æ¶å¯ä»¥è‡ªåŠ¨æ›´æ–°Modelçš„çŠ¶æ€ï¼Œé‚£å°±ç›¸å½“äºæˆ‘ä»¬æŠŠModelå’ŒViewåšäº†åŒå‘ç»‘å®šï¼š ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;ä¿®æ”¹message&quot; @click=&quot;update&quot; /&gt; &lt;!-- View è§†å›¾ --&gt; &lt;!-- &lt;input type=&quot;text&quot; v-bind:value=&quot;message&quot; /&gt; --&gt; &lt;!-- v-model å®ç°åŒå‘æ•°æ®ç»‘å®š --&gt; &lt;input type=&quot;text&quot; v-model=&quot;message&quot; /&gt; &lt;input type=&quot;text&quot; v-model=&quot;password&quot; /&gt; &lt;h2&gt; &#123;&#123;message&#125;&#125; &lt;/h2&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./js/vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //VM ä¸šåŠ¡é€»è¾‘æ§åˆ¶ var VM = new Vue(&#123; el: &quot;#app&quot;, //Model æ•°æ®å­˜å‚¨ data: &#123; message: &quot;Jasper&quot;, password: 123, &#125;, methods: &#123; update: function() &#123; this.message = &quot;hello&quot;; &#125;, &#125;, &#125;);&lt;/script&gt; v-model æŒ‡ä»¤æ€»ç»“ v-model æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä¾¿æ·çš„è®¾ç½®å’Œè·å–è¡¨å•å…ƒç´ çš„å€¼ ç»‘å®šçš„æ•°æ®ä¼šå’Œè¡¨å•å…ƒç´ å€¼ç›¸å…³è” åŒå‘æ•°æ®ç»‘å®š 2.5 å®ç°ç®€å•è®°äº‹æœ¬2.5.1 åŠŸèƒ½ä»‹ç» 2.5.2 æ–°å¢è®°å½•æ­¥éª¤ ç”Ÿæˆåˆ—è¡¨ç»“æ„(v-for æ•°ç»„) è·å–ç”¨æˆ·è¾“å…¥(v-model åŒå‘ç»‘å®š) å›è½¦,æ–°å¢æ•°æ®(v-on .enteräº‹ä»¶ä¿®é¥°ç¬¦) é¡µé¢å¸ƒå±€ä¸ç†Ÿæ‚‰,å¯ä»¥é€šè¿‡å®¡æŸ¥å…ƒç´ çš„æ–¹å¼å¿«é€Ÿæ‰¾åˆ°å…ƒç´  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;body&gt; &lt;!-- VUEç¤ºä¾‹æ¥ç®¡åŒºåŸŸ --&gt; &lt;section id=&quot;app&quot;&gt; &lt;!-- è¾“å…¥æ¡† --&gt; &lt;header class=&quot;header&quot;&gt; &lt;h1&gt; VUEè®°äº‹æœ¬ &lt;/h1&gt; &lt;!-- v-on ç»‘å®šäº‹ä»¶ --&gt; &lt;input v-model=&quot;inputValue&quot; @keyup.enter=&quot;add&quot; autofocus=&quot;autofocus&quot; autocomplete=&quot;off&quot; placeholder=&quot;è¾“å…¥æ—¥ç¨‹&quot; class=&quot;new-todo&quot; /&gt; &lt;/header&gt; &lt;!-- åˆ—è¡¨åŒºåŸŸ --&gt; &lt;section class=&quot;main&quot;&gt; &lt;ul class=&quot;listview&quot;&gt; &lt;li class=&quot;todo&quot; v-for=&quot;(item,index) in list&quot;&gt; &lt;div class=&quot;view&quot;&gt; &lt;span class=&quot;index&quot;&gt; &#123;&#123;index+1&#125;&#125; &lt;/span&gt; &lt;label&gt; &#123;&#123;item&#125;&#125; &lt;/label&gt; &lt;button class=&quot;destroy&quot;&gt; &lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/section&gt; &lt;/section&gt;&lt;/body&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; list: [&quot;å†™ä»£ç &quot;, &quot;åƒé¥­&quot;, &quot;ç¡è§‰&quot;], inputValue: &quot;996è¿˜æ˜¯997&quot; &#125;, methods: &#123; //æ–°å¢æ–¹æ³• add: function() &#123; //å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ·»åŠ åˆ°list this.list.push(this.inputValue); &#125; &#125; &#125;)&lt;/script&gt; 2.5.3 åˆ é™¤è®°å½•æ­¥éª¤ ç‚¹å‡»åˆ é™¤æŒ‡å®šçš„å†…å®¹( æ ¹æ®ç´¢å¼•åˆ é™¤å…ƒç´ ) åœ¨methodsä¸­æ·»åŠ ä¸€ä¸ªåˆ é™¤çš„æ–¹æ³•,ä½¿ç”¨spliceå‡½æ•°è¿›è¡Œåˆ é™¤ 123456789101112131415161718&lt;!-- åˆ—è¡¨åŒºåŸŸ --&gt;&lt;section class=&quot;main&quot;&gt; &lt;ul class=&quot;listview&quot;&gt; &lt;li class=&quot;todo&quot; v-for=&quot;(item,index) in list&quot;&gt; &lt;div class=&quot;view&quot;&gt; &lt;span class=&quot;index&quot;&gt; &#123;&#123;index+1&#125;&#125; &lt;/span&gt; &lt;label&gt; &#123;&#123;item&#125;&#125; &lt;/label&gt; &lt;!-- åˆ é™¤æŒ‰é’® --&gt; &lt;button class=&quot;destroy&quot; @click=&quot;remove(index)&quot;&gt; &lt;/button&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/section&gt; 123456//åˆ é™¤æ–¹æ³• remove: function(index) &#123; console.log(index); //ä½¿ç”¨splice(å…ƒç´ ç´¢å¼•,åˆ é™¤å‡ ä¸ª) æ ¹æ®ç´¢å¼•åˆ é™¤ this.list.splice(index, 1);&#125; 2.5.4 ç»Ÿè®¡æ“ä½œæ­¥éª¤ ç»Ÿè®¡é¡µé¢ä¿¡æ¯çš„ä¸ªæ•°,å°±æ˜¯åˆ—è¡¨ä¸­çš„å…ƒç´ çš„ä¸ªæ•°. è·å– listæ•°ç»„çš„é•¿åº¦,å°±æ˜¯ä¿¡æ¯çš„ä¸ªæ•° 123456789101112&lt;!-- ç»Ÿè®¡å’Œæ¸…ç©º --&gt;&lt;footer class=&quot;footer&quot;&gt; &lt;span class=&quot;todo-count&quot;&gt; &lt;strong&gt; &#123;&#123;list.length&#125;&#125; &lt;/strong&gt; items left &lt;/span&gt; &lt;button class=&quot;clear-completed&quot;&gt; Clear &lt;/button&gt;&lt;/footer&gt; æ€»ç»“ åŸºäºæ•°æ®çš„å¼€å‘æ–¹å¼ v-textè®¾ç½®çš„æ˜¯æ–‡æœ¬,å¯ä»¥ä½¿ç”¨ç®€åŒ–æ–¹å¼ &#123;&#123;&#125;&#125; 2.5.5 æ¸…ç©ºæ•°æ®æ­¥éª¤ï¼š ç‚¹å‡»æ¸…é™¤æ‰€æœ‰ä¿¡æ¯ æœ¬è´¨å°±æ˜¯æ¸…ç©ºæ•°ç»„ 1&lt;button class=&quot;clear-completed&quot; @click=&quot;clear()&quot;&gt;Clear&lt;/button&gt; 1234//æ¸…ç©ºæ•°ç»„å…ƒç´  clear: function() &#123; this.list = [];&#125; 3. axios3.1 Ajaxå›é¡¾3.1.1 ä»€ä¹ˆæ˜¯Ajax?Ajax æ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„å¼€å‘æŠ€æœ¯ã€‚Ajax &#x3D; å¼‚æ­¥ JavaScript å’Œ XMLã€‚ 3.1.2 Ajaxçš„ä½œç”¨ Ajax å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ï¼ˆå±€éƒ¨æ›´æ–°ï¼‰ã€‚ä¼ ç»Ÿçš„ç½‘é¡µå¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…é¡»é‡è½½æ•´ä¸ªç½‘é¡µé¡µé¢ã€‚ ç®€å•è®°: Ajax æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯, ç»´æŠ¤ç”¨æˆ·ä½“éªŒæ€§, è¿›è¡Œç½‘é¡µçš„å±€éƒ¨åˆ·æ–° 3.1.3 å¼‚æ­¥ä¸åŒæ­¥ æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ–¹å¼ åŒæ­¥è®¿é—®: å®¢æˆ·ç«¯å¿…é¡»ç­‰å¾…æœåŠ¡å™¨ç«¯çš„å“åº”,åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­ä¸èƒ½è¿›è¡Œå…¶ä»–æ“ä½œ å¼‚æ­¥è®¿é—®: å®¢æˆ·ç«¯ä¸éœ€è¦ç­‰å¾…æœåŠ¡çš„å“åº”,åœ¨ç­‰å¾…æœŸé—´,æµè§ˆå™¨å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œ 3.1.4 æ¡ˆä¾‹æ¼”ç¤ºajax.jsp 12345678910111213141516171819202122232425262728293031323334353637&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt; Document &lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=&quot;text&quot; /&gt; &lt;input type=&quot;button&quot; value=&quot;Jqueryå‘é€å¼‚æ­¥è¯·æ±‚&quot; onclick=&quot;run1()&quot; /&gt; &lt;/body&gt; &lt;script src=&quot;./jquery-1.8.3.min.js&quot;&gt; &lt;/script&gt; &lt;script&gt; function run1() &#123; //JQuery Ajaxæ–¹å¼ å‘é€å¼‚æ­¥è¯·æ±‚ $.ajax(&#123; url: &quot;/ajax&quot;, async: true, data: &#123; name: &quot;å¤©é’&quot; &#125;, type: &quot;post&quot;, dataType: &quot;text&quot;, success: function(res) &#123; console.log(res) alert(&quot;å“åº”æˆåŠŸ&quot; + res); &#125;, error: function() &#123; alert(&quot;å“åº”å¤±è´¥!&quot;); &#125; &#125;); &#125; &lt;/script&gt;&lt;/html&gt; servlet.java 1234567891011121314151617181920@WebServlet(&quot;/ajax&quot;) public class AjaxServlet extends HttpServlet&#123; @Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException&#123; //1.è·å–è¯·æ±‚æ•°æ® String username = req.getParameter(&quot;name&quot;); //æ¨¡æ‹Ÿä¸šåŠ¡æ“ä½œ,é€ æˆçš„å»¶æ—¶æ•ˆæœ try &#123; Thread.sleep(5000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; //2.æ‰“å°username System.out.println(username); resp.getWriter().write(&quot;hello hello&quot;); &#125; @Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123; doGet(req, resp); &#125;&#125; 3.1 axiosä»‹ç»VUEä¸­ç»“åˆç½‘ç»œæ•°æ®è¿›è¡Œåº”ç”¨çš„å¼€å‘ ç›®å‰ååˆ†æµè¡Œç½‘ç»œè¯·æ±‚åº“,ä¸“é—¨ç”¨æ¥å‘é€è¯·æ±‚,å…¶å†…éƒ¨è¿˜æ˜¯ajax,è¿›è¡Œå°è£…ä¹‹åä½¿ç”¨æ›´åŠ æ–¹ä¾¿ axiosä½œç”¨: åœ¨æµè§ˆå™¨ä¸­å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆ ajaxå¼‚æ­¥è¯·æ±‚çš„å‘é€ Vue2.0ä¹‹åï¼Œå°¤é›¨æºªæ¨èå¤§å®¶ç”¨axiosæ›¿æ¢JQuery ajax 3.2 axioså…¥é—¨ä½¿ç”¨æ­¥éª¤: å¯¼åŒ… 12&lt;!-- å®˜ç½‘æä¾›çš„ axios åœ¨çº¿åœ°å€ --&gt; &lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt; è¯·æ±‚æ–¹å¼,ä»¥GETå’ŒPOSTä¸¾ä¾‹ GET 1axios.get(åœ°å€?key=value&amp;key2=value2).then(function(response)&#123;&#125;,function(error) &#123;&#125;); POST 1axios.post(åœ°å€,&#123;key:value,key2:value2&#125;).then(function(response) &#123;&#125;,function(error)&#123;&#125;) æ ¹æ®æ¥å£æ–‡æ¡£, è®¿é—®æµ‹è¯•æ¥å£,è¿›è¡Œæµ‹è¯• æ¥å£1ï¼šéšæœºç¬‘è¯ 1234è¯·æ±‚åœ°å€:https://autumnfish.cn/api/joke/list è¯·æ±‚æ–¹æ³•:get è¯·æ±‚å‚æ•°:num(ç¬‘è¯æ¡æ•°,æ•°å­—) å“åº”å†…å®¹:éšæœºç¬‘è¯ æ¥å£2ï¼šç”¨æˆ·æ³¨å†Œ 1234è¯·æ±‚åœ°å€:https://autumnfish.cn/api/user/reg è¯·æ±‚æ–¹æ³•:post è¯·æ±‚å‚æ•°:username(ç”¨æˆ·å,å­—ç¬¦ä¸²) å“åº”å†…å®¹:æ³¨å†ŒæˆåŠŸæˆ–å¤±è´¥ ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132&lt;body&gt; &lt;input type=&quot;button&quot; value=&quot;getè¯·æ±‚&quot; id=&quot;get&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;postè¯·æ±‚&quot; id=&quot;post&quot;&gt;&lt;/body&gt;&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; /* è¯·æ±‚åœ°å€:https://autumnfish.cn/api/joke/list è¯·æ±‚æ–¹æ³•:get è¯·æ±‚å‚æ•°:num(ç¬‘è¯æ¡æ•°,æ•°å­—) å“åº”å†…å®¹:éšæœºç¬‘è¯ */ document.getElementById(&quot;get&quot;).onclick = function() &#123; axios.get(&quot;https://autumnfish.cn/api/joke/list?num=1&quot;).then(function(response) &#123; //è¯·æ±‚æˆåŠŸ,è°ƒç”¨ console.log(response); &#125;, function(error) &#123; //è¯·æ±‚å¤±è´¥,è°ƒç”¨ console.log(error) &#125;); &#125; /* è¯·æ±‚åœ°å€:https://autumnfish.cn/api/user/reg è¯·æ±‚æ–¹æ³•:post è¯·æ±‚å‚æ•°:username(ç”¨æˆ·å,å­—ç¬¦ä¸²) å“åº”å†…å®¹:æ³¨å†ŒæˆåŠŸæˆ–å¤±è´¥*/ document.getElementById(&quot;post&quot;).onclick = function() &#123; axios.post(&quot;https://autumnfish.cn/api/user/reg&quot;, &#123; username: &quot;å¼ ç™¾ä¸‡&quot; &#125;).then(function(response) &#123; console.log(response); &#125;, function(error) &#123; console.log(error); &#125;); &#125;&lt;/script&gt; 3.3 axiosæ€»ç»“ axios å¿…é¡»å¯¼åŒ…æ‰èƒ½ä½¿ç”¨ ä½¿ç”¨getæˆ–è€…postæ–¹æ³•,å°±å¯ä»¥å‘é€è¯·æ±‚ thenæ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°,ä¼šåœ¨è¯·æ±‚æˆåŠŸæˆ–è€…è¯·æ±‚å¤±è´¥çš„æ—¶å€™è§¦å‘ é€šè¿‡å›è°ƒå‡½æ•°çš„å½¢å‚å¯ä»¥è·å–å“åº”çš„å†…å®¹,æˆ–è€…é”™è¯¯ä¿¡æ¯ 3.4 è·å–ç¬‘è¯æ¡ˆä¾‹é€šè¿‡vue+axios å®Œæˆä¸€ä¸ªè·å–ç¬‘è¯çš„æ¡ˆä¾‹ã€‚ æ¥å£: éšæœºè·å–ä¸€æ¡ç¬‘è¯ 1234è¯·æ±‚åœ°å€:https://autumnfish.cn/api/joke/è¯·æ±‚æ–¹æ³•:get è¯·æ±‚å‚æ•°:æ—  å“åº”å†…å®¹:éšæœºç¬‘è¯ ä»£ç ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;ç‚¹å‡»è·å–ä¸€ä¸ªç¬‘è¯&quot; @click=&quot;getJoke&quot;&gt; &lt;p&gt; &#123;&#123;joke&#125;&#125; &lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;!-- å¼•å…¥vue + axios --&gt;&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; /* è¯·æ±‚åœ°å€:https://autumnfish.cn/api/joke è¯·æ±‚æ–¹æ³•:get è¯·æ±‚å‚æ•°:æ—  å“åº”å†…å®¹:éšæœºç¬‘è¯ */ var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; joke: &quot;ç¬‘ç¬‘æ›´å¥åº·&quot; &#125;, methods: &#123; getJoke: function() &#123; console.log(this.joke); //ç¬‘ç¬‘æ›´å¥åº· var that = this; //æŠŠthisä¿å­˜èµ·æ¥ //å¼‚æ­¥è®¿é—® axios.get(&quot;https://autumnfish.cn/api/joke&quot;).then( function(response)&#123; //è·å–dataä¸­çš„ç¬‘è¯ console.log(response.data); //console.log(this.joke); undefined æ²¡æœ‰è·å–åˆ°this that.joke=response.data; &#125;,function(error)&#123; &#125; ) &#125; &#125; &#125;) &lt;/script&gt; æ¡ˆä¾‹æ€»ç»“ axioså›è°ƒå‡½æ•°ä¸­thisæŒ‡å‘å·²ç»æ”¹å˜,æ— æ³•è®¿é—®dataä¸­çš„æ•°æ® è§£å†³æ–¹æ¡ˆ: å°†thisè¿›è¡Œä¿å­˜,å›è°ƒå‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨ä¿å­˜çš„thiså³å¯ 3.5 å¤©æ°”æŸ¥è¯¢æ¡ˆä¾‹ 3.5.1 éœ€æ±‚åˆ†æ åŠŸèƒ½åˆ†æ: å›è½¦æŸ¥è¯¢ è¾“å…¥å†…å®¹,ç‚¹å‡»å›è½¦ (v-on.enter) è®¿é—®æ¥å£,æŸ¥è¯¢æ•°æ® (axios v-model) è¿”å›æ•°æ®,æ¸²æŸ“æ•°æ® 3.5.2 æ¥å£æ–‡æ¡£1234è¯·æ±‚åœ°å€:http://wthrcdn.etouch.cn/weather_mini è¯·æ±‚æ–¹æ³•:get è¯·æ±‚å‚æ•°:city (è¦æŸ¥è¯¢çš„åŸå¸‚åç§°) å“åº”å†…å®¹:å¤©æ°”ä¿¡æ¯ 3.5.3 æ¡ˆä¾‹æ¼”ç¤ºè‡ªå®šä¹‰jsæ–‡ä»¶ä½œä¸ºä¸€ä¸ªæ ‡å‡†çš„åº”ç”¨ç¨‹åº,æˆ‘ä»¬å°†åˆ›å»ºVUEå®ä¾‹çš„ä»£ç ,æŠ½å–åˆ°main.js æ–‡ä»¶ä¸­ 12345678910111213141516171819202122232425var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; city: &#x27;&#x27;, //å®šä¹‰ç©ºæ•°ç»„æ¥æ”¶å¤©æ°”ä¿¡æ¯ weatherList: [] &#125;, //ç¼–å†™æŸ¥è¯¢å¤©æ°”æ–¹æ³• methods: &#123; searchWeather: function() &#123; console.log(&quot;å¤©æ°”æŸ¥è¯¢&quot;); console.log(this.city); //ä¿å­˜this,æ–¹ä¾¿åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ var that = this; //è°ƒç”¨æ¥å£ axios.get(&quot;http://wthrcdn.etouch.cn/weather_mini?city=&quot; + this.city).then(function(respose) &#123; //console.log(respose); //åªè·å–å¤©æ°”æ•°ç»„ console.log(respose.data.data.forecast); that.weatherList = respose.data.data.forecast; &#125;, function(error) &#123;&#125;); &#125; &#125;&#125;) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;body&gt; &lt;div class=&quot;wrap&quot; id=&quot;app&quot;&gt; &lt;div class=&quot;search_form&quot;&gt; &lt;div class=&quot;logo&quot;&gt; å¤©æ°”æŸ¥è¯¢ &lt;/div&gt; &lt;div class=&quot;form_group&quot;&gt; &lt;!-- 3.ç»‘å®šç‚¹å‡»äº‹ä»¶,å›è½¦è§¦å‘,é€šè¿‡v-modelç»‘å®šæ•°æ® --&gt; &lt;input v-model=&quot;city&quot; @keyup.enter=&quot;searchWeather&quot; type=&quot;text&quot; class=&quot;input_txt&quot; placeholder=&quot;è¯·è¾“å…¥è¦æŸ¥è¯¢çš„åŸå¸‚&quot; /&gt; &lt;button class=&quot;input_sub&quot;&gt; å›è½¦æŸ¥è¯¢ &lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;ul class=&quot;weather_list&quot;&gt; &lt;!-- éå†å¤©æ°”ä¿¡æ¯ --&gt; &lt;li v-for=&quot;item in weatherList&quot;&gt; &lt;div class=&quot;info_type&quot;&gt; &lt;span class=&quot;iconfont&quot;&gt; &#123;&#123;item.type&#125;&#125; &lt;/span&gt; &lt;/div&gt; &lt;div class=&quot;info_temp&quot;&gt; &lt;b&gt; &#123;&#123;item.low&#125;&#125; &lt;/b&gt; ~ &lt;b&gt; &#123;&#123;item.high&#125;&#125; &lt;/b&gt; &lt;/div&gt; &lt;div class=&quot;info_date&quot;&gt; &lt;span&gt; &#123;&#123;item.date&#125;&#125; &lt;/span&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt; &lt;/script&gt; &lt;!-- å®˜ç½‘æä¾›çš„ axios åœ¨çº¿åœ°å€ --&gt; &lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt; &lt;/script&gt; &lt;!-- 2.å¼•å…¥è‡ªå·±çš„js --&gt; &lt;script src=&quot;./js/main.js&quot;&gt; &lt;/script&gt;&lt;/body&gt; 3.5.4 æ¡ˆä¾‹æ€»ç»“ åº”ç”¨çš„é€»è¾‘ä»£ç ,å»ºè®®ä¸é¡µé¢è¿›è¡Œåˆ†ç¦»,ä½¿ç”¨å•ç‹¬çš„JSç¼–å†™ axioså›è°ƒå‡½æ•°ä¸­çš„ thisçš„æŒ‡å‘æ”¹å˜,æ— æ³•æ­£å¸¸ä½¿ç”¨, éœ€è¦å¦å¤–ä¿å­˜ä¸€ä»½ æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ¯”è¾ƒçš„å¤æ‚æ—¶,è·å–æ•°æ®æ—¶è¦æ³¨æ„å±‚çº§ç»“æ„ 3.6 è§£å†³é¡µé¢é—ªçƒé—®é¢˜æˆ‘ä»¬å‘ç°è®¿é—®å¤©æ°”é¢„æŠ¥æ¡ˆä¾‹é¡µé¢æ—¶, ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼çš„åœ°æ–¹å‡ºç°äº†é—ªçƒé—®é¢˜,å¦‚ä½•è§£å†³å‘¢? v-cloak æŒ‡ä»¤ ä½œç”¨: è§£å†³æ’å€¼è¡¨è¾¾å¼é—ªçƒé—®é¢˜ å½“ç½‘ç»œè¾ƒæ…¢ï¼Œç½‘é¡µè¿˜åœ¨åŠ è½½ Vue.js ï¼Œè€Œå¯¼è‡´ Vue æ¥ä¸åŠæ¸²æŸ“ï¼Œè¿™æ—¶é¡µé¢å°±ä¼šæ˜¾ç¤ºå‡º Vue æºä»£ç ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-cloak æŒ‡ä»¤æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚ 1ï¼‰æ·»åŠ æ ·å¼ 123456&lt;style&gt; /* é€šè¿‡å±æ€§é€‰æ‹©å™¨,è®¾ç½® æ·»åŠ äº†v-cloak */ [v-cloak] &#123; display: none; &#125; &lt;/style&gt; 1ï¼‰åœ¨idä¸ºappçš„divä¸­æ·»åŠ  v-cloak 1&lt;div class=&quot;wrap&quot; id=&quot;app&quot; v-cloak&gt; 4 computed è®¡ç®—å±æ€§4.1 ä»€ä¹ˆæ˜¯è®¡ç®—å±æ€§åœ¨Vueåº”ç”¨ä¸­ï¼Œåœ¨æ¨¡æ¿ä¸­åŒå‘ç»‘å®šä¸€äº›æ•°æ®æˆ–è€…è¡¨è¾¾å¼ï¼Œä½†æ˜¯è¡¨è¾¾å¼å¦‚æœè¿‡é•¿ï¼Œæˆ–è€…é€»è¾‘æ›´ä¸ºå¤æ‚æ—¶ï¼Œå°±ä¼šå˜å¾—è‡ƒè‚¿ç”šè‡³éš¾ä»¥ç»´æŠ¤å’Œé˜…è¯»ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç : 123456&lt;div&gt; å†™åœ¨åŒæ‹¬å·ä¸­çš„è¡¨è¾¾å¼å¤ªé•¿äº†,ä¸åˆ©äºé˜…è¯» &#123;&#123;text.split(&#x27;,&#x27;).reverse().join(&#x27;,&#x27;)&#125;&#125; &lt;/div&gt;å°†è¿™æ®µæ“ä½œtext.split(&#x27;,&#x27;).reverse().join(&#x27;,&#x27;) æ”¾åˆ°è®¡ç®—å±æ€§ä¸­,æœ€ç»ˆè¿”å›ä¸€ä¸ªç»“æœå€¼å°±å¯ä»¥ computed çš„ä½œç”¨: å‡å°‘è¿ç®—æ¬¡æ•°, ç¼“å­˜è¿ç®—ç»“æœ. è¿ç”¨äºé‡å¤ç›¸åŒçš„è®¡ç®—. 4.1 ä»£ç ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- &lt;h1&gt;&#123;&#123;a*b&#125;&#125;&lt;/h1&gt; &lt;h1&gt;&#123;&#123;a*b&#125;&#125;&lt;/h1&gt; --&gt; &lt;!-- &lt;h1&gt;&#123;&#123;res()&#125;&#125;&lt;/h1&gt; &lt;h1&gt;&#123;&#123;res()&#125;&#125;&lt;/h1&gt; --&gt; &lt;h1&gt; &#123;&#123;res2&#125;&#125; &lt;/h1&gt; &lt;h1&gt; &#123;&#123;res2&#125;&#125; &lt;/h1&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; a: 10, b: 20, &#125;, methods: &#123; res: function() &#123; console.log(&quot;resæ–¹æ³•æ‰§è¡Œ&quot;); return this.a * this.b; &#125;, &#125;, //ä½¿ç”¨è®¡ç®—å±æ€§è¿›è¡Œä¼˜åŒ– å‡å°‘è¿ç®—æ¬¡æ•°,ç”¨äºé‡å¤ç›¸åŒçš„è¿ç®— computed: &#123; res2: function() &#123; console.log(&quot;res2æ–¹æ³•æ‰§è¡Œ&quot;); return this.a * this.b; &#125;, &#125;, &#125;);&lt;/script&gt; 4.2 computedæ€»ç»“ å®šä¹‰å‡½æ•°ä¹Ÿå¯ä»¥å®ç°ä¸ è®¡ç®—å±æ€§ç›¸åŒçš„æ•ˆæœ,éƒ½å¯ä»¥ç®€åŒ–è¿ç®—ã€‚ ä¸åŒçš„æ˜¯è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚ 5. filter è¿‡æ»¤å™¨5.1 ä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨ è¿‡æ»¤å™¨æ˜¯å¯¹å³å°†æ˜¾ç¤ºçš„æ•°æ®åšè¿›ä¸€æ­¥çš„ç­›é€‰å¤„ç†ï¼Œç„¶åè¿›è¡Œæ˜¾ç¤ºï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯è¿‡æ»¤å™¨å¹¶æ²¡æœ‰æ”¹å˜åŸæ¥çš„æ•°æ®ï¼Œåªæ˜¯åœ¨åŸæ•°æ®çš„åŸºç¡€ä¸Šäº§ç”Ÿæ–°çš„æ•°æ®ã€‚ æ•°æ®åŠ å·¥è½¦é—´,å¯¹å€¼è¿›è¡Œç­›é€‰åŠ å·¥. 5.2 è¿‡æ»¤å™¨ä½¿ç”¨ä½ç½® åŒæ‹¬å·æ’å€¼å†… 1&#123;&#123; msg | filterA &#125;&#125; msgæ˜¯éœ€è¦å¤„ç†çš„æ•°æ®, filterAæ˜¯è¿‡æ»¤å™¨, | è¿™ä¸ªç«–çº¿æ˜¯ç®¡é“,é€šè¿‡è¿™ä¸ªç®¡é“ å°†æ•°æ®ä¼ è¾“ç»™è¿‡æ»¤å™¨è¿›è¡Œè¿‡æ»¤ åŠ å·¥æ“ä½œ v-bindç»‘å®šçš„å€¼çš„åœ°æ–¹ã€‚ 1&lt;h1 v-bind:id=&quot; msg | filterA&quot;&gt; &#123;&#123; msg &#125;&#125; &lt;/h1&gt; 5.3 è¿‡æ»¤å™¨5.3.1 å±€éƒ¨è¿‡æ»¤å™¨éœ€æ±‚: é€šè¿‡è¿‡æ»¤å™¨ç»™ç”µè„‘ä»·æ ¼å‰é¢ æ·»åŠ ä¸€ä¸ªç¬¦å·Â¥ 1234567891011121314151617181920212223242526272829&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;p&gt; ç”µè„‘ä»·æ ¼: &#123;&#123;price | addIcon&#125;&#125; &lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, //æŒ‚è½½ç‚¹ data: &#123; price: 200, &#125;, methods: &#123;&#125;, //æ–¹æ³• computed: &#123;&#125;, //è®¡ç®—å±æ€§ //å±€éƒ¨è¿‡æ»¤å™¨ filters: &#123; //å¤„ç†å‡½æ•°,value = price ,æ˜¯å›ºå®šå‚æ•° addIcon(value) &#123; return &quot;Â¥&quot; + value; &#125;, &#125;, &#125;);&lt;/script&gt; 5.3.2 å…¨å±€è¿‡æ»¤å™¨éœ€æ±‚: å°†ç”¨æˆ·åå¼€å¤´å­—æ¯å¤§å†™ 1234567891011121314151617181920212223242526&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;p&gt; &#123;&#123;user.name | changeName&#125;&#125; &lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //åœ¨åˆ›å»ºVueå®ä¾‹ä¹‹å‰ åˆ›å»ºå…¨å±€è¿‡æ»¤å™¨ Vue.filter(&quot;changeName&quot;, function(value) &#123; //å°†å§“åå¼€å¤´å­—æ¯å¤§å†™,ç„¶åå†é‡æ–°æ‹¼æ¥ return value.charAt(0).toUpperCase() + value.slice(1); &#125;); var VM = new Vue(&#123; el: &quot;#app&quot;, //æŒ‚è½½ç‚¹ data: &#123; user: &#123; name: &quot;tom&quot; &#125;, &#125;, &#125;);&lt;/script&gt; 5.4 æ€»ç»“ è¿‡æ»¤å™¨å¸¸ç”¨æ¥å¤„ç†æ–‡æœ¬æ ¼å¼åŒ–çš„æ“ä½œã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šåŒèŠ±æ‹¬å·æ’å€¼å’Œ v-bind è¡¨è¾¾å¼ è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨ JavaScript è¡¨è¾¾å¼çš„å°¾éƒ¨ï¼Œç”±â€œç®¡é“â€ç¬¦å·æŒ‡ç¤º 6. watch ä¾¦å¬å™¨6.1 ä»€ä¹ˆæ˜¯ä¾¦å¬å™¨Vue.js æä¾›äº†ä¸€ä¸ªæ–¹æ³• watchï¼Œå®ƒç”¨äºè§‚å¯ŸVueå®ä¾‹ä¸Šçš„æ•°æ®å˜åŠ¨ã€‚ä½œç”¨: å½“ä½ æœ‰ä¸€äº›æ•°æ®éœ€è¦éšç€å…¶å®ƒæ•°æ®å˜åŠ¨è€Œå˜åŠ¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¾¦å¬å±æ€§ 6.2 æ¡ˆä¾‹æ¼”ç¤ºéœ€æ±‚: ç›‘å¬å§“åå˜åŒ–,å®æ—¶æ˜¾ç¤º 1234567891011121314151617181920212223242526272829303132333435363738&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;label&gt; åï¼š &lt;input type=&quot;text&quot; v-model=&quot;firstName&quot; /&gt; &lt;/label&gt; &lt;label&gt; å§“ï¼š &lt;input type=&quot;text&quot; v-model=&quot;lastName&quot; /&gt; &lt;/label&gt; &#123;&#123;fullNameComputed&#125;&#125; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; var app = new Vue(&#123; el: &quot;#app&quot;, data: &#123; firstName: &quot;&quot;, lastName: &quot;&quot;, fullName: &quot;&quot;, &#125;, //ç›‘å¬ï¼Œç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®æ—¶ç›‘å¬äº‹ä»¶ watch: &#123; //å‚æ•°è¯´æ˜ï¼š1ã€æ–°å€¼ï¼Œ2ã€æ—§å€¼ firstName(newValue, oldValue) &#123; this.fullName = newValue + &quot; &quot; + this.lastName; &#125;, lastName(newValue, oldValue) &#123; this.fullName = this.firstName + &quot; &quot; + newValue; &#125;, &#125;, computed: &#123; fullNameComputed() &#123; return this.firstName + &quot; &quot; + this.lastName; &#125;, &#125;, &#125;);&lt;/script&gt; 7. Component ç»„ä»¶7.1 ç»„ä»¶ä»‹ç» ç»„ä»¶ï¼ˆComponentï¼‰æ˜¯è‡ªå®šä¹‰å°è£…çš„åŠŸèƒ½ã€‚åœ¨å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸å‡ºç°å¤šä¸ªç½‘é¡µçš„åŠŸèƒ½æ˜¯é‡å¤çš„ï¼Œè€Œä¸”å¾ˆå¤šä¸åŒçš„é¡µé¢ä¹‹é—´ï¼Œä¹Ÿå­˜åœ¨åŒæ ·çš„åŠŸèƒ½ã€‚ æˆ‘ä»¬å°†ç›¸åŒçš„åŠŸèƒ½è¿›è¡ŒæŠ½å–,å°è£…ä¸ºç»„ä»¶,è¿™æ ·ï¼Œå‰ç«¯äººå‘˜å°±å¯ä»¥åœ¨ç»„ä»¶åŒ–å¼€å‘æ—¶ï¼Œåªéœ€è¦ä¹¦å†™ä¸€æ¬¡ä»£ç ï¼Œéšå¤„å¼•å…¥å³å¯ä½¿ç”¨ã€‚ ç»„ä»¶ç³»ç»Ÿè®©æˆ‘ä»¬å¯ä»¥ç”¨ç‹¬ç«‹å¯å¤ç”¨çš„å°ç»„ä»¶æ¥æ„å»ºå¤§å‹åº”ç”¨ï¼Œå‡ ä¹ä»»æ„ç±»å‹çš„åº”ç”¨çš„ç•Œé¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ vueçš„ç»„ä»¶æœ‰ä¸¤ç§: å…¨å±€ç»„ä»¶ å’Œ å±€éƒ¨ç»„ä»¶ 7.2 å…¨å±€ç»„ä»¶è¯­æ³•æ ¼å¼ï¼š 123456789101112Vue.component(&quot;ç»„ä»¶åç§°&quot;, &#123; template: &quot;htmlä»£ç &quot;, // ç»„ä»¶çš„HTMLç»“æ„ä»£ç  data()&#123; //ç»„ä»¶æ•°æ® return &#123;&#125; &#125;, methods: &#123; // ç»„ä»¶çš„ç›¸å…³çš„jsæ–¹æ³• æ–¹æ³•å()&#123; // é€»è¾‘ä»£ç  &#125; &#125; &#125;) æ³¨æ„ï¼š ç»„ä»¶åä»¥å°å†™å¼€å¤´ï¼Œé‡‡ç”¨çŸ­æ¨ªçº¿åˆ†å‰²å‘½å: ä¾‹å¦‚ hello-Word ç»„ä»¶ä¸­çš„data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°,æ³¨æ„ä¸Vueå®ä¾‹ä¸­çš„dataåŒºåˆ† åœ¨templateæ¨¡æ¿ä¸­, åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´  123456789101112131415161718192021222324252627282930313233343536&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;!-- ä½¿ç”¨ç»„ä»¶,å¯ä»¥ä½¿ç”¨å¤šæ¬¡ --&gt; &lt;lagou-header&gt; &lt;/lagou-header&gt; &lt;lagou-header&gt; &lt;/lagou-header&gt; &lt;lagou-header&gt; &lt;/lagou-header&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //å…¨å±€ç»„ä»¶ Vue.component(&quot;lagou-header&quot;, &#123; //ç»„ä»¶çš„å‘½åä¸€èˆ¬ä½¿ç”¨çŸ­æ¨ªçº¿æ–¹å¼,ç»„ä»¶ä¸­çš„æ¨¡æ¿åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´  template: &quot;&lt;div&gt;å¤´éƒ¨ç»„ä»¶çš„HTMLä»£ç &lt;h1 @click=&#x27;hello&#x27;&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;&lt;div&gt;&quot;, data() &#123; //ç»„ä»¶ä¸­çš„dataæ˜¯ä¸€ä¸ªå‡½æ•° return &#123; msg: &quot;helloè¿™é‡Œæ˜¯ç»„ä»¶ä¸­çš„dataæ•°æ®&quot;, &#125;; &#125;, methods: &#123; hello() &#123; alert(&quot;å—¨ ä½ å¥½!&quot;); &#125;, &#125;, &#125;); var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123;&#125;, methods: &#123;&#125;, &#125;);&lt;/script&gt; 7.3 å±€éƒ¨ä¸»é”®ç›¸æ¯”èµ·å…¨å±€ç»„ä»¶ï¼Œå±€éƒ¨ç»„ä»¶åªèƒ½åœ¨åŒä¸€ä¸ªå®ä¾‹å†…æ‰èƒ½è¢«è°ƒç”¨ã€‚å±€éƒ¨ç»„ä»¶çš„å†™æ³•å’Œå…¨å±€ç»„ä»¶å·®ä¸å¤šã€‚ å”¯ä¸€ä¸åŒå°±æ˜¯ï¼šå±€éƒ¨ç»„ä»¶è¦å†™åœ¨Vueå®ä¾‹é‡Œé¢ã€‚ 1234567891011121314new Vue(&#123; el: &quot;#app&quot;, components: &#123;ç»„ä»¶å: &#123; // ç»„ä»¶ç»“æ„ template: &quot;HTMLä»£ç &quot;, // dataæ•°æ® data() &#123; return &#123; msg: &quot;xxxx&quot; &#125;; &#125;, &#125;, &#125;,&#125;); æ³¨æ„ï¼šåˆ›å»ºå±€éƒ¨ç»„ä»¶ï¼Œæ³¨æ„ componentsï¼Œæ³¨æ„æœ«å°¾æœ‰ â€˜sâ€™ï¼Œè€Œå…¨å±€ç»„ä»¶æ˜¯ä¸ç”¨+ â€˜sâ€™ çš„ã€‚è¿™æ„å‘³ç€ï¼Œcomponents é‡Œå¯ä»¥åˆ›å»ºå¤šä¸ªç»„ä»¶ã€‚ 1234567891011121314151617181920212223242526&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;web-msg&gt; &lt;/web-msg&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, components: &#123; //ç»„ä»¶åç§° &quot;web-msg&quot;: &#123; //ç»„ä»¶å†…å®¹ template: &quot;&lt;div&gt;&lt;h1&gt;&#123;&#123;msg1&#125;&#125;&lt;/h1&gt;&lt;h1&gt;&#123;&#123;msg2&#125;&#125;&lt;/h1&gt;&lt;/div&gt;&quot;, data() &#123; return &#123; msg1: &quot;å¼€å‘ing...&quot;, msg2: &quot;å¼€å‘å®Œæˆ!&quot;, &#125;; &#125;, &#125;, &#125;, &#125;);&lt;/script&gt; 7.4 ç»„ä»¶ä¸æ¨¡æ¿åˆ†ç¦»ç”±äºæŠŠhtmlè¯­è¨€å†™åœ¨ç»„ä»¶é‡Œé¢å¾ˆä¸æ–¹ä¾¿ï¼Œä¹Ÿä¸å¤ªå¥½çœ‹æ‰€ä»¥å°†å®ƒä»¬åˆ†å¼€å†™ã€‚ 12345678910111213141516171819202122232425262728293031323334353637&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;web-msg&gt; &lt;/web-msg&gt; &lt;/div&gt; &lt;!-- å°†æ¨¡æ¿å†™åœ¨HTMLä¸­, ç»™æ¨¡æ¿æŒ‡å®šä¸€ä¸ªID --&gt; &lt;template id=&quot;tmp1&quot;&gt; &lt;div&gt; &lt;button @click=&quot;show&quot;&gt; &#123;&#123;msg&#125;&#125; &lt;/button&gt; &lt;/div&gt; &lt;/template&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, components: &#123; &quot;web-msg&quot;: &#123; template: &quot;#tmp1&quot;, data() &#123; return &#123; msg: &quot;ç‚¹å‡»æŸ¥è¯¢&quot;, &#125;; &#125;, methods: &#123; show() &#123; alert(&quot;æ­£åœ¨æŸ¥è¯¢,è¯·ç¨ç­‰...&quot;); &#125;, &#125;, &#125;, &quot;web-msg2&quot;: &#123;&#125;, &#125;, &#125;);&lt;/script&gt; æ€»ç»“ï¼š ä¸Šé¢è¿™ç§å†™æ³•ï¼Œæµè§ˆå™¨ä¼šæŠŠ html é‡Œçš„ template æ ‡ç­¾è¿‡æ»¤æ‰ã€‚æ‰€ä»¥ template æ ‡ç­¾çš„å†…å®¹æ˜¯ä¸ä¼šåœ¨é¡µé¢ä¸­å±•ç¤ºçš„ã€‚ç›´åˆ°å®ƒè¢« JS ä¸­çš„ Vue è°ƒç”¨ã€‚ åœ¨ html ä¸­ï¼Œtemplate æ ‡ç­¾ä¸€å®šè¦æœ‰ä¸€ä¸ª idï¼Œå› ä¸ºé€šè¿‡ id æ˜¯æœ€ç›´æ¥è¢«é€‰ä¸­çš„ã€‚ data å’Œ methodsç­‰ å‚æ•°ï¼Œå…¨éƒ¨éƒ½è¦æ”¾åˆ° Vue å®ä¾‹é‡Œé¢å†™ 8. Vueç”Ÿå‘½å‘¨æœŸ8.1 ç”Ÿå‘½å‘¨æœŸå›¾ç¤ºæ¯ä¸ªVueå®ä¾‹åœ¨è¢«åˆ›å»ºä¹‹å‰éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹,è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯vueçš„ç”Ÿå‘½å‘¨æœŸäº†è§£ç”Ÿå‘½å‘¨æœŸçš„å¥½å¤„: æ‰¾é”™è¯¯ è§£å†³éœ€æ±‚ ä¸‹å›¾å±•ç¤ºäº†å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ ä¸éœ€è¦ç«‹é©¬å¼„æ˜ç™½æ‰€æœ‰çš„ä¸œè¥¿ï¼Œä¸è¿‡éšç€ä½ çš„ä¸æ–­å­¦ä¹ å’Œä½¿ç”¨ï¼Œå®ƒçš„å‚è€ƒä»·å€¼ä¼šè¶Šæ¥è¶Šé«˜ã€‚ 8.2 é’©å­å‡½æ•°ä»‹ç»ç”Ÿå‘½å‘¨æœŸä¸­çš„é’©å­å‡½æ•°é’©å­å‡½æ•°ï¼šé’©å­å‡½æ•°æ˜¯åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œåœ¨ç³»ç»Ÿçº§æ•è·åˆ°äº†ä»–ï¼Œç„¶ååšä¸€äº›æ“ä½œ å‡½æ•° è¯´æ˜ beforeCreate() åœ¨åˆ›å»ºVueå®ä¾‹ä¹‹å‰,å¯ä»¥æ‰§è¡Œè¿™ä¸ªæ–¹æ³•. ä¾‹å¦‚ åŠ è½½åŠ¨ç”»æ“ä½œ created() å®ä¾‹åˆ›å»ºå®Œæˆ,å±æ€§ç»‘å®šå¥½äº†,ä½†æ˜¯DOMè¿˜æ²¡æœ‰ç”Ÿæˆ beforeMount() æ¨¡æ¿å·²ç»åœ¨å†…å­˜ä¸­ç¼–è¾‘å®Œæˆäº†ï¼Œå°šæœªè¢«æ¸²æŸ“åˆ°é¡µé¢ä¸­. mounted() å†…å­˜ä¸­çš„æ¨¡æ¿å·²ç»æ¸²æŸ“åˆ°é¡µé¢ï¼Œç”¨æˆ·å·²ç»å¯ä»¥çœ‹è§å†…å®¹. beforeUpdate() æ•°æ®æ›´æ–°çš„å‰ä¸€åˆ» , ç»„ä»¶åœ¨å‘ç”Ÿæ›´æ–°ä¹‹å‰,è°ƒç”¨çš„å‡½æ•° updated() updatedæ‰§è¡Œæ—¶ï¼Œå†…å­˜ä¸­çš„æ•°æ®å·²æ›´æ–°ï¼Œå¹¶ä¸”é¡µé¢å·²ç»è¢«æ¸²æŸ“ beforeDestroy () é’©å­å‡½æ•°åœ¨å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ destroyed () é’©å­å‡½æ•°åœ¨Vue å®ä¾‹é”€æ¯åè°ƒç”¨ æ¡ˆä¾‹æ¼”ç¤º1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;next&quot;&gt; è·å–ä¸‹ä¸€å¥ &lt;/button&gt; &lt;h2 id=&quot;msg&quot;&gt; &#123;&#123;message&#125;&#125; &lt;/h2&gt; &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var VM = new Vue(&#123; el: &quot;#app&quot;, data: &#123; message: &quot;æƒ³å½“å¹´,é‡‘æˆˆé“é©¬&quot;, &#125;, methods: &#123; next() &#123; this.message = &quot;æ°”åä¸‡é‡Œå¦‚è™!&quot;; &#125;, show() &#123; alert(&quot;showæ–¹æ³•æ‰§è¡Œ!&quot;); &#125;, &#125;, beforeCreate() &#123; alert(&quot;1.beforeCreateå‡½æ•°åœ¨ç»„ä»¶å®ä¾‹åŒ–ä¹‹å‰æ‰§è¡Œ&quot;); alert(this.message); //undefined this.show(); // this.show is not a function &#125;, created() &#123; alert(&quot;2.createdå‡½æ•°æ‰§è¡Œæ—¶,ç»„ä»¶å®ä¾‹åŒ–å®Œæˆ,ä½†æ˜¯DOM(é¡µé¢)è¿˜æœªç”Ÿæˆ&quot;); alert(this.message); this.show(); &#125;, beforeMount() &#123; alert(&quot;3.beforeMountå‡½æ•°æ‰§è¡Œæ—¶ï¼Œæ¨¡æ¿å·²ç»åœ¨å†…å­˜ä¸­ç¼–è¾‘å®Œæˆäº†ï¼Œå°šæœªè¢«æ¸²æŸ“åˆ°é¡µé¢ä¸­&quot;); alert(document.getElementById(&quot;msg&quot;).innerText); //Cannot read property &#x27;innerText&#x27; of null &#125;, mounted() &#123; alert(&quot;4.mountedå‡½æ•°æ‰§è¡Œæ—¶,æ¨¡æ¿å·²ç»æ¸²æŸ“åˆ°é¡µé¢,æ‰§è¡Œå®Œé¡µé¢æ˜¾ç¤º&quot;); alert(document.getElementById(&quot;msg&quot;).innerText); &#125;, beforeUpdate() &#123; alert(&quot;5.beforeUpdateæ‰§è¡Œæ—¶ï¼Œå†…å­˜ä¸­çš„æ•°æ®å·²æ›´æ–°ï¼Œä½†æ˜¯é¡µé¢å°šæœªè¢«æ¸²æŸ“&quot;); alert(&quot;é¡µé¢æ˜¾ç¤ºçš„å†…å®¹:&quot; + document.getElementById(&quot;msg&quot;).innerText); alert(&quot;dataä¸­çš„messageæ•°æ®æ˜¯: &quot; + this.message); &#125;, updated() &#123; alert(&quot;6.updatedæ‰§è¡Œæ—¶ï¼Œå†…å­˜ä¸­çš„æ•°æ®å·²æ›´æ–°,æ­¤æ–¹æ³•æ‰§è¡Œå®Œæ˜¾ç¤ºé¡µé¢!&quot;); &#125;, &#125;);&lt;/script&gt; 9. Vue Router è·¯ç”±9.1 ä»€ä¹ˆæ˜¯è·¯ç”±?åœ¨Webå¼€å‘ä¸­ï¼Œè·¯ç”±æ˜¯æŒ‡æ ¹æ®URLåˆ†é…åˆ°å¯¹åº”çš„å¤„ç†ç¨‹åºã€‚ è·¯ç”±å…è®¸æˆ‘ä»¬é€šè¿‡ä¸åŒçš„ URL è®¿é—®ä¸åŒçš„å†…å®¹ã€‚é€šè¿‡ Vue.js å¯ä»¥å®ç°å¤šè§†å›¾å•é¡µé¢webåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰ 9.2 ä»€ä¹ˆæ˜¯SPA ? ç™¾åº¦ç™¾ç§‘å•é¡µé¢Webåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰ï¼Œå°±æ˜¯åªæœ‰ä¸€å¼ Webé¡µé¢çš„åº”ç”¨ï¼Œæ˜¯åŠ è½½å•ä¸ªHTML é¡µé¢å¹¶åœ¨ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’æ—¶åŠ¨æ€æ›´æ–°è¯¥é¡µé¢çš„Webåº”ç”¨ç¨‹åºã€‚ å•é¡µåº”ç”¨ä¸å­˜åœ¨é¡µé¢è·³è½¬ï¼Œå®ƒæœ¬èº«åªæœ‰ä¸€ä¸ªHTMLé¡µé¢ã€‚æˆ‘ä»¬ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é¡µé¢è·³è½¬åœ¨å•é¡µåº”ç”¨çš„æ¦‚å¿µä¸‹è½¬å˜ä¸ºäº† body å†…æŸäº›å…ƒç´ çš„æ›¿æ¢å’Œæ›´æ–°ï¼Œä¸¾ä¸ªä¾‹å­:æ•´ä¸ªbodyçš„å†…å®¹ä»ç™»å½•ç»„ä»¶å˜æˆäº†æ¬¢è¿é¡µç»„ä»¶, ä»è§†è§‰ä¸Šæ„Ÿå—é¡µé¢å·²ç»è¿›è¡Œäº†è·³è½¬ã€‚ä½†å®é™…ä¸Šï¼Œé¡µé¢åªæ˜¯éšç€ç”¨æˆ·æ“ä½œï¼Œå®ç°äº†å±€éƒ¨å†…å®¹æ›´æ–°,ä¾ç„¶è¿˜æ˜¯åœ¨index.html é¡µé¢ä¸­ã€‚ å•é¡µé¢åº”ç”¨çš„å¥½å¤„ï¼š ç”¨æˆ·æ“ä½œä½“éªŒå¥½ï¼Œç”¨æˆ·ä¸ç”¨åˆ·æ–°é¡µé¢ï¼Œæ•´ä¸ªäº¤äº’è¿‡ç¨‹éƒ½æ˜¯é€šè¿‡Ajaxæ¥æ“ä½œã€‚ é€‚åˆå‰åç«¯åˆ†ç¦»å¼€å‘ï¼ŒæœåŠ¡ç«¯æä¾›httpæ¥å£ï¼Œå‰ç«¯è¯·æ±‚httpæ¥å£è·å–æ•°æ®ï¼Œä½¿ç”¨JSè¿›è¡Œå®¢æˆ·ç«¯æ¸²æŸ“ã€‚ 9.3 è·¯ç”±ç›¸å…³çš„æ¦‚å¿µ router : æ˜¯ Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰å˜å¾—æ˜“å¦‚åæŒ ,router å°±ç›¸å½“äºä¸€ä¸ªç®¡ç†è€…ï¼Œå®ƒæ¥ç®¡ç†è·¯ç”±ã€‚ route: ruterç›¸å½“äºè·¯ç”±å™¨, routeå°±ç›¸å½“äºä¸€æ¡è·¯ç”±.æ¯”å¦‚: HomeæŒ‰é’® &#x3D;&gt; homeå†…å®¹ï¼Œ è¿™æ˜¯ä¸€æ¡route,newsæŒ‰é’® &#x3D;&gt; newså†…å®¹ï¼Œ è¿™æ˜¯å¦ä¸€æ¡è·¯ç”±ã€‚ routes : æ˜¯ä¸€ç»„è·¯ç”±ï¼ŒæŠŠä¸Šé¢çš„æ¯ä¸€æ¡è·¯ç”±ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ•°ç»„ã€‚[{home æŒ‰é’® &#x3D;&gt;homeå†…å®¹ }ï¼Œ {aboutæŒ‰é’® &#x3D;&gt; about å†…å®¹}] router-linkç»„ä»¶: router-link æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæ˜¯å¯¹æ ‡ç­¾çš„ä¸€ä¸ªå°è£…. è¯¥ç»„ä»¶ç”¨äºè®¾ç½®ä¸€ä¸ªå¯¼èˆªé“¾æ¥ï¼Œåˆ‡æ¢ä¸åŒ HTMLå†…å®¹ã€‚ to å±æ€§ä¸ºç›®æ ‡åœ°å€ï¼Œ å³è¦æ˜¾ç¤ºçš„å†…å®¹ router-view ç»„ä»¶: è·¯ç”±å¯¼èˆªåˆ°æŒ‡å®šç»„ä»¶å,è¿›è¡Œæ¸²æŸ“æ˜¾ç¤ºé¡µé¢ 9.4 ä½¿ç”¨è·¯ç”±1ï¼‰ Vue.js è·¯ç”±éœ€è¦è½½å…¥ vue-router åº“ 1234//æ–¹å¼1: æœ¬åœ°å¯¼å…¥ &lt;script src=&quot;vue-router.min.js&quot;&gt;&lt;/script&gt; //æ–¹å¼2: CDN &lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt; 2ï¼‰ ä½¿ç”¨æ­¥éª¤ 1. å®šä¹‰è·¯ç”±æ‰€éœ€çš„ç»„ä»¶ 2. å®šä¹‰è·¯ç”± æ¯ä¸ªè·¯ç”±éƒ½ç”±ä¸¤éƒ¨åˆ† path (è·¯å¾„) å’Œcomponent (ç»„ä»¶) 3. åˆ›å»ºrouterè·¯ç”±å™¨å®ä¾‹ ,ç®¡ç†è·¯ç”± 4. åˆ›å»ºVueå®ä¾‹, æ³¨å…¥è·¯ç”±å¯¹è±¡, ä½¿ç”¨$mount() æŒ‡å®šæŒ‚è½½ç‚¹ 1Vue çš„$mount()ä¸ºæ‰‹åŠ¨æŒ‚è½½ï¼Œåœ¨é¡¹ç›®ä¸­å¯ç”¨äºå»¶æ—¶æŒ‚è½½ï¼ˆä¾‹å¦‚åœ¨æŒ‚è½½ä¹‹å‰è¦è¿›è¡Œä¸€äº›å…¶ä»–æ“ä½œã€åˆ¤æ–­ç­‰ï¼‰ï¼Œ ä¹‹åè¦æ‰‹åŠ¨æŒ‚è½½ä¸Šã€‚new Vueæ—¶ï¼Œelå’Œ$mountå¹¶æ²¡æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒã€‚ 3ï¼‰HTMLä»£ç  12345678910111213141516171819&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;h1&gt; æ¸£æµª.com &lt;/h1&gt; &lt;p&gt; &lt;!-- ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆª,toå±æ€§æŒ‡å®šé“¾æ¥ --&gt; &lt;router-link to=&quot;/home&quot;&gt; go to home &lt;/router-link&gt; &lt;router-link to=&quot;/news&quot;&gt; go to news &lt;/router-link&gt; &lt;/p&gt; &lt;!-- è·¯ç”±çš„å‡ºå£, è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶(é¡µé¢)å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt; &lt;router-view&gt; &lt;/router-view&gt; &lt;/div&gt;&lt;/body&gt; 4ï¼‰ JSä»£ç  12345678910111213141516171819202122232425262728293031&lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;./vue-router.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //1.å®šä¹‰è·¯ç”±æ‰€éœ€çš„ç»„ä»¶ const home = &#123; template: &quot;&lt;div&gt;é¦–é¡µ&lt;/div&gt;&quot; &#125;; const news = &#123; template: &quot;&lt;div&gt;æ–°é—»&lt;/div&gt;&quot; &#125;; //2.å®šä¹‰è·¯ç”± æ¯ä¸ªè·¯ç”±éƒ½æœ‰ä¸¤éƒ¨åˆ† pathå’Œcomponent const routes = [&#123; path: &quot;/home&quot;, component: home &#125;, &#123; path: &quot;/news&quot;, component: news &#125;, ]; //3.åˆ›å»ºrouterè·¯ç”±å™¨å®ä¾‹,å¯¹è·¯ç”±å¯¹è±¡routesè¿›è¡Œç®¡ç†. const router = new VueRouter(&#123; routes: routes, &#125;); //4.åˆ›å»ºVueå®ä¾‹, è°ƒç”¨æŒ‚è½½mountå‡½æ•°,è®©æ•´ä¸ªåº”ç”¨éƒ½æœ‰è·¯ç”±åŠŸèƒ½ const VM = new Vue(&#123; router, &#125;).$mount(&quot;#app&quot;);//$mountæ˜¯æ‰‹åŠ¨æŒ‚è½½ä»£æ›¿el &lt;/script&gt; 9.5 è·¯ç”±æ€»ç»“ routeræ˜¯Vueä¸­çš„è·¯ç”±ç®¡ç†å™¨å¯¹è±¡,ç”¨æ¥ç®¡ç†è·¯ç”±. routeæ˜¯è·¯ç”±å¯¹è±¡,ä¸€ä¸ªè·¯ç”±å°±å¯¹åº”äº†ä¸€æ¡è®¿é—®è·¯å¾„,ä¸€ç»„è·¯ç”±ç”¨routesè¡¨ç¤º æ¯ä¸ªè·¯ç”±å¯¹è±¡éƒ½æœ‰ä¸¤éƒ¨åˆ† path(è·¯å¾„)å’Œcomponent (ç»„ä»¶) router-link æ˜¯å¯¹aæ ‡ç­¾çš„å°è£…,é€šè¿‡toå±æ€§æŒ‡å®šè¿æ¥ router-view è·¯ç”±è®¿é—®åˆ°æŒ‡å®šç»„ä»¶å,è¿›è¡Œé¡µé¢å±•ç¤º","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"é‚£å¥³å­©å¯¹æˆ‘è¯´","slug":"é‚£å¥³å­©å¯¹æˆ‘è¯´ï¼ˆå‰ä»–è°±ï¼‰","date":"2021-02-24T02:52:37.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2021/02/24/é‚£å¥³å­©å¯¹æˆ‘è¯´ï¼ˆå‰ä»–è°±ï¼‰/","link":"","permalink":"http://yournotes.cn/2021/02/24/%E9%82%A3%E5%A5%B3%E5%AD%A9%E5%AF%B9%E6%88%91%E8%AF%B4%EF%BC%88%E5%90%89%E4%BB%96%E8%B0%B1%EF%BC%89/","excerpt":"ã€Šé‚£å¥³å­©å¯¹æˆ‘è¯´ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šé‚£å¥³å­©å¯¹æˆ‘è¯´ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"ä¿®ç‚¼çˆ±æƒ…","slug":"ä¿®ç‚¼çˆ±æƒ…ï¼ˆå‰ä»–è°±ï¼‰","date":"2021-02-24T02:52:17.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/02/24/ä¿®ç‚¼çˆ±æƒ…ï¼ˆå‰ä»–è°±ï¼‰/","link":"","permalink":"http://yournotes.cn/2021/02/24/%E4%BF%AE%E7%82%BC%E7%88%B1%E6%83%85%EF%BC%88%E5%90%89%E4%BB%96%E8%B0%B1%EF%BC%89/","excerpt":"ã€Šä¿®ç‚¼çˆ±æƒ…ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šä¿®ç‚¼çˆ±æƒ…ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹åŠ¨æ€è§„åˆ’ï¼š198.æ‰“å®¶åŠ«èˆ","slug":"æ‰“å®¶åŠ«èˆ","date":"2021-02-22T17:40:17.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2021/02/23/æ‰“å®¶åŠ«èˆ/","link":"","permalink":"http://yournotes.cn/2021/02/23/%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D/","excerpt":"","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/house-robber/ ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚ ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚ ç¤ºä¾‹ 1ï¼š 1234è¾“å…¥ï¼š[1,2,3,1]è¾“å‡ºï¼š4è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚ ç¤ºä¾‹ 2ï¼š 1234è¾“å…¥ï¼š[2,7,9,3,1]è¾“å‡ºï¼š12è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚ æç¤ºï¼š 0 &lt;&#x3D; nums.length &lt;&#x3D; 1000 &lt;&#x3D; nums[i] &lt;&#x3D; 400 è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ç”±é¢˜çŸ¥é“æˆ‘ä»¬çš„è¿™ä¸ªå°å·ä»–å·ä¸€å®¶å¿…é¡»å¾—è‡³å°‘éš”ä¸€å®¶å†å·ä¸èƒ½è¿ç€å·ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä»æœ€ç®€å•çš„æ¥æ¨å¯¼çœ‹çœ‹ï¼š 1234ä¸€æ¡è¡—ä¸€å¼€å§‹åªæœ‰ä¸€å®¶ï¼š2å—åæ¥æ¬æ¥äº†ä¸€å®¶æœ‰é’±äººï¼š7å—åæ¥é™†é™†ç»­ç»­æ¥äº†å‡ å®¶ï¼š3å—ã€4å—ã€5å— é‚£åªæœ‰ä¸€å®¶çš„æ—¶å€™åªèƒ½å·2å—f(1) = 2æœ‰ä¸¤å®¶äº†è¿›è¡Œä¸€æ¬¡é€‰æ‹©æŒ‘ä¸ªå¯Œçš„f(2) = max(ç¬¬ä¸€å®¶ï¼Œç¬¬äºŒå®¶) &#x3D; 7æœ‰ä¸‰å®¶çš„æ—¶å€™ä¹Ÿè¦è¿›è¡Œä¸€æ¬¡é€‰æ‹©f(3) = max(f(1)+ç¬¬ä¸‰å®¶ï¼Œf(2)) &#x3D; 7åˆ°è¿™ä¸ªåœ°æ–¹å…¶å®å°±å‡ºæ¥äº†è¡¨è¾¾å¼dp[i] = max(dp[i - 2] + nums[i] , dp[i - 1])å­˜å‚¨ä¹‹å‰çš„ç»“æœæ¨å¯¼ä¸‹ä¸€ä¸ªç»“æœï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€è§„åˆ’è¿‡æ»¤æ‰ä¸€åŠçš„ç»„åˆã€‚æ¯”å¦‚ï¼ˆ2ï¼Œ7ï¼Œ3ï¼Œ4ï¼‰å¯¹äºï¼ˆ2ï¼Œ7ï¼Œ3ï¼‰æˆ‘ä»¬å·²ç»å¾—åˆ°æœ€å¤§æ–¹æ¡ˆæ˜¯7å¹¶è®°å½•äº†ï¼Œé‚£ä¹ˆä¸ç¬¬å››å®¶4å—ç»“åˆçš„å¿…ä¸æ˜¯ï¼ˆ2ã€3ï¼‰é‡Œçš„ã€‚4å®¶è™½ç„¶æœ‰ä¸‰ç§ç»„åˆä½†ï¼ˆ2+4ï¼‰è¿™ç§ç»„åˆå°±ä¸ä¼šå‡ºç°åœ¨è®¡ç®—ä¸­ åŠ¨æ€è§„åˆ’æ¯æ¬¡è®°å½•ä¹‹å‰çš„å·çš„æœ€å¤šä¸å‰å‰å·çš„æœ€å¤šçš„å€¼ï¼Œè¿›è¡Œå–èˆï¼Œè¦ä¹ˆæ˜¯å‰å‰çš„ç´¯è®¡æœ€å¤§é‡‘é¢ç®—ä¸Šå½“å‰æˆ¿å­å¤§è¦ä¹ˆå°±è¿˜æ˜¯ä¹‹å‰çš„æœ€å¤§ï¼Œé¿å…æ ‘å½¢å±•å¼€ æ‰€ä»¥æˆ‘ä»¬è¦å‡†å¤‡å­˜ä¸¤ä¸ªé‡ä¸€ä¸ªæ˜¯æœ€æ–°çš„æœ€å¤§é‡‘é¢ä¹Ÿå°±æ˜¯ç»“æœï¼Œè¦åŠ¨æ€çš„é€‰æ‹©ç»“æœè¿˜è¦ä¸€ä¸ªå‰å‡ ä¸ªæˆ¿å­çš„æœ€å¤§é‡‘é¢ï¼Œæ¥å†³å®šä¸‹æ¬¡å·è¿˜æ˜¯ä¸å· ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819class Solution &#123; public int rob(int[] nums) &#123; if (nums == null || nums.length == 0) &#123; return 0; &#125; if (nums.length == 1) &#123; return nums[0]; &#125; // ä¸¤ä¸ªé‡ï¼šåˆ°ç›®å‰ç´¯è®¡æœ€å¤§ä¸ä¹‹å‰æˆ¿å±‹ç´¯è®¡æœ€å¤§ int[] dp = [nums[0],Math.max(nums[0],nums[1])]; for (int i = 2; i &lt; length; i++) &#123; // æ‰«æåˆ°ä¸‹ä¸€ä¸ªäº†ï¼Œä¸¤ä¸ªé‡æŒ‰æ¬¡åºå˜æ¢ int temp = dp[1]; second = Math.max(dp[0] + nums[i], dp[1]); dp[0] = temp; &#125; return result; &#125;&#125; æ€»ç»“å…¶å®è¿™é¢˜å’Œä¹‹å‰å†™çš„çˆ¬æ¥¼æ¢¯æ¯”è¾ƒåƒï¼Œå¯ä»¥å¯¹ç…§ç€æ€»ç»“ã€‚æ€»ä½“æ¥è¯´ç¬¬ä¸€å°±æ˜¯dpè¡¨ä¹Ÿå°±æ˜¯å¤‡å¿˜å½•è§£å†³å­é—®é¢˜é‡å ï¼Œç¬¬äºŒå°±æ˜¯ç©ºé—´çš„å‹ç¼©æˆ‘ä»¬éœ€è¦æ˜ç™½æ˜¯å¦å¿…è¦å­˜æ¯ä¸ªå­é—®é¢˜çš„ç»“æœã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹åŠ¨æ€è§„åˆ’ï¼š53.æœ€å¤§å­åºå’Œ","slug":"æœ€å¤§å­åºå’Œ","date":"2021-02-21T08:54:13.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2021/02/21/æœ€å¤§å­åºå’Œ/","link":"","permalink":"http://yournotes.cn/2021/02/21/%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%92%8C/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/maximum-subarray/ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/maximum-subarray/ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚ ç¤ºä¾‹: 123è¾“å…¥: [-2,1,-3,4,-1,2,1,-5,4]è¾“å‡º: 6è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚ è¿›é˜¶:å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º O(n) çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„åˆ†æ²»æ³•æ±‚è§£ã€‚ è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’é¦–å…ˆæˆ‘ä»¬å»åˆ’åˆ†ä¸€ä¸‹å­é—®é¢˜ã€‚æ•´ä¸ªæ•°åˆ—çš„æœ€å¤§å­åºå’Œï¼Œä»–æ˜¯å¯èƒ½å°±ç­‰äºn-1çš„æœ€å¤§å­åºå’Œï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯ä¸ªæ–°çš„å€¼ã€‚è‡³å°‘æ˜¯è¿™ä¸¤ç§æƒ…å†µ æƒ…å†µä¸€ï¼š 123[-1,3,1,-4,1]å½“å‰æ•°åˆ—çš„æœ€å¤§å­åºå’Œå°±æ˜¯4ä¹Ÿå°±æ˜¯(1,2)é¡¹ã€‚å®ƒä¹Ÿæ˜¯å‰n-1é¡¹çš„æœ€å¤§å­åºå’Œ æƒ…å†µäºŒï¼š 123[-1,3,1,-4,5]å½“å‰æ•°åˆ—çš„æœ€å¤§å­åºå’Œæ˜¯5ä¹Ÿå°±æ˜¯(4)é¡¹è€Œå‰n-1é¡¹çš„æ•°åˆ—æœ€å¤§å­åºå’Œè¿˜æ˜¯4ä¹Ÿå°±æ˜¯(1,2)é¡¹ æ¯æ¬¡å¾€åè¿­ä»£ä¸€ä¸ªå€¼å®ƒçš„ç»“æœå¯èƒ½å˜åŒ–ä¹Ÿå¯èƒ½ä¸å˜åŒ–ï¼Œè¿™å°±æ˜¯è®°å½•çš„ç‚¹ã€‚æˆ‘ä»¬ç®—å‡ºå½“å‰æœ€å¤§çš„å€¼ç„¶åä¸ä¹‹å‰çš„resultè¿›è¡Œæ¯”è¾ƒå¯èƒ½æ›´æ–°resultä¹Ÿå¯èƒ½ä¸å˜ï¼Œè¿›è¡Œä¸‹ä¸ªè¿­ä»£å†æ¬¡ç®—å½“å‰æœ€å¥½çš„å€¼å†ä¸resultæ¯”è¾ƒã€‚ é‚£ä¹ˆå”¯ä¸€çš„é—®é¢˜å°±æ˜¯å½“å‰çš„æœ€å¤§å€¼æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸æ˜¯å»æš´åŠ›å…¨éƒ¨åºåˆ—ï¼Œè€Œæ˜¯è·³è¿‡ä¸å¿…è¦çš„ï¼Œå³å½“å‰é¢sumä¸ºè´Ÿçš„æ—¶å€™ï¼Œå³ä½¿åé¢æœ‰å¤§çš„ä¹Ÿæ²¡å¿…è¦åŠ ä¸Šè´Ÿçš„ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è·³åºåˆ—çš„é¦–æŒ‡é’ˆæ¥è¾¾åˆ°å‡å°‘éå†åƒæ¬¡æ•° 123456[2,-1,-3,-4,7]æˆ‘ä»¬å¤§æ¦‚éœ€è¦å››ä¸ªå˜é‡result = 0 // ç»“æœi = 0 // åºåˆ—çš„é¦–æŒ‡é’ˆj = 0 // åºåˆ—çš„å°¾æŒ‡é’ˆsum = 0 //å½“å‰åºåˆ—å’Œ ä½†æˆ‘ä»¬è®°å½•sumå°±ä»£è¡¨iè‡³jäº†ï¼Œæ‰€ä»¥ä¸ç”¨æŒ‡é’ˆå˜é‡ä»£ç å¦‚ä¸‹ï¼š 12345678910public int maxSubArray(int[] nums) &#123; //sumè¡¨ç¤ºä¸Šä¸€ä¸ªæœ€å¤§å­åºå’Œä¹Ÿå°±æ˜¯dp[n-1] int sum = 0; int result = nums[0]; for(int i = 0; i &lt; nums.length; i++)&#123; sum = sum &gt; 0 ? sum + nums[i] : nums[i]; max = max &gt; sum ? max : sum; &#125; return max;&#125; æ€»ç»“è¿™é¢˜çš„è¯è™½ç„¶æ˜¯ç®€å•ä½†è¿˜æ˜¯è¦ç‚¹æ€è€ƒçš„ï¼Œç”¨åˆ°äº†åŠ¨æ€ä¸è´ªå¿ƒçš„æ€æƒ³åˆèµ·æ¥å‡å°‘äº†éå†ä¸€éçš„æ¬¡æ•°ã€‚å…³äºè‡ªé¡¶å‘ä¸‹çš„åˆ†æ²»æ¯”è¾ƒé€‚åˆä¹‹åç­¹å¤‡çš„å¦ä¸€ä¸ªç³»åˆ—ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å±•å¼€äº†","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹åŠ¨æ€è§„åˆ’ï¼š121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº","slug":"ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº","date":"2021-01-30T08:15:37.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/01/30/ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº/","link":"","permalink":"http://yournotes.cn/2021/01/30/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/ ç»™å®šä¸€ä¸ªæ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´  prices[i] è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/ ç»™å®šä¸€ä¸ªæ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´  prices[i] è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚ ä½ åªèƒ½é€‰æ‹© æŸä¸€å¤© ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨ æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­ å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ è¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å› 0 ã€‚ ç¤ºä¾‹ 1ï¼š 1234è¾“å…¥ï¼š[7,1,5,3,6,4]è¾“å‡ºï¼š5è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚ æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šprices = [7,6,4,3,1]è¾“å‡ºï¼š0è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚ æç¤ºï¼š 121 &lt;= prices.length &lt;= 1050 &lt;= prices[i] &lt;= 104 è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•è¿™é¢˜çš„è¯æš´åŠ›è§£æ³•åº”è¯¥æ˜¯æ¯ä¸ªå°ä¼™ä¼´ä¸€çœ‹åˆ°é¢˜å°±æƒ³åˆ°çš„è§£æ³•ï¼Œè¿™é‡Œä¹Ÿä¸ä¾‹å¤–å…ˆå†™ä¸ªæš´åŠ›è§£æ³•ã€‚ä¹Ÿå°±æ˜¯ç©·ä¸¾æ‰€æœ‰ç»„åˆçš„æ”¶ç›Šå†æ‰¾æœ€å¤§ ä¸¾ä¸ªä¾‹å­ï¼š[7,1,5,3,6,4] 1234567891011121314157 -&gt; 1 = -67 -&gt; 5 = -27 -&gt; 3 = -47 -&gt; 6 = -17 -&gt; 4 = -31 -&gt; 5 = +41 -&gt; 3 = +21 -&gt; 6 = +51 -&gt; 4 = +35 -&gt; 3 = -25 -&gt; 6 = +15 -&gt; 4 = -13 -&gt; 6 = +33 -&gt; 4 = +16 -&gt; 4 = -2 ç©·ä¸¾æ‰€æœ‰çš„ä¹°å–ç»„åˆåï¼Œæœ€å¤§æ”¶ç›Šæ˜¯+5 å®ç°æ­¥éª¤ï¼š ç¬¬ä¸€æ˜¯æ‰«æå…¨éƒ¨ç»„åˆ ç¬¬äºŒæ˜¯è®°å½•max ç¬¬ä¸‰è¿”å›æœ€ç»ˆmax ä»£ç å¦‚ä¸‹ï¼š 123456789101112public int maxProfit(int prices[]) &#123; int max = 0; for(int i = 0; i &lt; prices.length-1; i++)&#123; for(int j = i+1; j &lt; prices.length; j++)&#123; int income = prices[j] - prices[i]; if(income &gt; max)&#123; max = income; &#125; &#125; &#125; return max;&#125; å¤–å¾ªç¯æ˜¯n-1æ¬¡,å†…å¾ªç¯æ˜¯(n-1ã€n-2ã€â€¦.1) æ€»å…±æ˜¯$\\frac{n^2}{2}$æ¬¡æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2) ç©ºé—´ä»…ä»…ä½¿ç”¨äº†ä¸¤å˜é‡å› æ­¤æ˜¯O(1) è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ä¸Šä¸ªè§£æ³•æ—¶é—´å¤æ‚åº¦å¤ªé«˜ï¼Œåœ¨LeetCodeç§æµ‹è¯•ä¹Ÿæ˜¯è¶…æ—¶çš„ã€‚ä½œä¸ºä¸€ä¸ªåŠ¨æ€è§„åˆ’åˆé›†çš„é¢˜é‚£æˆ‘ä»¬è‚¯å®šæ˜¯è¦ç”¨åŠ¨æ€è§„åˆ’æ¥è§£ä¸€è§£ã€‚ æˆ‘ä»¬æ€æ ·å»æ€è€ƒï¼š iå¤©çš„æœ€ç»ˆæœ€é«˜æ”¶ç›Šå¯ä»¥æ€æ ·å»åˆ’åˆ†å‘¢ï¼Ÿ å®ƒå¯èƒ½å°±æ˜¯å‰i-1å¤©çš„æœ€é«˜æ”¶ç›Šæ˜¯ä¸å˜çš„ 123[4,2,1,5,4]è¿™5å¤©æœ€é«˜æ”¶ç›Šæ˜¯ç¬¬ä¸‰å¤©ä¹°ç¬¬å››å¤©å–æœ€é«˜ä¸º4ä¹Ÿå°±æ˜¯å‰4å¤©çš„æœ€é«˜çš„ç»„åˆã€‚ å®ƒä¹Ÿå¯èƒ½å˜åŒ–æ¯”å‰i-1å¤©çš„æœ€é«˜æ”¶ç›Šå¤š 123[4,2,1,5,7]è¿™5å¤©çš„å‰4å¤©æœ€é«˜æ”¶ç›Šæ˜¯4ç®—ä¸Šç¬¬5å¤©çš„è¯å°±åº”è¯¥æ˜¯6 æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šå®ƒæ— éä¸¤ç§æƒ…å†µå–æœ€å¤§ å‰iå¤©çš„æœ€å¤§æ”¶ç›Š = max(å‰i-1å¤©çš„æœ€å¤§æ”¶ç›Šï¼Œç¬¬iå¤©çš„ä»·æ ¼-å‰i-1å¤©ä¸­çš„æœ€å°ä»·æ ¼) è¿™é‡Œè¦è¿­ä»£è¦å­˜å‚¨çš„å€¼ä¸ä»…ä»…æœ‰æ”¶ç›Šç»“æœè¿˜æœ‰æœ€å°å€¼å› æ­¤è‡ªåº•å‘ä¸Šæ›´å¥½äº›ã€‚æ¯åå¾€éå†ä¸€ä¸ªè¿›æ¥å°±åˆ¤æ–­maxæ˜¯ä¸å˜è¿˜æ˜¯æœ‰æ›´å¤§ï¼ˆè®°å½•ä¸‹å½“å‰æœ€å°å€¼ä»¥åŠå½“å‰çš„ç»“æœï¼‰ ä»£ç å¦‚ä¸‹ï¼š 123456789101112public int maxProfit(int[] prices) &#123; if(prices.length &lt; 2)&#123; return 0; &#125; int min = prices[0]; int max = 0; for(int i = 1; i &lt; prices.length; i++) &#123; max = max &gt; (prices[i] - min) ? max : prices[i] - min; min = min &lt; prices[i] ? min : prices[i]; &#125; return max;&#125; æ¯”èµ·è‡ªåº•å‘ä¸Šæ¥è¯´ï¼Œè‡ªé¡¶å‘ä¸‹ä¼šéº»çƒ¦ä¸€äº›ã€‚ä½†æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œç”»ä¸ªå›¾ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223public int maxProfit(int[] prices) &#123; return recurrent(prices,prices.length-1);&#125;int recurrent(int[] nums,int index)&#123; if(index == 0)&#123; return 0; &#125; int right = nums[index] - min(nums,index); int left = recurrent(nums,--index); if(left &gt; right)&#123; return left; &#125; return right;&#125;int min(int[] nums,int index)&#123; int min = nums[0]; for(int i = 1; i &lt; index; i++)&#123; if(nums[i] &lt; min)&#123; min = nums[i]; &#125; &#125; return min;&#125; å®ƒçš„è¿­ä»£æ·±åº¦æ˜¯n,ä½†æ˜¯æ—è¾¹éƒ½æœ‰ä¸€ä¸ªæ‰¾æœ€å°ä¹Ÿæ˜¯næ‰€ä»¥æ—¶é—´å¤æ‚åº¦O($n^2$),å¦‚æœæ‰¾æœ€å°ä¹Ÿæ˜¯ç”¨é€’å½’çš„è¯å°±å·®ä¸å¤šæ˜¯O($2^n$)ã€‚ä¸è¿‡å³ä½¿æ˜¯nçš„äºŒæ¬¡æ–¹ä¹Ÿæ˜¯ä»è¶…æ—¶çš„å’Œæš´åŠ›ä¸€æ ·å¤æ‚åº¦ã€‚ å½’æ ¹åˆ°åº•è¿˜æ˜¯å› ä¸ºåªè¿›è¡Œäº†è¿­ä»£çš„æ€è·¯æ²¡è¿›è¡Œè®°å½•ã€‚è¿™è¾¹å› ä¸ºé€’å½’éƒ¨åˆ†å°±æ˜¯çº¿æ€§çš„æ‰€ä»¥æ²¡æœ‰å¤šä½™çš„ï¼Œä¸»è¦å°±æ˜¯æœ€å°å€¼é‚£è¾¹å¹³å‡æ¯ä¸ªè¿›è¡Œn&#x2F;2æ¬¡ã€‚æ‰€ä»¥æ˜¯å¯ä»¥è®°å½•ä¸€ä¸‹çš„å¦‚æœå½“å‰ç´¢å¼•çš„å€¼ä¸æ˜¯ä¹‹å‰é‚£ä¸ªæœ€å°å€¼ã€‚è¯´æ˜å‰©ä¸‹çš„æ•°åˆ—æœ€å°å€¼è¿˜åœ¨é‡Œé¢è¿˜æ˜¯ä¹‹å‰é‚£ä¸ªä¸ç”¨é‡æ–°éå†ã€‚æ€»ä½“ä¸Šè¿˜æ˜¯å¤æ‚åº¦è¿˜æ˜¯ä¸è¡Œçš„ã€‚ æ€»ç»“ä»Šæ—¥è¿™é¢˜çš„è¯è¿˜æ˜¯æ¯”è¾ƒå¥½åšçš„ï¼Œæœ‰ç‚¹ä¸åŒçš„æ˜¯è¿­ä»£çš„ç»“æ„ä¸æ˜¯åŒä¸€ç§ç±»å‹ã€‚åŠ¨æ€è§„åˆ’çš„é¢˜è‡ªé¡¶å‘ä¸‹ä¸è‡ªåº•å‘ä¸Šä¸¤ä¸ªæ–¹å‘æ¯é¢˜éƒ½å¯è¿›è¡ŒåŒæ—¶ç»ƒä¹ ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"å»å¤§ç†","slug":"å»å¤§ç†","date":"2021-01-17T09:31:38.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2021/01/17/å»å¤§ç†/","link":"","permalink":"http://yournotes.cn/2021/01/17/%E5%8E%BB%E5%A4%A7%E7%90%86/","excerpt":"ã€Šå»å¤§ç†ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå»å¤§ç†ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"å†è§","slug":"å†è§","date":"2021-01-17T09:31:28.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2021/01/17/å†è§/","link":"","permalink":"http://yournotes.cn/2021/01/17/%E5%86%8D%E8%A7%81/","excerpt":"ã€Šå†è§ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå†è§ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹åŠ¨æ€è§„åˆ’ï¼š70.çˆ¬æ¥¼æ¢¯","slug":"çˆ¬æ¥¼æ¢¯","date":"2021-01-17T08:15:37.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2021/01/17/çˆ¬æ¥¼æ¢¯/","link":"","permalink":"http://yournotes.cn/2021/01/17/%E7%88%AC%E6%A5%BC%E6%A2%AF/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼š https://leetcode-cn.com/problems/climbing-stairs/ å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼š https://leetcode-cn.com/problems/climbing-stairs/ å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ æ³¨æ„ï¼š ç»™å®š n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚ ç¤ºä¾‹ 1ï¼š 12345è¾“å…¥ï¼š 2è¾“å‡ºï¼š 2è§£é‡Šï¼š æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚1. 1 é˜¶ + 1 é˜¶2. 2 é˜¶ ç¤ºä¾‹ 2ï¼š 123456è¾“å…¥ï¼š 3è¾“å‡ºï¼š 3è§£é‡Šï¼š æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚1. 1 é˜¶ + 1 é˜¶ + 1 é˜¶2. 1 é˜¶ + 2 é˜¶3. 2 é˜¶ + 1 é˜¶ æ€è·¯ä¸€ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—æˆ‘ä»¬å¯ä»¥çœ‹å…ˆæ¨æ¼”å‡ ä¸ªçœ‹çœ‹ ä¸€ä¸ªå°é˜¶ï¼šåªæœ‰ä¸€ç§è·³æ³•å°±æ˜¯è·³ä¸€æ ¼ ä¸¤ä¸ªå°é˜¶ï¼šè·³ä¸€æ ¼è·³ä¸¤æ¬¡å’Œè·³ä¸€æ¬¡2æ ¼çš„ ä¸‰ä¸ªå°é˜¶ï¼š1+1+1ã€2+1ã€1+2ï¼ˆå…±ä¸‰ç§ï¼‰ å››ä¸ªå°é˜¶ï¼š1+1+1+1ã€2+1+1ã€1+2+1ã€1+1+2ã€2+2ï¼ˆå…±äº”ç§ï¼‰ äº”ä¸ªå°é˜¶1+1+1+1ã€2+1+1+1ã€1+2+1+1ã€1+1+2+1ã€1+1+1+2ã€2+2+1ã€2+1+2ã€1+2+2ï¼ˆå…±å…«ç§ï¼‰ æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§„å¾‹ï¼Œä»–æ˜¯ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œé¢˜ç›®æ­£æ•´æ•°å°±ä¸ä»æ•°åˆ—çš„ç¬¬0ä¸ªæèµ·äº†ç›´æ¥ä»ç¬¬ä¸€ä¸ªå¼€å§‹ å°é˜¶æ•°ï¼ˆnï¼‰ æ–¹æ³•æ€»æ•°(result) 1 1 2 2 3 3 4 5 5 8 æ–æ³¢é‚£å¥‘æ•°åˆ—å®ƒæ˜¯æœ‰å…¬å¼çš„é€šè¿‡nç›´æ¥è®¡ç®—å‡ºresultã€‚ $$\\frac{1}{\\sqrt{5}}*[(\\frac{1+\\sqrt5}{2})^n - (\\frac{1-\\sqrt5}{2})^n]$$ è¿™é‡Œæˆ‘ä»¬å…ˆå‡è£…ä¸çŸ¥é“æœ‰å…¬å¼ æˆ‘ä»¬ç”¨è¿­ä»£çš„æ–¹å¼æ¨å¯¼: æ¯æ¬¡è¦é€šè¿‡å‰ä¸¤é¡¹è®°å½•æ–°çš„å€¼ï¼Œå†è¿›è¡Œè¿­ä»£ç›´åˆ°æœ€åæ˜¯æˆ‘ä»¬è¦çš„ç¬¬nä¸ªã€‚è¿™é‡Œæœ‰ä¸ªç©ºé—´ä¸Šçš„æ³¨æ„å°±æ˜¯æˆ‘ä»¬ä¸å¿…è¦è®°å½•æ•´ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œåªéœ€è¦ä¿ç•™ä¸¤ä¸ªè€Œå·²ã€‚ ä»£ç ä¸€ï¼š 1234567891011121314public int climbStairs(int n) &#123; // åˆå§‹å€¼ if(n == 1)&#123; return n; &#125; int[] nums = &#123;1,2&#125;; // ä¸Šä¸ªå€¼ä¸æ–°çš„å€¼ç»„æˆæ–°çš„äºŒå…ƒæ•°ç»„ for(int i = 2; i &lt; n; i++)&#123; int temp = nums[0] + nums[1]; nums[0] = nums[1]; nums[1] = temp; &#125; return nums[1];&#125; æ€»ä½“æ¥è¯´è¿˜æ˜¯ä¸é”™çš„ï¼Œæ—¶é—´O(n)ï¼Œç©ºé—´O(1) ç„¶åå°±æ˜¯é€šé¡¹å…¬å¼è§£ï¼Œä¸ç”¨è¯´äº†å®ƒæœ€ä¼˜ï¼Œä¸è¿‡æˆ‘ä»¬ä¸å¯å¿½è§†çš„æ˜¯å¹³æ–¹æ ¹çš„å¤æ‚åº¦O(logn)ã€‚å…³äºè¿™äº›è¿˜æœ‰æ–æ³¢é‚£å¥‘çŠ¶æ€å…¬å¼çš„æ¨å¯¼åœ¨å¦å¤–ä¸€ç¯‡ä»‹ç» 12345public int climbStairs(int n) &#123; double sqrt5 = Math.sqrt(5); double fibn = Math.pow((1 + sqrt5) / 2, n + 1) - Math.pow((1 - sqrt5) / 2, n + 1); return (int) Math.round(fibn / sqrt5);&#125; æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’å› ä¸ºè¿™é¢˜æ¯”è¾ƒç‰¹æ®Šï¼Œå…¶å®åŠ¨æ€è§„åˆ’çš„è§£æ³•ä»£ç ä¸Šé¢å°±å·²ç»æ˜¯äº†ä½†æ€è€ƒçš„èšç„¦ç‚¹ä¸åŒã€‚è¿™é‡Œè¿˜æ˜¯è¦ç”¨è¿™é¢˜ä½“ä¼šä¸€ä¸‹åŠ¨æ€è§„åˆ’çš„æ€è·¯ã€‚dpå®ƒæ˜¯ä¸€ç§æ€æƒ³æ–¹å¼ï¼Œç”¨å·²çŸ¥çš„é—®é¢˜çš„è§£è§£å†³æ–°é—®é¢˜ã€‚é€’å½’æˆ–è€…è¿­ä»£å®ƒåªæ˜¯å®ç°è¿™ç§æƒ³æ³•çš„ä¸€ç§ä»£ç ä¹¦å†™æ–¹å¼æ— è®ºæˆ‘ä»¬æœ‰æ²¡æœ‰å»åšç©ºé—´ä¼˜åŒ–å®ƒéƒ½å±äºè¿™ç§æ€æƒ³ï¼Œèƒ½å‹ç¼©ç©ºé—´å½“ç„¶æ›´å¥½ã€‚è¿™é‡Œå…ˆä¸å•ç‹¬æ¢ç©¶è¿™ä¸ªæ¦‚å¿µã€‚ é‚£ä¹ˆå°±æ˜¯ç”¨å·²è§£å†³çš„é—®é¢˜å¾—å‡ºæˆ‘ä»¬çš„é—®é¢˜è§£ä¹Ÿå°±æ˜¯åˆ’åˆ†å­é—®é¢˜ï¼Œçˆ¬ç¬¬né˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ï¼Œç­‰äº 2 éƒ¨åˆ†ä¹‹å’Œï¼ˆå°±æ˜¯æœ€åä¸€æ¬¡çš„ï¼‰ çˆ¬ä¸Š n-1 é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ã€‚å› ä¸ºå†çˆ¬ä¸€æ¬¡1é˜¶å°±èƒ½åˆ°ç¬¬né˜¶ çˆ¬ä¸Š n-2 é˜¶æ¥¼æ¢¯çš„æ–¹æ³•æ•°é‡ã€‚å› ä¸ºå†çˆ¬ä¸€æ¬¡2é˜¶å°±èƒ½åˆ°ç¬¬né˜¶ æ‰€ä»¥æˆ‘ä»¬å¾—åˆ°å…¬å¼ 1dp[n] = dp[n-1] + dp[n-2] åŒæ—¶éœ€è¦åˆå§‹åŒ– 12dp[0]=1dp[1]=2 æ—¶é—´å¤æ‚åº¦ï¼šO(n) ä»£ç äºŒï¼š 123456789public int climbStairs(int n) &#123; int[] dp = new int[n + 1]; dp[0] = 1; dp[1] = 2; for(int i = 2; i &lt; n; i++) &#123; dp[i] = dp[i - 1] + dp[i - 2]; &#125; return dp[n-1];&#125; æ‰€ä»¥è¿™é‡Œå°±å­˜åœ¨ç©ºé—´ä¼˜åŒ–å˜›ï¼Œè®°å½•å­é—®é¢˜è§£çš„æ—¶å€™ä¸éœ€è¦å…¨éƒ¨çš„ã€‚ç”¨æ»‘åŠ¨æ•°ç»„çš„æ–¹å¼åªç•™ä¸¤ä¸ªå°±è¡Œäº† ä»£ç ä¸‰ï¼š å°±æ˜¯è§£æ³•ä¸€ä¸Šé¢çš„è§£ 12345678910public int climbStairs(int n) &#123; if(n == 1) return 1; int[] dp = &#123;1,2&#125;; for(int i = 2; i &lt; n; i++)&#123; int temp = dp[0] + dp[1]; dp[0] = dp[1]; dp[1] = temp; &#125; return dp[1];&#125; è¿™æ ·çš„æ€è·¯è¿™æ ·çš„çŠ¶æ€å¼å­ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥ç”¨é€’å½’å†™å•Š ä»£ç å››ï¼š 12345678public int climbStairs(int n) &#123; //é€’å½’å‡ºå£ if(n == 1 || n == 2) &#123; return n; &#125; //è¿‡ç¨‹åŠä¸»ä½“ return climbStairs(n-1) + climbStairs(n-2);&#125; è¿™ä¸ªä¸œè¥¿æ˜¯æœ‰é—®é¢˜å¾…è§£å†³çš„åœ¨æµ‹è¯•çš„æ—¶å€™ä¹Ÿæ˜¯è¶…æ—¶çš„ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨åŠ¨æ€è§„åˆ’è¦æ€è€ƒçš„é‡å¤è®¡ç®—çš„é—®é¢˜ï¼Œå‰é¢æ˜¯è‡ªåº•å‘ä¸Šæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡è®°å½•æ–°çš„äºŒå…ƒæ•°ç»„å¾€åç»§ç»­æ˜¯çº¿æ€§çš„ï¼Œç°åœ¨è‡ªé¡¶å‘ä¸‹æ¯”å¦‚ç¬¬ä¸€å±‚n-1ä¸n-2çš„æƒ…å†µè®¡ç®—æ˜¯é‡å¤çš„ï¼Œæˆ‘ä»¬æ¥ç”»ä¸ªå›¾çœ‹çœ‹ é¦–å…ˆå®ƒä¸æ˜¯ä¸€çº¿æ€§çš„ï¼Œè€Œä¸”ä¸¤è¾¹çš„è®¡ç®—æ˜¯é‡å¤çš„ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $2^n$ ï¼Œå®ƒæœ¬æ¥ä¸€æ¡çº¿å¤æ‚åº¦nå°±ç®—å®Œäº†ä½†ä¸€ç›´æœ‰é‡å¤è®¡ç®—né•¿çš„çº¿å˜æˆçš„nå±‚çš„æ ‘å› ä¸ºä»–ä»¬ç›¸äº’åŒ…å«ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æŠŠå­é—®é¢˜çš„ç»“æœå­˜ä¸‹æ¥ï¼Œå†æœ‰è¿™ä¸ªä¸ç”¨å»é‡æ–°è¿­ä»£è®¡ç®—ç›´æ¥å–ã€‚ ä»£ç äº”ï¼š 123456789101112131415public int climbStairs(int n) &#123; int[] mind = new int[n+1]; mind[0] = 1; mind[1] = 1; return recur(n,mind);&#125;int recur(int n,int[] mind)&#123; //é€’å½’å‡ºå£ if(mind[n] != 0)&#123; return mind[n]; &#125; //è®©é€’å½’å‡ºå£ä¸ä»…ä»…åªæœ‰åˆå§‹å€¼ mind[n] = recur(n-1,mind) + recur(n-2,mind); return mind[n];&#125; ç°åœ¨æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº†O(n) æ€»ç»“æœ¬ä½“æ˜¯ä¸€ä¸ªç»å…¸çš„åŠ¨æ€è§„åˆ’ä¾‹å­ï¼Œå¹¶ä¸”è¿˜å¯ä»¥è½¬åŒ–é—®é¢˜ä¸ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ±‚è§£é‚£å°±å¯ä»¥ä¸“æ³¨çº¿æ€§ä»£æ•°ã€‚æœ€ä¼˜è§£çš„é€šé¡¹å…¬å¼å¤æ‚åº¦O(logn)ã€‚è¿™é¢˜æœ‰å‡ ä¸ªä¸œè¥¿è¿˜æŒºæœ‰æ„æ€çš„ã€‚å…³äºæ•°è®ºçŸ©é˜µå¿«é€Ÿå¹‚å·²åŠ å…¥ç´ æåº“ä¹‹åå¯ä»¥æ¼”ç¤ºå‡ ä¸ªä¾‹å­ï¼Œè¿™é‡Œçš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€šé¡¹å…¬å¼æ¨å¯¼å¯ä»¥ä½œä¸ºå…¶ä¸­ä¸€ä¸ªä¾‹å­ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ’åºå’Œæœç´¢ï¼š278.ç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬","slug":"ç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬","date":"2020-12-28T11:10:57.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/12/28/ç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬/","link":"","permalink":"http://yournotes.cn/2020/12/28/%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%94%99%E8%AF%AF%E7%89%88%E6%9C%AC/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/first-bad-version/ ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/first-bad-version/ ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚ å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, â€¦, n]ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ bool isBadVersion(version) æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚ ç¤ºä¾‹ï¼š 1234567ç»™å®š n = 5ï¼Œå¹¶ä¸” version = 4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚è°ƒç”¨ isBadVersion(3) -&gt; falseè°ƒç”¨ isBadVersion(5) -&gt; trueè°ƒç”¨ isBadVersion(4) -&gt; trueæ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ è§£æ³•ä¸€ï¼šæš´åŠ›ä»ç¬¬ä¸€ä¸ªç‰ˆæœ¬ç›´æ¥é¡ºç€éå†ç›´åˆ°é¦–æ¬¡å‡ºç°é”™è¯¯ç‰ˆæœ¬ï¼Œä¸å°±æ˜¯ç¬¬ä¸€ä¸ªå˜› 123456789public int firstBadVersion(int n) &#123; //ä»ç¬¬ä¸€ä¸ªç‰ˆæœ¬éå†èµ· for (int i = 1; i &lt; n; i++) &#123; if (isBadVersion(i)) &#123; return i; &#125; &#125; return n;&#125; æ˜¯çœŸçš„ç‹ ï¼Œä½ å¼€å‘äº†äºŒåå¤šä¸ªäº¿çš„ä¸ªç‰ˆæœ¬ã€‚äº§å“ç»ç†å‘¢ï¼ŒæŠ“è¿‡æ¥è®©ä»–åšï¼Œåšä¸æ»¡äºŒåå¤šä¸ªäº¿ç‰ˆæœ¬ä¸å‡†èµ°ã€‚ è§£æ³•äºŒï¼šäºŒåˆ†æ³•å…¶å®è¿™ä¸ªé—®é¢˜ï¼Œä¸€å¼€å§‹æˆ‘å°±æƒ³åˆ°ç”µè§†ä¸Šä¸»æŒäººæ‰‹é‡Œæ‹¿ç€ä¸€ä¸ªæ•°å­—ï¼Œè®©ä½ ä»1-100çš„èŒƒå›´çŒœè¿™ä¸ªæ•°å­—å¹¶ä¸”å‘Šè¯‰ä½ ç­”æ¡ˆæ˜¯å¤§äº†è¿˜æ˜¯å°äº†ã€‚ è‚¯å®šä¸å¯èƒ½åƒè§£æ³•ä¸€ä¸€æ ·çŒœ1ä¸ä¸­ç„¶åçŒœ2ä¸ä¸­çŒœ3â€¦.. è¿™é‡Œå°±æ˜¯ä½¿ç”¨äºŒåˆ†çš„æ€æƒ³ä¸€æ¬¡æ’é™¤ä¸€åŠ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415//æ³¨æ„æ˜¯è¿ç»­æ•°å­—ä¸æ˜¯æ•°ç»„ç´¢å¼•public int firstBadVersion(int n) &#123; int left = 1; int right = n; while (left &lt; right) &#123; //int mid = (right + left) / 2; int mid = left + (right - left) / 2; if (isBadVersion(mid)) &#123; right = mid; &#125; else &#123; left = mid + 1; &#125; &#125; return left;&#125; æ€»ç»“é¢˜æŒºç®€å•çš„ï¼Œä¸€å¼€å§‹æƒ³åˆ°çš„å°±æ˜¯äºŒåˆ†å› ä¸ºå¤ªå°‘äº†è¿˜æ˜¯åŠ ä¸Šäº†æš´åŠ›è§£æ³•å‡‘å‡‘ã€‚æœ¬é¢˜ä¸»è¦å§è¿˜æ˜¯æ˜¯è¾¹ç•Œçš„è€ƒè™‘ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå…¸å‹çš„äºŒåˆ†æ³•çš„ä¾‹å­ï¼Œé™¤æ­¤ä¹‹å¤–å¤„ç†ä¸¤ä¸ªæ•°å¹³å‡è¿ç®—å¯èƒ½æº¢å‡ºçš„è§£å†³æ–¹å¼ä¹Ÿåœ¨ä»Šåå¯ä»¥ä½œä¸ºä¸€ä¸ªæ€è€ƒæ–¹å‘çš„å‚è€ƒ","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ’åºå’Œæœç´¢ï¼š88.åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„","slug":"åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„","date":"2020-12-27T09:32:42.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/12/27/åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„/","link":"","permalink":"http://yournotes.cn/2020/12/27/%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/merge-sorted-array/ ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿ nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/merge-sorted-array/ ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿ nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚ è¯´æ˜ï¼š åˆå§‹åŒ– nums1 å’Œ nums2 çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸º m å’Œ n ã€‚ä½ å¯ä»¥å‡è®¾ nums1 æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆç©ºé—´å¤§å°å¤§äºæˆ–ç­‰äº m + nï¼‰æ¥ä¿å­˜ nums2 ä¸­çš„å…ƒç´ ã€‚ ç¤ºä¾‹ï¼š 12345è¾“å…¥ï¼šnums1 = [1,2,3,0,0,0], m = 3nums2 = [2,5,6], n = 3è¾“å‡ºï¼š[1,2,2,3,5,6] æç¤ºï¼š 123-10^9 &lt;= nums1[i], nums2[i] &lt;= 10^9nums1.length == m + nnums2.length == n è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆï¼ˆé¡ºåºæ‰«æï¼‰å¾ˆç›´æ¥çš„å°±æ˜¯åŒæŒ‡é’ˆæ‰«æï¼Œä¸ä¸Šæ¬¡æˆ‘ä»¬åœ¨é“¾è¡¨æ—¶å†™è¿‡ã€åˆå¹¶æœ‰åºé“¾è¡¨ã€‘åŒæ ·çš„é€šè¿‡æ‰«æä¸å¤§å°æ¯”è¾ƒæœ€ç»ˆæ‰«æå®Œä¸¤ä¸ªåºåˆ—ï¼ˆm+nï¼‰ï¼Œå‰è€…æ˜¯æ–°å»ºä¸€ä¸ªå¤´èŠ‚ç‚¹ç„¶åéå†è¿‡ç¨‹ä¸­æ…¢æ…¢è¿ã€‚è¿™è¾¹ä¹Ÿæ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ¯æ‰«æä¸€ä¸ªå¾€é‡Œé¢è®¾ç½®å€¼ã€‚çœ‹ä¸‹é¢˜ç›®å¯çŸ¥å®é™…çš„å…ƒç´ æ•°é‡æ˜¯m,nå®Œæ•´æ•°ç»„æ˜¯å¯èƒ½æœ‰å¤šä½™ç©ºé—´ï¼Œå¹¶ä¸”num1çš„ç©ºé—²å¯ä»¥å®¹çº³nums2çš„æœ‰æ•ˆå…ƒç´ ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬ç›´æ¥æŠŠnums1ä½œä¸ºç»“æœæ•°ç»„ï¼Œæ–°å»ºçš„æ•°ç»„è£…num1çš„å®é™…å…ƒç´  æœ‰äº†æ€è·¯ä¹‹åç†ä¸€ä¸‹å…·ä½“çš„è¿‡ç¨‹ï¼š 123456789101112131415161718192021222324252627public void merge(int[] nums1, int m, int[] nums2, int n) &#123; // 1.å¾—åˆ°num1å®é™…å…ƒç´ çš„æ•°ç»„ int [] nums1_copy = new int[m]; /* for(int i = 0; i &lt; m; i++)&#123; nums1_copy[i] = nums[i]; &#125; */ System.arraycopy(nums1, 0, nums1_copy, 0, m); // æ‰«æä¸¤ä¸ªç´ ææ•°ç»„çš„æŒ‡é’ˆ int p = 0; int q = 0; // ç»“æœæ•°ç»„ï¼ˆnum1ï¼‰å¾…è®¾å€¼ä½ç½®çš„æŒ‡é’ˆ int cur = 0; // 2.æŒ¨ä¸ªæ¯”è¾ƒè®¾å€¼ while ((p &lt; m) &amp;&amp; (q &lt; n))&#123; nums1[cur++] = (nums1_copy[p] &lt; nums2[q]) ? nums1_copy[p++] : nums2[q++]; &#125; // 3.åŠ å…¥æœ€åå¤šä½™çš„ä¸€æ®µ if (p &lt; m) System.arraycopy(nums1_copy, p, nums1, p + q, m + n - p - q); if (q &lt; n) System.arraycopy(nums2, q, nums1, p + q, m + n - p - q);&#125; æ—¶é—´æœ‰ä¸‰ç»„æ“ä½œm+min(m,n)+(m-n)æˆ–(n-m)å› æ­¤ä¸ºm+n,éå†äº†ä¸¤ç»„å…ƒç´ å˜›Oï¼ˆm+nï¼‰ç©ºé—´å°±æ˜¯nums1_copyä¹Ÿå°±æ˜¯Oï¼ˆmï¼‰ è§£æ³•äºŒï¼šåŒæŒ‡é’ˆï¼ˆé€†åºï¼‰è§£è¿™é¢˜ä¸€å¼€å§‹æˆ‘å°±åœ¨æƒ³æ˜¯ä¸æ˜¯åŸåœ°å°±å¯ä»¥ï¼ˆä¸ç”¨åˆ›å»ºæ•°ç»„ï¼‰ï¼Œä½†å¦‚æœåœ¨è§£æ³•ä¸€çš„è¿‡ç¨‹ä¸­æŠŠnum2çš„å€¼è®¾è¿‡å»ï¼Œé‚£è¾¹å°±å¿…é¡»å¾—å­˜è¢«æ›¿æ¢çš„å€¼ã€‚å¹¶ä¸”å¯èƒ½ä¸€ç›´æ˜¯num2å°ä¹Ÿæ˜¯è¯´é‚£è¾¹è¿˜æ˜¯éœ€è¦ä¸€ä¸ªä¸­é—´æ•°ç»„ã€‚ ä¹Ÿå°±æ˜¯ä¸ºäº†é‚£ä¸€å—çš„å€¼åˆ›å»ºäº†må¤§å°çš„æ•°ç»„ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½æ‹¿num1ä¸ºç»“æœæ•°ç»„ï¼Ÿä¸å°±æ˜¯å®ƒæœ‰ç©ºé—²çš„ä¸€å—åœ°æ–¹ä¹ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½•å¿…ä¸ç”¨å‘¢ï¼åè€Œå¦å¼€ä¸€å—å‘¢ï¼ç›´æ¥ç”¨åé¢çš„åœ°æ–¹ä¸å°±ä¸å­˜åœ¨æ›¿æ¢äº†å—ï¼ å› æ­¤æˆ‘ä»¬å°±ç”¨åé¢è¿™å—ï¼Œç›´æ¥å€’åºè®¾å€¼ï¼Œæ•´ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š æƒ…å†µä¸€ï¼šæœ€ç»ˆå‰é¢å°çš„ä¸€å—åœ¨num1 æƒ…å†µä¸€ï¼šæœ€ç»ˆå‰é¢å°çš„ä¸€å—åœ¨num2 1234567891011121314public void merge(int[] nums1, int m, int[] nums2, int n) &#123; // å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆå¹¶æŒ‡å‘å…ƒç´ æœ«ç«¯ int p = m - 1; int q = n - 1; // æ³¨æ„åˆå§‹åŒ–å½“å‰æŒ‡é’ˆåœ¨æ•´ä¸ªå…ƒç´ m+nçš„æœ«ç«¯å¹¶ä¸æ˜¯æ•´ä¸ªnum1çš„æœ«ç«¯ int cur = m + n - 1; // 1.æŒ¨ä¸ªæ¯”è¾ƒè®¾å€¼ while (p &gt;= 0 &amp;&amp; q &gt;= 0)&#123; nums1[cur--] = (nums1[p] &lt; nums2[q]) ? nums2[q--] : nums1[p--]; &#125; // 2.å¯èƒ½nums2å‰é¢æœ‰ä½™ System.arraycopy(nums2, 0, nums1, 0, q + 1);&#125; æ—¶é—´å¤æ‚åº¦ä»ç„¶æ˜¯ä¸å¯é¿å…çš„O(m+n)ç©ºé—´å¤æ‚åº¦O(1) æ€»ç»“è¿™é¢˜è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¸»è¦æ˜¯è€ƒè™‘åˆ°æ·»åŠ ç¼“å­˜ä¸å½“å‰ç©ºé—´çš„é—®é¢˜ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„ä¸­é—´å˜é‡æˆ–è€…ä¸­é—´æ•°ç»„æ˜¯å¦çœŸçš„è¯¥åŠ ã€‚åœºä¸Šæ˜¯å¦æœ‰ä¸ç”¨çš„ç©ºé—´ä¸ç”¨çš„å˜é‡ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘çš„ï¼å‰”é™¤å†—ä½™æ— æ•ˆä»£ç ","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ ‘ï¼š108.å°†æœ‰åºæ•°ç»„è½¬äºŒå‰æ ‘","slug":"å°†æœ‰åºæ•°ç»„è½¬äºŒå‰æ ‘","date":"2020-12-26T02:27:09.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/12/26/å°†æœ‰åºæ•°ç»„è½¬äºŒå‰æ ‘/","link":"","permalink":"http://yournotes.cn/2020/12/26/%E5%B0%86%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/convert-sorted-array-to-binary-search-tree/ å°†ä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æœ‰åºæ•°ç»„ï¼Œè½¬æ¢ä¸ºä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/convert-sorted-array-to-binary-search-tree/ å°†ä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æœ‰åºæ•°ç»„ï¼Œè½¬æ¢ä¸ºä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚ æœ¬é¢˜ä¸­ï¼Œä¸€ä¸ªé«˜åº¦å¹³è¡¡äºŒå‰æ ‘æ˜¯æŒ‡ä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1ã€‚ ç¤ºä¾‹: ç»™å®šæœ‰åºæ•°ç»„: [-10,-3,0,5,9], ä¸€ä¸ªå¯èƒ½çš„ç­”æ¡ˆæ˜¯ï¼š[0,-3,9,-10,null,5]ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸‹é¢è¿™ä¸ªé«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼š 12345 0 / \\ -3 9 / /-10 5 é¢˜è§£ï¼šé€’å½’ï¼ˆä¸­åºï¼‰ä¸€ä¸ªå‡åºæ•°ç»„ï¼Œè½¬äºŒå‰æ ‘è¿˜æ˜¯å¹¶ä¸”æ˜¯æœç´¢æ ‘ï¼ˆå³å­æ ‘å°å·¦å­æ ‘ï¼‰ï¼Œå› æ­¤è¿™ä¸ªæ•°ç»„ç›¸å½“äºæ˜¯æœç´¢æ ‘çš„ä¸­åºéå† å¯¹äºç¤ºä¾‹çš„æ•°ç»„ï¼š[-10,-3,0,5,9]ï¼Œè½¬åŒ–ä¸ºäºŒå‰æœç´¢æ ‘ç»“æœæ˜¯æœ‰å¾ˆå¤š æ¯”å¦‚ï¼š 12345 0 / \\ -3 5 / \\-10 9 12345 5 / \\ -3 9 / \\ -10 0 é¢˜ç›®å½“å‰æ˜¯è¦å¾—é«˜åº¦å¹³è¡¡çš„ä¸€ä¸ªè§£ï¼ˆå› æ­¤ä¸Šé¢ä¸€ä¸ªè§£æ˜¯ä¸æ»¡è¶³çš„å¹³è¡¡çš„ï¼‰ï¼Œå› æ­¤å°½é‡å–ä¸­é—´ä½œä¸ºæ ¹ï¼Œå°±æ˜¯æœ€å¹³è¡¡çš„ã€‚ å¦‚æœæ˜¯å¶æ•°ï¼Œå–ä¸­é—´çš„ä¸¤ä¸ªä»»æ„çš„ã€‚å¦‚ä¸‹è¦ä¹ˆ-10ä¸ºå½“å‰æ ¹-3ä¸ºå®ƒçš„å³å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆ-3ä¸ºå½“å‰æ ¹-10ä¸ºå®ƒçš„å·¦å­èŠ‚ç‚¹ å› æ­¤æˆ‘ä»¬å¯ä»¥æ¨å‡ºé€’å½’ 123456789101112public TreeNode sortedArrayToBST(int[] nums) &#123; return recurrence(nums, 0, nums.length - 1);&#125;public TreeNode recurrence(int[] nums, int left, int right) &#123; if (left &gt; right) return null; // é™¤æ³•è¿ç®—å‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥å¶æ•°å–å·¦è¾¹ int mid = (left + right) / 2; TreeNode root = new TreeNode(nums[mid]); root.left = recurrence(nums, left, mid - 1); root.right = recurrence(nums, mid + 1, right); return root;&#125; æ—¶é—´å¤æ‚åº¦å½“ç„¶æ˜¯Oï¼ˆnï¼‰ï¼Œå¹³è¡¡çš„ç¼˜æ•…æ ˆçš„æ·±åº¦ä¸ºlog2nå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºOï¼ˆlognï¼‰ æ€»ç»“æ€»ä½“æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå¥½æƒ³çš„ä¸€ä¸ªäºŒåˆ†çš„è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œé¢˜ç›®æ˜¯æ±‚å‡ºæ»¡è¶³æ¡ä»¶çš„ä¸€è§£ 1int mid = (left + right) / 2; è¿™æ ·å–å°±å¾—åˆ°çš„å°±æ˜¯é‡å¶æ•°å–å·¦è¾¹çš„è§£ï¼Œå¦‚æœåŠ ä¸ª1ä¹‹åå†é™¤2å°±æ˜¯å–å³äº†ï¼Œæˆ–è€…åŠ ä¸ªéšæœºæ•°ï¼ˆ0&#x2F;1ï¼‰ã€‚è¿™æ ·å¯ä»¥æ¯æ¬¡æ‰§è¡Œå¾—åˆ°æ»¡è¶³æ¡ä»¶çš„æ ‘å¯èƒ½éƒ½ä¸ä¸€æ ·ã€‚ æœ€ååˆçº§åˆé›†å…³äºæ ‘è¿™ä¸€ç« ä¹Ÿç»“æŸäº†ä¹Ÿæ˜¯è¿™ä¸ªåˆé›†æ•´ä¸ªæ•°æ®ç»“æ„çš„ç¯‡ç« ç»“æŸäº†ï¼Œä»å¼€å§‹å¯¹æ ‘è¿™æ ·çš„ç»“æ„å¾ˆç”Ÿç–ä»…ä»…éå†æ“ä½œå°±ä¸çº¿æ€§æ•°æ®ç»“æ„æœ‰å¾ˆå¤§å·®åˆ«ï¼Œåˆ°ç°åœ¨è™½ç„¶çŸ­çŸ­5é¢˜å·²ç»å¯¹è¿™æ ·ä¸€ä¸ªæ•°æ®ç»“æ„æ›´ç†Ÿæ‚‰äº†ã€‚ä»ä¸‹ä¸ªç« èŠ‚å¼€å§‹çš„å°±æ˜¯å…³äºç®—æ³•æ€ç»´å‘çš„ç¯‡ç« ï¼ˆæ’åºã€åŠ¨æ€è§„åˆ’ã€æ•°å­¦ç­‰ç­‰ï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ ‘ï¼š102.äºŒå‰æ ‘çš„å±‚åºéå†","slug":"äºŒå‰æ ‘çš„å±‚åºéå†","date":"2020-12-24T13:56:49.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/12/24/äºŒå‰æ ‘çš„å±‚åºéå†/","link":"","permalink":"http://yournotes.cn/2020/12/24/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/binary-tree-level-order-traversal/ ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›å…¶æŒ‰ å±‚åºéå† å¾—åˆ°çš„èŠ‚ç‚¹å€¼ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/binary-tree-level-order-traversal/ ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›å…¶æŒ‰ å±‚åºéå† å¾—åˆ°çš„èŠ‚ç‚¹å€¼ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚ ç¤ºä¾‹ï¼š äºŒå‰æ ‘ï¼š[3,9,20,null,null,15,7], 123456789101112 3 / \\ 9 20 / \\ 15 7è¿”å›å…¶å±‚åºéå†ç»“æœï¼š[ [3], [9,20], [15,7]] è§£æ³•ä¸€ï¼šå¹¿åº¦ä¼˜å…ˆéå†æ²¡æƒ³åˆ°è¿™é¢˜å±…ç„¶è¿˜æ˜¯ä¸­ç­‰ï¼Œæ¥äººï¼ è¨€å½’æ­£ä¼ ï¼Œé¢˜ç›®è®©ä½ å±‚åºéå†ä¹Ÿå°±æ˜¯å¹¿åº¦éå†ç„¶åæ”¾åˆ°å®¹å™¨é‡Œã€‚å°±æ˜¯çº¯éå†ä¸€æ¬¡æ²¡æœ‰åˆ«çš„æ“ä½œäº† 12345678910111213141516171819202122public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123; //å®šä¹‰ç»“æœé›† List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;(); //æ ¹èŠ‚ç‚¹ä¸ºç©º if(root = null) return result; //å®ç°é˜Ÿåˆ—(ä¹Ÿå¯ä»¥ç”¨åˆ«çš„LinkedListå¿«ä¸€ç‚¹) Queue&lt;TreeNode&gt; queue = new LinkedList&lt;TreeNode&gt;(); queue.offer(root); while(!queue.isEmpty())&#123; //æ¯ä¸€å±‚çš„éå† List&lt;Integer&gt; level = new ArrayList&lt;Integer&gt;(); int size = queue.size(); for(int i = 0; i &lt; size; i++)&#123; TreeNode node = queue.poll(); level.add(node); if(node.left != null) queue.offer(node.left); if(node.right != null) queue.offer(node.right); &#125; result.add(level); &#125; return result;&#125; éå†æ•´ä¸ªæ ‘æ—¶é—´å¤æ‚åº¦Oï¼ˆnï¼‰ï¼Œé˜Ÿåˆ—å°äºnç©ºé—´å¤æ‚åº¦ä¸ºOï¼ˆnï¼‰ è§£æ³•äºŒï¼šæ·±åº¦ä¼˜å…ˆéå†è¿™é‡Œæˆ‘ä»¬æŠ˜è…¾ä¸€ä¸‹ï¼Œè¿™é¢˜å¹¿åº¦å°±æ˜¯é¢˜ç›®å®ƒçš„æ„æ€æ¥çš„ã€‚ä½†ååå°±è¦ç”¨æ·±åº¦å†™ ä¸åŒçš„æ˜¯å¹¿åº¦æ¯æ¬¡å†…å±‚å¾ªç¯å°±å®Œæˆä¸€å±‚èŠ‚ç‚¹çš„éå†ï¼Œå¤–å±‚å»æ·»åŠ è¿™ä¸€å±‚çš„Listï¼Œæ·±åº¦çš„è¯éå†ç¬¬ä¸€ä¸ªæ˜¯ç¬¬ä¸€å±‚çš„ç¬¬äºŒä¸ªå°±æ˜¯ç¬¬äºŒå±‚äº†ç¬¬ä¸‰ä¸ªå°±æ˜¯ç¬¬ä¸‰å±‚çš„ç¬¬ä¸€ä¸ªäº†ï¼Œå› æ­¤éœ€è¦å…ˆè®°ä¸‹å±‚çº§ 1234567891011121314151617181920212223public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123; //ç»“æœé›† List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;List&lt;Integer&gt;&gt;(); if(root == null) return result; dfs(1,root,result); return result;&#125; public void dfs(int level, TreeNode root, List&lt;List&lt;Integer&gt;&gt; result) &#123; //å®¹å™¨å¤§å°å°äºå±‚çº§åˆ™æ·»åŠ ä¸€ä¸ªæ–°å±‚çº§ if(result.size()&lt;level) &#123; result.add(new ArrayList&lt;Integer&gt;()); &#125; //å¾€å¯¹åº”çš„å±‚çº§Listæ·»åŠ å€¼ result.get(level - 1).add(root.val); //å¾€ä¸‹é¢èµ°ï¼Œå±‚çº§+1 if(root.left!=null) &#123; dfs(level+1, root.left, result); &#125; if(root.right!=null) &#123; dfs(level+1, root.right, result); &#125;&#125; æ€»ç»“è¿˜æ˜¯ä¸ä¹‹å‰ä¸€æ ·ï¼Œç”¨æ¥ç†Ÿæ‚‰æ ‘çš„éå†ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ªé¢˜ä¸¤å¤§ç§éå†æ–¹å¼éƒ½æ˜¯å¯ä»¥å®Œæˆï¼Œåªä¸è¿‡æ˜¯é€‚ç”¨æ€§ä¸ä¸€æ ·ã€‚æ€»ä¹‹å¤šæ€è€ƒå¤šç†Ÿç»ƒæ ‘éå†çš„æ“ä½œè¿‡ç¨‹","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ ‘ï¼š101.å¯¹ç§°äºŒå‰æ ‘","slug":"å¯¹ç§°äºŒå‰æ ‘","date":"2020-12-23T11:36:36.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/12/23/å¯¹ç§°äºŒå‰æ ‘/","link":"","permalink":"http://yournotes.cn/2020/12/23/%E5%AF%B9%E7%A7%B0%E4%BA%8C%E5%8F%89%E6%A0%91/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/symmetric-tree/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯é•œåƒå¯¹ç§°çš„ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/symmetric-tree/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯é•œåƒå¯¹ç§°çš„ã€‚ **ç¤ºä¾‹1ï¼š**æ˜¯å¯¹ç§°çš„ 12345 1 / \\ 2 2 / \\ / \\3 4 4 3 **ç¤ºä¾‹2ï¼š**ä¸å¯¹ç§° 12345 1 / \\2 2 \\ \\ 3 3 è§£æ³•ä¸€ï¼šé€’å½’æˆ‘ä»¬å…ˆæ¥åˆ’åˆ†å­é—®é¢˜ï¼Œä¸€ä¸ªæ ‘å¯¹ç§°ä¹Ÿå°±æœ€ç»ˆæ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸å³å­æ ‘æ˜¯å¯¹ç§°çš„é•œåƒçš„ï¼Œé‚£ä¹ˆè¦æ±‚å·¦å­èŠ‚ç‚¹ä¸å³å­èŠ‚ç‚¹ç›¸ç­‰çš„åŒæ—¶å·¦èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼ˆå³å­æ ‘ï¼‰ä¸å³èŠ‚ç‚¹çš„å³å­æ ‘ï¼ˆå·¦å­æ ‘ï¼‰å¯¹ç§°ï¼Œè¿˜æ˜¯ç”»ä¸ªå›¾å§ æˆ‘ä»¬ä¼ å…¥è¿™ä¸¤é¢—æ ‘çœ‹æ˜¯å¦å¯¹ç§°ï¼Œé‚£ä¹ˆæœ‰ä¸‰ä¸ªæ“ä½œï¼š ç¬¬ä¸€ä¸¤ä¸ªæ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ ç¬¬äºŒå®ƒå·¦å­æ ‘æ˜¯å¦ä¸å¦å¤–ä¸€ä¸ªçš„å³å­æ ‘å¯¹ç§° ç¬¬ä¸‰å®ƒçš„å³å­æ ‘æ˜¯å¦ä¸å¦å¤–ä¸€ä¸ªçš„å·¦å­æ ‘å¯¹ç§° æ¯æ¬¡é€’å½’ä¼ é€’ä¸€å¯¹æ ‘ï¼Œç›´åˆ°æœ€åå¶å­åªæœ‰èŠ‚ç‚¹èŠ‚ç‚¹æ¯”è¾ƒ 123456789101112public boolean isSymmetric(TreeNode root) &#123; //ç¬¬ä¸€æ¬¡ä¼ rootè®©ä¸‹é¢é¡ºä¾¿è¿›è¡Œç©ºåˆ¤æ–­ return check(root, root);&#125;public boolean check(TreeNode p, TreeNode q) &#123; //éƒ½ä¸ºç©ºåˆ™æ²¡æœ‰å­æ ‘ï¼Œä¸¤ä¸ªæ ¹ç›¸ç­‰å°±æ˜¯å¯¹ç§° if (p == null &amp;&amp; q == null) return true; //ä¸æ»¡è¶³ä¸Šé¢æ¡ä»¶ï¼Œåˆ™æ˜¯ä¸€ä¸ªæœ‰å­æ ‘ä¸€ä¸ªæ²¡æœ‰é‚£ä¹ˆä¸å¯¹ç§° if (p == null || q == null) return false; //ä¸‰ä¸ªæ¡ä»¶ç»“åˆ return p.val == q.val &amp;&amp; check(p.left, q.right) &amp;&amp; check(p.right, q.left);&#125; éå†äº†æ•´é¢—æ ‘æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆnï¼‰,é€’å½’ç³»ç»Ÿæ ˆå ç”¨å¤§å°å–å†³äºæ ‘çš„å±‚åº¦è¿™é‡Œä¸æ˜¯å®Œå…¨äºŒå‰æ ‘æ‰€ä»¥å®ƒåªæ˜¯å°äºnç©ºé—´å¤æ‚åº¦ä¸ºOï¼ˆnï¼‰ æ–¹æ³•äºŒï¼šè¿­ä»£é€’å½’æ€è·¯å†™å®Œäº†ï¼Œæ ˆæ¢æˆé˜Ÿåˆ—ä½¿ç”¨å¹¿åº¦çš„æ–¹å¼å®ŒæˆåŒæ ·çš„æ€è·¯ï¼Œè¿˜æ˜¯å†ç”»ä¸ªå›¾ é€šè¿‡é˜Ÿåˆ—ä¾æ¬¡æŒ‰ç…§é¡ºåºæ¯”è¾ƒofferè¿›é˜Ÿåˆ—æ—¶å°±æ˜¯ä¸€ä¸ªæ ‘çš„å·¦ï¼ˆå³ï¼‰ä¸å¦ä¸€ä¸ªæ ‘çš„å³ï¼ˆå·¦ï¼‰ï¼Œpollå‡ºé˜Ÿåˆ—çš„ä¸¤ä¸ªä¹Ÿå°±æ˜¯å¯¹åº”çš„ï¼Œç›´åˆ°å¯¹é˜Ÿåˆ—æ²¡æœ‰åç»­è¿›æ¥çš„ä¸ºç©ºäº†ä»ç„¶æ²¡å‡ºç°ä¸æ»¡è¶³æƒ…å†µçš„ï¼Œåˆ™æ˜¯å¯¹ç§°äºŒå‰æ ‘ 123456789101112131415161718192021222324public boolean isSymmetric(TreeNode root) &#123; return check(root, root);&#125;public boolean check(TreeNode p, TreeNode q) &#123; Queue&lt;TreeNode&gt; queue = new LinkedList&lt;TreeNode&gt;(); queue.offer(p); queue.offer(q); while (!queue.isEmpty()) &#123; //æ¯æ¬¡å‡ºä¸¤ä¸ª p = queue.poll(); q = queue.poll(); //æŒ‰ç…§æ¡ä»¶ if (p == null &amp;&amp; q == null) continue; if ((p == null || q == null) || (p.val != q.val)) return false; //æŒ‰é¡ºåºè¿›é˜Ÿåˆ— queue.offer(p.left); queue.offer(q.right); queue.offer(p.right); queue.offer(q.left); &#125; return true;&#125; æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦åŒä¸Š æ€»ç»“æ— å¤–ä¹æ·±åº¦ä¼˜å…ˆä¸å¹¿åº¦ä¼˜å…ˆï¼Œä¸Šé¢çš„ä¸¤ç§è§£éƒ½æ˜¯ä¼˜çš„è§£åœ¨ä¸€æ¬¡æ ‘çš„éå†è¿‡ç¨‹ä¸­å®Œæˆå¯¹æ˜¯å¦æ˜¯å¯¹ç§°çš„åˆ¤æ–­ã€‚å¦‚æœç›´æ¥æš´åŠ›çš„è¿˜å¯å…ˆéå†ä¸€éå¾—åˆ°åºåˆ—æˆ–è€…æ•°ç»„å†åˆ¤æ–­ï¼Œæ¯”å¦‚å…ˆåºéå†ä¸ååºéå†åºåˆ—ç›¸åï¼Œæ¯”å¦‚ä¸­åºéå†ç»“æœæ˜¯å›æ–‡çš„ï¼Œæ€»ä¹‹æˆ‘ä»¬è¦å…ˆå¯¹éå†ç†Ÿæ‚‰ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ ‘ï¼š98.éªŒè¯äºŒå‰æœç´¢æ ‘","slug":"éªŒè¯äºŒå‰æœç´¢æ ‘","date":"2020-12-20T15:28:59.000Z","updated":"2025-04-17T08:34:52.025Z","comments":true,"path":"2020/12/20/éªŒè¯äºŒå‰æœç´¢æ ‘/","link":"","permalink":"http://yournotes.cn/2020/12/20/%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/validate-binary-search-tree/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/validate-binary-search-tree/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚ å‡è®¾ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«å°äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚ èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«å¤§äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚ æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚ ç¤ºä¾‹ 1: 12345è¾“å…¥: 2 / \\ 1 3è¾“å‡º: true ç¤ºä¾‹ 2: 123456789è¾“å…¥: 5 / \\ 1 4 / \\ 3 6è¾“å‡º: falseè§£é‡Š: è¾“å…¥ä¸º: [5,1,4,null,null,3,6]ã€‚ æ ¹èŠ‚ç‚¹çš„å€¼ä¸º 5 ï¼Œä½†æ˜¯å…¶å³å­èŠ‚ç‚¹å€¼ä¸º 4 ã€‚ è§£æ³•ä¸€ï¼šé€’å½’å’Œä¸Šé¢˜ä¸€æ ·å¯ä»¥å¾ˆå¥½çš„æƒ³åˆ°é€’å½’çš„æ€è·¯ï¼Œå·¦è¾¹éƒ½æ˜¯è¶Šæ¥è¶Šå°ï¼Œå³è¾¹æ˜¯è¶Šæ¥è¶Šå¤§ã€‚è¿™ä¸ªåœ°æ–¹å®¹æ˜“äº§ç”Ÿä¸€ç§é”™è§‰ã€‚é”™è¯¯æ€è·¯åŠä»£ç ï¼šå°±æ˜¯åªæ¯”è¾ƒå·¦å³å­èŠ‚ç‚¹çš„ä¸çˆ¶èŠ‚ç‚¹å¤§å°å…³ç³»ï¼Œå¦‚ä¸Šå›¾ç¬¬ä¸€æ¬¡æ˜¯æ»¡è¶³çš„ï¼Œæ¥ä¸‹æ¥é€’å½’å·¦èŠ‚ç‚¹ä½†ä»–æ²¡æœ‰å­èŠ‚ç‚¹ç»“æŸå¹¶è¿”å›true,é€’å½’å³èŠ‚ç‚¹ä¹Ÿæ»¡è¶³å…³ç³»ï¼Œç»§ç»­é€’å½’å…¶å³èŠ‚ç‚¹å› æ— å­èŠ‚ç‚¹ç»“æŸï¼Œå·¦è¾¹åŒç†ã€‚æ•´ä¸ªé€’å½’å®Œæˆæœ€ç»ˆæ˜¯true,ä½†å› ä¸º3æ¯”æ ¹èŠ‚ç‚¹5å°åº”è¯¥åœ¨å·¦å­æ ‘ä¸æ»¡è¶³äºŒå‰æœç´¢æ ‘ 12345678public boolean isValidBST(TreeNode root) &#123; if(root == null) return true; if(root.left != null &amp;&amp; root.left.val &gt;= root.val) return false; if(root.right != null &amp;&amp; root.right.val &lt;= root.val) return false; return isValidBST(root.left) &amp;&amp; isValidBST(root.right);&#125; é‚£ä¹ˆé—®é¢˜å°±åœ¨äºæˆ‘ä»¬è¦æ¯”è¾ƒçš„ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºå¶å­èŠ‚ç‚¹2æ¥è¯´å®ƒæ¯”3å°å°±å¯ä»¥æ²¡æœ‰é™åˆ¶ï¼Œå¯¹äºå¶å­èŠ‚ç‚¹6çš„ä½ç½®å®ƒåªèƒ½å¤§äº3å¹¶ä¸”å°äº5æ‰æœ‰æ•ˆä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¾€å·¦è¾¹èµ°å³æ˜¯å°é‚£ä¹ˆå°±æœ‰ä¸€ä¸ªä¸Šé™ä¹‹åä¸èƒ½è¶…è¿‡ï¼Œå¾€å³è¾¹èµ°å³æ˜¯å¤§å°±æœ‰ä¸€ä¸ªä¸‹é™ã€‚æŒ‰ç…§æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸Šå›¾ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹å¾€å·¦è¿›å…¥é€’å½’ï¼Œå¾€å·¦äº†ä»¥åè¿™è¾¹çš„å€¼éƒ½å°äºä¸Šé™5å¹¶ä¸”3æ»¡è¶³å°äº5ç»§ç»­é€’å½’æ‰¾åˆ°2ä¹Ÿæ˜¯æ»¡è¶³å¹¶ä¸”2ä¹‹åçš„æ ‘ä¸Šé™æ˜¯3ï¼Œç»§ç»­é€’å½’ä¸ºç©ºäº†å‡ºå»ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥çš„å…„å¼ŸèŠ‚ç‚¹åˆ¤æ–­æ—¶è¶…è¿‡äº†ä¸Šçº¿ç»“æŸ ä»£ç å¦‚ä¸‹ï¼š 123456789101112public boolean isValidBST(TreeNode root) &#123; return process(root, null, null);&#125;//é€’å½’æ–¹æ³•public boolean process(TreeNode node, Integer min, Integer max) &#123; if (node == null) return true; if (min != null &amp;&amp; node.val &lt;= min) return false; if (max != null &amp;&amp; node.val &gt;= max) return false; if (!process(node.right, node.val, max)) return false; if (!process(node.left, min, node.val)) return false; return true;&#125; è§£æ³•äºŒï¼šä¸­åºéå†ä¸­åºéå†æ˜¯æ ‘çš„ä¸€ç§éå†æ–¹å¼ï¼Œå…ˆæ•°å·¦å­æ ‘åœ¨æ•°ä¸­é—´åœ¨æ•°å³å­æ ‘ï¼Œé‚£ä¹ˆé€šè¿‡ä¸­åºéå†å¦‚æœæ˜¯çœŸçš„äºŒå‰æœç´¢æ ‘æ˜¯ä¸€ä¸ªä»å°æ‰“å¤§çš„åºåˆ—ä¸Šå›¾ä¸­åºéå†ï¼š[2,3,6,5,3,6,7] 123456789101112//è®°å½•å‰ä¸€ä¸ªInteger pre = null;public boolean isValidBST(TreeNode root) &#123; if (root == null) return true; // è®¿é—®å·¦å­æ ‘ if (!isValidBST(root.left)) return false; // è®¿é—®å½“å‰èŠ‚ç‚¹ï¼šå¦‚æœå½“å‰èŠ‚ç‚¹å°äºç­‰äºä¸­åºéå†çš„å‰ä¸€ä¸ªèŠ‚ç‚¹.å³ä¸æ»¡è¶³ if (pre != null &amp;&amp; root.val &lt;= pre) return false; pre = root.val; // è®¿é—®å³å­æ ‘ return isValidBST(root.right);&#125; æ€»ç»“å…¶å®ä¸¤ç§è§£æ³•ä¹Ÿéƒ½æ˜¯å±äºæ·±åº¦ä¼˜å…ˆï¼Œä¸€ä¸ªåœ¨è¿‡ç¨‹ä¸­å¤„ç†éå†æ–¹å¼ä¸ºååºï¼Œä¸€ä¸ªæ˜¯ä¸­åºã€‚ä½¿ç”¨ä¸åŒçš„éå†è¿‡ç¨‹é‚£ä¹ˆå°±éœ€è¦æƒ³æ¸…æ¥šåœ¨è¿™ç§éå†ä¸‹å¤„ç†åˆ¤æ–­é€»è¾‘ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ ‘ï¼š104.äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦","slug":"äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦","date":"2020-12-19T13:21:19.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/12/19/äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦/","link":"","permalink":"http://yournotes.cn/2020/12/19/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/maximum-depth-of-binary-tree/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/maximum-depth-of-binary-tree/ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚ è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚ ç¤ºä¾‹ï¼š 1234567ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ 3 / \\ 9 20 / \\ 15 7è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚ æ¦‚è¿°æ ‘çš„å¼€ç¯‡ç¬¬ä¸€é¢˜å…¶å®ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†å®ƒçš„ç›®çš„æ˜¯è®©æˆ‘ä»¬åˆæ­¥è®¤è¯†æ ‘è¿™æ ·ä¸€ä¸ªç»“æ„ã€‚äºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ä¹Ÿå°±æ˜¯ä¸¤ä¸ªæŒ‡é’ˆã€‚å¤§æ¦‚ç»“æ„å¦‚ä¸‹ï¼š 123456789101112131415public class TreeNode &#123; //èŠ‚ç‚¹å†…å®¹å€¼ int val; //ä¸¤ä¸ªæŒ‡é’ˆ TreeNode left; TreeNode right; //æ„é€ æ–¹æ³• TreeNode() &#123;&#125; TreeNode(int val) &#123; this.val = val; &#125; TreeNode(int val, TreeNode left, TreeNode right) &#123; this.val = val; this.left = left; this.right = right; &#125;&#125; è§£æ³•ä¸€ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰é€’å½’çš„æƒ³æ³•ï¼Œæœ€å¤§æ·±åº¦ &#x3D; 1 + Max( L0(left) , L0(right))ã€‚è€Œæ¯ä¸ªå­æ ‘å†æ‰¾åˆ°å®ƒæœ€å¤§çš„æ·±åº¦ã€‚ä¸‹å›¾å°±æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œå›¾ä¸­çœç•¥ä¸€äº›ä¸œè¥¿åªç”»äº†ä¸€éƒ¨åˆ†ç†è§£è¿™æ ·ä¸€ä¸ªæ€è·¯å°±ok 12345public int maxDepth(TreeNode root) &#123; //å‡ºå£ if(root == null) return 0; return Math.max(this.maxDepth(root.left), this.maxDepth(root.right)) + 1;&#125; è§£æ³•äºŒï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ä¸Šé¢æ˜¯é€’å½’ï¼Œè¿™é‡Œæ˜¯è¿­ä»£çš„æ–¹å¼ï¼Œè¾“å…¥rootèŠ‚ç‚¹åˆ¤æ–­æ˜¯å¦å­˜åœ¨å­˜åœ¨åˆ™æ·±åº¦+1ï¼Œå†åˆ¤æ–­ä¸‹ä¸€å±‚èŠ‚ç‚¹ï¼ˆè¾“å…¥1å±‚ä¸¤ä¸ªèŠ‚ç‚¹ï¼‰å¯¹ä¸€ä¸ªèŠ‚ç‚¹åˆ¤æ–­æœ‰æ— å­èŠ‚ç‚¹ï¼Œæ— åˆ™å‡ºï¼Œæœ‰åˆ™æŠŠå®ƒçš„å­èŠ‚ç‚¹å…ˆåŠ è¿›æ¥å†å‡ºï¼Œæ³¨æ„è¿™é‡Œæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„å…³ç³»ï¼ˆæ’é˜Ÿï¼‰å› ä¸ºæ˜¯ä¸€å±‚ä¸€å±‚çš„éå†å®Œ 12345678910111213141516public int maxDepth(TreeNode root) &#123; if (root == null) return 0; Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); int result = 0; while (!queue.isEmpty()) &#123; //æ¯å±‚æ¯ä¸ªèŠ‚ç‚¹çš„éå† for(int i = quene.size(); i &gt; 0; i--)&#123; TreeNode node = queue.poll(); if (node.left != null) queue.offer(node.left); if (node.right != null) queue.offer(node.right); &#125; result++; &#125; return result;&#125; æ€»ç»“åˆé›†ä¸­æ ‘çš„ç¬¬ä¸€é¢˜ï¼Œæ€»ä½“æ¥è¯´ç†Ÿæ‚‰æ ‘çš„åŸºæœ¬ç»“æ„ä½“ä¼šéå†çš„æ“ä½œ","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹é“¾è¡¨ï¼š141.ç¯å½¢é“¾è¡¨","slug":"ç¯å½¢é“¾è¡¨","date":"2020-12-17T11:37:51.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/12/17/ç¯å½¢é“¾è¡¨/","link":"","permalink":"http://yournotes.cn/2020/12/17/%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/linked-list-cycle/ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/linked-list-cycle/ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚ å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚ å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚ è¿›é˜¶ï¼š ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1è¾“å‡ºï¼štrueè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šhead = [1,2], pos = 0è¾“å‡ºï¼štrueè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 3ï¼š 123è¾“å…¥ï¼šhead = [1], pos = -1è¾“å‡ºï¼šfalseè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ æç¤ºï¼š é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [0, 104]-105 &lt;&#x3D; Node.val &lt;&#x3D; 105pos ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ª æœ‰æ•ˆç´¢å¼• ã€‚ è§£æ³•ä¸€ï¼šå¿«æ…¢æŒ‡é’ˆè¿™é¢˜æˆç¯é—®é¢˜ç›´æ¥å°±è”æƒ³æƒ³åˆ°å¿«æ…¢æŒ‡é’ˆï¼Œä¸€æ¡é“ä¸¤ä¸ªäººè·‘æ­¥ä¸€å¿«ä¸€æ…¢ï¼Œå¦‚æœæ²¡ç¯åˆ™æ°¸è¿œä¸ä¼šè¿½ä¸Šï¼Œæœ‰ç¯åˆ™ä¼šç›¸é‡ã€‚å¤§æ¦‚å¦‚ä¸‹ï¼ˆæ…¢çš„èµ°ä¸€æ­¥ã€å¿«çš„èµ°ä¸¤æ­¥ï¼‰ï¼š ä»£ç å¦‚ä¸‹ï¼š 12345678910111213public boolean hasCycle(ListNode head) &#123; ListNode slow = head; ListNode fast = head; while (fast != null &amp;&amp; fast.next != null) &#123; //å‡ºå‘ç‚¹ç›¸åŒæ‰€ä»¥å…ˆèµ°å†åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ slow = slow.next; fast = fast.next.next; if (slow.equals(fast)) &#123; return true; &#125; &#125; return false;&#125; è§£æ³•äºŒï¼šhashè¡¨è¿™ç§ç¯å½¢é—®é¢˜ä¸€å¼€å§‹å°±æƒ³åˆ°å¿«æ…¢æŒ‡é’ˆäº†ï¼Œå°±æ²¡å¾€å…¶ä»–æ–¹å‘æƒ³ã€‚å¿«æ…¢æŒ‡é’ˆå½“ç„¶æ˜¯æœ€ä¼˜çš„ï¼Œä½†è¿˜æ˜¯å¯ä»¥ç†Ÿæ‚‰ä¸€ä¸‹å…¶ä»–å®¹å™¨ã€‚å’Œå‰é¢ä¸€æ ·ç”¨å®¹å™¨å­˜åˆ¤æ–­æ˜¯å¦æˆç¯çš„æ¡ä»¶å³åœ¨ä¸åœçš„nextä¸åœçš„å­˜çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å­˜çš„èŠ‚ç‚¹ä¹‹å‰å­˜è¿‡ã€‚é‚£ä¹ˆå¯ä»¥hashmapè®¡æ•°ä½†åªåˆ¤æ–­æ˜¯å¦å‡ºç°ä¸¤æ¬¡æ‰€ä»¥ç”¨setå°±è¡Œ 12345678public boolean hasCycle(ListNode head) &#123; Set&lt;ListNode&gt; set = new HashSet(); while (head != null) &#123; if (!set.add(head)) return true; head = head.next; &#125; return false;&#125; æ€»ç»“è¿™é¢˜ä¹Ÿå®Œæˆäº†é‚£å°±åˆçº§ç®—æ³•åˆé›†ä¸­çš„é“¾è¡¨ç¯‡ç« ç»“æŸï¼Œæ€»ä½“æ¥è¯´ä¸€å…±å…­é¢˜éƒ½ç¡®å®æ¯”è¾ƒç®€å•å¯èƒ½éœ€è¦ç†Ÿæ‚‰å’Œæ€è€ƒçš„ç‚¹å°±æ˜¯é€šè¿‡åŒæŒ‡é’ˆçš„é“¾è¡¨æ“ä½œå®Œæˆå„ç§åœºæ™¯çš„å®šä½ã€‚ä¸‹ä¸€ç¯‡å¼€å§‹æ ‘çš„ç›¸å…³ç®—æ³•ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹é“¾è¡¨ï¼š234.å›æ–‡é“¾è¡¨","slug":"å›æ–‡é“¾è¡¨","date":"2020-12-16T11:15:16.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/12/16/å›æ–‡é“¾è¡¨/","link":"","permalink":"http://yournotes.cn/2020/12/16/%E5%9B%9E%E6%96%87%E9%93%BE%E8%A1%A8/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/palindrome-linked-list/ è¯·åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/palindrome-linked-list/ è¯·åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: 1-&gt;2è¾“å‡º: false ç¤ºä¾‹ 2: è¾“å…¥: 1-&gt;2-&gt;2-&gt;1è¾“å‡º: true è¿›é˜¶ï¼šä½ èƒ½å¦ç”¨ O(n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦è§£å†³æ­¤é¢˜ï¼Ÿ è§£æ³•ä¸€ï¼šæ•°ç»„æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯ä½¿ç”¨å¦ä¸€ä¸ªå®¹å™¨å­˜èŠ‚ç‚¹ï¼Œå†æ¯”è¾ƒå€¼ï¼Œè¿™é‡Œå­˜åˆ°æ•°ç»„è¿›è¡Œé¦–å°¾æ¯”è¾ƒã€‚ 1234567891011121314151617public boolean isPalindrome(ListNode head) &#123; List&lt;Integer&gt; vals = new ArrayList(); // å°†é“¾è¡¨çš„å€¼å¤åˆ¶åˆ°æ•°ç»„ä¸­ ListNode cur = head; while (cur != null) &#123; vals.add(cur.val); cur = cur.next; &#125; // ä½¿ç”¨åŒæŒ‡é’ˆåˆ¤æ–­æ˜¯å¦å›æ–‡ int length = vals.size(); for(int i = 0, j = length -1; i &lt; length/2; i++,j--)&#123; int val1 = vals.get(i); int val2 = vals.get(j); if( val1 != val2 ) return false; &#125; return true;&#125; è§£æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆæˆ‘ä»¬ä»ç„¶æ˜¯è¦ä½¿ç©ºé—´å¤æ‚åº¦ä¸ºO(1) çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦å›åˆ°çº¯é“¾è¡¨çš„æ“ä½œã€‚ç»“åˆä¹‹å‰çš„ç»ƒä¹ å¯ä»¥é‡‡ç”¨åŸåœ°é“¾è¡¨åè½¬çš„ç®—æ³•ä¹‹åå†å’ŒåŸé“¾è¡¨æŒ¨ä¸ªæ¯”è¾ƒï¼Œæ•´ä¸ªåè½¬å†æ¯”è¾ƒçš„è¯æ˜¯è¡Œä¸é€šçš„å› ä¸ºæˆ‘ä»¬è¦ç”¨åŸåœ°çš„ä¸å­˜å‚¨å¦å¤–çš„é“¾è¡¨ï¼Œå¹¶ä¸”æœ¬æ¥åªç”¨æ¯”è¾ƒä¸€åŠï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè¦å»æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´ï¼Œå¹¶æŠŠåä¸€åŠåè½¬å†è¿›è¡Œå‰ä¸€åŠæ¯”åä¸€åŠå³å¯ã€‚ é€šè¿‡å¿«æ…¢æŒ‡é’ˆï¼Œfastä¸ºslowä¸¤å€é€Ÿåº¦ï¼Œæœ€åfastä¸ºç©ºæ—¶slowå°±åœåœ¨åä¸€åŠçš„å¼€å¤´ï¼ˆé•¿åº¦ä¸ºå¶æ•°ï¼‰å¦‚æœæ˜¯å¥‡æ•°å‘¢ï¼Ÿ å®šä½ä¹‹åè¿›è¡Œåè½¬ï¼Œå†è¿›è¡ŒåŒæŒ‡é’ˆæ¯”è¾ƒç›´åˆ°åä¸€åŠèµ°å®Œ 1234567891011121314151617181920212223242526272829303132333435363738public boolean isPalindrome(ListNode head) &#123; ListNode fast = head; ListNode slow = head; //é€šè¿‡å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ä¸­ç‚¹ while (fast != null &amp;&amp; fast.next != null) &#123; fast = fast.next.next; slow = slow.next; &#125; //å¦‚æœfastä¸ä¸ºç©ºï¼Œè¯´æ˜é“¾è¡¨çš„é•¿åº¦æ˜¯å¥‡æ•°ä¸ª if (fast != null) &#123; slow = slow.next; &#125; //åè½¬ååŠéƒ¨åˆ†é“¾è¡¨ slow = reverseList(slow); fast = head; while (slow != null) &#123; //ç„¶åæ¯”è¾ƒï¼Œåˆ¤æ–­èŠ‚ç‚¹å€¼æ˜¯å¦ç›¸ç­‰ if (fast.val != slow.val) return false; fast = fast.next; slow = slow.next; &#125; return true;&#125;//åè½¬é“¾è¡¨public ListNode reverseList(ListNode head) &#123; ListNode cur = head; ListNode next = null; while( cur != null)&#123; //è®°ä½åŸé“¾è¡¨çš„ä¸‹ä¸€ä¸ª ListNode temp = cur.next; //è®¾ä¸‹next cur.next = next; //æ›´æ–°nextä¸cur next = cur; cur = temp; &#125; return next;&#125; æ€»ç»“å…ˆæ˜¯è§£æ³•ä¸€ä¹Ÿæ˜¯å’Œå‰é¢å†™çš„å‡ é¢˜ä¸€æ ·æ— è„‘è§£å†³çš„æ–¹å¼å°±æ˜¯ç”¨å¦å¤–çš„å®¹å™¨æ“ä½œè§£é™¤åªèƒ½å¾€ä¸‹å–çš„é™åˆ¶æ— è®ºæ˜¯æ•°ç»„ä¹Ÿå¥½è¿˜æ˜¯æ ˆä¹Ÿå¥½éƒ½æ˜¯ç”¨å¦å¤–çš„å®¹å™¨ç›´æ¥è¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„æŒ‡é’ˆæ“ä½œï¼Œæ¥ä¸‹æ¥å°±æ˜¯å»æŒ–æ˜é“¾è¡¨çš„æ“ä½œï¼Œåªèƒ½nextä¸èƒ½åƒæ•°ç»„ä¸€æ ·ä»»æ„ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µä¸‹æˆ‘ä»¬æ€ä¹ˆå®šä½æˆ‘ä»¬æƒ³è¦çš„åœ°æ–¹ï¼Œå¿«æ…¢æŒ‡é’ˆçš„ä¸€ä¸ªåº”ç”¨æ— è®ºæ˜¯åœ¨è¿™é¢˜è¿˜æœ‰å‰é¢çš„åˆ é™¤å€’æ•°ç¬¬å‡ ä¸ªèŠ‚ç‚¹ï¼Œä»¥åŠæ˜å¤©è¦å®Œæˆçš„ä¸€é¢˜ç¯å½¢é“¾è¡¨éƒ½æœ‰ä½“ç°å¤šæ€è€ƒã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š21.åˆå¹¶ä¸¤ä¸ªæœ‰åºåˆ—è¡¨","slug":"åˆå¹¶ä¸¤ä¸ªæœ‰åºåˆ—è¡¨","date":"2020-12-15T11:17:22.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/12/15/åˆå¹¶ä¸¤ä¸ªæœ‰åºåˆ—è¡¨/","link":"","permalink":"http://yournotes.cn/2020/12/15/%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E5%88%97%E8%A1%A8/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€:https://leetcode-cn.com/problems/merge-two-sorted-lists/ å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€:https://leetcode-cn.com/problems/merge-two-sorted-lists/ å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ ç¤ºä¾‹ï¼š è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4 è§£æ³•ä¸€ï¼šè¿­ä»£ä¸¤ä¸ªé“¾è¡¨ä¸¤ä¸ªæŒ‡é’ˆä¸åœçš„æ¯”è¾ƒæ‹¼æ¥æ–°é“¾è¡¨ç›´åˆ°éƒ½éå†å®Œæˆï¼Œæ¯ä¸ªè¿­ä»£å››ä¸ªå˜åŠ¨ï¼ˆä¸‰ä¸ªæŒ‡é’ˆä»¥åŠcuræŒ‡é’ˆçš„nextï¼‰ 1234567891011121314151617public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; ListNode head = new ListNode(0); ListNode cur = head; while (l1 != null &amp;&amp; l2 != null) &#123; if (l1.val &lt;= l2.val) &#123; cur.next = l1; l1 = l1.next; &#125; else &#123; cur.next = l2; l2 = l2.next; &#125; cur = cur.next; &#125; //å¤„ç†æœ€åçš„ï¼Œå¦ä¸€ä¸ªé“¾è¡¨æ— è®ºè¿˜å‰©å¤šå°‘ä¸ªéƒ½æ˜¯æ’å¥½åºçš„å¹¶ä¸”æ¯”å½“å‰å¤§ç›´æ¥æ‹¼åœ¨å½“å‰ä¹‹åå°±å¥½ cur.next = l1 == null ? l2 : l1; return cur.next;&#125; è§£æ³•äºŒï¼šé€’å½’åŒæ ·çš„æ”¹é€’å½’è‡ªé¡¶å‘ä¸Šï¼Œåˆ°l1&#x2F;l2ä¸ºnullæ—¶æ‰å®Œæˆå…¨éƒ¨ï¼Œé‚£ä¹ˆä»–å°±æ˜¯æˆ‘ä»¬çš„é€’å½’å‡ºå£ï¼Œé™¤æ­¤ä¹‹å¤–å¾ªç¯è¿­ä»£æœ€åä¸€æ­¥ä¹Ÿå°±æ˜¯æ¯”å¤§å°è®¾ç½®æŒ‡å‘ã€‚è¿™æ ·å»æƒ³å¦‚æœl1.nextä¸l2å·²å®Œæˆé¡ºåºåˆå¹¶ï¼Œé‚£ä¹ˆl1æ”¹æŒ‡å‘è°å‘¢ï¼Ÿ 123456789101112public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; if (l1 == null) return l2; else if (l2 == null) return l1; //è°æ˜¯å¤´ if (l1.val &lt; l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2); return l1; &#125; else &#123; l2.next = mergeTwoLists(l1, l2.next); return l2; &#125;&#125; æ€»ç»“ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•å¹¶ä¸”ä¸å‰å‡ é“é¢˜ä¸€æ ·ä»ç„¶æ˜¯è¿­ä»£è°ƒæ•´åŒæ ·ä¹Ÿå¯ä»¥è½¬ä¸€ä¸‹é€’å½’","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹é“¾è¡¨ï¼š206.åè½¬é“¾è¡¨","slug":"åè½¬é“¾è¡¨","date":"2020-12-14T11:34:48.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/12/14/åè½¬é“¾è¡¨/","link":"","permalink":"http://yournotes.cn/2020/12/14/%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/","excerpt":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-linked-list/submissions/ åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚","text":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-linked-list/submissions/ åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚ ç¤ºä¾‹: è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULLè¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL è¿›é˜¶: ä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ è§£æ³•ä¸€ï¼šè¿­ä»£åè½¬ä¸€ä¸ªé“¾è¡¨å’Œæ•°ç»„æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› ä¸ºä¸èƒ½ä»»æ„å–å€¼ï¼Œåªèƒ½è¯´æŒ‰ç…§nextçš„é¡ºåºä¾æ¬¡å¾€åæ”¾ã€‚é‚£ä¹ˆæŠŠä¸€ä¸ªèŠ‚ç‚¹å¾€åæ”¾çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡è¿­ä»£ æˆ‘ä»¬è¦è¿­ä»£çš„æœ‰ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªä¸ç”¨è¯´æ˜¯å½“å‰èŠ‚ç‚¹curæ¯æ¬¡è¿­ä»£å®Œå®ƒè¦æ¢æˆåŸé“¾è¡¨çš„ä¸‹ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªæ˜¯è½¬æ¢è¿‡å»çš„nextï¼Œå®ƒæ˜¯ä¸Šä¸€ä¸ªå½“å‰èŠ‚ç‚¹ã€‚ 1234567891011121314public ListNode reverseList(ListNode head) &#123; ListNode cur = head; ListNode next = null; while( cur != null)&#123; //è®°ä½åŸé“¾è¡¨çš„ä¸‹ä¸€ä¸ª ListNode temp = cur.next; //è®¾ä¸‹next cur.next = next; //æ›´æ–°nextä¸cur next = cur; cur = temp; &#125; return next;&#125; è§£æ³•äºŒï¼šé€’å½’æœ‰äº†è¿™æ ·ä¸€ä¸ªè¿­ä»£ï¼Œæˆ‘ä»¬å¯ä»¥å»è½¬ä¸€ä¸‹é€’å½’ã€‚åœ¨è¿­ä»£å½“ä¸­æˆ‘ä»¬å»è®¾ç½®äº†å¤´ç»“ç‚¹çš„nextä¸ºç©ºï¼Œä¹‹åçš„nextéƒ½æ˜¯æ¨å¯¼çš„ï¼Œåè¿‡æ¥å®ƒæ˜¯æˆ‘ä»¬çš„é€’å½’å‡ºå£ æˆ‘ä»¬é€šè¿‡reverseListcä¼ å…¥å¤´ç»“ç‚¹ï¼Œå®Œæˆæ•´ä¸ªé“¾è¡¨çš„åè½¬ã€‚å¦‚æœæˆ‘ä»¬ä¼ å…¥å¤´ç»“ç‚¹çš„nextå‘¢ï¼Œé‚£ä¹ˆå°±ä»å›¾ä¸­4çš„èŠ‚ç‚¹å¼€å§‹åè½¬ï¼Œæœ€ç»ˆè¦å®ç°çœŸæ­£çš„åè½¬æŠŠ4èŠ‚ç‚¹æŒ‡å‘5èŠ‚ç‚¹å¹¶ä¸”5èŠ‚ç‚¹æŒ‡å‘nullã€‚ 12345678910public ListNode reverseList(ListNode head) &#123; if(head==null || head.next==null) &#123; return head; &#125; ListNode cur = reverseList(head.next); //æœ€åæ“ä½œ 4æŒ‡å‘5ï¼Œä¸”5æŒ‡å‘null head.next.next = head; head.next = null; return cur;&#125; è§£æ³•ä¸‰ï¼šæ ˆè§£è¿™ä¸€é¢˜æ ˆä¹Ÿæ˜¯å¯ä»¥ç”¨ï¼Œæˆ‘ä»¬è¿­ä»£é¡ºç€ä»å¤´ç»“ç‚¹å¼€å§‹ï¼ŒæŠŠè‡ªå·±ä½œä¸ºä¸‹ä¸€ä¸ªè¢«æŒ‡å‘ã€‚é‚£ä¹ˆå€’ç€å…ˆä»æœ€åèŠ‚ç‚¹å¼€å§‹æŠŠå®ƒçš„nextæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä½†æ˜¯å¯¹äºè¿™ä¸ªå•å‘é“¾è¡¨æ‰¾ä¸‹ä¸€ä¸ªnextå°±å¯ä»¥å–åˆ°ï¼Œä½†æ‰¾å‰ä¸€ä¸ªå–ä¸åˆ°ã€‚ 1234567891011121314151617181920public ListNode reverseList(ListNode head) &#123; Stack&lt;ListNode&gt; stack = new Stack&lt;&gt;(); //ä¾æ¬¡å…¥æ ˆ while (head != null) &#123; stack.push(head); head = head.next; &#125; if (stack.isEmpty()) return null; ListNode newHead = stack.pop(); ListNode cur = newHead; //ä¾æ¬¡å‡ºæ ˆï¼Œnextä¸ºä¸‹ä¸€ä¸ª while (!stack.isEmpty()) &#123; ListNode temp = stack.pop(); cur.next = temp; cur = cur.next; &#125; //å¤„ç†æœ€åä¸€ä¸ªnextä¸ºnull,å¦åˆ™æˆç¯ cur.next = null; return newHead;&#125; æ€»ç»“è§£æ³•äºŒå…³äºé€’å½’çš„æ”¹é€ ä½œä¸ºç®—æ³•å­¦ä¹ è¿˜æ˜¯å¯ä»¥å¤šç»ƒä¹ çš„ï¼Œè§£æ³•ä¸€æ­£å‘éå†+è¿‡ç¨‹åå‘ï¼ˆæ¯ä¸ªæŠŠè‡ªå·±ä½œä¸ºåä¸€ä¸ªä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªåœ¨å‰é¢ï¼‰è§£æ³•ä¸‰åå‘éå†+è¿‡ç¨‹æ­£å‘ï¼ˆæ¯ä¸ªéƒ½æ˜¯å‰ä¸€ä¸ªå®ƒçš„nextå°±æ˜¯ä¸‹ä¸€ä¸ªï¼‰ï¼Œæ€»ä½“æ¥è¯´è§£æ³•ä¸€æœ€ä¼˜ï¼Œè§£æ³•äºŒä¸ä¸‰ç†Ÿæ‚‰å…¶ä»–æ•°æ®ç»“æ„ä»¥åŠæŸäº›ç®—æ³•æ€æƒ³","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"å¿½ç„¶ä¹‹é—´","slug":"å¿½ç„¶ä¹‹é—´","date":"2020-12-13T14:06:08.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/12/13/å¿½ç„¶ä¹‹é—´/","link":"","permalink":"http://yournotes.cn/2020/12/13/%E5%BF%BD%E7%84%B6%E4%B9%8B%E9%97%B4/","excerpt":"ã€Šå¿½ç„¶ä¹‹é—´ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå¿½ç„¶ä¹‹é—´ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"ç­‰ä½ ä¸‹è¯¾","slug":"ç­‰ä½ ä¸‹è¯¾","date":"2020-12-13T14:05:56.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/12/13/ç­‰ä½ ä¸‹è¯¾/","link":"","permalink":"http://yournotes.cn/2020/12/13/%E7%AD%89%E4%BD%A0%E4%B8%8B%E8%AF%BE/","excerpt":"ã€Šç­‰ä½ ä¸‹è¯¾ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šç­‰ä½ ä¸‹è¯¾ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹é“¾è¡¨ï¼š19.åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹","slug":"åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹","date":"2020-12-13T09:58:39.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/12/13/åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹/","link":"","permalink":"http://yournotes.cn/2020/12/13/%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E8%8A%82%E7%82%B9/","excerpt":"åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚","text":"åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ ç¤ºä¾‹ï¼š 12ç»™å®šä¸€ä¸ªé“¾è¡¨: 1-&gt;2-&gt;3-&gt;4-&gt;5, å’Œ n = 2.å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1-&gt;2-&gt;3-&gt;5. è¯´æ˜ï¼šç»™å®šçš„ n ä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚ è¿›é˜¶ï¼šä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ è§£æ³•ä¸€ï¼šå€’æ•°è½¬æ­£æ•°å¾ˆè‡ªç„¶çš„æ˜¯æˆ‘åªèƒ½é€šè¿‡å¤´èŠ‚ç‚¹headå¤šæ¬¡çš„nextï¼Œæ‰¾åˆ°è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹ï¼Œä½†æˆ‘ä»¬è·å–çš„å®šä½æ˜¯å€’æ•°ç¬¬å‡ ä¸ªã€‚ç›´è§‚çš„å°±æ˜¯æˆ‘ä»¬é€šè¿‡æ€»é•¿åº¦å‡å»å€’æ•°å°±æ˜¯æˆ‘ä»¬çš„nextæ¬¡æ•° 1234567891011121314151617181920212223public ListNode removeNthFromEnd(ListNode head, int n)&#123; // 1.ç»Ÿè®¡é“¾è¡¨é•¿åº¦ int count = 0; ListNode node = head; while(node != null)&#123; count++; node = node.next; &#125; //é‡ç½®node node = head; // 2.æ‰¾åˆ°è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ª for(int i = 0; i &lt; count - n - 1; i++)&#123; node = node.next; &#125; // 3.åˆ é™¤æ“ä½œ if(count == n)&#123; //å¦‚æœæ˜¯å¤´èŠ‚ç‚¹ head = head.next; &#125;else&#123; node.next = node.next.next; &#125; return head;&#125; ç°åœ¨æˆ‘ä»¬æ˜¯å®Œæˆäº†è¿™æ ·ä¸€ä¸ªæ€è·¯ï¼Œä½†æœ‰ä¸ªåœ°æ–¹å¯ä»¥åšä¸€ä¸ªè°ƒæ•´ï¼Œä¹Ÿæ˜¯è¦å…»æˆçš„ä¸€ä¸ªä¹ æƒ¯ã€‚å¯¹äºä¸€ä¸ªé“¾è¡¨å¦‚ä¸‹å›¾ï¼šå®ƒæ˜¯æŒ‰æŸç§åº”ç”¨é€»è¾‘å­˜å‚¨çš„å†…å®¹ï¼Œå†…å®¹éƒ½ä¼šæœ‰æ“ä½œæœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿æ“ä½œä»¥åŠæ“ä½œçš„å®‰å…¨æ€§ã€‚é€šå¸¸éƒ½ä¼šåœ¨çœŸæ­£å­˜å‚¨æ•°æ®çš„é“¾å¤´ä¹‹å‰åŠ ä¸€ä¸ªèŠ‚ç‚¹å®ƒçš„å€¼å’Œå†…å®¹æ— å…³ï¼Œç”¨è¿™ä¸ªé¢å¤–çš„èŠ‚ç‚¹æ¥åšçœŸæ­£çš„é“¾è¡¨èŠ‚ç‚¹ã€‚ æˆ‘ä»¬ç¬¬ä¸‰æ­¥åˆ é™¤æ“ä½œä¹‹æ‰€ä»¥è¿™æ ·åˆ†å¼€æ“ä½œå°±æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„æ˜¯åˆ é™¤èŠ‚ç‚¹ä¹‹å‰çš„èŠ‚ç‚¹å› æ­¤åˆ é™¤æ˜¯å¤´ç»“ç‚¹çš„è¯éœ€è¦å•ç‹¬å¤„ç†ï¼Œè¿™ä¸‹å°±ä¸éœ€è¦äº†ã€‚æœ€åæˆ‘ä»¬å»è¿”å›æ•°æ®é“¾çš„å¤´ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£å¤´çš„next 1234567891011121314151617181920public ListNode removeNthFromEnd(ListNode head, int n)&#123; //åŠ ä¸€ä¸ªå¤´ç»“ç‚¹ ListNode listHead = new ListNode(0,head); // 1.ç»Ÿè®¡é“¾è¡¨é•¿åº¦ int count = 0; ListNode node = head; while(node != null)&#123; count++; node = node.next; &#125; // é‡ç½®node node = listHead; // 2.æ‰¾åˆ°è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ª(æ¯”ä¹‹å‰å¤šä¸€æ¬¡) for(int i = 0; i &lt; count - n; i++)&#123; node = node.next; &#125; // 3.åˆ é™¤æ“ä½œ node.next = node.next.next; return listHead.next;&#125; æ—¶é—´Oï¼ˆnï¼‰ï¼Œç©ºé—´Oï¼ˆ1ï¼‰ è§£æ³•äºŒï¼šæ ˆæ— è®ºæ˜¯å€’åºå•Šè¿˜æ˜¯å€’æ•°éƒ½å¯ä»¥æƒ³åˆ°æ ˆè¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œä¸Šä¸ªè§£æ³•æˆ‘ä»¬å®Œæ•´éå†ä¸€æ¬¡ç»Ÿè®¡é•¿åº¦ï¼ŒæŠŠå€’æ•°è½¬ä¸ºæ­£æ•°å†è¿›è¡Œæ­£æ•°æ¬¡æ•°çš„nextå–è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œè¿™æ¬¡ä¸€æ ·è¿›è¡Œå®Œæ•´éå†éƒ½æ”¾åˆ°æˆ‘ä»¬çš„æ ˆé‡Œé¢ã€‚ ä¹‹åå†è¿›è¡Œå€’æ•°æ¬¡æ•°çš„å‡ºæ ˆæ“ä½œï¼Œä¹‹åå‰©ä¸‹çš„æ ˆé¡¶å³æ˜¯è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ 123456789101112131415161718192021public ListNode removeNthFromEnd(ListNode head, int n) &#123; // åˆ›å»ºçœŸå¤´ç»“ç‚¹ ListNode listHead = new ListNode(0, head); // åˆ›å»ºæ ˆ Deque&lt;ListNode&gt; stack = new LinkedList&lt;ListNode&gt;(); // ä»çœŸå¤´ç»“ç‚¹å¼€å§‹å­˜å…¥ ListNode node = listHead; while (node != null) &#123; stack.push(node); node = node.next; &#125; // ä¾æ¬¡å¼¹å‡º for (int i = 0; i &lt; n; i++) &#123; stack.pop(); &#125; // å–æ ˆé¡¶å³è¢«åˆ èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ node = stack.peek(); // åˆ é™¤æ“ä½œ node.next = node.next.next; return listHead.next;&#125; æ—¶é—´Oï¼ˆnï¼‰ï¼Œåˆ›å»ºäº†æ ˆç©ºé—´Oï¼ˆnï¼‰ è§£æ³•ä¸‰ï¼šä¸€æ¬¡éå†ä¸¤ä¸ªè§£æ³•éƒ½ç”¨åˆ°äº†ä¸¤æ¬¡éå†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ‰æ²¡æœ‰æ–¹æ³•å¯ä»¥åœ¨ä¸€æ¬¡éå†ä¸­å®Œæˆå‘¢ï¼Ÿ å®ƒå°±æ˜¯æˆ‘ä»¬å¤„ç†é“¾è¡¨çš„ç»å…¸æ–¹å¼å¿«æ…¢æŒ‡é’ˆ,æˆ‘ä»¬ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆé¢†å…ˆnæ¬¡ï¼ˆå€’æ•°æ¬¡æ•°ï¼‰ï¼Œæ…¢æŒ‡é’ˆåœ¨èµ·ç‚¹ï¼ŒåŒæ—¶è¿­ä»£ã€‚å½“å¿«æŒ‡é’ˆåˆ°äº†ç»ˆç‚¹ï¼Œé‚£æ…¢æŒ‡é’ˆå²‚ä¸æ˜¯åˆ°äº†å€’æ•°ç¬¬nä¸ªã€‚fastèµ·ç‚¹å¯ä»¥å–åä¸€æ ¼é‚£ä¹ˆslowå°±èƒ½æ‹¿åˆ°å€’æ•°ç¬¬nä¸ªçš„å‰ä¸€ä¸ªèŠ‚ç‚¹ 12345678910111213141516public ListNode removeNthFromEnd(ListNode head, int n) &#123; ListNode listHead = new ListNode(0, head); // å–çš„æ˜¯è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œfaståˆå§‹åŒ–å¤šä¸€æ ¼ ListNode fast = head; ListNode slow = listHead; int i = 0; while (fast != null) &#123; // fastå…ˆç§»åŠ¨nï¼Œä¹‹ååœ¨åŒæ­¥ç§»åŠ¨ fast = fast.next; if(i&gt;=n) slow = slow.next; i++; &#125; // ç›´åˆ°fastéå†å®Œï¼Œslowå°±åœåœ¨å€’æ•°ç¬¬nä¸ªçš„å‰ä¸ª slow.next = slow.next.next; return listHead.next;&#125; æ—¶é—´Oï¼ˆnï¼‰,ç©ºé—´Oï¼ˆ1ï¼‰ æ€»ç»“ä¸‰ç§è§£æ³•å‰ä¸¤ç§è§£æ³•æ¯”è¾ƒå¸¸è§„å°±é¡ºé¢˜æ„æ¨å¯¼æ­£ç€æ‰¾å’Œåç€æ‰¾ï¼Œç¬¬ä¸‰ç§å¿«æ…¢æŒ‡é’ˆæ˜¯é“¾è¡¨æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§æ–¹å¼ã€‚æ¯”å¦‚æœ‰ç¯ï¼Œè¿½å‡»é—®é¢˜ç­‰ç­‰ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"gitee(ç äº‘)å›¾ç‰‡ä¸¢å¤±é—®é¢˜","slug":"gitee-ç äº‘-å›¾ç‰‡ä¸¢å¤±é—®é¢˜","date":"2020-12-13T02:57:49.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2020/12/13/gitee-ç äº‘-å›¾ç‰‡ä¸¢å¤±é—®é¢˜/","link":"","permalink":"http://yournotes.cn/2020/12/13/gitee-%E7%A0%81%E4%BA%91-%E5%9B%BE%E7%89%87%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/","excerpt":"gitee(ç äº‘)å›¾ç‰‡ä¸¢å¤±ä¹‹å‰ç”³è¯·äº†åšå®¢å›­æƒ³ç€ç¾åŒ–ä¸€ç•ªï¼Œäºæ˜¯æ¢äº†BNDongçš„Silenceä¸»é¢˜ï¼Œé¦–é¡µæäº†ä¸€äº›å°é¢å›¾ç‰‡å­˜å‚¨åœ¨gitee","text":"gitee(ç äº‘)å›¾ç‰‡ä¸¢å¤±ä¹‹å‰ç”³è¯·äº†åšå®¢å›­æƒ³ç€ç¾åŒ–ä¸€ç•ªï¼Œäºæ˜¯æ¢äº†BNDongçš„Silenceä¸»é¢˜ï¼Œé¦–é¡µæäº†ä¸€äº›å°é¢å›¾ç‰‡å­˜å‚¨åœ¨gitee ä½†éƒ¨åˆ†å°é¢æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥çš„å¹¶ä¸”æç¤ºæ˜¯302é‡å®šå‘ã€‚ æ°å¥½åœ¨çœ‹è¿™ä¸ªçš„æ—¶å€™giteeæˆ‘å·²ç»ç™»é™†äº†å› æ­¤æ‹¿è¿™ä¸ªåœ°å€æ˜¯å¯ä»¥è®¿é—®åˆ°å›¾ç‰‡çš„ï¼Œå› æ­¤æ”¾ç€æ²¡æœ‰è§£å†³ç›´åˆ°ä»Šå¤©æ—©ä¸Šï¼Œç›´æ¥è®¿é—®æç¤º302å›¾ç‰‡çš„åœ°å€å‘ç°æç¤ºå¤§å°è¶…è¿‡1Mçš„æ–‡ä»¶éœ€è¦ç™»é™†æ‰èƒ½è®¿é—®ç„¶åè·³åˆ°giteeçš„ç™»å½•é¡µã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåšå®¢å°é¢302çš„åŸå› ï¼ˆèµ„æºå­˜åœ¨ä½†é‡å®šå‘ï¼‰ è§£å†³æ–¹å¼æ— è®ºæ˜¯giteeè¿˜æ˜¯githubå®ƒéƒ½æä¾›äº†ä¸€ä¸ªé™æ€å¯¹å¤–è®¿é—®çš„æ¥å£ï¼Œéœ€è¦çš„ä»“åº“å¼€å¯æœåŠ¡ä¸­çš„Gitee Pagesã€‚ä½¿ç”¨å®ƒç”Ÿæˆçš„æœåŠ¡åœ°å€å†å»è®¿é—®ä»“åº“ä¸‹å¯¹åº”æ–‡ä»¶çš„è·¯å¾„https://ç”¨æˆ·å.gitee.io/ä»“åº“å/æ–‡ä»¶è·¯å¾„ä½†æ–‡ä»¶è·¯å¾„ä¸èƒ½æœ‰ä¸­æ–‡ï¼ŒåŸå§‹æ•°æ®çš„è®¿é—®æ–¹å¼å¯ä»¥æœ‰ä¸­æ–‡ï¼Œä½†è¿™ä¸ªæ˜¯ä¸èƒ½çš„","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹é“¾è¡¨ï¼š237.åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹","slug":"åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹","date":"2020-12-11T14:14:50.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/12/11/åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹/","link":"","permalink":"http://yournotes.cn/2020/12/11/%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/","excerpt":"åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/delete-node-in-a-linked-list/ è¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½¿å…¶å¯ä»¥åˆ é™¤æŸä¸ªé“¾è¡¨ä¸­ç»™å®šçš„ï¼ˆéæœ«å°¾ï¼‰èŠ‚ç‚¹ã€‚ä¼ å…¥å‡½æ•°çš„å”¯ä¸€å‚æ•°ä¸º è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹ ã€‚","text":"åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/delete-node-in-a-linked-list/ è¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½¿å…¶å¯ä»¥åˆ é™¤æŸä¸ªé“¾è¡¨ä¸­ç»™å®šçš„ï¼ˆéæœ«å°¾ï¼‰èŠ‚ç‚¹ã€‚ä¼ å…¥å‡½æ•°çš„å”¯ä¸€å‚æ•°ä¸º è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹ ã€‚ ç°æœ‰ä¸€ä¸ªé“¾è¡¨ â€“ head &#x3D; [4,5,1,9]ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸º: ç¤ºä¾‹ 1ï¼š è¾“å…¥ï¼šhead &#x3D; [4,5,1,9], node &#x3D; 5è¾“å‡ºï¼š[4,1,9]è§£é‡Šï¼šç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º 5 çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 1 -&gt; 9. ç¤ºä¾‹ 2ï¼š è¾“å…¥ï¼šhead &#x3D; [4,5,1,9], node &#x3D; 1è¾“å‡ºï¼š[4,5,9]è§£é‡Šï¼šç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º 1 çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -&gt; 5 -&gt; 9. æç¤ºï¼š é“¾è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªèŠ‚ç‚¹ã€‚ é“¾è¡¨ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚ ç»™å®šçš„èŠ‚ç‚¹ä¸ºéæœ«å°¾èŠ‚ç‚¹å¹¶ä¸”ä¸€å®šæ˜¯é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ã€‚ ä¸è¦ä»ä½ çš„å‡½æ•°ä¸­è¿”å›ä»»ä½•ç»“æœã€‚ é¢˜è§£ä½œä¸ºåˆé›†ä¸­é“¾è¡¨ä¸‹çš„ç¬¬ä¸€é¢˜ï¼Œç¡®å®æ˜¯è¾ƒç®€å•çš„åªæ˜¯ä¸€ä¸ªå•å…ƒæ“ä½œï¼Œä½†å¦‚æœä¸çŸ¥é“é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ä¹Ÿè¿˜æ˜¯æ˜¯å®Œæˆä¸äº†çš„ã€‚ é“¾è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ é“¾è¡¨æ˜¯ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­çš„ã€éé¡ºåºçš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨çš„æŒ‡é’ˆåœ°å€å®ç°ï¼Œæœ‰ä¸€ç³»åˆ—ç»“ç‚¹ï¼ˆåœ°å€ï¼‰ç»„æˆï¼Œç»“ç‚¹å¯åŠ¨æ€çš„ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯åŒ…å«å€¼ä¸æ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ã€‚å¤§æ¦‚å¦‚ä¸‹ï¼š æ¯ä¸ªèŠ‚ç‚¹å¯¹è±¡é™¤äº†å†…å®¹å€¼è¿˜æœ‰ä¸€ä¸ªå¼•ç”¨ä¸€å…±ä¸¤ä¸ªå±æ€§ï¼Œè¿™æ ·ä»¥æ¥å„ä¸ªèŠ‚ç‚¹å¯¹è±¡ä¹‹é—´å°±å¥½åƒè¿æ¥ç€ä¸€æ · 12345678910class ListNode&#123; //èŠ‚ç‚¹å€¼ int val; //èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸ªèŠ‚ç‚¹ ListNode next; //æ„é€ å™¨ ListNode(int x) &#123; val = x; &#125;&#125; ç°åœ¨å®ƒä¼ ä¸€æ¡é“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ã€‚å› ä¸ºä¸€ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯åªæœ‰è‡ªå·±çš„å€¼ä»¥åŠä¸‹ä¸ªèŠ‚ç‚¹ã€‚æ‰€ä»¥ä¼ å…¥ä¸€ä¸ªèŠ‚ç‚¹æ˜¯çœ‹ä¸åˆ°æ•´ä¸ªé“¾è¡¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªèƒ½æ‹¿åˆ°éƒ¨åˆ†é“¾å°±æ˜¯ä¼ å…¥çš„èŠ‚ç‚¹ä¹‹åçš„5---&gt;1---&gt;9ã€‚å€¼ä¸º4çš„èŠ‚ç‚¹æ˜¯æŒ‡å‘5è¿™ä¸ªèŠ‚ç‚¹çš„ï¼Œåˆ é™¤5èŠ‚ç‚¹å°±æ˜¯è®©4èŠ‚ç‚¹ç›´æ¥æŒ‡å‘1èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼Œä½†æˆ‘ä»¬æ‹¿ä¸åˆ°4èŠ‚ç‚¹æ‰€ä»¥ä¸èƒ½æ”¹å˜å®ƒçš„nextå±æ€§çš„å€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬åªèƒ½æ”¹å®ƒæŒ‡å‘çš„èŠ‚ç‚¹æŠŠå®ƒçš„å€¼ç”±5æ”¹æˆ1å†æŒ‡å‘9 è¿™æ ·å°±ä¸ç”¨æ”¹å˜4èŠ‚ç‚¹çš„æŒ‡å‘ï¼Œåªæ˜¯æŠŠå®ƒæŒ‡å‘çš„è¿™ä¸ªå¯¹è±¡å€¼ä¸nextéƒ½æ”¹æ‰ï¼Œé‚£ä¹ˆ4è¿˜æ˜¯æŒ‡å‘0x001åªä¸è¿‡æ˜¯1äº†ï¼Œè€Œè¿™ä¸ªæŒ‡å‘çš„åˆæ˜¯0x004å°±æ˜¯9ï¼Œé“¾è¡¨ä¹Ÿå°±å˜æˆäº†4â€”&gt;1â€”&gt;9å®Œæˆåˆ é™¤5çš„æ“ä½œ 123456public void deleteNode(ListNode node) &#123; //â€œè¢«åˆ èŠ‚ç‚¹â€çš„å€¼æ”¹ä¸ºä¸‹ä¸ªèŠ‚ç‚¹çš„å€¼ node.val = node.next.val; //æŒ‡å‘ä¸‹ä¸‹ä¸ª node.next = node.next.next;&#125; æ€»ç»“å¼€ç¯‡ç¬¬ä¸€é¢˜ä¸»è¦æ˜¯è€ƒå¯Ÿå­¦ä¹ é“¾è¡¨æ„æˆï¼Œæœ¬èº«æ˜¯ç®€å•çš„ä½†å…ˆè¦äº†è§£è¿™æ ·ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š14.æœ€é•¿å…¬å…±å‰ç¼€","slug":"æœ€é•¿å…¬å…±å‰ç¼€","date":"2020-12-10T10:57:15.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/12/10/æœ€é•¿å…¬å…±å‰ç¼€/","link":"","permalink":"http://yournotes.cn/2020/12/10/%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%89%8D%E7%BC%80/","excerpt":"æœ€é•¿å…¬å…±å‰ç¼€é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/longest-common-prefix/ ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚","text":"æœ€é•¿å…¬å…±å‰ç¼€é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/longest-common-prefix/ ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚ å¦‚æœä¸å­˜åœ¨å…¬å…±å‰ç¼€ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² â€œâ€ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: [â€œflowerâ€,â€flowâ€,â€flightâ€]è¾“å‡º: â€œflâ€ ç¤ºä¾‹ 2: è¾“å…¥: [â€œdogâ€,â€racecarâ€,â€carâ€]è¾“å‡º: â€œâ€è§£é‡Š: è¾“å…¥ä¸å­˜åœ¨å…¬å…±å‰ç¼€ã€‚ è¯´æ˜: æ‰€æœ‰è¾“å…¥åªåŒ…å«å°å†™å­—æ¯ a-z ã€‚ è§£æ³•ä¸€ï¼šæ¨ªå‘æ¯”è¾ƒå»æ‰¾åˆ°å¤šä¸ªä¸²çš„å…¬å…±å‰ç¼€ä¸çŸ¥é“ï¼Œä½†æˆ‘ä»¬è‡³å°‘çŸ¥é“æ‰¾ä¸¤ä¸ªä¸²çš„å…¬å…±å‰ç¼€ã€‚äºæ˜¯ä¸¤ä¸¤ä¸€ç»„ç”¨ä¸Šæ¬¡å…¬å…±ä¸²æ‰¾ä¸‹å…¬å…±ç›´åˆ°n-1æ¬¡è¿­ä»£å®Œæˆæœ€ç»ˆå…¬å…±å‰ç¼€ï¼Œé‚£ä¹ˆåƒç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸‰ä¸ªä¸²ï¼Œå°±éœ€è¦2æ¬¡è¿­ä»£ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ç”¨ä¸€ä¸ªå…¬å…±å‰ç¼€ä¸ä¸‹ä¸€ä¸ªå¾—åˆ°å…¬å…±å‰ç¼€ç„¶åæ›´æ–°è¦†ç›–ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚é‚£ä¹ˆä¸€å¼€å§‹æˆ‘ä»¬æŒ‡å®šstrs[0]ä¸ºç¬¬ä¸€ä»£çš„å…¬å…±å‰ç¼€ï¼Œä¸‹é¢æ˜¯åˆæ¬¡æäº¤æˆåŠŸçš„ä»£ç ï¼š 12345678910111213141516171819202122232425262728public String longestCommonPrefix(String[] strs)&#123; int n = strs.length; if(strs.length == 0) return &quot;&quot;; //æœ€åˆå…¬å…±å‰ç¼€ String common = strs[0]; //ä¸¤ä¸¤ä¸€æ¬¡å…±n-1æ¬¡è¿­ä»£ for(int i = 1; i &lt; n; i++)&#123; //ä¸€æ¬¡è¿­ä»£çš„è¿‡ç¨‹ int j = 0; char[] cur = common.toCharArray(); char[] next = strs[i].toCharArray(); //strsæ•°ç»„ä¸ä¸¤ä¸ªå­—ç¬¦ä¸²è¾¹ç•Œ if(next.length == 0) return &quot;&quot;; while( j &lt; cur.length &amp;&amp; j &lt; next.length )&#123; // æ‰«æåˆ°ä¸åŒäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•åœ¨æœ€åä¸€ä¸ªç›¸åŒçš„åé¢ä¸€ä¸ª if(cur[j] != next[j])&#123; common = common.substring(0,j);//æ³¨æ„åŒºé—´å·¦é—­å³å¼€ break; // æ²¡æœ‰æ‰«æåˆ°ä¸åŒä½†ä½†å·²ç»ç»“å°¾äº†ï¼Œé‚£ä¹ˆç´¢å¼•å°±æ˜¯ç›¸åŒçš„æœ€åä¸€ä¸ª &#125;else if(j == cur.length - 1 || j == next.length - 1)&#123; common = common.substring(0,j+1); break; &#125; j++; &#125; &#125; return common;&#125; ä½†è¿™æ®µä»£ç æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œæˆ‘ä»¬è¦è€ƒè™‘çš„é—®é¢˜æ˜¯åœ¨å¾ªç¯é‡Œé¢çš„æ“ä½œèƒ½ä¸èƒ½å‡å°‘ï¼Œè™½ç„¶æ—¶é—´å¤æ‚åº¦ä¸ä¼šå˜åŒ–ã€‚ä½†å‡å°‘å¾ªç¯ä½“çš„æ“ä½œä¹Ÿå¯ä»¥æˆå€çš„æå‡ï¼Œè§‚å¯Ÿä»£ç é¦–æ¬¡è¿­ä»£å¤šå°‘æ¬¡å°±ä¸€ä¸ªforå¾ªç¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œé‚£ä¹ˆé‡ç‚¹å…³æ³¨çš„æ˜¯ä¸€æ¬¡è¿­ä»£è¿™ä¸ªè¿‡ç¨‹çš„ä»£ç ã€‚æˆ‘ä»¬è¿™æ®µä»£ç æ‹¿å‡ºæ¥ï¼š 123456789101112while( j &lt; cur.length &amp;&amp; j &lt; next.length )&#123; // æ‰«æåˆ°ä¸åŒäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•åœ¨æœ€åä¸€ä¸ªç›¸åŒçš„åé¢ä¸€ä¸ª if(cur[j] != next[j])&#123; common = common.substring(0,j);//æ³¨æ„åŒºé—´å·¦é—­å³å¼€ break; // æ²¡æœ‰æ‰«æåˆ°ä¸åŒä½†ä½†å·²ç»ç»“å°¾äº†ï¼Œé‚£ä¹ˆç´¢å¼•å°±æ˜¯ç›¸åŒçš„æœ€åä¸€ä¸ª &#125;else if(j == cur.length - 1 || i == next.length - 1)&#123; common = common.substring(0,i+1); break; &#125; j++;&#125; å…ˆçœ‹å¾ªç¯ä½“ï¼Œå› ä¸ºä¸¤æ®µiféƒ½æœ‰breakï¼Œé‚£ä¹ˆæœ‰ä¸‰æ®µåªèƒ½èµ°ä¸€ä¸ªã€‚æˆ‘ä»¬æƒ³ä¸€æƒ³ä¸¤æ®µifçš„æ“ä½œæ˜¯ä¸æ˜¯å¯ä»¥åˆå¹¶çš„ã€‚èªæ˜çš„å°ä¼™ä¼´åº”è¯¥èƒ½å¾ˆå¿«ååº”è¿‡æ¥ï¼Œæ— éæ˜¯æœ‰æœ¨æœ‰æ‰«æè¶…è¿‡å¯¼è‡´æ˜¯æˆªå–[ 0 , j )å’Œ[ 0 , j+1 )ï¼Œé‚£ä¹ˆå…¶å®åªè¦ä¸æ»¡è¶³ä¸¤ä¸ªç›¸ç­‰å°±å‡ºå¾ªç¯é‚£ä¹ˆç´¢å¼•éƒ½æ˜¯åœ¨æœ€åç›¸ç­‰ååŠ äº†1ï¼Œæ ¹æœ¬ä¸ç”¨åˆ¤æ–­æˆªå–[ 0 , j )å³å¯ã€‚ä»£ç ç«‹åˆ»å¯ä»¥å‡å°‘ä¸€éƒ¨åˆ† 1234while( j &lt; cur.length &amp;&amp; j &lt; next.length &amp;&amp; cur[j] == next[j])&#123; j++;&#125;common = common.substring(0,j);//æ³¨æ„åŒºé—´å·¦é—­å³å¼€ åŒæ—¶å®ƒä¹Ÿå‡å°‘äº†æˆ‘ä»¬åœ¨å¾ªç¯é‡Œçš„æ“ä½œã€‚å¦‚æœå¾ªç¯æ˜¯næ¬¡ï¼Œé‚£ä¹ˆé‡Œé¢æœ‰2-3æ¬¡æ“ä½œé‚£ä¹ˆæ¬¡æ•°å°±æ˜¯2-3nï¼Œå°½é‡å»å‡å°‘é‡Œå±‚å¾ªç¯çš„æ“ä½œæ¬¡æ•°ã€‚é™¤äº†å¾ªç¯ä½“ä¹‹å¤–whileæ¡ä»¶ä¹Ÿæ˜¯éšç€å¾ªç¯è¢«æ‰§è¡Œå› ä¸ºæ˜¯çŸ­è·¯ä¸å¯èƒ½æ‰§è¡Œä¸€ä¸ªç»“æŸä¹Ÿå¯èƒ½æ‰§è¡Œä¸‰ä¸ªå¼å­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å‡å°‘ä¸€æ¬¡ 12345int length = cur.length &gt; next.length ? next.length : cur.length;while( j &lt; length &amp;&amp; cur[j] == next[j])&#123; j++;&#125;common = common.substring(0,j);//æ³¨æ„åŒºé—´å·¦é—­å³å¼€ è¿™å°±ç›¸å½“äºæˆ‘ä»¬å¾€å¤–å±‚æ·»åŠ äº†ä¸€æ¬¡æ“ä½œä½†å‡å°‘äº†å¾ªç¯çš„ä¸€æ¬¡æ“ä½œï¼Œè¿™äº›å…¶å®ä¼˜åŒ–éƒ½ä¸å¤§ä½†æ˜¯åœ¨ä¸æ¢è§£é¢˜æ€ç»´ä»¥åŠæ•°æ®ç»“æ„ç­‰ç­‰æˆ‘ä»¬å¯ä»¥å»è€ƒè™‘çš„ä¼˜åŒ–ç‚¹ 123456789101112131415161718192021public String longestCommonPrefix(String[] strs)&#123; int n = strs.length; if(strs.length == 0) return &quot;&quot;; //æœ€åˆå…¬å…±å‰ç¼€ String common = strs[0]; //ä¸¤ä¸¤ä¸€æ¬¡å…±n-1æ¬¡è¿­ä»£ for(int i = 1; i &lt; n; i++)&#123; //ä¸€æ¬¡è¿­ä»£çš„è¿‡ç¨‹ int j = 0; char[] cur = common.toCharArray(); char[] next = strs[i].toCharArray(); //strsæ•°ç»„ä¸ä¸¤ä¸ªå­—ç¬¦ä¸²è¾¹ç•Œ if(next.length == 0) return &quot;&quot;; int length = cur.length &gt; next.length ? next.length : cur.length; while( j &lt; length &amp;&amp; cur[j] == next[j])&#123; j++; &#125; common = common.substring(0,j);//æ³¨æ„åŒºé—´å·¦é—­å³å¼€ &#125; return common;&#125; è§£æ³•äºŒï¼šçºµå‘æ¯”è¾ƒå…¶å®æœ€å¼€å§‹æˆ‘æƒ³åˆ°çš„è§£æ³•å°±æ˜¯çºµå‘æ¯”è¾ƒåŒæ—¶æ‰«æå¤šä¸ªä¸²æ¯ä¸ªä¸²çš„å­—ç¬¦éƒ½ç›¸ç­‰å†åŒæ—¶å¾€åæ‰«æç›´åˆ°æœ‰ç¬¬ä¸€ä¸ªä¸åŒå°±ç»ˆæ­¢ã€‚ ä½†å½“æ—¶åªæœ‰ä¸€ä¸ªç›´è§‚çš„æƒ³æ³•æƒ³ç€ä¸€å­—æ’å¼€æ¯”è¾ƒç›¸ç­‰ç„¶åæ„Ÿè§‰å¤„ç†ä¸äº†å°±æƒ³åˆ°æ¨ªå‘çš„æ¯”è¾ƒå¥½å†™ 1234int i = 0;while( i &lt; min(length) &amp;&amp; str1[i] == str2[i]==..... )&#123; i++;&#125; å…¶å®è¿™é‡Œå–ä¸€ä¸ªå­—ç¬¦ä¸²éå†ï¼Œåœ¨ä¸€æ¬¡éå†é‡Œé¢éå†æ•°ç»„çš„å…¶ä»–çš„å­—ç¬¦ä¸²éƒ½è¿›è¡Œæ¯”è¾ƒå³å¯ 1234567891011121314151617public String longestCommonPrefix(String[] strs) &#123; //ä¸ºç©ºè¿”å›&quot;&quot; if (strs.length == 0) return &quot;&quot;; //å–æ•°ç»„å‡å°‘charAtåœ¨å¾ªç¯ä½“ char[] p = str[0].toCharArray(); int n = p.length; for (int i = 0; i &lt; n; i++) &#123; char c = p[i]; //ä¾æ¬¡åˆ¤æ–­ç›´åˆ°ä¸ç­‰å‡ºç°ï¼Œæˆªå–è¿”å› for (int j = 1; j &lt; strs.length; j++) &#123; if (i == strs[j].length() || strs[j].charAt(i) != c) &#123; return strs[0].substring(0, i); &#125; &#125; &#125; return strs[0];&#125; è§£æ³•ä¸‰ï¼šå˜ä½“ï¼ˆè§£ä¸€ï¼‰æˆ‘ä»¬å‡ºäº†é€šè¿‡å¾ªç¯æ‰«ææ¯”è¾ƒå¾—åˆ°ä¸¤ä¸²çš„å…¬å…±å‰ç¼€ï¼Œè¿˜å¯ä»¥é€šè¿‡å‰ç¼€æ˜¯å¦åŒ…å«å¯ä»¥ç”¨a.startsWith(b)åˆ¤æ–­æ˜¯å¦ä»¥èµ·å§‹ç´¢å¼•åŒ…å«å¦ä¸€ä¸ªä¸²ï¼Œæˆ–è€…ç”¨a.indexOf(b) &#x3D;&#x3D; 0 æ¥åˆ¤æ–­ï¼Œæ²¡æœ‰åˆ™åˆ å‡ä¸€ä½ç›´åˆ°æ‰¾åˆ°å…¬å…±å‰ç¼€å¼€å§‹ä¸‹ä¸ªè¿­ä»£å’Œè§£ä¸€æ˜¯ä¸€æ ·çš„åªæ˜¯æ‰¾å…¬å…±å‰ç¼€çš„æ–¹å¼ä¸åŒ 1234567891011121314public String longestCommonPrefix(String[] strs) &#123; //ä¸ºç©ºè¿”å›&quot;&quot; if (strs.length == 0) return &quot;&quot;; String common = strs[0]; for (String str : strs) &#123; // è‹¥commonå·²ç»å‡ä¸º&quot;&quot;ï¼Œåˆ™è¯´æ˜æ— å…¬å…±å‰ç¼€ï¼Œç›´æ¥è¿”å› if (common == &quot;&quot;) return common; // è‹¥commonåœ¨å½“å‰strä¸­åŒ¹é…ä¸ä¸Šï¼Œåˆ™å‡å°‘å­—ç¬¦ä¸²commonçš„é•¿åº¦ï¼Œå†æ¬¡å°è¯•åŒ¹é… while (!str.startsWith(common)) &#123; common = common.substring(0,common.length() - 1); &#125; &#125; return common;&#125; æ€»ç»“æ€»ä½“è€Œè¨€çš„è¯å…¶å®æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ¯•ç«Ÿéƒ½ä½¿ç”¨äº†substringç­‰æ–¹æ³•è¶…è¿‡nçš„ä¸‰æ¬¡æ–¹éƒ½å·®ä¸å¤šæ‰€ä»¥æ²¡æœ‰è¾ƒä¼˜è§£ã€‚ä¹Ÿæ˜¯å’Œä¸Šä¸€é¢˜å·®ä¸å¤šä¸¤é¢˜éƒ½æ˜¯ä½“ä¼šè¿­ä»£çš„ä¸€ä¸ªè¿‡ç¨‹å› æ­¤ä¹Ÿéƒ½å¯ä»¥è½¬æˆé€’å½’çš„å½¢å¼ï¼Œé‚£å°±è¿˜å¯ä»¥åˆ†æ²»åˆ†åˆ°æœ€åéƒ½æ˜¯ä¸¤ä¸¤ä¸€ç»„ç„¶åæ±‚è§£è‡ªåº•å‘ä¸Šä¹‹åä¼šä»‹ç»ï¼Œåˆ°æ­¤LeetCodeåˆçº§ç®—æ³•åˆé›†ä¸­çš„å­—ç¬¦ä¸²ç³»åˆ—å…¨éƒ¨å®Œæˆï¼Œå¼€å¯ä¸‹ä¸ªç¯‡ç« é“¾è¡¨ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š38.å¤–è§‚æ•°åˆ—","slug":"å¤–è§‚æ•°åˆ—","date":"2020-12-09T11:12:44.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/12/09/å¤–è§‚æ•°åˆ—/","link":"","permalink":"http://yournotes.cn/2020/12/09/%E5%A4%96%E8%A7%82%E6%95%B0%E5%88%97/","excerpt":"å¤–è§‚æ•°åˆ—é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/count-and-say/ ç»™å®šä¸€ä¸ªæ­£æ•´æ•° n ï¼Œè¾“å‡ºå¤–è§‚æ•°åˆ—çš„ç¬¬ n é¡¹ã€‚","text":"å¤–è§‚æ•°åˆ—é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/count-and-say/ ç»™å®šä¸€ä¸ªæ­£æ•´æ•° n ï¼Œè¾“å‡ºå¤–è§‚æ•°åˆ—çš„ç¬¬ n é¡¹ã€‚ ã€Œå¤–è§‚æ•°åˆ—ã€æ˜¯ä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œä»æ•°å­— 1 å¼€å§‹ï¼Œåºåˆ—ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯å¯¹å‰ä¸€é¡¹çš„æè¿°ã€‚ ä½ å¯ä»¥å°†å…¶è§†ä½œæ˜¯ç”±é€’å½’å…¬å¼å®šä¹‰çš„æ•°å­—å­—ç¬¦ä¸²åºåˆ—ï¼š countAndSay(1) &#x3D; â€œ1â€countAndSay(n) æ˜¯å¯¹ countAndSay(n-1) çš„æè¿°ï¼Œç„¶åè½¬æ¢æˆå¦ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ã€‚ 1234567//å‰äº”é¡¹å¦‚ä¸‹ï¼š111211211111221 ç¬¬ä¸€é¡¹æ˜¯æ•°å­— 1æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 1 å³ â€œ ä¸€ ä¸ª 1 â€ï¼Œè®°ä½œ â€œ11â€æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 11 å³ â€œ äºŒ ä¸ª 1 â€ ï¼Œè®°ä½œ â€œ21â€æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 21 å³ â€œ ä¸€ ä¸ª 2 + ä¸€ ä¸ª 1 â€ ï¼Œè®°ä½œ â€œ1211â€æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 1211 å³ â€œ ä¸€ ä¸ª 1 + ä¸€ ä¸ª 2 + äºŒ ä¸ª 1 â€ ï¼Œè®°ä½œ â€œ111221â€è¦ æè¿° ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ï¼Œé¦–å…ˆè¦å°†å­—ç¬¦ä¸²åˆ†å‰²ä¸º æœ€å° æ•°é‡çš„ç»„ï¼Œæ¯ä¸ªç»„éƒ½ç”±è¿ç»­çš„æœ€å¤š ç›¸åŒå­—ç¬¦ ç»„æˆã€‚ç„¶åå¯¹äºæ¯ä¸ªç»„ï¼Œå…ˆæè¿°å­—ç¬¦çš„æ•°é‡ï¼Œç„¶åæè¿°å­—ç¬¦ï¼Œå½¢æˆä¸€ä¸ªæè¿°ç»„ã€‚è¦å°†æè¿°è½¬æ¢ä¸ºæ•°å­—å­—ç¬¦ä¸²ï¼Œå…ˆå°†æ¯ç»„ä¸­çš„å­—ç¬¦æ•°é‡ç”¨æ•°å­—æ›¿æ¢ï¼Œå†å°†æ‰€æœ‰æè¿°ç»„è¿æ¥èµ·æ¥ã€‚ ä¾‹å¦‚ï¼Œæ•°å­—å­—ç¬¦ä¸² â€œ3322251â€ çš„æè¿°å¦‚ä¸‹å›¾ï¼š ç¤ºä¾‹ 1ï¼š è¾“å…¥ï¼šn &#x3D; 1è¾“å‡ºï¼šâ€1â€è§£é‡Šï¼šè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬æ ·ä¾‹ã€‚ ç¤ºä¾‹ 2ï¼š è¾“å…¥ï¼šn &#x3D; 4è¾“å‡ºï¼šâ€1211â€è§£é‡Šï¼šcountAndSay(1) &#x3D; â€œ1â€countAndSay(2) &#x3D; è¯» â€œ1â€ &#x3D; ä¸€ ä¸ª 1 &#x3D; â€œ11â€countAndSay(3) &#x3D; è¯» â€œ11â€ &#x3D; äºŒ ä¸ª 1 &#x3D; â€œ21â€countAndSay(4) &#x3D; è¯» â€œ21â€ &#x3D; ä¸€ ä¸ª 2 + ä¸€ ä¸ª 1 &#x3D; â€œ12â€ + â€œ11â€ &#x3D; â€œ1211â€ æç¤ºï¼š 1 &lt;&#x3D; n &lt;&#x3D; 30 è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•å¾ˆç›´è§‚çš„æˆ‘ä»¬è¦å»æ‰«æä¸€ä¸ªä¸²å¹¶ä¸”æŒ‰ç…§é¡ºåºç»Ÿè®¡è¿ç»­ç›¸åŒçš„æ•°å­—æ•°é‡ï¼Œå‡ºç°ä¸åŒåˆ™ä¸­æ–­é‡æ–°ç»Ÿè®¡ã€‚æœ€åå¾—åˆ°ä¸€ä¸ªæ–°ä¸²è¿™æ˜¯ä¸€æ¬¡è¿­ä»£ã€‚æŒ‰ç…§ä¸Šé¢çš„ä¾‹å­è¦è¿›è¡Œnæ¬¡è¿­ä»£ï¼Œæ¯æ¬¡ç”¨ä¸Šä¸€æ¬¡å¾—åˆ°çš„ä¸²ã€‚ 1234567891011121314151617181920212223242526public String countAndSay(int n)&#123; //ä¸Šä»£ä¸² String str = &quot;1&quot;; //æœ¬æ¬¡è¿­ä»£ä¸² StringBuilder result = new StringBuilder(); //è¿­ä»£næ¬¡ for(int c = 1; c &lt; n; c++)&#123; //1. æ¸…ç©ºè¿­ä»£ä¸² result.delete(0,result.length()); //2. åŒæŒ‡é’ˆæ‰«æ int i = 0, j = 0; while(i &lt; str.length() &amp;&amp; j &lt; str.length())&#123; if(str.charAt(i) != str.charAt(j))&#123; //æ‹¼æ¥ä¸Šç›¸åŒæ•°é‡å’Œå¯¹åº”æ•°å­— result.append(j - i).append(str.charAt(i)); i = j; &#125; if(j == str.length() - 1)&#123; result.append(j - i + 1).append(str.charAt(i)); &#125; j++; &#125; str = result.toString(); &#125; return str;&#125; è§£æ³•äºŒï¼šé€’å½’ï¼ˆè§£ä¸€ï¼‰æ¢ä¸ªèŠ±æ ·çš„è¯ï¼Œä¹Ÿå¯ä»¥æŠŠä¸Šé¢è¿­ä»£næ¬¡è¯¥ä¸ºé€’å½’è°ƒç”¨næ¬¡çš„æ–¹å¼ 1234567891011121314151617181920212223public String countAndSay(int n) &#123; // é€’å½’ç»ˆæ­¢æ¡ä»¶ if (n == 1) &#123; return &quot;1&quot;; &#125; // æœ¬æ¬¡è¿­ä»£ä¸² StringBuilder result = new StringBuilder(); // ä¸Šä»£ä¸² String str = countAndSay(n - 1); // åŒæŒ‡é’ˆæ‰«æ int i = 0, j = 0; while(i &lt; str.length() &amp;&amp; j &lt; str.length())&#123; if(str.charAt(i) != str.charAt(j))&#123; result.append(j - i).append(str.charAt(i)); i = j; &#125; if(j == str.length() - 1)&#123; result.append(j - i + 1).append(str.charAt(i)); &#125; j++; &#125; return res.toString();&#125; è§£æ³•ä¸‰ ï¼šæ­£åˆ™è¡¨è¾¾å¼ç©çš„å†èŠ±ä¸€ç‚¹å¯ä»¥ç”¨ä¸‹æ­£åˆ™è¡¨è¾¾å¼ã€‚å»åŒ¹é…ç›¸åŒçš„æ•°å­—ä¸ºä¸€ç»„ï¼Œç”¨åˆ°java.util.regexä¸‹çš„Patternä¸Matcherï¼Œ 12345&quot;.&quot;æ˜¯è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œ&quot;//1&quot;å¼•ç”¨å‰é¢æ‹¬å·è¡¨ç¤ºçš„å†…å®¹&quot;*&quot; 0ä¸ªæˆ–å¤šä¸ª&quot;(.)\\\\1*&quot;ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä»»æ„çš„ç¬¬äºŒä¸ªè¦ä¹ˆæ˜¯å‰ä¸€ä¸ªå­—ç¬¦è¦ä¹ˆå°±æ²¡æœ‰ï¼Œ*åé¢éƒ½å’Œç¬¬äºŒä½ä¸€æ ·å­—ç¬¦ä¸²&quot;aaabc&quot;è¿‡æ»¤å‡ºæ¥å°±æ˜¯aaaã€bã€c ä»£ç ï¼š 12345678910111213public String countAndSay(int n) &#123; String str = &quot;1&quot;; Pattern pattern = Pattern.compile(&quot;(.)\\\\1*&quot;); for (int i = 1; i &lt; n; i++) &#123; Matcher m = pattern.matcher(str); StringBuilder result = new StringBuilder(); while (m.find()) &#123; result.append(m.group().length() + String.valueOf(m.group().charAt(0))); &#125; str = result.toString(); &#125; return str;&#125; æ€»ç»“å¯¹äºè¿™é¢˜çš„è¯è¿˜æ˜¯æ¯”è¾ƒå¥½åšçš„ï¼Œå› ä¸ºåœ¨ç›´æ¥è§£æ³•é‡Œé¢å¹¶æ²¡æœ‰å¤šä½™çš„æ­¥éª¤æœ¬èº«å°±æ˜¯ä¼˜çš„ã€‚ä½¿ç”¨è§£æ³•ä¸‰ç›®çš„åªæ˜¯ç†Ÿæ‚‰ä¸€ä¸‹Javaç±»åº“å…³äºæ­£åˆ™çš„ä¸€äº›æ“ä½œå’Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œæœ¬èº«å¯¹é¢˜æ¥è¯´é‡Œé¢å¾ˆå¤šæ“ä½œæ˜¯å¤šä½™çš„å› æ­¤æ•ˆç‡æ˜¯ä½çš„ã€‚è§£ä¸€è§£äºŒåœ¨å¤æ‚åº¦ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œè§£äºŒè™½ç„¶åœ¨è¿™ä¸Šé¢æ˜¾ç¤ºçš„å¥½åƒå¿«ä¸€ç‚¹ä½†é€’å½’å¾ªç¯è°ƒç”¨æ–¹æ³•åˆ›å»ºæ ˆå¸§è¿›æ ˆå‡ºæ ˆè¿˜æ˜¯æœ‰æ¶ˆè€—çš„ï¼Œè¾ƒä¼˜è§£è¿˜æ˜¯æœ€å¼€å§‹çš„è§£ä¸€","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š28.å®ç° strStr()","slug":"å®ç°-strStr","date":"2020-12-06T08:29:28.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/12/06/å®ç°-strStr/","link":"","permalink":"http://yournotes.cn/2020/12/06/%E5%AE%9E%E7%8E%B0-strStr/","excerpt":"å®ç° strStr() å‡½æ•°é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/implement-strstr/ ç»™å®šä¸€ä¸ª haystack å­—ç¬¦ä¸²å’Œä¸€ä¸ª needle å­—ç¬¦ä¸²ï¼Œåœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½® (ä»0å¼€å§‹)ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1ã€‚","text":"å®ç° strStr() å‡½æ•°é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/implement-strstr/ ç»™å®šä¸€ä¸ª haystack å­—ç¬¦ä¸²å’Œä¸€ä¸ª needle å­—ç¬¦ä¸²ï¼Œåœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½® (ä»0å¼€å§‹)ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: haystack &#x3D; â€œhelloâ€, needle &#x3D; â€œllâ€è¾“å‡º: 2 ç¤ºä¾‹ 2: è¾“å…¥: haystack &#x3D; â€œaaaaaâ€, needle &#x3D; â€œbbaâ€è¾“å‡º: -1 è¯´æ˜:å½“ needle æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬åº”å½“è¿”å›ä»€ä¹ˆå€¼å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåœ¨é¢è¯•ä¸­å¾ˆå¥½çš„é—®é¢˜ã€‚å¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œå½“ needle æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶æˆ‘ä»¬åº”å½“è¿”å› 0 ã€‚è¿™ä¸Cè¯­è¨€çš„ strstr() ä»¥åŠ Javaçš„ indexOf() å®šä¹‰ç›¸ç¬¦ã€‚ è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•æœ¬é¢˜å°±æ˜¯è¦å®ç°ä¸€ä¸ªindexOfå‡½æ•°ï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯åŒæŒ‡é’ˆåœ¨ä¸¤ä¸ªä¸²ä¸­æ¯”è¾ƒã€‚ æš´åŠ›è§£æ³•ï¼ˆBFï¼‰å°±ä¾æ¬¡æ‰«æå¦‚æœæœ‰ç›¸åŒçš„åŒæ­¥ç»§ç»­ï¼Œå‡ºç°ä¸åŒå°±ä¸­æ–­äº†ï¼Œæ¨¡å¼ä¸²å›åˆ°èµ·ç‚¹ä¸»ä¸²å›åˆ°ä¸‹ä¸ªå¼€å¤´ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸»ä¸²çš„é•¿åº¦ä¼šéå†å®Œï¼Œå‰©ä¸‹çš„çœ‹æ¨¡å¼ä¸²æ‰«åˆ°ä»€ä¹ˆæ—¶å€™ä¸­æ–­ã€‚åœ¨æœ€å·®çš„æƒ…å†µä¸‹æ¯æ¬¡æ¨¡å¼ä¸²éå†åˆ°æœ€åä¸€ä¸ªä¸­æ–­ä¸»ä¸²æœ€æœ«ç«¯æ‰åŒ¹é…åˆ°é‚£å°±æ˜¯O(n*m) è¾¹ç•Œ ç´¢å¼•è¶Šç•Œ ç»†èŠ‚ å¾ªç¯ç»“æŸæ¡ä»¶ haystackç©ºè¿”å›0 haystackæ¯”needleçŸ­è¿”å›-1 123456789101112131415161718public int strStr(String haystack, String needle) &#123; char[] hay = haystack.toCharArray(); char[] need = needle.toCharArray(); int h = hay.length; int n = need.length; int i=0,j=0; while(j &lt; h &amp;&amp; i &lt; n)&#123; if(hay[j] == need[i])&#123; i++; j++; &#125;else &#123; j=j-i+1; i=0; &#125; &#125; if(i &gt;= n) return j-i; else return -1;&#125; è§£æ³•äºŒï¼šæˆªå–å­ä¸²é™¤äº†ä¸¤ä¸ªæŒ‡é’ˆä¾æ¬¡æ¯”è¾ƒä¹‹å¤–ï¼Œåˆ¤æ–­ä¸€ä¸ªä¸²æ˜¯å¦å«å¦ä¸€ä¸ªä¸²ç›´æ¥å»ä¾æ¬¡æˆªå–ç›®æ ‡é•¿åº¦çš„å­ä¸²ï¼Œåˆ¤æ–­æœ‰æ— ç›¸ç­‰çš„å­ä¸²ã€‚è¿™é‡Œæˆªå–æˆ‘ç›´æ¥ç”¨çš„substringæ–¹æ³•ï¼Œè¿™ä¸ªä¹Ÿå®ç°è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œæ€ä¹ˆå†™éƒ½ä¸€æ ·ä½†æˆ‘ä»¬ä¸€å®šè¦çŸ¥é“å®ƒçš„å®ç°æ˜¯æ€æ ·çš„æ‰èƒ½å®¢è§‚çš„åˆ†æå®ƒçš„å¤æ‚åº¦ï¼Œè¿™é‡Œå®ƒå°±æ˜¯ä¸€æ¬¡éå†ã€‚å› æ­¤ä¸‹é¢ä»£ç çš„è§£æ³•ä¹Ÿæ˜¯ä¸€ä¸ªä¸¤å±‚çš„éå† 12345678910public int strStr(String haystack, String needle) &#123; int n = needle.length(); int h = haystack.length(); for (int i = 0; i &lt; h - n + 1; i++) &#123; if (haystack.substring(i, i + n).equals(needle)) &#123; return i; &#125; &#125; return -1;&#125; å…¶å®è¿™ç§è§£æ³•å’Œè§£æ³•ä¸€æ˜¯ä¸€æ¨¡ä¸€æ ·åªä¸è¿‡å‰è€…æŠŠæˆªå–å’Œæ¯”è¾ƒç›´æ¥å†™äº†å‡ºæ¥ï¼Œå®ƒæ¯”è§£æ³•ä¸€ä¼˜çš„ç‚¹åªæ˜¯å°‘éå†äº†åé¢çŸ­çš„éƒ¨åˆ†ä¸€ä¸ªæ˜¯h * (?)å¦ä¸€ä¸ªæ˜¯ï¼ˆh-n+1ï¼‰* (?)ï¼Œæ˜¯å› ä¸ºä¸¤å±‚éå†åˆ†å¼€å†™å¯ä»¥è¿™æ ·åšã€‚å¤–é¢éå†å­ä¸²çš„å¼€å¤´ï¼Œé‡Œé¢å†éå†å­ä¸²ä¸æ¨¡å¼ä¸²æ˜¯å¦ç›¸ç­‰ã€‚è€Œè§£æ³•ä¸€æ”¾åˆ°äº†ä¸€ä¸ªå¾ªç¯ä¹Ÿåšåˆ°äº†è¿™ä¸ªé€»è¾‘ æ€»ç»“å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„ç®—æ³•ï¼Œä¹Ÿæ˜¯åœ¨è®¡ç®—æœºé¢†åŸŸå®é™…åº”ç”¨è¶…å¤šçš„ç®—æ³•ã€‚ä¸Šé¢æ— è®ºæ˜¯è§£ä¸€è¿˜æ˜¯è§£äºŒå…¶å®éƒ½æ˜¯å…¨éå†æ¯”è¾ƒã€‚è®¸å¤šç§‘å­¦å®¶éƒ½å‘æ˜äº†æ›´å¤šå‡å°‘æ¯”è¾ƒæ¬¡æ•°çš„æ–¹å¼ï¼Œæ¯”å¦‚RKç®—æ³•ã€BMç®—æ³•ä»¥åŠKMPç®—æ³•ã€‚è¿™äº›åœ¨è¿™é‡Œæš‚æ—¶ä¸ä»‹ç»ã€‚ä¹‹ååœ¨å…¶ä»–ç³»åˆ—ä¼šå‡ºå•ç¯‡è®²è§£è¿™ç±»ä»¥åŠå…¶ä»–çš„ç®—æ³•ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š8.å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)","slug":"å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi","date":"2020-12-04T12:33:57.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/12/04/å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi/","link":"","permalink":"http://yournotes.cn/2020/12/04/%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E6%95%B4%E6%95%B0-atoi/","excerpt":"å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/string-to-integer-atoi/ è¯·ä½ æ¥å®ç°ä¸€ä¸ª atoi å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°ã€‚","text":"å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/string-to-integer-atoi/ è¯·ä½ æ¥å®ç°ä¸€ä¸ª atoi å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°ã€‚ é¦–å…ˆï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ®éœ€è¦ä¸¢å¼ƒæ— ç”¨çš„å¼€å¤´ç©ºæ ¼å­—ç¬¦ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦ä¸ºæ­¢ã€‚æ¥ä¸‹æ¥çš„è½¬åŒ–è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸ºæ­£æˆ–è€…è´Ÿå·æ—¶ï¼Œåˆ™å°†è¯¥ç¬¦å·ä¸ä¹‹åé¢å°½å¯èƒ½å¤šçš„è¿ç»­æ•°å­—å­—ç¬¦ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°ã€‚ å‡å¦‚ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯æ•°å­—ï¼Œåˆ™ç›´æ¥å°†å…¶ä¸ä¹‹åè¿ç»­çš„æ•°å­—å­—ç¬¦ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ•´æ•°ã€‚ è¯¥å­—ç¬¦ä¸²åœ¨æœ‰æ•ˆçš„æ•´æ•°éƒ¨åˆ†ä¹‹åä¹Ÿå¯èƒ½ä¼šå­˜åœ¨å¤šä½™çš„å­—ç¬¦ï¼Œé‚£ä¹ˆè¿™äº›å­—ç¬¦å¯ä»¥è¢«å¿½ç•¥ï¼Œå®ƒä»¬å¯¹å‡½æ•°ä¸åº”è¯¥é€ æˆå½±å“ã€‚ **æ³¨æ„ï¼š**å‡å¦‚è¯¥å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ•´æ•°å­—ç¬¦ã€å­—ç¬¦ä¸²ä¸ºç©ºæˆ–å­—ç¬¦ä¸²ä»…åŒ…å«ç©ºç™½å­—ç¬¦æ—¶ï¼Œåˆ™ä½ çš„å‡½æ•°ä¸éœ€è¦è¿›è¡Œè½¬æ¢ï¼Œå³æ— æ³•è¿›è¡Œæœ‰æ•ˆè½¬æ¢ã€‚ åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè‹¥å‡½æ•°ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å› 0 ã€‚ æç¤ºï¼š æœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ â€˜ â€˜ ã€‚å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œé‚£ä¹ˆå…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’231, 231 âˆ’ 1]ã€‚å¦‚æœæ•°å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œè¯·è¿”å› INT_MAX (231 âˆ’ 1) æˆ– INT_MIN (âˆ’231) ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: â€œ42â€è¾“å‡º: 42 ç¤ºä¾‹ 2: è¾“å…¥: â€œ -42â€è¾“å‡º: -42è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ä¸º â€˜-â€˜, å®ƒæ˜¯ä¸€ä¸ªè´Ÿå·ã€‚ æˆ‘ä»¬å°½å¯èƒ½å°†è´Ÿå·ä¸åé¢æ‰€æœ‰è¿ç»­å‡ºç°çš„æ•°å­—ç»„åˆèµ·æ¥ï¼Œæœ€åå¾—åˆ° -42 ã€‚ ç¤ºä¾‹ 3: è¾“å…¥: â€œ4193 with wordsâ€è¾“å‡º: 4193è§£é‡Š: è½¬æ¢æˆªæ­¢äºæ•°å­— â€˜3â€™ ï¼Œå› ä¸ºå®ƒçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ä¸ºæ•°å­—ã€‚ ç¤ºä¾‹ 4: è¾“å…¥: â€œwords and 987â€è¾“å‡º: 0è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯ â€˜wâ€™, ä½†å®ƒä¸æ˜¯æ•°å­—æˆ–æ­£ã€è´Ÿå·ã€‚å› æ­¤æ— æ³•æ‰§è¡Œæœ‰æ•ˆçš„è½¬æ¢ã€‚ ç¤ºä¾‹ 5: è¾“å…¥: â€œ-91283472332â€è¾“å‡º: -2147483648è§£é‡Š: æ•°å­— â€œ-91283472332â€ è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ã€‚ å› æ­¤è¿”å› INT_MIN (âˆ’231) ã€‚ è§£æ³•ä¸€ ä¸¥æ ¼æ¥è¯´è¿™ä¸ªé—®é¢˜å…¶å®æ²¡æœ‰å¤ªå¤šè€ƒå¯Ÿç®—æ³•çš„å†…å®¹ä¸æ¶‰åŠæ•°æ®ç»“æ„ã€ç®—æ³•æ€ç»´çš„é€‰å–ã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°æ®çš„æ•ˆéªŒç­›é€‰ï¼Œæ›´å¤šçš„åƒå¼€å‘åœºæ™¯ä¸­çš„ä¸€äº›åŸå§‹æ•°æ®çš„å¤„ç†å‚æ•°çš„ç­›é€‰ã€‚æ‰€ä»¥ä¸éš¾ä½†æœ‰è¾ƒå¤šçš„åˆ¤æ–­è¯­å¥æ¶‰åŠä¸€äº›ç»†èŠ‚é—®é¢˜éœ€è¦ä»”ç»†å¯¹æ¯” ä¸»ä½“ å»æ‰å‰å¯¼ç©ºæ ¼ å¤„ç†æ­£è´Ÿå· è¯†åˆ«æ•°å­— è¾¹ç•Œ æ•´æ•°æº¢å‡º ç´¢å¼•è¶Šç•Œ ç»†èŠ‚ æ— æ•ˆè½¬æ¢è¿”å›0 123456789101112131415161718192021222324252627282930public int myAtoi(String str) &#123; char[] chars = str.toCharArray(); int n = chars.length; int index = 0; //1.å»æ‰å‰å¯¼ç©ºæ ¼ while (index &lt; n &amp;&amp; chars[index] == &#x27; &#x27;) &#123; index++; &#125; //2.ç¬¦å·å¤„ç† int sign = 1; if(index &lt; n &amp;&amp; chars[index] == &#x27;+&#x27;)&#123; index++; &#125;else if(index &lt; n &amp;&amp; chars[index] == &#x27;-&#x27;)&#123; sign = -1; index++; &#125; //3.æ‹¼æ¥æ•°å­— int result = 0; while (index &lt; n &amp;&amp; chars[index]-&#x27;0&#x27; &gt;= 0 &amp;&amp; chars[index]-&#x27;0&#x27; &lt;= 9) &#123; int num = chars[index] - &#x27;0&#x27;; if (result &gt; (Integer.MAX_VALUE - num) / 10) &#123; // æœ¬æ¥åº”è¯¥æ˜¯ result * 10 + num &gt; Integer.MAX_VALUE // ä½†æ˜¯ *10 å’Œ + num éƒ½æœ‰å¯èƒ½è¶Šç•Œ,æ‰€ä»¥åœ¨ä¸Šé¢é€†å‘åˆ¤æ–­ return sign &lt; 0 ? Integer.MIN_VALUE : Integer.MAX_VALUE; &#125; result = result * 10 + num; index++; &#125; return result * sign;&#125; è§£æ³•äºŒï¼šæ­£åˆ™è¡¨è¾¾å¼ è¿™æ ·ä¸€ä¸ªç­›é€‰ä¸²çš„è¿‡ç¨‹æˆ‘ä»¬é™¤äº†è‡ªå·±å»å»éå†åˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼ã€‚ç”¨åˆ°Javaç±»åº“çš„ç›¸å…³å·¥å…·ä½†æœ¬è´¨ä¸Šè¿˜æ˜¯å’Œè§£æ³•ä¸€æ˜¯ä¸€æ ·çš„ã€‚éœ€è¦å¼•å…¥java.util.regexåŒ…ä¸‹çš„Patternä¸Matcher 1234567891011121314public int myAtoi(String str) &#123; str = str.trim(); Pattern pattern = Pattern.compile(&quot;[-+]??[0-9]++&quot;); Matcher matcher = pattern.matcher(str); if (matcher.lookingAt()) &#123; String num = str.substring(0, matcher.end()); try &#123; return Integer.parseInt(num); &#125; catch (NumberFormatException nfe) &#123; return num.charAt(0) == &#x27;-&#x27; ? Integer.MIN_VALUE : Integer.MAX_VALUE; &#125; &#125; return 0;&#125; è§£æ³•ä¸‰ï¼šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœº æ­£åˆ™è¡¨è¾¾çš„æ‰€åŒ¹é…çš„æ‰€æœ‰å­—ç¬¦ä¸²æ„æˆéƒ½å¯ä»¥ç”¨æœ‰é™è‡ªåŠ¨æœºè¯†åˆ«ï¼Œå…¶å®ä¸Šé¢è§£æ³•çš„æ¯ä¸ªè¿‡ç¨‹åˆ¤å®šå°±æ˜¯ä¸€ä¸ªæœ‰é™è‡ªåŠ¨æœºçš„æ¯ä¸ªçŠ¶æ€ã€‚ä»å»é™¤ç©ºæ ¼é˜¶æ®µåˆ°å–ç¬¦å·é˜¶æ®µåˆ°æ•°å­—é˜¶æ®µåˆ°ç»“æŸã€‚å’ŒKMPä¸€æ ·éƒ½å¯è§£å†³å­—ç¬¦ä¸²åŒ¹é…ç›¸å…³é—®é¢˜ çŠ¶æ€æœºé‡Œé¢æœ‰ 4 ä¸ªæ¦‚å¿µï¼š State ï¼ŒçŠ¶æ€ã€‚ä¸€ä¸ªçŠ¶æ€æœºè‡³å°‘è¦åŒ…å«ä¸¤ä¸ªçŠ¶æ€ã€‚ Event ï¼Œäº‹ä»¶ã€‚äº‹ä»¶å°±æ˜¯æ‰§è¡ŒæŸä¸ªæ“ä½œçš„è§¦å‘æ¡ä»¶æˆ–è€…å£ä»¤ã€‚ Action ï¼ŒåŠ¨ä½œã€‚äº‹ä»¶å‘ç”Ÿä»¥åè¦æ‰§è¡ŒåŠ¨ä½œã€‚ Transition ï¼Œå˜æ¢ã€‚ä¹Ÿå°±æ˜¯ä»ä¸€ä¸ªçŠ¶æ€å˜åŒ–ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚ å¥—åˆ°è¿™é“é¢˜é‡Œå°±æ˜¯æˆ‘ä»¬çš„ç¨‹åºåœ¨æ¯ä¸ªæ—¶åˆ»æœ‰ä¸€ä¸ªçŠ¶æ€ s ï¼Œæ¯æ¬¡ä»åºåˆ—ä¸­è¾“å…¥ä¸€ä¸ªå­—ç¬¦ c ï¼Œå¹¶æ ¹æ®å­—ç¬¦ c è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ s&#39; ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦å»ºç«‹ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„ä» s ä¸ c æ˜ å°„åˆ° s&#39; çš„è¡¨æ ¼å³å¯è§£å†³é¢˜ç›®ä¸­çš„é—®é¢˜ã€‚ ç­”æ¡ˆä¸­ç»™å‡ºçš„ç¤ºä¾‹å›¾æ˜¯è¿™æ ·çš„ï¼š ç”¨å›¾è¡¨æ¥è¡¨ç¤ºï¼š æˆ‘åˆç”»äº†ä¸‹é¢ä¸€å¼ å›¾å’Œä¸Šé¢ä¸¤ä¸ªåŒä¹‰ã€‚ï¼ˆ0è¡¨ç¤ºçŠ¶æ€startï¼Œ1è¡¨ç¤ºçŠ¶æ€signedï¼Œ2è¡¨ç¤ºçŠ¶æ€int_numberï¼Œ3è¡¨ç¤ºçŠ¶æ€endï¼Œâ€™å…¶ä»–â€™è¡¨ç¤ºé™¤[ç©ºæ ¼ã€æ­£è´Ÿå·ã€æ•°å­—]ä¹‹å¤–çš„å­—ç¬¦ï¼‰ æ„æ€å°±æ˜¯è¯´ä¾æ¬¡è¾“å…¥å­—ç¬¦ã€‚é¦–å…ˆå­—ç¬¦æ˜¯è¿›å…¥çŠ¶æ€0ï¼ˆstartï¼‰å¦‚æœå­—ç¬¦æ˜¯ç©ºæ ¼é‚£ä¹ˆä¸‹ä¸ªä»ç„¶è¿›å…¥çŠ¶æ€0.å¦‚æœæ˜¯å…¶ä»–åˆ™è¿›å…¥çŠ¶æ€3ï¼ˆendï¼‰ç»“æŸå¤„ç†ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥å®ç°è¿™æ ·ä¸€ä¸ªè‡ªåŠ¨æœº 1234567891011121314151617181920212223242526272829303132class Automata&#123; //ä¸‹æ¬¡çš„çŠ¶æ€ private int state=0; //çŠ¶æ€è¡¨ private int[][] table=&#123;&#123;0,1,2,3&#125;,&#123;3,3,2,3&#125;,&#123;3,3,2,3&#125;,&#123;3,3,3,3&#125;&#125;; //å­—ç¬¦çš„å››ç§æƒ…å†µ public int getCharState(char c)&#123; if(c==&#x27; &#x27;)return 0; if(c==&#x27;+&#x27;|| c==&#x27;-&#x27;)return 1; if(Character.isDigit(c))return 2; return 3; &#125; int result = 0; //ç»“æœ int sign = 1; //ç¬¦å· public void input(char c)&#123; //é€šè¿‡è¿™æ¬¡çš„å­—ç¬¦è®¾å®šä¸‹ä¸ªçŠ¶æ€ state=table[state][getCharState(c)]; //state == 0 ç›´æ¥è¿‡ if(state==1 &amp;&amp;c==&#x27;-&#x27;) sign=-1; if(state==2)&#123; int num = c - &#x27;0&#x27;; //é™¤äº†é€šè¿‡å½“å‰çŠ¶æ€å’Œå­—ç¬¦æ¥åˆ¤æ–­ä¸‹ä¸ªå»å¾€çŠ¶æ€ //æº¢å‡ºå‘ç”Ÿæ—¶å…¶å®ä¹Ÿåº”è¯¥æŠŠçŠ¶æ€è®¾ä¸º3ï¼ˆendï¼‰ if (result &gt; (Integer.MAX_VALUE - num) / 10) &#123; result = sign &lt; 0 ? Integer.MIN_VALUE : Integer.MAX_VALUE; sign = 1; state = 3; &#125;else result = result * 10 + num; &#125; //state == 3 ç›´æ¥è¿‡ &#125;&#125; ç„¶åå°±æ˜¯ä½¿ç”¨æˆ‘ä»¬çš„è‡ªåŠ¨æœºè§£é¢˜å•¦ 12345678public int myAtoi(String str) &#123; Automata auto=new Automata(); char[] chars=str.toCharArray(); for(char c:chars)&#123; auto.input(c); &#125; return auto.sign*auto.result;&#125; æˆ–è€…stateä¸º3è¿™è¾¹ä¹Ÿç›´æ¥ç»“æŸä¸å»æ‰ç”¨ç©ºæ–¹æ³• 12345678910public int myAtoi(String str) &#123; Automata auto=new Automata(); char[] chars=str.toCharArray(); int i = 0; while(i&lt;chars.length &amp;&amp; auto.state != 3)&#123; auto.input(chars[]); i++; &#125; return auto.sign*auto.result;&#125; æ€»ç»“å°±è¿™é¢˜æœ¬èº«æ¥è®²æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¸»è¦æ˜¯å¤„ç†ç»†èŠ‚é—®é¢˜å¯èƒ½å¾ˆå¤šå°ä¼™ä¼´åœ¨åƒè§£æ³•ä¸€çš„å¤„ç†è¿‡ç¨‹ä¸­æ²¡æœ‰ç»„ç»‡æ¸…æ™°å¯¼è‡´è™½ç„¶èƒ½è§£å‡ºé¢˜ä½†æœ‰å¾ˆå¤šä»£ç æ˜¯å†—ä½™çš„æˆ–è€…é‡å¤åˆ¤æ–­äº†çš„åœ°æ–¹ã€‚æœ€ç»ˆè§£æ³•ä¸€å…¶å®ä¹Ÿä¸è¿‡ä¸¤ä¸ªifè€Œå·²æ²¡æœ‰åƒä¼ é—»ä¸­é‚£æ ·è¯´å¾ˆå¤šifelseï¼Œä¸‰ä¸ªå¤„ç†ç¬¬ä¸€ä¸ªç©ºæ ¼å¤„ç†æ˜¯å¾ªç¯å¤„ç†ï¼Œç¬¬äºŒç¬¦å·åªæœ‰é¦–ä½æ‰€ä»¥å•ä¸ªifï¼Œç¬¬ä¸‰ä¸ªæ•°å­—ä¹Ÿæ˜¯å¾ªç¯å¤„ç†ã€‚å› æ­¤ä¸‰ä¸ªå¿…è¦çš„åˆ¤æ–­ä¸¤ä¸ªæ˜¯whileä¸€ä¸ªæ˜¯ifã€‚æœ€åè¿˜åŠ ä¸Šä¸€ä¸ªæº¢å‡ºçš„åˆ¤æ–­ã€‚é™¤æ­¤ä¹‹å¤–è¿™é¢˜ä¹Ÿæœ‰å­¦ä¹ åˆ°çš„åœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯å¯¹æ­£åˆ™çš„å›é¡¾ï¼Œç¬¬äºŒæ˜¯å¼•å‡ºæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºè¿™æ ·ä¸€ä¸ªè®¡ç®—æœºæ€æƒ³ä¹Ÿæ˜¯ç­‰äºåˆæ¸©ä¹ ä¸‹ç¦»æ•£æ•°å­¦ã€‚å¯¹äºè¿™é¢˜æ²¡æœ‰ä»€ä¹ˆç®—æ³•æ€ç»´ç†æ¸…æ€è·¯ä¹¦å†™ä¸‹æ¥å°±æ˜¯è§£æ³•ä¸€çš„è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚å› æ­¤è¿™ä¸€é¢˜çš„æ„å›¾å¯èƒ½å°±æ˜¯è®©æˆ‘ä»¬å­¦ä¹ åˆ°æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºå°è£…è¿™æ ·ä¸€ä¸ªæœºå™¨æˆ–è€…è§„åˆ™å¾€è¿™ä¸ªè§„åˆ™é‡Œè¾“å…¥è¯­è¨€ä¸²å®ƒå»ç»™æˆ‘ä»¬è¾“å‡ºç›¸åº”çš„ç»“æœã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š125.éªŒè¯å›æ–‡ä¸²","slug":"éªŒè¯å›æ–‡ä¸²","date":"2020-12-03T11:19:29.000Z","updated":"2025-04-17T08:34:52.025Z","comments":true,"path":"2020/12/03/éªŒè¯å›æ–‡ä¸²/","link":"","permalink":"http://yournotes.cn/2020/12/03/%E9%AA%8C%E8%AF%81%E5%9B%9E%E6%96%87%E4%B8%B2/","excerpt":"éªŒè¯å›æ–‡ä¸²é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-palindrome/ ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒéªŒè¯å®ƒæ˜¯å¦æ˜¯å›æ–‡ä¸²ï¼Œåªè€ƒè™‘å­—æ¯å’Œæ•°å­—å­—ç¬¦ï¼Œå¯ä»¥å¿½ç•¥å­—æ¯çš„å¤§å°å†™ã€‚","text":"éªŒè¯å›æ–‡ä¸²é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-palindrome/ ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒéªŒè¯å®ƒæ˜¯å¦æ˜¯å›æ–‡ä¸²ï¼Œåªè€ƒè™‘å­—æ¯å’Œæ•°å­—å­—ç¬¦ï¼Œå¯ä»¥å¿½ç•¥å­—æ¯çš„å¤§å°å†™ã€‚ **è¯´æ˜ï¼š**æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†ç©ºå­—ç¬¦ä¸²å®šä¹‰ä¸ºæœ‰æ•ˆçš„å›æ–‡ä¸²ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: â€œA man, a plan, a canal: Panamaâ€è¾“å‡º: true ç¤ºä¾‹ 2: è¾“å…¥: â€œrace a carâ€è¾“å‡º: false è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆé¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²ï¼Œå°±æ˜¯åŸä¸²ä¸å€’åºæ˜¯å¦ç›¸ç­‰ï¼Œé‚£ä¸å°±æ˜¯å‰é¢å†™çš„åè½¬å­—ç¬¦ä¸²ä¹ˆã€‚åªä¸è¿‡å°±æ˜¯é¦–å°¾äº¤æ¢ï¼Œæ¢æˆé¦–å°¾æ˜¯å¦ç›¸ç­‰ã€‚ä½†åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å…ˆè¦ä»åŸä¸²ä¸­è·å–æ•°å­—å­—æ¯ä¸²å¹¶å¿½ç•¥å¤§å°å†™ 123456789101112131415161718192021222324252627public boolean isPalindrome(String s) &#123; if(s == null || s.length() == 0) return true; char[] arr = s.toCharArray(); int n = arr.length; StringBuilder cs = new StringBuilder(); for (int i = 0; i &lt; n; i++) &#123; char c = arr[i]; if (check(c)) &#123; cs.append(change(c)); &#125; &#125; n = cs.length(); for(int i = 0; i &lt; n/2; i++)&#123; if(cs.charAt(i) != cs.charAt(n-i-1))&#123; return false; &#125; &#125; return true;&#125;//æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—public boolean check(char c)&#123; return c&gt;=48&amp;&amp;c&lt;=57 || c&gt;=65&amp;&amp;c&lt;=90 || c&gt;=97&amp;&amp;c&lt;=122;&#125;//å¤§å†™ç»Ÿä¸€è½¬å°å†™public char change(char c)&#123; return c&gt;=65&amp;&amp;c&lt;=90 ? c+=32 : c;&#125; è§£æ³•äºŒï¼šç»†èŠ‚ä¼˜åŒ–(åŒæŒ‡é’ˆ)æˆ‘ä»¬åˆšåˆšæ˜¯ç”¨äº†ä¸¤ä¸ªå¾ªç¯ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯ç­›é€‰äº†å±äºå­—æ¯æ•°å­—çš„ã€‚ç¬¬äºŒæ¬¡å¾ªç¯å†åˆ¤æ–­å­—æ¯æ•°å­—çš„ä¸²æœ‰æœ¨æœ‰é‡å¤ã€‚å…¶å®æ˜¯å†—ä½™çš„ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ç¬¬ä¸€ä¸ªå¾ªç¯å®Œæˆå³å¯ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯çœ‹å­—æ¯æ•°å­—æ˜¯å¦å›æ–‡ä½†æ²¡å¿…è¦å–å‡ºæ¥å†åšã€‚é‚£æ ·å‡å°‘äº†ä¸€ä¸ªå®¹å™¨å’Œä¸€æ¬¡éå†ã€‚ 123456789101112131415161718192021222324252627282930public boolean isPalindrome(String s) &#123; if(s == null || s.length() == 0) return true; char[] arr = s.toCharArray(); int n = arr.length; int start = 0; int end = n - 1; while(start &lt; end)&#123; while(start &lt; end &amp;&amp; !check(arr[start]))&#123; start++; &#125; while(start &lt; end &amp;&amp; !check(arr[end]))&#123; end--; &#125; if(change(arr[start])!=change(arr[end]))&#123; return false; &#125; start++; end--; &#125; return true;&#125;//æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—public boolean check(char c)&#123; return c&gt;=48&amp;&amp;c&lt;=57 || c&gt;=65&amp;&amp;c&lt;=90 || c&gt;=97&amp;&amp;c&lt;=122;&#125;//å¤§å†™ç»Ÿä¸€è½¬å°å†™public char change(char c)&#123; return c&gt;=65&amp;&amp;c&lt;=90 ? c+=32 : c;&#125; è§£æ³•ä¸‰ï¼šæ ˆè™½ç„¶è¿™é¢˜åŒæŒ‡é’ˆå°±æ˜¯æ¯”è¾ƒä¼˜çš„è§£æ³•ï¼Œä½†æ˜¯å‰æ®µæ—¶é—´å­¦ä¹ äº†æ ˆï¼Œå› æ­¤åœ¨è¿™é¢˜ä¸Šç”¨ä¸Šæ¸©ä¹ ä¸€ä¸‹ä¸è¿‡ç©ºé—´å’Œæ•ˆç‡åº”è¯¥æ˜¯æœ€ä½çš„ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ ˆæ˜¯åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ä¸€ç§æ•°æ®ç»“æ„ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„å®ç°ä¸€ä¸‹æ ˆå®Œæˆä¸€ä¸‹åŸºæœ¬çš„å››ä¸ªæ–¹æ³• 123456789101112131415161718class Stack&lt;E&gt;&#123; List&lt;E&gt; arr = new ArrayList(); int top = -1; void push(E c)&#123; arr.add(++top,c); &#125; E pop()&#123; E c = peek(); arr.remove(top--); return c; &#125; E peek()&#123; return arr.get(top); &#125; boolean isEmpty()&#123; return top &lt; 0; &#125;&#125; 123456789101112131415161718192021public boolean isPalindrome(String s) &#123; if(s == null || s.length() == 0) return true; char[] arr = s.toCharArray(); int n = arr.length; Stack&lt;Character&gt; stack = new Stack&lt;&gt;(); List&lt;Character&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; n; i++) &#123; char c = arr[i]; if (check(c))&#123; stack.push(change(c)); list.add(change(c)); &#125; &#125; int index = 0; while (!stack.isEmpty())&#123; if (stack.pop() != list.get(index++)) return false; &#125; return true;&#125; æ€»ç»“å›æ–‡ä¸²å¤„ç†çš„å¤§ä½“æ–¹å¼è¿˜æ˜¯åŒæŒ‡é’ˆã€åè½¬æˆ–è€…æ ˆã€‚å¯¹äºæ­¤é¢˜Characterç±»ä¸­æä¾›äº†åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—æˆ–å­—æ¯çš„æ–¹æ³•å’Œè½¬å¤§å°å†™çš„æ–¹æ³•ã€‚æˆ‘ä¸Šé¢æ˜¯å•ç‹¬å†™çš„check(char c)ä¸change(char c)æ–¹æ³•ã€‚ 12isLetterOrDigit(char c)toLowerCase(char c) åˆ©ç”¨Javaç±»åº“çš„è¯ç›´æ¥æœ‰åè½¬æ–¹æ³•å½“ç„¶å®ƒé‡Œé¢ä¹Ÿæ˜¯ä¸€æ¬¡éå†å¤„ç†ï¼Œåè½¬å†æ¯”è¾ƒã€‚å½“ç„¶æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„å¯ä»¥å‚è€ƒ 123//csä¸ºå–å‡ºæ¥çš„åªå«å­—æ¯æ•°å­—çš„å­—ç¬¦ä¸²String fz = cs.reverse().toString();return cs.equals(fz); æ€»ä½“æ¥è¯´å‘¢å¯ä»¥å®ç°çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå…³æ³¨å®ç°æœ¬èº«æ•ˆç‡æ¥è¯´åŒæŒ‡é’ˆæ˜¯è¾ƒä¼˜çš„ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š242.æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯","slug":"æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯","date":"2020-12-02T11:40:54.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/12/02/æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯/","link":"","permalink":"http://yournotes.cn/2020/12/02/%E6%9C%89%E6%95%88%E7%9A%84%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/","excerpt":"æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-anagram/ ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ t æ˜¯å¦æ˜¯ s çš„å­—æ¯å¼‚ä½è¯ã€‚","text":"æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-anagram/ ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ t æ˜¯å¦æ˜¯ s çš„å­—æ¯å¼‚ä½è¯ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: s &#x3D; â€œanagramâ€, t &#x3D; â€œnagaramâ€è¾“å‡º: true ç¤ºä¾‹ 2: è¾“å…¥: s &#x3D; â€œratâ€, t &#x3D; â€œcarâ€è¾“å‡º: false è¯´æ˜:ä½ å¯ä»¥å‡è®¾å­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯ã€‚ è¿›é˜¶:å¦‚æœè¾“å…¥å­—ç¬¦ä¸²åŒ…å« unicode å­—ç¬¦æ€ä¹ˆåŠï¼Ÿä½ èƒ½å¦è°ƒæ•´ä½ çš„è§£æ³•æ¥åº”å¯¹è¿™ç§æƒ…å†µï¼Ÿ è§£æ³•ä¸€ï¼šHashè¡¨è¿™é¢˜å‘¢ä¹Ÿæ˜¯ä¸€ä¸ªæŸ¥æ‰¾çš„ä¸€ä¸ªæ“ä½œï¼Œæ‰€ä»¥ç›´æ¥æƒ³åˆ°çš„å°±æ˜¯hashè¡¨ã€‚ä¸¤ä¸ªå­—ç¬¦ä¸²å­—æ¯éƒ½ä¸€æ ·å°±ä½ç½®ä¸ä¸€æ ·ï¼Œé‚£å°±ç”¨Hashè®°å½•ã€‚æœ€åkeyæ²¡æœ‰å·®åˆ«å¹¶ä¸”å€¼ç›¸ç­‰å°±æ˜¯å¼‚ä½è¯ï¼Œä¸¤ä¸ªå€¼ç›¸ç­‰å…¶å®å°±æ¢æˆæ˜¯ä¸€ä¸ªå€¼ç­‰äº0ã€‚ç”¨ä¸€ä¸ªmapå®Œæˆ 1234567891011121314151617181920212223public boolean isAnagram(String s, String t) &#123; char[] ss = s.toCharArray(); char[] tt = t.toCharArray(); //é•¿åº¦éƒ½ä¸ä¸€æ ·ç›´æ¥èµ°å¼€ if (ss.length != tt.length) &#123; return false; &#125; Map&lt;Character, Integer&gt; map = new HashMap&lt;Character, Integer&gt;(); for (int i = 0; i &lt; ss.length; i++) &#123; char c1 = ss[i]; char c2 = tt[i]; //ç»Ÿè®¡å¦‚æœæ˜¯çœŸçš„æ˜¯å¼‚ä½è¯æœ€åkeyå€¼ä¸º0 map.put(c1, map.getOrDefault(c1, 0) + 1); map.put(c2, map.getOrDefault(c2, 0) - 1); &#125; //éå†è¡¨,ä¸æ˜¯å¼‚ä½è¯å°±æœ‰å¤šä¹Ÿæœ‰å°‘ for (int i = 0; i &lt; map.size(); i++) &#123; if (map.get(tt[i]) != 0) &#123; return false; &#125; &#125; return true;&#125; è§£æ³•äºŒï¼šæ•°ç»„å’Œä»¥å‰è§£é¢˜ä¸€æ ·ç”¨Hashè¡¨èƒ½åšå°±è¦è€ƒè™‘ä¸€ä¸‹å¯ä¸å¯ä»¥ç”¨æ•°ç»„æ¥åšï¼Œç”¨æ•°ç»„çš„å±€é™æ˜¯å®ƒæ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥å¦‚æœè®°å½•çš„keyæ˜¯å›ºå®šçš„ä¸å¤šå°±å¯ä»¥ç”¨ã€‚è¿™é‡Œä¹Ÿå°±æ˜¯26ä¸ªå­—æ¯ 1234567891011121314151617181920212223public boolean isAnagram(String s, String t) &#123; char[] ss = s.toCharArray(); char[] tt = t.toCharArray(); //é•¿åº¦éƒ½ä¸ä¸€æ ·ç›´æ¥èµ°å¼€ if (ss.length != tt.length) &#123; return false; &#125; int[] table = new int[26]; for (int i = 0; i &lt; ss.length; i++) &#123; int c1 = ss[i] - &quot;a&quot;; int c2 = tt[i] - &quot;a&quot;; //ç»Ÿè®¡å¦‚æœæ˜¯çœŸçš„æ˜¯å¼‚ä½è¯æœ€åkeyå€¼ä¸º0 table[c1]++; table[c2]--; &#125; //éå†è¡¨,ä¸æ˜¯å¼‚ä½è¯å°±æœ‰å¤šä¹Ÿæœ‰å°‘ for (int i = 0; i &lt; 26; i++) &#123; if (table[i] != 0) &#123; return false; &#125; &#125; return true;&#125; è§£æ³•ä¸‰ï¼šæ’åºä¸å°±æ˜¯ä½ç½®ä¸åŒå˜›ï¼Œæ’ä¸ªåºä¸å°±æ˜¯ç›¸ç­‰å­—ç¬¦ä¸²äº†ï¼Œå°±ä¸ç”¨ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦æ•°é‡ã€‚ä¸è¿‡æ’åºæœ€ä¼˜ä¹Ÿæ˜¯æ‰nlognï¼Œæ‰€ä»¥å¹¶ä¸ä¼˜åªæ˜¯è§£è¿™é¢˜æ¯”è¾ƒç®€å•ç›´æ¥ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ä¸€å¥è¿”å› 12345678910public boolean isAnagram(String s, String t) &#123; if (s.length() != t.length()) &#123; return false; &#125; char[] str1 = s.toCharArray(); char[] str2 = t.toCharArray(); Arrays.sort(str1); Arrays.sort(str2); return Arrays.equals(str1, str2);&#125; æ€»ç»“æ€»ä½“æ¥è¯´è§£æ³•äºŒæ˜¯æœ€ä¼˜çš„ï¼Œä½†åªé™äºå½“å­—ç¬¦åªæ˜¯å°å†™å­—æ¯æ—¶ï¼Œæ•°ç»„çš„è§£æ³•ç¡®å®æ˜¯å±¡è¯•ä¸çˆ½åœ¨keyç¡®å®šçš„æƒ…å†µä¸‹æŸ¥æ‰¾ç»Ÿè®¡è¿™ç±»éƒ½å¯ä»¥ç”¨æ•°ç»„å®Œæˆã€‚å…¶ä»–ä¸¤ç§è§£æ³•å°±æ˜¯é€šç”¨çš„ä¸é™åˆ¶å­—ç¬¦ï¼Œæ’åºç•¥ä¼˜ä¸€ç‚¹ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š387.å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦","slug":"å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦","date":"2020-12-01T12:41:35.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/12/01/å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦/","link":"","permalink":"http://yournotes.cn/2020/12/01/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%94%AF%E4%B8%80%E5%AD%97%E7%AC%A6/","excerpt":"å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/first-unique-character-in-a-string/ ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°å®ƒçš„ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ï¼Œå¹¶è¿”å›å®ƒçš„ç´¢å¼•ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1ã€‚","text":"å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/first-unique-character-in-a-string/ ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°å®ƒçš„ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ï¼Œå¹¶è¿”å›å®ƒçš„ç´¢å¼•ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1ã€‚ ç¤ºä¾‹ï¼š 12345s = &quot;leetcode&quot;è¿”å› 0s = &quot;loveleetcode&quot;è¿”å› 2 æç¤ºï¼š ä½ å¯ä»¥å‡å®šè¯¥å­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯ã€‚ è§£æ³•ä¸€ï¼šåŒæŒ‡é’ˆåŒæŒ‡é’ˆæ¯”è¾ƒï¼Œæ¯æŒ‡å®šä¸€ä¸ªå€¼éƒ½è¦å…¨æ–‡æ‰«ææœ‰æ— é‡å¤ 123456789101112131415161718public int firstUniqChar(String s) &#123; char[] arr = s.toCharArray(); int n = arr.length; for(int i = 0; i &lt; n; i++)&#123; boolean flag = true; //éå†æ¯ä¸ªå€¼ä¸å½“å‰å€¼æ¯”è¾ƒï¼Œæœ‰é‡å¤æ”¹false for(int j = 0; j &lt; n; j++)&#123; if(i != j &amp;&amp; arr[i] == arr[j])&#123; flag = false; &#125; &#125; //éå†å®Œæ²¡æœ‰å’Œå½“å‰å€¼ç›¸åŒçš„ if(flag)&#123; return i; &#125; &#125; return -1;&#125; ç„¶åLeetCodeçš„æµ‹è¯•ç”¨ä¾‹å­—ç¬¦ä¸²ä¹Ÿæ˜¯çœŸçš„é•¿ï¼ˆåªæˆªå–äº†éƒ¨åˆ†ä¸‹é¢è¿˜å¯ä»¥ç¿»é¡µï¼‰ï¼Œæ‰€ä»¥åœ¨n^2çš„æƒ…å†µä¸‹è¶…æ—¶ã€‚ è§£æ³•äºŒï¼šç»†èŠ‚ä¼˜åŒ–ä¸Šé¢çš„è§£æ³•æ˜¯æœ‰å¯ä¼˜åŒ–çš„ç‚¹çš„ã€‚æˆ‘ä»¬å»æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„ï¼Œé‚£ä¹ˆä¸€ä¸ªå€¼æ‰¾åˆ°ç›¸åŒçš„åæˆ‘ä»¬å°±ä¸å¿…è¦å†å¾€åäº†éå†å› ä¸ºä¸éœ€è¦çœ‹å®ƒæœ‰å‡ ä¸ªç›¸åŒçš„ï¼Œå®ƒä¸æ»¡è¶³å°±åº”è¯¥çœ‹ä¸‹ä¸€ä¸ªå€¼ä¹Ÿå°±æ˜¯åº”è¯¥åŠ ä¸Šbreakã€‚ 123456for(int j = 0; j &lt; n; j++)&#123; if(i != j &amp;&amp; arr[i] == arr[j])&#123; flag = false; break; &#125;&#125; è¿™ä¸€ç‚¹æ˜¯å½±å“è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œç¬¬äºŒç‚¹å°±æ˜¯æˆ‘ä»¬å»åˆ¤æ–­éå†å®Œäº†æ²¡æœ‰é‡å¤ä¹Ÿå°±æ˜¯æ‰¾åˆ°äº†å¯ä»¥ç›´æ¥è¿”å›çš„å¤„ç†æˆ‘ä»¬é™¤äº†å®šä¹‰flagåœ¨å¾ªç¯ä½“æ ‡è®°ï¼Œåˆ°å¾ªç¯å»åˆ¤æ–­å¤„ç†ã€‚å…¶å®æˆ‘ä»¬å»è¡¨è¾¾å¾ªç¯å®Œåçš„å¤„ç†ä¹Ÿå¯ä»¥åœ¨å¾ªç¯ä½“é‡Œé¢ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯åˆ°æœ€åäº†ä»ç„¶ä¸æ»¡è¶³ç›¸ç­‰ã€‚ 1234567for(int j = 0; j &lt; n; j++)&#123; if(i != j &amp;&amp; arr[i] == arr[j])&#123; break; &#125;else if(j == n-1)&#123; return i; &#125;&#125; è¿™æ ·å’Œå‰é¢çš„å°±æ˜¯åŒä¸€ä¸ªæ„æ€ï¼Œå¹¶ä¸”å°‘å®šä¹‰ä¸€ä¸ªå˜é‡flagï¼Œå¹¶ä¸”æœ€åæˆ‘ä»¬çš„ä»£ç ä¸ä¼šè¶…æ—¶ 1234567891011121314public int firstUniqChar(String s) &#123; char[] arr = s.toCharArray(); int n = arr.length; for(int i = 0; i &lt; n; i++)&#123; for(int j = 0; j &lt; n; j++)&#123; if(i != j &amp;&amp; arr[i] == arr[j])&#123; break; &#125;else if(j == n - 1)&#123; return i; &#125; &#125; &#125; return -1;&#125; æ—¶é—´Oï¼ˆn^2ï¼‰ï¼Œç©ºé—´Oï¼ˆ1ï¼‰ è§£æ³•ä¸‰ï¼šHashè¡¨é‚£ä¹ˆä½¿ç”¨hashè¡¨å­˜ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ä¸ç”¨é‡å¤éå†äº† 12345678910111213141516public int firstUniqChar(String s) &#123; char[] arr = s.toCharArray(); int n = arr.length; HashMap&lt;Character, Integer&gt; count = new HashMap&lt;Character, Integer&gt;(); //éå†å­˜ä¸‹æ‰€æœ‰ä¿¡æ¯ for (int i = 0; i &lt; n; i++) &#123; char c = arr[i]; count.put(c, count.getOrDefault(c, 0) + 1); &#125; //éå†æŸ¥çœ‹keyå€¼ä¸º1çš„ for (int i = 0; i &lt; n; i++) &#123; if (count.get(arr[i]) == 1) return i; &#125; return -1;&#125; æ—¶é—´Oï¼ˆnï¼‰ï¼Œç©ºé—´Oï¼ˆnï¼‰ï¼Œè™½ç„¶å¦‚æ­¤ä½†æ•ˆç‡åè€Œæ¯”åŒæŒ‡é’ˆè¦å·®ï¼Œè¿™ä¸»è¦æ˜¯å®ƒçš„è¿™äº›æ–¹æ³•ã€‚ è§£æ³•å››ï¼šæ•°ç»„ç”¨Hashè¡¨èƒ½å­˜ï¼Œé‚£ç”¨æ•°ç»„ä¹Ÿåº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œä¸€æ ·çš„keyä½ç´¢å¼•å€¼åˆ¤æ–­æ˜¯ä¸æ˜¯1ã€‚åŒä¸€ä¸ªå­—æ¯å°±æ˜¯åŒä¸€ä¸ªåœ°æ–¹å¯¹åº”å€¼å°±åŠ ä¸€ã€‚ç»Ÿè®¡å®Œä¹‹åéå†å­—ç¬¦ä¸²æŒ‰å­—ç¬¦ä¸²çš„é¡ºåºå»æ•°ç»„æŸ¥ç‡å…ˆç­‰äº1çš„å°±è¿”å› 12345678910111213public int firstUniqChar(String s) &#123; int[] chars = new int[26]; char[] arr = s.toCharArray(); for (char c : arr) &#123; chars[c - &#x27;a&#x27;] += 1; &#125; for (int i = 0; i &lt; arr.length; ++i) &#123; if (chars[arr[i] - &#x27;a&#x27;] == 1) &#123; return i; &#125; &#125; return -1;&#125; å’Œè§£æ³•äºŒåŒæ ·çš„ä¸€ä¸ªæ€è·¯é€‰å–æ•°ç»„è¿™ç§æ•°æ®ç»“æ„ï¼Œæ•ˆç‡å°±ç›´æ¥ä¸Šå»äº†ã€‚ è§£æ³•äº”ï¼šç»†èŠ‚ä¼˜åŒ–ä¸Šè¿°æ•°ç»„è§£æ³•åœ¨æ•ˆç‡ä¸Šä»ç„¶æ˜¯æœ‰å¯ä¼˜åŒ–ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬å»æ¯”è¾ƒä¸¤ä¸ªå®¹å™¨çš„æ—¶å€™è°çŸ­æˆ‘ä»¬å°±éå†è°ã€‚æ›´ä½•å†µè¿™é‡Œåªéœ€è¦æ‹¿å€¼åˆ°å¦ä¸€ä¸ªå®¹å™¨å‚è€ƒåªéœ€è¦ä¸€æ¬¡éå†ï¼Œé‚£æˆ‘ä»¬æ›´åº”è¯¥éå†çŸ­çš„ã€‚é‚£ä¹ˆå½“å­—ç¬¦ä¸²é•¿åº¦å°äº26å’Œä¸Šé¢ä¸€æ ·éå†å­—ç¬¦ä¸²åˆ°æ•°ç»„å»è®°å½•ï¼Œæœ€åå†éå†æ•°ç»„çœ‹ç»“æœï¼Œå¦‚æœå­—ç¬¦ä¸²é•¿äº26é‚£ä¹ˆæˆ‘ä»¬å°±éå†a-zè¿™26ä¸ªå­—æ¯ 12345678910int result = -1;for (char i = &#x27;a&#x27;; i &lt;= &#x27;z&#x27;; ++i) &#123; int begin = s.indexOf(i); int end = s.lastIndexOf(i) // åœ¨å­—ç¬¦ä¸²ä¸­å­˜åœ¨è¯¥å­—ç¬¦å¹¶ä¸”å”¯ä¸€ if (begin != -1 &amp;&amp; begin == end &#123; // ä¸ä»…è¦å”¯ä¸€ï¼Œä¸”ç´¢å¼•è¿˜è¦å°ã€‚éå†å®Œæˆæ‹¿åˆ°å­—ç¬¦ä¸²æœ€å‰çš„å”¯ä¸€ result = (result == -1 || result &gt; begin) ? begin : result; &#125;&#125; é‚£ä¹ˆåœ¨å­—ç¬¦ä¸²é•¿åº¦å¾ˆå¤§çš„æƒ…å†µä¸‹ä¹Ÿåªéœ€è¦å®Œæ•´éå†26æ¬¡å°±èƒ½æ‰¾åˆ°é¦–ä¸ªå”¯ä¸€ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425public int firstUniqChar(String s) &#123; // å­—ç¬¦ä¸²é•¿åº¦ä¸è¶…è¿‡26 if (s.length() &lt;= 26) &#123; int[] chars = new int[26]; char[] arr = s.toCharArray(); for (char c : arr) &#123; chars[c - &#x27;a&#x27;] += 1; &#125; for (int i = 0; i &lt; arr.length; ++i) &#123; if (chars[arr[i] - &#x27;a&#x27;] == 1) &#123; return i; &#125; &#125; &#125; //åªéå†26ä¸ªå­—æ¯ int result = -1; for (char i = &#x27;a&#x27;; i &lt;= &#x27;z&#x27;; ++i) &#123; int begin = s.indexOf(i); int end = s.lastIndexOf(i); if (begin != -1 &amp;&amp; begin == end) &#123; result = (result == -1 || result &gt; begin) ? begin : result; &#125; &#125; return result;&#125; æ€»ç»“é¢˜ç›®éš¾åº¦å‘¢å±äºç®€å•ï¼ŒåŒæŒ‡é’ˆã€hashè¡¨è¿™æ ·æˆå¯¹çš„è§£æ³•å°±å‡ºæ¥äº†ï¼Œä¸»è¦æ˜¯é€šè¿‡æ­¤é¢˜å»å›é¡¾ä¸€äº›æ³¨æ„ç‚¹æ¯”å¦‚åŒå¾ªç¯çš„ä¼˜åŒ–ï¼Œå¾ªç¯ä¸­å­—ç¬¦ä¸²çš„æ–¹æ³•é¢‘ç¹çš„è¿›å‡ºä¹Ÿæ˜¯æœ‰ä¸€å®šçš„æµªè´¹ï¼Œå¯ä»¥å…ˆæ‹¿æ•°ç»„å‡ºæ¥æ“ä½œä¼šå¥½ä¸€ç‚¹ã€‚é€‚åˆä½“ä¼šè§£é¢˜è¿­ä»£çš„ä¸€ä¸ªæµç¨‹ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š7.æ•´æ•°åè½¬","slug":"æ•´æ•°åè½¬","date":"2020-11-30T05:47:29.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/11/30/æ•´æ•°åè½¬/","link":"","permalink":"http://yournotes.cn/2020/11/30/%E6%95%B4%E6%95%B0%E5%8F%8D%E8%BD%AC/","excerpt":"æ•´æ•°åè½¬é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-integer/ ç»™å‡ºä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬ã€‚","text":"æ•´æ•°åè½¬é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-integer/ ç»™å‡ºä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: 123è¾“å‡º: 321 ç¤ºä¾‹ 2: 12è¾“å…¥: -123è¾“å‡º: -321 ç¤ºä¾‹ 3: 12è¾“å…¥: 120è¾“å‡º: 21 æ³¨æ„: å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨å¾—ä¸‹ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œåˆ™å…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’2^31, 2^31 âˆ’ 1]ã€‚è¯·æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœåè½¬åæ•´æ•°æº¢å‡ºé‚£ä¹ˆå°±è¿”å› 0ã€‚ è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•ä¸»ä½“ æ•´æ•°è½¬å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„åè½¬ å­—ç¬¦ä¸²è½¬æ•´æ•° è¾¹ç•Œ æ•°å€¼æº¢å‡ºè¾¹ç•Œï¼šæº¢å‡ºè¿”å›0 ç»†èŠ‚ é¦–ä½ä¸ä¸º0 ç¬¦å·å¤„ç† 123456789101112131415161718public int reverse(int x) &#123; //1.æ•´æ•°è½¬å­—ç¬¦ä¸² String str = &quot;&quot; + x; char[] s = str.toCharArray(); //2.å­—ç¬¦ä¸²çš„åè½¬ int n = s.length; for(int i = 0; i &lt; n/2; i++)&#123; char temp = s[i]; s[i] = s[n-i-1]; s[n-i-1] = temp; &#125; //3.å­—ç¬¦ä¸²è½¬æ•´æ•° //Integer result = Integer.valueOf(String.valueOf(array)); long value = Long.valueOf(String.valueOf(array)); boolean b = value &gt; Integer.MAX_VALUE || value &lt; Integer.MIN_VALUE; int result = b ? 0 : (int)value; return result;&#125; åœ¨ä¸Šè¿°ä»£ç ä¸­å·²ç»å®Œæˆä¸»ä½“ä»£ç ä»¥åŠåè½¬åçš„æ•°å€¼è¶Šå‡ºè¾¹ç•Œçš„é—®é¢˜ï¼Œé¦–ä½ä¸ä¸ºé›¶é—®é¢˜ï¼šIntegerå°†æ•´æ•°å­—ç¬¦ä¸²è½¬æ•´æ•°æ—¶ä¼šè‡ªåŠ¨å»æ‰å‰é¢å¦‚æœæœ‰é«˜ä½çš„0ã€‚é‚£ä¹ˆè¿˜å‰©ä¸‹ç¬¦å·å¤„ç†æ•´æ•°xå¦‚æœæ˜¯-123ï¼Œåè½¬å­—ç¬¦ä¸²æ˜¯â€321-â€œè‚¯å®šæ˜¯ä¸èƒ½çš„ã€‚è¦æŠŠè´Ÿå·æ‹¿å‡ºæ¥ä¹‹åçš„æ•°å­—å‚ä¸ä¸»ä½“è¿‡ç¨‹ï¼Œæœ€åå†æŠŠç»“æœåŠ ä¸Šè´Ÿå·ã€‚ 1234//æ‹¿èµ°ç¬¦å·signint sign = x &gt; 0 ? 1 : -1;//å‰©ä¸‹ç»å¯¹å€¼x = x &lt; 0 ? x * -1 : x; è®©å¤„ç†ä¹‹åçš„xå‚ä¸ä¸»ä½“ä»£ç ï¼Œæœ€åè¿”å›å€¼åŠ ä¸Šç¬¦å· 1return result * sign; ä½†ä¸Šé¢æ‹¿ç»å¯¹å€¼çš„è¿™ä¸ªæ­¥éª¤æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæœ€å°å€¼çš„ç»å¯¹å€¼æ˜¯æ¯”æœ€å¤§å€¼è¦å¤§1çš„ã€‚å½“ä¼ å…¥çš„int x &#x3D; Integer.MIN_VALUEæ—¶ç»å¯¹å€¼è¶…è¿‡äº†intçš„èŒƒå›´ã€‚å› æ­¤åœ¨ç¬¦å·æ‹¿å–ä¹‹å‰å…ˆè¿›è¡Œåˆ¤æ–­ï¼ŒæŠŠæå€¼ï¼ˆåŒ…æ‹¬æœ€å¤§å€¼ï¼‰ç›´æ¥è¿”å›æ‰æ¯•ç«Ÿå®ƒä»¬åè½¬ä¹‹åæ•°å­—å¤§å°ä¸€å®šæ˜¯æº¢å‡ºæ²¡å¿…è¦ç»è¿‡ä¸»ä½“ä¸‰æ­¥ä¹‹ååœ¨åˆ¤æ–­æ˜¯å¦è¿”å›0ã€‚ 1234567891011121314151617181920212223242526public int reverse(int x) &#123; //æå€¼ç­›æ‰ if(x == Integer.MAX_VALUE || x == Integer.MIN_VALUE)&#123; return 0; &#125; //ç¬¦å·å¤„ç† int sign = x &gt; 0 ? 1 : -1; x = x &lt; 0 ? x * -1 : x; //1.æ•´æ•°è½¬å­—ç¬¦ä¸² String str = &quot;&quot; + x; char[] s = str.toCharArray(); //2.å­—ç¬¦ä¸²çš„åè½¬ int n = s.length; for(int i = 0; i &lt; n/2; i++)&#123; char temp = s[i]; s[i] = s[n-i-1]; s[n-i-1] = temp; &#125; //3.å­—ç¬¦ä¸²è½¬æ•´æ•° //Integer result = Integer.valueOf(String.valueOf(array)); long value = Long.valueOf(String.valueOf(s)); boolean b = value &gt; Integer.MAX_VALUE || value &lt; Integer.MIN_VALUE; int result = b ? 0 : (int)value; //åŠ ä¸Šç¬¦å· return result * sign;&#125; æ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(n) è§£æ³•äºŒï¼šæ•°å­¦æ€ç»´æ—¢ç„¶æ˜¯æŠŠä¸€ä¸ªæ•´æ•°å˜æˆå¦å¤–ä¸€ä¸ªæ•´æ•°é¢å¯¹è¿™æ ·çš„é—®é¢˜çš„å®Œå…¨å¯ä»¥æ‰¾åˆ°æ•°å­¦çš„æ–¹å¼ï¼Œåœ¨æ•°ç»„é‡Œæˆ‘ä»¬ä½¿ç”¨ç´¢å¼•æŒ‡é’ˆå–å„ä¸ªå€¼ï¼Œåœ¨æ•°å­—é‡Œé¢æˆ‘ä»¬å°±å¯ä»¥ç”¨é™¤æ³•å’Œå–æ¨¡è¿ç®—æ¥è·å–å„ä¸ªå€¼ã€‚ä¸Šé¢æˆ‘ä»¬æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç›´æ¥æ‹¼æ¥å„ä¸ªå­—ç¬¦ã€‚è¿™é‡Œæˆ‘ä»¬å°±ç´¯åŠ æ‹¼æ¥ã€‚æ•ˆç‡æå‡ä¸€ä¸ªæ¬¡å…ƒã€‚ 123456789101112131415161718192021public int reverse(int x) &#123; //æå€¼ç­›æ‰ if(x == Integer.MAX_VALUE || x == Integer.MIN_VALUE)&#123; return 0; &#125; int result = 0;//è¿”å›ç»“æœ int last = 0;//æœ«ä½ while((last = x % 10) != x)&#123; result = result * 10 + last; x /= 10; &#125; //æ·»åŠ æœ€åä¸€ä½åˆ¤æ–­æº¢å‡º long value = result; value = value * 10 + last; if(value &gt; Integer.MAX_VALUE || value &lt; Integer.MIN_VALUE)&#123; return 0; &#125;else&#123; result = (int)value; &#125; return result;&#125; æ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(1) æ€»ç»“æ€»ä½“ä¸Šæ˜¯ä¸¤ç§æ€è·¯ä½†å¯ä»¥ä¼˜åŒ–çš„ç‚¹è¿˜æœ‰ä¸€äº›æ¯”å¦‚ä¸ªä½åˆ¤æ–­ç›´æ¥è¿”å›ç­‰ç­‰ï¼Œè¿™é‡Œä¸»è¦ä½“ä¼šçš„æ˜¯å…³äºæ•°å­—å¤„ç†çš„ç›¸å…³ç®—æ³•éƒ½æ˜¯å¯ä»¥é‡‡ç”¨æ•°å­¦æ–¹å¼ï¼Œå®ƒæ˜¯è¿œè¿œæ¯”æ“ä½œå­—ç¬¦æ•ˆç‡è¦é«˜ã€‚ç¬¬äºŒå°±æ˜¯å…³äºå®ç°ä¸»ä½“ä¸ç»†èŠ‚ã€è¾¹ç•Œçš„ä¸€ä¸ªåˆ’åˆ†ï¼Œå°½é‡é™ä½è€¦åˆæ€§ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹å­—ç¬¦ä¸²ï¼š344.åè½¬å­—ç¬¦ä¸²","slug":"åè½¬å­—ç¬¦ä¸²","date":"2020-11-29T04:43:48.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/11/29/åè½¬å­—ç¬¦ä¸²/","link":"","permalink":"http://yournotes.cn/2020/11/29/%E5%8F%8D%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/","excerpt":"åè½¬å­—ç¬¦ä¸²é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-string/ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ char[] çš„å½¢å¼ç»™å‡ºã€‚","text":"åè½¬å­—ç¬¦ä¸²é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/reverse-string/ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ char[] çš„å½¢å¼ç»™å‡ºã€‚ä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯ ASCII ç è¡¨ä¸­çš„å¯æ‰“å°å­—ç¬¦ã€‚ ç¤ºä¾‹ 1ï¼š è¾“å…¥ï¼š[â€œhâ€,â€eâ€,â€lâ€,â€lâ€,â€oâ€]è¾“å‡ºï¼š[â€œoâ€,â€lâ€,â€lâ€,â€eâ€,â€hâ€] ç¤ºä¾‹ 2ï¼š è¾“å…¥ï¼š[â€œHâ€,â€aâ€,â€nâ€,â€nâ€,â€aâ€,â€hâ€]è¾“å‡ºï¼š[â€œhâ€,â€aâ€,â€nâ€,â€nâ€,â€aâ€,â€Hâ€] åŒæŒ‡é’ˆ 12345678public void reverseString(char[] s) &#123; int n = s.length; for(int i = 0; i &lt; n/2; i++)&#123; char temp = s[i]; s[i] = s[n-i-1]; s[n-i-1] = temp; &#125;&#125; æ€»ç»“å¼€ç¯‡ä¸€é¢˜ä¹Ÿæ²¡å¤ªå¤šå¯æ€è€ƒçš„ï¼Œå­—ç¬¦ä¸²ä¹Ÿå°±æ˜¯æ•°ç»„ã€‚éå†ã€é€†åºã€äº¤æ¢ã€å¿«æ…¢æŒ‡é’ˆç­‰ç­‰ã€‚å¾ˆæ˜¾ç„¶å€’è¿‡æ¥é€†åºå°±å®Œäº†ï¼Œä½†é¢˜ç›®è¦æ±‚ä¸åˆ›å»ºé¢å¤–ç©ºé—´ï¼Œä¹Ÿå°±å‰©é¦–å°¾äº¤æ¢ã€‚æ€»ä½“æ¥è¯´è¿™ä¸€ç±»çš„é¢˜åœ¨æ•°ç»„å†…éƒ¨è¿›è¡Œå˜æ¢å°±æ˜¯äº¤æ¢å€¼ï¼Œåªæ˜¯çœ‹ä¸€æ¬¡æ¶‰åŠå¤šå°‘ä¸ªä½ç½®ï¼ˆæŒ‡é’ˆï¼‰çš„å˜åŒ–ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š48.æ—‹è½¬å›¾åƒ","slug":"æ—‹è½¬å›¾åƒ","date":"2020-11-25T12:11:11.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/11/25/æ—‹è½¬å›¾åƒ/","link":"","permalink":"http://yournotes.cn/2020/11/25/%E6%97%8B%E8%BD%AC%E5%9B%BE%E5%83%8F/","excerpt":"æ—‹è½¬å›¾åƒé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/rotate-image/ ç»™å®šä¸€ä¸ª n Ã— n çš„äºŒç»´çŸ©é˜µè¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚","text":"æ—‹è½¬å›¾åƒé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/rotate-image/ ç»™å®šä¸€ä¸ª n Ã— n çš„äºŒç»´çŸ©é˜µè¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚ è¯´æ˜ï¼š ä½ å¿…é¡»åœ¨åŸåœ°æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚è¯·ä¸è¦ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚ ç¤ºä¾‹ 1: 12345678910111213ç»™å®š matrix = [ [1,2,3], [4,5,6], [7,8,9]],åŸåœ°æ—‹è½¬è¾“å…¥çŸ©é˜µï¼Œä½¿å…¶å˜ä¸º:[ [7,4,1], [8,5,2], [9,6,3]] ç¤ºä¾‹ 2: 123456789101112131415ç»™å®š matrix =[ [ 5, 1, 9,11], [ 2, 4, 8,10], [13, 3, 6, 7], [15,14,12,16]], åŸåœ°æ—‹è½¬è¾“å…¥çŸ©é˜µï¼Œä½¿å…¶å˜ä¸º:[ [15,13, 2, 5], [14, 3, 4, 1], [12, 6, 8, 9], [16, 7,10,11]] å››æŒ‡é’ˆè¿™ä¸€é¢˜ä¸å‰é¢å†™åˆ°çš„æ—‹è½¬æ•°ç»„ä¸€é¢˜ç›¸ä¼¼ï¼Œä¹‹å‰æ˜¯ä¸€ç»´çš„ï¼Œç°åœ¨ç›¸å½“äºæ˜¯äºŒç»´ç‰ˆã€‚åŒæ ·æ˜¯ä¸¤ç§æ€è·¯ä¸€ç§æ˜¯ç›´æ¥è®¾ç½®å€¼åˆ°æœ€ç»ˆçš„åœ°æ–¹ï¼Œè¢«è¦†ç›–çš„å€¼å…ˆç”¨å¤‡ä»½å˜é‡æ‹¿å‡ºæ¥å†å¾€å®ƒçš„ç›®çš„åœ°å»è®¾ã€‚ç¬¬äºŒç§å°±æ˜¯åè½¬çš„æ€è·¯ã€‚ æ—‹è½¬ä¸Šå›¾è¿‡ç¨‹ 12345678910111213(1) backup = m[0][1]m[0][1] = m[0][0](2)temp = backupbackup = m[1][1]m[1][1] = temp(3)temp = backupbackup = m[1][0]m[1][0] = temp(4)m[0][0] = backup ç”±äºæ˜¯2Ã—2æ‰€ä»¥ä¸€æ¬¡æ—‹è½¬è®¾å€¼å®Œäº‹ï¼Œå¦‚æœæ˜¯3Ã—3 å’Œä¹‹å‰é‚£ä¸€é¢˜è¿˜æ˜¯æœ‰ç‚¹å·®åˆ«ï¼Œè¿™è¾¹è®¾ç½®å€¼çš„ä¼ é€’å›ºå®šæ˜¯å››ä¸ªå®Œæˆä¸€ç»„ï¼Œç„¶åéœ€è¦åˆ¤æ–­ä¸€åœˆæœ‰å¤šå°‘ç»„ 1231Ã—1 0ç»„2Ã—2 1ç»„3Ã—3 2ç»„ å››æ¬¡è®¾ç½®å€¼æ˜¯ä¸€ä¸ªå•å…ƒæ“ä½œï¼Œä¹‹åæŒ‡é’ˆå˜åŠ¨ç¬¬ä¸€ä¸ªæŒ‡é’ˆæ˜¯æ°´å¹³å‘å³ç§»åŠ¨ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆæ˜¯å‚ç›´å‘ä¸‹å…¶ä»–ä¾æ¬¡ï¼Œç›´åˆ°å¤´length-1ã€‚é‚£ä¹ˆå¤–å¾ªç¯æ¡ä»¶æ˜¯æœ‰å‡ åœˆï¼’Ã—ï¼’ï¼Œï¼“Ã—ï¼“éƒ½åªæœ‰ä¸€åœˆï¼Œï¼”Ã—ï¼”ä¸ï¼•Ã—ï¼•æ˜¯ä¸¤åœˆã€‚ä¹Ÿå°±æ˜¯length&#x2F;2åœˆï¼Œå†…å¾ªç¯ä¸ºæ¯åœˆè¦ç§»åŠ¨å¤šå°‘ç»„æ•°å­—å®ƒå–å†³äºç»ˆç‚¹ç´¢å¼•ï¼Œå¹¶ä¸”æ¯å¾€å†…ä¸€åœˆlengthéƒ½ä¼šå°‘ï¼’ä¸¤è¾¹éƒ½ä¼šé è¿‘1æ ¼ã€‚ å¤–åœˆï¼ˆç¬¬ä¸€åœˆï¼‰èµ·ç‚¹matrix[0][0] ç»ˆç‚¹matrix[0][2] æœ‰ä¸‰ç»„ å†…åœˆï¼ˆç¬¬äºŒåœˆï¼‰èµ·ç‚¹matrix[1][1] ç»ˆç‚¹matrix[1][1] åªæœ‰ä¸€ç»„ ä¹Ÿå°±æ˜¯å½“å¤–å¾ªç¯å®Œæ¯•å†…å¾ªç¯çš„èµ·ç‚¹æ˜¯å’Œå¤–å¾ªç¯ç›¸åŒï¼Œä¹Ÿå°±æ˜¯j &#x3D; iç„¶åjåœ¨å¾€åé€’å¢ç›´åˆ°ç»ˆç‚¹ï¼Œç»ˆç‚¹ä¼šå¾€å†…åœˆæ…¢æ…¢é€’å‡ æˆ‘ä»¬è¿™é‡Œåªçœ‹é¦–æŒ‡é’ˆçš„å˜åŒ–ï¼Œå…¶ä»–ä¸€æ ·æ¨æ€»ç»“åœ¨ä»£ç é‡Œ ç¬¬ä¸€åœˆä»[0][0]---&gt;[0][4] 5ç»„ ç¬¬äºŒåœˆä»[1][1]---&gt;[1][3] 3ç»„ ç¬¬ä¸‰åœˆå°±[2][2] 1ç»„ 123456789101112131415161718192021public void rotate(int[][] matrix) &#123; int n = matrix.length; int s = n; for (int i = 0; i &lt; n/2; i++,s--) &#123; for (int j = i; j &lt; s-1; j++) &#123; int backup = matrix[j][n-i-1]; matrix[j][n-i-1] = matrix[i][j]; int temp = matrix[n-i-1][n-j-1]; matrix[n-i-1][n-j-1] = backup; backup = temp; temp = matrix[n-j-1][i]; matrix[n-j-1][i] = backup; backup = temp; matrix[i][j] = backup; &#125; &#125;&#125; æ€»ä½“å®ç°äº†è¿™æ ·ä¸€ä¸ªä¸»çº¿ï¼Œä½†å°±æ˜¯æˆ‘ä»¬å»å­˜å°†è¢«è¦†ç›–çš„å€¼å…¶å®ä¸éœ€è¦å¦å¤–æ·»åŠ ä¸€ä¸ªå˜é‡backupæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå®ƒå­˜åœ¨é¦–æŒ‡é’ˆçš„åœ°æ–¹ï¼Œé‚£ä¸ªåœ°æ–¹åˆ°æœ€åæ‰è¢«è®¾å€¼ä¸­é€”æ˜¯å•¥éƒ½æ²¡æœ‰å…³ç³»æˆ‘ä»¬å°±æš‚æ—¶ç”¨å®ƒå­˜ï¼ˆç©ºé—´å·²ç»å­˜åœ¨äº†ä¸ç”¨ç™½ä¸ç”¨ï¼‰ã€‚ 123456789101112131415161718192021public void rotate(int[][] matrix) &#123; int n = matrix.length; int s = n; for (int i = 0; i &lt; n/2; i++,s--) &#123; for (int j = i; j &lt; s-1; j++) &#123; int temp = matrix[i][j] matrix[i][j] = matrix[j][n-i-1]; matrix[j][n-i-1] = temp; temp = matrix[n-i-1][n-j-1]; matrix[n-i-1][n-j-1] = matrix[i][j]; matrix[i][j] = temp; temp = matrix[n-j-1][i]; matrix[n-j-1][i] = matrix[i][j]; matrix[i][j] = temp; &#125; &#125;&#125; ä¸¤æ¬¡åè½¬ç¬¬äºŒç§æ–¹å¼å°±åè½¬å’Œæ—‹è½¬æ•°ç»„ä¸€é¢˜ä¸€æ ·æˆ‘ä»¬ç›´æ¥è§‚å¯Ÿè¾“å…¥å›¾ä¸ç›®æ ‡å›¾é€šè¿‡æ€æ ·çš„å˜æ¢å¯ä»¥å¾—åˆ° æ—‹è½¬90åº¦çš„å…³ç³»è‚¯å®šæ˜¯æ²¡æœ‰ç›´æ¥æ–¹å¼çš„ï¼Œè¿™é‡Œæˆ‘ä»¬è‚¯å®šæ˜¯ç”¨åˆ°çš„è®¾å€¼ã€‚é€šè¿‡å›¾å½¢å˜æ¢åè½¬ç±»ä¼¼çš„æ–¹å¼å°±ä¸¤æ•°äº¤æ¢å®Œæˆå°±å¯èƒ½è¿›è¡Œå‡ ç»„åè½¬æ¯”èµ·ä¸Šé¢ç›´æ¥çš„ä¸€æ­¥çš„åˆ°ä½çš„è®¾å€¼æ–¹å¼åœ¨å•å…ƒæ“ä½œä¸Šä¸¤æ•°äº¤æ¢æ¯”èµ·å››æ•°çœ‹èµ·æ¥ç®€ä¸€ç‚¹ã€‚ä½†æœ‰è¿›è¡Œå¤šç»„éå†çš„å¯èƒ½ã€‚å®ƒæ˜¯è½¬90è€Œä¸æ˜¯180å¦‚æœæ˜¯180å°±ä¸Šä¸‹åè½¬ç„¶åå·¦å³åè½¬ã€‚æ‰€ä»¥è¿™é‡Œåªèƒ½å¯¹è§’åè½¬åŠ å·¦å³åè½¬å…ˆåæ— æ‰€è°“ æ— è®ºæ€ä¹ˆè½¬éƒ½å¯ä»¥å®ç°æ€»ä¹‹æ˜¯é€šè¿‡ä¸¤ä¸ªæ•°çš„äº¤æ¢å°±å¾ˆç®€å•ï¼Œç„¶åè¦è¿›è¡Œä¸¤æ¬¡ã€‚ä¸‹é¢ä»£ç æŒ‰ç…§ç¬¬ä¸€æ¡è¿›è¡Œï¼Œç¬¬ä¸€ä¸ªå˜æ¢åªéœ€è¦éå†å·¦ä¸Šä¸€åŠå³å¯æ¯ä¸ªå®Œæˆå’Œä¸‹é¢çš„äº¤æ¢å³å¯å› æ­¤åˆ—çš„èµ·ç‚¹æ˜¯é€’å¢çš„j &#x3D; iï¼Œç¬¬äºŒä¸ªå˜æ¢å¾ªç¯æ—¶åˆ—åªéœ€è¦å·¦è¾¹ä¸€åŠå°±æ¢è¡Œæ‰€ä»¥j &#x3D; length&#x2F;2 123456789101112131415161718public void rotate(int[][] matrix) &#123; int n = matrix.length; for (int i = 0; i &lt; n; i++) &#123; for (int j = i; j &lt; n; j++) &#123; int tmp = matrix[j][i]; matrix[j][i] = matrix[i][j]; matrix[i][j] = tmp; &#125; &#125; for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; n / 2; j++) &#123; int tmp = matrix[i][j]; matrix[i][j] = matrix[i][n - j - 1]; matrix[i][n - j - 1] = tmp; &#125; &#125;&#125; æ€»ç»“æ€»ä½“æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªåŸåœ°ç®—æ³•ï¼Œæ—¶é—´ä¹Ÿéƒ½æ˜¯ï¼¯(n^2)ï¼Œåƒè¿™ä¸€é¢˜ä¸ä¹‹å‰ä¸€é¢˜éƒ½æ˜¯å±äºæ•°ç»„å†…åŸåœ°çš„å˜åŒ–ä½ç½®å³å¤šå€¼äº¤æ¢ä»¥åŠæ¢æˆå¤šç»„åè½¬å³ä¸¤å€¼äº¤æ¢çš„ç»„åˆã€‚ä¸»è¦ä¹Ÿæ˜¯ä½“ä¼šåœ¨æ•°ç»„è¿™æ ·çš„æ•°æ®ç»“æ„å½“ä¸­æˆ‘ä»¬å¯ä»¥æœ‰çš„ç®—æ³•æ€æƒ³ï¼šéå†ã€é€†åºã€åŸåœ°äº¤æ¢ã€å¿«æ…¢æŒ‡é’ˆã€‚ä¸‡å˜ä¸ç¦»å…¶ä¸­ï¼Œé‚£ä¹ˆä»æ›´æ–°ã€ŠLeetCodeæ—¥å¸¸ã€‹ç³»åˆ—å¼€å§‹åˆ°è¿™ç¯‡ä¸ºæ­¢LeetCodeåˆçº§ç®—æ³•åˆé›†ä¸­çš„æ•°ç»„ç¯‡ç« å®Œç»“å³å°†å¼€å¯ä¸‹ä¸€ç¯‡ç« å­—ç¬¦ä¸²ç›¸å…³ç®—æ³•","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š36.æœ‰æ•ˆæ•°ç‹¬","slug":"æœ‰æ•ˆæ•°ç‹¬","date":"2020-11-21T09:07:42.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/11/21/æœ‰æ•ˆæ•°ç‹¬/","link":"","permalink":"http://yournotes.cn/2020/11/21/%E6%9C%89%E6%95%88%E6%95%B0%E7%8B%AC/","excerpt":"æœ‰æ•ˆæ•°ç‹¬é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-sudoku/ åˆ¤æ–­ä¸€ä¸ª 9x9 çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦æ ¹æ®ä»¥ä¸‹è§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚ æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚","text":"æœ‰æ•ˆæ•°ç‹¬é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/valid-sudoku/ åˆ¤æ–­ä¸€ä¸ª 9x9 çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦æ ¹æ®ä»¥ä¸‹è§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚ æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ ç¤ºä¾‹1: è¾“å…¥:[ [â€œ5â€,â€3â€,â€.â€,â€.â€,â€7â€,â€.â€,â€.â€,â€.â€,â€.â€], [â€œ6â€,â€.â€,â€.â€,â€1â€,â€9â€,â€5â€,â€.â€,â€.â€,â€.â€], [â€œ.â€,â€9â€,â€8â€,â€.â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€], [â€œ8â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€3â€], [â€œ4â€,â€.â€,â€.â€,â€8â€,â€.â€,â€3â€,â€.â€,â€.â€,â€1â€], [â€œ7â€,â€.â€,â€.â€,â€.â€,â€2â€,â€.â€,â€.â€,â€.â€,â€6â€], [â€œ.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€.â€,â€2â€,â€8â€,â€.â€], [â€œ.â€,â€.â€,â€.â€,â€4â€,â€1â€,â€9â€,â€.â€,â€.â€,â€5â€], [â€œ.â€,â€.â€,â€.â€,â€.â€,â€8â€,â€.â€,â€.â€,â€7â€,â€9â€]]è¾“å‡º: true ç¤ºä¾‹2ï¼š è¾“å…¥:[ [â€œ8â€,â€3â€,â€.â€,â€.â€,â€7â€,â€.â€,â€.â€,â€.â€,â€.â€], [â€œ6â€,â€.â€,â€.â€,â€1â€,â€9â€,â€5â€,â€.â€,â€.â€,â€.â€], [â€œ.â€,â€9â€,â€8â€,â€.â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€], [â€œ8â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€3â€], [â€œ4â€,â€.â€,â€.â€,â€8â€,â€.â€,â€3â€,â€.â€,â€.â€,â€1â€], [â€œ7â€,â€.â€,â€.â€,â€.â€,â€2â€,â€.â€,â€.â€,â€.â€,â€6â€], [â€œ.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€.â€,â€2â€,â€8â€,â€.â€], [â€œ.â€,â€.â€,â€.â€,â€4â€,â€1â€,â€9â€,â€.â€,â€.â€,â€5â€], [â€œ.â€,â€.â€,â€.â€,â€.â€,â€8â€,â€.â€,â€.â€,â€7â€,â€9â€]]è¾“å‡º: false è¯´æ˜: ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆéƒ¨åˆ†å·²è¢«å¡«å……ï¼‰ä¸ä¸€å®šæ˜¯å¯è§£çš„ã€‚ åªéœ€è¦æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚ ç»™å®šæ•°ç‹¬åºåˆ—åªåŒ…å«æ•°å­— 1-9 å’Œå­—ç¬¦ â€˜.â€™ ã€‚ ç»™å®šæ•°ç‹¬æ°¸è¿œæ˜¯ 9Ã—9 å½¢å¼çš„ã€‚ æš´åŠ›æœ€ç›´è§‚çš„ä¹Ÿå°±æ˜¯æŒ‰ç…§é¢˜ç›®æµç¨‹çš„æš´åŠ›è§£æ³•ï¼Œéœ€è¦å»åˆ¤æ–­æ¯è¡Œæ¯åˆ—æ¯å—æœ‰æ²¡æœ‰é‡å¤ï¼Œé‚£å°±å»æ‹¿åˆ°æ¯è¡Œæ¯åˆ—æ¯å—çš„äºŒç»´æ•°ç»„ã€‚åˆ¤æ–­è¿™ä¸‰ç»„äºŒç»´æ•°ç»„ä¸­çš„æ¯ä¸ªä¸€ç»´æ•°ç»„æ˜¯æœ‰å¦é‡å¤ã€‚è¿™é‡Œä¸¾ä¸ªç±»ä¼¼çš„4Ã—4çš„ä¾‹å­ï¼ˆå›¾ç”»çš„å°‘ä¸€ç‚¹ï¼‰ æ¯”å¦‚ï¼š rowï¼š[[â€˜1â€™ï¼Œâ€™2â€™ï¼Œâ€™3â€™ï¼Œâ€™4â€™],[â€˜5â€™ï¼Œâ€™.â€™ï¼Œâ€™6â€™ï¼Œâ€™.â€™],[â€˜.â€™ï¼Œâ€™7â€™ï¼Œâ€™8â€™ï¼Œâ€™.â€™],[â€˜7â€™ï¼Œâ€™.â€™ï¼Œâ€™.â€™ï¼Œâ€™3â€™]] colï¼š[[â€˜1â€™ï¼Œâ€™5â€™ï¼Œâ€™.â€™ï¼Œâ€™7â€™],[â€˜2â€™ï¼Œâ€™.â€™ï¼Œâ€™7â€™ï¼Œâ€™.â€™],[â€˜3â€™ï¼Œâ€™6â€™ï¼Œâ€™8â€™ï¼Œâ€™.â€™],[â€˜4â€™ï¼Œâ€™.â€™ï¼Œâ€™.â€™ï¼Œâ€™3â€™]] boxï¼š[[â€˜1â€™ï¼Œâ€™2â€™ï¼Œâ€™5â€™ï¼Œâ€™.â€™],[â€˜3â€™ï¼Œâ€™4â€™ï¼Œâ€™6â€™ï¼Œâ€™.â€™],[â€˜.â€™ï¼Œâ€™7â€™ï¼Œâ€™7â€™ï¼Œâ€™.â€™],[â€˜8â€™ï¼Œâ€™.â€™ï¼Œâ€™.â€™ï¼Œâ€™3â€™]] è§£æ³•ä¸€ 123456789101112131415161718192021222324252627282930313233343536373839public boolean isValidSudoku(char[][] board) &#123; //ä¼ å…¥çš„boardç›¸å½“äºå°±æ˜¯rowæ‰€ä»¥åªéœ€è¦åˆå§‹åŒ–ä¸¤ä¸ªæ•°ç»„ char[][] col = new char[9][9]; char[][] box = new char[9][9]; //1.æ‹¿åˆ°ä¸‰ä¸ªäºŒç»´æ•°ç»„åˆ†åˆ«è¡¨ç¤ºå¤šè¡Œæ•°ç»„ï¼Œå¤šåˆ—æ•°ç»„ä»¥åŠå¤šå—æ•°ç»„ for(int i = 0; i &lt; 9; i++)&#123; for(int j = 0; j &lt; 9; j++)&#123; col[j][i] = board[i][j]; box[(i/3)*3 + j/3][(i%3)*3 + j%3] = board[i][j]; &#125; &#125; //2.éå†æ¯ä¸ªäºŒç»´æ•°ç»„ä¸­çš„æ•°ç»„åˆ¤æ–­æœ‰æ— é‡å¤ for(int i = 0; i &lt; 9; i++)&#123; if(checkRepeat(board[i]))&#123; return false; &#125; if(checkRepeat(col[i]))&#123; return false; &#125; if(checkRepeat(box[i]))&#123; return false; &#125; &#125; return true;&#125;/**æ£€æµ‹å•æ•°ç»„æ˜¯å¦é‡å¤*/public boolean checkRepeat(char[] arr)&#123; for(int i = 0; i &lt; 9; i++)&#123; for(int j = i+1; j &lt; 9; j++)&#123; if(arr[i] != &#x27;.&#x27; &amp;&amp; arr[j] != &#x27;.&#x27;) if(arr[i] == arr[j])&#123; return true; &#125; &#125; &#125; return false;&#125; ä¸Šé¢è§£æ³•å®é™…ä¸Šå­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬å­˜å®ŒäºŒç»´æ•°ç»„ä¹‹åï¼Œå†ä½¿ç”¨éå†æŸ¥é‡çš„æ–¹å¼å¯¹æ¯ä¸ªå•æ•°ç»„è¿›è¡ŒæŸ¥é‡ã€‚ 12col[j][i] = board[i][j];box[(i/3)*3 + j/3][(i%3)*3 + j%3] = board[i][j]; ä¹Ÿå°±æ˜¯è¯´åœ¨å­˜è¿™ä¸¤ä¸ªäºŒç»´æ•°ç»„æ—¶åªæœ‰åªæœ‰ç¬¬ä¸€ä¸ªä¸­æ‹¬å·çš„ç´¢å¼•æ˜¯æœ‰ç”¨çš„æ ‡è®°ç€æ˜¯å“ªä¸€åˆ—æˆ–è€…å“ªä¸€å—ï¼Œä½†å®ƒæ˜¯åœ¨ä¸€åˆ—(å—&#x2F;è¡Œ)çš„å“ªä¸ªä½ç½®æ˜¯æ— æ‰€è°“çš„ï¼Œå› ä¸ºæœ€åå•ç‹¬ç”¨äº†å•æ•°ç»„æŸ¥é‡çš„æ–¹å¼(æ— è®ºé¡ºåºæ€ä¹ˆæ ·åªè¦æ˜¯åœ¨ä¸€ä¸ªå®¹å™¨ï¼Œæœ€åå®¹å™¨å•ç‹¬ç”¨æ–¹æ³•åˆ¤æ–­æ˜¯å¦æœ‰é‡)ã€‚åœ¨ç¼–ç ä¸­ç¬¬äºŒä¸ªä¸­æ‹¬å·å†™çš„ç´¢å¼•åªä¸è¿‡æ˜¯ä¿ç•™äº†åœ¨é¢æ¿ä¸Šæˆ‘ä»¬å»æ•°æ•°çš„é¡ºåºï¼Œæ¢æˆåˆ«çš„0-9ä¸é‡å¤çš„ä¹Ÿå¯ä»¥ã€‚ æ˜¯å¦é‡å¤çš„å…³é”®ä¹Ÿå°±æ˜¯æ•°å€¼æ˜¯å¦ä¸€æ ·ï¼Œæ˜¯å¦æ˜¯åŒä¸€å—(è¡Œ&#x2F;åˆ—)è¿™äº›ç›¸åŒä¹Ÿå°±æ˜¯æ— æ•ˆæ•°ç‹¬ï¼Œå’Œåœ¨å…·ä½“è¡Œ(åˆ—&#x2F;å—)é‡Œé¢çš„å“ªä¸ªä½ç½®æ— å…³ã€‚ä¹Ÿå°±å¯ä»¥è¿™æ ·å†™ è§£æ³•äºŒ 123456789101112131415161718public boolean isValidSudoku(char[][] board) &#123; HashSet&lt;String&gt; set = new HashSet(); //éå†å­˜å€¼ for (int i = 0; i &lt; 9; i++) &#123; for (int j = 0; j &lt; 9; j++) &#123; char num = board[i][j]; if (num != &#x27;.&#x27;) &#123; int n = num - &#x27;0&#x27;; int box_index = (i / 3 ) * 3 + j / 3; String row = n + &quot;æ˜¯ç¬¬&quot;+i+&quot;è¡Œ&quot;; String col = n + &quot;æ˜¯ç¬¬&quot;+j+&quot;åˆ—&quot;; String box = n + &quot;æ˜¯ç¬¬&quot;+box_index+&quot;å—&quot;; if(!set.add(row) || !set.add(col) || !set.add(box)) return false; &#125; &#125; &#125; return true;&#125; å…¶å®è¿™æ‰æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æ•ˆç‡æœ€ä½çš„ã€‚ Hashè¡¨æ ¹æ®ä¸Šè¿°æƒ…å†µç¬¬äºŒå±‚å®¹å™¨çš„ç´¢å¼•æ²¡æœ‰æ„ä¹‰ï¼Œåªç”¨ç¬¬ä¸€å±‚å®¹å™¨çš„ç´¢å¼•åˆ¤æ–­å­˜åˆ°å“ªä¸ªç¬¬äºŒå±‚å®¹å™¨(å—&#x2F;åˆ—&#x2F;è¡Œ)æœ€åå¯¹æ‰€æœ‰ç¬¬äºŒå±‚å®¹å™¨æŸ¥é‡æ‰€ä»¥æ‰æ— å…³ã€‚é‚£æˆ‘è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸Šç¬¬äºŒå±‚å®¹å™¨çš„ç´¢å¼•æˆ–è€…keyæŠŠå®ƒçš„ç´¢å¼•å˜å¾—æœ‰æ„ä¹‰ï¼Œä¹Ÿå°±æ˜¯ç­‰åŒäºå€¼ã€‚è¿™æ ·å€¼å°±ä¸ä½ç½®ç›¸å…³ï¼Œå†å­˜æ—¶å°±å¯ä»¥åˆ¤æ–­é‡å¤ä¸å¦ã€‚è€Œä¸ç”¨å…ˆå­˜å®Œä¹‹ååœ¨å•ç‹¬éå†æ¯ä¸ªç¬¬äºŒå±‚å®¹å™¨ã€‚ è§£æ³•ä¸‰ 1234567891011121314151617181920212223242526272829303132public boolean isValidSudoku(char[][] board) &#123; //åˆå§‹åŒ–æ•°ç»„ HashMap&lt;Integer, Integer&gt; [] rows = new HashMap[9]; HashMap&lt;Integer, Integer&gt; [] columns = new HashMap[9]; HashMap&lt;Integer, Integer&gt; [] boxes = new HashMap[9]; //åˆå§‹åŒ–hashmap for (int i = 0; i &lt; 9; i++) &#123; rows[i] = new HashMap&lt;Integer, Integer&gt;(); columns[i] = new HashMap&lt;Integer, Integer&gt;(); boxes[i] = new HashMap&lt;Integer, Integer&gt;(); &#125; //éå†å­˜å€¼ for (int i = 0; i &lt; 9; i++) &#123; for (int j = 0; j &lt; 9; j++) &#123; char num = board[i][j]; if (num != &#x27;.&#x27;) &#123; int n = (int)num; int box_index = (i / 3 ) * 3 + j / 3; //ä»¥æ•°å€¼ä¸ºkeyå­˜ä¸‹ rows[i].put(n, rows[i].getOrDefault(n, 0) + 1); columns[j].put(n, columns[j].getOrDefault(n, 0) + 1); boxes[box_index].put(n, boxes[box_index].getOrDefault(n, 0) + 1); //åˆ¤æ–­å½“å‰ï¼ˆè¡Œã€åˆ—ã€å—ï¼‰æ­¤å€¼æœ‰æœ¨æœ‰é‡å¤ if (rows[i].get(n) &gt; 1 || columns[j].get(n) &gt; 1 || boxes[box_index].get(n) &gt; 1) return false; &#125; &#125; &#125; return true;&#125; æŒ‰ç…§ä¸Šè¿°è§£æ³•å­˜å€¼æ ‡è®°keyï¼Œé€šè¿‡keyæ¥åˆ¤æ–­æœ‰æ²¡æœ‰å­˜è¿‡ã€‚åŒæ ·ä¹Ÿå¯ä»¥ç”¨æ•°ç»„å®ç°ç”¨ç´¢å¼•æ ‡è®°å€¼å’Œç”¨keyæ ‡è®°å€¼æ˜¯ä¸€æ ·çš„å¹¶ä¸”æ•ˆç‡ä¸Šä¹Ÿä¼šæ›´å¿«ã€‚å› å­˜çš„æ•°å€¼å°±æ˜¯1-9ï¼Œé‚£å°±æŠŠ9å­˜åˆ°ç¬¬ä¹ä¸ªä¹Ÿå°±æ˜¯ç´¢å¼•8ã€‚è¿™æ ·å­˜è¿›ä¸€ä¸ªå®¹å™¨åŒä¸€ä¸ªæ•°å­—å°±ä¸€å®šåœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œé€šè¿‡å€¼å¯ä»¥æ‰¾åˆ°ç´¢å¼•ï¼Œé€šè¿‡ç´¢å¼•åˆå¯ä»¥æ‰¾åˆ°ç›®å‰å­˜çš„å€¼ã€‚é‚£ä¹ˆå’Œmapç”¨keyæ˜¯ä¸€æ ·çš„ã€‚éƒ½æ˜¯åšåˆ°ç”¨æ•°å€¼æ ‡è®°ä½ç½®ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªå€¼å³åŒä¸€ä¸ªåœ°æ–¹åœ¨è¿™ä¸ªåœ°æ–¹åˆ¤æ–­æ˜¯å¦æœ‰é‡ã€ è§£æ³•å›› 12345678910111213141516171819202122232425public boolean isValidSudoku(char[][] board) &#123; //åˆå§‹åŒ–æ•°ç»„ char[][] rows = new char[9][9]; char[][] columns = new char[9][9]; char[][] boxes = new char[9][9]; //éå†å­˜å€¼ for (int i = 0; i &lt; 9; i++) &#123; for (int j = 0; j &lt; 9; j++) &#123; char num = board[i][j]; if (num != &#x27;.&#x27;) &#123; int n = num - &#x27;0&#x27;; int box_index = (i / 3 ) * 3 + j / 3; //ä»¥æ•°å€¼ä¸ºç´¢å¼•å­˜ä¸‹ if(rows[i][n - 1] == num) return false; if(columns[j][n - 1] == num) return false; if(boxes[box_index][n - 1] == num) return false; rows[i][n - 1] = num; columns[j][n - 1] = num; boxes[box_index][n - 1] = num; &#125; &#125; &#125; return true;&#125; ä¸¤ç§è§£æ³•åŒä¸€ä¸ªæ€è·¯åªæ˜¯é€‰å–çš„æ•°æ®ç»“æ„ä¸åŒï¼ŒåŒæ ·æ˜¯ä½¿ç”¨å€¼æ¥æ ‡è®°ä½ç½®ï¼Œé€šè¿‡å€¼å°±èƒ½æŸ¥æ‰¾ä½ç½®ã€‚å› æ­¤å¦‚æœæœ‰åŒæ ·çš„å€¼å°±åœ¨åŒä¸€ä¸ªä½ç½®å¯ä»¥å»åˆ¤æ–­ã€‚mapæ˜¯ä»¥å€¼ä¸ºkeyæ¥å®ç°ï¼Œæ•°ç»„åœ¨æ­¤æƒ…æ™¯ä¸‹å› ä¸ºæ•°ç‹¬ç›˜é¢æ˜¯9Ã—9ï¼Œé‡Œé¢çš„æ•°å­—åªèƒ½æ˜¯1åˆ°9ï¼Œæ‰€ä»¥æ•°å­—å¦‚æœæ˜¯1å°±å­˜åœ¨0ä½ï¼Œæ˜¯4å°±å­˜åœ¨ç´¢å¼•3çš„ä½ç½®ã€‚é€šè¿‡å€¼å‡ä¸€å›ºå®šå­˜çš„ä½ç½®ã€‚ ä½†ä¸Šé¢æ•°ç»„è§£æ³•ä»æ˜¯å­˜åœ¨ç–æ¼æµªè´¹äº†ç©ºé—´ï¼Œé€šè¿‡éå†çš„ä¸€ä¸ªæ•°æˆ‘æ‹¿åˆ°è¿™ä¸ªæ•°æ‰¾å¯¹åº”ä½ç½®çš„æ•°å€¼æ˜¯å¦å’Œè¿™ä¸ªæ•°ç›¸ç­‰ã€‚ä»”ç»†æƒ³ä¸€æƒ³åé¢è¿™ä¸€éƒ¨åˆ†å°±æ˜¯åºŸè¯ï¼Œæˆ‘éƒ½å­˜åŒä¸€ä¸ªç´¢å¼•æˆ–è€…åŒä¸€ä¸ªkeyäº†å°±æ˜¯å€¼ç›¸åŒï¼Œä½•å¿…è¿˜å»å–å†æ¯”è¾ƒã€‚åªæœ‰ä¸¤ç§æƒ…å†µè¿™ä¸ªåœ°æ–¹æ²¡æœ‰å­˜è¿‡é‚£å°±æ˜¯é‚£å°±æ˜¯nullå’Œå½“å‰å€¼ä¸åŒï¼Œç„¶åå­˜è¿‡åå†æœ‰ä¸€ä¸ªå¾€è¿™ä¸ªç´¢å¼•æˆ–è€…keyå­˜é‚£å°±æ˜¯é‡å¤äº†ä¸ç”¨æ¯”ã€‚å› ä¸ºç´¢å¼•å’Œkeyå°±æ˜¯å€¼ã€‚å› æ­¤æ”¹æˆbooleanï¼Œæ²¡å­˜è¿‡éƒ½æ˜¯falseï¼Œå­˜äº†å°±æ˜¯trueï¼Œå†å­˜åŒä¸€ä¸ªåœ°æ–¹æ—¶å‘ç°æ˜¯trueå°±æ˜¯è¿™ä¸ªå€¼å·²ç»å­˜è¿‡è¿™æ¬¡æ˜¯é‡å¤çš„ è§£æ³•äº”ï¼ˆè§£æ³•å››ä¼˜åŒ–ï¼‰ 12345678910111213141516171819202122232425public boolean isValidSudoku(char[][] board) &#123; //åˆå§‹åŒ–æ•°ç»„ boolean[][] rows = new boolean[9][9]; boolean[][] columns = new boolean[9][9]; boolean[][] boxes = new boolean[9][9]; //éå†å­˜å€¼ for (int i = 0; i &lt; 9; i++) &#123; for (int j = 0; j &lt; 9; j++) &#123; char num = board[i][j]; if (num != &#x27;.&#x27;) &#123; int n = num - &#x27;0&#x27;; int box_index = (i / 3 ) * 3 + j / 3; //ä»¥æ•°å€¼ä¸ºç´¢å¼•å–çœ‹æ˜¯å¦è®¾è¿‡å€¼ if(rows[i][n - 1]) return false; if(columns[j][n - 1]) return false; if(boxes[box_index][n - 1]) return false; rows[i][n - 1] = true; columns[j][n - 1] = true; boxes[box_index][n - 1] = true; &#125; &#125; &#125; return true;&#125; æœ‰äº†è§£æ³•å››ä¹‹åå®é™…ä¸Šæ˜¯æ›´åŠ å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œå› ä¸ºç»“æœæ ‡è®°åªå­˜åœ¨æ˜¯ä¸å¦ä¸¤ç§çŠ¶æ€ï¼Œé‚£æˆ‘ä»¬ä½•ä¸ç”¨0&#x2F;1ä½ã€‚å¯ä»¥è¿›ä¸€æ­¥å‡å°‘ç©ºé—´é‚£æˆ‘ä»¬éœ€è¦ä¸€ä¸ª9ä½çš„æ•°å­—ç”¨byteç±»å‹åªæœ‰1å­—èŠ‚8ä½å°‘äº†ï¼Œæ‰€ä»¥åªèƒ½ç”¨å°½é‡å°çš„shortç±»å‹2å­—èŠ‚ä¹Ÿå°±æ˜¯16ä½æˆ‘ä»¬åªç”¨ä½9ä½ã€‚ ç°åœ¨ç”¨9ä½çš„ä¸€ä¸ªæ•°å­—ï¼ˆå¿½ç•¥é«˜ä½ï¼‰ä»£æ›¿ä¹‹å‰çš„9ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œä¹Ÿå°±æ²¡æœ‰å­æ•°ç»„äº† å…ˆä»¥ä¸€ä¸ª4Ã—4çš„é¢æ¿æ•°å­—1-4åšä¾‹å­ æ‰«æåˆ°ç¬¬ä¸€ä¸ªå…ƒç´ 1é‚£ä¹ˆå®ƒé¦–å…ˆæ˜¯ç¬¬0å—ï¼Œåœ¨ç¬¬0å—é‡Œå­˜ç¬¬0ä½ï¼ˆæ•°å€¼-1ï¼‰ã€‚é‚£ä¹ˆä¸Šä¸€ä¸ªè§£æ³•æ˜¯å­æ•°ç»„æŠŠé‡Œé¢çš„ç¬¬0ä¸ªè®¾ä¸ºtrueã€‚ç°åœ¨ä¸æ˜¯å­æ•°ç»„è€Œæ˜¯ä¸€ä¸ª4ä½æ•°æŠŠä¸ªä½è®¾æˆ1ã€‚å¦‚æœæ•°å­—æ˜¯3ä¹Ÿå°±æ˜¯æŠŠç¬¬2ä½è®¾ä¸º1ï¼ˆtrueï¼‰ 1234567891011//æŠŠç¬¬0ä½è®¾ä¸º1 0000+ 1------- 0001//æŠŠç¬¬äºŒä½è®¾ä¸º1 0000+ 100------- 0100 ä»¥å‰æ˜¯æ•°ç»„ï¼Œå­˜ä¸€ä¸ª9å°±æ‰¾åœ¨è¿™ä¸ªæ•°ç»„ç´¢å¼•8å­˜ä¸‹trueï¼Œç°åœ¨å°±æ˜¯å°†1å·¦ç§»ä½è¿ç®—8ç„¶åç›¸åŠ ï¼ŒåŒæ ·æ˜¯å°†ä¸€ä¸ªå€¼çš„ç¬¬8ä½æ”¹ä¸º1ã€‚å½“å‰å­˜çš„å€¼æ˜¯å¦æ˜¯é‡å¤ä»¥å‰æ˜¯åˆ¤æ–­è¿™ä¸ªåœ°æ–¹æ˜¯å¦å·²ç»æ˜¯trueï¼Œç°åœ¨ä¸numè¿›è¡Œä¸è¿ç®—çœ‹æ˜¯ä¸æ˜¯0ï¼Œæ¯”å¦‚å­˜ä¸€ä¸ª4ï¼Œè¦å­˜åœ¨ç¬¬ä¸‰ä½ 1234567891011//ç¬¬ä¸‰ä½æ²¡æœ‰å€¼ 001000101&amp; 1000 ---------- 000000000//ç¬¬ä¸‰ä½æœ‰å€¼ 001001000&amp; 1000---------- 000001000 è§£æ³•å…­(è§£æ³•äº”ä¼˜åŒ–) 123456789101112131415161718192021222324public boolean isValidSudoku(char[][] board) &#123; //åˆå§‹åŒ–æ•°ç»„ short[] rows = new short[9]; short[] columns = new short[9]; short[] boxes = new short[9]; //éå†å­˜å€¼ for (int i = 0; i &lt; 9; i++) &#123; for (int j = 0; j &lt; 9; j++) &#123; char num = board[i][j]; if (num != &#x27;.&#x27;) &#123; num =(char)(1 &lt;&lt; (num - &#x27;0&#x27;)); int box_index = (i / 3 ) * 3 + j / 3; if((rows[i] &amp; num) != 0) return false; if((columns[j] &amp; num) != 0) return false; if((boxes[box_index] &amp; num) != 0) return false; rows[i] += num; columns[j] += num; boxes[box_index] += num; &#125; &#125; &#125; return true;&#125; æ€»ç»“å‰éƒ¨åˆ†ç®—æ³•éƒ½æ˜¯æŠ›å¼€æ ‡è®°æš´åŠ›åˆ¤æ–­ï¼Œæ•´ç†å®Œä¿¡æ¯ç„¶åæ‰åˆ¤æ–­æœ‰æ²¡æœ‰é‡å¤ä¿¡æ¯ã€‚å†ä¹‹åé€šè¿‡å€¼åšç¬¬äºŒå±‚å®¹å™¨çš„ç´¢å¼•æˆ–è€…keyï¼ŒåŒä¸€ä¸ªå€¼å¦‚æœæ˜¯åŒä¸€åˆ—ï¼ˆå—&#x2F;è¡Œï¼‰å°±ä¼šå­˜åˆ°åŒä¸€ä¸ªåœ°æ–¹è¿›è€Œåˆ©ç”¨äº†ç¬¬äºŒå±‚å®¹å™¨ç´¢å¼•åå¯ä»¥åœ¨å­˜çš„è¿‡ç¨‹å°±åˆ¤æ–­æ˜¯å¦æœ‰é‡ï¼Œåœ¨ä¹‹åè¿™åŒä¸€ç§æ€è·¯åœ¨æ•°æ®ç»“æ„ä¸Šæœ‰æ…¢æ…¢æ›´å¥½çš„é€‰æ‹©ï¼Œæœ€ç»ˆè¾¾åˆ°ä¸€ä¸ªæœ€ä¼˜è§£ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š1.ä¸¤æ•°ä¹‹å’Œ","slug":"ä¸¤æ•°ä¹‹å’Œ","date":"2020-11-18T12:15:55.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/11/18/ä¸¤æ•°ä¹‹å’Œ/","link":"","permalink":"http://yournotes.cn/2020/11/18/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","excerpt":"ä¸¤æ•°ä¹‹å’Œé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/two-sum/ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚","text":"ä¸¤æ•°ä¹‹å’Œé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/two-sum/ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚ ç¤ºä¾‹: 123è¾“å…¥ï¼šnums = [2, 7, 11, 15], target = 9è¾“å‡ºï¼š[0, 1]å› ä¸º nums[0] + nums[1] = 2 + 7 = 9 æš´åŠ›æšä¸¾è¿™é‡Œæƒ³å¿…å¤§å®¶å¾ˆå¿«å°±èƒ½å¾—åˆ°æ€è·¯ä¹Ÿå°±æ˜¯åŒæŒ‡é’ˆéå†æ‰€æœ‰ä¸¤ä¸¤ç›¸åŠ åˆ¤æ–­æ˜¯å¦ä¸ç›®æ ‡å€¼ç›¸ç­‰ 123456789101112public int[] twoSum(int[] nums, int target) &#123; int n = nums.length; for (int i = 0; i &lt; n; ++i) &#123; for (int j = i + 1; j &lt; n; ++j) &#123; if (nums[i] + nums[j] == target) &#123; return new int[]&#123;i, j&#125;; &#125; &#125; &#125; return new int[0];&#125; å“ˆå¸Œè¡¨ä½†å®é™…ä¸ŠæŒ‰ç…§ä¸Šé¢æˆ‘ä»¬å»åˆ°æ•°ç»„å½“ä¸­æ‰¾ä¸¤ä¸ªæ•°ç›¸åŠ ä¸ºç›®æ ‡å€¼çš„æ–¹å¼ä¹Ÿå°±æ˜¯åœ¨ç¡®å®šnums[i]çš„æƒ…å†µä¸‹ä¸éå†æ‰¾target - nums[i].æ—¢ç„¶æ˜¯è¿™æ ·å­é‚£æˆ‘ä»¬ç›´æ¥éå†ä¸€æ¬¡è®°ä¸‹æ‰€æœ‰çš„target-nums[i]å†çœ‹æ•°ç»„å½“ä¸­å­˜åœ¨taget-nums[i]ä¸ã€‚è‹¥å­˜åœ¨å³è¿”å›ä¸‹æ ‡ä¸ºiä¸taget-nums[i]è¿™ä¸ªå€¼çš„ä¸‹æ ‡ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä½¿ç”¨hashè¡¨å»è®°å½•æ•°ç»„å€¼ä¸ºkeyä¸‹æ ‡ä¸ºvalue 1234567891011public int[] twoSum(int[] nums, int target) &#123; Map&lt;Integer, Integer&gt; hashtable = new HashMap&lt;Integer, Integer&gt;(); for (int i = 0; i &lt; nums.length; ++i) &#123; if (hashtable.containsKey(target - nums[i])) &#123; return new int[]&#123;hashtable.get(target - nums[i]), i&#125;; &#125; hashtable.put(nums[i], i); &#125; return new int[0];&#125; æ€»ç»“å‰è€…æ¯”èµ·å“ˆå¸Œè¡¨çš„è§£æ³•æœªæ·»åŠ ç¼“å­˜ä¿¡æ¯å› æ­¤éœ€è¦èŠ±O(n^2)çš„æ—¶é—´å¤æ‚åº¦æ¥åŒ¹é…,é‡‡ç”¨hashè¡¨è®°å½•å¢åŠ äº†ç©ºé—´æ¶ˆè€—æ—¶é—´å¤æ‚åº¦O(n)å› ä¸ºé…å¯¹çš„è¿‡ç¨‹è½¬ä¸ºhashè¡¨æŸ¥æ‰¾ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"å¤å¤©çš„é£","slug":"å¤å¤©çš„é£","date":"2020-11-05T11:48:27.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/11/05/å¤å¤©çš„é£/","link":"","permalink":"http://yournotes.cn/2020/11/05/%E5%A4%8F%E5%A4%A9%E7%9A%84%E9%A3%8E/","excerpt":"ã€Šå¤å¤©çš„é£ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå¤å¤©çš„é£ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"å½©è™¹","slug":"å½©è™¹","date":"2020-11-05T11:36:07.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/11/05/å½©è™¹/","link":"","permalink":"http://yournotes.cn/2020/11/05/%E5%BD%A9%E8%99%B9/","excerpt":"ã€Šå½©è™¹ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå½©è™¹ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"æˆ‘å–œæ¬¢ä¸Šä½ æ—¶çš„å†…å¿ƒæ´»åŠ¨","slug":"æˆ‘å–œæ¬¢ä¸Šä½ æ—¶çš„å†…å¿ƒæ´»åŠ¨","date":"2020-10-15T13:34:58.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/10/15/æˆ‘å–œæ¬¢ä¸Šä½ æ—¶çš„å†…å¿ƒæ´»åŠ¨/","link":"","permalink":"http://yournotes.cn/2020/10/15/%E6%88%91%E5%96%9C%E6%AC%A2%E4%B8%8A%E4%BD%A0%E6%97%B6%E7%9A%84%E5%86%85%E5%BF%83%E6%B4%BB%E5%8A%A8/","excerpt":"ã€Šæˆ‘å–œæ¬¢ä¸Šä½ æ—¶çš„å†…å¿ƒæ´»åŠ¨ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šæˆ‘å–œæ¬¢ä¸Šä½ æ—¶çš„å†…å¿ƒæ´»åŠ¨ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"å¤œå¤œå¤œå¤œ","slug":"å¤œå¤œå¤œå¤œ","date":"2020-10-15T13:34:31.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/10/15/å¤œå¤œå¤œå¤œ/","link":"","permalink":"http://yournotes.cn/2020/10/15/%E5%A4%9C%E5%A4%9C%E5%A4%9C%E5%A4%9C/","excerpt":"ã€Šå¤œå¤œå¤œå¤œã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå¤œå¤œå¤œå¤œã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š283.ç§»åŠ¨é›¶","slug":"ç§»åŠ¨é›¶","date":"2020-09-24T13:03:00.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/09/24/ç§»åŠ¨é›¶/","link":"","permalink":"http://yournotes.cn/2020/09/24/%E7%A7%BB%E5%8A%A8%E9%9B%B6/","excerpt":"ç§»åŠ¨é›¶é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/move-zeroes/ ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚","text":"ç§»åŠ¨é›¶é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/move-zeroes/ ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚ ç¤ºä¾‹: 12è¾“å…¥: [0,1,0,3,12]è¾“å‡º: [1,3,12,0,0] è¯´æ˜: å¿…é¡»åœ¨åŸæ•°ç»„ä¸Šæ“ä½œï¼Œä¸èƒ½æ‹·è´é¢å¤–çš„æ•°ç»„ã€‚ å°½é‡å‡å°‘æ“ä½œæ¬¡æ•°ã€‚ é¢˜ç›®ä¿¡æ¯è¾“å…¥ï¼šæ•°ç»„ è¾“å‡ºï¼šæ•°ç»„ï¼ˆå°†åŸæ•°ç»„çš„0éƒ½ç§»åŠ¨åˆ°åé¢ï¼‰ é¢å¤–ï¼šç©ºé—´O(1)ï¼Œæ—¶é—´å°½é‡å‡å°‘ æ€è€ƒå¯¹äºè¿™æ ·ä¸€é“é¢˜ä¸€å¼€å§‹çœ‹åˆ°è¦åŸåœ°ä¿®æ”¹é¦–å…ˆå°±æƒ³åˆ°äº†åŒæŒ‡é’ˆéå†ä¸€æ¬¡æŠŠä¸æ˜¯é›¶çš„å¾€å‰è®¾ç½®ã€‚åé¢çš„å†å…¨éƒ¨è®¾ç½®0ï¼Œè¿™æ ·å¾—åˆ°çš„ç®—æ³•ä¹Ÿæ˜¯æ»¡è¶³ç©ºé—´å¤æ‚åº¦O(1)ï¼Œæ—¶é—´å¤æ‚åº¦O(n). 12345678910111213public void moveZeroes(int[] nums) &#123; int j = 0; for(int i=0;i&lt;nums.length;i++)&#123; if(nums[i] != 0)&#123; nums[j]=nums[i]; j++; &#125; &#125; while(j&lt;nums.length)&#123; nums[j] = 0; j++; &#125;&#125; ä¸¤æ¬¡å¾ªç¯æ‰§è¡Œæ—¶é—´0msï¼Œè¿™æ ·å°±å·²ç»ç®—æ˜¯å®Œç¾è§£å†³äº†ã€‚ä½†ç¡®å®è¿˜å¯ä»¥åªèŠ±ä¸€æ¬¡å¾ªç¯å°±èƒ½è§£å†³ï¼Œæˆ‘ä»¬åœ¨éå†è¿‡ç¨‹å½“ä¸­æ˜¯ä¿è¯å…¶ä»–é¡ºåºä¸å˜ç„¶åé›¶åˆ°åé¢ã€‚ä¸Šé¢çš„æƒ³æ³•ä¸å°±æ˜¯æ‰«æé0ç„¶åæ‰«æä¸€ä¸ªå°±å¾€å‰é¢è®¾ç½®ç„¶åæŒ‡é’ˆç§»åŠ¨ä¸€ã€‚é‚£ä¹ˆåŒæ ·æˆ‘ä»¬å»ç¡®å®šé›¶çš„ä½ç½®ç„¶åäº¤æ¢å§‹ç»ˆä¿è¯æ•°å­—åœ¨æœ€å·¦é›¶çš„å·¦è¾¹å³å¯ 12345678910111213public void moveZeroes(int[] nums) &#123; //ä¸¤ä¸ªæŒ‡é’ˆiå’Œj int j = 0; for(int i=0;i&lt;nums.length;i++) &#123; //å½“å‰å…ƒç´ !=0ï¼Œå°±æŠŠå…¶äº¤æ¢åˆ°å·¦è¾¹ï¼Œç­‰äº0çš„äº¤æ¢åˆ°å³è¾¹ if(nums[i]!=0) &#123; int tmp = nums[i]; nums[i] = nums[j]; nums[j++] = tmp; &#125; &#125;&#125; æ€»ç»“æ€»ä½“æ¥è®²ä¸¤ç§æ–¹å¼éƒ½æ˜¯ç©ºé—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰çš„åŸåœ°ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿéƒ½ä¸ºOï¼ˆnï¼‰åè€…ç•¥ä¼˜ä¸€ç‚¹","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"é¢è¯•äº”","slug":"è±åšç§‘æŠ€","date":"2020-09-23T06:03:55.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2020/09/23/è±åšç§‘æŠ€/","link":"","permalink":"http://yournotes.cn/2020/09/23/%E8%8E%B1%E5%8D%9A%E7%A7%91%E6%8A%80/","excerpt":"","text":"é¢å‘å¯¹è±¡æ€ä¹ˆç†è§£çš„ï¼Ÿ é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§è¯´ä¸€ä¸‹ï¼Ÿ äº‹ç‰©æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ æŠ½è±¡ç±»æ˜¯ä»€ä¹ˆï¼Ÿæ¥å£æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ å¯¹JVMäº†è§£å¤šå°‘ï¼Ÿå†…å­˜ç»“æ„æ€ä¹ˆåˆ’åˆ†çš„ï¼Ÿ HashMapæœ‰äº†è§£ä¸ï¼Ÿå››æŒ‡é’ˆä¸ºä»€ä¹ˆè§£å†³äº†å¤´æ’é—®é¢˜ï¼Ÿ è¯´ä¸€ä¸‹redisç¼“å­˜ç©¿é€ï¼Ÿå¸ƒéš†è¿‡æ»¤å™¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ è¯´ä¸€ä¸‹Spring MVCçš„æµç¨‹ è¯´ä¸€ä¸‹IOCã€AOP è¯´ä¸€ä¸‹Spring Boot","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š66.åŠ ä¸€","slug":"åŠ ä¸€","date":"2020-09-20T06:10:03.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/09/20/åŠ ä¸€/","link":"","permalink":"http://yournotes.cn/2020/09/20/%E5%8A%A0%E4%B8%80/","excerpt":"åŠ ä¸€é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/plus-one/ ç»™å®šä¸€ä¸ªç”±æ•´æ•°ç»„æˆçš„éç©ºæ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚æœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚ä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚","text":"åŠ ä¸€é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/plus-one/ ç»™å®šä¸€ä¸ªç”±æ•´æ•°ç»„æˆçš„éç©ºæ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚æœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚ä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚ ç¤ºä¾‹ 1: 123è¾“å…¥: [1,2,3]è¾“å‡º: [1,2,4]è§£é‡Š: è¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 123ã€‚ ç¤ºä¾‹ 2: 123è¾“å…¥: [4,3,2,1]è¾“å‡º: [4,3,2,2]è§£é‡Š: è¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 4321ã€‚ é¢˜ç›®ä¿¡æ¯è¾“å…¥ï¼šæ•´æ•°æ•°ç»„ï¼ˆæ•´ä½“è¡¨ç¤ºä¸€ä¸ªæ•°å­—æ¯ä¸€ä½å°±æ˜¯0-9ï¼Œä¸ªåç™¾åƒâ€¦ä½ï¼‰ è¾“å‡ºï¼šæ•´æ•°æ•°ç»„ï¼ˆç»™è¿™ä¸ªæ•°å­—åŠ ä¸€ä¹‹åç”¨æ•°ç»„è¡¨è¾¾å¯¹åº”æ•°å­—ï¼‰ æ€è€ƒä¸€å¼€å§‹æƒ³åˆ°çš„å°±æ˜¯æ¨¡æ‹ŸåŠ æ³•ï¼Œåœ¨ä»”ç»†è¯»é¢˜ç›®ååˆå¾—åˆ°äº†å¦ä¸€ç§è§£å†³æ–¹å¼ï¼Œå°±æ˜¯è¿˜åŸæˆè¡¨è¾¾çš„æ•°å­—åŠ ä¸€ä¹‹åå†è¿˜åŸæˆæ•°ç»„ã€‚ 12[1,2,3]1*100 + 2*10 + 3*1 = 123 12[4,3,2,1]4*1000 + 3*100 + 2*10 + 1*1 = 4321 123456789101112131415161718//æ–¹å¼ä¸€public int[] plusOne(int[] digits) &#123; int len = digits.length; Long num = 0; //å¾ªç¯ç´¯åŠ è½¬åŒ–æ•°å­— for(int i = 0; i &lt; len; i++)&#123; num += digits[len-i-1]*Math.pow(10,i); &#125; //å®ŒæˆåŠ ä¸€æ­¥éª¤ num = num + 1; //å°†ç»“æœæ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²è®¾ç½®åˆ°æ•°ç»„å½“ä¸­ String str = String.valueOf(num); int[] result = new int[str.length()]; for(int i = 0; i &lt; str.length(); i++)&#123; result[i] = str.charAt(i) - &#x27;0&#x27;; &#125; return result;&#125; è¿™ä¸ªä»£ç åœ¨LeetCodeä¸Šæ˜¯æ²¡åŠæ³•æäº¤é€šè¿‡çš„ï¼Œå› ä¸ºLeetCodeä½¿ç”¨çš„ç¤ºä¾‹æ•°ç»„åŒ–æˆæ•°å­—è¶…è¿‡äº†longçš„èŒƒå›´ï¼Œå¯ä»¥æ¢æˆæ›´å¤§çš„BigIntegerä½†LeetCodeä¸è¯†åˆ«ã€‚ è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯æœ€å¼€å§‹æƒ³åˆ°çš„ï¼Œå°±æ˜¯æ¨¡æ‹ŸåŠ æ³•æ‰‹åŠ¨å»è®¾ç½®å€¼ã€‚åŠ ä¸€è€ƒè™‘çš„ç‚¹å°±æ˜¯ä½ä½è¿ç»­çš„9ã€‚ç›´åˆ°ä¸æ˜¯9çš„ä½åŠ 1å…¶ä»–è®¾0 1234567891011121314//æ–¹å¼äºŒpublic int[] plusOne(int[] digits) &#123; for (int i = digits.length - 1; i &gt;= 0; i--) &#123; //å®ŒæˆåŠ ä¸€ digits[i]++; //ä¸10å–ä½™æœ‰åˆ™ç»“æŸï¼Œæ— åˆ™è¿›ä½å†æ¬¡å¾ªç¯ digits[i] = digits[i] % 10; if (digits[i] != 0) return digits; &#125; //å…¨è¿›ä½åˆ™æ–°å»ºå®¹é‡å¤šä¸€çš„æ•°ç»„ï¼Œæœ€é«˜ä½è®¾ä¸€ digits = new int[digits.length + 1]; digits[0] = 1; return digits;&#125; æ€»ç»“æ€»ä½“æ¥è¯´æ˜¯ç®€å•çš„ä¸¤ç§æ€è·¯ï¼Œä¸€æ˜¯åŒ–æˆæ•°å­—ä¸ç”¨ç®¡æ€ä¹ˆåŠ å†åŒ–å›æ•°ç»„ï¼ŒäºŒæ˜¯æ¨¡æ‹ŸåŠ æ³•è¿‡ç¨‹ã€‚åè€…è¦ä¼˜ä¸€ç‚¹","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š350.ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II","slug":"ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†II","date":"2020-09-20T03:32:48.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/09/20/ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†II/","link":"","permalink":"http://yournotes.cn/2020/09/20/%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86II/","excerpt":"ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† IIé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/intersection-of-two-arrays-ii/ ç»™å®šä¸¤ä¸ªæ•°ç»„ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å®ƒä»¬çš„äº¤é›†ã€‚","text":"ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† IIé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/intersection-of-two-arrays-ii/ ç»™å®šä¸¤ä¸ªæ•°ç»„ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å®ƒä»¬çš„äº¤é›†ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šnums1 = [1,2,2,1], nums2 = [2,2]è¾“å‡ºï¼š[2,2] ç¤ºä¾‹ 2: 12è¾“å…¥ï¼šnums1 = [4,9,5], nums2 = [9,4,9,8,4]è¾“å‡ºï¼š[4,9] è¯´æ˜ï¼š è¾“å‡ºç»“æœä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œåº”ä¸å…ƒç´ åœ¨ä¸¤ä¸ªæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°çš„æœ€å°å€¼ä¸€è‡´ã€‚ æˆ‘ä»¬å¯ä»¥ä¸è€ƒè™‘è¾“å‡ºç»“æœçš„é¡ºåºã€‚ è¿›é˜¶ï¼š å¦‚æœç»™å®šçš„æ•°ç»„å·²ç»æ’å¥½åºå‘¢ï¼Ÿä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ å¦‚æœ nums1 çš„å¤§å°æ¯” nums2 å°å¾ˆå¤šï¼Œå“ªç§æ–¹æ³•æ›´ä¼˜ï¼Ÿ å¦‚æœ nums2 çš„å…ƒç´ å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå†…å­˜æ˜¯æœ‰é™çš„ï¼Œå¹¶ä¸”ä½ ä¸èƒ½ä¸€æ¬¡åŠ è½½æ‰€æœ‰çš„å…ƒç´ åˆ°å†…å­˜ä¸­ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ é¢˜ç›®ä¿¡æ¯è¾“å…¥ï¼šä¸¤ä¸ªæ•´æ•°æ•°ç»„ è¾“å‡ºï¼šäº¤é›†æ•°ç»„ é¢å¤–ï¼šä¸è€ƒè™‘é¡ºåº æ€è€ƒå°±ç›¸å½“äºæ˜¯æ•°å­¦é›†åˆæ±‚äº¤é›†ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯åŒæŒ‡é’ˆæ‰«ææ¯”è¾ƒåˆ¤æ–­æ˜¯å¦å­˜å…¥ç»“æœã€‚å¯¹äºè¿™æ ·çš„æ–¹å¼å°±é€‰æ‹©å…ˆæ’åºå†æ¯”è¾ƒã€‚ 12345678nums1 = [4,5,9], nums2 = [4,4,8,9,9]nums1[0] == nums2[0] true å­˜4 nums1[1] == nums2[1] falseä¸”&gt; nums1æŒ‡é’ˆä¸å˜nums1[1] == nums2[2] falseä¸”&lt; nums2æŒ‡é’ˆä¸å˜nums1[2] == nums2[2] falseä¸”&gt; nums1æŒ‡é’ˆä¸å˜nums1[2] == nums2[3] true å­˜9 nums1å·²éå†å®Œæ¯•ç»“æŸç»“æœä¸º[4,9] 123456789101112131415161718192021222324public int[] intersect(int[] nums1, int[] nums2) &#123; //æ’åº Arrays.sort(nums1); Arrays.sort(nums2); //ä¸¤ä¸ªæŒ‡é’ˆ int i = 0; int j = 0; //ç»“æœæ•°ç»„åŠå…¶å­˜å‚¨ä¸‹æ ‡ int[] result = new int[nums1.length]; int index = 0; while(i&lt;nums1.length &amp;&amp; j&lt;nums2.length)&#123; if(nums1[i] == nums2[j])&#123; result[index] = nums1[i]; i++; j++; index++; &#125;else if(nums1[i] &gt; nums2[j])&#123; j++; &#125;else&#123; i++; &#125; &#125; return Arrays.copyOfRange(result,0,index);&#125; ç©ºé—´å¤æ‚åº¦O(n)ï¼Œæ—¶é—´å¤æ‚åº¦O(nlogn+mlogm)ã€‚ å’Œå‰é¢å†™è¿‡çš„å‡ é“é¢˜ä¸€æ ·éƒ½æ˜¯é™¤äº†åŒæŒ‡é’ˆæ‰«æä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨hashè¡¨æ¥è§£å†³å¹¶ä¸”æ—¶é—´å¤æ‚åº¦è¦æ¯”æ‰«ææ¯”è¾ƒçš„æ–¹å¼ä¼˜ã€‚è¿™é‡Œæ‰¾åˆ°ç›¸åŒçš„å€¼åŒæ ·ç”¨hashè¡¨è®°å½•ç„¶åå¦ä¸€ä¸ªå†åˆ°hashè¡¨é‡Œæ¯”å¯¹ã€‚è¿™æ ·æ—¶é—´å¤æ‚åº¦ä¸ºO(n+m) 1234567891011121314151617181920212223 public int[] intersect(int[] nums1, int[] nums2) &#123; int[] result = new int[nums1.length]; int index = 0; Map&lt;Integer,Integer&gt; map = new HashMap(); for(int num1 : nums1)&#123; int count = map.getOrDefault(num1,0)+1; map.put(num1,count); &#125; for(int num2 : nums2)&#123; int count = map.getOrDefault(num2, 0); if (count &gt; 0) &#123; result[index] = num2; index++; count--; if (count &gt; 0) &#123; map.put(num2, count); &#125; else &#123; map.remove(num2); &#125; &#125; &#125; return Arrays.copyOfRange(result,0,index);&#125; æ€»ç»“ä¸¤ç§æ–¹æ³•ä¸€ç§ä¸¤ä¸ªæ•°ç»„æ’åºä½¿ç”¨åŒæŒ‡é’ˆåŒæ­¥æ¯”è¾ƒï¼Œç¬¬äºŒç§å…ˆå°†ä¸€ä¸ªæ•°ç»„ç»Ÿè®¡åˆ°hashè¡¨å¦ä¸€ä¸ªå†å¯¹ç…§æŸ¥æ‰¾å­˜ä¸å­˜åœ¨ï¼Œå¯¹äºè¿›é˜¶é‡Œé¢çš„ä¸‰æ¡ç¬¬ä¸€æ¡æ˜¯å·²ç»æ’å¥½åºé‚£ä¹ˆéå†ç›´æ¥æ¯”è¾ƒå³å¯æ—¶é—´å¤æ‚åº¦O(n+m)ï¼Œå¦‚æœä¸¤æ•°ç»„é•¿åº¦å·®è·å¤§çš„è¯é¦–å…ˆç©ºé—´ä¼˜åŒ–åˆ›å»ºçš„resultæ•°ç»„ç”¨å°çš„é‚£ä¸ªå®¹é‡åˆ›å»ºå…¶ä»–å°±æ˜¯å¯¹ä½¿ç”¨hashè¡¨çš„æ–¹å¼æœ‰å½±å“ç”¨çŸ­çš„æ•°ç»„è®°å½•ã€‚æœ€åä¸€ç§nums2è¿‡å¤§å°±æ˜¯å†…å­˜ä¸è¿‡å¹¶ä¸èƒ½ç›´æ¥å…¨éƒ¨æ’åºæ¯”è¾ƒï¼Œé‚£å°±ä½¿ç”¨hashè¡¨çš„æ–¹å¼ï¼Œhashè¡¨ç»Ÿè®¡å®Œnums1ç„¶ånums2åªéœ€è¦ä¸€ä¸ªä¸€ä¸ªå¯¹ç…§å³å¯ä¸éœ€è¦å…¨éƒ¨çº³å…¥ã€‚","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"ä¸€ä¸‡æ¬¡æ‚²ä¼¤","slug":"ä¸€ä¸‡æ¬¡æ‚²ä¼¤","date":"2020-09-15T13:33:52.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/09/15/ä¸€ä¸‡æ¬¡æ‚²ä¼¤/","link":"","permalink":"http://yournotes.cn/2020/09/15/%E4%B8%80%E4%B8%87%E6%AC%A1%E6%82%B2%E4%BC%A4/","excerpt":"ã€Šä¸€ä¸‡æ¬¡æ‚²ä¼¤ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šä¸€ä¸‡æ¬¡æ‚²ä¼¤ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"æ˜¥é£åé‡Œ","slug":"æ˜¥é£åé‡Œ","date":"2020-09-15T13:33:42.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/09/15/æ˜¥é£åé‡Œ/","link":"","permalink":"http://yournotes.cn/2020/09/15/%E6%98%A5%E9%A3%8E%E5%8D%81%E9%87%8C/","excerpt":"ã€Šæ˜¥é£åé‡Œã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šæ˜¥é£åé‡Œã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š136.åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ ","slug":"åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ ","date":"2020-09-14T09:56:47.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/09/14/åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ /","link":"","permalink":"http://yournotes.cn/2020/09/14/%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E5%85%83%E7%B4%A0/","excerpt":"åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/single-number/ ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚","text":"åªå‡ºç°ä¸€æ¬¡çš„å…ƒç´ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/single-number/ ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚ è¯´æ˜ï¼š ä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ ç¤ºä¾‹ 1: 12è¾“å…¥: [2,2,1]è¾“å‡º: 1 ç¤ºä¾‹ 2: 12è¾“å…¥: [4,1,2,1,2]è¾“å‡º: 4 é¢˜ç›®ä¿¡æ¯è¾“å…¥ï¼šæ•´æ•°æ•°ç»„ï¼ˆåªæœ‰ä¸€ä¸ªæ•°å•ä¸ªï¼Œå…¶ä»–æ•°å…¨éƒ¨æ˜¯ä¸¤æ¬¡çš„æ•°ç»„ï¼‰ è¾“å‡ºï¼šæ•´æ•°ï¼ˆé‚£ä¸ªå•ä¸ªçš„æ•°ï¼‰ é¢å¤–ï¼šæ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(1) æ€è€ƒä¸€å¼€å§‹çœ‹æ¼äº†ä¿¡æ¯ä»¥ä¸ºåªæœ‰æ•°ç»„é‡Œåªæœ‰ä¸€ä¸ªä¸é‡å¤å…¶ä»–éƒ½æ˜¯é‡å¤ä¸é™æ¬¡æ•°ï¼Œå¿½ç•¥äº†é‡å¤åªæœ‰2æ¬¡ã€‚æ‰€ä»¥æƒ³åˆ°çš„åªæœ‰ä¸‡èƒ½çš„mapè®¡æ•°ï¼Œæ— è®ºæ˜¯æ‰¾å‡ºç°æ¬¡æ•°æœ€å¤šçš„è¿˜æ˜¯å‡ºç°ä¸€æ¬¡çš„å•¥éƒ½å¯ä»¥ã€‚ä½†å¹¶ä¸æ»¡è¶³ç©ºé—´å¤æ‚åº¦ï¼Œä¸ºäº†æ»¡è¶³ç©ºé—´å¤æ‚åº¦ä¸ä½¿ç”¨é¢å¤–è®°å½•é‚£å°±æ˜¯æš´åŠ›æ‰«æn^2ï¼Œè¯´åˆ°æ‰«æå°±è¿˜å¯¹åº”ä¸€ä¸ªæ›´ä¼˜çš„æ–¹å¼å°±æ˜¯æ’åºåå†æ‰«ænlognä½†è¿™ä¸¤ç§ä¹Ÿéƒ½ä¸æ»¡è¶³çº¿æ€§çš„æ—¶é—´å¤æ‚åº¦ã€‚ï¼ˆè®°å¾—ä¸Šä¸€ç¯‡åˆ¤æ–­æ•°ç»„æ˜¯å¦æœ‰é‡å¤ä¹Ÿæœ‰è¿™å‡ ç§æ€è·¯ä½¿ç”¨å®¹å™¨æˆ–è€…åŒæŒ‡é’ˆæ‰«æï¼‰ 12345678910111213141516171819//æ–¹å¼ä¸€ï¼šMapè®¡æ•°public int singleNumber(int[] nums) &#123; //å®šä¹‰mapå­˜&lt;æ•°å­—i,è®¡æ•°count&gt; Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (Integer i : nums) &#123; //å¦‚æœä¹‹å‰å­˜åœ¨è®¡æ•°åˆ™åŠ ä¸€å¦åˆ™è®¡ä¸ºç¬¬ä¸€ä¸ª Integer count = map.get(i); count = count == null ? 1 : ++count; map.put(i, count); &#125; //è®¡æ•°ç»Ÿè®¡ç»“æŸï¼Œéå†æ‰€æœ‰keyæ‰¾åˆ°å¯¹åº”è®¡æ•°æ˜¯1çš„ for (Integer i : map.keySet()) &#123; Integer count = map.get(i); if (count == 1) &#123; return i; &#125; &#125; return -1;&#125; 1234567891011121314151617181920212223242526272829//æ–¹å¼äºŒï¼šæ‰«ææ¯”è¾ƒpublic int singleNumber(int[] nums) &#123; //æ’å¥½åºã€å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ Arrays.sort(nums); int start = 0; int scan = 1; if(nums.length == 1)&#123; return nums[0]; &#125; /* å½“startä¸ç­‰äºscanæ—¶ scanåœæ­¢ç§»åŠ¨ å¹¶ä¸”æ¯”è¾ƒå·®è·åˆ¤æ–­æ˜¯å¦å‡ºç°ä¸€æ¬¡ æˆ–è€…scanåœæ­¢çš„åœ°æ–¹å·²ç»æ˜¯æœ€åä¸€ä½ å¦åˆ™ç»§ç»­æŠŠstartç§»åŠ¨åˆ°æ–°æ•°å­—ä¸Š */ while(start &lt; nums.length)&#123; while(nums[start] == nums[scan])&#123; scan++; &#125; if(scan - start == 1)&#123; return nums[start]; &#125;else if(scan == nums.length -1)&#123; return nums[scan]; &#125; start = scan; &#125; return -1;&#125; ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½æ²¡æœ‰è€ƒè™‘æ¡ä»¶ä¸­é‡å¤æ•°å­—åªæ˜¯å‡ºç°ä¸¤æ¬¡ï¼ˆè¾“å…¥æ•°ç»„æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ•°å­—å”¯ä¸€å…¶ä»–éƒ½æ˜¯ä¸¤æ¬¡ï¼‰ï¼Œè§£å†³çš„æ˜¯å…¶ä»–é‡å¤æ•°å­—é‡å¤å¤šå°‘éƒ½å¯ä»¥ï¼Œå¹¶æ‰¾åˆ°å”¯ä¸€çš„é‚£ä¸ªæ•°ã€‚ç›®å‰æ¥è¯´ç¡®å®åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å”¯ä¸€æ•°æ˜¯ä¸å¯èƒ½è¾¾åˆ°æ—¢æ»¡è¶³ä¸ä½¿ç”¨é¢å¤–ç©ºé—´åˆæ»¡è¶³çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚å› æ­¤ä¸€å®šæ˜¯åœ¨ç»™å‡ºå…¶ä»–é‡å¤æ•°å­—éƒ½æ˜¯ä¸¤æ¬¡è¿™æ ·çš„æ¡ä»¶ä¸‹æ‰å¯ä»¥å®ç°ã€‚åœ¨è¿™æ ·çš„æ¡ä»¶ä¸‹æœ‰ä¸€ç§æ–¹å¼æ¯”ä¸Šé¢è®¡æ•°å°±è¦ä¼˜ä¸€ç‚¹ç‚¹ä¸¤æ¬¡ç›¸æ¶ˆè™½ç„¶ä¼šä½¿ç”¨é¢å¤–ç©ºé—´ä½†ç©ºé—´ä¸æ—¶é—´æ¯”èµ·è®¡æ•°éƒ½ä¼˜åŒ–äº†ä¸€ç‚¹ 12345678910//æ–¹å¼ä¸‰public int singleNumber(int[] nums) &#123; Set&lt;Integer&gt; set = new HashSet(); for (Integer i : nums) &#123; if(!set.add(i))&#123; set.remove(i); &#125; &#125; return set.iterator().next();&#125; ä½†æœ€ç»ˆæ˜¯è¦æ±‚æ˜¯æ—¶é—´O(n)ï¼Œç©ºé—´O(1)ã€‚é‚£ä¹ˆåªèƒ½æ˜¯åŸåœ°ç›¸æ¶ˆï¼Œæ‰«æä¹Ÿä¸å¯èƒ½å› ä¸ºæ˜¯æ—¶é—´O(nlogn)ã€‚åªèƒ½éå†ä¸€éå¹¶ä¸”è®°å½•åˆ°æœ€åå°±åªå‰©é‚£ä¸€ä¸ªï¼Œè¿™ä¸ªæ—¶å€™è¿ç®—ç†Ÿæ‚‰çš„å°±ä¼šæƒ³åˆ°ä½¿ç”¨å¼‚æˆ–ï¼Œç›¸åŒè¿ç®—ç»“æœä¸º0ï¼Œç´¯è®¡æ¶ˆåˆ°æœ€åå°±å‰©ä¸‹å•ç€çš„é‚£ä¸€ä¸ª 12345678//æ–¹å¼å››public int singleNumber(int[] nums) &#123; int len = 0; for (int i : nums) &#123; len ^= i; &#125; return len;&#125; æ€»ç»“è¿™ä¸€é“é¢˜å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°hashè¡¨æˆ–è€…æ‰«ææ¯”è¾ƒçš„è§£å†³æ–¹æ³•ï¼Œä¸»è¦å°±æ˜¯æœ€ååˆ©ç”¨å¼‚æˆ–è¿ç®—çš„æ–¹å¼å®ç°åŸåœ°ç›¸æ¶ˆå’Œçº¿æ€§çš„æ—¶é—´å¤æ‚åº¦","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"é¢è¯•å››","slug":"æ–¹æ­£å›½é™…","date":"2020-09-14T04:51:05.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/09/14/æ–¹æ­£å›½é™…/","link":"","permalink":"http://yournotes.cn/2020/09/14/%E6%96%B9%E6%AD%A3%E5%9B%BD%E9%99%85/","excerpt":"","text":"OSIå‚è€ƒæ¨¡å‹ tcp&#x2F;ipæ¨¡å‹ æ“ä½œç³»ç»Ÿæ­»é”","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š217.å­˜åœ¨é‡å¤å…ƒç´ ","slug":"å­˜åœ¨é‡å¤å…ƒç´ ","date":"2020-09-13T02:47:55.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/09/13/å­˜åœ¨é‡å¤å…ƒç´ /","link":"","permalink":"http://yournotes.cn/2020/09/13/%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/","excerpt":"å­˜åœ¨é‡å¤å…ƒç´ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/contains-duplicate/ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨é‡å¤å…ƒç´ ã€‚å¦‚æœä»»æ„ä¸€å€¼åœ¨æ•°ç»„ä¸­å‡ºç°è‡³å°‘ä¸¤æ¬¡ï¼Œå‡½æ•°è¿”å› true ã€‚å¦‚æœæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ç›¸åŒï¼Œåˆ™è¿”å› falseã€‚","text":"å­˜åœ¨é‡å¤å…ƒç´ é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/contains-duplicate/ ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨é‡å¤å…ƒç´ ã€‚å¦‚æœä»»æ„ä¸€å€¼åœ¨æ•°ç»„ä¸­å‡ºç°è‡³å°‘ä¸¤æ¬¡ï¼Œå‡½æ•°è¿”å› true ã€‚å¦‚æœæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ç›¸åŒï¼Œåˆ™è¿”å› falseã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥: [1,2,3,1]è¾“å‡º: true ç¤ºä¾‹ 2ï¼š 12è¾“å…¥: [1,2,3,4]è¾“å‡º: false ç¤ºä¾‹ 3ï¼š 12è¾“å…¥: [1,1,1,3,3,4,3,2,4,2]è¾“å‡º: true é¢˜ç›®ä¿¡æ¯è¾“å…¥ï¼š æ•´æ•°æ•°ç»„ è¾“å‡ºï¼š å¸ƒå°”ï¼ˆæ•°ç»„æ˜¯å¦æœ‰é‡å¤å…ƒç´ ï¼‰ æ€è€ƒè¿™ä¸€é¢˜æ¯”å‰å‡ é¢˜éƒ½è¦ç®€å•ï¼Œç¬¬ä¸€æƒ³æ³•å°±ç”¨setå­˜å€¼ä¼šæœ‰æˆåŠŸä¸å¦åˆ¤æ–­æ¥ç®€å•è§£å†³ï¼Œä¸ç”¨å·¥å…·ç±»çš„è¯è¿˜æœ‰æš´åŠ›æ¯”è¾ƒé‚£å°±æ˜¯åŒæŒ‡é’ˆæ¯”è¾ƒé‡‡ç”¨åµŒå¥—å¾ªç¯ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯æ’å¥½åºå†æ¯”è¾ƒé‡å¤å°±æ˜¯æŒ¨ä¸ªäº†ä½¿ç”¨å½“å‰ä½ç½®æ¯”è¾ƒä¸Šä¸€ä¸ªåªéœ€è¦ä¸€æ¬¡éå†ã€‚ ä»£ç æ€»ç»“12345678910//æ–¹æ³•ä¸€public boolean containsDuplicate(int[] nums) &#123; Set set = new HashSet(); for(int i = 0; i &lt; nums.length; i++)&#123; if(!set.add(nums[i]))&#123; return true; &#125; &#125; return false;&#125; ç©ºé—´å¤æ‚åº¦ï¼šä½¿ç”¨äº†setç©ºé—´å ç”¨å°äºç­‰äºnï¼Œä¸ºO(n)æ—¶é—´å¤æ‚åº¦ï¼šå°±ä¸€æ¬¡éå†ä¸ºnæ¬¡ï¼Œä¸ºO(n) 12345678//æ–¹æ³•äºŒpublic boolean containsDuplicate(int[] nums) &#123; Arrays.sort(nums); for (int i = 1; i &lt; nums.length; i++) &#123; if (nums[i] == nums[i - 1]) return true; &#125; return false;&#125; ç©ºé—´å¤æ‚åº¦ï¼šæ²¡ç”¨é¢å¤–ç©ºé—´ï¼Œä¸ºO(1)æ—¶é—´å¤æ‚åº¦ï¼šæœ‰æ’åºçº¦nlognæ¬¡ã€æœ‰éå†ä¸ºnæ¬¡ï¼Œä¸ºO(nlogn)ã€‚ä¸»è¦å–å†³äºæ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå¹³å‡æœ€å¥½çš„å°±æ˜¯å¿«æ’nlog2n 123456789//æ–¹æ³•ä¸‰public boolean containsDuplicate(int[] nums) &#123; for (int i = 0; i &lt; nums.length-1; i++) &#123; for (int j = i+1; j &lt; nums.length; j++) &#123; if (nums[j] == nums[i]) return true; &#125; &#125; return false;&#125; ç©ºé—´å¤æ‚åº¦ï¼šæ²¡ç”¨é¢å¤–ç©ºé—´ï¼Œä¸ºO(1)æ—¶é—´å¤æ‚åº¦ï¼šåŒå±‚éå†ï¼Œå¤–å±‚éå†ä¸ºnæ¬¡ï¼Œå†…å±‚éå†æ¬¡æ•°é€æ­¥å‡å°‘ä¸ºå°äºn^2æ¬¡ï¼Œä¸ºO(n^2) æ€»ç»“æ€»ä½“æ¥è¯´å°±æ˜¯ä¸¤ç§æ€è·¯ï¼šä¸€ä¸ªåˆ©ç”¨setå­˜å€¼ä¸å®¹çº³é‡å¤ã€ä¸€ä¸ªå°±æ˜¯æ‰«ææ¯”è¾ƒï¼Œåœ¨æ‰«ææ¯”è¾ƒä¸­ä½¿ç”¨å…ˆæ’åºçš„æ–¹å¼ä¼˜ä¸€ç‚¹ç‚¹","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"Linuxå®‰è£…æœ€æ–°Mysql","slug":"Linuxå®‰è£…æœ€æ–°Mysql","date":"2020-09-12T06:55:39.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2020/09/12/Linuxå®‰è£…æœ€æ–°Mysql/","link":"","permalink":"http://yournotes.cn/2020/09/12/Linux%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0Mysql/","excerpt":"","text":"å‰è¨€ ä¹‹å‰è‡ªä¸ªéœ€è¦åœ¨deepinä¸‹å®‰è£…mysqlï¼Œç½‘ä¸Šå¤§å®¶éƒ½æ˜¯ç”¨è½¯ä»¶æºå®‰è£… sudo apt-get install -y mysql-server mysql-client æ˜¯å®‰è£…çš„æ˜¯mariaDBï¼Œå…³äºMySQLä¸mariaDBï¼ŒmariaDBæ˜¯MySQL5.7æºä»£ç çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œç”±äºOracleå…¬å¸ä¹°ä¸‹äº†Sunï¼Œåœ¨æ„è¯†åˆ°Oracleå¯èƒ½ä¼šå°†MySQLé—­æºï¼Œäºæ˜¯å…ˆåˆ†ç¦»å‡ºäº†MySQLçš„è¡ç”Ÿç‰ˆMariaDBã€‚è™½ç„¶å¤§éƒ¨åˆ†å…¼å®¹MySQLä½†æ˜¯è¿˜æ˜¯åœ¨æˆ‘çš„é¡¹ç›®å‡ºç°é—®é¢˜ï¼Œå› æ­¤è¿˜æ˜¯å»è£…ä¹‹å‰é¡¹ç›®ä½¿ç”¨çš„MySQL8ã€‚ ä¸‹è½½è¿›å…¥å®˜ç½‘ä¸‹è½½ ç‚¹å‡»è·³è½¬ è¿™é‡Œæˆ‘é€‰æ‹©çš„é€šç”¨åŒ…ä¸åŒç‰ˆæœ¬çš„éƒ½å¯ä»¥ç”¨ä¸‹é¢æ–¹å¼å®‰è£…ï¼Œä¹Ÿå¯ä»¥å¯¹åº”è‡ªå·±linuxç³»ç»Ÿè¿›è¡Œé€‰æ‹©ã€‚å½“ç„¶è¿™é‡Œåœ¨deepinä¸‹å®‰è£…ä¹Ÿå¯ä»¥é€‰æ‹©debian9çš„ç‰ˆæœ¬ç›´æ¥å®‰è£…debåŒ… æˆ–è€…ç›´æ¥ä¸‹debiançš„ï¼Œå¦‚æœæ˜¯çº¢å¸½ç³»åˆ—å°±æ˜¯rpm ä¸‹é¢åªä»‹ç»ä½¿ç”¨é€šç”¨å‹ç¼©åŒ…çš„å®‰è£…æ–¹å¼ å®‰è£…mysql è§£å‹å¹¶ç§»åŠ¨åˆ°&#x2F;usr&#x2F;local 1sudo tar -xvJf mysql-8.0.19-linux-glibc2.12-x86_64.tar.xz -C /usr/local åˆ›å»ºè½¯é“¾æ¥ 12cd /usr/localsudo ln -s mysql-8.0.19-linux-glibc2.12-x86_64 mysql æ·»åŠ mysqlç”¨æˆ·ç»„å’Œmysqlç”¨æˆ· 12sudo groupadd mysqlsudo useradd -r -g mysql -s /bin/false mysql åˆ›å»ºdataæ–‡ä»¶å¤¹å­˜æ”¾æ•°æ®åº“æ–‡ä»¶ 12cd /usr/local/mysqlsudo mkdir /usr/local/mysql/data ä¿®æ”¹å½“å‰ç›®å½•æ‹¥æœ‰è€…ä¸ºæ–°å»ºçš„mysqlç”¨æˆ· 1sudo chown -R mysql:mysql ./ åˆå§‹åŒ–å®‰è£… 1sudo ./bin/mysqld --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --initialize åƒä¸‡åœ¨è¿™é‡Œè®°ä¸‹åˆå§‹åŒ–å¯†ç ï¼Œ8.2å‡ ç‰ˆæœ¬æ²¡æœ‰æŸ¥çœ‹åˆå§‹å¯†ç çš„åœ°æ–¹ï¼ˆè™½ç„¶æœ‰é…ç½®å¯ä»¥è¶Šè¿‡å¯†ç ï¼‰ å¼€å¯æœåŠ¡ 12cd /usr/local/mysql-8.0.19-linux-glibc2.12-x86_64/support-files sudo ./mysql.server start ä½¿ç”¨åˆå§‹å¯†ç å·²ç»å¯ä»¥ç™»é™†äº† è®¾ç½®å¯†ç  1alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;; æ€»ç»“æ€»ä¹‹å‘¢å°±æ˜¯ä¸‹è½½è§£å‹å®‰è£…è®¾å¯†ç ï¼ˆä¸­é€”æœ‰äº›æƒé™è¿˜æœ‰è½¯è¿æ¥è·¯å¾„è®¾å®šæ˜¯å¿…è¦çš„ï¼‰ï¼Œå¯¹äºdeepinç³»ç»Ÿæ¥è¯´çš„è¯ç›´æ¥ä½¿ç”¨debian9çš„debåŒ…è¿›è¡Œå®‰è£…å³å¯æ›´åŠ ç®€å•","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"è®°å½•","slug":"æ—¥å¸¸/è®°å½•","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š189.æ—‹è½¬æ•°ç»„","slug":"æ—‹è½¬æ•°ç»„","date":"2020-09-11T04:10:33.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/09/11/æ—‹è½¬æ•°ç»„/","link":"","permalink":"http://yournotes.cn/2020/09/11/%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84/","excerpt":"æ—‹è½¬æ•°ç»„é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/rotate-array/ ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°ã€‚","text":"æ—‹è½¬æ•°ç»„é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/rotate-array/ ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°ã€‚ ç¤ºä¾‹ 1: 123456è¾“å…¥: [1,2,3,4,5,6,7] å’Œ k = 3è¾“å‡º: [5,6,7,1,2,3,4]è§£é‡Š:å‘å³æ—‹è½¬ 1 æ­¥: [7,1,2,3,4,5,6]å‘å³æ—‹è½¬ 2 æ­¥: [6,7,1,2,3,4,5]å‘å³æ—‹è½¬ 3 æ­¥: [5,6,7,1,2,3,4] ç¤ºä¾‹ 2: 12345è¾“å…¥: [-1,-100,3,99] å’Œ k = 2è¾“å‡º: [3,99,-1,-100]è§£é‡Š: å‘å³æ—‹è½¬ 1 æ­¥: [99,-1,-100,3]å‘å³æ—‹è½¬ 2 æ­¥: [3,99,-1,-100] è¯´æ˜: å°½å¯èƒ½æƒ³å‡ºæ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘æœ‰ä¸‰ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ è¦æ±‚ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º O(1) çš„ åŸåœ° ç®—æ³•ã€‚ é¢˜ç›®ä¿¡æ¯è¾“å…¥ï¼šæ•°ç»„numsã€æ•´æ•°k è¾“å‡ºï¼šä¿®æ”¹æ•°ç»„ï¼ˆnumså‘å³ç§»åŠ¨kä½ï¼‰ é¢å¤–æ¡ä»¶ï¼šç©ºé—´å¤æ‚åº¦O(1) æ€è€ƒé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ç›´æ¥è®¾ç½®æœ€ç»ˆå€¼ï¼ŒåŸåœ°ä¿®æ”¹æ•°æ®ä¼šä¸¢å¤±æ‰€ä»¥æ·»åŠ å¤‡ä»½å˜é‡backupã€‚å¤‡ä»½å€¼å³åŸå…ˆå€¼åœ¨ç§»åŠ¨æ—¶ä¹Ÿéœ€è¦ä¸ç›®çš„åœ°æ•°ç»„å€¼åšäº¤æ¢åˆ™å†éœ€è¦ä¸€ä¸ªä¸­é—´å€¼temp ä»¥ç¤ºä¾‹1æ•°ç»„æ¼”ç¤º 123456789101112131415[1,2,3,4,5,6,7] k=3//å…ˆåŸç¬¬1ä½ç§»åŠ¨ä¸‰ä½åˆ°ç¬¬4ä½[1,2,3,1,5,6,7] backup = 4//å†ç§»åŠ¨åŸç¬¬4ä½å€¼ç§»åŠ¨åˆ°ç¬¬7ä½[1,2,3,1,5,6,4] backup = 7//å†ç§»åŠ¨åŸç¬¬7ä½å€¼ç§»åŠ¨åˆ°ç¬¬3ä½[1,2,7,1,5,6,4] backup = 3//å†ç§»åŠ¨åŸç¬¬3ä½å€¼ç§»åŠ¨åˆ°ç¬¬6ä½[1,2,7,1,5,3,4] backup = 6//å†ç§»åŠ¨åŸç¬¬6ä½å€¼ç§»åŠ¨åˆ°ç¬¬2ä½[1,6,7,1,5,3,4] backup = 2//å†ç§»åŠ¨åŸç¬¬2ä½å€¼ç§»åŠ¨åˆ°ç¬¬5ä½[1,6,7,1,2,3,4] backup = 5//å†ç§»åŠ¨åŸç¬¬5ä½å€¼ç§»åŠ¨åˆ°ç¬¬1ä½[5,6,7,1,2,3,4] backup = 1 æœ€åå¾ªç¯åˆ°è®¾ç½®ç¬¬ä¸€ä½ï¼Œç»“æŸæ‰€æœ‰å€¼ç§»åŠ¨å®Œæ¯•ã€‚ ä½†è¿™æ ·çš„è¿‡ç¨‹å…¶å®æœ‰ä¸ªé—®é¢˜ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½èƒ½ä¸€æ¬¡å¾ªç¯ç§»åŠ¨æ‰€æœ‰å…ƒç´ ã€‚ä¸¾ä¸¤ä¸ªä¾‹å­ï¼š ç¤ºä¾‹ä¸€çš„æƒ…å†µä¸€æ¬¡å¾ªç¯å°±ç§»åŠ¨çš„æ‰€æœ‰å…ƒç´ ï¼Œä½†ä¸Šé¢ä¸¤ä¸ªä¾‹å­ä»ç¬¬ä¸€ä½å‡ºå‘åˆ°æœ€åè®¾ç½®ç¬¬ä¸€ä½å®Œæˆå¾ªç¯ä½†å¹¶æ²¡æœ‰è®¾ç½®å®Œæ‰€æœ‰å…ƒç´ ã€‚ä¸€ä¸ªè¦ç”¨ä¸¤æ¬¡å¾ªç¯ä¸€ä¸ªä¸‰æ¬¡ã€‚è¿™æ ·å»ä½¿ç”¨ä¸€ä¸ªä¸­é—´å˜é‡å»å¾ªç¯è®¾å€¼éœ€è¦å¤šå°‘ä¸ªå¾ªç¯å–å†³äºæ•°ç»„é•¿åº¦ä¸kçš„æœ€å¤§å…¬çº¦æ•°ã€‚ è¿™æ ·æ€è·¯å¤§ä½“å½¢æˆï¼Œæ˜¯ä¸€ä¸ªåŒå¾ªç¯ã€‚é‚£ä¹ˆæ‰¾åˆ°åŒå¾ªç¯çš„å‡ºå¾ªç¯æ¡ä»¶ï¼Œå°å¾ªç¯ç»“æŸæ¡ä»¶åˆ™æ˜¯ä¸‹ä¸€æ­¥è¦ç§»åŠ¨çš„å…ƒç´ ç´¢å¼•å°±æ˜¯ç¯çŠ¶æ›¿æ¢çš„å¼€å§‹ç´¢å¼•ï¼Œæ¡ä»¶æ¯”è¾ƒå³ä½¿ç”¨whileå¾ªç¯ã€‚å¤–å±‚å¾ªç¯æ¡ä»¶ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥è§£å†³ä¸€ç§å°±æ˜¯å¾—åˆ°lengthä¸kå…¬çº¦æ•°ï¼Œç¬¬äºŒç§ä½¿ç”¨countè®¡æ•°ï¼Œç”±äºæœ€åæ˜¯æ•°ç»„å…ƒç´ å…¨éƒ¨ç§»åŠ¨æ‰€ä»¥ä¼šç§»åŠ¨lengthæ¬¡ï¼Œå°å¾ªç¯é‡Œæ¯å®Œæˆä¸€æ¬¡è®¾å€¼countç´¯åŠ ï¼Œå°å¾ªç¯å®Œåæ¥åˆ°å¤–å±‚å¾ªç¯å¦‚æœcountå°äºlengthåˆ™è¿˜æœ‰ä¸‹ä¸€ç»„å¾ªç¯ã€‚å…¨éƒ¨å®Œæˆæœ€ç»ˆcountæ˜¯ä¸€å®šç­‰äºlengthçš„ï¼Œå‡ºå¾ªç¯ç»“æŸã€‚ 12345678910111213//è¿™é‡Œæä¾›ä¸€ä¸ªæ±‚æœ€å¤§å…¬çº¦æ•°çš„è¾—è½¬ç›¸é™¤æ³•int maxNumber(int m, int n) &#123; int temp; if (n &gt; m) &#123; temp = n; n = m; m = temp; &#125; if (m % n == 0) &#123; return n; &#125; return maxNumber(n, m % n);&#125; 123456789101112131415161718192021public void rotate(int[] nums, int k) &#123; int len = nums.length; for(int start = 0; start &lt; maxNumber(len,k); start++)&#123; /* è®¾ç½®å½“å‰å…ƒç´ ç´¢å¼• å°†å½“å‰å…ƒç´ å¤‡ä»½ */ int current = start; int backup = nums[current]; do&#123; //è®¡æ•°æœ€ç»ˆç§»åŠ¨çš„ç´¢å¼• int next = (current + k) % len; //å½“å‰å…ƒç´ åŸæ¥å€¼backupä¸ç›®çš„åœ°å…ƒç´ äº¤æ¢ int temp = nums[next]; nums[next] = backup; backup = temp; //äº¤æ¢å®Œæ¯•æ›´æ–°å½“å‰ç´¢å¼• current = next; &#125;while(start != current); &#125;&#125; ä¸Šé¢å¤–å¾ªç¯ä»¥å…¬çº¦æ•°ä¸ºæ¡ä»¶å³å·²çŸ¥å¾ªç¯æ¬¡æ•°å®Œæˆï¼Œä¸‹é¢ä½¿ç”¨countåœ¨å°å¾ªç¯é‡Œè®¡æ•°åœ¨å¤–å¾ªç¯åˆ¤æ–­å®Œæˆ æ–¹å¼ä¸€12345678910111213141516public void rotate(int[] nums, int k) &#123; int count = 0; int len = nums.length; for(int start = 0; count &lt; len; start++)&#123; int current = start; int backup = nums[current]; do&#123; int next = (current + k) % len; int temp = nums[next]; nums[next] = backup; backup = temp; current = next; count++; &#125;while(start != current); &#125;&#125; è¿™æ ·ç¯çŠ¶æ›¿æ¢çš„è§£å†³æ–¹å¼æ˜¯æœ€å…ˆæƒ³åˆ°çš„ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼çœ‹é¢˜ç›®ç¤ºä¾‹å°±å¯ä»¥getåˆ°è¿™ä¸ªæ–¹å‘ã€‚ä¹Ÿå°±æ˜¯è§£å†³æ•´ä½“ç§»åŠ¨ä¸€æ¬¡çš„é€»è¾‘ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¾ªç¯å°±å®Œäº†ã€‚æ•´ä½“ç§»åŠ¨ä¸€æ¬¡æ—¶é—´å¤æ‚åº¦å°±ä¸ºnç„¶åå®Œæˆnæ¬¡ã€‚æ¯”ä¸Šé¢çš„ç®—æ³•å°±å¤æ‚åº¦æ¥çœ‹å·®ä¸€äº›ã€‚å®Œæˆæ•´ä½“ç§»åŠ¨ä¸€æ¬¡ä½¿ç”¨äº¤æ¢æ³•å³å¯ï¼ˆç”¨å¤‡ä»½å€¼æ–¹å¼ä»…ä»…å¤šäº†å˜é‡ä¸ä¼šå½±å“æ—¶é—´å¤æ‚åº¦ï¼‰ã€‚ 123456//æ¯æ¬¡ä½¿ç”¨æœ€åä½ä¸iä½è¿›è¡Œäº¤æ¢ï¼Œi++[1,2,3,4,5] 1&lt;==&gt;5[5,2,3,4,1] 2&lt;==&gt;1[5,1,3,4,2] 3&lt;==&gt;2[5,1,2,4,3] 4&lt;==&gt;3[5,1,2,3,4] 12345for (int j = 0; j &lt; len; j++) &#123; temp = nums[j]; nums[j] = nums[len-1]; nums[len-1] = temp;&#125; é‚£ä¹ˆæœ‰äº†è¿™æ ·ä¸€ä¸ªç§»åŠ¨ä¸€æ¬¡çš„ä»£ç ï¼Œå†ç»“åˆKå¤–å±‚å¾ªç¯ æ–¹å¼äºŒ12345678910public void rotate(int[] nums, int k) &#123; int temp; for (int i = 0; i &lt; k; i++) &#123; for (int j = 0; j &lt; nums.length; j++) &#123; temp = nums[j]; nums[j] = nums[nums.length-1]; nums[nums.length-1] = temp; &#125; &#125;&#125; æœ€åè¿˜æœ‰ä¸€ä¸ªåè½¬æ³•ï¼Œè·³å¼€è®¾ç½®å€¼çš„æ€è·¯ï¼Œé€šè¿‡åˆ«çš„ç®—æ³•ç»„åˆä¹Ÿèƒ½è¾¾åˆ°ç›®æ ‡æƒ…å†µï¼Œåœ¨åˆé«˜ä¸­æ•°å­¦å½“ä¸­ä¹Ÿæ˜¯å¸¸å¸¸æœ‰çŸ¥é“ä¸€ä¸ªå¼å­çš„å€¼æ±‚ä¸€ä¸ªå¾ˆé•¿çš„å¼å­è€Œä¸ç”¨æŠŠç¬¬ä¸€ä¸ªå¼å­è§£å¼€è€Œæ˜¯å°†æœ€ç»ˆå¼å­åŒ–æˆå·²çŸ¥å¼å­çš„ç»„åˆæœ€ç»ˆç®€å•æ±‚è§£ã€‚åœ¨è¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·ä¸€ä¸ªåè½¬ç®—æ³•è¿™æ ·çš„ç®—æ³•å¾ˆç®€å• 12345678while (i &lt; j) &#123; int temp = nums[i]; nums[1] = nums[j]; nums[j] = temp; i++; j--;&#125; è§‚å¯Ÿæˆ‘ä»¬çš„è¦å¾—åˆ°çš„ä¸€ä¸ªç»“æœ 123//nums = [1 2 3 4 5 6], k=31 2 3 4 5 64 5 6 1 2 3 å¯ä»¥é€šè¿‡åè½¬çš„ç»„åˆå®ç° 12341 2 3 4 5 66 5 4 3 2 1 å…¨åè½¬4 5 6 3 2 1 0åˆ°k-1åè½¬4 5 6 1 2 3 kåˆ°len-1åè½¬ è¿™æ ·å°±æœ‰æ–°çš„æ–¹å¼è§£å†³ï¼Œè¿œè¿œæ¯”ç›´æ¥å¸¦å€¼è¦å¿«ï¼ˆäººè„‘å±‚é¢ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å½“ç„¶è¿˜æ˜¯å’Œæ–¹æ³•ä¸€æ˜¯ç›¸åŒçš„ æ–¹å¼ä¸‰1234567891011121314151617public void reverse(int[] nums, int start, int end) &#123; while (start &lt; end) &#123; int temp = nums[start]; nums[start] = nums[end]; nums[end] = temp; start++; end--; &#125;&#125;public void rotate(int[] nums, int k) &#123; k %= nums.length; reverse(nums, 0, nums.length - 1); reverse(nums, 0, k - 1); reverse(nums, k, nums.length - 1);&#125;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII","slug":"ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII","date":"2020-09-10T04:32:43.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/09/10/ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII/","link":"","permalink":"http://yournotes.cn/2020/09/10/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BAII/","excerpt":"ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/ ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚","text":"ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIé¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/ ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚ **æ³¨æ„ï¼š**ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚ ç¤ºä¾‹ 1: 1234567è¾“å…¥: [7,1,5,3,6,4]è¾“å‡º: 7è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ -1 + 5 = 4 ã€‚éšåï¼Œåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ -3 + 5 = 3 ã€‚ ç¤ºä¾‹ 2: 1234è¾“å…¥: [1,2,3,4,5]è¾“å‡º: 4è§£é‡Š: åœ¨ç¬¬ 1 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1 = 4 ã€‚æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨ç¬¬ 1 å¤©å’Œç¬¬ 2 å¤©æ¥è¿è´­ä¹°è‚¡ç¥¨ï¼Œä¹‹åå†å°†å®ƒä»¬å–å‡ºã€‚å› ä¸ºè¿™æ ·å±äºåŒæ—¶å‚ä¸äº†å¤šç¬”äº¤æ˜“ï¼Œä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚ ç¤ºä¾‹ 3: 123è¾“å…¥: [7,6,4,3,1]è¾“å‡º: 0è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚ é—®é¢˜ä¿¡æ¯è¾“å…¥ï¼šæ•°ç»„ï¼ˆè¡¨ç¤ºå‡ å¤©çš„è‚¡ä»·ï¼‰ è¾“å‡ºï¼šæ•´æ•°ï¼ˆä¸åŒä¹°è¿›å–å‡ºçš„ç»„åˆæ‰¾åˆ°æœ€å¤§åˆ©æ¶¦ï¼‰ é¢å¤–æ¡ä»¶ï¼šä¹°å’Œå–å¯ä»¥å¤šæ¬¡ä½†å¿…é¡»äº¤æ›¿è¿›è¡Œ æ€è€ƒ å¯å¤šæ¬¡ä¹°è¿›å–å‡ºä½†å¿…é¡»äº¤æ›¿ä¿æŒä¸€æ¬¡äº¤æ˜“ï¼Œç´¯è®¡æœ€å¤§çš„åœºæ™¯å®é™…å°±ä¸ºæ³¢å·®ä¹‹å’Œã€‚å¯¹äºä¾‹1æ¥è¯´å°±æ˜¯2-3å¤©çš„å·®åŠ ä¸Š4-5å¤©çš„å·® ç¤ºä¾‹ 4: 123è¾“å…¥: [7,1,2,4,2,4,3]è¾“å‡º: 5è§£é‡Šï¼šå¦‚ä¸‹å›¾2-4ï¼Œ5-6ä¸¤æ®µæ—¶é—´çš„ä»·æ ¼å·®ä¹‹å’Œå³ä½æœ€é«˜åˆ©æ¶¦ é‚£ä¹ˆä¹Ÿå°±æ˜¯éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆä¸€ä¸ªæ ‡è®°ä½ä½ï¼Œä¸€ä¸ªå¾€åæ‰«ææ¯æ¬¡ç§»åŠ¨å¹¶ä¸ä¹‹å‰æ¯”è¾ƒã€‚å½“æ‰«ææŒ‡é’ˆå½“å‰æ¯”å‰ä¸€ä¸ªè¦å°åˆ™ç§»åŠ¨ä½ä½æŒ‡é’ˆåˆ°å½“å‰æ‰«ææŒ‡é’ˆã€‚ æ€»ç»“ä»£ç 123456789101112131415int i = 0;//ä½ä½æŒ‡é’ˆint nums = 0;//åˆ©æ¶¦for(int j = 1; j &lt; prices.length; j++)&#123; /* å½“å‡ºç°ä¸‹é™åˆ™ç”¨å‰ä¸€ä¸ªé«˜å³°å‡ä½ä½æŒ‡é’ˆï¼Œå†ç§»åŠ¨ä½ä½æŒ‡é’ˆ ä½†åˆ°æ•°ç»„ç»“æŸæœ‰å¯èƒ½ä¸å‡ºç°ä½ä½ä¸€ç›´å¢é•¿å°±æœ‰else if */ if(prices[j]&lt;prices[j-1])&#123; nums += prices[j-1]-prices[i]; i = j; &#125;else if(j == prices.length)&#123; nums += prices[j]-prices[i]; &#125;&#125;return nums;","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"LeetCodeåˆçº§ç®—æ³•ä¹‹æ•°ç»„ï¼š26.åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹","slug":"åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹","date":"2020-09-09T10:24:47.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/09/09/åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹/","link":"","permalink":"http://yournotes.cn/2020/09/09/%E5%88%A0%E9%99%A4%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E9%A1%B9/","excerpt":"åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/ ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„ï¼Œä½ éœ€è¦åœ¨ åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œè¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚","text":"åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹é¢˜ç›®åœ°å€ï¼šhttps://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/ ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„ï¼Œä½ éœ€è¦åœ¨ åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œè¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚ ç¤ºä¾‹ 1: 12345ç»™å®šæ•°ç»„ nums = [1,1,2], å‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2, å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2ã€‚ ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚ ç¤ºä¾‹ 2: 12345ç»™å®š nums = [0,0,1,1,1,2,2,3,3,4],å‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5, å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 0, 1, 2, 3, 4ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚ é—®é¢˜ä¿¡æ¯ è¾“å…¥ï¼šå·²æ’å¥½åºçš„æ•°ç»„ è¾“å‡ºï¼šå»é‡åæ–°æ•°ç»„çš„é•¿åº¦ é¢å¤–æ¡ä»¶ï¼šä¸åˆ›å»ºé¢å¤–ç©ºé—´ç›´æ¥ä¿®æ”¹åŸæ•°ç»„å»é‡ï¼Œä¸è€ƒè™‘æ–°æ•°ç»„é•¿åº¦ä¹‹åçš„å…ƒç´  æ€è€ƒå¾ˆæ˜¾ç„¶éœ€è¦éå†æ‰«æé‡å¤é¡¹ï¼Œåœ¨å…ƒç´ ä¸åŒçš„æ—¶å€™è®¾ç½®å€¼ã€‚é‚£ä¹ˆéœ€è¦ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆiçš„åŠŸèƒ½æ˜¯è®¾ç½®å€¼çš„ä½ç½®ä¸‹æ ‡å½“å‰ä½ç½®è®¾ç½®å€¼ååŠ 1ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆjæ‰«é¢å…¨éƒ¨åˆ¤æ–­æ˜¯å¦é‡å¤è‹¥ä¸é‡å¤åˆ™åœ¨iæŒ‡é’ˆçš„åœ°æ–¹å­˜ä¸‹æ¯æ¬¡åŠ 1ã€‚ 1234567891011/*ç»™å®š nums = [0,0,1,1,1,2,2,3,3,4]ï¼Œç¬¬ä¸€ä½æ˜¯ç›´æ¥ä¸å˜ï¼Œä»ç¬¬äºŒä½æ‰å¼€å§‹éœ€è¦åˆ¤æ–­*/nums[1] == nums[0] ç›¸ç­‰ nums[2] == nums[0] ä¸ç›¸ç­‰ å­˜ä¸‹ç¬¬äºŒä½ num[1] = nums[2]nums[3] == nums[1] ç›¸ç­‰nums[4] == nums[1] ç›¸ç­‰nums[5] == nums[1] ä¸ç›¸ç­‰ å­˜ä¸‹ç¬¬ä¸‰ä½ nums[2] = nums[5]nums[6] == nums[2] ç›¸ç­‰...... ä»£ç 12345678int i = 0ï¼›for(int j = 1; j &lt; nums.length; j++)&#123; if(nums[j] != nums[i])&#123; i++; nums[i] = nums[j]; &#125;&#125;return i+1 é¦–å…ˆæ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„æ‰€ä»¥è®¾ç½®ä¸é‡å¤çš„å€¼ååé¢çš„å€¼è¿˜æ˜¯å­˜åœ¨çš„ï¼ŒæŒ‰ç…§é¢˜æ„ä¸å»åˆ›å»ºæ–°æ•°ç»„åªè¦å¾—åˆ°æ–°æ•°ç»„çš„å¤§å°å³å¯ï¼ŒæŒ‰ç…§ä¾‹å­å»é‡ååŸæ•°ç»„nums &#x3D; [0,1,2,3,4,2,2,3,3,4]ã€‚å®é™…ä¸Šå°±æ˜¯å¾—åˆ°éå†å®Œä¹‹åå‘ä½iå°±æ˜¯æ–°æ•°ç»„çš„æœ€åä¸€ä½å®ƒåŠ ä¸€ä¹Ÿå°±æ˜¯æ–°æ•°ç»„é•¿åº¦","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"}]},{"title":"githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜","slug":"githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜","date":"2020-09-06T05:54:35.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2020/09/06/githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜/","link":"","permalink":"http://yournotes.cn/2020/09/06/github%E4%B8%8A%E4%BC%A0ssh-key%E5%90%8E%E4%BB%8D%E9%A1%BB%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜å‡ºç°è¿™ç§é—®é¢˜æ˜¯æœ¬åœ°cloneçš„ä»“åº“ä½¿ç”¨çš„httpsçš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼è¿æ¥æœåŠ¡å°±ä¼šä½¿ç”¨ç”¨æˆ·åå¯†ç çš„æ–¹å¼ã€‚","text":"githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜å‡ºç°è¿™ç§é—®é¢˜æ˜¯æœ¬åœ°cloneçš„ä»“åº“ä½¿ç”¨çš„httpsçš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼è¿æ¥æœåŠ¡å°±ä¼šä½¿ç”¨ç”¨æˆ·åå¯†ç çš„æ–¹å¼ã€‚ 1git clone https://github.com/name/project.git æˆ‘ä»¬æ·»åŠ äº†ssh-keyä¹‹åæ˜¯å¸Œæœ›ä½¿ç”¨sshè¿æ¥ï¼Œæ‰€ä»¥è¦ç”¨ä¸‹é¢çš„sshçš„cloneæ–¹å¼ 1git clone git@github.com:name/project.git ä½†å¾€å¾€æˆ‘ä»¬çš„ä»“åº“æ˜¯å·²ç»ä»¥httpsçš„æ–¹å¼cloneä¸‹æ¥äº†ï¼Œç°åœ¨æƒ³ç”¨sshè¿æ¥ã€‚è¿™é‡Œä¹Ÿæ˜¯å¯ä»¥ç›´æ¥å»æ”¹é…ç½®æ–‡ä»¶.&#x2F;git&#x2F;configå½“ä¸­æ”¹urlè¿™ä¸€é¡¹æŠŠhttpsçš„é“¾æ¥æ”¹ä¸ºsshçš„ 1234567891011[core] repositoryformatversion = 0 filemode = true bare = false logallrefupdates = true[remote &quot;origin&quot;] url = git@github.com:xxx/xxx fetch = +refs/heads/*:refs/remotes/origin/*[branch &quot;xxx&quot;] remote = origin merge = refs/heads/xxx","categories":[{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"Spring beançš„ç”Ÿå‘½å‘¨æœŸ","slug":"Spring-beançš„ç”Ÿå‘½å‘¨æœŸ","date":"2020-08-29T08:08:13.000Z","updated":"2025-04-17T08:34:52.017Z","comments":true,"path":"2020/08/29/Spring-beançš„ç”Ÿå‘½å‘¨æœŸ/","link":"","permalink":"http://yournotes.cn/2020/08/29/Spring-bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","excerpt":"æ¦‚è¿°Springæ˜¯ä¸€ä¸ªè½»é‡çº§æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨æ¡†æ¶ã€‚å› æ­¤å…³äºbeançš„ç”Ÿæˆè¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸæ˜¯é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚ä¹Ÿæ˜¯åœ¨å¯¹Springçš„è®¤è¯†çš„é‡è¦è€ƒå¯Ÿç‚¹ã€‚åœ¨ä¼ ç»Ÿçš„Javaåº”ç”¨ä¸­ï¼Œbeançš„ç”Ÿå‘½å‘¨æœŸå¾ˆç®€å•","text":"æ¦‚è¿°Springæ˜¯ä¸€ä¸ªè½»é‡çº§æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨æ¡†æ¶ã€‚å› æ­¤å…³äºbeançš„ç”Ÿæˆè¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸæ˜¯é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚ä¹Ÿæ˜¯åœ¨å¯¹Springçš„è®¤è¯†çš„é‡è¦è€ƒå¯Ÿç‚¹ã€‚åœ¨ä¼ ç»Ÿçš„Javaåº”ç”¨ä¸­ï¼Œbeançš„ç”Ÿå‘½å‘¨æœŸå¾ˆç®€å•ï¼Œä½¿ç”¨Javaå…³é”®å­— new è¿›è¡ŒBean çš„å®ä¾‹åŒ–ï¼ˆå®ä¾‹åŒ–æ—¶å¯ä½¿ç”¨æœ‰å‚æ„é€ æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ–è€…å®ä¾‹åŒ–åä½¿ç”¨setæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼‰ï¼Œç„¶åè¯¥Bean å°±èƒ½å¤Ÿä½¿ç”¨äº†ã€‚ä¸€æ—¦beanä¸å†è¢«ä½¿ç”¨ï¼Œåˆ™ç”±Javaè‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSpringç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸå°±å¤æ‚å¤šäº†ï¼Œæ­£ç¡®ç†è§£Bean çš„ç”Ÿå‘½å‘¨æœŸéå¸¸é‡è¦ï¼Œå› ä¸ºSpringå¯¹Beançš„ç®¡ç†å¯æ‰©å±•æ€§éå¸¸å¼ºã€‚å› æ­¤åœ¨è¿™é‡Œåšä¸€ä¸ªæ¢³ç†åˆ†æbeançš„ç”Ÿå‘½å‘¨æœŸã€‚ beanæ€ä¹ˆç”Ÿæˆbeanå³æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå»ç”Ÿæˆä¸€ä¸ªå¯¹è±¡å‘¢ã€‚æ¯”å¦‚åˆ›å»ºUserç±»çš„å¯¹è±¡é‚£ä¹ˆé¦–å…ˆæ˜¯éœ€è¦ä¸€ä¸ªUser classï¼Œç„¶åç›´æ¥å»newæœ€åå†å®Œæˆèµ‹å€¼åˆå§‹åŒ–å¯¹è±¡ 1234567@Componentclass User&#123; @Autowired private Dog dog; private String beanName; ...&#125; 123User user = new User();user.setDog(new Dog());user.setBeanName(&quot;user&quot;); é‚£ç°åœ¨ä½¿ç”¨Springè¿™ä¸ªbeanæ˜¯äº¤ç”±Springå»ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä»Springå®¹å™¨å»æ‹¿åˆ° 1User user = context.getBean(&quot;user&quot;,User.class) å› æ­¤å®ƒå·²ç»ç”Ÿæˆå¥½äº†æˆ‘ä»¬æ‰èƒ½æ‹¿åˆ°ã€‚é‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆç”Ÿæˆçš„å‘¢ï¼Œéš¾é“æ˜¯åœ¨æºç é‡Œå»new User()ä¹ˆï¼Ÿé‚£è‚¯å®šä¸ä¼šè¿™æ ·å»å†™å®ƒæ˜¯é€šè¿‡åå°„å»è°ƒç”¨æ„é€ æ–¹æ³•å¾—åˆ°çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯æœ€åˆçš„å¯¹è±¡userBeané‡Œé¢çš„å±æ€§è¿˜æ²¡èµ‹å€¼ã€‚æ‰€ä»¥ä¹‹åè¿˜ä¼šè¿›è¡Œä¾èµ–æ³¨å…¥å°†åˆ›å»ºå¥½çš„å¯¹è±¡é‡Œé¢çš„å±æ€§è¿›è¡Œèµ‹å€¼ä¹Ÿæ˜¯é€šè¿‡åå°„çš„æ–¹å¼è¶Šè¿‡ç§æœ‰ç›´æ¥èµ‹å€¼ã€‚ 123Field field = userBean.getClass().getDeclaredField(&quot;dog&quot;);field.setAccessible(true);field.set(userBean, dogBean); åˆ°è¿™é‡Œå¥½åƒå°±å®Œæ•´çš„åˆå§‹åŒ–å¥½äº†éœ€è¦çš„å¯¹è±¡ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸å¤Ÿçš„ï¼Œä¾èµ–æ³¨å…¥å¹¶æ²¡æœ‰åŠæ³•ç»™ä¸Šé¢Userç±»çš„beanNameèµ‹å€¼ã€‚å®ƒåªèƒ½åœ¨æ± ä¸­æ‰¾åˆ°ç±»å‹ä¸€æ ·çš„beanæˆ–è€…å’Œå±æ€§åç›¸åŒbeanNameçš„beanï¼Œæ‹¿è¿™æ ·çš„beanè¿›èµ‹å€¼ã€‚ä½†è¿™é‡Œå±æ€§èµ‹å€¼çš„æ˜¯å½“å‰beançš„beanNameè€Œä¸æ˜¯åŒ¹é…å…¶ä»–beanã€‚åœ¨è¿™é‡Œå¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥å°±åˆå§‹åŒ–çš„å±æ€§å®ƒä»¬çš„èµ‹çš„å€¼å°±æ˜¯å·²ç»è¢«Springç®¡ç†çš„beanã€‚ä½†æœ‰äº›å±æ€§å®ƒä»¬æ˜¯åœ¨Springå•ä¾‹æ± æ‰¾ä¸åˆ°çš„ï¼Œå®ƒä»¬å¯èƒ½æ˜¯æŸä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²ï¼Œæœ‰å¯èƒ½æ˜¯æŸäº›ç‰¹æ®Šçš„å¯¹è±¡ã€‚ è¿™ä¸ªæ—¶å€™Springä¹Ÿæä¾›äº†æ–¹å¼å»ä¼ å…¥ï¼Œä¾èµ–æ³¨å…¥ä¹‹ååˆ¤æ–­æ˜¯å¦å®ç°awareæ¥å£ï¼ˆBeanNameAwareã€BeanFactoryAwareâ€¦.ï¼‰ã€‚å¦‚æœæœ‰åˆ™è°ƒç”¨æ¥å£å¯¹åº”çš„setæ–¹æ³•å¹¶ä¼ å…¥å¯¹åº”æ•°æ®ã€‚å› æ­¤å½“beanç±»å½“ä¸­æœ‰æŸäº›å±æ€§æ˜¯éå•ä¾‹æ± ä¸­çš„æ— æ³•é€šè¿‡ä¾èµ–æ³¨å…¥èµ‹å€¼ï¼Œä½†è¿™äº›å€¼æ˜¯Springä¸­å…·æœ‰çš„å°±å¯ä»¥é€šè¿‡Springæä¾›çš„ä¸€äº›awareæ¥å£çš„æ–¹å¼è®©springè‡ªå·±å»ä¼ å…¥é‚£äº›å€¼ç„¶åæˆ‘ä»¬åœ¨æ–¹æ³•ä½“ä¸­å®šä¹‰èµ‹å€¼ã€‚ 12345678910111213141516@Componentclass User implements BeanNameAware&#123; @Autowired private Dog dog; private String beanName; /* æ–¹æ³•åœ¨ä¾èµ–æ³¨å…¥åä¼šè¢«æ‰§è¡Œ å¹¶ä¸”å°†å½“å‰beanNameä½œä¸ºå‚æ•°ä¼ å…¥ æ–¹æ³•ä½“è‡ªå®šä¹‰ï¼ˆè¿™é‡Œèµ‹å€¼ç»™ä¸Šé¢å±æ€§ï¼‰ */ @override public void setBeanName(String name)&#123; this.beanName = name; &#125; ...&#125; é™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ—¢ä¸æ˜¯beanå®¹å™¨ä¸­çš„ï¼Œä¹Ÿä¸æ˜¯Springå«æœ‰çš„ä¸€äº›æ•°æ®ã€‚é‚£ä¹ˆå°±ä¸èƒ½ä¾èµ–æ³¨å…¥ï¼Œä¹Ÿæ²¡æœ‰awareä¼ å…¥ã€‚å®ƒéœ€è¦ä½ è‡ªå·±ä¼ å…¥æ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“èµ‹å€¼æˆ–è€…å…¶ä»–çš„è‡ªå®šä¹‰æ“ä½œå–å€¼ç„¶åèµ‹å€¼ã€‚è¿™å°±æœ‰ç¬¬å››ä¸ªé˜¶æ®µåˆå§‹åŒ– 1234567891011121314151617@Componentclass User implements InitializingBean&#123; @Autowired private Dog dog; private String userName; private int age; /* æ–¹æ³•åœ¨awareå¤„ç†å®Œåä¼šè¢«æ‰§è¡Œ æ–¹æ³•ä½“è‡ªå®šä¹‰ï¼ˆè¿™é‡Œèµ‹å€¼ç»™ä¸Šé¢å±æ€§ï¼‰ */ @override public void afterPropertiesSet() throws Exception&#123; //this.userName = &quot;å¼ ä¸‰&quot;; //this.age = 18; &#125; ...&#125; åƒä¸Šé¢ä¸¤ä¸ªå±æ€§usernameä¸ageå°±æ˜¯ä¸èƒ½é€šè¿‡autowiredæˆ–è€…awrareå®Œæˆèµ‹å€¼çš„ã€‚springæä¾›InitializingBeanåˆå§‹åŒ–æ¥å£ï¼Œå½“beançš„ç”Ÿæˆä»æ–°å»ºåˆ°ä¾èµ–æ³¨å…¥å†åˆ°awareåˆ¤æ–­å¤„ç†ä¹‹åè‹¥æœ‰å®ç°InitializingBeanæ¥å£åˆ™å»è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•afterPropertiesSet()åœ¨è¿™é‡Œè¿›è¡Œè‡ªå®šä¹‰çš„å±æ€§èµ‹å€¼ï¼Œæˆ–è€…å…¶ä»–æ“ä½œã€‚ åˆ°æ­¤ä¸ºæ­¢ï¼ˆclassâ€”â€”æ–°ç”Ÿå¯¹è±¡â€”â€”ä¾èµ–æ³¨å…¥â€”â€”awareâ€”â€”åˆå§‹åŒ–ï¼‰ï¼Œbeanä»æ–°å»ºåˆ°æœ€åå±æ€§éƒ½æ˜¯å®Œå–„çš„ã€‚ä½†æœ€ç»ˆå­˜åœ¨å•ä¾‹æ± ä¸­å½“ä¸­çš„å¯¹è±¡å¯èƒ½æ˜¯ä»£ç†å¯¹è±¡è€Œä¸æ˜¯åŸå¯¹è±¡ï¼Œå¦åˆ™åšçš„é‚£äº›åˆ‡é¢éƒ½æ˜¯æ— æ„ä¹‰çš„ã€‚å¾—åˆ°ä¸€ä¸ªbeanç„¶åè°ƒç”¨å…¶æ–¹æ³•ï¼Œå®ƒå¯èƒ½æ˜¯çœŸæ­£é‚£ä¸ªbeançš„ä»£ç†å¯¹è±¡å…¶æ–¹æ³•æ¯”åŸæ–¹æ³•åšäº†æ‰©å±•ã€‚å› æ­¤åœ¨åˆå§‹åŒ–ä¹‹åè¿˜ä¼šæœ‰ä¸€æ­¥å°±æ˜¯aopåˆ¤æ–­æ˜¯å¦è¦ç”Ÿæˆä»£ç†å¯¹è±¡æœ€ç»ˆæ‰å¾—åˆ°çš„beanæ”¾å…¥å•ä¾‹æ±  è¿™é‡Œå°±å‡ºæ¥äº†ç‹­ä¹‰çš„ç”Ÿå‘½å‘¨æœŸ å¹¿ä¹‰çš„ç”Ÿå‘½å‘¨æœŸå®é™…ä¸Šä¸Šé¢çš„ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œaopä¹‹åå¾—åˆ°æœ€ç»ˆçš„beanå®ƒæ˜¯ç›´æ¥è¿”å›è¿˜æ˜¯å­˜è¿›å•ä¾‹æ± æ˜¯å–å†³äºè¿™ä¸ªbeanå®ƒçš„ä½œç”¨åŸŸscope 1&lt;bean id=&quot;user&quot; class=&quot;com.hao.User&quot; scope=&quot;prototype&quot;/&gt; é»˜è®¤æ˜¯å•ä¾‹ä½†ä¹Ÿæœ‰å¤šä¾‹çš„å­˜åœ¨åƒä¸Šé¢é…ç½®çš„ï¼Œå®é™…ä¸Šåœ¨Springå½“ä¸­æ˜¯å­˜åœ¨ä¸€ä¸ªbeançš„åŒ…è£…ç±»BeanDefinitionã€‚å®ƒå½“ä¸­çš„å„ä¸ªå­—æ®µå°±åŒ…å«ç€beançš„å„ç§ä¿¡æ¯æ¯”å¦‚beanå®é™…çš„classç±»ã€åˆ›å»ºçš„å·¥å‚ã€åˆå§‹åŒ–æ–¹æ³•ã€ä½œç”¨åŸŸã€æ˜¯å¦æ‡’åŠ è½½ç­‰ç­‰ã€‚ 1234567BeanDefinition 1.scope 2.initMethod 3.byName byType 4.dependsOn 5.beanClass .... beançš„åˆ›å»ºåˆå§‹åŒ–åˆ°æœ€ç»ˆæ ¹æ®è¿™äº›ä¿¡æ¯æ¥å®Œæˆçš„ï¼Œå› æ­¤æˆ‘ä»¬å¹¶ä¸æ˜¯ç›´æ¥é€šè¿‡classå¾—åˆ°æ–°ç”Ÿå¯¹è±¡ï¼Œè€Œæ˜¯å…ˆæœ‰BeanDefinitionã€‚æ ¹æ®BeanDefinitioné‡Œçš„beanClasså±æ€§å®Œæˆåˆ›å»ºæ–°ç”Ÿbeanï¼Œè€Œæ–°å»ºå¯¹è±¡éœ€è¦å·¥å‚æ‰€ä»¥æœ‰äº†è¯¥beançš„BeanDefinitionåå†ç”±BeanFactoryå®Œæˆåˆ›å»ºbeanå¯¹è±¡ é‚£ä¹ˆBeanDefinitionçš„beanClasså°±æ˜¯é…ç½®ä¿¡æ¯ä¸­çš„classï¼Œåœ¨ç”Ÿæˆæ–°ç”Ÿå¯¹è±¡ä¹‹å‰å¦‚æœå»æ”¹å˜äº†BeanDefinitionçš„beanClasså±æ€§é‚£ä¹ˆä¹‹åæ–°å»ºå¯¹è±¡å°±ä¸æ˜¯ä»¥å‰é‚£ä¸ªclassçš„å®ä¾‹äº†ã€‚BeanFactoryä¹Ÿæ˜¯æä¾›äº†åç½®å¤„ç†å™¨BeanFactoryPostProcessorå°±å¯ä»¥å®Œæˆåœ¨å¯¹è±¡åˆ›å»ºå‰åšä¸€äº›æ“ä½œã€‚BeanFactoryç»„å»ºå®Œæ¯•é‡Œé¢æœ‰æ‰€æœ‰çš„BeanDefinitionåœ¨é€šè¿‡è¿™äº›BeanDefinitionåˆ›å»ºå„ä¸ªbeanå¯¹è±¡å­˜åœ¨Springå®¹å™¨ä¸­ã€‚åœ¨åˆ›å»ºä¹‹å‰å°±ä¼šåˆ¤æ–­æœ‰æ²¡æœ‰åç½®å¤„ç†å™¨BeanFactoryPostProcessorã€‚æ²¡æœ‰å°±ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œæœ‰åˆ™æ‰§è¡Œå®Œåç½®å¤„ç†å™¨ä¸­çš„æ–¹æ³•å†åˆ›å»º 12345678910111213141516171819public class MyBeanFactoryPostProcessor implements BeanFactoryPostProcessor &#123; /** * ä¸»è¦æ˜¯ç”¨æ¥è‡ªå®šä¹‰ä¿®æ”¹æŒæœ‰çš„bean * @param beanFactory * @throws BeansException */ public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException &#123; String[] names = beanFactory.getBeanDefinitionNames(); // è·å–äº†æ‰€æœ‰çš„beanåç§°åˆ—è¡¨ for(int i=0; i&lt;names.length; i++)&#123; String name = names[i]; BeanDefinition beanDefinition = beanFactory.getBeanDefinition(name); System.out.println(name + &quot; bean properties: &quot; + beanDefinition.getPropertyValues().toString()); &#125; &#125;&#125; æ‰§è¡Œåˆ°åç½®å¤„ç†å™¨ï¼ŒbeanFactoryåŒ…å«å…¨éƒ¨çš„BeanDefinitionæ‰€ä»¥å¯ä»¥è·å–BeanDefinitionåšè‡ªå®šä¹‰ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥å¾€beanFactoryå½“ä¸­æ³¨å†Œbeanï¼ˆmybatisè‡ªåŠ¨ç”Ÿæˆçš„mapperä»£ç†ç±»å°±æ˜¯è¿™æ ·è¿›åˆ°äº†Springå®¹å™¨ï¼‰ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"},{"name":"Spring","slug":"JAVA/Spring","permalink":"http://yournotes.cn/categories/JAVA/Spring/"}],"tags":[{"name":"javaæ¡†æ¶","slug":"javaæ¡†æ¶","permalink":"http://yournotes.cn/tags/java%E6%A1%86%E6%9E%B6/"}]},{"title":"é¢è¯•ä¸‰","slug":"å‰å±‹ç§‘æŠ€","date":"2020-08-28T10:31:18.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/08/28/å‰å±‹ç§‘æŠ€/","link":"","permalink":"http://yournotes.cn/2020/08/28/%E5%90%89%E5%B1%8B%E7%A7%91%E6%8A%80/","excerpt":"","text":"Dubboxä¸Dubboçš„åŒºåˆ« é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ ActiveMQçš„ç”¨é€” Redisçš„ç”¨é€” Solrçš„ç”¨é€” äº‹ç‰©çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº› MySQLç´¢å¼•çš„æ•°æ®ç»“æ„ è¯´ä¸€ä¸‹Spring(ä¸»è¦æ¨¡å—ä¸beanç”Ÿå‘½å‘¨æœŸ) è¯´ä¸€ä¸‹HashMap","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"é¢è¯•äºŒ","slug":"ä»èšæ±‡é€š","date":"2020-08-16T00:59:07.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/08/16/ä»èšæ±‡é€š/","link":"","permalink":"http://yournotes.cn/2020/08/16/%E4%BB%81%E8%81%9A%E6%B1%87%E9%80%9A/","excerpt":"","text":"è¯´ä¸€ä¸‹Synchronizedä»¥åŠé”å‡çº§çš„è¿‡ç¨‹ ç¼“å­˜ç©¿é€æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿä¸¤ç§è§£å†³æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼Ÿå¸ƒéš†è¿‡æ»¤å™¨çš„åº•å±‚æ•°æ®ç»“æ„çŸ¥é“å—ï¼Ÿ äº‹ç‰©çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼Ÿ è¯´ä¸€ä¸‹CG æ‰‹å†™ä¸€ä¸‹ä½ çŸ¥é“çš„å•ä¾‹æ¨¡å¼ ä»‹ç»ä¸€ä¸‹é¡¹ç›®ï¼Œå•†åŸé¡¹ç›®å½“ä¸­å¾®ä¿¡å…¬ä¼—æœåŠ¡çš„æ”¯ä»˜æ˜¯è‡ªå·±ç”³è¯·çš„å—ï¼Ÿ","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"æ›¾ç»çš„ä½ ","slug":"æ›¾ç»çš„ä½ ","date":"2020-08-15T13:33:02.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/08/15/æ›¾ç»çš„ä½ /","link":"","permalink":"http://yournotes.cn/2020/08/15/%E6%9B%BE%E7%BB%8F%E7%9A%84%E4%BD%A0/","excerpt":"ã€Šæ›¾ç»çš„ä½ ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šæ›¾ç»çš„ä½ ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"é‡è§","slug":"é‡è§","date":"2020-08-15T13:32:48.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2020/08/15/é‡è§/","link":"","permalink":"http://yournotes.cn/2020/08/15/%E9%81%87%E8%A7%81/","excerpt":"ã€Šé‡è§ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šé‡è§ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"HashMap","slug":"HashMap","date":"2020-08-12T00:22:39.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2020/08/12/HashMap/","link":"","permalink":"http://yournotes.cn/2020/08/12/HashMap/","excerpt":"HashMapæ¦‚è¿° åŸºäºå“ˆå¸Œè¡¨çš„ Map æ¥å£çš„å®ç°ã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨ null å€¼å’Œ null é”®ã€‚ï¼ˆé™¤äº†éåŒæ­¥å’Œå…è®¸ä½¿ç”¨ null ä¹‹å¤–ï¼ŒHashMap ç±»ä¸ Hashtable å¤§è‡´ç›¸åŒã€‚ï¼‰æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œ","text":"HashMapæ¦‚è¿° åŸºäºå“ˆå¸Œè¡¨çš„ Map æ¥å£çš„å®ç°ã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨ null å€¼å’Œ null é”®ã€‚ï¼ˆé™¤äº†éåŒæ­¥å’Œå…è®¸ä½¿ç”¨ null ä¹‹å¤–ï¼ŒHashMap ç±»ä¸ Hashtable å¤§è‡´ç›¸åŒã€‚ï¼‰æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚æ­¤å®ç°å‡å®šå“ˆå¸Œå‡½æ•°å°†å…ƒç´ é€‚å½“åœ°åˆ†å¸ƒåœ¨å„æ¡¶ä¹‹é—´ï¼Œå¯ä¸ºåŸºæœ¬æ“ä½œï¼ˆget å’Œ putï¼‰æä¾›ç¨³å®šçš„æ€§èƒ½ã€‚è¿­ä»£ collection è§†å›¾æ‰€éœ€çš„æ—¶é—´ä¸ HashMap å®ä¾‹çš„â€œå®¹é‡â€ï¼ˆæ¡¶çš„æ•°é‡ï¼‰åŠå…¶å¤§å°ï¼ˆé”®-å€¼æ˜ å°„å…³ç³»æ•°ï¼‰æˆæ¯”ä¾‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¿­ä»£æ€§èƒ½å¾ˆé‡è¦ï¼Œåˆ™ä¸è¦å°†åˆå§‹å®¹é‡è®¾ç½®å¾—å¤ªé«˜ï¼ˆæˆ–å°†åŠ è½½å› å­è®¾ç½®å¾—å¤ªä½ï¼‰ã€‚â€”â€”ç™¾åº¦ç™¾ç§‘ HashMapæ˜¯Javaç¨‹åºå‘˜ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ç”¨äºæ˜ å°„(é”®å€¼å¯¹)å¤„ç†çš„æ•°æ®ç±»å‹ï¼ˆé”®å€¼å¯¹é›†åˆï¼‰ã€‚éšç€JDKç‰ˆæœ¬çš„æ›´æ–°ï¼ŒJDK1.8å¯¹HashMapåº•å±‚çš„å®ç°è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¾‹å¦‚å¼•å…¥çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„å’Œæ‰©å®¹çš„ä¼˜åŒ–ç­‰ã€‚æ–‡ç« å…ˆåŸºäº1.7æè¿°ï¼Œæœ€åå†æ1.8ä¸ä¹‹æ›´æ”¹çš„åœ°æ–¹ã€‚ 123HashMap&lt;String,String&gt; hashMap = new HashMap();hashMap.put(&quot;å¼ ä¸‰&quot;,&quot;ç”·&quot;);hashMap.get(&quot;å¼ ä¸‰&quot;); é‚£ä¹ˆå®ƒé‡Œé¢å­˜çš„å…ƒç´ å°±keyå’Œvalueä¹ˆï¼Ÿï¼ˆå®ƒå…¶å®é‡Œé¢å°è£…æˆä¸€ä¸ªentryå¯ä»¥çœ‹åˆ°é™¤äº†keyä¸valueä¹‹å¤–è¿˜æœ‰nextå±æ€§ï¼Œæ‰€ä»¥HaspMapé‡Œçš„å…ƒç´ ä¸ä»…ä»…å«æœ‰é”®å€¼å¯¹è¿˜æœ‰æŒ‡å‘ä¸‹ä¸€èŠ‚ç‚¹çš„å…ƒç´ çš„ä¿¡æ¯ï¼‰ 123456static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key;//Key-valueç»“æ„çš„key V value;//å­˜å‚¨å€¼ Entry&lt;K,V&gt; next;//æŒ‡å‘ä¸‹ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ final int hash;//å“ˆå¸Œå€¼&#125; HashMapçš„æ•°æ®ç»“æ„åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæœ€åŸºæœ¬çš„ç»“æ„å°±æ˜¯ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œæ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨è¿™ä¸¤ä¸ªåŸºæœ¬ç»“æ„æ¥æ„é€ çš„ï¼ŒHashMapä¹Ÿä¸ä¾‹å¤–ã€‚HashMapåº•å±‚å°±æ˜¯ä¸€ä¸ªæ•°ç»„ç»“æ„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹åˆæ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚åœ¨1.8ä¹‹åå½“é“¾è¡¨é•¿åº¦å¤§äºç­‰äº8æ—¶è½¬ä¸ºçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„äºŒå‰æ ‘è¿™é‡Œä¸è¯¦ç»†å±•å¼€ï¼Œä»¥åæœ‰æœºä¼šå†è®²ï¼‰ã€‚ é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å»å­˜å‚¨ï¼Ÿï¼ˆæ¯ä¸ªå…ƒç´ å­˜è¿›æ¥å¦‚ä½•æ‰¾åˆ°å†…ç½®æ•°ç»„çš„ä½ç½®ï¼‰ 1234hashMap.put(&quot;æˆ˜ä¸‰&quot;,&quot;work&quot;);hashMap.put(&quot;é‡Œçš„&quot;,&quot;energer&quot;);hashMap.put(&quot;çº¦ç¿°&quot;,&quot;cookie&quot;);.... å‡å¦‚å’ŒArrayListä¸€æ ·åˆå§‹åŒ–ä¸€ä¸ªindexå˜é‡å€¼ä¸º0ä½œä¸ºä¸‹æ ‡ï¼Œå½“arrayList.add(â€œaâ€)æ—¶å°†å…ƒç´ å­˜åœ¨å†…ç½®æ•°ç»„array[index]å†indexè‡ªå¢ã€‚å³æ¯æ¬¡å¾€åæ·»åŠ å…ƒç´ ã€‚è‡³åˆ°æ•°ç»„æ»¡äº†å†ä¾æ¬¡ä»ç¬¬ä¸€ä¸ªå¾€åæ·»åŠ é“¾ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å»hashMap.get(â€œçº¦ç¿°â€)ï¼Œæ€ä¹ˆå»æ‰¾åˆ°ã€‚å¾ˆæ˜¾ç„¶æ²¡åŠæ³•å®šä½ã€‚åªèƒ½ä»æ•°ç»„ç¬¬ä¸€ä½å¼€å§‹æ‰¾æ¯”è¾ƒentryçš„keyå€¼å¦‚ä¸åŒå†ä¸‹ä¸€ä¸ªæ¯”è¾ƒç›´åˆ°æ‰¾åˆ°ç›¸åŒçš„keyã€‚é‚£ä¹ˆæ•°é‡å¾ˆå¤šè€Œä¸”å¯¹åº”çš„entryä½ç½®æ¯”è¾ƒååæŸ¥æ‰¾æ˜¯åŠå…¶è´¹æ—¶çš„ã€‚è™½ç„¶æ·»åŠ æ²¡æ¯›ç—…é€Ÿåº¦ä¹Ÿå¿«ä½†æŸ¥æ‰¾æ˜¯éå†æ¯”è¾ƒæ‰€ä»¥æ˜¯ä¸åˆç†çš„ã€‚ åœ¨HashMapå½“ä¸­å®é™…ä¸Šå­˜å‚¨æ—¶å®ƒä¼šå»ç»™keyè¿›è¡Œç±»ä¼¼hashå¾—åˆ°çš„hashCodeä¸æ•°ç»„çš„å®¹é‡å–æ¨¡çš„å¾—åˆ°çš„å°±æ˜¯æ•°ç»„çš„ä½ç½®åœ¨è¿™æ ·çš„ä½ç½®å­˜ä¸‹ã€‚ åœ¨ä½¿ç”¨keyæŸ¥æ‰¾æ—¶ä¹Ÿæ˜¯å¯¹æŸ¥æ‰¾çš„keyè¿›è¡Œç›¸åŒçš„hashç›´æ¥å®šä½åˆ°å½“åˆå­˜çš„ä½ç½®ã€‚è¿™æ ·çš„ä¸€ä¸ªä½ç½®åœ¨æ•°ç»„æ˜¯éšæœºçš„ï¼Œä¸åŒçš„codeå–æ¨¡æœ‰å¯èƒ½ä¼šå‡ºç°ç›¸åŒçš„ä½ç½®å³å½¢æˆé“¾è¡¨ã€‚ç„¶ååœ¨é“¾è¡¨å½“ä¸­æ‰¾åˆ°å¯¹åº”keyçš„entryè¿”å›ã€‚ä¸‹é¢ä¼ªä»£ç æè¿°äº†å®ƒçš„getæ–¹æ³•çš„ä¸€ä¸ªå¤§æ¦‚æ„æ€ã€‚ç›´æ¥æ‰¾åˆ°æ•°ç»„æ‰€åœ¨çš„entryå¦‚æœä¸æ˜¯å°±æ˜¯è¯¥entryçš„nextã€‚å¦‚æœè¿˜ä¸æ˜¯å°±æ˜¯nextçš„nextç›´åˆ°æ‰¾åˆ°å¯¹åº”keyçš„entryã€‚ 1234567get(key)&#123; int hashcode = key.hashCode(); int index = hashcode%table.length; Entry entry = table[index]; ... return entry;&#125; é‚£ä¹ˆåœ¨è¿™é‡Œæ‰€è°“çš„é“¾è¡¨å°±æ˜¯åœ¨é€»è¾‘ä¸Šç†è§£ä¸ºå®ƒä»¬åœ¨æ•°ç»„åŒä¸€ä¸ªä½ç½®ï¼Œå®é™…ä¸Šå°±æ˜¯å…ˆæ‰¾åˆ°æ•°ç»„çš„è¿™ä¸ªä½ç½®å¾—åˆ°äº†ä¸€ä¸ªentry1ç„¶åè¿™ä¸ªentry1é‡Œçš„nextå±æ€§å¼•ç”¨çš„å°±æ˜¯ä¸€ä¸ªentry2ï¼Œé€šè¿‡è¿™ä¸ªentry2çš„nextå°±èƒ½æ‰¾åˆ°entry3ã€‚è¿™æ ·çš„ä¸€ä¸ªé“¾è¡¨ï¼ŒåŸºäºæ‰¾åˆ°ç¬¬ä¸€ä¸ªï¼ˆæ•°ç»„ä¸­çš„entryï¼‰ç„¶åé€šè¿‡nextå­—æ®µä¸€ä¸ªä¸€ä¸ªçš„å¼•ç”¨ã€‚ä¸‹å›¾ä¸ä¸Šå›¾ç›¸å¯¹åº” ![](https://gitee-blogimage.oss-cn-beijing.aliyuncs.com/blogImage/HashMap/HashMap3 .png) ä¸Šå›¾æ•°ç»„å­˜çš„entry3å˜é‡å¼•ç”¨å †ä¸­çš„0x003çš„ä¸€ä¸ªentryå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œçš„nextå±æ€§å¼•ç”¨äº†åœ°å€0x004çš„entryå¯¹è±¡ã€‚putæ—¶å®ƒæ˜¯å»æ€æ ·å»æ’å…¥çš„ã€‚å½“å‘ç”Ÿç¢°æ’æ˜¯æ‰¾åˆ°è¿™ä¸ªé“¾è¡¨çš„æœ€ä¸‹çš„entryæŠŠå®ƒçš„next&#x3D;nullæ¢æˆå½“å‰æ’å…¥çš„entryåœ°å€ï¼Œè¿˜æ˜¯æŠŠå½“å‰æ’å…¥çš„entryçš„nextæ”¹ä¸ºç¬¬ä¸€ä¸ªå°±æ˜¯æ•°ç»„ä¸­çš„table[index]ã€‚ä¹Ÿå°±æ˜¯å¤´æ’è¿˜æ˜¯å°¾æ’ã€‚ é‚£ä¹ˆæ€æ ·å»å­˜ä¸‹é¢ä½¿ç”¨ä¼ªä»£ç è¯´æ˜å¤§æ¦‚æµç¨‹ï¼ˆå®é™…æºç è¿˜æœ‰åˆ¤æ–­ç©ºåˆ¤æ–­keyæ˜¯å¦é‡å¤å…ˆå¿½ç•¥ï¼‰ å‡è®¾æ˜¯å°¾æ’ 123456789101112131415161718put(key,value)&#123; int code = key.hashCode(); int index = code%table.length; Entry e = table[index]; /* 1.æ•°ç»„å½“å‰ä½ç½®ç©º table[index] = new Entry(key,value,null); 2.å½“å‰ä½ç½®æœ‰entryå°±å°†å®ƒçš„nextè®¾ä¸ºå½“å‰åˆ›å»ºçš„entry table[index].next = new Entry(key,value,null); 3.å½“å‰æœ‰entryå¹¶ä¸”nextä¹Ÿæœ‰ table[index].next.next = new Entry(key,value,null); éå†é“¾è¡¨æ‰¾åˆ°æœ€åä¸€ä¸ªentryä¹Ÿå°±æ˜¯nextä¸ºç©ºçš„entry,å°†å®ƒçš„nextè®¾æˆå½“å‰åˆ›å»ºçš„entry */ while(e!=null)&#123; e = e.next; &#125; e.next = new Entry(key,value,null);&#125; å‡è®¾æ˜¯å¤´æ’ 12345678put(key,value)&#123; int code = key.hashCode(); int index = code%table.length; //1.newå½“å‰çš„entry,å¹¶å°†nextè®¾æˆç°åœ¨ç¬¬ä¸€ä¸ªä¹Ÿå°±æ˜¯æ•°ç»„ä¸Šçš„table[index] //2.å°†å½“å‰çš„entryè®¾æˆç¬¬ä¸€ä¸ªå°±æ˜¯æ”¾åœ¨æ•°ç»„ä¸Šã€‚ //å®ƒçš„nextå°±æ˜¯ä»¥å‰çš„ç¬¬ä¸€ä¸ªentryå¯¹è±¡,ç°åœ¨æŠŠå½“å‰å¯¹è±¡æ”¾æ•°ç»„ table[index] = new entry(key,value,table[index]);&#125; ä¸¤ç§æ–¹å¼é¦–å…ˆå¤´æ’æ³•æ˜æ˜¾è¦å¿«ã€‚ç›´æ¥æ’ç„¶åä¸‹ç§»åªè¦ä¸€å¥ä»£ç è€Œå°¾æ’éœ€è¦éå†ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨jdk1.7å½“ä¸­æ˜¯çš„ç¡®ä½¿ç”¨çš„å¤´æ’æ³•ï¼Œä½†åœ¨1.8ä¹‹åä¿®æ”¹æˆå°¾æ’æ³•ä¸‹é¢ä¼šæã€‚ å®¹é‡é—®é¢˜123456789101112131415public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable&#123; // åˆå§‹é»˜è®¤å®¹é‡ 16 static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // æœ€å¤§å®¹é‡å€¼ static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; // é»˜è®¤åŠ è½½å› å­ static final float DEFAULT_LOAD_FACTOR = 0.75f; ......&#125; é»˜è®¤å®¹é‡16ï¼ŒåŠ è½½å› å­0.75ã€‚é€šè¿‡æ„é€ æ–¹æ³•å¯ä»¥è‡ªå·±ä¼ å…¥å®¹é‡ä¸åŠ è½½å› å­ã€‚ä½†å€¼å¾—ä¸€æçš„æ˜¯å®¹é‡ä¸€å®šæ˜¯2çš„æŒ‡æ•°å¹‚ 12345678910/*** Inflates the table.*/private void inflateTable(int toSize) &#123; // Find a power of 2 &gt;= toSize int capacity = roundUpToPowerOf2(toSize); threshold = (int) Math.min(capacity * loadFactor, MAXIMUM_CAPACITY+1); table = new Entry[capacity]; initHashSeedAsNeeded(capacity);&#125; ä¸ºä»€ä¹ˆå®ƒçš„å®¹é‡ä¸€å®šè¦æ±‚ä¸º2çš„æŒ‡æ•°å¹‚å‘¢ã€‚æ¡¶æ•°ç»„ç”¨æ¥å»å®šä½å­˜å‚¨ï¼ŒhashCodeä¸å®¹é‡å–æ¨¡å®šä½ã€‚ç¡®å®ä¸ç®¡æ˜¯ä¸æ˜¯2çš„æŒ‡æ•°å¹‚éƒ½èƒ½è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œå› æ­¤è¿™ä¸ªè¦æ±‚å¤§æ¦‚æ˜¯ä¸æ•ˆç‡æœ‰å…³ã€‚å¯ä»¥çœ‹åˆ°æºç å¾—indexçš„æ–¹å¼ 12345//å¹¶ä¸æ˜¯index = h % lengthindexFor(h,length)&#123; index = h &amp; (length - 1);&#125; é‚£ä¹ˆå°±å¯èƒ½æ˜¯åœ¨å®¹é‡ä½2çš„æŒ‡æ•°å¹‚çš„æƒ…å†µä¸‹é€šè¿‡è¿™æ ·çš„è¿ç®—å°±èƒ½ä»£æ›¿å–æ¨¡è¿ç®—ï¼Œå¹¶ä¸”ä½è¿ç®—ä¸å‡è¿ç®—æ•ˆç‡é«˜äºé™¤è¿ç®—ã€‚ä¸‹é¢å¯ä»¥è¯•ä¸€ä¸‹ï¼š 1234//å‡å¦‚å…¥å®¹é‡16ï¼Œä¸€ä¸ªéšæœºhashCodehashCode 1011 0010 0111length 0000 0000 1111index 0000 0000 0111 1234//å‡å¦‚å…¥å®¹é‡10ï¼Œä¸€ä¸ªéšæœºhashCodehashCode 1011 0010 0111length 0000 0000 1001index 0000 0000 0001 é€šè¿‡ä¸è¿ç®—ç»“æœè‚¯å®šæ˜¯å°äºçš„ã€‚æ‰€ä»¥ç»“æœä¸ä¼šè¶Šç•Œï¼Œä½†å¦‚æœå®¹é‡ä¸ä¸º2çš„æŒ‡æ•°å¹‚æœ‰æŸäº›ä¸‹æ ‡æ˜¯æ°¸è¿œå–ä¸åˆ°çš„ï¼Œåœ¨ä¾‹å­äºŒä¸­æ¯”å®¹é‡1001ï¼ˆ10ï¼‰å°çš„æ˜¯0-9ä¹Ÿå°±æ˜¯å…¨éƒ¨çš„ä¸‹æ ‡ã€‚ä½†111ï¼ˆ7ï¼‰ï¼Œ101ï¼ˆ5ï¼‰ï¼Œ11ï¼ˆ3ï¼‰æ°¸è¿œå–ä¸åˆ°ã€‚æ‰€ä»¥åªæœ‰æ»¡è¶³2çš„æŒ‡æ•°å¹‚å‡ä¸€ä¸è¿ç®—çš„ç»“æœæ‰æ˜¯å…·æœ‰å…¨éƒ¨ä¸‹æ ‡çš„å¯èƒ½æ€§å’Œå–æ¨¡å®é™…ä¸€æ ·ã€‚æ‰©å®¹ä¹‹åæ‰€æœ‰å…ƒç´ ä¹Ÿè¦éå†é‡æ–°å®šä½è¿™ä¸ªæ—¶å€™ä¹Ÿè¦è¿›è¡Œå¤§é‡çš„è¿™ä¸ªè¿ç®—æ‰€ä»¥é‡‡ç”¨è¿™ä¸ªh&amp;(length-1)æ•ˆç‡è¦æ›´é«˜ã€‚ åŠ è½½å› å­ç¬¬äºŒå°±æ˜¯åŠ è½½å› å­ä¸ºä½•æ˜¯0.75ï¼Œè¿™ä¸ªå¤§å®¶å¯èƒ½éƒ½çŸ¥é“ç­‰æ¡¶æ•°ç»„æ»¡äº†å†æ‰©å®¹å“ˆå¸Œç¢°æ’ä¸€å®šæŒºå¤šçš„å¾ˆå®¹æ˜“é•¿é“¾1.8ä¼šç”Ÿæˆçº¢é»‘æ ‘ï¼Œä½†è£…åˆ°ä¸€åŠå°±æ‰©å®¹å°±ç©ºä½å¤ªå¤šå¾ˆæµªè´¹ç©ºé—´ï¼Œ0.75ä¹Ÿå°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªæŠ˜ä¸­çš„é€‰æ‹©ã€‚æ€»è€Œè¨€ä¹‹å°±æ˜¯è¿™æ ·è§„å®šã€‚ä¹Ÿæ˜¯é€šè¿‡ç»Ÿè®¡å‡ºæ¥çš„æ¯”è¾ƒå¥½çš„ç»“æœã€‚ä¸‹é¢è¿™æ®µæ³¨é‡Šä¹Ÿè¯´æ˜äº†å–0.75å‘ç”Ÿ8æ¬¡ç¢°æ’çš„æ¦‚ç‡å·²ç»æ˜¯ä¸€äº¿åˆ†ä¹‹å…­çº¢é»‘æ ‘å¹¶ä¸ä¼šé‚£ä¹ˆå®¹æ˜“ç”Ÿæˆé‚£æ ·å°±å¤Ÿäº†ï¼Œå…¶å®å…³äºä¸ºä»€ä¹ˆæ˜¯0.75å°±æŠŠä»–å½“åšä¸€ä¸ªæŠ˜ä¸­çš„é€‰æ‹©ã€‚è¿™é‡ŒåŒ…æ‹¬ä¸‹é¢æ³¨é‡Šå†…å®¹å…¶å®ä¸Šå¹¶æ²¡æœ‰è¯´æ˜ï¼Œè¿™ä¸ªä¸œè¥¿æ³Šæ¾åˆ†å¸ƒå’Œçº¢é»‘æ ‘ä¸ºä»€ä¹ˆåœ¨è®¾å®šåœ¨é“¾è¡¨åˆ°8çš„æ—¶å€™ç”Ÿæˆæœ‰å…³ç³»ä¸‹é¢ä¼šè®² 1234567891011121314151617181920212223* Because TreeNodes are about twice the size of regular nodes, we* use them only when bins contain enough nodes to warrant use* (see TREEIFY_THRESHOLD). And when they become too small (due to* removal or resizing) they are converted back to plain bins. In* usages with well-distributed user hashCodes, tree bins are* rarely used. Ideally, under random hashCodes, the frequency of* nodes in bins follows a Poisson distribution* (http://en.wikipedia.org/wiki/Poisson_distribution) with a* parameter of about 0.5 on average for the default resizing* threshold of 0.75, although with a large variance because of* resizing granularity. Ignoring variance, the expected* occurrences of list size k are (exp(-0.5) * pow(0.5, k) /* factorial(k)). The first values are:** 0: 0.60653066* 1: 0.30326533* 2: 0.07581633* 3: 0.01263606* 4: 0.00157952* 5: 0.00015795* 6: 0.00001316* 7: 0.00000094* 8: 0.00000006 æ‰©å®¹é—®é¢˜æ‰©å®¹æºç (1.7) 123456789101112void resize(int newCapacity)&#123; Entry[] oldTable = table; int oldCapacity = oldTable.length; ...... //åˆ›å»ºä¸€ä¸ªæ–°çš„Hash Table Entry[] newTable = new Entry[newCapacity]; //å°†Old Hash Tableä¸Šçš„æ•°æ®è¿ç§»åˆ°New Hash Tableä¸Š transfer(newTable); table = newTable; threshold = (int)(newCapacity * loadFactor);&#125; 1234567891011121314151617//putæ—¶å½“è¾¾åˆ°å®¹é‡çš„0.75ï¼Œè¿›è¡Œæ‰©å®¹resizeæ–¹æ³•åˆ›å»ºæ–°æ•°ç»„åå°±æ˜¯è°ƒç”¨transfervoid transfer(Entry[] newTable, boolean rehash) &#123; int newCapacity = newTable.length;//æ–°æ•°ç»„çš„é•¿åº¦ for (Entry&lt;K,V&gt; e : table) &#123;//éå†æ—§æ•°ç»„ while(null != e) &#123;//éå†æ—§æ•°ç»„ä¸­çš„æ¯ä¸ªé“¾è¡¨ç»“ç‚¹ Entry&lt;K,V&gt; next = e.next;//nextæŒ‡å‘å½“å‰éå†ç»“ç‚¹eçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ if (rehash) &#123;//å†hash e.hash = null == e.key ? 0 : hash(e.key); &#125; int i = indexFor(e.hash, newCapacity);//é‡æ–°è®¡ç®—å½“å‰å…ƒç´ åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½® /*********å…³é”®çš„ 3è¡Œä»£ç ï¼ˆå¤´æ’æ³•ç§»åŠ¨å…ƒç´ ï¼‰*********/ e.next = newTable[i]; newTable[i] = e; e = next; &#125; &#125; &#125; putæ—¶å½“è¾¾åˆ°é˜ˆå€¼åè¿›è¡Œæ‰©å®¹ä¹Ÿå°±æ˜¯æ‰§è¡Œresizeæ–¹æ³•åˆ›å»ºæ–°æ•°ç»„ï¼Œå†æ‰§è¡Œtransferæ–¹æ³•é‡Œé¢åŒå¾ªç¯éå†æ•°ç»„ä¸é“¾è¡¨ï¼Œé‡æ–°å®šä½æ”¾å…¥æ–°æ¡¶æ•°ç»„ï¼Œåœ¨1.7çš„æ‰©å®¹ä¼šæœ‰æ­»ç¯é—®é¢˜ï¼Œè¿™é‡Œå…ˆæ ¹æ®æºç çš„æ‰©å®¹æ­¥éª¤ä½œå‡ºäº†å¦‚ä¸‹çš„æ‰©å®¹æ­¥éª¤å›¾ æ‰©å®¹æµç¨‹ å‡è®¾ä¸Šå›¾æ•°ç»„æ­£åœ¨æ‰©å®¹ï¼Œé¦–å…ˆå¾ªç¯åˆ°null !&#x3D; eçš„æ—¶å€™æ‰èƒ½æ‰§è¡Œwhileçš„å†…å®¹ï¼Œeæ˜¯éå†tableæ•°ç»„çš„å…ƒç´ æ‰€ä»¥e &#x3D; firstï¼Œnext &#x3D; e.nextè¿™æ—¶ä»£ç ä¸­çš„next &#x3D; secã€‚ ç„¶åæ±‚e.hashé‡æ–°è®¡ç®—ä½¿ç”¨indexForå¾—åˆ°æ–°æ•°ç»„çš„ä¸‹æ ‡iï¼ˆå‡è®¾ä¸º3ï¼Œç¬¬4ä¸ªä½ç½®ï¼‰ï¼Œè®©e.nextæ”¹ä¸ºnewTable[i]çš„å¼•ç”¨ï¼Œå†å°†newTable[i]æ”¹ä¸ºå½“å‰eä¹Ÿå°±æ˜¯fistï¼Œä¹Ÿå°±æ˜¯å¤´æ’æ³• ä»£ç ç¬¬ä¸‰æ­¥e &#x3D; next å°†å˜é‡eçš„å¼•ç”¨åŸå…ˆæ˜¯fistæ”¹ä¸ºnextçš„å¼•ç”¨ä¹Ÿå°±æ˜¯e &#x3D; secã€‚å› æ­¤whileé‡Œé¢å°±æ˜¯éå†é“¾è¡¨çš„å…ƒç´ èµ‹å€¼ç»™eï¼Œåœ¨åˆ¤æ–­eæ˜¯å¦ä¸ºç©ºå½“å‰eæ˜¯secï¼Œå†è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼ˆå®šä½ï¼Œå¤´æ’ï¼Œç§»ä½ï¼‰ ç°åœ¨æ–°æ•°ç»„å°±å˜æˆå›¾ä¸­å³ä¸‹çš„æ ·å­äº†ï¼Œå¯ä»¥çœ‹åˆ°å°±æ˜¯secçš„nextå˜æˆfirstï¼Œfirstçš„nextä¸ºç©ºæ¯”èµ·åŸå…ˆæ•°ç»„çš„å…³ç³»å°±æ˜¯åè¿‡æ¥çš„ã€‚å› ä¸ºå¤´æ’å˜›ç¬¬ä¸€ä¸ªå…ˆæ’è¿‡å»åé¢çš„æ’è¿‡å»å°±æ›´é å‰ç¬¬ä¸€ä¸ªå°±æ˜¯æœ€ä¸‹é¢ã€‚æ¥ä¸‹æ¥eå°±æ˜¯secçš„nextä¹Ÿå°±æ˜¯éå†åˆ°ç¬¬ä¸‰ä¸ªäº†ç„¶åæ²¡æœ‰ä¸‹ä¸€ä¸ªwhileç»“æŸï¼Œforå¾ªç¯ä¸‹ä¸€ä¸ªæ•°ç»„å…ƒç´ ã€‚å°±è¿™æ ·å¾ªç¯å¾€å¤éå†æ‰€æœ‰çš„å…ƒç´ è½¬ç§»åˆ°æ–°æ•°ç»„ã€‚ æ­»ç¯é—®é¢˜å°±æ˜¯åœ¨å¹¶å‘çš„æƒ…å†µä¸‹åšè¿™äº›æ‰©å®¹æ­¥éª¤å‡ºç°çš„é—®é¢˜ï¼Œé€šè¿‡ä¸Šè¿°æ¼”ç¤ºå•çº¿ç¨‹çš„ä¸€ä¸ªæ‰©å®¹æµç¨‹ã€‚å‡è®¾ç°åœ¨ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªhashmapæ‰©å®¹ã€‚é‚£ä¹ˆåŒæ—¶è®¿é—®resizeæ–¹æ³•ä¸¤ä¸ªçº¿ç¨‹é‡Œé¢éƒ½åˆ›å»ºäº†ä¸€ä¸ªè‡ªå·±çº¿ç¨‹é‡Œçš„æ–°æ•°ç»„ï¼Œç„¶åå†æ‰§è¡Œtransferæ–¹æ³•å…±åŒæ‰§è¡Œåˆ°whileé‡Œçš„ç¬¬ä¸€å¥next &#x3D; e.nextæ—¶çš„æƒ…å†µå¦‚ä¸‹å›¾ã€‚ä¸¤ä¸ªçº¿ç¨‹é‡Œéƒ½æœ‰è‡ªå·±çš„eä¸nextè¿˜æœ‰æ–°æ•°ç»„ã€‚ è¿™æ—¶çº¿ç¨‹1åœåœ¨è¿™é‡Œã€‚çº¿ç¨‹2ç»§ç»­å…¨éƒ¨æ‰§è¡Œå®Œï¼ˆwhileå¾ªç¯ä¸¤æ¬¡ç›´åˆ°eä¸ºç©ºï¼‰ï¼Œè¿™æ—¶çº¿ç¨‹2çš„æ–°æ•°ç»„å·²ç»ç§»å®ŒåŸæ¥çš„ä¸¤ä¸ªå…ƒç´  ç¬¬ä¸€æ¬¡å¾ªç¯ ç¬¬äºŒæ¬¡å¾ªç¯ è¿™æ—¶å€™çº¿ç¨‹1åˆå¾€åå¼€å§‹æ‰§è¡Œäº†ã€‚å…¶å®é—®é¢˜å°±åœ¨äºæ­¤æ—¶å †ä¸­çš„fisrtå¯¹è±¡å’Œsecå·²ç»è¢«æ”¹äº†ã€‚firstå¯¹è±¡é‡Œçš„nextå±æ€§ç°åœ¨å…¶å®æ˜¯ç©ºï¼Œç„¶åsecé‡Œçš„nextå€¼ä¸ºfirstã€‚æŒ‰ç…§æ­¥éª¤ ç¬¬ä¸€æ­¥å®Œæˆåeï¼ˆfirstï¼‰åˆ°æ–°æ•°ç»„ï¼Œä¹‹åeæ”¹ä¸ºnextï¼ˆsecï¼‰ã€‚ åˆ°è¿™ä¸€æ­¥é—®é¢˜å°±æ¥äº†ï¼Œå¤„ç†å®Œfirstä¹‹åç°åœ¨eå¼•ç”¨secï¼Œå†æ¬¡whileå¾ªç¯ å¾—next &#x3D; e.nextã€‚ç°åœ¨e.next &#x3D; firstè€Œä¸æ˜¯nullï¼Œå°±å‡ºç°å¾ªç¯äº†ã€‚å¤„ç†å®Œsecåˆ°æ—¶å€™eå†å¼•ç”¨firstå†å¾ªç¯ä¸€éä¹‹åeæ‰ä¸ºç©º å°†secç§»è¿‡å»ç„¶ånextä¸ºfirstï¼ˆå…¶å®å®ƒçš„nextæœ¬æ¥å°±æ˜¯firstäº†å› ä¸ºå¼€å§‹é‚£ä¸ªçº¿ç¨‹å·²ç»æ”¹äº†å› æ­¤å‰é¢nextå°±ä¸ç­‰äºnullï¼Œè€Œæ˜¯firstï¼‰ã€‚å¯¼è‡´æ¥ä¸‹æ¥e ä¸æ˜¯nullï¼Œæ˜¯firstã€‚ç„¶åå†è¿›whileå¾ªç¯e &#x3D;firstï¼Œnext&#x3D;nullã€‚è¿™æ—¶firstå°±è¦æ’åœ¨secä¸Šå°±æ˜¯firstçš„nextæ”¹ä¸ºsecã€‚å°±å½¢æˆäº†æ­»å¾ªç¯ æ€»ç»“è¿™ä¸ªé—®é¢˜äº§ç”Ÿå°±æ˜¯å› ä¸ºå¤´æ’æ³•å¯¼è‡´ä»æ—§æ•°ç»„åˆ°æ–°æ•°ç»„çš„æ—¶å€™é“¾è¡¨æ–¹å‘ä¼šåè¿‡æ¥ï¼Œå†å› ä¸ºå¹¶å‘çš„é—®é¢˜å¼€å§‹è¯»å–çš„æ˜¯firstå¹¶ä¸”nextæ˜¯secã€‚ä½†ä¸­é€”å´è¢«åˆ«çš„çº¿ç¨‹æ”¹äº†å› ä¸ºæ‰©å®¹nextåè¿‡æ¥ã€‚å®ƒè¿˜æ‹¿ç€ä¹‹å‰çš„å¾ªç¯ä¸€æ¬¡å†å–å°±æ˜¯æœ‰é—®é¢˜äº†æœ¬æ¥åº”è¯¥é“¾è¡¨ç»“æŸäº†ä¸º0ï¼Œç»“æœå¯ä»¥è¿åˆ°fisrtã€‚ JDK8çš„ä¼˜åŒ– resize æ‰©å®¹ä¼˜åŒ– è§£å†³äº†resizeæ—¶å¤šçº¿ç¨‹æ­»å¾ªç¯é—®é¢˜ å¼•å…¥äº†çº¢é»‘æ ‘ï¼Œç›®çš„æ˜¯é¿å…å•æ¡é“¾è¡¨è¿‡é•¿è€Œå½±å“æŸ¥è¯¢æ•ˆç‡ å…³äºresizeä¼˜åŒ–ï¼Œåœ¨1.7ä¸Šé¢æ‰©å®¹æºç é‡Œæ‹¿åˆ°å…ƒç´ é‡æ–°ç±»ä¼¼å–æ¨¡è¿ç®—h &amp; (length-1)å¾—åˆ°ä½ç½®ï¼Œå®é™…ä¸Šåœ¨æ‰©å®¹æ˜¯åŸæ¥çš„ä¸¤å€ï¼Œè¿™ä¸ªæ—¶å€™å–æ¨¡ç»“æœå°±æ˜¯åŸæ¥çš„ä½ç½®æˆ–åŸæ¥çš„ä½ç½®åŠ åŸæ•°ç»„é•¿åº¦å°±è¿™ä¸¤ç§æƒ…å†µã€‚ 1234//æ‰©å®¹å‰é•¿åº¦16length-1 0000 0000 1111hashCode1 1011 0010 0111 ï¼ˆ111ï¼‰3hashCode2 0001 0101 0111 ï¼ˆ111ï¼‰3 1234//æ‰©å®¹åé•¿åº¦32length-1 0000 0001 1111hashCode1 1011 0010 0111 ï¼ˆ111ï¼‰3hashCode2 1101 0101 0111 ï¼ˆ10111ï¼‰19 æ‰€ä»¥hashcodeä¹‹å‰æ²¡ç”¨åˆ°çš„é«˜ä¸€ä½è¦ä¹ˆæ˜¯0è¦ä¹ˆæ˜¯1ã€‚æ–°æ•°ç»„å®¹é‡æ˜¯ä»¥å‰ä¸¤å€é«˜ä½å¤šäº†ä¸ª1ï¼Œhashcodeå¦‚æœé«˜ä¸€ä½æ˜¯0å’Œä»¥å‰å°±æ²¡æœ‰åŒºåˆ«ï¼Œå¦‚æœæ˜¯1å°±å¤šäº†1 ä¸€ä¸ªåŸæ•°ç»„å¤§å°ã€‚ä»ä»¥å‰çš„111è¦ä¹ˆæ²¡æœ‰è¦ä¹ˆè¿˜æ˜¯111è¦ä¹ˆæ˜¯10111å°±æ˜¯çœ‹é‚£ä¸ªé«˜ä½æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­h &amp; lengthçš„ç»“æœã€‚å°±çœ‹é‚£ä¸€ä¸ªä½å°±å¯ä»¥åˆ¤æ–­å®ƒçš„æ–°ä¸‹æ ‡æ˜¯ä¸å˜è¿˜æ˜¯åŠ ä¸Šè€æ•°ç»„å®¹é‡ 1234//æ‰©å®¹å‰é•¿åº¦16length 0000 0001 0000hashCode1 1011 0010 0111 ï¼ˆ0000 0000ï¼‰0hashCode2 0001 0101 0111 ï¼ˆ0001 0000ï¼‰16 123456//è¿™æ®µä»£ç æ”¾åœ¨éå†åŸæ•°ç»„é‡Œé¢if((h&amp;length)=0)&#123; å½“å‰éå†çš„ä¸‹æ ‡iå°±æ˜¯æ–°æ•°ç»„ä¸‹æ ‡&#125;else&#123; å½“å‰éå†çš„i+oldTable.lengthå°±æ˜¯æ–°ä¸‹æ ‡&#125; 1.8æºç å½“ä¸­ä¹Ÿå°±æ˜¯è¿™æ ·å»ç¡®å®šæ–°çš„ä¸‹æ ‡ä½ç½® 1234567891011121314151617181920212223242526272829Node&lt;K,V&gt; loHead = null, loTail = null;Node&lt;K,V&gt; hiHead = null, hiTail = null;Node&lt;K,V&gt; next;do &#123; next = e.next; //åˆ¤æ–­æ˜¯ä½æŒ‡é’ˆè¿˜æ˜¯é«˜æŒ‡é’ˆ if ((e.hash &amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125;&#125; while ((e = next) != null);if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead;&#125;if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead;&#125; åœ¨ä¸Šè¿°æºç ä¸­ï¼Œé™¤äº†æ–°åæ ‡çš„è®¡ç®—å¤–ã€‚å†…éƒ¨å®šä¹‰çš„ä¸¤ç»„å…±å››ä¸ªæŒ‡é’ˆï¼ˆä½å¤´ã€ä½å°¾ã€é«˜å¤´ã€é«˜å°¾ï¼‰ä½é«˜åŒºåˆ†æ–°ä¸‹æ ‡æ˜¯ä¿æŒåŸæ ·çš„è¿˜æ˜¯å¢åŠ çš„å’Œä¸Šé¢æçš„ä¸€æ ·ä¸éœ€è¦rehashï¼Œæ— è®ºæ˜¯ä½æŒ‡é’ˆè¿˜æ˜¯é«˜æŒ‡é’ˆéƒ½æœ‰ä¸¤ä¸ªå¤´å°¾æŒ‡é’ˆheadã€tailï¼Œæ ‡è®°å¤´å°¾ä¹Ÿæ˜¯è§£å†³1.7å½“ä¸­ç”±äºä½“ä½å€’ç½®ä¼šå‡ºç°çš„æ­»å¾ªç¯é—®é¢˜","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yournotes.cn/tags/Java/"}]},{"title":"Volatileç®€è¿°","slug":"Volatileç®€è¿°","date":"2020-08-10T03:22:01.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2020/08/10/Volatileç®€è¿°/","link":"","permalink":"http://yournotes.cn/2020/08/10/Volatile%E7%AE%80%E8%BF%B0/","excerpt":"Volatileæ¦‚å¿µ volatileæ˜¯ä¸€ä¸ªç‰¹å¾ä¿®é¥°ç¬¦ï¼ˆtype specifierï¼‰ã€‚volatileçš„ä½œç”¨æ˜¯ä½œä¸ºæŒ‡ä»¤å…³é”®å­—ï¼Œç¡®ä¿æœ¬æ¡æŒ‡ä»¤ä¸ä¼šå› ç¼–è¯‘å™¨çš„ä¼˜åŒ–è€Œçœç•¥ï¼Œä¸”è¦æ±‚æ¯æ¬¡ç›´æ¥è¯»å€¼ã€‚volatileçš„å˜é‡æ˜¯è¯´è¿™å˜é‡å¯èƒ½ä¼šè¢«æ„æƒ³ä¸åˆ°åœ°æ”¹","text":"Volatileæ¦‚å¿µ volatileæ˜¯ä¸€ä¸ªç‰¹å¾ä¿®é¥°ç¬¦ï¼ˆtype specifierï¼‰ã€‚volatileçš„ä½œç”¨æ˜¯ä½œä¸ºæŒ‡ä»¤å…³é”®å­—ï¼Œç¡®ä¿æœ¬æ¡æŒ‡ä»¤ä¸ä¼šå› ç¼–è¯‘å™¨çš„ä¼˜åŒ–è€Œçœç•¥ï¼Œä¸”è¦æ±‚æ¯æ¬¡ç›´æ¥è¯»å€¼ã€‚volatileçš„å˜é‡æ˜¯è¯´è¿™å˜é‡å¯èƒ½ä¼šè¢«æ„æƒ³ä¸åˆ°åœ°æ”¹å˜ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±ä¸ä¼šå»å‡è®¾è¿™ä¸ªå˜é‡çš„å€¼äº†ã€‚â€”â€”ç™¾åº¦ç™¾ç§‘ æ‰€ä»¥å‘¢å®ƒä¸»è¦æ˜¯ä¸¤ä¸ªä½œç”¨ï¼šä¸€ä¸ªæ˜¯çº¿ç¨‹å¯è§ï¼ˆä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚ï¼‰ï¼Œä¸€ä¸ªæ˜¯é˜²æ­¢æŒ‡ä»¤é‡æ’åºã€‚è¦ç†è§£è¿™äº›é¦–å…ˆå‘¢éœ€è¦äº†è§£æˆ‘ä»¬javaçš„ä¸€ä¸ªå†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰ Java Memory Modelæˆ‘ä»¬çŸ¥é“åœ¨javaä¸­ï¼Œå®ä¾‹åŸŸã€é™æ€åŸŸå’Œæ•°ç»„å…ƒç´ éƒ½å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå †å†…å­˜æ˜¯çº¿ç¨‹å…±äº«ï¼Œè€Œå…¶ä»–çš„ä¸€äº›è™šæ‹Ÿæœºæ ˆç­‰å®ƒä»¬çš„çš„ä¸€äº›å†…å®¹æ˜¯çº¿ç¨‹ç‹¬å ä¸ä¼šæœ‰å†…å­˜å¯è§çš„é—®é¢˜ä¹Ÿä¸å—å†…å­˜æ¨¡å‹å½±å“ã€‚Javaçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”±Javaå†…å­˜æ¨¡å‹æ§åˆ¶ï¼ŒJMMå†³å®šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ã€‚ä»æŠ½è±¡çš„è§’åº¦æ¥çœ‹ï¼ŒJMMå®šä¹‰äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»ï¼šçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆmain memoryï¼‰ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼ˆlocal memoryï¼‰ï¼Œæœ¬åœ°å†…å­˜ä¸­å­˜å‚¨äº†è¯¥çº¿ç¨‹ä»¥è¯»&#x2F;å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç¤ºæ„å›¾å¦‚ä¸‹ï¼š çº¿ç¨‹ä»ä¸»å†…å­˜æ‹¿å–åˆ°æŸä»¥å˜é‡åˆ°è‡ªå·±æœ¬åœ°å†…å­˜è¿›è¡Œæ“ä½œï¼Œå®Œæ¯•ä¹‹åå†å°†æ–°çš„å€¼è¦†ç›–åˆ°ä¸»å†…å­˜ã€‚ä¹‹åå†æœ‰å…¶ä»–çº¿ç¨‹æ‹¿åˆ°æ­¤å˜é‡å¾—åˆ°ä¸€ä¸ªæ–°çš„å€¼ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼è¾¾åˆ°äº†ä¸€ä¸ªä¸åŒçº¿ç¨‹ä¹‹é—´çš„é€šè®¯ï¼Œè€Œä¸”è¿™ä¸ªé€šä¿¡è¿‡ç¨‹å¿…é¡»è¦ç»è¿‡ä¸»å†…å­˜ã€‚JMMé€šè¿‡æ§åˆ¶ä¸»å†…å­˜ä¸æ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å†…å­˜ä¹‹é—´çš„äº¤äº’ï¼Œæ¥ä¸ºjavaç¨‹åºå‘˜æä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚ çº¿ç¨‹å¯è§å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ï¼Œè¿™æ ·çš„æ–¹å¼æ¥ä¿è¯å•æ¬¡è¯»å†™æ“ä½œçš„åŒæ­¥æ€§ã€‚ **ä¾‹å­1ï¼š**jçš„å€¼ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ 12345// çº¿ç¨‹Aæ‰§è¡Œçš„ä»£ç k = 5;//çº¿ç¨‹Bæ‰§è¡Œçš„ä»£ç int j = k; ç­”æ¡ˆæ˜¯æ— æ³•ç¡®å®šã€‚å› ä¸ºå³ä½¿çº¿ç¨‹Aå·²ç»æŠŠkçš„å€¼æ›´æ–°ä¸º5ï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œæ˜¯åœ¨çº¿ç¨‹Açš„æœ¬åœ°å†…å­˜ä¸­å®Œæˆçš„ï¼Œæœ¬åœ°å†…å­˜æ‰€æ›´æ–°çš„å˜é‡å¹¶ä¸ä¼šç«‹å³åŒæ­¥å›ä¸»å†…å­˜ï¼Œå› æ­¤çº¿ç¨‹Bä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡kçš„å€¼æ˜¯ä¸ç¡®å®šçš„ã€‚è¿™å°±æ˜¯å¯è§æ€§é—®é¢˜ï¼Œçº¿ç¨‹Aå¯¹å˜é‡kä¿®æ”¹äº†ä¹‹åï¼Œçº¿ç¨‹Bæ²¡æœ‰ç«‹å³çœ‹åˆ°çº¿ç¨‹Aä¿®æ”¹çš„å€¼ã€‚ ä¾‹å­2ï¼š æ–°çº¿ç¨‹ä¼šæ‰“å°å‡ºendä¹ˆï¼Ÿ 1234567891011121314public class Test &#123; private static /*volatile*/ boolean flag = true public static void main (String[] args) throws I interrupted Exception &#123; new Thread(()-&gt; &#123; while (flag) &#123; //do sth &#125; Systemâ€¢outâ€¢println(&quot;end&quot;); &#125;,name: &quot;server&quot;) .start(); Thread.sleep( millis: 1GGG); flag = false &#125;&#125; ç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œæ–°çº¿ç¨‹çš„æœ¬åœ°å†…å­˜æ‹¿åˆ°çš„flagæ˜¯trueï¼Œå®ƒä¸€ç›´ä½¿ç”¨çš„å°±æ˜¯trueã€‚å³ä½¿ä¸»çº¿ç¨‹å·²ç»å°†flagæ›´æ”¹å¹¶åŒæ­¥åˆ°äº†ä¸»å†…å­˜ã€‚æ–°çº¿ç¨‹çš„æœ¬åœ°ç©ºé—´å·²ç»æœ‰äº†flagä¹Ÿä¸ä¼šå†å»ä¸»å†…å­˜å–äº†ã€‚è¿™æ—¶ä½¿ç”¨volatitleå…³é”®å­—ä¿®é¥°è¯¥å˜é‡å°±å¯ä»¥ä¿è¯å˜é‡æ›´æ”¹è¿›è¡Œç«‹åˆ»åŒæ­¥ï¼Œå¹¶ä¸”å…¶ä»–åœ°æ–¹ä½¿ç”¨è¯¥å˜é‡æ¯æ¬¡éƒ½è¦é‡æ–°ä»ä¸»å†…å­˜æ‹¿å–ã€‚ é€šè¿‡ä¸¤ä¸ªä¾‹å­å¤§æ¦‚å¯ä»¥çŸ¥é“çš„æ˜¯volatileä¿®é¥°çš„å˜é‡ï¼Œå˜åŠ¨ä¼šåŠæ—¶æ›´æ–°å¹¶ä¸”çº¿ç¨‹éƒ½ä¼šå»ä¸»å†…å­˜å–è€Œä¸æ˜¯åˆ°æœ¬åœ° æŒ‡ä»¤é‡æ’åºå®é™…ä¸Šå°±æ˜¯åœ¨æ‰§è¡Œç¨‹åºæ—¶ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤åšé‡æ’åºã€‚ ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’åºã€‚ç¼–è¯‘å™¨åœ¨ä¸æ”¹å˜å•çº¿ç¨‹ç¨‹åºè¯­ä¹‰çš„å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚ æŒ‡ä»¤çº§å¹¶è¡Œçš„é‡æ’åºã€‚ç°ä»£å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯ï¼ˆInstruction-Level Parallelismï¼Œ ILPï¼‰æ¥å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚ å†…å­˜ç³»ç»Ÿçš„é‡æ’åºã€‚ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»&#x2F;å†™ç¼“å†²åŒºï¼Œè¿™ä½¿å¾—åŠ è½½å’Œå­˜å‚¨æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œã€‚ è¿™é‡Œå…ˆç”¨ä¸€ä¸ªåˆ—å­è¯´æ˜é‡æ’åºçš„å­˜åœ¨ï¼Œçœ‹ä¸‹é¢ä¼ªä»£ç ï¼š 1a=0,b=0,x=0,y=0 123//çº¿ç¨‹ä¸€a=1;x=b; 123//çº¿ç¨‹äºŒb=1;y=a; å‡å¦‚ä¸ä¼šå‘ç”Ÿé‡æ’åºã€‚é‚£ä¹ˆæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸¤ä¸ªçº¿ç¨‹å››æ¡æŒ‡ä»¤è‡³å°‘a&#x3D;1ä¸€å®šåœ¨x&#x3D;bä¹‹å‰ï¼Œb&#x3D;1ä¸€å®šåœ¨y&#x3D;aä¹‹å‰ã€‚æ‰§è¡Œé¡ºåºå¯èƒ½å‡ºç°å…­ç§æƒ…å†µ 12345678910111213//æƒ…å†µä¸€ï¼š(ä¸²)çº¿ç¨‹ä¸€æ‰§è¡Œå®Œåçº¿ç¨‹äºŒæ‰å¼€å§‹a=1;x=b;b=1;y=a;//ç»“æœx=0,y=1//æƒ…å†µäºŒï¼š(ä¸²)çº¿ç¨‹ä¸€å¼€å§‹æ—¶çº¿ç¨‹äºŒå·²æ‰§è¡Œå®Œb=1;y=a;a=1;x=b;//ç»“æœx=1,y=0 123456789101112131415161718192021222324252627//æƒ…å†µä¸‰ï¼š(å¹¶)ä¸¤çº¿ç¨‹äº¤å‰æ‰§è¡Œa=1;b=1;x=b;y=a;//ç»“æœx=1,y=1//æƒ…å†µå››ï¼š(å¹¶)ä¸¤çº¿ç¨‹äº¤å‰æ‰§è¡Œb=1;a=1;y=a;x=b;//ç»“æœx=1,y=1//æƒ…å†µäº”ï¼š(å¹¶)çº¿ç¨‹ä¸€æ‰§è¡Œä¸­é€”çº¿ç¨‹äºŒå¼€å§‹å¹¶æ‰§è¡Œå®Œa=1;b=1;y=a;x=b;//ç»“æœx=1,y=1//æƒ…å†µäº”ï¼š(å¹¶)çº¿ç¨‹äºŒæ‰§è¡Œä¸­é€”çº¿ç¨‹ä¸€å¼€å§‹å¹¶æ‰§è¡Œå®Œb=1;a=1;x=b;y=a;//ç»“æœx=1,y=1 åœ¨ä¸ä¼šè¢«è°ƒæ•´é¡ºåºçš„æƒ…å†µä¸­ç»“æœæ— éä¸‰ç§ï¼ˆ1,0ï¼‰ã€ï¼ˆ0,1ï¼‰ã€ï¼ˆ1,1ï¼‰ä½†å®é™…ç»“æœä¼šå‡ºç°x&#x3D;0,y&#x3D;0ã€‚ä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹çš„æŒ‡ä»¤æ˜¯ä¹±åºçš„ä¼šè¿›è¡Œè°ƒæ•´ã€‚å¯¹äºå•çº¿ç¨‹æ¥è¯´è°ƒæ•´æ˜¯ä¸ä¼šå½±å“ç»“æœçš„åªæ˜¯æå‡äº†æ•ˆç‡æ¯”å¦‚çœç•¥ä¸€åŠ ä¸€å‡ç›¸äº’æŠµæ¶ˆçš„æŒ‡ä»¤æˆ–è€…è°ƒæ•´é¡ºåºï¼Œæœ€åç»“æœä¸å½±å“ã€‚ 123456789101112/*ä¸‹é¢è¿™ä¸‰ç»„å°±ä¸ä¼šå‘ç”ŸæŒ‡ä»¤é‡æ’å› ä¸ºæ”¹äº†é¡ºåºå°±ä¼šå½±å“ç»“æœ*/a=1;b=a;a=1;a=2;a=b;b=1; åœ¨ä¸Šé¢åŒçº¿ç¨‹çš„ä¾‹å­ä¸­æ— è®ºæ˜¯çº¿ç¨‹ä¸€çš„a&#x3D;1,x&#x3D;bè¿˜æ˜¯çº¿ç¨‹äºŒçš„b&#x3D;1,y&#x3D;aã€‚åœ¨å®ƒä»¬æœ¬çº¿ç¨‹ä¸­ä¸¤æ¡è¯­å¥å¹¶ä¸æ˜¯ä¾èµ–çš„ï¼Œæ‰€ä»¥è°ƒæ¢ä¸å½±å“ç»“æœæ‰€ä»¥ä¼šå‡ºç°è°ƒæ¢ã€‚ä½†ä¸¤ä¸ªçº¿ç¨‹æ”¾ä¸€èµ·å˜é‡æ˜¯ä¾èµ–çš„ï¼Œæœ€åå› ä¸ºé‡æ’å¯¼è‡´ç»“æœä¸ä¸€è‡´ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸­å¾€å¾€ä¼šå‡ºç°é—®é¢˜æ‰€ä»¥éœ€è¦ç¦æ­¢é‡æ’ï¼Œä½¿ç”¨volatileé‚£ä¹ˆæŒ‡ä»¤ä¹‹é—´åŠ å…¥å†…å­˜å±éšœæŒ‡ä»¤å°±å¯ä»¥ç¦æ­¢é‡æ’ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yournotes.cn/tags/Java/"}]},{"title":"Synchronizedç®€è¿°","slug":"Synchronizedå…³é”®å­—","date":"2020-07-19T16:00:00.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2020/07/20/Synchronizedå…³é”®å­—/","link":"","permalink":"http://yournotes.cn/2020/07/20/Synchronized%E5%85%B3%E9%94%AE%E5%AD%97/","excerpt":"Synchronizedæ¦‚å¿µ Javaè¯­è¨€çš„å…³é”®å­—ï¼Œå¯ç”¨æ¥ç»™å¯¹è±¡å’Œæ–¹æ³•æˆ–è€…ä»£ç å—åŠ é”ï¼Œå½“å®ƒé”å®šä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªä»£ç å—çš„æ—¶å€™ï¼ŒåŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ã€‚å½“ä¸¤ä¸ªå¹¶å‘çº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡objectä¸­çš„è¿™ä¸ªåŠ é”åŒæ­¥","text":"Synchronizedæ¦‚å¿µ Javaè¯­è¨€çš„å…³é”®å­—ï¼Œå¯ç”¨æ¥ç»™å¯¹è±¡å’Œæ–¹æ³•æˆ–è€…ä»£ç å—åŠ é”ï¼Œå½“å®ƒé”å®šä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªä»£ç å—çš„æ—¶å€™ï¼ŒåŒä¸€æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ã€‚å½“ä¸¤ä¸ªå¹¶å‘çº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡objectä¸­çš„è¿™ä¸ªåŠ é”åŒæ­¥ä»£ç å—æ—¶ï¼Œä¸€ä¸ªæ—¶é—´å†…åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°æ‰§è¡Œã€‚å¦ä¸€ä¸ªçº¿ç¨‹å¿…é¡»ç­‰å¾…å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œè¿™ä¸ªä»£ç å—ä»¥åæ‰èƒ½æ‰§è¡Œè¯¥ä»£ç å—ã€‚ç„¶è€Œï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®objectçš„ä¸€ä¸ªåŠ é”ä»£ç å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»å¯ä»¥è®¿é—®è¯¥objectä¸­çš„éåŠ é”ä»£ç å—ã€‚â€”â€”ç™¾åº¦ç™¾ç§‘ synchronizedé”å®šçš„æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä»£ç å—ç›¸å½“äºå¯¹é—¨åŠ é”ï¼Œæˆ¿é—´é‡Œé¢åšä»€ä¹ˆè‡ªå®šä¹‰ã€‚ä½†åªæœ‰æ‹¿åˆ°è¿™ä¸ªé”å®šçš„å¯¹è±¡æ‰èƒ½è¿›å…¥æˆ¿é—´æ‰èƒ½åšæ¥ä¸‹æ¥è‡ªå®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨åŒä¸€æŠŠé”ä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä¸€ä¸ªçº¿ç¨‹æ‹¿èµ°äº†å°±å¯ä»¥è¿›å…¥æ‰§è¡Œï¼Œå…¶ä»–çš„çº¿ç¨‹å°±æ‹¿ä¸åˆ°è¿›ä¸äº†æˆ¿é—´ï¼Œç›´åˆ°é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•é‡Šæ”¾å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹å†å»å…±åŒç«äº‰é‚£ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·æ¥è¾¾åˆ°ä¸€ä¸ªäº’æ–¥çš„æ•ˆæœé¿å…å…±äº«æ•°æ®é”™è¯¯ã€‚åœ¨å­—èŠ‚ç å±‚è¡¨ç°monitorenteråŠ é”å’Œmonitorexité‡Šæ”¾é”ã€‚ 1234//æºä»£ç synchronized (this) &#123; int i = 1;&#125; 123456//åæ±‡ç¼–3: monitorenter //åŠ é”4: iconst_15: istore_16: aload_16: monitorexit //é‡Šæ”¾é” å¯¹è±¡çš„å†…å­˜ç»“æ„äº†è§£å¯¹è±¡åŠ é”åŸç†é‚£ä¹ˆé¦–å…ˆéœ€è¦äº†è§£åœ¨JVMï¼ˆhotspotï¼‰å½“ä¸­ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜ç»“æ„ 1.å¯¹è±¡å¤´ å¯¹è±¡å¤´åˆ†ä¸ºMarkWordä¸Classå¯¹è±¡æŒ‡é’ˆï¼Œå…¶ä¸­MarkWordæ ‡è¯†äº†å¯¹è±¡è¿è¡Œæ—¶çš„å„ç§å±æ€§ä¸çŠ¶æ€å€¼ã€‚å“ˆå¸Œç ã€GCåˆ†ä»£ å¹´çŠ¶ æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ç­‰ã€‚ï¼ˆå“ˆå¸Œï¼ŒGCä¿¡æ¯ï¼Œé”ä¿¡æ¯ï¼‰Classå¯¹è±¡æŒ‡é’ˆï¼šè¿™æ®µç©ºé—´æ˜¯ç”¨æ¥ä¿å­˜è‡ªå·±çš„çˆ¶ç±»é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½åˆ°å†…å­˜åç”Ÿæˆçš„ç±»çš„Classå¯¹è±¡çš„åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å¯¹è±¡çŸ¥é“å®ƒæ˜¯å±äºå“ªä¸ªç±»çš„ã€‚ 2.å®ä¾‹æ•°æ® å®ä¾‹æ•°æ®æ˜¯ä¿å­˜å¯¹è±¡çœŸæ­£æœ‰æ•ˆçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡çš„å„ç§å­—æ®µä¿¡æ¯ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬ä»çˆ¶ç±»ä¸­ç»§æ‰¿çš„å­—æ®µï¼Œéƒ½ä¿å­˜åœ¨è¿™é‡Œï¼Œå½“ç„¶æ–¹æ³•ä¸åœ¨è¿™é‡Œï¼Œåœ¨ç±»ä¸­ã€‚è€Œä¸”å®ƒçš„å†…å­˜å…·ä½“åˆ†é…ç»“æ„æ˜¯å—jvmåˆ†é…ç­–ç•¥ä¸å­—æ®µåœ¨æºç ä¸­çš„é¡ºåºæ¥å†³å®šçš„ï¼Œé»˜è®¤æ˜¯ç›¸åŒå®½åº¦çš„å­—æ®µåˆ†é…åœ¨ä¸€èµ·ï¼Œåœ¨è¿™ä¸ªå‰æä¸‹çˆ¶ç±»å­—æ®µåœ¨å­ç±»å­—æ®µå‰é¢,è€Œä¸”å­ç±»ä¸­è¾ƒçª„çš„å­—æ®µä¹Ÿå¯èƒ½è¢«åˆ†é…åˆ°çˆ¶ç±»ä¸­çš„é—´éš™ä¸­ã€‚ 3.å¯¹é½å¡«å…… å› ä¸ºhotspotè™šæ‹Ÿæœº64ä½çš„å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å†…å­˜çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯8ä¸ªå­—èŠ‚çš„æ•´æ•°å€ï¼Œæ‰€ä»¥è¿™æ®µå¡«å……å°±æ˜¯ä¸ºäº†ä¿è¯åœ°å€æ˜¯8ä¸ªå­—èŠ‚çš„æ•´æ•°å€ã€‚ markwordåœ¨è¿™é‡Œå°±æ˜¯è®°å½•ç€å„ç§ä¿¡æ¯64ä½çš„äºŒè¿›åˆ¶ä¸²å…¶ä¸­ä¸‰ä½æ ‡è®°ç€é”ä¿¡æ¯ è‡ªæ—‹é”CASCASï¼šCompare and Swapï¼Œå³æ¯”è¾ƒå†äº¤æ¢ã€‚ jdk5å¢åŠ äº†å¹¶å‘åŒ…java.util.concurrent.*,å…¶ä¸‹é¢çš„ç±»ä½¿ç”¨CASç®—æ³•å®ç°äº†åŒºåˆ«äºsynchronouseåŒæ­¥é”çš„ä¸€ç§ä¹è§‚é”ã€‚JDK 5ä¹‹å‰Javaè¯­è¨€æ˜¯é synchronizedå…³é”®å­—ä¿è¯åŒæ­¥çš„ï¼Œè¿™æ˜¯ä¸€ç§ç‹¬å é”ï¼Œä¹Ÿæ˜¯æ˜¯æ‚²è§‚é”ã€‚ Synchronizedé”å‡çº§ ç»™å¯¹è±¡åŠ é”ï¼Œå®é™…ä¸Šæ˜¯æ”¹å˜çš„æ˜¯å¯¹è±¡çš„markwordå†…å®¹ã€‚é€šè¿‡æ ‡å¿—ä½çš„ä¸€äº›è®°å½•æ¥åˆ¤æ–­å½“å‰çš„é”ä¿¡æ¯ï¼Œä»ä¸‹é¢ä¾‹å­æ‰“å°ç»“æœå¯ä»¥çœ‹åˆ°é”æ ‡è®°ä½ï¼ˆç¬¬ä¸€ä¸ªå­—èŠ‚åä¸‰ä½ï¼‰ç”±001å˜ä¸º000ï¼Œå¯¹è±¡åˆ›å»ºæ²¡æœ‰å¼€å¯åå‘é”è¿›è€ŒåŠ é”ç›´æ¥å‡çº§è‡ªæ—‹é”ã€‚ 123456Object o = new Object()ï¼›System.out.println(ClassLayout.parselnstonce(o).toPrintable())ï¼› synchronized (o) &#123; System.out.println(ClassLayout.porselnstonce(o).toPrintable())ï¼› &#125; æ—©æœŸsynchronizedå±äºé‡é‡çº§é”ç”³è¯·å’Œæ³¨é”€å¿…é¡»å¾—å‘å†…æ ¸å±‚ç”³è¯·ã€‚ä½†æœ‰äº›éœ€è¦åŒæ­¥çš„åœ°æ–¹å¤§å¤šæ•°æƒ…å†µä¸‹ä¹Ÿç¡®å®åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚è¿™æ ·çš„æƒ…å†µä¸‹ä»ç„¶å»æ‰¾æ“ä½œç³»ç»Ÿç”³è¯·é”èµ„æºæµªè´¹æ¯”ä¾‹å¤§ã€‚æ‰€ä»¥1.6ä¹‹åå¯¹Synchronizedè¿›è¡Œäº†ä¼˜åŒ–æœ‰åç§»é”ä¸è‡ªæ—‹é”ã€‚ åå‘é”ï¼šè¿™ä¸ªé”ä¼šåå‘äºç¬¬ä¸€ä¸ªè·å¾—å®ƒçš„çº¿ç¨‹ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡å¦‚è¯¥é”æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹æ‰€è·å–ï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹æ¥ç«äº‰è¯¥é”ï¼Œé‚£ä¹ˆæŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦è¿›è¡ŒåŒæ­¥æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´:åœ¨æ­¤çº¿ç¨‹ä¹‹åçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå†æ¬¡è¿›å…¥æˆ–è€…é€€å‡ºåŒä¸€æ®µåŒæ­¥å—ä»£ç ï¼Œå¹¶ä¸å†éœ€è¦å»è¿›è¡ŒåŠ é”æˆ–è€…è§£é”æ“ä½œï¼Œè€Œæ˜¯ä¼šåšä»¥ä¸‹çš„æ­¥éª¤ï¼š Load-and-testï¼Œä¹Ÿå°±æ˜¯ç®€å•åˆ¤æ–­ä¸€ä¸‹å½“å‰çº¿ç¨‹idæ˜¯å¦ä¸Markwordå½“ä¸­çš„çº¿ç¨‹idæ˜¯å¦ä¸€è‡´ã€‚ å¦‚æœä¸€è‡´ï¼Œåˆ™è¯´æ˜æ­¤çº¿ç¨‹å·²ç»æˆåŠŸè·å¾—äº†é”ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚ å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™è¦æ£€æŸ¥ä¸€ä¸‹å¯¹è±¡æ˜¯å¦è¿˜æ˜¯å¯åå‘ï¼Œå³â€œæ˜¯å¦åå‘é”â€æ ‡å¿—ä½çš„å€¼ã€‚ å¦‚æœè¿˜æœªåå‘ï¼Œåˆ™åˆ©ç”¨CASæ“ä½œæ¥ç«äº‰é”ï¼ˆä¿è¯åŸå­æ“ä½œï¼‰ï¼Œä¹Ÿå³æ˜¯ç¬¬ä¸€æ¬¡è·å–é”æ—¶çš„æ“ä½œã€‚ å¦‚æœæ­¤å¯¹è±¡å·²ç»åå‘äº†ï¼Œå¹¶ä¸”ä¸æ˜¯åå‘è‡ªå·±ï¼Œåˆ™è¯´æ˜å­˜åœ¨äº†ç«äº‰ã€‚æ­¤æ—¶å¯èƒ½å°±è¦æ ¹æ®å¦å¤–çº¿ç¨‹çš„æƒ…å†µï¼Œå¯èƒ½æ˜¯é‡æ–°åå‘ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åšåå‘æ’¤é”€ï¼Œä½†å¤§éƒ¨åˆ†æƒ…å†µä¸‹å°±æ˜¯å‡çº§æˆè½»é‡çº§é”äº†ã€‚ é”æ’¤é”€ åœ¨ä¸€ä¸ªå®‰å…¨ç‚¹åœæ­¢æ‹¥æœ‰é”çš„çº¿ç¨‹ã€‚ éå†çº¿ç¨‹æ ˆï¼Œå¦‚æœå­˜åœ¨é”è®°å½•çš„è¯ï¼Œéœ€è¦ä¿®å¤é”è®°å½•å’ŒMarkwordï¼Œä½¿å…¶å˜æˆæ— é”çŠ¶æ€ã€‚ å”¤é†’å½“å‰çº¿ç¨‹ï¼Œå°†å½“å‰é”å‡çº§æˆè½»é‡çº§é”ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæŸäº›åŒæ­¥ä»£ç å—å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šçš„çº¿ç¨‹ç«äº‰çš„è¯ï¼Œé‚£ä¹ˆåå‘é”å°±ä¼šæ˜¯ä¸€ç§ç´¯èµ˜ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä¸€å¼€å§‹å°±æŠŠåå‘é”è¿™ä¸ªé»˜è®¤åŠŸèƒ½ç»™å…³é—­ã€‚ è½»é‡çº§é” é”æ’¤é”€å‡çº§ä¸ºè½»é‡çº§é”ä¹‹åï¼Œé‚£ä¹ˆå¯¹è±¡çš„Markwordä¹Ÿä¼šè¿›è¡Œç›¸åº”çš„çš„å˜åŒ–ã€‚ä¸‹é¢å…ˆç®€å•æè¿°ä¸‹é”æ’¤é”€ä¹‹åï¼Œå‡çº§ä¸ºè½»é‡çº§é”çš„è¿‡ç¨‹ï¼š çº¿ç¨‹åœ¨è‡ªå·±çš„æ ˆæ¡¢ä¸­åˆ›å»ºé”è®°å½• LockRecordã€‚ å°†é”å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­çš„MarkWordå¤åˆ¶åˆ°çº¿ç¨‹çš„åˆšåˆšåˆ›å»ºçš„é”è®°å½•ä¸­ã€‚ å°†é”è®°å½•ä¸­çš„OwneræŒ‡é’ˆæŒ‡å‘é”å¯¹è±¡ã€‚ å°†é”å¯¹è±¡çš„å¯¹è±¡å¤´çš„MarkWordæ›¿æ¢ä¸ºæŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆã€‚ é‡é‡çº§é” è½»é‡çº§é”è†¨èƒ€ä¹‹åï¼Œå°±å‡çº§ä¸ºé‡é‡çº§é”äº†ï¼ˆé»˜è®¤ä¸€ä¸ªçº¿ç¨‹å¾ªç¯10æ¬¡æˆ–è€…çº¿ç¨‹æ•°é‡è¶…è¿‡cpuä¸€åŠçš„æ ¸æ•°ï¼‰ã€‚é‡é‡çº§é”æ˜¯ä¾èµ–å¯¹è±¡å†…éƒ¨çš„monitoré”æ¥å®ç°çš„ï¼Œè€Œmonitoråˆä¾èµ–æ“ä½œç³»ç»Ÿçš„MutexLock(äº’æ–¥é”)æ¥å®ç°çš„ï¼Œæ‰€ä»¥é‡é‡çº§é”ä¹Ÿè¢«æˆä¸ºäº’æ–¥é”ï¼ŒåŠ é”è§£é”å‘å†…æ ¸å±‚ç”³è¯·ç›¸å¯¹éº»çƒ¦ä½†ä¸å ç”¨cpuèµ„æºã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yournotes.cn/tags/Java/"}]},{"title":"æ•…ä¹¡","slug":"æ•…ä¹¡","date":"2020-07-15T13:32:34.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/07/15/æ•…ä¹¡/","link":"","permalink":"http://yournotes.cn/2020/07/15/%E6%95%85%E4%B9%A1/","excerpt":"ã€Šæ•…ä¹¡ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šæ•…ä¹¡ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"åæ¥","slug":"åæ¥","date":"2020-07-15T13:32:15.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2020/07/15/åæ¥/","link":"","permalink":"http://yournotes.cn/2020/07/15/%E5%90%8E%E6%9D%A5/","excerpt":"ã€Šåæ¥ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šåæ¥ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"éšå½¢çš„ç¿…è†€","slug":"éšå½¢çš„ç¿…è†€(å‰ä»–è°±)","date":"2020-06-18T16:00:00.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2020/06/19/éšå½¢çš„ç¿…è†€(å‰ä»–è°±)/","link":"","permalink":"http://yournotes.cn/2020/06/19/%E9%9A%90%E5%BD%A2%E7%9A%84%E7%BF%85%E8%86%80(%E5%90%89%E4%BB%96%E8%B0%B1)/","excerpt":"ã€Šéšå½¢çš„ç¿…è†€ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šéšå½¢çš„ç¿…è†€ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"æˆ‘çœŸçš„å—ä¼¤äº†","slug":"æˆ‘çœŸçš„å—ä¼¤äº†","date":"2020-06-15T13:31:30.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/06/15/æˆ‘çœŸçš„å—ä¼¤äº†/","link":"","permalink":"http://yournotes.cn/2020/06/15/%E6%88%91%E7%9C%9F%E7%9A%84%E5%8F%97%E4%BC%A4%E4%BA%86/","excerpt":"ã€Šæˆ‘çœŸçš„å—ä¼¤äº†ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šæˆ‘çœŸçš„å—ä¼¤äº†ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"é¢è¯•ä¸€","slug":"å°é¹…é€š","date":"2020-05-19T16:00:00.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/05/20/å°é¹…é€š/","link":"","permalink":"http://yournotes.cn/2020/05/20/%E5%B0%8F%E9%B9%85%E9%80%9A/","excerpt":"","text":"äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼Ÿ å¤šè¡¨æŸ¥è¯¢æœ‰å“ªäº›æ–¹å¼ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ä»‹ç»ä¸€ä¸‹é¡¹ç›®ï¼Ÿä½ é¡¹ç›®ä¸­ä¸‹è®¢å•ä¸æ”¯ä»˜ä¹‹é—´çš„é€»è¾‘å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ å†™é¡¹ç›®è¿‡ç¨‹ä¸­é‡åˆ°è¿‡å“ªäº›çš„é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"ç«¥å¹´","slug":"ç«¥å¹´","date":"2020-05-15T13:14:47.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2020/05/15/ç«¥å¹´/","link":"","permalink":"http://yournotes.cn/2020/05/15/%E7%AB%A5%E5%B9%B4/","excerpt":"ã€Šç«¥å¹´ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šç«¥å¹´ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"å¼‚ä¹¡äºº","slug":"å¼‚ä¹¡äºº(å‰ä»–è°±)","date":"2020-05-14T16:00:00.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/05/15/å¼‚ä¹¡äºº(å‰ä»–è°±)/","link":"","permalink":"http://yournotes.cn/2020/05/15/%E5%BC%82%E4%B9%A1%E4%BA%BA(%E5%90%89%E4%BB%96%E8%B0%B1)/","excerpt":"ã€Šå¼‚ä¹¡äººã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šå¼‚ä¹¡äººã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"ä¹è°±","slug":"ç®—æ³•/ä¹è°±","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"é¢è¯•èµ„æ–™","slug":"javaé¢è¯•","date":"2020-04-19T16:00:00.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2020/04/20/javaé¢è¯•/","link":"","permalink":"http://yournotes.cn/2020/04/20/java%E9%9D%A2%E8%AF%95/","excerpt":"","text":"ZooKeeperCAPå®šç†ï¼šä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç§,ä¸€è‡´æ€§ï¼ˆC:Consistencyï¼‰,å¯ç”¨æ€§ï¼ˆA:Availableï¼‰,åˆ†åŒºå®¹é”™æ€§ï¼ˆP:Partition Toleranceï¼‰.åœ¨æ­¤ZooKeeperä¿è¯çš„æ˜¯CPï¼ŒZooKeeperä¸èƒ½ä¿è¯æ¯æ¬¡æœåŠ¡è¯·æ±‚çš„å¯ç”¨æ€§ï¼Œåœ¨æç«¯ç¯å¢ƒä¸‹ï¼ŒZooKeeperå¯èƒ½ä¼šä¸¢å¼ƒä¸€äº›è¯·æ±‚ï¼Œæ¶ˆè´¹è€…ç¨‹åºéœ€è¦é‡æ–°è¯·æ±‚æ‰èƒ½è·å¾—ç»“æœã€‚å¦å¤–åœ¨è¿›è¡Œleaderé€‰ä¸¾æ—¶é›†ç¾¤éƒ½æ˜¯ä¸å¯ç”¨ï¼Œæ‰€ä»¥è¯´ï¼ŒZooKeeperä¸èƒ½ä¿è¯æœåŠ¡å¯ç”¨æ€§ã€‚ï¼ˆBaseç†è®ºCAå¼ºä¸€è‡´æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§ï¼‰ ZABåè®®ï¼šZABåè®®åŒ…æ‹¬ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼šå´©æºƒæ¢å¤å’Œæ¶ˆæ¯å¹¿æ’­ã€‚å½“æ•´ä¸ª Zookeeper é›†ç¾¤åˆšåˆšå¯åŠ¨æˆ–è€…LeaderæœåŠ¡å™¨å®•æœºã€é‡å¯æˆ–è€…ç½‘ç»œæ•…éšœå¯¼è‡´å°‘äºè¿‡åŠçš„æœåŠ¡å™¨ä¸ Leader æœåŠ¡å™¨ä¿æŒæ­£å¸¸é€šä¿¡æ—¶ï¼Œæ‰€æœ‰æœåŠ¡å™¨è¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼ï¼Œé¦–å…ˆé€‰ä¸¾äº§ç”Ÿæ–°çš„ Leader æœåŠ¡å™¨ï¼Œç„¶åé›†ç¾¤ä¸­ Follower æœåŠ¡å™¨å¼€å§‹ä¸æ–°çš„ Leader æœåŠ¡å™¨è¿›è¡Œæ•°æ®åŒæ­¥ã€‚å½“é›†ç¾¤ä¸­è¶…è¿‡åŠæ•°æœºå™¨ä¸è¯¥ Leader æœåŠ¡å™¨å®Œæˆæ•°æ®åŒæ­¥ä¹‹åï¼Œé€€å‡ºæ¢å¤æ¨¡å¼è¿›å…¥æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ï¼ŒLeader æœåŠ¡å™¨å¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚ç”Ÿæˆäº‹ç‰©ææ¡ˆæ¥è¿›è¡Œäº‹åŠ¡è¯·æ±‚å¤„ç†ã€‚ é€‰ä¸¾ç®—æ³•å’Œæµç¨‹ï¼šLeaderElection(é»˜è®¤æä¾›çš„é€‰ä¸¾ç®—æ³•)ç›®å‰æœ‰5å°æœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨å‡æ²¡æœ‰æ•°æ®ï¼Œå®ƒä»¬çš„ç¼–å·åˆ†åˆ«æ˜¯1,2,3,4,5,æŒ‰ç¼–å·ä¾æ¬¡å¯åŠ¨ï¼Œå®ƒä»¬çš„é€‰æ‹©ä¸¾è¿‡ç¨‹å¦‚ä¸‹ï¼š æœåŠ¡å™¨1å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼Œç„¶åå‘æŠ•ç¥¨ä¿¡æ¯ï¼Œç”±äºå…¶å®ƒæœºå™¨è¿˜æ²¡æœ‰å¯åŠ¨æ‰€ä»¥å®ƒæ”¶ä¸åˆ°åé¦ˆä¿¡æ¯ï¼ŒæœåŠ¡å™¨1çš„çŠ¶æ€ä¸€ç›´å±äºLookingã€‚ æœåŠ¡å™¨2å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„æœåŠ¡å™¨1äº¤æ¢ç»“æœï¼Œç”±äºæœåŠ¡å™¨2çš„ç¼–å·å¤§æ‰€ä»¥æœåŠ¡å™¨2èƒœå‡ºï¼Œä½†æ­¤æ—¶æŠ•ç¥¨æ•°æ²¡æœ‰å¤§äºåŠæ•°ï¼Œæ‰€ä»¥ä¸¤ä¸ªæœåŠ¡å™¨çš„çŠ¶æ€ä¾ç„¶æ˜¯LOOKINGã€‚ æœåŠ¡å™¨3å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„æœåŠ¡å™¨1,2äº¤æ¢ä¿¡æ¯ï¼Œç”±äºæœåŠ¡å™¨3çš„ç¼–å·æœ€å¤§æ‰€ä»¥æœåŠ¡å™¨3èƒœå‡ºï¼Œæ­¤æ—¶æŠ•ç¥¨æ•°æ­£å¥½å¤§äºåŠæ•°ï¼Œæ‰€ä»¥æœåŠ¡å™¨3æˆä¸ºleaderï¼ŒæœåŠ¡å™¨1,2æˆä¸ºfollowerã€‚ æœåŠ¡å™¨4å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„æœåŠ¡å™¨1,2,3äº¤æ¢ä¿¡æ¯ï¼Œå°½ç®¡æœåŠ¡å™¨4çš„ç¼–å·å¤§ï¼Œä½†ä¹‹å‰æœåŠ¡å™¨3å·²ç»èƒœå‡ºï¼Œæ‰€ä»¥æœåŠ¡å™¨4åªèƒ½æˆä¸ºfollowerã€‚ æœåŠ¡å™¨5å¯åŠ¨ï¼Œåé¢çš„é€»è¾‘åŒæœåŠ¡å™¨4æˆä¸ºfollowerã€‚ Redisåº”ç”¨åœºæ™¯ ç¼“å­˜ å…±äº«Session æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ åˆ†å¸ƒå¼é” å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆå¿« çº¯å†…å­˜æ“ä½œ å•çº¿ç¨‹æ“ä½œï¼Œé¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ åˆç†é«˜æ•ˆçš„æ•°æ®ç»“æ„ é‡‡ç”¨äº†éé˜»å¡I&#x2F;Oå¤šè·¯å¤ç”¨æœºåˆ¶ Redis çš„æ•°æ®ç»“æ„åŠä½¿ç”¨åœºæ™¯ Stringå­—ç¬¦ä¸²:å­—ç¬¦ä¸²ç±»å‹æ˜¯ Redis æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œé¦–å…ˆé”®éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œä¸” å…¶ä»–å‡ ç§æ•°æ®ç»“æ„éƒ½æ˜¯åœ¨å­—ç¬¦ä¸²ç±»å‹åŸºç¡€ä¸Šæ„å»ºçš„ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨çš„ set key value å‘½ä»¤å°±æ˜¯å­—ç¬¦ä¸²ã€‚å¸¸ç”¨åœ¨ç¼“å­˜ã€è®¡æ•°ã€å…±äº«Sessionã€é™é€Ÿç­‰ã€‚ Hashå“ˆå¸Œ:åœ¨Redisä¸­ï¼Œå“ˆå¸Œç±»å‹æ˜¯æŒ‡é”®å€¼æœ¬èº«åˆæ˜¯ä¸€ä¸ªé”®å€¼å¯¹ç»“æ„ï¼Œå“ˆå¸Œå¯ä»¥ç”¨æ¥å­˜æ”¾ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚å®ç°è´­ç‰©è½¦ã€‚ Liståˆ—è¡¨ï¼ˆåŒå‘é“¾è¡¨ï¼‰:åˆ—è¡¨ï¼ˆlistï¼‰ç±»å‹æ˜¯ç”¨æ¥å­˜å‚¨å¤šä¸ªæœ‰åºçš„å­—ç¬¦ä¸²ã€‚å¯ä»¥åšç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚ Seté›†åˆï¼šé›†åˆï¼ˆsetï¼‰ç±»å‹ä¹Ÿæ˜¯ç”¨æ¥ä¿å­˜å¤šä¸ªçš„å­—ç¬¦ä¸²å…ƒç´ ï¼Œä½†å’Œåˆ—è¡¨ç±»å‹ä¸ä¸€ æ ·çš„æ˜¯ï¼Œé›†åˆä¸­ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ï¼Œå¹¶ä¸”é›†åˆä¸­çš„å…ƒç´ æ˜¯æ— åºçš„ï¼Œä¸èƒ½é€šè¿‡ç´¢å¼•ä¸‹æ ‡è·å–å…ƒç´ ã€‚åˆ©ç”¨ Set çš„äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œï¼Œå¯ä»¥è®¡ç®—å…±åŒå–œå¥½ï¼Œå…¨éƒ¨çš„å–œå¥½ï¼Œè‡ªå·±ç‹¬æœ‰çš„å–œå¥½ç­‰åŠŸèƒ½ã€‚ Sorted Setæœ‰åºé›†åˆï¼ˆè·³è¡¨å®ç°ï¼‰ï¼šSorted Set å¤šäº†ä¸€ä¸ªæƒé‡å‚æ•° Scoreï¼Œé›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰ Score è¿›è¡Œæ’åˆ—ã€‚å¯ä»¥åšæ’è¡Œæ¦œåº”ç”¨ï¼Œå– TOP N æ“ä½œã€‚ Redis çš„æ•°æ®è¿‡æœŸç­–ç•¥Redis ä¸­æ•°æ®è¿‡æœŸç­–ç•¥é‡‡ç”¨å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥ å®šæœŸåˆ é™¤ç­–ç•¥ï¼šRedis å¯ç”¨ä¸€ä¸ªå®šæ—¶å™¨å®šæ—¶ç›‘è§†æ‰€æœ‰çš„ keyï¼Œåˆ¤æ–­keyæ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯å°±åˆ é™¤ã€‚è¿™ç§ç­–ç•¥å¯ä»¥ä¿è¯è¿‡æœŸçš„ key æœ€ç»ˆéƒ½ä¼šè¢«åˆ é™¤ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸¥é‡çš„ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½éå†å†…å­˜ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œéå¸¸æ¶ˆè€— CPU èµ„æºï¼Œå¹¶ä¸”å½“ key å·²è¿‡æœŸï¼Œä½†æ˜¯å®šæ—¶å™¨è¿˜å¤„äºæœªå”¤èµ·çŠ¶æ€ï¼Œè¿™æ®µæ—¶é—´å†… key ä»ç„¶å¯ä»¥ç”¨ã€‚ æƒ°æ€§åˆ é™¤ç­–ç•¥ï¼šåœ¨è·å– key æ—¶ï¼Œå…ˆåˆ¤æ–­ key æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™åˆ é™¤ã€‚è¿™ç§æ–¹å¼å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ï¼šå¦‚æœè¿™ä¸ª key ä¸€ç›´æœªè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå®ƒä¸€ç›´åœ¨å†…å­˜ä¸­ï¼Œå…¶å®å®ƒå·²ç»è¿‡æœŸäº†ï¼Œä¼šæµªè´¹å¤§é‡çš„ç©ºé—´ã€‚ è¿™ä¸¤ç§ç­–ç•¥å¤©ç„¶çš„äº’è¡¥ï¼Œç»“åˆèµ·æ¥ä¹‹åï¼Œå®šæ—¶åˆ é™¤ç­–ç•¥å°±å‘ç”Ÿäº†ä¸€äº›æ”¹å˜ï¼Œä¸åœ¨æ˜¯æ¯æ¬¡æ‰«æå…¨éƒ¨çš„ key äº†ï¼Œè€Œæ˜¯éšæœºæŠ½å–ä¸€éƒ¨åˆ† key è¿›è¡Œæ£€æŸ¥ï¼Œè¿™æ ·å°±é™ä½äº†å¯¹ CPU èµ„æºçš„æŸè€—ï¼Œæƒ°æ€§åˆ é™¤ç­–ç•¥äº’è¡¥äº†ä¸ºæ£€æŸ¥åˆ°çš„keyï¼ŒåŸºæœ¬ä¸Šæ»¡è¶³äº†æ‰€æœ‰è¦æ±‚ã€‚ä½†æ˜¯æœ‰æ—¶å€™å°±æ˜¯é‚£ä¹ˆçš„å·§ï¼Œæ—¢æ²¡æœ‰è¢«å®šæ—¶å™¨æŠ½å–åˆ°ï¼Œåˆæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œè¿™äº›æ•°æ®åˆå¦‚ä½•ä»å†…å­˜ä¸­æ¶ˆå¤±ï¼Ÿæ²¡å…³ç³»ï¼Œè¿˜æœ‰å†…å­˜æ·˜æ±°æœºåˆ¶ï¼Œå½“å†…å­˜ä¸å¤Ÿç”¨æ—¶ï¼Œå†…å­˜æ·˜æ±°æœºåˆ¶å°±ä¼šä¸Šåœºã€‚æ·˜æ±°ç­–ç•¥åˆ†ä¸ºï¼š å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚ï¼ˆRedis é»˜è®¤ç­–ç•¥ï¼‰ å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚ï¼ˆLRUæ¨èä½¿ç”¨ï¼‰ å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚ å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æŠŠ Redis æ—¢å½“ç¼“å­˜ï¼ŒåˆåšæŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™æ‰ç”¨ã€‚ å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚ å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„ Key ä¼˜å…ˆç§»é™¤ã€‚ Redisçš„LRUå…·ä½“å®ç°ï¼šâ€‹ ä¼ ç»Ÿçš„LRUæ˜¯ä½¿ç”¨æ ˆçš„å½¢å¼ï¼Œæ¯æ¬¡éƒ½å°†æœ€æ–°ä½¿ç”¨çš„ç§»å…¥æ ˆé¡¶ï¼Œä½†æ˜¯ç”¨æ ˆçš„å½¢å¼ä¼šå¯¼è‡´æ‰§è¡Œselect *çš„æ—¶å€™å¤§é‡éçƒ­ç‚¹æ•°æ®å é¢†å¤´éƒ¨æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æ”¹è¿›ã€‚Redisæ¯æ¬¡æŒ‰keyè·å–ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œéƒ½ä¼šæ›´æ–°valueä¸­çš„lruå­—æ®µä¸ºå½“å‰ç§’çº§åˆ«çš„æ—¶é—´æˆ³ã€‚Redisåˆå§‹çš„å®ç°ç®—æ³•å¾ˆç®€å•ï¼Œéšæœºä»dictä¸­å–å‡ºäº”ä¸ªkey,æ·˜æ±°ä¸€ä¸ªlruå­—æ®µå€¼æœ€å°çš„ã€‚åœ¨3.0çš„æ—¶å€™ï¼Œåˆæ”¹è¿›äº†ä¸€ç‰ˆç®—æ³•ï¼Œé¦–å…ˆç¬¬ä¸€æ¬¡éšæœºé€‰å–çš„keyéƒ½ä¼šæ”¾å…¥ä¸€ä¸ªpoolä¸­(poolçš„å¤§å°ä¸º16),poolä¸­çš„keyæ˜¯æŒ‰lruå¤§å°é¡ºåºæ’åˆ—çš„ã€‚æ¥ä¸‹æ¥æ¯æ¬¡éšæœºé€‰å–çš„keylruå€¼å¿…é¡»å°äºpoolä¸­æœ€å°çš„lruæ‰ä¼šç»§ç»­æ”¾å…¥ï¼Œç›´åˆ°å°†poolæ”¾æ»¡ã€‚æ”¾æ»¡ä¹‹åï¼Œæ¯æ¬¡å¦‚æœæœ‰æ–°çš„keyéœ€è¦æ”¾å…¥ï¼Œéœ€è¦å°†poolä¸­lruæœ€å¤§çš„ä¸€ä¸ªkeyå–å‡ºã€‚æ·˜æ±°çš„æ—¶å€™ï¼Œç›´æ¥ä»poolä¸­é€‰å–ä¸€ä¸ªlruæœ€å°çš„å€¼ç„¶åå°†å…¶æ·˜æ±°ã€‚ å¦‚ä½•è§£å†³ Redis ç¼“å­˜é›ªå´©é—®é¢˜ ä½¿ç”¨ Redis é«˜å¯ç”¨æ¶æ„ï¼šä½¿ç”¨ Redis é›†ç¾¤æ¥ä¿è¯ Redis æœåŠ¡ä¸ä¼šæŒ‚æ‰ ç¼“å­˜æ—¶é—´ä¸ä¸€è‡´ï¼Œç»™ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´ï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œé¿å…é›†ä½“å¤±æ•ˆ é™æµé™çº§ç­–ç•¥ï¼šæœ‰ä¸€å®šçš„å¤‡æ¡ˆï¼Œæ¯”å¦‚ä¸ªæ€§æ¨èæœåŠ¡ä¸å¯ç”¨äº†ï¼Œæ¢æˆçƒ­ç‚¹æ•°æ®æ¨èæœåŠ¡ å¦‚ä½•è§£å†³ Redis ç¼“å­˜ç©¿é€é—®é¢˜ åœ¨æ¥å£åšæ ¡éªŒ å­˜nullå€¼ï¼ˆç¼“å­˜å‡»ç©¿åŠ é”ï¼‰ å¸ƒéš†è¿‡æ»¤å™¨æ‹¦æˆªï¼š å°†æ‰€æœ‰å¯èƒ½çš„æŸ¥è¯¢key å…ˆæ˜ å°„åˆ°å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼ŒæŸ¥è¯¢æ—¶å…ˆåˆ¤æ–­keyæ˜¯å¦å­˜åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå­˜åœ¨æ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚å¸ƒéš†è¿‡æ»¤å™¨å°†å€¼è¿›è¡Œå¤šæ¬¡å“ˆå¸Œbitå­˜å‚¨ï¼Œå¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ åœ¨ï¼Œå¯èƒ½ä¼šè¢«è¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œé‚£ä¹ˆä¸€å®šä¸åœ¨ã€‚ Redisçš„æŒä¹…åŒ–æœºåˆ¶ RDBæ˜¯ä¸€ç§å¿«ç…§å­˜å‚¨æŒä¹…åŒ–æ–¹å¼ï¼Œå…·ä½“å°±æ˜¯å°†RedisæŸä¸€æ—¶åˆ»çš„å†…å­˜æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜çš„æ–‡ä»¶å½“ä¸­ï¼Œé»˜è®¤ä¿å­˜çš„æ–‡ä»¶åä¸ºdump.rdbï¼Œè€Œåœ¨RedisæœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œä¼šé‡æ–°åŠ è½½dump.rdbæ–‡ä»¶çš„æ•°æ®åˆ°å†…å­˜å½“ä¸­æ¢å¤æ•°æ®ã€‚ AOFï¼šæŠŠæ‰€æœ‰çš„å¯¹Redisçš„æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹çš„å‘½ä»¤éƒ½å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå‘½ä»¤çš„é›†åˆã€‚ ä½¿ç”¨AOFåšæŒä¹…åŒ–ï¼Œæ¯ä¸€ä¸ªå†™å‘½ä»¤éƒ½é€šè¿‡writeå‡½æ•°è¿½åŠ åˆ°appendonly.aofä¸­ã€‚aofçš„é»˜è®¤ç­–ç•¥æ˜¯æ¯ç§’é’Ÿfsyncä¸€æ¬¡ï¼Œåœ¨è¿™ç§é…ç½®ä¸‹ï¼Œå°±ç®—å‘ç”Ÿæ•…éšœåœæœºï¼Œä¹Ÿæœ€å¤šä¸¢å¤±ä¸€ç§’é’Ÿçš„æ•°æ®ã€‚ ç¼ºç‚¹æ˜¯å¯¹äºç›¸åŒçš„æ•°æ®é›†æ¥è¯´ï¼ŒAOFçš„æ–‡ä»¶ä½“ç§¯é€šå¸¸è¦å¤§äºRDBæ–‡ä»¶çš„ä½“ç§¯ã€‚æ ¹æ®æ‰€ä½¿ç”¨çš„fsyncç­–ç•¥ï¼ŒAOFçš„é€Ÿåº¦å¯èƒ½ä¼šæ…¢äºRDBã€‚ Redisé»˜è®¤æ˜¯å¿«ç…§RDBçš„æŒä¹…åŒ–æ–¹å¼ã€‚å¯¹äºä¸»ä»åŒæ­¥æ¥è¯´ï¼Œä¸»ä»åˆšåˆšè¿æ¥çš„æ—¶å€™ï¼Œè¿›è¡Œå…¨é‡åŒæ­¥ï¼ˆRDBï¼‰ï¼›å…¨åŒæ­¥ç»“æŸåï¼Œè¿›è¡Œå¢é‡åŒæ­¥(AOF)ã€‚ Rediså’Œmemcachedçš„åŒºåˆ« å­˜å‚¨æ–¹å¼ä¸Šï¼šmemcacheä¼šæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåä¼šæŒ‚æ‰ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ã€‚redisæœ‰éƒ¨åˆ†æ•°æ®å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯æ•°æ®çš„æŒä¹…æ€§ã€‚ æ•°æ®æ”¯æŒç±»å‹ä¸Šï¼šmemcacheå¯¹æ•°æ®ç±»å‹çš„æ”¯æŒç®€å•ï¼Œåªæ”¯æŒç®€å•çš„key-valueï¼Œï¼Œè€Œredisæ”¯æŒäº”ç§æ•°æ®ç±»å‹ã€‚ ç”¨åº•å±‚æ¨¡å‹ä¸åŒï¼šå®ƒä»¬ä¹‹é—´åº•å±‚å®ç°æ–¹å¼ä»¥åŠä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡çš„åº”ç”¨åè®®ä¸ä¸€æ ·ã€‚redisç›´æ¥è‡ªå·±æ„å»ºäº†VMæœºåˆ¶ï¼Œå› ä¸ºä¸€èˆ¬çš„ç³»ç»Ÿè°ƒç”¨ç³»ç»Ÿå‡½æ•°çš„è¯ï¼Œä¼šæµªè´¹ä¸€å®šçš„æ—¶é—´å»ç§»åŠ¨å’Œè¯·æ±‚ã€‚ valueçš„å¤§å°ï¼šrediså¯ä»¥è¾¾åˆ°1GBï¼Œè€Œmemcacheåªæœ‰1MBã€‚ Rediså¹¶å‘ç«äº‰keyçš„è§£å†³æ–¹æ¡ˆ åˆ†å¸ƒå¼é”+æ—¶é—´æˆ³ åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ— Redisä¸MysqlåŒå†™ä¸€è‡´æ€§æ–¹æ¡ˆå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜ã€‚æ•°æ®åº“çš„è¯»æ“ä½œçš„é€Ÿåº¦è¿œå¿«äºå†™æ“ä½œçš„ï¼Œæ‰€ä»¥è„æ•°æ®å¾ˆéš¾å‡ºç°ã€‚å¯ä»¥å¯¹å¼‚æ­¥å»¶æ—¶åˆ é™¤ç­–ç•¥ï¼Œä¿è¯è¯»è¯·æ±‚å®Œæˆä»¥åï¼Œå†è¿›è¡Œåˆ é™¤æ“ä½œã€‚ Redisçš„ç®¡é“pipelineå¯¹äºå•çº¿ç¨‹é˜»å¡å¼çš„Redisï¼ŒPipelineå¯ä»¥æ»¡è¶³æ‰¹é‡çš„æ“ä½œï¼ŒæŠŠå¤šä¸ªå‘½ä»¤è¿ç»­çš„å‘é€ç»™Redis Serverï¼Œç„¶åä¸€ä¸€è§£æå“åº”ç»“æœã€‚Pipeliningå¯ä»¥æé«˜æ‰¹é‡å¤„ç†æ€§èƒ½ï¼Œæå‡çš„åŸå› ä¸»è¦æ˜¯TCPè¿æ¥ä¸­å‡å°‘äº†â€œäº¤äº’å¾€è¿”â€çš„æ—¶é—´ã€‚pipeline åº•å±‚æ˜¯é€šè¿‡æŠŠæ‰€æœ‰çš„æ“ä½œå°è£…æˆæµï¼Œredisæœ‰å®šä¹‰è‡ªå·±çš„å‡ºå…¥è¾“å‡ºæµã€‚åœ¨ sync() æ–¹æ³•æ‰§è¡Œæ“ä½œï¼Œæ¯æ¬¡è¯·æ±‚æ”¾åœ¨é˜Ÿåˆ—é‡Œé¢ï¼Œè§£æå“åº”åŒ…ã€‚ Mysqläº‹åŠ¡çš„åŸºæœ¬è¦ç´  åŸå­æ€§ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œå•å…ƒï¼Œå…¶å¯¹æ•°æ®çš„ä¿®æ”¹ï¼Œè¦ä¹ˆå…¨éƒ½æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ½ä¸æ‰§è¡Œ ä¸€è‡´æ€§ï¼šäº‹åŠ¡å¼€å§‹å‰å’Œç»“æŸåï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸæ²¡æœ‰è¢«ç ´åã€‚ éš”ç¦»æ€§ï¼šåŒä¸€æ—¶é—´ï¼Œåªå…è®¸ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚åŒä¸€æ•°æ®ï¼Œä¸åŒçš„äº‹åŠ¡ä¹‹é—´å½¼æ­¤æ²¡æœ‰ä»»ä½•å¹²æ‰°ã€‚ æŒä¹…æ€§ï¼šäº‹åŠ¡å®Œæˆåï¼Œäº‹åŠ¡å¯¹æ•°æ®åº“çš„æ‰€æœ‰æ›´æ–°å°†è¢«ä¿å­˜åˆ°æ•°æ®åº“ï¼Œä¸èƒ½å›æ»šã€‚ äº‹åŠ¡çš„å¹¶å‘é—®é¢˜ è„è¯»ï¼šäº‹åŠ¡Aè¯»å–äº†äº‹åŠ¡Bæ›´æ–°çš„æ•°æ®ï¼Œç„¶åBå›æ»šæ“ä½œï¼Œé‚£ä¹ˆAè¯»å–åˆ°çš„æ•°æ®æ˜¯è„æ•°æ® ä¸å¯é‡å¤è¯»ï¼šäº‹åŠ¡Aå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡Båœ¨äº‹åŠ¡Aå¤šæ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ä½œäº†æ›´æ–°å¹¶æäº¤ï¼Œå¯¼è‡´äº‹åŠ¡Aå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœä¸ä¸€è‡´ã€‚ å¹»è¯»ï¼šAäº‹åŠ¡è¯»å–äº†Bäº‹åŠ¡å·²ç»æäº¤çš„æ–°å¢æ•°æ®ã€‚æ³¨æ„å’Œä¸å¯é‡å¤è¯»çš„åŒºåˆ«ï¼Œè¿™é‡Œæ˜¯æ–°å¢ï¼Œä¸å¯é‡å¤è¯»æ˜¯æ›´æ”¹ï¼ˆæˆ–åˆ é™¤ï¼‰ã€‚selectæŸè®°å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œå‡†å¤‡æ’å…¥æ­¤è®°å½•ï¼Œä½†æ‰§è¡Œ insert æ—¶å‘ç°æ­¤è®°å½•å·²å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ï¼Œæ­¤æ—¶å°±å‘ç”Ÿäº†å¹»è¯»ã€‚ MySQLäº‹åŠ¡éš”ç¦»çº§åˆ« äº‹åŠ¡éš”ç¦»çº§åˆ« è„è¯» ä¸å¯é‡å¤è¯» å¹»è¯» è¯»æœªæäº¤ æ˜¯ æ˜¯ æ˜¯ ä¸å¯é‡å¤è¯» å¦ æ˜¯ æ˜¯ å¯é‡å¤è¯» å¦ å¦ æ˜¯ ä¸²è¡ŒåŒ– å¦ å¦ å¦ åœ¨MySQLå¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«ä¸­å¹¶ä¸æ˜¯å®Œå…¨è§£å†³äº†å¹»è¯»çš„é—®é¢˜ï¼Œè€Œæ˜¯è§£å†³äº†è¯»æ•°æ®æƒ…å†µä¸‹çš„å¹»è¯»é—®é¢˜ã€‚è€Œå¯¹äºä¿®æ”¹çš„æ“ä½œä¾æ—§å­˜åœ¨å¹»è¯»é—®é¢˜ï¼Œå°±æ˜¯è¯´MVCCå¯¹äºå¹»è¯»çš„è§£å†³æ—¶ä¸å½»åº•çš„ã€‚ é€šè¿‡ç´¢å¼•åŠ é”ï¼Œé—´éš™é”ï¼Œnext key lockå¯ä»¥è§£å†³å¹»è¯»çš„é—®é¢˜ã€‚ Mysqlçš„é€»è¾‘ç»“æ„ æœ€ä¸Šå±‚çš„æœåŠ¡ç±»ä¼¼å…¶ä»–CSç»“æ„ï¼Œæ¯”å¦‚è¿æ¥å¤„ç†ï¼Œæˆæƒå¤„ç†ã€‚ ç¬¬äºŒå±‚æ˜¯Mysqlçš„æœåŠ¡å±‚ï¼ŒåŒ…æ‹¬SQLçš„è§£æåˆ†æä¼˜åŒ–ï¼Œå­˜å‚¨è¿‡ç¨‹è§¦å‘å™¨è§†å›¾ç­‰ä¹Ÿåœ¨è¿™ä¸€å±‚å®ç°ã€‚ æœ€åä¸€å±‚æ˜¯å­˜å‚¨å¼•æ“çš„å®ç°ï¼Œç±»ä¼¼äºJavaæ¥å£çš„å®ç°ï¼ŒMysqlçš„æ‰§è¡Œå™¨åœ¨æ‰§è¡ŒSQLçš„æ—¶å€™åªä¼šå…³æ³¨APIçš„è°ƒç”¨ï¼Œå®Œå…¨å±è”½äº†ä¸åŒå¼•æ“å®ç°é—´çš„å·®å¼‚ã€‚æ¯”å¦‚Selectè¯­å¥ï¼Œå…ˆä¼šåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æƒé™ï¼Œå…¶æ¬¡åˆ°ç¼“å­˜ï¼ˆå†…å­˜ï¼‰æŸ¥è¯¢æ˜¯å¦æœ‰ç›¸åº”çš„ç»“æœé›†ï¼Œå¦‚æœæ²¡æœ‰å†æ‰§è¡Œè§£æsqlï¼Œä¼˜åŒ–ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œè°ƒç”¨APIæ‰§è¡Œã€‚ SQLæ‰§è¡Œé¡ºåºSQLçš„æ‰§è¡Œé¡ºåºï¼šfromâ€”whereâ€“group byâ€”havingâ€”selectâ€”order by Mysqlå¦‚ä½•ä¿è¯ä¸€è‡´æ€§å’ŒæŒä¹…æ€§MySQLä¸ºäº†ä¿è¯ACIDä¸­çš„ä¸€è‡´æ€§å’ŒæŒä¹…æ€§ï¼Œä½¿ç”¨äº†WAL(Write-Ahead Logging,å…ˆå†™æ—¥å¿—å†å†™ç£ç›˜)ã€‚Redo logå°±æ˜¯ä¸€ç§WALçš„åº”ç”¨ã€‚å½“æ•°æ®åº“å¿½ç„¶æ‰ç”µï¼Œå†é‡æ–°å¯åŠ¨æ—¶ï¼ŒMySQLå¯ä»¥é€šè¿‡Redo logè¿˜åŸæ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ï¼Œä¸ç”¨åŒæ­¥åˆ·æ–°ç£ç›˜æ•°æ®æ–‡ä»¶ï¼Œåªéœ€è¦åŒæ­¥åˆ·æ–°Redo logå°±è¶³å¤Ÿäº†ã€‚ InnoDBçš„è¡Œé”æ¨¡å¼ å…±äº«é”(S)ï¼šç”¨æ³•lock in share modeï¼Œåˆç§°è¯»é”ï¼Œå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”ã€‚è‹¥äº‹åŠ¡Tå¯¹æ•°æ®å¯¹è±¡AåŠ ä¸ŠSé”ï¼Œåˆ™äº‹åŠ¡Tå¯ä»¥è¯»Aä½†ä¸èƒ½ä¿®æ”¹Aï¼Œå…¶ä»–äº‹åŠ¡åªèƒ½å†å¯¹AåŠ Sé”ï¼Œè€Œä¸èƒ½åŠ Xé”ï¼Œç›´åˆ°Té‡Šæ”¾Aä¸Šçš„Sé”ã€‚è¿™ä¿è¯äº†å…¶ä»–äº‹åŠ¡å¯ä»¥è¯»Aï¼Œä½†åœ¨Té‡Šæ”¾Aä¸Šçš„Sé”ä¹‹å‰ä¸èƒ½å¯¹Aåšä»»ä½•ä¿®æ”¹ã€‚ æ’ä»–é”(X)ï¼šç”¨æ³•for updateï¼Œåˆç§°å†™é”ï¼Œå…è®¸è·å–æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒçš„æ•°æ®é›†å…±äº«è¯»é”å’Œæ’ä»–å†™é”ã€‚è‹¥äº‹åŠ¡Tå¯¹æ•°æ®å¯¹è±¡AåŠ ä¸ŠXé”ï¼Œäº‹åŠ¡Tå¯ä»¥è¯»Aä¹Ÿå¯ä»¥ä¿®æ”¹Aï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½å†å¯¹AåŠ ä»»ä½•é”ï¼Œç›´åˆ°Té‡Šæ”¾Aä¸Šçš„é”ã€‚åœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼ŒInnoDBåªèƒ½ä½¿ç”¨è¡¨é”ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©B+æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ Hashç´¢å¼•ï¼šHashç´¢å¼•åº•å±‚æ˜¯å“ˆå¸Œè¡¨ï¼Œå“ˆå¸Œè¡¨æ˜¯ä¸€ç§ä»¥key-valueå­˜å‚¨æ•°æ®çš„ç»“æ„ï¼Œæ‰€ä»¥å¤šä¸ªæ•°æ®åœ¨å­˜å‚¨å…³ç³»ä¸Šæ˜¯å®Œå…¨æ²¡æœ‰ä»»ä½•é¡ºåºå…³ç³»çš„ï¼Œæ‰€ä»¥ï¼Œå¯¹äºåŒºé—´æŸ¥è¯¢æ˜¯æ— æ³•ç›´æ¥é€šè¿‡ç´¢å¼•æŸ¥è¯¢çš„ï¼Œå°±éœ€è¦å…¨è¡¨æ‰«æã€‚æ‰€ä»¥ï¼Œå“ˆå¸Œç´¢å¼•åªé€‚ç”¨äºç­‰å€¼æŸ¥è¯¢çš„åœºæ™¯ã€‚è€ŒB+ æ ‘æ˜¯ä¸€ç§å¤šè·¯å¹³è¡¡æŸ¥è¯¢æ ‘ï¼Œæ‰€ä»¥ä»–çš„èŠ‚ç‚¹æ˜¯å¤©ç„¶æœ‰åºçš„ï¼ˆå·¦å­èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹å°äºå³å­èŠ‚ç‚¹ï¼‰ï¼Œæ‰€ä»¥å¯¹äºèŒƒå›´æŸ¥è¯¢çš„æ—¶å€™ä¸éœ€è¦åšå…¨è¡¨æ‰«æ äºŒå‰æŸ¥æ‰¾æ ‘ï¼šè§£å†³äº†æ’åºçš„åŸºæœ¬é—®é¢˜ï¼Œä½†æ˜¯ç”±äºæ— æ³•ä¿è¯å¹³è¡¡ï¼Œå¯èƒ½é€€åŒ–ä¸ºé“¾è¡¨ã€‚ å¹³è¡¡äºŒå‰æ ‘ï¼šé€šè¿‡æ—‹è½¬è§£å†³äº†å¹³è¡¡çš„é—®é¢˜ï¼Œä½†æ˜¯æ—‹è½¬æ“ä½œæ•ˆç‡å¤ªä½ã€‚ çº¢é»‘æ ‘ï¼šé€šè¿‡èˆå¼ƒä¸¥æ ¼çš„å¹³è¡¡å’Œå¼•å…¥çº¢é»‘èŠ‚ç‚¹ï¼Œè§£å†³äº† AVLæ—‹è½¬æ•ˆç‡è¿‡ä½çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨ç£ç›˜ç­‰åœºæ™¯ä¸‹ï¼Œæ ‘ä»ç„¶å¤ªé«˜ï¼ŒIOæ¬¡æ•°å¤ªå¤šã€‚ B+æ ‘ï¼šåœ¨Bæ ‘çš„åŸºç¡€ä¸Šï¼Œå°†éå¶èŠ‚ç‚¹æ”¹é€ ä¸ºä¸å­˜å‚¨æ•°æ®çº¯ç´¢å¼•èŠ‚ç‚¹ï¼Œè¿›ä¸€æ­¥é™ä½äº†æ ‘çš„é«˜åº¦ï¼›æ­¤å¤–å°†å¶èŠ‚ç‚¹ä½¿ç”¨æŒ‡é’ˆè¿æ¥æˆé“¾è¡¨ï¼ŒèŒƒå›´æŸ¥è¯¢æ›´åŠ é«˜æ•ˆã€‚ B+æ ‘çš„å¶å­èŠ‚ç‚¹éƒ½å¯ä»¥å­˜å“ªäº›ä¸œè¥¿å¯èƒ½å­˜å‚¨çš„æ˜¯æ•´è¡Œæ•°æ®ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸»é”®çš„å€¼ã€‚B+æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨äº†æ•´è¡Œæ•°æ®çš„æ˜¯ä¸»é”®ç´¢å¼•ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºèšç°‡ç´¢å¼•ã€‚è€Œç´¢å¼•B+ Treeçš„å¶å­èŠ‚ç‚¹å­˜å‚¨äº†ä¸»é”®çš„å€¼çš„æ˜¯éä¸»é”®ç´¢å¼•ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºéèšç°‡ç´¢å¼• è¦†ç›–ç´¢å¼•æŒ‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œåªç”¨ä»ç´¢å¼•ä¸­å°±èƒ½å¤Ÿå–å¾—ï¼Œä¸å¿…ä»æ•°æ®è¡¨ä¸­è¯»å–ã€‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå®ç°äº†ç´¢å¼•è¦†ç›–ã€‚ æŸ¥è¯¢åœ¨ä»€ä¹ˆæ—¶å€™ä¸èµ°ï¼ˆé¢„æœŸä¸­çš„ï¼‰ç´¢å¼• æ¨¡ç³ŠæŸ¥è¯¢ %like ç´¢å¼•åˆ—å‚ä¸è®¡ç®—,ä½¿ç”¨äº†å‡½æ•° éæœ€å·¦å‰ç¼€é¡ºåº whereå¯¹nullåˆ¤æ–­ whereä¸ç­‰äº oræ“ä½œæœ‰è‡³å°‘ä¸€ä¸ªå­—æ®µæ²¡æœ‰ç´¢å¼• éœ€è¦å›è¡¨çš„æŸ¥è¯¢ç»“æœé›†è¿‡å¤§ï¼ˆè¶…è¿‡é…ç½®çš„èŒƒå›´ï¼‰ æ•°æ®åº“ä¼˜åŒ–æŒ‡å— åˆ›å»ºå¹¶ä½¿ç”¨æ­£ç¡®çš„ç´¢å¼• åªè¿”å›éœ€è¦çš„å­—æ®µ å‡å°‘äº¤äº’æ¬¡æ•°ï¼ˆæ‰¹é‡æäº¤ï¼‰ è®¾ç½®åˆç†çš„Fetch Sizeï¼ˆæ•°æ®æ¯æ¬¡è¿”å›ç»™å®¢æˆ·ç«¯çš„æ¡æ•°ï¼‰ JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ ç¨‹åºè®¡æ•°å™¨ï¼šç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨è™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚æ˜¯çº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚ Javaè™šæ‹Ÿæœºæ ˆï¼šä¸ç¨‹åºè®¡æ•°å™¨ä¸€æ ·ï¼ŒJavaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚ æœ¬åœ°æ–¹æ³•æ ˆï¼šæœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸è¿‡æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚ Javaå †ï¼šå¯¹äºå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼ŒJavaå †æ˜¯Javaè™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚Javaå †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚ åˆ†ä»£å›æ”¶HotSpot JVMæŠŠå¹´è½»ä»£åˆ†ä¸ºäº†ä¸‰éƒ¨åˆ†ï¼š1ä¸ªEdenåŒºå’Œ2ä¸ªSurvivoråŒºï¼ˆåˆ†åˆ«å«fromå’Œtoï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè¢«åˆ†é…åˆ°EdenåŒº(ä¸€äº›å¤§å¯¹è±¡ç‰¹æ®Šå¤„ç†),è¿™äº›å¯¹è±¡ç»è¿‡ç¬¬ä¸€æ¬¡Minor GCåï¼Œå¦‚æœä»ç„¶å­˜æ´»ï¼Œå°†ä¼šè¢«ç§»åˆ°SurvivoråŒºã€‚å¯¹è±¡åœ¨SurvivoråŒºä¸­æ¯ç†¬è¿‡ä¸€æ¬¡Minor GCï¼Œå¹´é¾„å°±ä¼šå¢åŠ 1å²ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œå°±ä¼šè¢«ç§»åŠ¨åˆ°å¹´è€ä»£ä¸­ã€‚ å› ä¸ºå¹´è½»ä»£ä¸­çš„å¯¹è±¡åŸºæœ¬éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œæ‰€ä»¥åœ¨å¹´è½»ä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ä½¿ç”¨çš„æ˜¯å¤åˆ¶ç®—æ³•ï¼Œå¤åˆ¶ç®—æ³•çš„åŸºæœ¬æ€æƒ³å°±æ˜¯å°†å†…å­˜åˆ†ä¸ºä¸¤å—ï¼Œæ¯æ¬¡åªç”¨å…¶ä¸­ä¸€å—ï¼Œå½“è¿™ä¸€å—å†…å­˜ç”¨å®Œï¼Œå°±å°†è¿˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ã€‚å¤åˆ¶ç®—æ³•ä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ åœ¨GCå¼€å§‹çš„æ—¶å€™ï¼Œå¯¹è±¡åªä¼šå­˜åœ¨äºEdenåŒºå’Œåä¸ºâ€œFromâ€çš„SurvivoråŒºï¼ŒSurvivoråŒºâ€œToâ€æ˜¯ç©ºçš„ã€‚ç´§æ¥ç€è¿›è¡ŒGCï¼ŒEdenåŒºä¸­æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½ä¼šè¢«å¤åˆ¶åˆ°â€œToâ€ï¼Œè€Œåœ¨â€œFromâ€åŒºä¸­ï¼Œä»å­˜æ´»çš„å¯¹è±¡ä¼šæ ¹æ®ä»–ä»¬çš„å¹´é¾„å€¼æ¥å†³å®šå»å‘ã€‚å¹´é¾„è¾¾åˆ°ä¸€å®šå€¼(å¹´é¾„é˜ˆå€¼ï¼Œå¯ä»¥é€šè¿‡**-XX:MaxTenuringThreshold**æ¥è®¾ç½®)çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°å¹´è€ä»£ä¸­ï¼Œæ²¡æœ‰è¾¾åˆ°é˜ˆå€¼çš„å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°â€œToâ€åŒºåŸŸã€‚ç»è¿‡è¿™æ¬¡GCåï¼ŒEdenåŒºå’ŒFromåŒºå·²ç»è¢«æ¸…ç©ºã€‚è¿™ä¸ªæ—¶å€™ï¼Œâ€œFromâ€å’Œâ€œToâ€ä¼šäº¤æ¢ä»–ä»¬çš„è§’è‰²ï¼Œä¹Ÿå°±æ˜¯æ–°çš„â€œToâ€å°±æ˜¯ä¸Šæ¬¡GCå‰çš„â€œFromâ€ï¼Œæ–°çš„â€œFromâ€å°±æ˜¯ä¸Šæ¬¡GCå‰çš„â€œToâ€ã€‚ä¸ç®¡æ€æ ·ï¼Œéƒ½ä¼šä¿è¯åä¸ºToçš„SurvivoråŒºåŸŸæ˜¯ç©ºçš„ã€‚Minor GCä¼šä¸€ç›´é‡å¤è¿™æ ·çš„è¿‡ç¨‹ï¼Œç›´åˆ°â€œToâ€åŒºè¢«å¡«æ»¡ï¼Œâ€œToâ€åŒºè¢«å¡«æ»¡ä¹‹åï¼Œä¼šå°†æ‰€æœ‰å¯¹è±¡ç§»åŠ¨åˆ°å¹´è€ä»£ä¸­ã€‚ å¸¸è§çš„åƒåœ¾å›æ”¶æœºåˆ¶ å¼•ç”¨è®¡æ•°æ³•ï¼šå¼•ç”¨è®¡æ•°æ³•æ˜¯ä¸€ç§ç®€å•ä½†é€Ÿåº¦å¾ˆæ…¢çš„åƒåœ¾å›æ”¶æŠ€æœ¯ã€‚æ¯ä¸ªå¯¹è±¡éƒ½å«æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨,å½“æœ‰å¼•ç”¨è¿æ¥è‡³å¯¹è±¡æ—¶,å¼•ç”¨è®¡æ•°åŠ 1ã€‚å½“å¼•ç”¨ç¦»å¼€ä½œç”¨åŸŸæˆ–è¢«ç½®ä¸ºnullæ—¶,å¼•ç”¨è®¡æ•°å‡1ã€‚è™½ç„¶ç®¡ç†å¼•ç”¨è®¡æ•°çš„å¼€é”€ä¸å¤§,ä½†è¿™é¡¹å¼€é”€åœ¨æ•´ä¸ªç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­å°†æŒç»­å‘ç”Ÿã€‚åƒåœ¾å›æ”¶å™¨ä¼šåœ¨å«æœ‰å…¨éƒ¨å¯¹è±¡çš„åˆ—è¡¨ä¸Šéå†,å½“å‘ç°æŸä¸ªå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º0æ—¶,å°±é‡Šæ”¾å…¶å ç”¨çš„ç©ºé—´ã€‚ å¯è¾¾æ€§åˆ†æç®—æ³•ï¼šè¿™ä¸ªç®—æ³•çš„åŸºæœ¬æ€è·¯å°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„ç§°ä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼ˆç”¨å›¾è®ºçš„è¯æ¥è¯´ï¼Œå°±æ˜¯ä»GC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾ï¼‰æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚ G1å’ŒCMSçš„æ¯”è¾ƒ CMSæ”¶é›†å™¨æ˜¯è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼Œå› ä¸ºCMSå·¥ä½œæ—¶ï¼ŒGCå·¥ä½œçº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œä»¥æ­¤æ¥è¾¾åˆ°é™ä½æ”¶é›†åœé¡¿æ—¶é—´çš„ç›®çš„ï¼ˆåªæœ‰åˆå§‹æ ‡è®°å’Œé‡æ–°æ ‡è®°ä¼šSTWï¼‰ã€‚ä½†æ˜¯CMSæ”¶é›†å™¨å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€‚åœ¨å¹¶å‘é˜¶æ®µï¼Œè™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼Œä½†æ˜¯ä¼šå ç”¨CPUèµ„æºè€Œå¯¼è‡´å¼•ç”¨ç¨‹åºå˜æ…¢ï¼Œæ€»ååé‡ä¸‹é™ã€‚ CMSä»…ä½œç”¨äºè€å¹´ä»£ï¼Œæ˜¯åŸºäºæ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œæ‰€ä»¥æ¸…ç†çš„è¿‡ç¨‹ä¸­ä¼šæœ‰å¤§é‡çš„ç©ºé—´ç¢ç‰‡ã€‚ CMSæ”¶é›†å™¨æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œç”±äºCMSå¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜åœ¨è¿è¡Œï¼Œä¼´éšç¨‹åºçš„è¿è¡Œè‡ªçƒ­ä¼šæœ‰æ–°çš„åƒåœ¾ä¸æ–­äº§ç”Ÿï¼Œè¿™ä¸€éƒ¨åˆ†åƒåœ¾å‡ºç°åœ¨æ ‡è®°è¿‡ç¨‹ä¹‹åï¼ŒCMSæ— æ³•åœ¨æœ¬æ¬¡æ”¶é›†ä¸­å¤„ç†å®ƒä»¬ï¼Œåªå¥½ç•™å¾…ä¸‹ä¸€æ¬¡GCæ—¶å°†å…¶æ¸…ç†æ‰ã€‚ G1æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œé€‚ç”¨äºå¤šæ ¸å¤„ç†å™¨ã€å¤§å†…å­˜å®¹é‡çš„æœåŠ¡ç«¯ç³»ç»Ÿã€‚G1èƒ½å……åˆ†åˆ©ç”¨CPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUï¼ˆCPUæˆ–è€…CPUæ ¸å¿ƒï¼‰æ¥ç¼©çŸ­STWçš„åœé¡¿æ—¶é—´ï¼Œå®ƒæ»¡è¶³çŸ­æ—¶é—´åœé¡¿çš„åŒæ—¶è¾¾åˆ°ä¸€ä¸ªé«˜çš„ååé‡ã€‚ ä»JDK 9å¼€å§‹ï¼ŒG1æˆä¸ºé»˜è®¤çš„åƒåœ¾å›æ”¶å™¨ã€‚å½“åº”ç”¨æœ‰ä»¥ä¸‹ä»»ä½•ä¸€ç§ç‰¹æ€§æ—¶éå¸¸é€‚åˆç”¨G1ï¼šFull GCæŒç»­æ—¶é—´å¤ªé•¿æˆ–è€…å¤ªé¢‘ç¹ï¼›å¯¹è±¡çš„åˆ›å»ºé€Ÿç‡å’Œå­˜æ´»ç‡å˜åŠ¨å¾ˆå¤§ï¼›åº”ç”¨ä¸å¸Œæœ›åœé¡¿æ—¶é—´é•¿(é•¿äº0.5sç”šè‡³1s)ã€‚ G1å°†ç©ºé—´åˆ’åˆ†æˆå¾ˆå¤šå—ï¼ˆRegionï¼‰ï¼Œç„¶åä»–ä»¬å„è‡ªè¿›è¡Œå›æ”¶ã€‚å †æ¯”è¾ƒå¤§çš„æ—¶å€™å¯ä»¥é‡‡ç”¨ï¼Œé‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼Œç¢ç‰‡åŒ–é—®é¢˜ä¸ä¸¥é‡ã€‚æ•´ä½“ä¸Šçœ‹å±äºæ ‡è®°æ•´ç†ç®—æ³•,å±€éƒ¨(regionä¹‹é—´)å±äºå¤åˆ¶ç®—æ³•ã€‚ G1 éœ€è¦è®°å¿†é›† (å…·ä½“æ¥è¯´æ˜¯å¡è¡¨)æ¥è®°å½•æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œè¿™ç§æ•°æ®ç»“æ„åœ¨ G1 ä¸­éœ€è¦å ç”¨å¤§é‡çš„å†…å­˜ï¼Œå¯èƒ½è¾¾åˆ°æ•´ä¸ªå †å†…å­˜å®¹é‡çš„ 20% ç”šè‡³æ›´å¤šã€‚è€Œä¸” G1 ä¸­ç»´æŠ¤è®°å¿†é›†çš„æˆæœ¬è¾ƒé«˜ï¼Œå¸¦æ¥äº†æ›´é«˜çš„æ‰§è¡Œè´Ÿè½½ï¼Œå½±å“æ•ˆç‡ã€‚æ‰€ä»¥ CMS åœ¨å°å†…å­˜åº”ç”¨ä¸Šçš„è¡¨ç°è¦ä¼˜äº G1ï¼Œè€Œå¤§å†…å­˜åº”ç”¨ä¸Š G1 æ›´æœ‰ä¼˜åŠ¿ï¼Œå¤§å°å†…å­˜çš„ç•Œé™æ˜¯6GBåˆ°8GBã€‚ å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸ºGC Roots è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚ æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚ æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚ æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚ GCä¸­Stop the worldï¼ˆSTWï¼‰åœ¨æ‰§è¡Œåƒåœ¾æ”¶é›†ç®—æ³•æ—¶ï¼ŒJavaåº”ç”¨ç¨‹åºçš„å…¶ä»–æ‰€æœ‰é™¤äº†åƒåœ¾æ”¶é›†æ”¶é›†å™¨çº¿ç¨‹ä¹‹å¤–çš„çº¿ç¨‹éƒ½è¢«æŒ‚èµ·ã€‚æ­¤æ—¶ï¼Œç³»ç»Ÿåªèƒ½å…è®¸GCçº¿ç¨‹è¿›è¡Œè¿è¡Œï¼Œå…¶ä»–çº¿ç¨‹åˆ™ä¼šå…¨éƒ¨æš‚åœï¼Œç­‰å¾…GCçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰èƒ½å†æ¬¡è¿è¡Œã€‚è¿™äº›å·¥ä½œéƒ½æ˜¯ç”±è™šæ‹Ÿæœºåœ¨åå°è‡ªåŠ¨å‘èµ·å’Œè‡ªåŠ¨å®Œæˆçš„ï¼Œæ˜¯åœ¨ç”¨æˆ·ä¸å¯è§çš„æƒ…å†µä¸‹æŠŠç”¨æˆ·æ­£å¸¸å·¥ä½œçš„çº¿ç¨‹å…¨éƒ¨åœä¸‹æ¥ï¼Œè¿™å¯¹äºå¾ˆå¤šçš„åº”ç”¨ç¨‹åºï¼Œå°¤å…¶æ˜¯é‚£äº›å¯¹äºå®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„ç¨‹åºæ¥è¯´æ˜¯éš¾ä»¥æ¥å—çš„ã€‚ ä½†ä¸æ˜¯è¯´GCå¿…é¡»STW,ä½ ä¹Ÿå¯ä»¥é€‰æ‹©é™ä½è¿è¡Œé€Ÿåº¦ä½†æ˜¯å¯ä»¥å¹¶å‘æ‰§è¡Œçš„æ”¶é›†ç®—æ³•ï¼Œè¿™å–å†³äºä½ çš„ä¸šåŠ¡ã€‚ åƒåœ¾å›æ”¶ç®—æ³• åœæ­¢-å¤åˆ¶ï¼šå…ˆæš‚åœç¨‹åºçš„è¿è¡Œ,ç„¶åå°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ä»å½“å‰å †å¤åˆ¶åˆ°å¦ä¸€ä¸ªå †,æ²¡æœ‰è¢«å¤åˆ¶çš„å¯¹è±¡å…¨éƒ¨éƒ½æ˜¯åƒåœ¾ã€‚å½“å¯¹è±¡è¢«å¤åˆ¶åˆ°æ–°å †æ—¶,å®ƒä»¬æ˜¯ä¸€ä¸ªæŒ¨ç€ä¸€ä¸ªçš„,æ‰€ä»¥æ–°å †ä¿æŒç´§å‡‘æ’åˆ—,ç„¶åå°±å¯ä»¥æŒ‰å‰è¿°æ–¹æ³•ç®€å•,ç›´æ¥çš„åˆ†é…äº†ã€‚ç¼ºç‚¹æ˜¯ä¸€æµªè´¹ç©ºé—´,ä¸¤ä¸ªå †ä¹‹é—´è¦æ¥å›å€’è…¾,äºŒæ˜¯å½“ç¨‹åºè¿›å…¥ç¨³å®šæ€æ—¶,å¯èƒ½åªä¼šäº§ç”Ÿæå°‘çš„åƒåœ¾,ç”šè‡³ä¸äº§ç”Ÿåƒåœ¾,å°½ç®¡å¦‚æ­¤,å¤åˆ¶å¼å›æ”¶å™¨ä»ä¼šå°†æ‰€æœ‰å†…å­˜è‡ªä¸€å¤„å¤åˆ¶åˆ°å¦ä¸€å¤„ã€‚ æ ‡è®°-æ¸…é™¤ï¼šåŒæ ·æ˜¯ä»å †æ ˆå’Œé™æ€å­˜å‚¨åŒºå‡ºå‘,éå†æ‰€æœ‰çš„å¼•ç”¨,è¿›è€Œæ‰¾å‡ºæ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ã€‚æ¯å½“å®ƒæ‰¾åˆ°ä¸€ä¸ªå­˜æ´»çš„å¯¹è±¡,å°±ä¼šç»™å¯¹è±¡ä¸€ä¸ªæ ‡è®°,è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸ä¼šå›æ”¶ä»»ä½•å¯¹è±¡ã€‚åªæœ‰å…¨éƒ¨æ ‡è®°å·¥ä½œå®Œæˆçš„æ—¶å€™,æ¸…ç†åŠ¨ä½œæ‰ä¼šå¼€å§‹ã€‚åœ¨æ¸…ç†è¿‡ç¨‹ä¸­,æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ä¼šè¢«é‡Šæ”¾,ä¸ä¼šå‘ç”Ÿä»»ä½•å¤åˆ¶åŠ¨ä½œã€‚æ‰€ä»¥å‰©ä¸‹çš„å †ç©ºé—´æ˜¯ä¸è¿ç»­çš„,åƒåœ¾å›æ”¶å™¨å¦‚æœè¦å¸Œæœ›å¾—åˆ°è¿ç»­ç©ºé—´çš„è¯,å°±å¾—é‡æ–°æ•´ç†å‰©ä¸‹çš„å¯¹è±¡ã€‚ æ ‡è®°-æ•´ç†ï¼šå®ƒçš„ç¬¬ä¸€ä¸ªé˜¶æ®µä¸æ ‡è®°&#x2F;æ¸…é™¤ç®—æ³•æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå‡æ˜¯éå†GC Rootsï¼Œç„¶åå°†å­˜æ´»çš„å¯¹è±¡æ ‡è®°ã€‚ç§»åŠ¨æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ï¼Œä¸”æŒ‰ç…§å†…å­˜åœ°å€æ¬¡åºä¾æ¬¡æ’åˆ—ï¼Œç„¶åå°†æœ«ç«¯å†…å­˜åœ°å€ä»¥åçš„å†…å­˜å…¨éƒ¨å›æ”¶ã€‚å› æ­¤ï¼Œç¬¬äºŒé˜¶æ®µæ‰ç§°ä¸ºæ•´ç†é˜¶æ®µã€‚ åˆ†ä»£æ”¶é›†ç®—æ³•ï¼šæŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œç„¶åæ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€åˆé€‚çš„æ”¶é›†ç®—æ³•ã€‚æ–°ç”Ÿä»£ä¸­ï¼Œå¯¹è±¡çš„å­˜æ´»ç‡æ¯”è¾ƒä½ï¼Œæ‰€ä»¥é€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£ä¸­å¯¹è±¡å­˜æ´»ç‡é«˜ä¸”æ²¡æœ‰é¢å¤–ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œæ‰€ä»¥ä½¿ç”¨â€œæ ‡è®°-æ¸…é™¤â€æˆ–â€œæ ‡è®°-æ•´ç†â€ç®—æ³•è¿›è¡Œå›æ”¶ã€‚ Minor GCå’ŒFull GCè§¦å‘æ¡ä»¶ Minor GCè§¦å‘æ¡ä»¶ï¼šå½“EdenåŒºæ»¡æ—¶ï¼Œè§¦å‘Minor GCã€‚ Full GCè§¦å‘æ¡ä»¶ï¼š è°ƒç”¨System.gcæ—¶ï¼Œç³»ç»Ÿå»ºè®®æ‰§è¡ŒFull GCï¼Œä½†æ˜¯ä¸å¿…ç„¶æ‰§è¡Œ è€å¹´ä»£ç©ºé—´ä¸è¶³ æ–¹æ³•åŒºç©ºé—´ä¸è¶³ é€šè¿‡Minor GCåè¿›å…¥è€å¹´ä»£çš„å¹³å‡å¤§å°å¤§äºè€å¹´ä»£çš„å¯ç”¨å†…å­˜ ç”±EdenåŒºã€From SpaceåŒºå‘To SpaceåŒºå¤åˆ¶æ—¶ï¼Œå¯¹è±¡å¤§å°å¤§äºTo Spaceå¯ç”¨å†…å­˜ï¼Œåˆ™æŠŠè¯¥å¯¹è±¡è½¬å­˜åˆ°è€å¹´ä»£ï¼Œä¸”è€å¹´ä»£çš„å¯ç”¨å†…å­˜å°äºè¯¥å¯¹è±¡å¤§å° JVMç±»åŠ è½½è¿‡ç¨‹ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œåˆ°å¸è½½å‡ºå†…å­˜ä¸ºæ­¢ï¼Œå®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½7ä¸ªé˜¶æ®µã€‚ åŠ è½½ï¼šé€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œå°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•å»è¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ éªŒè¯ï¼šéªŒè¯æ˜¯è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿè‡ªèº«çš„å®‰å…¨ã€‚ å‡†å¤‡ï¼šå‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•å»ä¸­è¿›è¡Œåˆ†é…ã€‚è¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…åŒ…æ‹¬ç±»å˜é‡ï¼ˆstaticï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚ è§£æï¼šè§£æé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·ï¼ˆClassæ–‡ä»¶å†…çš„ç¬¦å·ï¼‰å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰çš„è¿‡ç¨‹ã€‚ åˆå§‹åŒ–ï¼šåˆå§‹åŒ–é˜¶æ®µæ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„æœ€åä¸€æ­¥ï¼Œå¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç ï¼ˆå­—èŠ‚ç ï¼‰ã€‚ åŒäº²å§”æ´¾æ¨¡å‹åŒäº²å§”æ´¾çš„æ„æ€æ˜¯å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨éœ€è¦åŠ è½½ç±»ï¼Œé‚£ä¹ˆé¦–å…ˆå®ƒä¼šæŠŠè¿™ä¸ªç±»è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œæ¯ä¸€å±‚éƒ½æ˜¯å¦‚æ­¤ã€‚ä¸€ç›´é€’å½’åˆ°é¡¶å±‚ï¼Œå½“çˆ¶åŠ è½½å™¨æ— æ³•å®Œæˆè¿™ä¸ªè¯·æ±‚æ—¶ï¼Œå­ç±»æ‰ä¼šå°è¯•å»åŠ è½½ã€‚ JVMé”ä¼˜åŒ–å’Œè†¨èƒ€è¿‡ç¨‹ è‡ªæ—‹é”ï¼šè‡ªæ—‹é”å…¶å®å°±æ˜¯åœ¨æ‹¿é”æ—¶å‘ç°å·²ç»æœ‰çº¿ç¨‹æ‹¿äº†é”ï¼Œè‡ªå·±å¦‚æœå»æ‹¿ä¼šé˜»å¡è‡ªå·±ï¼Œè¿™ä¸ªæ—¶å€™ä¼šé€‰æ‹©è¿›è¡Œä¸€æ¬¡å¿™å¾ªç¯å°è¯•ã€‚ä¹Ÿå°±æ˜¯ä¸åœå¾ªç¯çœ‹æ˜¯å¦èƒ½ç­‰åˆ°ä¸Šä¸ªçº¿ç¨‹è‡ªå·±é‡Šæ”¾é”ã€‚è‡ªé€‚åº”è‡ªæ—‹é”æŒ‡çš„æ˜¯ä¾‹å¦‚ç¬¬ä¸€æ¬¡è®¾ç½®æœ€å¤šè‡ªæ—‹10æ¬¡ï¼Œç»“æœåœ¨è‡ªæ—‹çš„è¿‡ç¨‹ä¸­æˆåŠŸè·å¾—äº†é”ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡å°±å¯ä»¥è®¾ç½®æˆæœ€å¤šè‡ªæ—‹20æ¬¡ã€‚ é”ç²—åŒ–ï¼šè™šæ‹Ÿæœºé€šè¿‡é€‚å½“æ‰©å¤§åŠ é”çš„èŒƒå›´ä»¥é¿å…é¢‘ç¹çš„æ‹¿é”é‡Šæ”¾é”çš„è¿‡ç¨‹ã€‚ é”æ¶ˆé™¤ï¼šé€šè¿‡é€ƒé€¸åˆ†æå‘ç°å…¶å®æ ¹æœ¬å°±æ²¡æœ‰åˆ«çš„çº¿ç¨‹äº§ç”Ÿç«äº‰çš„å¯èƒ½ï¼ˆåˆ«çš„çº¿ç¨‹æ²¡æœ‰ä¸´ç•Œé‡çš„å¼•ç”¨ï¼‰ï¼Œæˆ–è€…åŒæ­¥å—å†…è¿›è¡Œçš„æ˜¯åŸå­æ“ä½œï¼Œè€Œâ€œè‡ªä½œå¤šæƒ…â€åœ°ç»™è‡ªå·±åŠ ä¸Šäº†é”ã€‚æœ‰å¯èƒ½è™šæ‹Ÿæœºä¼šç›´æ¥å»æ‰è¿™ä¸ªé”ã€‚ åå‘é”ï¼šåœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹çš„ç«äº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€ä¸ªçº¿ç¨‹è·å¾—ã€‚å› æ­¤ä¸ºäº†è®©çº¿ç¨‹è·å¾—é”çš„ä»£ä»·æ›´ä½å¼•å…¥äº†åå‘é”çš„æ¦‚å¿µã€‚åå‘é”çš„æ„æ€æ˜¯å¦‚æœä¸€ä¸ªçº¿ç¨‹è·å¾—äº†ä¸€ä¸ªåå‘é”ï¼Œå¦‚æœåœ¨æ¥ä¸‹æ¥çš„ä¸€æ®µæ—¶é—´ä¸­æ²¡æœ‰å…¶ä»–çº¿ç¨‹æ¥ç«äº‰é”ï¼Œé‚£ä¹ˆæŒæœ‰åå‘é”çš„çº¿ç¨‹å†æ¬¡è¿›å…¥æˆ–è€…é€€å‡ºåŒä¸€ä¸ªåŒæ­¥ä»£ç å—ï¼Œä¸éœ€è¦å†æ¬¡è¿›è¡ŒæŠ¢å é”å’Œé‡Šæ”¾é”çš„æ“ä½œã€‚ è½»é‡çº§é”ï¼šå½“å­˜åœ¨è¶…è¿‡ä¸€ä¸ªçº¿ç¨‹åœ¨ç«äº‰åŒä¸€ä¸ªåŒæ­¥ä»£ç å—æ—¶ï¼Œä¼šå‘ç”Ÿåå‘é”çš„æ’¤é”€ã€‚å½“å‰çº¿ç¨‹ä¼šå°è¯•ä½¿ç”¨CASæ¥è·å–é”ï¼Œå½“è‡ªæ—‹è¶…è¿‡æŒ‡å®šæ¬¡æ•°(å¯ä»¥è‡ªå®šä¹‰)æ—¶ä»ç„¶æ— æ³•è·å¾—é”ï¼Œæ­¤æ—¶é”ä¼šè†¨èƒ€å‡çº§ä¸ºé‡é‡çº§é”ã€‚ é‡é‡çº§é”ï¼šé‡é‡çº§é”ä¾èµ–å¯¹è±¡å†…éƒ¨çš„monitoré”æ¥å®ç°ï¼Œè€Œmonitoråˆä¾èµ–æ“ä½œç³»ç»Ÿçš„MutexLockï¼ˆäº’æ–¥é”ï¼‰ã€‚å½“ç³»ç»Ÿæ£€æŸ¥åˆ°æ˜¯é‡é‡çº§é”ä¹‹åï¼Œä¼šæŠŠç­‰å¾…æƒ³è¦è·å–é”çš„çº¿ç¨‹é˜»å¡ï¼Œè¢«é˜»å¡çš„çº¿ç¨‹ä¸ä¼šæ¶ˆè€—CPUï¼Œä½†æ˜¯é˜»å¡æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæ¥å®ç°ã€‚ ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å¼€å§‹ç±»åŠ è½½è¿‡ç¨‹çš„ç¬¬ä¸€ä¸ªé˜¶æ®µåŠ è½½ é‡åˆ°newã€getstaticã€putstaticæˆ–invokestaticè¿™4æ¡å­—èŠ‚ç æŒ‡ä»¤æ—¶ï¼Œå¦‚æœç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚ç”Ÿæˆè¿™4æ¡æŒ‡ä»¤çš„æœ€å¸¸è§çš„Javaä»£ç åœºæ™¯æ˜¯ï¼šä½¿ç”¨newå…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ã€è¯»å–æˆ–è®¾ç½®ä¸€ä¸ªç±»çš„é™æ€å­—æ®µï¼ˆè¢«finalä¿®é¥°ã€å·²åœ¨ç¼–è¯‘æœŸæŠŠç»“æœæ”¾å…¥å¸¸é‡æ± çš„é™æ€å­—æ®µé™¤å¤–ï¼‰çš„æ—¶å€™ï¼Œä»¥åŠè°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•çš„æ—¶å€™ã€‚ ä½¿ç”¨java.lang.reflectåŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚ å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œç”¨æˆ·éœ€è¦æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»ï¼ˆåŒ…å«mainï¼ˆï¼‰æ–¹æ³•çš„é‚£ä¸ªç±»ï¼‰ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªä¸»ç±»ã€‚ i++æ“ä½œçš„å­—èŠ‚ç æŒ‡ä»¤ å°†intç±»å‹å¸¸é‡åŠ è½½åˆ°æ“ä½œæ•°æ ˆé¡¶ å°†intç±»å‹æ•°å€¼ä»æ“ä½œæ•°æ ˆé¡¶å–å‡ºï¼Œå¹¶å­˜å‚¨åˆ°åˆ°å±€éƒ¨å˜é‡è¡¨çš„ç¬¬1ä¸ªSlotä¸­ å°†intç±»å‹å˜é‡ä»å±€éƒ¨å˜é‡è¡¨çš„ç¬¬1ä¸ªSlotä¸­å–å‡ºï¼Œå¹¶æ”¾åˆ°æ“ä½œæ•°æ ˆé¡¶ å°†å±€éƒ¨å˜é‡è¡¨çš„ç¬¬1ä¸ªSlotä¸­çš„intç±»å‹å˜é‡åŠ 1 è¡¨ç¤ºå°†intç±»å‹æ•°å€¼ä»æ“ä½œæ•°æ ˆé¡¶å–å‡ºï¼Œå¹¶å­˜å‚¨åˆ°åˆ°å±€éƒ¨å˜é‡è¡¨çš„ç¬¬1ä¸ªSlotä¸­ï¼Œå³iä¸­ JavaåŸºç¡€(é‡ç‚¹)HashMapå’ŒConcurrentHashMapç”±äºHashMapæ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„ï¼Œè™½ç„¶å¤„ç†æ•°æ®çš„æ•ˆç‡é«˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å­˜åœ¨ç€å®‰å…¨é—®é¢˜ï¼Œå› æ­¤è®¾è®¡äº†CurrentHashMapæ¥è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ HashMapåœ¨putçš„æ—¶å€™ï¼Œæ’å…¥çš„å…ƒç´ è¶…è¿‡äº†å®¹é‡ï¼ˆç”±è´Ÿè½½å› å­å†³å®šï¼‰çš„èŒƒå›´å°±ä¼šè§¦å‘æ‰©å®¹æ“ä½œï¼Œå°±æ˜¯rehashï¼Œè¿™ä¸ªä¼šé‡æ–°å°†åŸæ•°ç»„çš„å†…å®¹é‡æ–°hashåˆ°æ–°çš„æ‰©å®¹æ•°ç»„ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œå­˜åœ¨åŒæ—¶å…¶ä»–çš„å…ƒç´ ä¹Ÿåœ¨è¿›è¡Œputæ“ä½œï¼Œå¦‚æœhashå€¼ç›¸åŒï¼Œå¯èƒ½å‡ºç°åŒæ—¶åœ¨åŒä¸€æ•°ç»„ä¸‹ç”¨é“¾è¡¨è¡¨ç¤ºï¼Œé€ æˆé—­ç¯ï¼Œå¯¼è‡´åœ¨getæ—¶ä¼šå‡ºç°æ­»å¾ªç¯ï¼Œæ‰€ä»¥HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚ HashMapçš„ç¯ï¼šè‹¥å½“å‰çº¿ç¨‹æ­¤æ—¶è·å¾—ertryèŠ‚ç‚¹ï¼Œä½†æ˜¯è¢«çº¿ç¨‹ä¸­æ–­æ— æ³•ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶çº¿ç¨‹äºŒè¿›å…¥transferå‡½æ•°ï¼Œå¹¶æŠŠå‡½æ•°é¡ºåˆ©æ‰§è¡Œï¼Œæ­¤æ—¶æ–°è¡¨ä¸­çš„æŸä¸ªä½ç½®æœ‰äº†èŠ‚ç‚¹ï¼Œä¹‹åçº¿ç¨‹ä¸€è·å¾—æ‰§è¡Œæƒç»§ç»­æ‰§è¡Œï¼Œå› ä¸ºå¹¶å‘transferï¼Œæ‰€ä»¥ä¸¤è€…éƒ½æ˜¯æ‰©å®¹çš„åŒä¸€ä¸ªé“¾è¡¨ï¼Œå½“çº¿ç¨‹ä¸€æ‰§è¡Œåˆ°e.next &#x3D; new table[i] çš„æ—¶å€™ï¼Œç”±äºçº¿ç¨‹äºŒä¹‹å‰æ•°æ®è¿ç§»çš„åŸå› å¯¼è‡´æ­¤æ—¶new table[i] ä¸Šå°±æœ‰ertryå­˜åœ¨ï¼Œæ‰€ä»¥çº¿ç¨‹ä¸€æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå°†nextèŠ‚ç‚¹ï¼Œè®¾ç½®ä¸ºè‡ªå·±ï¼Œå¯¼è‡´è‡ªå·±äº’ç›¸ä½¿ç”¨nextå¼•ç”¨å¯¹æ–¹ï¼Œå› æ­¤äº§ç”Ÿé“¾è¡¨ï¼Œå¯¼è‡´æ­»å¾ªç¯ã€‚ åœ¨JDK1.7ç‰ˆæœ¬ä¸­ï¼ŒConcurrentHashMapç»´æŠ¤äº†ä¸€ä¸ªSegmentæ•°ç»„ï¼ŒSegmentè¿™ä¸ªç±»ç»§æ‰¿äº†é‡å…¥é”ReentrantLockï¼Œå¹¶ä¸”è¯¥ç±»é‡Œé¢ç»´æŠ¤äº†ä¸€ä¸ª HashEntry&lt;K,V&gt;[] tableæ•°ç»„ï¼Œåœ¨å†™æ“ä½œputï¼Œremoveï¼Œæ‰©å®¹çš„æ—¶å€™ï¼Œä¼šå¯¹SegmentåŠ é”ï¼Œæ‰€ä»¥ä»…ä»…å½±å“è¿™ä¸ªSegmentï¼Œä¸åŒçš„Segmentè¿˜æ˜¯å¯ä»¥å¹¶å‘çš„ï¼Œæ‰€ä»¥è§£å†³äº†çº¿ç¨‹çš„å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶åˆé‡‡ç”¨äº†åˆ†æ®µé”ä¹Ÿæå‡äº†å¹¶å‘çš„æ•ˆç‡ã€‚åœ¨JDK1.8ç‰ˆæœ¬ä¸­ï¼ŒConcurrentHashMapæ‘’å¼ƒäº†Segmentçš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨Nodeæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨Synchronizedå’ŒCASæ¥æ“ä½œï¼Œæ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„HashMapã€‚ HashMapå¦‚æœæˆ‘æƒ³è¦è®©è‡ªå·±çš„Objectä½œä¸ºKåº”è¯¥æ€ä¹ˆåŠ é‡å†™**hashCode()**æ˜¯å› ä¸ºéœ€è¦è®¡ç®—å­˜å‚¨æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œéœ€è¦æ³¨æ„ä¸è¦è¯•å›¾ä»æ•£åˆ—ç è®¡ç®—ä¸­æ’é™¤æ‰ä¸€ä¸ªå¯¹è±¡çš„å…³é”®éƒ¨åˆ†æ¥æé«˜æ€§èƒ½ï¼Œè¿™æ ·è™½ç„¶èƒ½æ›´å¿«ä½†å¯èƒ½ä¼šå¯¼è‡´æ›´å¤šçš„Hashç¢°æ’ï¼› é‡å†™equals()æ–¹æ³•ï¼Œéœ€è¦éµå®ˆè‡ªåæ€§ã€å¯¹ç§°æ€§ã€ä¼ é€’æ€§ã€ä¸€è‡´æ€§ä»¥åŠå¯¹äºä»»ä½•énullçš„å¼•ç”¨å€¼xï¼Œx.equals(null)å¿…é¡»è¿”å›falseçš„è¿™å‡ ä¸ªç‰¹æ€§ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯keyåœ¨å“ˆå¸Œè¡¨ä¸­çš„å”¯ä¸€æ€§ï¼› volatilevolatileåœ¨å¤šå¤„ç†å™¨å¼€å‘ä¸­ä¿è¯äº†å…±äº«å˜é‡çš„â€œ å¯è§æ€§â€ã€‚å¯è§æ€§çš„æ„æ€æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹ä¸€ä¸ªå…±äº«å˜é‡æ—¶ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½è¯»åˆ°è¿™ä¸ªä¿®æ”¹çš„å€¼ã€‚(å…±äº«å†…å­˜ï¼Œç§æœ‰å†…å­˜) Atomicç±»çš„CASæ“ä½œCASæ˜¯è‹±æ–‡å•è¯CompareAndSwapçš„ç¼©å†™ï¼Œä¸­æ–‡æ„æ€æ˜¯ï¼šæ¯”è¾ƒå¹¶æ›¿æ¢ã€‚CASéœ€è¦æœ‰3ä¸ªæ“ä½œæ•°ï¼šå†…å­˜åœ°å€Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œå³å°†è¦æ›´æ–°çš„ç›®æ ‡å€¼Bã€‚CASæŒ‡ä»¤æ‰§è¡Œæ—¶ï¼Œå½“ä¸”ä»…å½“å†…å­˜åœ°å€Vçš„å€¼ä¸é¢„æœŸå€¼Aç›¸ç­‰æ—¶ï¼Œå°†å†…å­˜åœ°å€Vçš„å€¼ä¿®æ”¹ä¸ºBï¼Œå¦åˆ™å°±ä»€ä¹ˆéƒ½ä¸åšã€‚æ•´ä¸ªæ¯”è¾ƒå¹¶æ›¿æ¢çš„æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚å¦‚ Intel å¤„ç†å™¨ï¼Œæ¯”è¾ƒå¹¶äº¤æ¢é€šè¿‡æŒ‡ä»¤çš„ cmpxchg ç³»åˆ—å®ç°ã€‚ CASæ“ä½œABAé—®é¢˜ï¼šå¦‚æœåœ¨è¿™æ®µæœŸé—´å®ƒçš„å€¼æ›¾ç»è¢«æ”¹æˆäº†Bï¼Œåæ¥åˆè¢«æ”¹å›ä¸ºAï¼Œé‚£CASæ“ä½œå°±ä¼šè¯¯è®¤ä¸ºå®ƒä»æ¥æ²¡æœ‰è¢«æ”¹å˜è¿‡ã€‚Javaå¹¶å‘åŒ…ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæä¾›äº†ä¸€ä¸ªå¸¦æœ‰æ ‡è®°çš„åŸå­å¼•ç”¨ç±»â€œAtomicStampedReferenceâ€ï¼Œå®ƒå¯ä»¥é€šè¿‡æ§åˆ¶å˜é‡å€¼çš„ç‰ˆæœ¬æ¥ä¿è¯CASçš„æ­£ç¡®æ€§ã€‚ Synchronizedå’ŒLockçš„åŒºåˆ« é¦–å…ˆsynchronizedæ˜¯javaå†…ç½®å…³é”®å­—åœ¨jvmå±‚é¢ï¼ŒLockæ˜¯ä¸ªjavaç±»ã€‚ synchronizedæ— æ³•åˆ¤æ–­æ˜¯å¦è·å–é”çš„çŠ¶æ€ï¼ŒLockå¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”ï¼Œå¹¶ä¸”å¯ä»¥ä¸»åŠ¨å°è¯•å»è·å–é”ã€‚ synchronizedä¼šè‡ªåŠ¨é‡Šæ”¾é”(a çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ä¼šé‡Šæ”¾é” ï¼›b çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ä¼šé‡Šæ”¾é”)ï¼ŒLockéœ€åœ¨finallyä¸­æ‰‹å·¥é‡Šæ”¾é”ï¼ˆunlock()æ–¹æ³•é‡Šæ”¾é”ï¼‰ï¼Œå¦åˆ™å®¹æ˜“é€ æˆçº¿ç¨‹æ­»é”ã€‚ ç”¨synchronizedå…³é”®å­—çš„ä¸¤ä¸ªçº¿ç¨‹1å’Œçº¿ç¨‹2ï¼Œå¦‚æœå½“å‰çº¿ç¨‹1è·å¾—é”ï¼Œçº¿ç¨‹2çº¿ç¨‹ç­‰å¾…ã€‚å¦‚æœçº¿ç¨‹1é˜»å¡ï¼Œçº¿ç¨‹2åˆ™ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€ŒLocké”å°±ä¸ä¸€å®šä¼šç­‰å¾…ä¸‹å»ï¼Œå¦‚æœå°è¯•è·å–ä¸åˆ°é”ï¼Œçº¿ç¨‹å¯ä»¥ä¸ç”¨ä¸€ç›´ç­‰å¾…å°±ç»“æŸäº†ã€‚ synchronizedçš„é”å¯é‡å…¥ã€ä¸å¯ä¸­æ–­ã€éå…¬å¹³ï¼Œè€ŒLocké”å¯é‡å…¥ã€å¯åˆ¤æ–­ã€å¯å…¬å¹³ï¼ˆä¸¤è€…çš†å¯ï¼‰ Locké”é€‚åˆå¤§é‡åŒæ­¥çš„ä»£ç çš„åŒæ­¥é—®é¢˜ï¼Œsynchronizedé”é€‚åˆä»£ç å°‘é‡çš„åŒæ­¥é—®é¢˜ã€‚ AQSç†è®ºçš„æ•°æ®ç»“æ„AQSå†…éƒ¨æœ‰3ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯stateï¼ˆç”¨äºè®¡æ•°å™¨ï¼Œç±»ä¼¼gcçš„å›æ”¶è®¡æ•°å™¨ï¼‰ï¼Œä¸€ä¸ªæ˜¯çº¿ç¨‹æ ‡è®°ï¼ˆå½“å‰çº¿ç¨‹æ˜¯è°åŠ é”çš„ï¼‰ï¼Œä¸€ä¸ªæ˜¯é˜»å¡é˜Ÿåˆ—ã€‚ å¦‚ä½•æŒ‡å®šå¤šä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåº è®¾å®šä¸€ä¸ª orderNumï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸä¹‹åï¼Œæ›´æ–° orderNumï¼ŒæŒ‡æ˜ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„çº¿ç¨‹ã€‚å¹¶ä¸”å”¤é†’æ‰€æœ‰çš„ç­‰å¾…çº¿ç¨‹ã€‚ åœ¨æ¯ä¸€ä¸ªçº¿ç¨‹çš„å¼€å§‹ï¼Œè¦ while åˆ¤æ–­ orderNum æ˜¯å¦ç­‰äºè‡ªå·±çš„è¦æ±‚å€¼ï¼Œä¸æ˜¯ï¼Œåˆ™ waitï¼Œæ˜¯åˆ™æ‰§è¡Œæœ¬çº¿ç¨‹ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ±  å‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„æ¬¡æ•°ï¼Œæ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½å¯ä»¥è¢«é‡å¤åˆ©ç”¨ï¼Œå¯æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„æ‰¿å—èƒ½åŠ›ï¼Œè°ƒæ•´çº¿ç¨‹æ± ä¸­å·¥ä½œçº¿ç¨‹çš„æ•°ç›®ï¼Œæ”¾ç½®å› ä¸ºæ¶ˆè€—è¿‡å¤šçš„å†…å­˜ï¼Œè€ŒæŠŠæœåŠ¡å™¨ç´¯è¶´ä¸‹ æ ¸å¿ƒçº¿ç¨‹æ± ThreadPoolExecutorå†…éƒ¨å‚æ•° corePoolSizeï¼šæŒ‡å®šäº†çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡ maximumPoolSizeï¼šæŒ‡å®šäº†çº¿ç¨‹æ± ä¸­çš„æœ€å¤§çº¿ç¨‹æ•°é‡ keepAliveTimeï¼šçº¿ç¨‹æ± ç»´æŠ¤çº¿ç¨‹æ‰€å…è®¸çš„ç©ºé—²æ—¶é—´ unit: keepAliveTime çš„å•ä½ã€‚ workQueueï¼šä»»åŠ¡é˜Ÿåˆ—ï¼Œè¢«æäº¤ä½†å°šæœªè¢«æ‰§è¡Œçš„ä»»åŠ¡ã€‚ threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºçº¿ç¨‹ï¼Œä¸€èˆ¬ç”¨é»˜è®¤çš„å³å¯ã€‚ handlerï¼šæ‹’ç»ç­–ç•¥ã€‚å½“ä»»åŠ¡å¤ªå¤šæ¥ä¸åŠå¤„ç†ï¼Œå¦‚ä½•æ‹’ç»ä»»åŠ¡ã€‚ çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ ThreadPoolExecutor.AbortPolicy:ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚ ThreadPoolExecutor.DiscardPolicyï¼šä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ ThreadPoolExecutor.DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°æäº¤è¢«æ‹’ç»çš„ä»»åŠ¡ ThreadPoolExecutor.CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹ï¼ˆæäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼‰å¤„ç†è¯¥ä»»åŠ¡ çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡æ€ä¹ˆç¡®å®š ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ˜¯CPUå¯†é›†å‹åº”ç”¨ï¼Œåˆ™çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸ºN+1ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ˜¯IOå¯†é›†å‹åº”ç”¨ï¼Œåˆ™çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸º2N+1ã€‚ åœ¨IOä¼˜åŒ–ä¸­ï¼Œçº¿ç¨‹ç­‰å¾…æ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œéœ€è¦è¶Šå¤šçº¿ç¨‹ï¼Œçº¿ç¨‹CPUæ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œéœ€è¦è¶Šå°‘çº¿ç¨‹ã€‚è¿™æ ·çš„ä¼°ç®—å…¬å¼å¯èƒ½æ›´é€‚åˆï¼šæœ€ä½³çº¿ç¨‹æ•°ç›® &#x3D; ï¼ˆï¼ˆçº¿ç¨‹ç­‰å¾…æ—¶é—´+çº¿ç¨‹CPUæ—¶é—´ï¼‰&#x2F;çº¿ç¨‹CPUæ—¶é—´ ï¼‰* CPUæ•°ç›® ThreadLocalçš„åŸç†å’Œå®ç°ThreadLoal å˜é‡ï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡ï¼ŒåŒä¸€ä¸ª ThreadLocal æ‰€åŒ…å«çš„å¯¹è±¡ï¼Œåœ¨ä¸åŒçš„ Thread ä¸­æœ‰ä¸åŒçš„å‰¯æœ¬ã€‚ThreadLocal å˜é‡é€šå¸¸è¢«private staticä¿®é¥°ã€‚å½“ä¸€ä¸ªçº¿ç¨‹ç»“æŸæ—¶ï¼Œå®ƒæ‰€ä½¿ç”¨çš„æ‰€æœ‰ ThreadLocal ç›¸å¯¹çš„å®ä¾‹å‰¯æœ¬éƒ½å¯è¢«å›æ”¶ã€‚ ä¸€ä¸ªçº¿ç¨‹å†…å¯ä»¥å­˜åœ¨å¤šä¸ª ThreadLocal å¯¹è±¡ï¼Œæ‰€ä»¥å…¶å®æ˜¯ ThreadLocal å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª Map ï¼Œè¿™ä¸ª Map ä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„ HashMap ï¼Œè€Œæ˜¯ ThreadLocal å®ç°çš„ä¸€ä¸ªå«åš ThreadLocalMap çš„é™æ€å†…éƒ¨ç±»ã€‚è€Œæˆ‘ä»¬ä½¿ç”¨çš„ get()ã€set() æ–¹æ³•å…¶å®éƒ½æ˜¯è°ƒç”¨äº†è¿™ä¸ªThreadLocalMapç±»å¯¹åº”çš„ get()ã€set() æ–¹æ³•ã€‚ HashSetå’ŒHashMapHashSetçš„valueå­˜çš„æ˜¯ä¸€ä¸ªstatic finial PRESENT &#x3D; newObject()ã€‚è€ŒHashSetçš„removeæ˜¯ä½¿ç”¨HashMapå®ç°,åˆ™æ˜¯map.removeè€Œmapçš„ç§»é™¤ä¼šè¿”å›value,å¦‚æœåº•å±‚valueéƒ½æ˜¯å­˜null,æ˜¾ç„¶å°†æ— æ³•åˆ†è¾¨æ˜¯å¦ç§»é™¤æˆåŠŸã€‚ Booleanå å‡ ä¸ªå­—èŠ‚æœªç²¾ç¡®å®šä¹‰å­—èŠ‚ã€‚Javaè¯­è¨€è¡¨è¾¾å¼æ‰€æ“ä½œçš„booleanå€¼ï¼Œåœ¨ç¼–è¯‘ä¹‹åéƒ½ä½¿ç”¨Javaè™šæ‹Ÿæœºä¸­çš„intæ•°æ®ç±»å‹æ¥ä»£æ›¿ï¼Œè€Œbooleanæ•°ç»„å°†ä¼šè¢«ç¼–ç æˆJavaè™šæ‹Ÿæœºçš„byteæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ booleanå…ƒç´ å 8ä½ã€‚ Springä»€ä¹ˆæ˜¯ä¸‰çº§ç¼“å­˜ ç¬¬ä¸€çº§ç¼“å­˜ï¼šå•ä¾‹ç¼“å­˜æ± singletonObjectsã€‚ ç¬¬äºŒçº§ç¼“å­˜ï¼šæ—©æœŸæå‰æš´éœ²çš„å¯¹è±¡ç¼“å­˜earlySingletonObjectsã€‚ï¼ˆå±æ€§è¿˜æ²¡æœ‰å€¼å¯¹è±¡ä¹Ÿæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼‰ ç¬¬ä¸‰çº§ç¼“å­˜ï¼šsingletonFactorieså•ä¾‹å¯¹è±¡å·¥å‚ç¼“å­˜ã€‚ Springå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜Springä½¿ç”¨äº†ä¸‰çº§ç¼“å­˜è§£å†³äº†å¾ªç¯ä¾èµ–çš„é—®é¢˜ã€‚åœ¨populateBean()ç»™å±æ€§èµ‹å€¼é˜¶æ®µé‡Œé¢Springä¼šè§£æä½ çš„å±æ€§ï¼Œå¹¶ä¸”èµ‹å€¼ï¼Œå½“å‘ç°ï¼ŒAå¯¹è±¡é‡Œé¢ä¾èµ–äº†Bï¼Œæ­¤æ—¶åˆä¼šèµ°getBeanæ–¹æ³•ï¼Œä½†è¿™ä¸ªæ—¶å€™ï¼Œä½ å»ç¼“å­˜ä¸­æ˜¯å¯ä»¥æ‹¿çš„åˆ°çš„ã€‚å› ä¸ºæˆ‘ä»¬åœ¨å¯¹createBeanInstanceå¯¹è±¡åˆ›å»ºå®Œæˆä»¥åå·²ç»æ”¾å…¥äº†ç¼“å­˜å½“ä¸­ï¼Œæ‰€ä»¥åˆ›å»ºBçš„æ—¶å€™å‘ç°ä¾èµ–Aï¼Œç›´æ¥å°±ä»ç¼“å­˜ä¸­å»æ‹¿ï¼Œæ­¤æ—¶Båˆ›å»ºå®Œï¼ŒAä¹Ÿåˆ›å»ºå®Œï¼Œä¸€å…±æ‰§è¡Œäº†4æ¬¡ã€‚è‡³æ­¤Beançš„åˆ›å»ºå®Œæˆï¼Œæœ€åå°†åˆ›å»ºå¥½çš„Beanæ”¾å…¥å•ä¾‹ç¼“å­˜æ± ä¸­ã€‚ BeanFactoryå’ŒApplicationContextçš„åŒºåˆ« BeanFactoryæ˜¯Springé‡Œé¢æœ€ä½å±‚çš„æ¥å£ï¼Œæä¾›äº†æœ€ç®€å•çš„å®¹å™¨çš„åŠŸèƒ½ï¼Œåªæä¾›äº†å®ä¾‹åŒ–å¯¹è±¡å’Œæ‹¿å¯¹è±¡çš„åŠŸèƒ½ã€‚ ApplicationContextåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œç»§æ‰¿BeanFactoryæ¥å£ï¼Œå®ƒæ˜¯Springçš„ä¸€å„æ›´é«˜çº§çš„å®¹å™¨ï¼Œæä¾›äº†æ›´å¤šçš„æœ‰ç”¨çš„åŠŸèƒ½ã€‚å¦‚å›½é™…åŒ–ï¼Œè®¿é—®èµ„æºï¼Œè½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¶ˆæ¯å‘é€ã€å“åº”æœºåˆ¶ï¼ŒAOPç­‰ã€‚ BeanFactoryåœ¨å¯åŠ¨çš„æ—¶å€™ä¸ä¼šå»å®ä¾‹åŒ–Beanï¼Œä¸­æœ‰ä»å®¹å™¨ä¸­æ‹¿Beançš„æ—¶å€™æ‰ä¼šå»å®ä¾‹åŒ–ã€‚ApplicationContextåœ¨å¯åŠ¨çš„æ—¶å€™å°±æŠŠæ‰€æœ‰çš„Beanå…¨éƒ¨å®ä¾‹åŒ–äº†ã€‚å®ƒè¿˜å¯ä»¥ä¸ºBeané…ç½®lazy-init&#x3D;trueæ¥è®©Beanå»¶è¿Ÿå®ä¾‹åŒ– åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼ï¼ŒAOPçš„å®ç°æ–¹å¼ JDKåŠ¨æ€ä»£ç†ï¼šåˆ©ç”¨åå°„æœºåˆ¶ç”Ÿæˆä¸€ä¸ªå®ç°ä»£ç†æ¥å£çš„åŒ¿åç±»ï¼Œåœ¨è°ƒç”¨å…·ä½“æ–¹æ³•å‰è°ƒç”¨InvokeHandleræ¥å¤„ç†ã€‚ CGlibåŠ¨æ€ä»£ç†ï¼šåˆ©ç”¨ASMï¼ˆå¼€æºçš„Javaå­—èŠ‚ç ç¼–è¾‘åº“ï¼Œæ“ä½œå­—èŠ‚ç ï¼‰å¼€æºåŒ…ï¼Œå°†ä»£ç†å¯¹è±¡ç±»çš„classæ–‡ä»¶åŠ è½½è¿›æ¥ï¼Œé€šè¿‡ä¿®æ”¹å…¶å­—èŠ‚ç ç”Ÿæˆå­ç±»æ¥å¤„ç†ã€‚ åŒºåˆ«ï¼šJDKä»£ç†åªèƒ½å¯¹å®ç°æ¥å£çš„ç±»ç”Ÿæˆä»£ç†ï¼›CGlibæ˜¯é’ˆå¯¹ç±»å®ç°ä»£ç†ï¼Œå¯¹æŒ‡å®šçš„ç±»ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶è¦†ç›–å…¶ä¸­çš„æ–¹æ³•ï¼Œè¿™ç§é€šè¿‡ç»§æ‰¿ç±»çš„å®ç°æ–¹å¼ï¼Œä¸èƒ½ä»£ç†finalä¿®é¥°çš„ç±»ã€‚ Springçš„çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ requiredï¼ˆé»˜è®¤ï¼‰ï¼šæ”¯æŒä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ã€‚ supportsï¼šæ”¯æŒä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡ä¸å­˜åœ¨ï¼Œåˆ™ä¸ä½¿ç”¨äº‹åŠ¡ã€‚ mandatoryï¼šå¼ºåˆ¶ï¼Œæ”¯æŒä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºExceptionã€‚ requires_newï¼šåˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ not_supportedï¼šæ— äº‹åŠ¡æ‰§è¡Œï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ neverï¼šæ— äº‹åŠ¡æ‰§è¡Œï¼Œå¦‚æœå½“å‰æœ‰äº‹åŠ¡åˆ™æŠ›å‡ºExceptionã€‚ nestedï¼šåµŒå¥—äº‹åŠ¡ï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨åµŒå¥—çš„äº‹åŠ¡ä¸­æ‰§è¡Œã€‚å¦‚æœå½“å‰äº‹åŠ¡ä¸å­˜åœ¨ï¼Œåˆ™è¡¨ç°è·ŸREQUIREDä¸€æ ·ã€‚ Springçš„åç½®å¤„ç†å™¨ BeanPostProcessorï¼šBeançš„åç½®å¤„ç†å™¨ï¼Œä¸»è¦åœ¨beanåˆå§‹åŒ–å‰åå·¥ä½œã€‚ InstantiationAwareBeanPostProcessorï¼šç»§æ‰¿äºBeanPostProcessorï¼Œä¸»è¦åœ¨å®ä¾‹åŒ–beanå‰åå·¥ä½œï¼› AOPåˆ›å»ºä»£ç†å¯¹è±¡å°±æ˜¯é€šè¿‡è¯¥æ¥å£å®ç°ã€‚ BeanFactoryPostProcessorï¼šBeanå·¥å‚çš„åç½®å¤„ç†å™¨ï¼Œåœ¨beanå®šä¹‰(bean definitions)åŠ è½½å®Œæˆåï¼Œbeanå°šæœªåˆå§‹åŒ–å‰æ‰§è¡Œã€‚ BeanDefinitionRegistryPostProcessorï¼šç»§æ‰¿äºBeanFactoryPostProcessorã€‚å…¶è‡ªå®šä¹‰çš„æ–¹æ³•postProcessBeanDefinitionRegistryä¼šåœ¨beanå®šä¹‰(bean definitions)å°†è¦åŠ è½½ï¼Œbeanå°šæœªåˆå§‹åŒ–å‰çœŸæ‰§è¡Œï¼Œå³åœ¨BeanFactoryPostProcessorçš„postProcessBeanFactoryæ–¹æ³•å‰è¢«è°ƒç”¨ã€‚ æ“ä½œç³»ç»Ÿè¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUä»»åŠ¡è°ƒåº¦çš„æœ€å°å•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥è¿›ç¨‹å’Œçº¿ç¨‹éƒ½æ˜¯ä¸€ä¸ªæ—¶é—´æ®µçš„æè¿°ï¼Œæ˜¯CPUå·¥ä½œæ—¶é—´æ®µçš„æè¿°ï¼Œä¸è¿‡æ˜¯é¢—ç²’å¤§å°ä¸åŒã€‚ ä¸åŒè¿›ç¨‹é—´æ•°æ®å¾ˆéš¾å…±äº«ï¼ŒåŒä¸€è¿›ç¨‹ä¸‹ä¸åŒçº¿ç¨‹é—´æ•°æ®å¾ˆæ˜“å…±äº«ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ä»£ç å’Œæ•°æ®ç©ºé—´ï¼Œè¿›ç¨‹è¦æ¯”çº¿ç¨‹æ¶ˆè€—æ›´å¤šçš„è®¡ç®—æœºèµ„æºã€‚çº¿ç¨‹å¯ä»¥çœ‹åšè½»é‡çº§çš„è¿›ç¨‹ï¼ŒåŒä¸€ç±»çº¿ç¨‹å…±äº«ä»£ç å’Œæ•°æ®ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„å¼€é”€å°ã€‚ è¿›ç¨‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼Œä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰å°†å¯¼è‡´æ•´ä¸ªè¿›ç¨‹æŒ‚æ‰ã€‚ ç³»ç»Ÿåœ¨è¿è¡Œçš„æ—¶å€™ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜ç©ºé—´ï¼›è€Œå¯¹çº¿ç¨‹è€Œè¨€ï¼Œé™¤äº†CPUå¤–ï¼Œç³»ç»Ÿä¸ä¼šä¸ºçº¿ç¨‹åˆ†é…å†…å­˜ï¼ˆçº¿ç¨‹æ‰€ä½¿ç”¨çš„èµ„æºæ¥è‡ªå…¶æ‰€å±è¿›ç¨‹çš„èµ„æºï¼‰ï¼Œçº¿ç¨‹ç»„ä¹‹é—´åªèƒ½å…±äº«èµ„æºã€‚ è¿›ç¨‹çš„ç»„æˆéƒ¨åˆ†è¿›ç¨‹ç”±è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ã€ç¨‹åºæ®µã€æ•°æ®æ®µä¸‰éƒ¨åˆ†ç»„æˆã€‚ è¿›ç¨‹çš„é€šä¿¡æ–¹å¼ æ— åç®¡é“ï¼šåŠåŒå·¥çš„ï¼Œå³æ•°æ®åªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸ŠæµåŠ¨ï¼Œåªèƒ½ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå¯¹äºå®ƒçš„è¯»å†™ä¹Ÿå¯ä»¥ä½¿ç”¨æ™®é€šçš„readã€write ç­‰å‡½æ•°ã€‚ä½†æ˜¯å®ƒä¸æ˜¯æ™®é€šçš„æ–‡ä»¶ï¼Œå¹¶ä¸å±äºå…¶ä»–ä»»ä½•æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”åªå­˜åœ¨äºå†…å­˜ä¸­ã€‚ FIFOå‘½åç®¡é“ï¼šFIFOæ˜¯ä¸€ç§æ–‡ä»¶ç±»å‹ï¼Œå¯ä»¥åœ¨æ— å…³çš„è¿›ç¨‹ä¹‹é—´äº¤æ¢æ•°æ®ï¼Œä¸æ— åç®¡é“ä¸åŒï¼ŒFIFOæœ‰è·¯å¾„åä¸ä¹‹ç›¸å…³è”ï¼Œå®ƒä»¥ä¸€ç§ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶å½¢å¼å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ˜¯æ¶ˆæ¯çš„é“¾æ¥è¡¨ï¼Œå­˜æ”¾åœ¨å†…æ ¸ä¸­ã€‚ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ç”±ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆå³é˜Ÿåˆ—IDï¼‰æ¥æ ‡è¯†ã€‚ ä¿¡å·é‡ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä¿¡å·é‡ç”¨äºå®ç°è¿›ç¨‹é—´çš„äº’æ–¥ä¸åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”¨äºå­˜å‚¨è¿›ç¨‹é—´é€šä¿¡æ•°æ®ã€‚ å…±äº«å†…å­˜ï¼šå…±äº«å†…å­˜æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºï¼Œä¸€èˆ¬é…åˆä¿¡å·é‡ä½¿ç”¨ã€‚ è¿›ç¨‹é—´äº”ç§é€šä¿¡æ–¹å¼çš„æ¯”è¾ƒ ç®¡é“ï¼šé€Ÿåº¦æ…¢ï¼Œå®¹é‡æœ‰é™ï¼Œåªæœ‰çˆ¶å­è¿›ç¨‹èƒ½é€šè®¯ã€‚ FIFOï¼šä»»ä½•è¿›ç¨‹é—´éƒ½èƒ½é€šè®¯ï¼Œä½†é€Ÿåº¦æ…¢ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼šå®¹é‡å—åˆ°ç³»ç»Ÿé™åˆ¶ï¼Œä¸”è¦æ³¨æ„ç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™ï¼Œè¦è€ƒè™‘ä¸Šä¸€æ¬¡æ²¡æœ‰è¯»å®Œæ•°æ®çš„é—®é¢˜ã€‚ ä¿¡å·é‡ï¼šä¸èƒ½ä¼ é€’å¤æ‚æ¶ˆæ¯ï¼Œåªèƒ½ç”¨æ¥åŒæ­¥ã€‚ å…±äº«å†…å­˜åŒºï¼šèƒ½å¤Ÿå¾ˆå®¹æ˜“æ§åˆ¶å®¹é‡ï¼Œé€Ÿåº¦å¿«ï¼Œä½†è¦ä¿æŒåŒæ­¥ï¼Œæ¯”å¦‚ä¸€ä¸ªè¿›ç¨‹åœ¨å†™çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¦æ³¨æ„è¯»å†™çš„é—®é¢˜ï¼Œç›¸å½“äºçº¿ç¨‹ä¸­çš„çº¿ç¨‹å®‰å…¨ï¼Œå½“ç„¶ï¼Œå…±äº«å†…å­˜åŒºåŒæ ·å¯ä»¥ç”¨ä½œçº¿ç¨‹é—´é€šè®¯ï¼Œä¸è¿‡æ²¡è¿™ä¸ªå¿…è¦ï¼Œçº¿ç¨‹é—´æœ¬æ¥å°±å·²ç»å…±äº«äº†åŒä¸€è¿›ç¨‹å†…çš„ä¸€å—å†…å­˜ã€‚ æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶ äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼› è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ï¼› ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²ç»è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºï¼› å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚ å¦‚ä½•é¿å…ï¼ˆé¢„é˜²ï¼‰æ­»é” ç ´åâ€œè¯·æ±‚å’Œä¿æŒâ€æ¡ä»¶ï¼šè®©è¿›ç¨‹åœ¨ç”³è¯·èµ„æºæ—¶ï¼Œä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„èµ„æºï¼Œä¸è¦ä¸€æ¬¡ä¸€æ¬¡æ¥ç”³è¯·ï¼Œå½“ç”³è¯·çš„èµ„æºæœ‰ä¸€äº›æ²¡ç©ºï¼Œé‚£å°±è®©çº¿ç¨‹ç­‰å¾…ã€‚ä¸è¿‡è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒæµªè´¹èµ„æºï¼Œè¿›ç¨‹å¯èƒ½ç»å¸¸å¤„äºé¥¥é¥¿çŠ¶æ€ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯ï¼Œè¦æ±‚è¿›ç¨‹åœ¨ç”³è¯·èµ„æºå‰ï¼Œè¦é‡Šæ”¾è‡ªå·±æ‹¥æœ‰çš„èµ„æºã€‚ ç ´åâ€œä¸å¯æŠ¢å â€æ¡ä»¶ï¼šå…è®¸è¿›ç¨‹è¿›è¡ŒæŠ¢å ï¼Œæ–¹æ³•ä¸€ï¼šå¦‚æœå»æŠ¢èµ„æºï¼Œè¢«æ‹’ç»ï¼Œå°±é‡Šæ”¾è‡ªå·±çš„èµ„æºã€‚æ–¹æ³•äºŒï¼šæ“ä½œç³»ç»Ÿå…è®¸æŠ¢ï¼Œåªè¦ä½ ä¼˜å…ˆçº§å¤§ï¼Œå¯ä»¥æŠ¢åˆ°ã€‚ ç ´åâ€œå¾ªç¯ç­‰å¾…â€æ¡ä»¶ï¼šå°†ç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºç»Ÿä¸€ç¼–å·ï¼Œè¿›ç¨‹å¯åœ¨ä»»ä½•æ—¶åˆ»æå‡ºèµ„æºç”³è¯·ï¼Œä½†æ‰€æœ‰ç”³è¯·å¿…é¡»æŒ‰ç…§èµ„æºçš„ç¼–å·é¡ºåºæå‡ºï¼ˆæŒ‡å®šè·å–é”çš„é¡ºåºï¼Œé¡ºåºåŠ é”ï¼‰ã€‚ è®¡ç®—æœºç½‘è·¯Getå’ŒPoståŒºåˆ« Getæ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºåœ¨ä¼ è¾“è¿‡ç¨‹ï¼Œæ•°æ®è¢«æ”¾åœ¨è¯·æ±‚çš„URLä¸­ï¼›Postçš„æ‰€æœ‰æ“ä½œå¯¹ç”¨æˆ·æ¥è¯´éƒ½æ˜¯ä¸å¯è§çš„ã€‚ Getä¼ é€çš„æ•°æ®é‡è¾ƒå°ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºå—URLé•¿åº¦é™åˆ¶ï¼›Postä¼ é€çš„æ•°æ®é‡è¾ƒå¤§ï¼Œä¸€èˆ¬è¢«é»˜è®¤ä¸ºä¸å—é™åˆ¶ã€‚ Geté™åˆ¶Formè¡¨å•çš„æ•°æ®é›†çš„å€¼å¿…é¡»ä¸ºASCIIå­—ç¬¦ï¼›è€ŒPostæ”¯æŒæ•´ä¸ªISO10646å­—ç¬¦é›†ã€‚ Getæ‰§è¡Œæ•ˆç‡å´æ¯”Postæ–¹æ³•å¥½ã€‚Getæ˜¯formæäº¤çš„é»˜è®¤æ–¹æ³•ã€‚ GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚ï¼ˆéå¿…ç„¶ï¼Œå®¢æˆ·ç«¯å¯çµæ´»å†³å®šï¼‰ Httpè¯·æ±‚çš„å®Œå…¨è¿‡ç¨‹ æµè§ˆå™¨æ ¹æ®åŸŸåè§£æIPåœ°å€ï¼ˆDNSï¼‰,å¹¶æŸ¥DNSç¼“å­˜ æµè§ˆå™¨ä¸WEBæœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ æµè§ˆå™¨ç»™WEBæœåŠ¡å™¨å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ï¼ˆGET&#x2F;POSTï¼‰ï¼šä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰ã€è¯·æ±‚å¤´éƒ¨ï¼ˆheadersï¼‰ã€ç©ºè¡Œï¼ˆblank lineï¼‰å’Œè¯·æ±‚æ•°æ®ï¼ˆrequest bodyï¼‰4ä¸ªéƒ¨åˆ†ç»„æˆã€‚ æœåŠ¡ç«¯å“åº”HTTPå“åº”æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ç”±çŠ¶æ€è¡Œï¼ˆstatus lineï¼‰ã€ç›¸åº”å¤´éƒ¨ï¼ˆheadersï¼‰ã€ç©ºè¡Œï¼ˆblank lineï¼‰å’Œå“åº”æ•°æ®ï¼ˆresponse bodyï¼‰4ä¸ªéƒ¨åˆ†ç»„æˆã€‚ æµè§ˆå™¨è§£ææ¸²æŸ“ tcpå’ŒudpåŒºåˆ« TCPé¢å‘è¿æ¥ï¼ŒUDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ã€‚ TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ã€‚ TCPé¢å‘å­—èŠ‚æµï¼Œå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµï¼ŒUDPæ˜¯é¢å‘æŠ¥æ–‡çš„ï¼ŒUDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼Œå¦‚IPç”µè¯ï¼Œå®æ—¶è§†é¢‘ä¼šè®®ç­‰ï¼‰ æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„ï¼ŒUDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚ TCPé¦–éƒ¨å¼€é”€20å­—èŠ‚ï¼ŒUDPçš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ã€‚ TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“ï¼ŒUDPåˆ™æ˜¯ä¸å¯é ä¿¡é“ã€‚ tcpå’Œudpçš„ä¼˜ç‚¹ TCPçš„ä¼˜ç‚¹ï¼š å¯é ï¼Œç¨³å®š TCPçš„å¯é ä½“ç°åœ¨TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹è¿æ¥ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ å®Œåï¼Œè¿˜ä¼šæ–­å¼€è¿æ¥ç”¨æ¥èŠ‚çº¦ç³»ç»Ÿèµ„æºã€‚ TCPçš„ç¼ºç‚¹ï¼š æ…¢ï¼Œæ•ˆç‡ä½ï¼Œå ç”¨ç³»ç»Ÿèµ„æºé«˜ï¼Œæ˜“è¢«æ”»å‡» TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œè¦å…ˆå»ºè¿æ¥ï¼Œè¿™ä¼šæ¶ˆè€—æ—¶é—´ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œç¡®è®¤æœºåˆ¶ã€é‡ä¼ æœºåˆ¶ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ç­‰éƒ½ä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œè€Œä¸”è¦åœ¨æ¯å°è®¾å¤‡ä¸Šç»´æŠ¤æ‰€æœ‰çš„ä¼ è¾“è¿æ¥ï¼Œäº‹å®ä¸Šï¼Œæ¯ä¸ªè¿æ¥éƒ½ä¼šå ç”¨ç³»ç»Ÿçš„CPUã€å†…å­˜ç­‰ç¡¬ä»¶èµ„æºã€‚ è€Œä¸”ï¼Œå› ä¸ºTCPæœ‰ç¡®è®¤æœºåˆ¶ã€ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼Œè¿™äº›ä¹Ÿå¯¼è‡´TCPå®¹æ˜“è¢«äººåˆ©ç”¨ï¼Œå®ç°DOSã€DDOSã€CCç­‰æ”»å‡»ã€‚ UDPçš„ä¼˜ç‚¹ï¼š å¿«ï¼Œæ¯”TCPç¨å®‰å…¨ UDPæ²¡æœ‰TCPçš„æ¡æ‰‹ã€ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶ï¼ŒUDPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ä¼ è¾“åè®®ï¼Œæ‰€ä»¥å®ƒåœ¨ä¼ é€’æ•°æ®æ—¶éå¸¸å¿«ã€‚æ²¡æœ‰TCPçš„è¿™äº›æœºåˆ¶ï¼ŒUDPè¾ƒTCPè¢«æ”»å‡»è€…åˆ©ç”¨çš„æ¼æ´å°±è¦å°‘ä¸€äº›ã€‚ä½†UDPä¹Ÿæ˜¯æ— æ³•é¿å…æ”»å‡»çš„ï¼Œæ¯”å¦‚ï¼šUDP Floodæ”»å‡»â€¦â€¦ UDPçš„ç¼ºç‚¹ï¼š ä¸å¯é ï¼Œä¸ç¨³å®š å› ä¸ºUDPæ²¡æœ‰TCPé‚£äº›å¯é çš„æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œå¦‚æœç½‘ç»œè´¨é‡ä¸å¥½ï¼Œå°±ä¼šå¾ˆå®¹æ˜“ä¸¢åŒ…ã€‚ åŸºäºä¸Šé¢çš„ä¼˜ç¼ºç‚¹ï¼Œé‚£ä¹ˆï¼š ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨TCPï¼š å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šæ•´ä¸ªæ•°æ®è¦å‡†ç¡®æ— è¯¯çš„ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™å¾€å¾€ç”¨äºä¸€äº›è¦æ±‚å¯é çš„åº”ç”¨ï¼Œæ¯”å¦‚HTTPã€HTTPSã€FTPç­‰ä¼ è¾“æ–‡ä»¶çš„åè®®ï¼ŒPOPã€SMTPç­‰é‚®ä»¶ä¼ è¾“çš„åè®®ã€‚ åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨TCPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š æµè§ˆå™¨ï¼Œç”¨çš„HTTP FlashFXPï¼Œç”¨çš„FTP Outlookï¼Œç”¨çš„POPã€SMTP Puttyï¼Œç”¨çš„Telnetã€SSH QQæ–‡ä»¶ä¼ è¾“ã€‚ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨UDPï¼š å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œè¦æ±‚ç½‘ç»œé€šè®¯é€Ÿåº¦èƒ½å°½é‡çš„å¿«ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨UDPã€‚ æ¯”å¦‚ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨UDPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š QQè¯­éŸ³ QQè§†é¢‘ TFTPã€‚ ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…ï¼ˆsyn&#x3D;xï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›SYNï¼šåŒæ­¥åºåˆ—ç¼–å·ï¼ˆSynchronize Sequence Numbersï¼‰ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYNï¼ˆack&#x3D;x+1ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆsyn&#x3D;yï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack&#x3D;y+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ ä¸ºä»€ä¹ˆä¸èƒ½ä¸¤æ¬¡æ¡æ‰‹TCPæ˜¯ä¸€ä¸ªåŒå‘é€šä¿¡åè®®ï¼Œé€šä¿¡åŒæ–¹éƒ½æœ‰èƒ½åŠ›å‘é€ä¿¡æ¯ï¼Œå¹¶æ¥æ”¶å“åº”ã€‚å¦‚æœåªæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œ è‡³å¤šåªæœ‰è¿æ¥å‘èµ·æ–¹çš„èµ·å§‹åºåˆ—å·èƒ½è¢«ç¡®è®¤ï¼Œ å¦ä¸€æ–¹é€‰æ‹©çš„åºåˆ—å·åˆ™å¾—ä¸åˆ°ç¡®è®¤ å››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯è¿›ç¨‹å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå¹¶ä¸”åœæ­¢å‘é€æ•°æ®ã€‚é‡Šæ”¾æ•°æ®æŠ¥æ–‡é¦–éƒ¨ï¼ŒFIN&#x3D;1ï¼Œå…¶åºåˆ—å·ä¸ºseq&#x3D;uï¼ˆç­‰äºå‰é¢å·²ç»ä¼ é€è¿‡æ¥çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ï¼‰ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN-WAIT-1ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰çŠ¶æ€ã€‚ TCPè§„å®šï¼ŒFINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚ æœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒACK&#x3D;1ï¼Œack&#x3D;u+1ï¼Œå¹¶ä¸”å¸¦ä¸Šè‡ªå·±çš„åºåˆ—å·seq&#x3D;vï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡ç«¯å°±è¿›å…¥äº†CLOSE-WAITï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€ã€‚TCPæœåŠ¡å™¨é€šçŸ¥é«˜å±‚çš„åº”ç”¨è¿›ç¨‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„æ–¹å‘å°±é‡Šæ”¾äº†ï¼Œè¿™æ—¶å€™å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå³å®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä½†æ˜¯æœåŠ¡å™¨è‹¥å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¾ç„¶è¦æ¥å—ã€‚è¿™ä¸ªçŠ¶æ€è¿˜è¦æŒç»­ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªCLOSE-WAITçŠ¶æ€æŒç»­çš„æ—¶é—´ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ç¡®è®¤è¯·æ±‚åï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥FIN-WAIT-2ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ˆåœ¨è¿™ä¹‹å‰è¿˜éœ€è¦æ¥å—æœåŠ¡å™¨å‘é€çš„æœ€åçš„æ•°æ®ï¼‰ã€‚ æœåŠ¡å™¨å°†æœ€åçš„æ•°æ®å‘é€å®Œæ¯•åï¼Œå°±å‘å®¢æˆ·ç«¯å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN&#x3D;1ï¼Œack&#x3D;u+1ï¼Œç”±äºåœ¨åŠå…³é—­çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¾ˆå¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼Œå‡å®šæ­¤æ—¶çš„åºåˆ—å·ä¸ºseq&#x3D;wï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡å™¨å°±è¿›å…¥äº†LAST-ACKï¼ˆæœ€åç¡®è®¤ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œå¿…é¡»å‘å‡ºç¡®è®¤ï¼ŒACK&#x3D;1ï¼Œack&#x3D;w+1ï¼Œè€Œè‡ªå·±çš„åºåˆ—å·æ˜¯seq&#x3D;u+1ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥äº†TIME-WAITï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€ã€‚æ³¨æ„æ­¤æ—¶TCPè¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¿…é¡»ç»è¿‡2âˆ—âˆ—MSLï¼ˆæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰çš„æ—¶é—´åï¼Œå½“å®¢æˆ·ç«¯æ’¤é”€ç›¸åº”çš„TCBåï¼Œæ‰è¿›å…¥CLOSEDçŠ¶æ€ã€‚ æœåŠ¡å™¨åªè¦æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘å‡ºçš„ç¡®è®¤ï¼Œç«‹å³è¿›å…¥CLOSEDçŠ¶æ€ã€‚åŒæ ·ï¼Œæ’¤é”€TCBåï¼Œå°±ç»“æŸäº†è¿™æ¬¡çš„TCPè¿æ¥ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨ç»“æŸTCPè¿æ¥çš„æ—¶é—´è¦æ¯”å®¢æˆ·ç«¯æ—©ä¸€äº› ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹å› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒæ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿æ¥æ—¶ï¼Œå½“Serverç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€ä½ å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ­¥æ¡æ‰‹ã€‚ æ•°æ®ç»“æ„ä¸ç®—æ³•æ’åºç®—æ³• å†’æ³¡æ’åº é€‰æ‹©æ’åºï¼šé€‰æ‹©æ’åºä¸å†’æ³¡æ’åºæœ‰ç‚¹åƒï¼Œåªä¸è¿‡é€‰æ‹©æ’åºæ¯æ¬¡éƒ½æ˜¯åœ¨ç¡®å®šäº†æœ€å°æ•°çš„ä¸‹æ ‡ä¹‹åå†è¿›è¡Œäº¤æ¢ï¼Œå¤§å¤§å‡å°‘äº†äº¤æ¢çš„æ¬¡æ•° æ’å…¥æ’åºï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²æ’åºçš„æœ‰åºè¡¨ä¸­ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ï¼Œè®°å½•æ•°å¢1çš„æœ‰åºè¡¨ å¿«é€Ÿæ’åºï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†åºåˆ—åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­å·¦åŠéƒ¨åˆ†çš„çš„å€¼å‡æ¯”å³åŠéƒ¨åˆ†çš„å€¼å°ï¼Œç„¶åå†åˆ†åˆ«å¯¹å·¦å³éƒ¨åˆ†çš„è®°å½•è¿›è¡Œæ’åºï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚ 1234567891011121314151617int partition(int a[], int low, int high)&#123; int key = a[low]; while( low &lt; high )&#123; while(low &lt; high &amp;&amp; a[high] &gt;= key) high--; a[low] = a[high]; while(low &lt; high &amp;&amp; a[low] &lt;= key) low++; a[high] = a[low]; &#125; a[low] = key; return low;&#125;void quick_sort(int a[], int low, int high)&#123; if(low &gt;= high) return; int keypos = partition(a, low, high); quick_sort(a, low, keypos-1); quick_sort(a, keypos+1, high);&#125; å †æ’åºï¼šå‡è®¾åºåˆ—æœ‰nä¸ªå…ƒç´ ,å…ˆå°†è¿™nå»ºæˆå¤§é¡¶å †ï¼Œç„¶åå–å †é¡¶å…ƒç´ ï¼Œä¸åºåˆ—ç¬¬nä¸ªå…ƒç´ äº¤æ¢ï¼Œç„¶åè°ƒæ•´å‰n-1å…ƒç´ ï¼Œä½¿å…¶é‡æ–°æˆä¸ºå †ï¼Œç„¶åå†å–å †é¡¶å…ƒç´ ï¼Œä¸ç¬¬n-1ä¸ªå…ƒç´ äº¤æ¢ï¼Œå†è°ƒæ•´å‰n-2ä¸ªå…ƒç´ â€¦ç›´è‡³æ•´ä¸ªåºåˆ—æœ‰åºã€‚ å¸Œå°”æ’åºï¼šå…ˆå°†æ•´ä¸ªå¾…æ’è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•åŸºæœ¬æœ‰åºæ—¶å†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¸€æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ å½’å¹¶æ’åºï¼šæŠŠæœ‰åºè¡¨åˆ’åˆ†æˆå…ƒç´ ä¸ªæ•°å°½é‡ç›¸ç­‰çš„ä¸¤åŠï¼ŒæŠŠä¸¤åŠå…ƒç´ åˆ†åˆ«æ’åºï¼Œä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ª å®é™…é—®é¢˜é«˜å¹¶å‘ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°åœ¨å¼€å‘é«˜å¹¶å‘ç³»ç»Ÿæ—¶æœ‰ä¸‰æŠŠåˆ©å™¨ç”¨æ¥ä¿æŠ¤ç³»ç»Ÿï¼šç¼“å­˜ã€é™çº§å’Œé™æµã€‚ ç¼“å­˜ï¼šç¼“å­˜æ¯”è¾ƒå¥½ç†è§£ï¼Œåœ¨å¤§å‹é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œå¦‚æœæ²¡æœ‰ç¼“å­˜æ•°æ®åº“å°†åˆ†åˆ†é’Ÿè¢«çˆ†ï¼Œç³»ç»Ÿä¹Ÿä¼šç¬é—´ç˜«ç—ªã€‚ä½¿ç”¨ç¼“å­˜ä¸å•å•èƒ½å¤Ÿæå‡ç³»ç»Ÿè®¿é—®é€Ÿåº¦ã€æé«˜å¹¶å‘è®¿é—®é‡ï¼Œä¹Ÿæ˜¯ä¿æŠ¤æ•°æ®åº“ã€ä¿æŠ¤ç³»ç»Ÿçš„æœ‰æ•ˆæ–¹å¼ã€‚å¤§å‹ç½‘ç«™ä¸€èˆ¬ä¸»è¦æ˜¯â€œè¯»â€ï¼Œç¼“å­˜çš„ä½¿ç”¨å¾ˆå®¹æ˜“è¢«æƒ³åˆ°ã€‚åœ¨å¤§å‹â€œå†™â€ç³»ç»Ÿä¸­ï¼Œç¼“å­˜ä¹Ÿå¸¸å¸¸æ‰®æ¼”è€…éå¸¸é‡è¦çš„è§’è‰²ã€‚æ¯”å¦‚ç´¯ç§¯ä¸€äº›æ•°æ®æ‰¹é‡å†™å…¥ï¼Œå†…å­˜é‡Œé¢çš„ç¼“å­˜é˜Ÿåˆ—ï¼ˆç”Ÿäº§æ¶ˆè´¹ï¼‰ï¼Œä»¥åŠHBaseå†™æ•°æ®çš„æœºåˆ¶ç­‰ç­‰ä¹Ÿéƒ½æ˜¯é€šè¿‡ç¼“å­˜æå‡ç³»ç»Ÿçš„ååé‡æˆ–è€…å®ç°ç³»ç»Ÿçš„ä¿æŠ¤æªæ–½ã€‚ç”šè‡³æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„æ•°æ®ç¼“å­˜ã€‚ é™çº§ï¼šæœåŠ¡é™çº§æ˜¯å½“æœåŠ¡å™¨å‹åŠ›å‰§å¢çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å½“å‰ä¸šåŠ¡æƒ…å†µåŠæµé‡å¯¹ä¸€äº›æœåŠ¡å’Œé¡µé¢æœ‰ç­–ç•¥çš„é™çº§ï¼Œä»¥æ­¤é‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯æ ¸å¿ƒä»»åŠ¡çš„æ­£å¸¸è¿è¡Œã€‚é™çº§å¾€å¾€ä¼šæŒ‡å®šä¸åŒçš„çº§åˆ«ï¼Œé¢ä¸´ä¸åŒçš„å¼‚å¸¸ç­‰çº§æ‰§è¡Œä¸åŒçš„å¤„ç†ã€‚æ ¹æ®æœåŠ¡æ–¹å¼ï¼šå¯ä»¥æ‹’æ¥æœåŠ¡ï¼Œå¯ä»¥å»¶è¿ŸæœåŠ¡ï¼Œä¹Ÿæœ‰æ—¶å€™å¯ä»¥éšæœºæœåŠ¡ã€‚æ ¹æ®æœåŠ¡èŒƒå›´ï¼šå¯ä»¥ç æ‰æŸä¸ªåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç æ‰æŸäº›æ¨¡å—ã€‚æ€»ä¹‹æœåŠ¡é™çº§éœ€è¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚é‡‡ç”¨ä¸åŒçš„é™çº§ç­–ç•¥ã€‚ä¸»è¦çš„ç›®çš„å°±æ˜¯æœåŠ¡è™½ç„¶æœ‰æŸä½†æ˜¯æ€»æ¯”æ²¡æœ‰å¥½ã€‚ é™æµï¼šé™æµå¯ä»¥è®¤ä¸ºæœåŠ¡é™çº§çš„ä¸€ç§ï¼Œé™æµå°±æ˜¯é™åˆ¶ç³»ç»Ÿçš„è¾“å…¥å’Œè¾“å‡ºæµé‡å·²è¾¾åˆ°ä¿æŠ¤ç³»ç»Ÿçš„ç›®çš„ã€‚ä¸€èˆ¬æ¥è¯´ç³»ç»Ÿçš„ååé‡æ˜¯å¯ä»¥è¢«æµ‹ç®—çš„ï¼Œä¸ºäº†ä¿è¯ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œï¼Œä¸€æ—¦è¾¾åˆ°çš„éœ€è¦é™åˆ¶çš„é˜ˆå€¼ï¼Œå°±éœ€è¦é™åˆ¶æµé‡å¹¶é‡‡å–ä¸€äº›æªæ–½ä»¥å®Œæˆé™åˆ¶æµé‡çš„ç›®çš„ã€‚æ¯”å¦‚ï¼šå»¶è¿Ÿå¤„ç†ï¼Œæ‹’ç»å¤„ç†ï¼Œæˆ–è€…éƒ¨åˆ†æ‹’ç»å¤„ç†ç­‰ç­‰ã€‚ å¸¸è§çš„é™æµç®—æ³•ï¼šå¸¸è§çš„é™æµç®—æ³•æœ‰è®¡æ•°å™¨ã€æ¼æ¡¶å’Œä»¤ç‰Œæ¡¶ç®—æ³•ã€‚æ¼æ¡¶ç®—æ³•åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­æ¶ˆæ¯ä¸­é—´ä»¶æˆ–è€…Rediséƒ½æ˜¯å¯é€‰çš„æ–¹æ¡ˆã€‚å‘æ”¾ä»¤ç‰Œçš„é¢‘ç‡å¢åŠ å¯ä»¥æå‡æ•´ä½“æ•°æ®å¤„ç†çš„é€Ÿåº¦ï¼Œè€Œé€šè¿‡æ¯æ¬¡è·å–ä»¤ç‰Œçš„ä¸ªæ•°å¢åŠ æˆ–è€…æ”¾æ…¢ä»¤ç‰Œçš„å‘æ”¾é€Ÿåº¦å’Œé™ä½æ•´ä½“æ•°æ®å¤„ç†é€Ÿåº¦ã€‚è€Œæ¼æ¡¶ä¸è¡Œï¼Œå› ä¸ºå®ƒçš„æµå‡ºé€Ÿç‡æ˜¯å›ºå®šçš„ï¼Œç¨‹åºå¤„ç†é€Ÿåº¦ä¹Ÿæ˜¯å›ºå®šçš„ã€‚ ç§’æ€å¹¶å‘æƒ…å†µä¸‹åº“å­˜ä¸ºè´Ÿæ•°é—®é¢˜ for updateæ˜¾ç¤ºåŠ é” æŠŠudpateè¯­å¥å†™åœ¨å‰è¾¹ï¼Œå…ˆæŠŠæ•°é‡-1ï¼Œä¹‹åselectå‡ºåº“å­˜å¦‚æœ&gt;-1å°±commit,å¦åˆ™rollbackã€‚ 12update products set quantity = quantity-1 WHERE id=3;select quantity from products WHERE id=3 for update; updateè¯­å¥åœ¨æ›´æ–°çš„åŒæ—¶åŠ ä¸Šä¸€ä¸ªæ¡ä»¶ 12quantity = select quantity from products WHERE id=3;update products set quantity = ($quantity-1) WHERE id=3 and queantity = $quantity;","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"ä¸ƒé‡Œé¦™","slug":"ä¸ƒé‡Œé¦™","date":"2020-04-15T12:47:35.000Z","updated":"2025-04-17T08:34:52.020Z","comments":true,"path":"2020/04/15/ä¸ƒé‡Œé¦™/","link":"","permalink":"http://yournotes.cn/2020/04/15/%E4%B8%83%E9%87%8C%E9%A6%99/","excerpt":"ã€Šä¸ƒé‡Œé¦™ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šä¸ƒé‡Œé¦™ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"é€åˆ«","slug":"é€åˆ«","date":"2020-04-15T12:22:46.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2020/04/15/é€åˆ«/","link":"","permalink":"http://yournotes.cn/2020/04/15/%E9%80%81%E5%88%AB/","excerpt":"ã€Šé€åˆ«ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹","text":"ã€Šé€åˆ«ã€‹è°±å­æ”¶è—ã€å…¨æ–‡æŸ¥çœ‹ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾","categories":[{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"}],"tags":[{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"}]},{"title":"é¡¹ç›®ä¸Šçº¿éƒ¨ç½²å‘å¸ƒ","slug":"é¡¹ç›®ä¸Šçº¿éƒ¨ç½²å‘å¸ƒ","date":"2020-03-13T10:59:01.000Z","updated":"2025-04-17T08:34:52.025Z","comments":true,"path":"2020/03/13/é¡¹ç›®ä¸Šçº¿éƒ¨ç½²å‘å¸ƒ/","link":"","permalink":"http://yournotes.cn/2020/03/13/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%E9%83%A8%E7%BD%B2%E5%8F%91%E5%B8%83/","excerpt":"","text":"1. å‰è¨€1.1 æœåŠ¡å™¨ä¸æ“ä½œç³»ç»Ÿ æœåŠ¡å™¨æ˜¯è®¡ç®—æœºçš„ä¸€ç§ï¼Œå®ƒæ¯”æ™®é€šè®¡ç®—æœºè¿è¡Œæ›´å¿«ã€è´Ÿè½½æ›´é«˜ã€ä»·æ ¼æ›´è´µã€‚ æœåŠ¡å™¨ä»ç¡¬ä»¶ä¸Šç­‰åŒäºç”µè„‘PCã€‚è€ŒæœåŠ¡å™¨è·ŸPCéƒ½æ˜¯ç”±CPUã€å†…å­˜ã€ä¸»æ¿ã€ç¡¬ç›˜ã€ç”µæºç­‰ç»„æˆï¼›ä½†æœåŠ¡å™¨çš„æ€§èƒ½è¦è¿œè¿œè¶…è¿‡PCï¼Œå› ä¸ºå®ƒè¦ä¿è¯å…¨å¹´æ— ä¼‘ã€‚ æ“ä½œç³»ç»Ÿ: æ“ä½œç³»ç»Ÿæ˜¯ä½œä¸ºåº”ç”¨ç¨‹åºä¸è®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„ä¸€ä¸ªæ¥å£ æ²¡æœ‰å®‰è£…æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºï¼Œè¢«ç§°ä¸ºè£¸æœº, å¦‚æœæƒ³åœ¨è£¸æœºä¸Šè¿è¡Œè‡ªå·±çš„ç¨‹åºï¼Œå°±éœ€è¦ä½¿ç”¨æœºå™¨è¯­è¨€ å®‰è£…æ“ä½œç³»ç»Ÿä¹‹åï¼Œå°±å¯ä»¥é…ç½®ä¸€äº›é«˜çº§è¯­è¨€çš„ç¯å¢ƒï¼Œè¿›è¡Œé«˜çº§è¯­è¨€çš„å¼€å‘ Linuxæ“ä½œç³»ç»Ÿ Linuxç³»ç»Ÿæ˜¯æœ€å…·ç¨³å®šæ€§çš„ç³»ç»Ÿ Linuxæ˜¯å¤©ç”Ÿå°±æ¯”Windowsæ›´å…·å®‰å…¨æ€§ å…è´¹, LinuxæœåŠ¡å™¨åœ¨åº”ç”¨å¼€å‘ä¸Šæ›´èƒ½èŠ‚çº¦æˆæœ¬ 1.2 é¡¹ç›®çš„å‘å¸ƒéƒ¨ç½² é¡¹ç›®çš„å¼€å‘æµç¨‹å¤§è‡´è¦ç»è¿‡ä¸€ä¸‹å‡ ä¸ªæ­¥éª¤: é¡¹ç›®ç«‹é¡¹\\ éœ€æ±‚åˆ†æé˜¶æ®µ åŸå‹å›¾è®¾è®¡é˜¶æ®µ å¼€å‘é˜¶æ®µ æµ‹è¯•é˜¶æ®µ ç³»ç»Ÿä¸Šçº¿ 2. åå°é¡¹ç›®éƒ¨ç½²2.1 å®‰è£…è½¯ä»¶ç¯å¢ƒä»¥ä¸‹è½¯ä»¶,åœ¨Linuxéƒ½å·²å®‰è£…å®Œæˆ.å…·ä½“æ“ä½œå¯ç‚¹å‡»ä¸‹é¢æŒ‰é’®å‚è€ƒ ç‚¹æˆ‘è¯•è¯• è½¯ä»¶ ç‰ˆæœ¬ JDK 11 Tomcat 9 Mysql 8 2.2 é¡¹ç›®æ‰“åŒ…å‘å¸ƒ ä¿®æ”¹é¡¹ç›®çš„æ•°æ®åº“é…ç½®æ–‡ä»¶, æ•°æ®åº“çš„IP ,ç”¨æˆ·å å¯†ç  ä¿®æ”¹ Constantså¸¸é‡ç±»ä¸­çš„é¡¹ç›®URL 12//ç”Ÿäº§ç¯å¢ƒåœ°å€ public static final String LOCAL_URL = &quot;http://192.168.52.100:8080&quot;; ä¿®æ”¹åå¯åŠ¨é¡¹ç›®,æµ‹è¯•ä¸€ä¸‹ ä¿è¯æ•°æ®åº“è¿æ¥æ²¡æœ‰é—®é¢˜ æ£€æŸ¥POMæ–‡ä»¶,æ‰“åŒ…æ–¹å¼å¿…é¡»æ˜¯war,ç¼–è¯‘ç‰ˆæœ¬ä¸ºJDK11ï¼ˆä¸æœåŠ¡å™¨ä¿æŒä¸€è‡´ï¼‰ 1234567&lt;packaging&gt;war&lt;/packaging&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; &lt;/properties&gt; æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ 12mvn cleanmvn package å¤åˆ¶å‡ºtargetç›®å½•ä¸‹çš„ waråŒ… ä¿®æ”¹ä¸‹é¡¹ç›®åç§° ä¸Šä¼ åˆ°Tomcatè¿›è¡Œæµ‹è¯• 3. å‰ç«¯é¡¹ç›®éƒ¨ç½²3.1 ä¿®æ”¹é…ç½®æ–‡ä»¶ å‰ç«¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ª,ä¸€ä¸ªæ˜¯å¼€å‘ç¯å¢ƒçš„é…ç½®æ–‡ä»¶,ä¸€ä¸ªæ˜¯ç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ å…ˆä¿®æ”¹ä¸€ä¸‹å¼€å‘ç¯å¢ƒæ–‡ä»¶çš„ åç«¯æœåŠ¡å™¨è®¿é—®åœ°å€,ç„¶åè¿›è¡Œä¸€ä¸‹æµ‹è¯• 12// .env.development æ–‡ä»¶ VUE_APP_API_BASE = http://192.168.52.100:8080/lagou_edu_home ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ 12//.env.production VUE_APP_API_BASE = http://192.168.52.100:8080/lagou_edu_home 3.2 å‰ç«¯é¡¹ç›®æ‰“åŒ… ä¿®æ”¹ vue.config.js é…ç½®æ–‡ä»¶ å¤åˆ¶ä¸‹é¢å†…å®¹å³å¯ 123456789101112131415module.exports = &#123; // relative path for dev publicPath: process.env.NODE_ENV === &quot;production&quot; ? &quot;/edu-boss/&quot; : &quot;./&quot;, // for gh-pages indexPath: &quot;index.html&quot;, assetsDir: &quot;static&quot;, lintOnSave: process.env.NODE_ENV !== &quot;production&quot;, productionSourceMap: false, css: &#123; // sourceMap: process.env.NODE_ENV !== &#x27;production&#x27; &#125;, devServer: &#123; open: true, port: 8081 &#125; &#125;; æ‰§è¡Œä¸‹é¢çš„æ‰“åŒ…å‘½ä»¤ 1npm run build åœ¨é¡¹ç›®ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª dist ç›®å½• åœ¨æœ¬åœ°tomcatçš„webappsç›®å½•ä¸‹,åˆ›å»ºä¸€ä¸ªedu-bossæ–‡ä»¶å¤¹,å°†distç›®å½•ä¸­çš„æ–‡ä»¶æ‹·è´åˆ°é‡Œé¢ å¯åŠ¨æœ¬åœ°tomcat ,è®¿é—®å‰ç«¯é¡¹ç›® è·¯å¾„ä¸º: 1http://localhost:8081/edu-boss/ 3.3 å‰ç«¯é¡¹ç›®å‘å¸ƒ éªŒè¯æ²¡æœ‰é—®é¢˜å,å°†edu-boosé¡¹ç›®å‹ç¼©,ä¸Šä¼ åˆ°tomcatæœåŠ¡å™¨ 12345678//å¤åˆ¶ä¸€ä»½tomcat cp -r /usr/tomcat/ /usr/tomcat2 //ä¸Šä¼  edu-boss.zip ,å¹¶è§£å‹ unzip edu-boss.zip //åˆ é™¤edu-boss.zip rm -rf edu-boss.zip ä¿®æ”¹tomcat2çš„server.xml é…ç½®æ–‡ä»¶,ä¿®æ”¹3ä¸ªç«¯å£,é¿å…ä¸tomcat1å†²çª è¿è¡Œå‰ç«¯é¡¹ç›® 12345//è¿›å…¥tomcat2,å¯åŠ¨é¡¹ç›® ./bin/startup.sh //åŠ¨æ€æŸ¥çœ‹æ—¥å¿— tail -f logs/catalina.out è¿è¡Œåç«¯é¡¹ç›® 12345//è¿›å…¥tomcat1,å¯åŠ¨é¡¹ç›® ./bin/startup.sh //åŠ¨æ€æŸ¥çœ‹æ—¥å¿— tail -f logs/catalina.out","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"hexoæ­å»ºåšå®¢","slug":"hexoæ­å»ºåšå®¢","date":"2020-01-12T16:00:00.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2020/01/13/hexoæ­å»ºåšå®¢/","link":"","permalink":"http://yournotes.cn/2020/01/13/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"å‰è¨€ å¾ˆæ—©ä¹‹å‰å‘¢ä¹Ÿæ˜¯å†™è¿‡åšå®¢ç³»ç»Ÿï¼ˆæ—§ç‰ˆï¼‰ï¼Œé‚£æ—¶æ˜¯å­¦ç”Ÿæ—¶ä»£ç»ƒä¹ java webåŸºç¡€å¯¹äºå‰ç«¯ä¹Ÿæ˜¯ä½¿ç”¨åŸºæœ¬çš„ä¸‰å‰‘å®¢å®Œæˆé…åˆä¸€ä¸‹åç«¯ã€‚çœŸæ­£çš„ä½œä¸ºä¸ªäººçš„åšå®¢ä½¿ç”¨èµ·æ¥è¿˜æ˜¯ä¸èˆ’æœå½“æ—¶ä½†ä¹Ÿæ‡’å¾—å†™ä¸ªã€‚è¿™æ¬¡é€‰æ‹©ç›´æ¥ä½¿ç”¨hexoåšä¸€ä¸ªé•¿æœŸæ—¥å¸¸ä½¿ç”¨çš„åšå®¢ç³»ç»Ÿï¼ˆhexoç‰ˆï¼‰ Hexoæ˜¯ä»€ä¹ˆHexoæ˜¯åŸºäºnodejsçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦çŸ¥é“nodejsæ˜¯ä»€ä¹ˆ node.jsæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨chromeJavascriptè¿è¡Œç¯å¢ƒä¸‹ï¼ˆä¿—ç§°GoogleV8å¼•æ“ï¼‰çš„å¼€å‘å¹³å°ï¼Œç”¨æ¥æ–¹ä¾¿å¿«æ·çš„åˆ›å»ºæœåŠ¡å™¨ç«¯ç½‘ç»œåº”ç”¨ç¨‹åºã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„JSPæˆ–PHPç¯å¢ƒï¼Œä½†æ˜¯ç”¨æ¥å¼€å‘Webåº”ç”¨çš„è¯ï¼Œæœ‰æ—¶è¦ä¾¿æ·å¾ˆå¤šã€‚ Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œä¾èµ–å°‘æ˜“äºå®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨GitHubå’ŒHerokuä¸Š ç¯å¢ƒå‡†å¤‡é¦–å…ˆåˆ°å®˜ç½‘å®‰è£…nodejs å®‰è£…å®ŒæˆåæŸ¥çœ‹nodejså’Œå…¶åŒ…ç®¡ç†å™¨npmçš„ç‰ˆæœ¬ 12node -vnpm -v ä¸‹é¢å¯é€‰ï¼šæˆ‘ä»¬é€šè¿‡åŒ…ç®¡ç†å™¨npmæ¥å®‰è£…hexo,ä½†ç”±äºæºæ˜¯å›½å¤–çš„è®¿é—®æœ‰å¯èƒ½æ…¢ã€‚å¯ä»¥æ·»åŠ ä¸‹å›½å†…é•œåƒå†å®‰è£… 1npm install -g cnpm --registry=https://registry.npm.taobao.org æ‰§è¡Œå®Œå‡ºç°å¦‚å›¾æ‰€ç¤ºå³æ·»åŠ å®Œæˆï¼Œå½“ä½¿ç”¨cnpmæŒ‡ä»¤å°±æ˜¯ä½¿ç”¨çš„å›½å†…æºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŸå…ˆçš„npm å®‰è£…hexo1cnpm install -g hexo-cli æ‰§è¡Œå®Œæˆå¯ä»¥æŸ¥çœ‹ä¸‹ç‰ˆæœ¬ 1hexo -v hexoä½¿ç”¨åˆå§‹åŒ–åšå®¢ç›®å½•åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªç›®å½•æ¯”å¦‚blogä½œä¸ºåšå®¢é¡¹ç›®å·¥ä½œåŒº åœ¨ä½ é€‰æ‹©çš„ç›®å½•ä¸‹æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤hexo init,åœ¨æ­¤ä¹‹å‰å¦‚æœä½ æ²¡æœ‰å®‰è£…gité‚£è¦å…ˆæŠŠgitå®‰è£…ä¸€ä¸‹ ä¹‹åä¸‹é¢çš„å‘½ä»¤å¦‚æœè¯†åˆ«ä¸äº†hexoæŒ‡ä»¤ï¼Œå¯ä»¥åœ¨æŒ‡ä»¤å‰é¢ç»Ÿä¸€åŠ ä¸Šnpx 1F:\\blog&gt;hexo init åœ¨blogä¸‹å°±ä¼šå®Œæˆåˆå§‹åŒ–ç”Ÿæˆåˆå§‹å·¥ç¨‹ è¿™æ ·ä¸€ä¸ªé™æ€çš„åšå®¢é¡¹ç›®å°±ç”Ÿæˆäº†ï¼Œå¯ä»¥æœ¬åœ°å¯åŠ¨çœ‹ä¸€ä¸‹åˆå§‹çŠ¶æ€ 1hexo s æœåŠ¡å¼€å¯æˆåŠŸï¼Œåœ¨æµè§ˆå™¨è®¿é—®ä¸€ä¸‹æœ¬åœ°çš„4000ç«¯å£ã€‚ æ·»åŠ æ–‡ç« æ‰§è¡Œè¯­å¥å®é™…ä¸Šå°±æ˜¯åœ¨&#x2F;source&#x2F;_posts&#x2F;ç›®å½•ä¸‹æ·»åŠ äº†mdæ–‡ä»¶ã€‚ä½ å¯ä»¥å»ç¼–è¾‘è¿™ä¸ªmdæ–‡ä»¶ 1hexo new post &quot;æ–‡ç« å&quot; å†™æ–‡ç« é€šè¿‡markdownè¯­æ³•ï¼Œå°±ç®€å•çš„å†™äº†ä¸€ç‚¹ ç¼–è¾‘å®Œé‡æ–°ç”Ÿæˆé™æ€é¡¹ç›®ï¼Œæ¯æ¬¡å˜æ›´éƒ½è¦é‡æ–°ç”Ÿæˆä¸€ä¸‹ 123456hexo clean //åˆ é™¤ä¹‹å‰çš„é™æ€æ–‡ä»¶hexo g //é‡æ–°ç”Ÿæˆæ–°çš„ hexo s //å¼€å¯æœåŠ¡ é‡æ–°è®¿é—®ï¼Œåœ¨Hello Worldæ–‡ç« ä¸Šé¢å°±æ˜¯æˆ‘ä»¬åˆšåˆšå†™çš„æ–‡ç« ã€‚åŸºæœ¬åšå®¢åŠŸèƒ½å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥éƒ¨ç½²åˆ°githubä¸Šé¢è¿›è¡Œå…¬ç½‘è®¿é—® éƒ¨ç½²åˆ°githubç°åœ¨æœ¬åœ°å¯ä»¥è®¿é—®äº†ï¼Œç”±äºä»–åªæ˜¯ä¸€ä¸ªé™æ€é¡¹ç›®æŠŠå®ƒéƒ¨ç½²åœ¨githubä¸Šå°±å¯ä»¥åšä¸€ä¸ªå…¬å¼€è®¿é—®äº†ã€‚è¿™é‡Œå°±ç”¨githubæ¼”ç¤ºã€‚æ²¡æœ‰å°±æ³¨å†Œä¸€ä¸ªç„¶ååˆ›å»ºåº“ï¼Œä½œä¸ºä¸ªäººåšå®¢éƒ¨ç½²ä¸€å®šè¦ç”¨ (ä½ çš„githubç”¨æˆ·å).github.io æ¥ä½œä¸ºåº“ååˆ›å»ºå°±å¯ä»¥ã€‚æˆ‘çš„æ˜¯Jasper-zh.github.io è¿™ä¸€æ­¥è®¾ç½®username.github.ioæ˜¯ä¸ºäº†å¼€å¯é™æ€æœåŠ¡ï¼Œé¡µé¢é¡¹ç›®ä¸Šä¼ åˆ°ä»“åº“è¦æƒ³ç›´æ¥è®¿é—®è¿™äº›é™æ€èµ„æºéœ€è¦å¼€å¯é™æ€æœåŠ¡ã€‚ æ¥ä¸‹æ¥åœ¨blogç›®å½•ä¸‹å®‰è£…hexoçš„gitéƒ¨ç½²æ’ä»¶ï¼ˆä½œç”¨æ˜¯ä¸€é”®å°†ç¯å¢ƒç”Ÿæˆçš„é™æ€é¡µé¡¹ç›®æ”¾åˆ°githubå½“ä¸­ï¼‰æ‰‹åŠ¨pushä¹Ÿæ˜¯ä¸€æ ·çš„ 1cnpm install --save hexo-deployer-git å®‰è£…å®Œåœ¨ç›®å½•ä¸­çš„_config.ymlä¸­é…ç½®ä¸Šéƒ¨ç½²çš„æ–¹å¼å’Œåœ°å€ã€‚æ¯”å¦‚è¿™é‡Œæ˜¯ gitç±»å‹ã€gitä»“åº“æ˜¯githubçš„ä¸€ä¸ªä»“åº“ã€ä»“åº“çš„åˆ†æ”¯æ˜¯master 1234deploy: type: git repository: https://github.com/Jasper-zh/Jasper-zh.github.io.git branch: master éƒ¨ç½²å·¥å…·å’Œéƒ¨ç½²é…ç½®éƒ½å®Œæˆåå°±å¯ä»¥é€šè¿‡ä½ çš„åº“åè®¿é—®äº†ï¼ŒåŸºæœ¬ä¸Šå‘¢æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ä¸€äº›è‡ªå®šä¹‰ä¸ªæ€§åŒ–çš„é…ç½®å¯ä»¥åœ¨ä¹‹åæ…¢æ…¢çš„æ”¹é€  ä¸ºå•¥ä½¿ç”¨hexoç¬¬ä¸€æ˜¯ç®€å•ï¼Œç¬¬äºŒç”¨çš„æ¯”è¾ƒå¤šç”Ÿæ€å¥½çœŸçš„é‡åˆ°é—®é¢˜ä¹Ÿæ¯”è¾ƒå®¹æ˜“æŸ¥ï¼Œä¸»é¢˜ä¹Ÿå¤š æˆ‘çš„hexoåšå®¢å±•ç¤º","categories":[{"name":"åšå®¢ç³»ç»Ÿ","slug":"åšå®¢ç³»ç»Ÿ","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"},{"name":"hexo","slug":"åšå®¢ç³»ç»Ÿ/hexo","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://yournotes.cn/tags/Hexo/"}]},{"title":"å¼€å‘ç¯å¢ƒæ­å»ºå’ŒShellç¼–ç¨‹","slug":"å¼€å‘ç¯å¢ƒæ­å»ºå’ŒShellç¼–ç¨‹","date":"2020-01-12T05:19:43.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2020/01/12/å¼€å‘ç¯å¢ƒæ­å»ºå’ŒShellç¼–ç¨‹/","link":"","permalink":"http://yournotes.cn/2020/01/12/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%92%8CShell%E7%BC%96%E7%A8%8B/","excerpt":"","text":"1. å¼€å‘ç¯å¢ƒæ­å»ºï¼ˆæŒæ¡ï¼‰1.1 Xshellå’ŒXftpå·¥å…·ï¼ˆ1ï¼‰ä¸‹è½½å’Œå®‰è£…æ–¹å¼ ä¸‹è½½åœ°å€ï¼šhttps://www.netsarang.com/zh/ å®‰è£…æ–¹å¼ï¼šç›´æ¥ä¸€è·¯ç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯ï¼Œå®‰è£…è¿‡ç¨‹é€‰æ‹©å…è´¹ç‰ˆã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨æ–¹å¼ ï¼ˆ3ï¼‰ç½‘ç»œæ¨¡å¼è®¾ç½® è¿™é‡Œè¿æ¥çš„æœåŠ¡å™¨ä¸»æœºæ˜¯ç”¨VMå¯çš„è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æ‰éœ€è¦é…ç½®ä¸‹å®ƒçš„ä¸»æœºåœ°å€å¹¶ä¸”è°ƒæ•´ä¸ºé™æ€IPã€‚å¦åˆ™çš„è¯å°±ä¸éœ€è¦ï¼ˆ3ï¼‰ï¼ˆ4ï¼‰ï¼ˆ5ï¼‰æ­¥å•¦ï¼ è®¾ç½®ç½‘ç»œè¿æ¥æ¨¡å¼ä¸ºNATæ¨¡å¼ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š æ‰“å¼€è™šæ‹Ÿæœºè®¾ç½® é€‰æ‹©ç½‘ç»œé€‚é…å™¨ï¼Œé€‰ä¸­NATæ¨¡å¼ ï¼ˆ4ï¼‰ä¿®æ”¹é…ç½®æ–‡ä»¶ æŸ¥çœ‹è™šæ‹Ÿæœºç½‘ç»œä¿¡æ¯ æ‰“å¼€ç¼–è¾‘ä¸­è™šæ‹Ÿæœºç½‘ç»œç¼–è¾‘ ä¸Šä¸€æ­¥ç½‘ç»œæ¨¡å¼å·²è°ƒæˆNATï¼Œå› æ­¤é€‰ä¸­NAT æ‰“å¼€NAT Settings å¯çœ‹åˆ°å­ç½‘IPã€å­ç½‘æ©ç ã€ç½‘å…³IP æ‰“å¼€DHCP Settings çœ‹IPèŒƒå›´ ä½¿ç”¨rootç”¨æˆ·æ‰“å¼€&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eno16777736æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹ï¼ˆæ ¹æ®è‡ªå·±çš„åœ°å€å¡«ï¼‰ï¼š 123456BOOTPROTO=static # æ”¹æˆé™æ€IPONBOOT=yes # é‡å¯æ›´æ–°IPADDR=192.168.40.129 # æˆ‘çš„åœ¨192.168.40.128ä¸192.168.40.254ä¹‹é—´ GATEWAY=192.168.40.2 # ç½‘å…³IPæŒ‰ç…§NAT Settingsçœ‹åˆ°çš„å¡«å†™NETMASK=255.255.255.0 # å­ç½‘æ©ç æŒ‰ç…§NAT Settingsçœ‹åˆ°çš„å¡«å†™DNS1=114.114.114.114 ï¼ˆ5ï¼‰é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ 1ä½¿ç”¨å‘½ä»¤ä½¿å¾—é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼šservice network restart 1.2 JDKçš„ä¸‹è½½å’Œå®‰è£…ï¼ˆ1ï¼‰ä¸‹è½½å’Œå®‰è£…æ–¹å¼ ä¸‹è½½åœ°å€ï¼šhttps://www.oracle.com/java/technologies/javase-downloads.html å®‰è£…æ–¹å¼ï¼šå°†ä¸‹è½½å¥½çš„jdkå®‰è£…åŒ…é€šè¿‡Xftpå·¥å…·ä¼ è¾“åˆ°CentOSç³»ç»Ÿä¸­ï¼Œä½¿ç”¨tarå‘½ä»¤è§£å‹å³å¯ã€‚ ï¼ˆ2ï¼‰é…ç½®ç¯å¢ƒå˜é‡ ä½¿ç”¨rootç”¨æˆ·æ‰“å¼€é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;profileï¼Œå‘æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹å¦‚ä¸‹ï¼š 12export JAVA_HOME=/usr/javajdk export PATH=$JAVA_HOME/bin:$PATH ä¿å­˜é€€å‡ºåè®©æ–‡ä»¶ç”Ÿæ•ˆå¹¶éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ 12source /etc/profile javac -version 1.3 Tomcatçš„ä¸‹è½½å’Œå®‰è£…ï¼ˆ1ï¼‰ä¸‹è½½å’Œå®‰è£…æ–¹å¼ ä¸‹è½½åœ°å€ï¼šhttps://tomcat.apache.org/download-80.cgi å®‰è£…æ–¹å¼ï¼šå°†ä¸‹è½½å¥½çš„Tomcatå®‰è£…åŒ…é€šè¿‡Xftpå·¥å…·ä¼ è¾“åˆ°CentOSç³»ç»Ÿä¸­ï¼Œä½¿ç”¨tarå‘½ä»¤è§£å‹å³å¯ã€‚ ï¼ˆ2ï¼‰å¯åŠ¨å’Œå…³é—­æ–¹å¼ 12startup.sh shutdown.sh ï¼ˆ3ï¼‰å¼€æ”¾é˜²ç«å¢™ç«¯å£ 1/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT å¼€å¯8080ç«¯å£ï¼ˆæš‚æ—¶å¼€é€šï¼‰ ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ ä½¿ç”¨rootç”¨æˆ·æ‰“å¼€é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;profileï¼Œå‘æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹ã€‚ 1export CATALINA_HOME=/usr/tomcat export PATH=$CATALINA_HOME/bin:$PATH ä¿å­˜é€€å‡ºåè®©æ–‡ä»¶ç”Ÿæ•ˆå¹¶éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ 12source /etc/profile startup.sh ï¼ˆ5ï¼‰å‘å¸ƒWebé¡¹ç›® å°†Webé¡¹ç›®æ‰“æˆwaråŒ…ï¼Œé€šè¿‡Xftpå·¥å…·å°†waråŒ…æ”¾åœ¨tomcat&#x2F;webappç›®å½•å¹¶å¯åŠ¨ 1.4 Mysqlçš„å®‰è£…å’Œè¿æ¥ï¼ˆ1ï¼‰å®‰è£… ç‚¹å‡»æŸ¥çœ‹ ï¼ˆ2ï¼‰è¿œç¨‹è¿æ¥å®‰è£…é…ç½®å®Œæˆåä½¿ç”¨ç®¡ç†å·¥å…·å»è¿æ¥æˆ‘ä»¬çš„è¿œç«¯Mysqlå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š ï¼ˆ3ï¼‰è§£å†³æ–¹æ¡ˆ ä½¿ç”¨rootæƒé™ç™»å½•æ•°æ®åº“åé€‰æ‹©mysqlåº“ 12mysql -u root -p use mysql; æŸ¥çœ‹mysqlåº“ä¸­çš„userè¡¨çš„hostå€¼åä¿®æ”¹ä¸ºé€šé…ç¬¦%æˆ–è€…å°±è‡ªå·±çš„åœ°å€ 123select host from user where user=&#x27;root&#x27;; update user set host=&#x27;%&#x27; where user=&#x27;root&#x27;; flush privileges; æŸ¥çœ‹ä¿®æ”¹ç»“æœå¹¶é‡æ–°æµ‹è¯• 1select User,Host from user; 2. Shellç¼–ç¨‹ï¼ˆç†Ÿæ‚‰ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ Shellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå¯ä»¥æ¥æ”¶åº”ç”¨ç¨‹åºæˆ–ç”¨æˆ·å‘½ä»¤ï¼Œç„¶åè®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ Shellæ˜¯ä¸€ä¸ªåŠŸèƒ½ç›¸å½“å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ˜“ç¼–å†™ã€æ˜“è°ƒè¯•ã€çµæ´»æ€§å¼ºï¼› 2.2 ç¼–å†™ç¬¬ä¸€ä¸ªç¨‹åº ä½¿ç”¨viå·¥å…·åˆ›å»ºxxx.shçš„æ–‡ä»¶ã€‚ ä»¥#!/bin/bashå¼€å¤´å¹¶ç¼–å†™ä»£ç åä¿å­˜ã€‚ 2.3 æ‰§è¡ŒShellç¨‹åºçš„æ–¹å¼ æ–¹å¼ä¸€ï¼š.&#x2F;æ–‡ä»¶åï¼Œæ­¤æ–¹å¼éœ€è¦æ‰§è¡Œæƒé™ã€‚ æ–¹å¼äºŒï¼š&#x2F;bin&#x2F;bash æ–‡ä»¶åï¼Œæ­¤æ–¹å¼ä¸éœ€è¦æ‰§è¡Œæƒé™ã€‚ 2.4 å˜é‡çš„å®šä¹‰ï¼ˆ1ï¼‰è¯­æ³•æ ¼å¼ å®šä¹‰å˜é‡ï¼šå˜é‡&#x3D;å€¼ æ’¤é”€å˜é‡ï¼šunset å˜é‡ ï¼ˆ2ï¼‰å®šä¹‰è§„åˆ™ å˜é‡åç§°å¯ä»¥ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä½†æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œç¯å¢ƒå˜é‡åå»ºè®®å¤§å†™ã€‚ ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—ã€‚ ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥æœ‰ä¸‹åˆ’çº¿ã€‚ åœ¨bashä¸­ï¼Œå˜é‡é»˜è®¤ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ— æ³•ç›´æ¥è¿›è¡Œæ•°å€¼è¿ç®—ã€‚ å˜é‡çš„å€¼å¦‚æœæœ‰ç©ºæ ¼ï¼Œéœ€è¦ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·æ‹¬èµ·æ¥ã€‚ 2.5 å¸¸ç”¨è¿ç®—ç¬¦ï¼ˆ1ï¼‰ç®—æœ¯è¿ç®—ç¬¦ ï¼ˆ2ï¼‰å…³ç³»è¿ç®—ç¬¦ 2.6 æµç¨‹æ§åˆ¶è¯­å¥ï¼ˆ1ï¼‰ifåˆ¤æ–­ 1234if [ æ¡ä»¶åˆ¤æ–­å¼ ] then ç¨‹åº fi ï¼ˆ2ï¼‰caseè¯­å¥ 12345678910case $å˜é‡å in &quot;å€¼1&quot;ï¼‰ å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼1ï¼Œåˆ™æ‰§è¡Œç¨‹åº1 ;; &quot;å€¼2&quot;ï¼‰ å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼2ï¼Œåˆ™æ‰§è¡Œç¨‹åº2 ;; â€¦çœç•¥å…¶ä»–åˆ†æ”¯â€¦ *ï¼‰å¦‚æœå˜é‡çš„å€¼éƒ½ä¸æ˜¯ä»¥ä¸Šçš„å€¼ï¼Œåˆ™æ‰§è¡Œæ­¤ç¨‹åº ;; esac ï¼ˆ3ï¼‰forå¾ªç¯ 1234for (( åˆå§‹å€¼;å¾ªç¯æ§åˆ¶æ¡ä»¶;å˜é‡å˜åŒ– )) do ç¨‹åº done ï¼ˆ4ï¼‰whileå¾ªç¯ 1234while [ æ¡ä»¶åˆ¤æ–­å¼ ] do ç¨‹åº done 2.7 å‡½æ•°123456[ function ] funname[()] &#123; Action; [return int;] &#125;funname","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Linuxç³»ç»Ÿæ¦‚è¿°å’Œç¼–ç¨‹åŸºç¡€","slug":"Linuxç³»ç»Ÿæ¦‚è¿°å’Œç¼–ç¨‹åŸºç¡€","date":"2020-01-12T04:07:10.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2020/01/12/Linuxç³»ç»Ÿæ¦‚è¿°å’Œç¼–ç¨‹åŸºç¡€/","link":"","permalink":"http://yournotes.cn/2020/01/12/Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/","excerpt":"","text":"1. Linuxç³»ç»Ÿæ¦‚è¿°ï¼ˆå¸¸è¯†ï¼‰1.1 è®¡ç®—æœºçš„ä½“ç³»ç»“æ„ è®¡ç®—æœºç”±è®¡ç®—æœºç¡¬ä»¶å’Œè®¡ç®—æœºè½¯ä»¶ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­è®¡ç®—æœºè½¯ä»¶(Computer Software)å¯åˆ†ä¸ºç³»ç»Ÿè½¯ä»¶å’Œåº”ç”¨è½¯ä»¶ï¼Œç³»ç»Ÿè½¯ä»¶å°±æ˜¯æ“ä½œç³»ç»Ÿï¼Œæ˜¯å…¶ä»–è½¯ä»¶çš„åŸºç¡€ã€‚ ç›®å‰ä¸»æµçš„æ“ä½œç³»ç»Ÿæœ‰ï¼šWindowsç³»åˆ—ã€Unixç³»åˆ—ã€Linuxç³»åˆ—ã€Androidç³»åˆ—ã€IOSç³»åˆ—ã€â€¦ 1.2 Linuxç³»ç»Ÿçš„æ¦‚è¿° Linuxç³»ç»Ÿè¯ç”Ÿäº1991å¹´ï¼Œåœ¨æ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼ˆLinus Torvaldsï¼‰ä¸Šå¤§å­¦æœŸé—´å› ä¸æ»¡æ„æ•™å­¦ä¸­ä½¿ç”¨çš„MINIXæ“ä½œç³»ç»Ÿå¹¶å‡ºäºä¸ªäººçˆ±å¥½è®¾è®¡å’Œç ”å‘çš„ã€‚ Linuxç³»ç»Ÿæ˜¯ä¸€å¥—å…è´¹ã€è‡ªç”±ã€å¼€å‘æºä»£ç çš„ç±»Unixæ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäºPosix(Portable Operating System Interface)æ ‡å‡†å’Œå¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿã€‚ Linuxèƒ½è¿è¡Œä¸»è¦çš„Unixå·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ï¼Œæ”¯æŒ32ä½å’Œ64ä½ç¡¬ä»¶ã€‚ 1.3 ä¸»è¦å‘è¡Œç‰ˆæœ¬ Redhatï¼šç›®å‰æœ€å¤§çš„Linuxå‘è¡Œå•†ï¼ŒåŠŸèƒ½å…¨é¢å¹¶ä¸”ç¨³å®šï¼Œäº2018å¹´10æœˆè¢«IBMä»¥340äº¿ç¾å…ƒçš„ä»·æ ¼æ”¶è´­ã€‚ Ubuntuï¼šç›®å‰æœ€å¥½çš„Linuxæ¡Œé¢ç‰ˆï¼Œæ‹¥æœ‰å¾ˆäººæ€§åŒ–çš„äº®ä¸½çš„äº¤äº’ç•Œé¢ï¼Œå¼ºå¤§çš„è½¯ä»¶æºæ”¯æŒã€‚ CentOSï¼šæ˜¯RHELçš„å…‹éš†ç‰ˆæœ¬ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å…è´¹ç‰ˆæœ¬çš„Redhatç³»ç»Ÿã€‚ 2. CentOSç³»ç»Ÿå®‰è£…ï¼ˆæŒæ¡ï¼‰2.1 Vmwareçš„ä¸‹è½½å’Œå®‰è£… ä¸‹è½½åœ°å€ï¼šhttps://www.vmware.com/cn.html æŒ‰ç…§å®‰è£…æ•™ç¨‹ä¸€æ­¥æ­¥æ“ä½œå³å¯ã€‚ 2.2 CentOSç³»ç»Ÿçš„ä¸‹è½½å’Œå®‰è£…ä¸‹è½½åœ°å€ï¼šhttps://www.centos.org/æŒ‰ç…§å®‰è£…æ•™ç¨‹é€šè¿‡Vmwareè½¯ä»¶è¿›è¡ŒCentOSç³»ç»Ÿçš„å®‰è£…ã€‚ã€‚ 3. ç›®å½•ç»“æ„ï¼ˆç†Ÿæ‚‰ï¼‰3.1 æ¡†æ¶ç»“æ„ 3.2 ç›®å½•è¯¦è§£ ç›®å½•åç§° åŠŸèƒ½ä»‹ç» /bin binarie:å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ (ä¾‹å¦‚tomcatçš„binç›®å½•) /sbin super binaries:å­˜æ”¾äºŒè¿›åˆ¶æ–‡ä»¶,åªæœ‰rootç”¨æˆ·æ‰èƒ½è®¿é—® /boot ç³»ç»Ÿå¯åŠ¨æ ¸å¿ƒç›®å½•,å­˜æ”¾ç³»ç»Ÿå¯åŠ¨ç¨‹åºæ–‡ä»¶ï¼Œä¾‹:æŸ¥çœ‹å¯åŠ¨æ–‡ä»¶çš„å¤§å° /dev devices:ç”¨äºå­˜æ”¾ç¡¬ä»¶è®¾å¤‡æ–‡ä»¶ /etc etcetera:å­˜æ”¾ç³»ç»Ÿé…ç½®æ–‡ä»¶(å­—ä½“æ–‡ä»¶ç­‰) /home å®¶ç›®å½•,æ¯ä¸€ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªâ€å®¶â€ï¼Œç”¨æˆ·çš„èµ·å§‹ç›®å½•,åˆ›å»ºç”¨æˆ·è·Ÿéšåˆ›å»ºç›¸åº”çš„å®¶ç›®å½• /lib library:ç³»ç»Ÿèµ„æºæ–‡ä»¶ç±»åº“ /proc å†…å­˜æ˜ å°„ç›®å½•,å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿç›¸å…³ç¡¬ä»¶çš„ä¿¡æ¯ /var variable:å¯å˜çš„,å˜é‡. éƒ¨ç½²é¡¹ç›®ç”¨çš„ /tmp temporary:ç”¨æ¥å­˜æ”¾ä¸´æ—¶æ–‡ä»¶ /root è¶…çº§ç”¨æˆ·rootçš„å®¶ç›®å½• /usr unix shared resouce: å­˜æ”¾unixå…±äº«ç³»ç»Ÿèµ„æºï¼Œç±»ä¼¼äºâ€ C:/ Program Filesâ€,ç”¨äºå®‰è£…å„ç§è½¯ä»¶ 4. å¸¸ç”¨å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰4.1 Shellçš„æ¦‚å¿µ Shellä¿—ç§°å¤–å£³ï¼Œæ˜¯æä¾›ç”¨æˆ·ä½¿ç”¨ç•Œé¢çš„ä¸€ç§è½¯ä»¶ï¼Œå«åšå‘½ä»¤è§£é‡Šå™¨ã€‚ ä¸»è¦è´Ÿè´£æ¥å—ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼Œç„¶åè°ƒç”¨ç›¸åº”çš„åº”ç”¨ç¨‹åºï¼Œæœ€åå‘ç”¨æˆ·è¾“å‡ºç¨‹åºè¿è¡Œçš„ç»“æœã€‚ 4.2 å‘½ä»¤çš„æ ¼å¼ å‘½ä»¤ [-é€‰é¡¹] [å‚æ•°] å‘½ä»¤åŒºåˆ†å¤§å°å†™ï¼Œå…¶ä¸­é€‰é¡¹å’Œå‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¸­é—´é‡‡ç”¨ç©ºæ ¼éš”å¼€ã€‚ 4.3 å¸¸ç”¨å‘½ä»¤çš„è¯¦è§£ï¼ˆ1ï¼‰æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶&#x2F;ç›®å½• å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° ls listæ˜¾ç¤ºæ–‡ä»¶ ls -l æˆ– ll list -listæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ ls -a list -allæ˜¾ç¤ºå…¨éƒ¨(åŒ…å«éšè—æ–‡ä»¶)æ–‡ä»¶ ls -al list -all list ä¸Šä¸¤ä¸ªåˆä½“ ls ç›®å½•å æŸ¥çœ‹ç›®å½•ä¸‹æœ‰ä»€ä¹ˆä¸œè¥¿ ï¼ˆ2ï¼‰ç›®å½•åˆ‡æ¢ å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° cd .. ä¸Šä¸€çº§ç›®å½• cd dirname è¿›å…¥ç›®å½• cd æˆ– cd ~ ç›´æ¥å›åˆ°ç”¨æˆ·çš„å®¶ç›®å½• cd / å›åˆ°ç³»ç»Ÿæ ¹ç›®å½• ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„çš„æ¦‚å¿µã€‚ï¼ˆ3ï¼‰æŸ¥çœ‹å®Œæ•´è·¯å¾„ å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° pwd çœ‹å½“å‰ç›®å½•æ‰€åœ¨çš„ä½ç½® **ï¼ˆ4ï¼‰æŸ¥çœ‹å½“å‰ç”¨æˆ·** å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° whoami æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„åç§° **ï¼ˆ5ï¼‰ç”¨æˆ·åˆ‡æ¢** å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° su æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ· su root åˆ‡æ¢åˆ°rootç”¨æˆ· su ç”¨æˆ·å åˆ‡æ¢åˆ°æ™®é€šç”¨æˆ· exit é€€å›åˆ°åŸæ¥ç”¨æˆ· * æœ€å¥½ä½¿ç”¨suå’Œexitæ­é…ä½¿ç”¨ï¼Œå¦åˆ™å¤šæ¬¡ä½¿ç”¨suæŒ‡ä»¤ä¼šå¯¼è‡´ç”¨æˆ·çš„â€å åŠ â€ã€‚ **ï¼ˆ6ï¼‰ç®¡ç†ç”¨æˆ·** å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° useradd xxx åˆ›å»ºç”¨æˆ· passwd xxx ä¸ºåˆ›å»ºçš„ç”¨æˆ·è®¾ç½®å¯†ç  userdel åˆ é™¤ç”¨æˆ· **ï¼ˆ7ï¼‰æŸ¥çœ‹å‘½ä»¤çš„æ‰€åœ¨ç›®å½•** å‘½ä»¤ åŠŸèƒ½æ¦‚è¿° whichå‘½ä»¤ æŸ¥çœ‹æŒ‡å®šå‘½ä»¤æ‰€åœ¨çš„è·¯å¾„ä¿¡æ¯ **ï¼ˆ8ï¼‰æ–‡ä»¶æ“ä½œ** å‘½ä»¤ åŠŸèƒ½æè¿° touch fileName åˆ›å»ºåå­—ä¸ºfileNameçš„æ–‡ä»¶ touch dir/fileName åœ¨dirç›®å½•ä¸‹åˆ›å»ºåå­—ä¸ºfileNameçš„æ–‡ä»¶ echo å†…å®¹ > fileName æŠŠå†…å®¹è¦†ç›–å†™åˆ°æ–‡ä»¶ä¸­ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º echo å†…å®¹ >> fileName æŠŠå†…å®¹è¿½åŠ åˆ°æ–‡ä»¶ä¸­ cat fileName æ‰“å°æ–‡ä»¶å†…å®¹åˆ°ç»ˆç«¯ more fileName åˆ†å±æŸ¥çœ‹æ–‡ä»¶å„è¡Œå†…å®¹ï¼Œä¸æ”¯æŒå›çœ‹ less fileName æŸ¥çœ‹æ–‡ä»¶å„éƒ¨åˆ†å†…å®¹ï¼Œæ”¯æŒå›çœ‹ head -n fileName æŸ¥çœ‹æ–‡ä»¶çš„å‰nè¡Œå†…å®¹ tail -n fileName æŸ¥çœ‹æ–‡ä»¶æœ«å°¾nè¡Œå†…å®¹ wc fileName æŸ¥çœ‹æ–‡ä»¶çš„è¡Œæ•° ï¼ˆ9ï¼‰ç›®å½•æ“ä½œ å‘½ä»¤ åŠŸèƒ½æè¿° mkdir ç›®å½•å åˆ›å»ºæ™®é€šæ–‡ä»¶å¤¹ mkdir -p ç›®å½•/ç›®å½•/ç›®å½• é€’å½’æ–¹å¼åˆ›å»ºå¤šçº§çˆ¶å­æ–‡ä»¶å¤¹ mv dir1 dir2 å°†dir1ç§»åŠ¨åˆ°dir2ä¸­ mv dir1/dir2 ./ å°†dir1ä¸­dir2ç§»åŠ¨åˆ°å½“å‰ç›®å½•ä¸‹ mv dir1 name å°†dir1æ”¹åä¸ºname cp dir1 name å°†dir1æ‹·è´ä¸ºname cp -r dir1 dir2 éœ€è¦è®¾ç½®å‚æ•° -r (recursiveé€’å½’) æ— è§†ç›®å½•å±‚æ¬¡ rm æ–‡ä»¶ åˆ é™¤æ–‡ä»¶ rm -r ç›®å½• é€’å½’åˆ é™¤ç›®å½•(æ— è§†ç›®å½•å±‚æ¬¡) rm -rf æ–‡ä»¶/ç›®å½• -r force(å¼ºåˆ¶) åˆ é™¤æ–‡ä»¶/ç›®å½• **ï¼ˆ10ï¼‰æŸ¥æ‰¾æ“ä½œ** å‘½ä»¤ åŠŸèƒ½æè¿° find / -name passwd[å®Œæ•´åç§°] æŸ¥æ‰¾passwdæ–‡ä»¶ find ./ -name â€œp*â€ æŸ¥æ‰¾å¸¦â€pâ€çš„æ–‡ä»¶ find ./ -type f æŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶ grep å†…å®¹ fileName ä»æŒ‡å®šæ–‡ä»¶ä¸­æŸ¥æ‰¾æŒ‡å®šçš„å†…å®¹ ï¼ˆ11ï¼‰æƒé™ç®¡ç† å‘½ä»¤ åŠŸèƒ½æè¿° chmod æƒé™ æ–‡ä»¶/ç›®å½•å ç®¡ç†æŒ‡å®šæ–‡ä»¶çš„æƒé™ä¿¡æ¯ï¼Œrè¯»:4 wå†™:2 xæ‰§è¡Œ:1 **ï¼ˆ12ï¼‰è¿›ç¨‹ç®¡ç†** å‘½ä»¤ åŠŸèƒ½æè¿° ps æŸ¥çœ‹å½“å‰ç»ˆç«¯çª—å£é‡Œçš„è¿›ç¨‹ ps -aux æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹ ps -ef æŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨ kill è¿›ç¨‹å· æ€æ­»æŒ‡å®šçš„è¿›ç¨‹ kill -9 è¿›ç¨‹å· å¼ºåˆ¶æ€æ­»æŒ‡å®šçš„è¿›ç¨‹ **ï¼ˆ13ï¼‰å…¶å®ƒå‘½ä»¤** å‘½ä»¤ åŠŸèƒ½æè¿° ifconfig æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„IPåœ°å€ç­‰ä¿¡æ¯ tar zcvf å‹ç¼©æ–‡ä»¶å.tar.gz è·¯å¾„1 è·¯å¾„2 ... å®ç°ä¸€ç»„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„æ‰“åŒ… tar zxvf å‹ç¼©æ–‡ä»¶å.tar.gz å®ç°è§£å‹ç¼©è§£åŒ… man [ç« èŠ‚å·] å‘½ä»¤/å‡½æ•°å æŸ¥è¯¢æŒ‡å®šçš„å‘½ä»¤æˆ–å‡½æ•° 5 viå·¥å…·çš„ä½¿ç”¨ï¼ˆé‡ç‚¹ï¼‰5.1 åŸºæœ¬æ¦‚å¿µ viå’Œvimæ˜¯Linuxç³»ç»Ÿå‘½ä»¤è¡Œä¸‹çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé€šå¸¸æ ¼å¼ä¸ºï¼švi æ–‡ä»¶å æˆ– vim æ–‡ä»¶åã€‚ 5.2 ä¸‰ç§æ¨¡å¼ 5.3 ä½¿ç”¨æ–¹å¼ï¼ˆ1ï¼‰å‘½ä»¤æ¨¡å¼çš„ç¼–è¾‘å‘½ä»¤ 123iï¼šåœ¨å½“å‰ä½ç½®ä¹‹å‰æ’å…¥ aï¼šåœ¨å½“å‰ä½ç½®ä¹‹åæ’å…¥ oï¼šåœ¨å½“å‰è¡Œä¸‹æ’å…¥ ï¼ˆ2ï¼‰å‘½ä»¤è¡Œæ¨¡å¼çš„åˆ é™¤å‘½ä»¤ 12345x åˆ é™¤ä¸€ä¸ªå­—ç¬¦ dw åˆ é™¤å½“å‰è¯ 3dw åˆ é™¤ä¸‰ä¸ªè¯ dd åˆ é™¤å½“å‰è¡Œ 5dd åˆ é™¤äº”è¡Œ ï¼ˆ3ï¼‰å‘½ä»¤è¡Œæ¨¡å¼çš„ä¿®æ”¹å‘½ä»¤ 1234r æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ cw æ›¿æ¢ä¸€ä¸ªå•è¯ cc æ›¿æ¢ä¸€è¡Œ C æ›¿æ¢ä»å…‰æ ‡è‡³è¡Œå°¾ ï¼ˆ4ï¼‰å‘½ä»¤è¡Œæ¨¡å¼çš„æ‹·è´å‘½ä»¤ 123456yw æ‹·è´è¯ yy æ‹·è´è¡Œ(æˆ–Y) dd å‰ªåˆ‡è¡Œ p å½“å‰è¡Œä¸‹ç²˜è´´ u æ’¤é”€ ctrl+r å–æ¶ˆæ’¤é”€ ï¼ˆ5ï¼‰åº•è¡Œæ¨¡å¼çš„å‘½ä»¤ 12345678:w å­˜ç›˜ :w newfile å­˜æˆæ–°æ–‡ä»¶ :wq å­˜ç›˜é€€å‡ºVi(æˆ–ZZï¼Œæˆ–:x) :q! å¼ºè¡Œé€€å‡ºä¸å­˜ç›˜ :1,2co3 æ‹·è´è¡Œ1ï¼Œè¡Œ2åœ¨è¡Œ3ä¹‹å :4,5mo6 ç§»åŠ¨è¡Œ4ï¼Œè¡Œ5åœ¨è¡Œ6ä¹‹å :%s /æºå­—ç¬¦ä¸²/ç›®æ ‡å­—ç¬¦ä¸² :%s /æºå­—ç¬¦ä¸²/ç›®æ ‡å­—ç¬¦ä¸²/g æ›¿æ¢æ¯ä¸€è¡Œä¸­çš„æ‰€æœ‰ ï¼ˆ6ï¼‰æ³¨æ„ä½¿ç”¨ ä½¿ç”¨vimtutor å‘½ä»¤ç”¨æ¥ç»ƒä¹ viå‘½ä»¤ã€‚ ç”¨æˆ·ä¸»ç›®å½•ä¸‹.vimrcæ–‡ä»¶å¯ä»¥å®ç°viçš„ç®€å•è®¾ç½®ã€‚ æ¯”å¦‚è®¾ç½®å¼€å¯è¡Œå·æ˜¾ç¤º 1vim ~/.vimrc åœ¨é‡Œé¢æ·»åŠ ä¸Šset nuå³å¯å¼€å¯è¡Œå· 1set nu è¡Œå·æ•ˆæœ","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Filter+Listeneræ ¸å¿ƒæŠ€æœ¯","slug":"Filter-Listeneræ ¸å¿ƒæŠ€æœ¯","date":"2020-01-12T02:54:23.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2020/01/12/Filter-Listeneræ ¸å¿ƒæŠ€æœ¯/","link":"","permalink":"http://yournotes.cn/2020/01/12/Filter-Listener%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/","excerpt":"","text":"1. Filterè¿‡æ»¤å™¨ï¼ˆé‡ç‚¹ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ Filteræœ¬æ„ä¸ºâ€è¿‡æ»¤â€œçš„å«ä¹‰ï¼Œæ˜¯JavaWebçš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œä¸‰å¤§ç»„ä»¶ä¸ºï¼šServletã€Filterã€Listenerã€‚ è¿‡æ»¤å™¨æ˜¯å‘ Web åº”ç”¨ç¨‹åºçš„è¯·æ±‚å’Œå“åº”å¤„ç†æ·»åŠ åŠŸèƒ½çš„ Web æœåŠ¡ç»„ä»¶ã€‚ è¿‡æ»¤å™¨ç›¸å½“äºæµè§ˆå™¨ä¸Webèµ„æºä¹‹é—´çš„ä¸€é“è¿‡æ»¤ç½‘ï¼Œåœ¨è®¿é—®èµ„æºä¹‹å‰é€šè¿‡ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨å¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ã€åˆ¤æ–­ä»¥åŠæ‹¦æˆªç­‰ï¼Œä¹Ÿå¯ä»¥å¯¹å“åº”è¿›è¡Œä¿®æ”¹ã€åˆ¤æ–­ä»¥åŠæ‹¦æˆªç­‰ã€‚ 1.2 å·¥ä½œæ–¹å¼ 1.3 ä½¿ç”¨æ–¹å¼ è‡ªå®šä¹‰ç±»å®ç°Filteræ¥å£å¹¶é‡å†™doFilteræ–¹æ³•ã€‚ 123456789public class LoginFilter implements Filter &#123; public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException,ServletException &#123; //TODO å¤„ç†é€»è¾‘ï¼Œå¿…é¡»è°ƒç”¨ä¸‹é¢çš„æ–¹æ³• chain.doFilter(request,response); &#125; &#125; åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®è¿‡æ»¤å™¨ã€‚ 12345678&lt;filter&gt; &lt;filter-name&gt;LoginFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.lagou.LoginFilter&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;LoginFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; 1.4 Filteræ¥å£ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ javax.servlet.Filteræ¥å£ä¸»è¦ç”¨äºæè¿°è¿‡æ»¤å™¨å¯¹è±¡ï¼Œå¯ä»¥å¯¹èµ„æºçš„è¯·æ±‚å’Œèµ„æºçš„å“åº”æ“ä½œè¿›è¡Œç­›é€‰æ“ä½œã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void init(FilterConfig filterConfig) å®ç°è¿‡æ»¤å™¨çš„åˆå§‹åŒ–æ“ä½œ void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) æ‰§è¡Œè¿‡æ»¤æ“ä½œçš„åŠŸèƒ½ void destroy() å®ç°è¿‡æ»¤å™¨çš„é”€æ¯æ“ä½œ 1.5 FilterConfigæ¥å£ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ javax.servlet.FilterConfifigæ¥å£ä¸»è¦ç”¨äºæè¿°è¿‡æ»¤å™¨çš„é…ç½®ä¿¡æ¯ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getFilterName() è·å–è¿‡æ»¤å™¨çš„åå­— String getInitParameter(String name) è·å–æŒ‡å®šçš„åˆå§‹åŒ–å‚æ•°ä¿¡æ¯ Enumeration getInitParameterNames() è·å–æ‰€æœ‰çš„åˆå§‹åŒ–æ“ä½œåç§° ServletContext getServletContext() è·å–ServletContextå¯¹è±¡ 1.6 å¤šä¸ªè¿‡æ»¤å™¨çš„ä½¿ç”¨ å¦‚æœæœ‰å¤šä¸ªè¿‡æ»¤å™¨éƒ½æ»¡è¶³è¿‡æ»¤çš„æ¡ä»¶ï¼Œåˆ™å®¹å™¨ä¾æ®æ˜ å°„çš„å…ˆåé¡ºåºæ¥è°ƒç”¨å„ä¸ªè¿‡æ»¤å™¨ã€‚ 1.7 è¿‡æ»¤å™¨çš„ä¼˜ç‚¹ å®ç°ä»£ç çš„â€œå¯æ’æ‹”æ€§â€ï¼Œå³å¢åŠ æˆ–å‡å°‘æŸä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä¸ä¼šå½±å“ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œã€‚ å¯ä»¥å°†å¤šä¸ªç›¸åŒå¤„ç†é€»è¾‘çš„æ¨¡å—é›†ä¸­å†™åœ¨è¿‡æ»¤å™¨é‡Œé¢ï¼Œå¯å®ç°é‡å¤åˆ©ç”¨ã€ä¹Ÿæ–¹ä¾¿ä»£ç çš„ç»´æŠ¤ã€‚ 2 Listenerç›‘å¬å™¨ï¼ˆé‡ç‚¹ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ Servletè§„èŒƒä¸­å®šä¹‰çš„ä¸€ç§ç‰¹æ®Šçš„ç»„ä»¶ï¼Œç”¨æ¥ç›‘å¬Servletå®¹å™¨äº§ç”Ÿçš„äº‹ä»¶å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ å®¹å™¨äº§ç”Ÿçš„äº‹ä»¶åˆ†ç±»å¦‚ä¸‹ï¼š ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„äº‹ä»¶ã€‚ å±æ€§çŠ¶æ€ç›¸å…³çš„äº‹ä»¶ã€‚ å­˜å€¼çŠ¶æ€ç›¸å…³çš„äº‹ä»¶ã€‚ åº•å±‚åŸç†æ˜¯é‡‡ç”¨æ¥å£å›è°ƒçš„æ–¹å¼å®ç°ã€‚ 2.2 åŸºæœ¬åˆ†ç±» ç›‘å¬å™¨ç±»å‹ åŠŸèƒ½ä»‹ç» javax.servlet.ServletRequestListener ç›‘å¬requestä½œç”¨åŸŸçš„åˆ›å»ºå’Œé”€æ¯ javax.servlet.ServletRequestAttributeListener ç›‘å¬requestä½œç”¨åŸŸçš„å±æ€§çŠ¶æ€å˜åŒ– javax.servlet.http.HttpSessionListener ç›‘å¬sessionä½œç”¨åŸŸçš„åˆ›å»ºå’Œé”€æ¯ javax.servlet.http.HttpSessionAttributeListener ç›‘å¬sessionä½œç”¨åŸŸçš„å±æ€§çŠ¶æ€å˜åŒ– javax.servlet.ServletContextListener ç›‘å¬applicationä½œç”¨åŸŸçš„åˆ›å»ºå’Œé”€æ¯ javax.servlet.ServletContextAttributeListener ç›‘å¬applicationä½œç”¨åŸŸçš„å±æ€§çŠ¶æ€å˜åŒ– javax.servlet.http.HttpSessionBindingListener ç›‘å¬å¯¹è±¡ä¸sessionçš„ç»‘å®šå’Œè§£é™¤ javax.servlet.http.HttpSessionActivationListener ç›‘å¬sessionæ•°å€¼çš„é’åŒ–å’Œæ´»åŒ– 2.3 ç›‘å¬å™¨è¯¦è§£ï¼ˆ1ï¼‰ServletRequestListenerç›‘å¬å™¨ åœ¨ServletRequeståˆ›å»ºå’Œå…³é—­æ—¶éƒ½ä¼šé€šçŸ¥ServletRequestListenerç›‘å¬å™¨ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void requestInitialized(ServletRequestEvent sre) å®ç°ServletRequestå¯¹è±¡çš„åˆå§‹åŒ– void requestDestroyed(ServletRequestEvent sre) å®ç°ServletRequestå¯¹è±¡çš„é”€æ¯ **ï¼ˆ2ï¼‰ServletRequestAttributeListenerç›‘å¬å™¨** * å‘ServletRequestæ·»åŠ ã€åˆ é™¤æˆ–è€…æ›¿æ¢ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œå°†ä¼šé€šçŸ¥ServletRequestAttributeListenerç›‘å¬å™¨ã€‚ * å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void attributeAdded(ServletRequestAttributeEvent srae) å¢åŠ å±æ€§æ—¶è§¦å‘ void attributeReplaced(ServletRequestAttributeEvent srae) ä¿®æ”¹å±æ€§æ—¶è§¦å‘ void attributeRemoved(ServletRequestAttributeEvent srae) åˆ é™¤å±æ€§æ—¶è§¦å‘ ï¼ˆ3ï¼‰HttpSessionListenerç›‘å¬å™¨ å½“ä¸€ä¸ªHttpSessionåˆšè¢«åˆ›å»ºæˆ–è€…å¤±æ•ˆï¼ˆinvalidateï¼‰çš„æ—¶å€™ï¼Œå°†ä¼šé€šçŸ¥HttpSessionListenerç›‘å¬å™¨ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void sessionCreated(HttpSessionEvent se) å½“ä¸€ä¸ªHttpSessionå¯¹è±¡è¢«åˆ›å»ºæ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• void sessionDestroyed(HttpSessionEvent se) å½“ä¸€ä¸ªHttpSessionè¶…æ—¶æˆ–è€…è°ƒç”¨HttpSessionçš„invalidate()æ–¹æ³•è®©å®ƒé”€æ¯æ—¶ï¼Œå°†ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• ï¼ˆ4ï¼‰HttpSessionAttributeListenerç›‘å¬å™¨ HttpSessionä¸­æ·»åŠ ã€åˆ é™¤æˆ–è€…æ›¿æ¢ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œå°†ä¼šé€šçŸ¥HttpSessionAttributeListenerç›‘å¬å™¨ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void attributeAdded(HttpSessionBindingEvent se) å½“å¾€ä¼šè¯ä¸­åŠ å…¥ä¸€ä¸ªå±æ€§çš„æ—¶å€™ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• void attributeRemoved(HttpSessionBindingEvent se) å½“ä»ä¼šè¯ä¸­åˆ é™¤ä¸€ä¸ªå±æ€§çš„æ—¶å€™ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• void attributeReplaced(HttpSessionBindingEvent se) å½“æ”¹å˜ä¼šè¯ä¸­çš„å±æ€§çš„æ—¶å€™ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• ï¼ˆ5ï¼‰ServletContextListenerç›‘å¬å™¨ åœ¨ServletContextåˆ›å»ºå’Œå…³é—­æ—¶éƒ½ä¼šé€šçŸ¥ServletContextListenerç›‘å¬å™¨ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void contextInitialized(ServletContextEvent sce) å½“ServletContextåˆ›å»ºçš„æ—¶å€™ï¼Œå°†ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• void contextDestroyed(ServletContextEvent sce) å½“ServletContexté”€æ¯çš„æ—¶å€™ï¼ˆä¾‹å¦‚å…³é—­åº”ç”¨æœåŠ¡å™¨æˆ–è€…é‡æ–°åŠ è½½åº”ç”¨ï¼‰ï¼Œå°†ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• ï¼ˆ6ï¼‰ServletContextAttributeListenerç›‘å¬å™¨ å‘ServletContextæ·»åŠ ã€åˆ é™¤æˆ–è€…æ›¿æ¢ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œå°†ä¼šé€šServletContextAttributesListenerç›‘å¬å™¨ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void attributeAdded(ServletContextAttributeEvent scae) å¾€ServletContextä¸­åŠ å…¥ä¸€ä¸ªå±æ€§çš„æ—¶å€™è§¦å‘ void attributeRemoved(ServletContextAttributeEvent scae) ä»ServletContextä¸­åˆ é™¤ä¸€ä¸ªå±æ€§çš„æ—¶å€™è§¦å‘ void attributeReplaced(ServletContextAttributeEvent scae) æ”¹å˜ServletContextä¸­å±æ€§çš„æ—¶å€™è§¦å‘ ï¼ˆ7ï¼‰HttpSessionBindingListenerç›‘å¬å™¨ HttpSessionä¸­ç»‘å®šå’Œè§£é™¤ç»‘å®šæ—¶ï¼Œå°†ä¼šé€šçŸ¥HttpSessionListenerç›‘å¬å™¨ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void valueBound(HttpSessionBindingEvent event) æœ‰å¯¹è±¡ç»‘å®šæ—¶è°ƒç”¨è¯¥æ–¹æ³• void valueUnbound(HttpSessionBindingEvent event) æœ‰å¯¹è±¡è§£é™¤ç»‘å®šæ—¶è°ƒç”¨è¯¥æ–¹æ³• ï¼ˆ8ï¼‰HttpSessionActivationListenerç›‘å¬å™¨ å½“æœ‰sessionæ•°å€¼çš„é’åŒ–å’Œæ´»åŒ–æ“ä½œæ—¶ï¼Œå°†ä¼šé€šçŸ¥HttpSessionActivationListenerç›‘å¬å™¨ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void sessionWillPassivate(HttpSessionEvent se) æœ‰é’åŒ–æ“ä½œæ—¶è°ƒç”¨è¯¥æ–¹æ³• void sessionDidActivate(HttpSessionEvent se) æœ‰æ´»åŒ–æ“ä½œæ—¶è°ƒç”¨è¯¥æ–¹æ³• * é…ç½®context.xmlæ–‡ä»¶çš„æ–¹å¼å¦‚ä¸‹ï¼š 1234&lt;Manager className=&quot;org.apache.catalina.session.PersistentManager&quot; saveOnRestart=&quot;true&quot;&gt; &lt;!-- é…ç½®æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ä¿¡æ¯ï¼Œå¯ä»¥è‡ªç”±æŒ‡å®š --&gt; &lt;Store className=&quot;org.apache.catalina.session.FileStore&quot; directory=&quot;C:\\session&quot;/&gt; &lt;/Manager&gt; 2.4 å®æˆ˜æ¡ˆä¾‹ è‡ªå®šä¹‰ç±»å®ç°ç›‘å¬å™¨æ¥å£å¹¶é‡å†™ç›¸å…³çš„æ–¹æ³•ã€‚ 123456789101112131415161718192021public class OnlineUser implements HttpSessionListener,ServletContextListener &#123; ServletContext ctx = null; // åˆå§‹åŒ– ServletContext public void contextInitialized(ServletContextEvent e) &#123; ctx = e.getServletContext(); &#125; // é”€æ¯ ServletContext public void contextDestroyed(ServletContextEvent e) &#123; //å°†ServletContextè®¾ç½®æˆnull; &#125; // å½“æ–°åˆ›å»ºä¸€ä¸ªHttpSessionå¯¹è±¡æ—¶ public void sessionCreated(HttpSessionEvent e) &#123; //å°†å½“å‰çš„åœ¨çº¿äººæ•°åŠ ä¸Š1ï¼Œå¹¶ä¸”ä¿å­˜åˆ°ServletContext(application)ä¸­ &#125; // å½“ä¸€ä¸ªHttpSessionè¢«é”€æ¯æ—¶ï¼ˆè¿‡æœŸæˆ–è€…è°ƒç”¨äº†invalidate()æ–¹æ³•ï¼‰ public void sessionDestroyed(HttpSessionEvent e) &#123; //å°†å½“å‰äººæ•°å‡å»1ï¼Œå¹¶ä¸”ä¿å­˜åˆ°ServletContext(application)ä¸­ &#125; &#125; åœ¨web.xmlä¸­é…ç½®ç›‘å¬å™¨ 123&lt;listener&gt; &lt;listener-class&gt; com.hao.listener.OnlineUser &lt;/listener-class&gt; &lt;/listener&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"ELå’ŒJSTLæ ¸å¿ƒæŠ€æœ¯","slug":"ELå’ŒJSTLæ ¸å¿ƒæŠ€æœ¯","date":"2020-01-11T02:54:11.000Z","updated":"2025-04-17T08:34:51.958Z","comments":true,"path":"2020/01/11/ELå’ŒJSTLæ ¸å¿ƒæŠ€æœ¯/","link":"","permalink":"http://yournotes.cn/2020/01/11/EL%E5%92%8CJSTL%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/","excerpt":"","text":"1. ELè¡¨è¾¾å¼ï¼ˆç†Ÿæ‚‰ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ ELï¼ˆExpression Languageï¼‰è¡¨è¾¾å¼æä¾›äº†åœ¨JSPä¸­ç®€åŒ–è¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è®¿é—®å„ç§æ•°æ®å¹¶è¾“å‡ºã€‚ 1.2 ä¸»è¦åŠŸèƒ½ ä¾æ¬¡è®¿é—®pageContextã€requestã€sessionå’Œapplicationä½œç”¨åŸŸå¯¹è±¡å­˜å‚¨çš„æ•°æ®ã€‚ è·å–è¯·æ±‚å‚æ•°å€¼ã€‚ è®¿é—®Beanå¯¹è±¡çš„å±æ€§ã€‚ è®¿é—®é›†åˆä¸­çš„æ•°æ®ã€‚ è¾“å‡ºç®€å•çš„è¿ç®—ç»“æœã€‚ 1.3 è®¿é—®å†…ç½®å¯¹è±¡çš„æ•°æ®ï¼ˆ1ï¼‰è®¿é—®æ–¹å¼ &lt;%&#x3D;request.getAttribute(â€œ varNameâ€)%&gt; ç”¨ELå®ç°: ${ varName } ï¼ˆ2ï¼‰æ‰§è¡Œæµç¨‹ 1.4 è®¿é—®è¯·æ±‚å‚æ•°çš„æ•°æ® åœ¨ELä¹‹å‰ä½¿ç”¨ä¸‹åˆ—æ–¹å¼è®¿é—®è¯·æ±‚å‚æ•°çš„æ•°æ® request.getParameter(name); request.getParameterValues(name); åœ¨ELä¸­ä½¿ç”¨ä¸‹åˆ—æ–¹å¼è®¿é—®è¯·æ±‚å‚æ•°çš„æ•°æ® paramï¼šæ¥æ”¶çš„å‚æ•°åªæœ‰ä¸€ä¸ªå€¼ã€‚ paramValuesï¼šæ¥å—çš„å‚æ•°æœ‰å¤šä¸ªå€¼ã€‚ 1234&lt;!-- è·å–æŒ‡å®šå‚æ•°çš„æ•°å€¼ --&gt; $&#123;param.name&#125; &lt;!-- è·å–æŒ‡å®šå‚æ•°ä¸­æŒ‡å®šä¸‹æ ‡çš„æ•°å€¼ --&gt; $&#123;paramValues.hobby[0]&#125; 1.5 è®¿é—®Beanå¯¹è±¡çš„ç†Ÿæ‚‰ï¼ˆ1ï¼‰è®¿é—®æ–¹å¼ æ–¹å¼ä¸€ï¼š $ { å¯¹è±¡å . å±æ€§å }ï¼Œä¾‹å¦‚ï¼š$&#123;user.name&#125; æ–¹å¼äºŒï¼š $ { å¯¹è±¡å [â€œå±æ€§åâ€] }ï¼Œä¾‹å¦‚ï¼š$&#123;user[&quot;name&quot;]&#125; ï¼ˆ2ï¼‰ä¸»è¦åŒºåˆ« å½“è¦å­˜å–çš„å±æ€§åä¸­åŒ…å«ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚ï¼š . æˆ– ,ç­‰å¹¶éå­—æ¯æˆ–æ•°å­—çš„ç¬¦å·ï¼Œå°±ä¸€å®šè¦ä½¿ç”¨ [ ]è€Œä¸æ˜¯.çš„æ–¹å¼ ä½¿ç”¨[]çš„æ–¹å¼å¯ä»¥åŠ¨æ€å–å€¼ï¼Œå…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š 123&lt;% request.setAttribute(â€œpropâ€,â€œageâ€); %&gt;&lt;!-- ç›¸å½“äºè¡¨è¾¾å¼ä¸­å†™ä¸€ä¸ªå˜é‡ --&gt; $&#123; user[prop] &#125; 1.6 è®¿é—®é›†åˆä¸­çš„æ•°æ®12&lt;!-- studentä¸ºArrayListç±»å‹çš„å¯¹è±¡ --&gt; $&#123;student[0].name&#125; 1.7 å¸¸ç”¨çš„å†…ç½®å¯¹è±¡ ç±»åˆ« æ ‡è¯†ç¬¦ æè¿° JSP pageContext PageContext å¤„ç†å½“å‰é¡µé¢ ä½œç”¨åŸŸ pageScope åŒé¡µé¢ä½œç”¨åŸŸå±æ€§åç§°å’Œå€¼æœ‰å…³çš„Mapç±» requestScope åŒè¯·æ±‚ä½œç”¨åŸŸå±æ€§çš„åç§°å’Œå€¼æœ‰å…³çš„Mapç±» sessionScope åŒä¼šè¯ä½œç”¨åŸŸå±æ€§çš„åç§°å’Œå€¼æœ‰å…³çš„Mapç±» applicationScope åŒåº”ç”¨ç¨‹åºä½œç”¨åŸŸå±æ€§çš„åç§°å’Œå€¼æœ‰å…³çš„Mapç±» è¯·æ±‚å‚æ•° param æ ¹æ®åç§°å­˜å‚¨è¯·æ±‚å‚æ•°çš„å€¼çš„Mapç±» paramValues æŠŠè¯·æ±‚å‚æ•°çš„æ‰€æœ‰å€¼ä½œä¸ºä¸€ä¸ªStringæ•°ç»„æ¥å­˜å‚¨çš„Mapç±» è¯·æ±‚å¤´ header æ ¹æ®åç§°å­˜å‚¨è¯·æ±‚å¤´ä¸»è¦å€¼çš„Mapç±» headerValues æŠŠè¯·æ±‚å¤´çš„æ‰€æœ‰å€¼ä½œä¸ºä¸€ä¸ªStringæ•°ç»„æ¥å­˜å‚¨çš„Mapç±» Cookie cookie æ ¹æ®åç§°å­˜å‚¨è¯·æ±‚é™„å¸¦çš„cookieçš„Mapç±» åˆå§‹åŒ–å‚æ•° initParam æ ¹æ®åç§°å­˜å‚¨Webåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡åˆå§‹åŒ–å‚æ•°çš„Mapç±» 1.8 å¸¸ç”¨çš„è¿ç®—ç¬¦ï¼ˆ1ï¼‰å¸¸ç”¨çš„ç®—æœ¯è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ è¯´ æ˜ èŒƒ ä¾‹ è¿ç®—ç»“æœ + åŠ  ${1+2} 3 ï¼ å‡ ${2-1} 1 * ä¹˜ ${2*3} 6 / æˆ– div é™¤ ${16/5}æˆ–${16div5} 3.2 % æˆ– mod å–ä½™ ${16%5}æˆ–${16mod5} 1 ï¼ˆ2ï¼‰å¸¸ç”¨çš„å…³ç³»è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ è¯´ æ˜ èŒƒ ä¾‹ è¿ç®—ç»“æœ ==æˆ–eq ç­‰äº ${1==2}æˆ–${1 eq 2} false != æˆ–ne ä¸ç­‰äº ${2!=1}æˆ–${1 ne 2} true < æˆ–lt å°äº ${2 æˆ– gt å¤§äº ${16>5}æˆ–${16 gt 5} true =5}æˆ–${16 ge 5} true **ï¼ˆ3ï¼‰å¸¸ç”¨çš„é€»è¾‘è¿ç®—ç¬¦** é€»è¾‘è¿ç®—ç¬¦ è¯´ æ˜ èŒƒ ä¾‹ è¿ç®—ç»“æœ && æˆ– and ä¸è¿ç®— ${true&&true}æˆ–${true and true} true || æˆ–or æˆ–è¿ç®— ${true||false}æˆ–${true or false} true ! æˆ–not éè¿ç®— ${!true}æˆ–${not true } false **ï¼ˆ4ï¼‰æ¡ä»¶è¿ç®—ç¬¦** 1$&#123;æ¡ä»¶è¡¨è¾¾å¼? è¯­å¥1 : è¯­å¥2&#125; ï¼ˆ5ï¼‰éªŒè¯è¿ç®—ç¬¦ 12$&#123;empty è¡¨è¾¾å¼&#125; è¿”å›å¸ƒå°”å€¼åˆ¤æ–­è¡¨è¾¾å¼æ˜¯å¦ä¸º&quot;ç©º&quot;å€¼ï¼Œnullå€¼ã€æ— å…ƒç´ çš„é›†åˆæˆ–æ•°ç»„ã€é•¿åº¦ä¸ºé›¶çš„Stringè¢«è®¤ä¸ºæ˜¯ç©ºå€¼ã€‚ 2. JSTLæ ‡ç­¾ï¼ˆç†Ÿæ‚‰ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ JSTL( JSP Standard Tag Library ) è¢«ç§°ä¸ºJSPæ ‡å‡†æ ‡ç­¾åº“ã€‚ å¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨è¿™äº›æ ‡ç­¾å–ä»£JSPé¡µé¢ä¸Šçš„Javaä»£ç ï¼Œä»è€Œæé«˜ç¨‹åºçš„å¯è¯»æ€§ï¼Œé™ä½ç¨‹åºçš„ç»´æŠ¤éš¾åº¦ã€‚ 2.2 ä½¿ç”¨æ–¹å¼ ä¸‹è½½JSTLçš„jaråŒ…å¹¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œä¸‹è½½åœ°å€ä¸ºï¼šhttps://tomcat.apache.org/download/taglibs.cgi åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨taglibæŒ‡å®šå¼•å…¥jstlæ ‡ç­¾åº“ï¼Œæ–¹å¼ä¸ºï¼š 123&lt;!-- prefixå±æ€§ç”¨äºæŒ‡å®šåº“å‰ç¼€ --&gt; &lt;!-- uriå±æ€§ç”¨äºæŒ‡å®šåº“çš„æ ‡è¯† --&gt; &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; % 2.3 å¸¸ç”¨æ ¸å¿ƒæ ‡ç­¾ï¼ˆ1ï¼‰è¾“å‡ºæ ‡ç­¾ 1&lt;c:out&gt;&lt;/c:out&gt; ç”¨æ¥å°†æŒ‡å®šå†…å®¹è¾“å‡ºçš„æ ‡ç­¾ ï¼ˆ2ï¼‰è®¾ç½®æ ‡ç­¾ 1&lt;c:set&gt;&lt;/c:set&gt; ç”¨æ¥è®¾ç½®å±æ€§èŒƒå›´å€¼çš„æ ‡ç­¾ ï¼ˆ3ï¼‰åˆ é™¤æ ‡ç­¾ 1&lt;c:remove&gt;&lt;/c:remove&gt; ç”¨æ¥åˆ é™¤æŒ‡å®šæ•°æ®çš„æ ‡ç­¾ ï¼ˆ4ï¼‰å•æ¡ä»¶æ ‡ç­¾ 123&lt;c:if test =â€œELæ¡ä»¶è¡¨è¾¾å¼â€&gt; æ»¡è¶³æ¡ä»¶æ‰§è¡Œ &lt;/c:if &gt; ï¼ˆ5ï¼‰å¤šæ¡ä»¶åˆ¤æ–­æ ‡ç­¾ 12345678&lt;c:choose &gt; &lt;c:when test =â€œELè¡¨è¾¾å¼â€&gt; æ»¡è¶³æ¡ä»¶æ‰§è¡Œ &lt;/c:when&gt; â€¦ &lt;c:otherwise&gt; ä¸æ»¡è¶³ä¸Šè¿°whenæ¡ä»¶æ—¶æ‰§è¡Œ &lt;/c:otherwise&gt; &lt;/c:choose &gt; ï¼ˆ6ï¼‰å¾ªç¯æ ‡ç­¾ 123&lt;c:forEach var=â€œå¾ªç¯å˜é‡â€ items=â€œé›†åˆâ€&gt; â€¦ &lt;/c:forEach&gt; 2.4 å¸¸ç”¨å‡½æ•°æ ‡ç­¾1&lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt; 2.5 å¸¸ç”¨æ ¼å¼åŒ–æ ‡ç­¾1&lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&gt; 2.6 è‡ªå®šä¹‰æ ‡ç­¾ å¦‚æœä¸Šé¢å‡ ä¸ªæ ‡ç­¾ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œç¨‹åºå‘˜ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ ‡ç­¾ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š ç¼–å†™æ ‡ç­¾ç±»ç»§æ‰¿SimpleTagSupportç±»æˆ–TagSupportç±»å¹¶é‡å†™doTagæ–¹æ³•æˆ–doStartTagæ–¹æ³•ã€‚ 12345678910111213public class HelloTag extends SimpleTagSupport &#123; private String name; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Override public void doTag() throws JspException, IOException &#123; JspWriter out = this.getJspContext().getOut(); out.println(&quot;è‡ªå®šä¹‰æ ‡ç­¾çš„å‚æ•°ä¸ºï¼š&quot; + name); &#125; &#125; å®šä¹‰æ ‡ç­¾åº“æ–‡ä»¶ï¼ˆtldæ ‡ç­¾åº“æ–‡ä»¶ï¼‰å¹¶é…ç½®æ ‡ç­¾è¯´æ˜æ–‡ä»¶åˆ°åˆ°WEB-INFä¸‹ï¼š 123456789&lt;tag&gt; &lt;name&gt;helloTag&lt;/name&gt; &lt;tag-class&gt;com.hao.tag.HelloTag&lt;/tag-class&gt; &lt;body-content&gt;empty&lt;/body-content&gt; &lt;attribute&gt; &lt;name&gt;name&lt;/name&gt; &lt;required&gt;true&lt;/required&gt; &lt;/attribute&gt; &lt;/tag&gt; åœ¨JSPä¸­æ·»åŠ taglibæŒ‡ä»¤å¼•å…¥æ ‡ç­¾åº“ä½¿ç”¨ï¼š 1&lt;%@ taglib prefix=&quot;hello&quot; uri=&quot;/WEB-INF/mytag.tld&quot; %&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"JSPæ ¸å¿ƒæŠ€æœ¯","slug":"JSPæ ¸å¿ƒæŠ€æœ¯","date":"2020-01-09T03:15:05.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2020/01/09/JSPæ ¸å¿ƒæŠ€æœ¯/","link":"","permalink":"http://yournotes.cn/2020/01/09/JSP%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/","excerpt":"","text":"1.JSPçš„æ¦‚è¿°ï¼ˆç†Ÿæ‚‰ï¼‰1.1 JSPçš„æ¦‚å¿µ JSPæ˜¯Java Server Pagesçš„ç®€ç§°ï¼Œè·ŸServletä¸€æ ·å¯ä»¥åŠ¨æ€ç”ŸæˆHTMLå“åº”ï¼Œ JSPæ–‡ä»¶å‘½åä¸ºxxx.jspã€‚ ä¸Servletä¸åŒï¼ŒJSPæ–‡ä»¶ä»¥HTMLæ ‡è®°ä¸ºä¸»ï¼Œç„¶åå†…åµŒJavaä»£ç æ®µï¼Œç”¨äºå¤„ç†åŠ¨æ€å†…å®¹ã€‚ 1.2 JSPçš„ç¤ºä¾‹12345678910&lt;%@ page import=&quot;java.util.Date&quot; %&gt; &lt;%@ pagecontentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;Hello Time&lt;/title&gt; &lt;/head&gt; &lt;body&gt; ç°åœ¨çš„æ—¶é—´æ˜¯ï¼š&lt;%= new Date()%&gt; &lt;/body&gt;&lt;/html&gt; 1.3 JSPä¸Servletçš„å…³ç³» 2. JSPçš„è¯­æ³•ï¼ˆç†Ÿæ‚‰ï¼‰2.1 JSPè¯­æ³•ç»“æ„ å£°æ˜åŒº ç¨‹åºä»£ç åŒº è¡¨è¾¾å¼ æ³¨é‡Š æŒ‡ä»¤å’ŒåŠ¨ä½œ å†…ç½®å¯¹è±¡ 2.2 å£°æ˜åŒº åŸºæœ¬è¯­æ³•ï¼š&lt;%! %&gt; è¯´æ˜ï¼šå¯ä»¥å®šä¹‰å…¨å±€å˜é‡ã€æ–¹æ³•ã€ç±»ã€‚ 1234&lt;%! int i; public void setName()&#123;â€¦ â€¦&#125; %&gt; 2.3 ç¨‹åºä»£ç åŒº åŸºæœ¬è¯­æ³•ï¼š&lt;% ç¨‹åºä»£ç åŒº %&gt; è¯´æ˜ï¼šå¯ä»¥å®šä¹‰å±€éƒ¨å˜é‡ä»¥åŠæ”¾å…¥ä»»ä½•çš„Javaç¨‹åºä»£ç  123456&lt;% int j; for (int k=0; k&lt;10; k++) &#123; â€¦ â€¦ &#125; %&gt; 2.4 è¡¨è¾¾å¼ åŸºæœ¬è¯­æ³•ï¼š&lt;%=â€¦ â€¦%&gt; è¯´æ˜ï¼šå¯ä»¥è¾“å‡ºä¸€ä¸ªå˜é‡æˆ–ä¸€ä¸ªå…·ä½“å†…å®¹ï¼Œä½†&#x3D;åé¢å¿…é¡»æ˜¯å­—ç¬¦ä¸²å˜é‡æˆ–è€…å¯ä»¥è¢«è½¬æ¢æˆå­—ç¬¦ä¸²çš„è¡¨è¾¾å¼ã€‚ æ³¨æ„ï¼šä¸éœ€è¦ä»¥;ç»“æŸï¼Œåªæœ‰ä¸€è¡Œ 12&lt;%=â€œhello worldâ€%&gt; &lt;%=i+1%&gt; æ¡ˆä¾‹é¢˜ç›® 123456ä½¿ç”¨forå¾ªç¯è¾“å‡ºä¸€ä¸ªhtmlè¯­è¨€çš„è¡¨æ ¼ï¼Œå…·ä½“è¡¨å¤´å¦‚ä¸‹ï¼š id name age salary 1 1 1 1 2 2 2 2 ... 5 5 5 5 2.5 æ³¨é‡Š123456æ ¼å¼ï¼š &lt;!--â€¦ â€¦--&gt; HTMLæ–‡ä»¶çš„æ³¨é‡Šï¼Œæµè§ˆå™¨å¯ä»¥æŸ¥çœ‹åˆ° &lt;%--â€¦ â€¦--%&gt; JSPæ–‡ä»¶çš„æ³¨é‡Šï¼Œæµè§ˆå™¨çœ‹ä¸åˆ° &lt;%//â€¦ â€¦%&gt; Javaè¯­è¨€ä¸­çš„å•è¡Œæ³¨é‡Šï¼Œæµè§ˆå™¨çœ‹ä¸åˆ° &lt;%/*â€¦ â€¦*/%&gt; Javaè¯­è¨€ä¸­çš„å¤šè¡Œæ³¨é‡Šï¼Œæµè§ˆå™¨çœ‹ä¸åˆ° æ³¨é‡Šçš„å†…å®¹ä¸ä¼šè¢«æ‰§è¡Œ 2.6 æŒ‡ä»¤å’ŒåŠ¨ä½œ æŒ‡ä»¤æ ¼å¼ï¼š&lt;%@æŒ‡ä»¤ å±æ€§=â€œå±æ€§å€¼â€ %&gt; æŒ‡ä»¤çš„å±æ€§å¯ä»¥è®¾å®šå¤šä¸ªã€‚ JSPå¸¸ç”¨æŒ‡ä»¤æœ‰ï¼špageã€taglibã€includeã€‚ ï¼ˆ1ï¼‰pageæŒ‡ä»¤ pageæ‰§è¡Œç”¨äºå¯¼åŒ…å’Œè®¾ç½®ä¸€äº›é¡µé¢å±æ€§ï¼Œå¸¸ç”¨å±æ€§å¦‚ä¸‹ï¼š 1234567import å¯¼å…¥ç›¸åº”çš„åŒ…ï¼ŒæƒŸä¸€å…è®¸åœ¨åŒä¸€æ–‡æ¡£ä¸­å¤šæ¬¡å‡ºç°çš„å±æ€§ contentType è®¾ç½®Content-Typeå“åº”æŠ¥å¤´ï¼Œæ ‡æ˜å³å°†å‘é€åˆ°æµè§ˆå™¨çš„æ–‡æ¡£ç±»å‹ pageEncoding è®¾ç½®é¡µé¢çš„ç¼–ç  language æŒ‡å®šé¡µé¢ä½¿ç”¨çš„è¯­è¨€ session æ§åˆ¶é¡µé¢æ˜¯å¦å‚ä¸HTTPä¼šè¯ errorPage å¤„ç†å½“å‰é¡µé¢ä¸­æŠ›å‡ºä½†æœªè¢«æ•è·çš„ä»»ä½•å¼‚å¸¸ isErrorPage å½“å‰é¡µæ˜¯å¦å¯ä»¥ä½œä¸ºå…¶ä»–é¡µé¢çš„é”™è¯¯å¤„ç†é¡µé¢ ï¼ˆ2ï¼‰ taglibæŒ‡ä»¤ taglibæŒ‡ä»¤ç”¨æ¥æ‰©å±•JSPç¨‹åºçš„æ ‡ç­¾å…ƒç´ ï¼Œå¼•å…¥å…¶ä»–åŠŸèƒ½çš„æ ‡ç­¾åº“æ–‡ä»¶ã€‚ 123&lt;!-- prefixå±æ€§ç”¨äºæŒ‡å®šåº“å‰ç¼€ --&gt; &lt;!-- uriå±æ€§ç”¨äºæŒ‡å®šåº“çš„æ ‡è¯† --&gt; &lt;%@taglib uri=â€œtagLibaryâ€ prefix=â€œprefixâ€%&gt; ï¼ˆ3ï¼‰includeæŒ‡ä»¤ includeæŒ‡ä»¤ç”¨äºå¼•å…¥å¦ä¸€ä¸ªJSPç¨‹åºæˆ–HTMLæ–‡ä»¶ç­‰ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š 1&lt;%@include file=â€œè¢«åŒ…å«çš„æ–‡ä»¶åœ°å€%&gt; JSPå¼•æ“ä¼šåœ¨JSPæ–‡ä»¶çš„è½¬æ¢æ—¶æœŸå…ˆæŠŠfileå±æ€§è®¾å®šçš„æ–‡ä»¶åŒ…å«è¿›æ¥ï¼Œç„¶åå¼€å§‹æ‰§è¡Œè½¬æ¢åŠç¼–è¯‘çš„å·¥ä½œã€‚ ï¼ˆ4ï¼‰jsp:include&#x2F;jsp:param jsp:includeåŠ¨ä½œç”¨äºå¼•å…¥å¦ä¸€ä¸ªJSPç¨‹åºæˆ–HTMLæ–‡ä»¶ç­‰ã€‚ æ‰§è¡Œåˆ°includeæ—¶ï¼Œè¢«includeçš„æ–‡ä»¶æ‰ä¼šè¢«ç¼–è¯‘ã€‚ å¦‚æœincludeçš„æ˜¯jspæ–‡ä»¶ï¼Œé‚£å®ƒä¸ä¼šè¢«è½¬æ¢æˆServletæ–‡ä»¶ã€‚ 1234&lt;jsp:include page=â€œURLSpecâ€ flush=â€œtrueâ€/&gt; &lt;jsp:include page=â€œURLSpecâ€ flush=â€œtrueâ€&gt; &lt;jsp:param name=â€œkeyâ€ value=â€œvalueâ€/&gt; &lt;/jsp:include&gt; ï¼ˆ5ï¼‰includeæŒ‡ä»¤å’ŒincludeåŠ¨ä½œçš„åŒºåˆ« includeæŒ‡ä»¤æ˜¯åœ¨JSPç¨‹åºçš„è½¬æ¢æ—¶æœŸå°±å°†fileå±æ€§æ‰€æŒ‡å®šçš„ç¨‹åºå†…å®¹åµŒå…¥å†ç¼–è¯‘æ‰§è¡Œï¼ˆé™æ€åŒ…å«ï¼‰ã€‚ includeåŠ¨ä½œåœ¨è½¬æ¢æ—¶æœŸæ˜¯ä¸ä¼šè¢«ç¼–è¯‘çš„ï¼Œåªæœ‰åœ¨å®¢æˆ·ç«¯è¯·æ±‚æ—¶æœŸè¢«æ‰§è¡Œåˆ°æ‰ä¼šè¢«åŠ¨æ€çš„ç¼–è¯‘è½½å…¥ï¼ˆåŠ¨æ€åŒ…å«ï¼Œæ¨èï¼‰ã€‚ ï¼ˆ6ï¼‰jsp:forward&#x2F;jsp:param forwardåŠ¨ä½œç”¨äºåœ¨JSPä¸­å®ç°è½¬å‘ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°å¦ä¸€ä¸ªæŒ‡å®šçš„JSPç¨‹åºæˆ–è€…Servletä¸­å¤„ç†ã€‚ 12345&lt;jsp:forward page=â€œurlSpecâ€ flush=â€œtrueâ€/&gt; &lt;jsp:forward page=â€œurlSpecâ€&gt; &lt;!-- ç”¨äºæŒ‡å®šå‚æ•°å’Œå…¶å¯¹åº”çš„å€¼ --&gt; &lt;jsp:param name=â€œkeyâ€ value=â€œvalueâ€/&gt; &lt;/jsp:forward&gt; 3. JSPå†…ç½®å¯¹è±¡ï¼ˆé‡ç‚¹ï¼‰3.1 åŸºæœ¬æ„Ÿå¿µ åœ¨JSPç¨‹åºä¸­æœ‰9ä¸ªå†…ç½®å¯¹è±¡ç”±å®¹å™¨ä¸ºç”¨æˆ·è¿›è¡Œå®ä¾‹åŒ–ï¼Œç¨‹åºå‘˜å¯ä»¥ä¸ç”¨å®šä¹‰å°±ç›´æ¥ä½¿ç”¨è¿™äº›å˜é‡ã€‚ åœ¨JSPè½¬æ¢æˆServletåï¼Œä¼šè‡ªåŠ¨è¿½åŠ è¿™äº›å˜é‡çš„å®šä¹‰ï¼Œä½¿ç”¨å†…ç½®å¯¹è±¡å¯ä»¥ç®€åŒ–JSPçš„å¼€å‘ã€‚ 3.2 å¯¹è±¡åç§° å¯¹è±¡å˜é‡ å¯¹è±¡ç±»å‹ ä½œç”¨ out JSPWriter è¾“å‡ºæµ request HttpServletRequest è¯·æ±‚ä¿¡æ¯ response HttpServletResponse å“åº”ä¿¡æ¯ session HttpSession ä¼šè¯ application ServletContext å…¨å±€çš„ä¸Šä¸‹æ–‡å¯¹è±¡ pageContext PageContext JSPé¡µé¢ä¸Šä¸‹æ–‡ page Object JSPé¡µé¢æœ¬èº« config ServletConfig Servleté…ç½®å¯¹è±¡ exception Throwable æ•è·ç½‘é¡µå¼‚å¸¸ 3.3 outå†…ç½®å¯¹è±¡ outå†…ç½®å¯¹è±¡æ˜¯ä¸€ä¸ªç¼“å†²çš„è¾“å‡ºæµï¼Œç”¨æ¥ç»™å®¢æˆ·ç«¯è¾“å‡ºä¿¡æ¯ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void println(String x) å‘å®¢æˆ·ç«¯è¾“å‡ºå„ç§ç±»å‹æ•°æ® void newLine() è¾“å‡ºä¸€ä¸ªæ¢è¡Œç¬¦ void close() å…³é—­è¾“å‡ºæµ int getBufffferSize() è¿”å›ç¼“å†²åŒºçš„å¤§å° int getRemaining() è¿”å›ç¼“å†²åŒºä¸­æœªä½¿ç”¨çš„å­—èŠ‚æ•° flush() è¾“å‡ºç¼“å†²åŒºé‡Œçš„æ•°æ® void clearBuffffer() æ¸…é™¤ç¼“å†²åŒºé‡Œçš„æ•°æ®ï¼ŒåŒæ—¶æŠŠæ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯ void clear() æ¸…é™¤ç¼“å†²åŒºé‡Œçš„æ•°æ®ï¼Œä½†ä¸æŠŠæ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯ 3.4 requestå†…ç½®å¯¹è±¡ requestå¯¹è±¡å°è£…çš„æ˜¯è°ƒç”¨JSPé¡µé¢çš„è¯·æ±‚ä¿¡æ¯ï¼Œå®ƒæ˜¯HttpServletRequestæ¥å£çš„ä¸€ä¸ªå®ä¾‹ã€‚ è¯¥å¯¹è±¡çš„å±æ€§å€¼åªåœ¨ä¸€ä¸ªè¯·æ±‚ä¸­ä¿å­˜ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getMethod() è¿”å›å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ä¼ é€æ•°æ®çš„æ–¹å¼ String getParameter(String nameï¼‰ è¿”å›å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ä¼ é€çš„å‚æ•°å€¼ String[] getParameterValues( String name) è·å¾—æŒ‡å®šå‚æ•°çš„æ‰€æœ‰å€¼ String getRequestURI() è·å¾—è¯·æ±‚åœ°å€ String getRemoteAddr() è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯æˆ–æœ€åä¸€ä¸ªä»£ç†çš„IPåœ°å€ int getRemotePort() è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯æˆ–æœ€åä¸€ä¸ªä»£ç†çš„ç«¯å£å· String getServerName() è·å–æœåŠ¡å™¨çš„åå­— int getServerPort() è·å–æœåŠ¡å™¨ç«¯çš„ç«¯å£ void setAttribute(String name,Object o) åœ¨æ­¤è¯·æ±‚ä¸­å­˜å‚¨å±æ€§ã€‚å±æ€§åœ¨è¯·æ±‚ä¹‹é—´é‡ç½® Object getAttribute(String name) å°†æŒ‡å®šå±æ€§çš„å€¼ä½œä¸ºå¯¹è±¡è¿”å›ï¼Œè‹¥ä¸å­˜åœ¨åˆ™è¿”å›ç©º 3.5 responseå†…ç½®å¯¹è±¡ responseå¯¹è±¡ç”¨äºç»™å®¢æˆ·ç«¯ç›¸åº”è¾“å‡ºå¤„ç†ç»“æœï¼Œå®ƒæ˜¯HttpServletResponseæ¥å£çš„ä¸€ä¸ªå®ä¾‹ã€‚ ç»å¸¸ç”¨äºè®¾ç½®HTTPæ ‡é¢˜ï¼Œæ·»åŠ cookieã€è®¾ç½®å“åº”å†…å®¹çš„ç±»å‹å’ŒçŠ¶æ€ã€å‘é€HTTPé‡å®šå‘å’Œç¼–ç URLã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void addCookie(Cookie cookie) æ·»åŠ ä¸€ä¸ªCookieå¯¹è±¡ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯ä¿å­˜ç‰¹å®šçš„ä¿¡æ¯ void addHeader(String name, String value) æ·»åŠ HTTPå¤´ä¿¡æ¯ï¼Œè¯¥Headerä¿¡æ¯å°†å‘é€åˆ°å®¢æˆ·ç«¯ boolean containsHeader(String name) åˆ¤æ–­æŒ‡å®šåå­—çš„HTTPæ–‡ä»¶å¤´æ˜¯å¦å­˜åœ¨ void sendRedirect(String location) é‡å®šå‘JSPæ–‡ä»¶ void setContentType(String type) è®¾ç½®ç±»å‹ä¸ç¼–ç æ–¹å¼ 3.6 sessionå†…ç½®å¯¹è±¡ sessionå¯¹è±¡è¡¨ç¤ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸€æ¬¡ä¼šè¯ï¼Œä¸€æ¬¡ä¼šè¯å¯ä»¥åŒ…å«å¤šæ¬¡è¯·æ±‚ï¼Œåœ¨å¤šæ¬¡è¯·æ±‚ä¹‹é—´å¯ä»¥å€ŸåŠ©sessionå¯¹è±¡å­˜å‚¨ä¿¡æ¯ï¼Œå®ƒæ˜¯HttpSessionç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚ è¯¥å¯¹è±¡çš„å±æ€§å€¼åœ¨ä¸€æ¬¡ä¼šè¯èŒƒå›´ä¸­ä¿å­˜ï¼Œä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œåªè¦ä¸å…³é—­æµè§ˆå™¨ï¼Œé»˜è®¤åŠä¸ªå°æ—¶å†…éƒ½å¯ä»¥è®¿é—®ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void setAttribute(String name,Object value) ä½¿ç”¨æŒ‡å®šçš„åç§°å°†å¯¹è±¡ç»‘å®šåˆ°æ­¤ä¼šè¯ Object getAttribute(String name) è¿”å›åœ¨æ­¤ä¼šè¯ä¸­ç”¨æŒ‡å®šåç§°ç»‘å®šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å¯¹è±¡åœ¨è¯¥åç§°ä¸‹ç»‘å®šåˆ™è¿”å›ç©ºå€¼ 3.7 applicationå†…ç½®å¯¹è±¡ applicationå¯¹è±¡æ˜¯ä¸€ä¸ªwebç¨‹åºçš„å…¨å±€å˜é‡ï¼Œå®ƒæ˜¯ServletContextç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚ åœ¨æ•´ä¸ªæœåŠ¡å™¨ä¸Šä¿å­˜æ•°æ®ï¼Œæ‰€æœ‰ç”¨æˆ·å…±äº«ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void setAttribute(String name, Object object) å°†å¯¹è±¡ç»‘å®šåˆ°æ­¤servletä¸Šä¸‹æ–‡ä¸­çš„ç»™å®šå±æ€§å Object getAttribute(String name) è¿”å›ç»™å®šåç§°çš„servletå®¹å™¨å±æ€§ï¼Œè‹¥æ²¡æœ‰è¯¥åç§°çš„å±æ€§è¿”å›null 3.8 pageContextå†…ç½®å¯¹è±¡ pageContextå¯¹è±¡æ˜¯PageContextç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ¥ç®¡ç†å…¶ä»–çš„éšå«å¯¹è±¡ã€‚ åªåœ¨ä¸€ä¸ªé¡µé¢ä¸­ä¿å­˜æ•°æ®ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void setAttribute(String name, Object value, int scope) ä½¿ç”¨é€‚å½“çš„ä½œç”¨åŸŸè®¾ç½®æŒ‡å®šçš„åç§°å’Œå€¼ Object getAttribute(String name, int scope) è¿”å›æŒ‡å®šä½œç”¨åŸŸä¸­åç§°å…³è”çš„å¯¹è±¡ï¼Œè‹¥æ‰¾ä¸åˆ°åˆ™è¿”å›null ServletRequest getRequest() è·å–è¯·æ±‚å¯¹è±¡ ServletResponse getResponse() è·å–å“åº”å¯¹è±¡ HttpSession getSession() è·å–ä¼šè¯å¯¹è±¡ ServletConfig getServletConfifig() è·å–é…ç½®å¯¹è±¡ JspWriter getOut() è·å–è¾“å‡ºå¯¹è±¡ Object getPage() è·å–é¡µé¢å¯¹è±¡ Exception getException() è·å–å¼‚å¸¸å¯¹è±¡ 3.9 exceptionå†…ç½®å¯¹è±¡ exception å¯¹è±¡æ˜¯Throwableçš„å®ä¾‹ï¼Œè¡¨ç¤ºçš„æ˜¯JSPçš„å¼‚å¸¸ä¿¡æ¯ã€‚ å¦‚æœè¦ä½¿ç”¨å®ƒï¼Œå¿…é¡»å°†å¯¹åº”é¡µé¢pageæŒ‡ä»¤çš„isErrorPageå±æ€§è®¾ç½®æˆtrueã€‚ å•ä¸ªé¡µé¢çš„å¤„ç†æ–¹å¼ 1&lt;%@page errorPage=&quot;error.jsp&quot; %&gt; åœ¨web.xmlä¸­é…ç½®ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†é¡µé¢ã€‚ 1234&lt;error-page&gt; &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt; &lt;location&gt;/error.jsp&lt;/location&gt; &lt;/error-page&gt; 4. JavaBeanç»„ä»¶ï¼ˆç†Ÿæ‚‰ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ JavaBean æ˜¯ä½¿ç”¨ Java è¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¯é‡ç”¨çš„ç»„ä»¶ï¼Œåœ¨ JSP å¼€å‘ä¸­å¯ä»¥ä½¿ç”¨ JavaBean å‡å°‘é‡å¤ä»£ç ï¼Œä½¿æ•´ä¸ª JSP ä»£ç çš„å¼€å‘æ›´åŠ ç®€æ´ã€‚ JavaBeanæœ¬è´¨ä¸Šå°±æ˜¯Javaç±»ï¼Œé€šå¸¸è¦æ±‚å¦‚ä¸‹ï¼š å±æ€§ï¼šå…¨éƒ¨ç§æœ‰åŒ–ï¼Œé€šè¿‡getå’Œsetæ–¹æ³•è¿›è¡Œè®¿é—®ã€‚ æ–¹æ³•ï¼šå¿…é¡»æ˜¯publicå…³é”®å­—ä¿®é¥°ã€‚ æ„é€ å™¨ ï¼šå¿…é¡»æœ‰æ— å‚æ„é€ æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨æ–¹å¼ ä½¿ç”¨jsp:useBeançš„æ–¹å¼åˆ›å»ºjavaBeanå®ä¾‹ 12&lt;jsp:useBean id=â€œå¯¹è±¡åâ€ scope=â€œä¿å­˜èŒƒå›´ class=â€œåŒ…å.ç±»åâ€ /&gt; ä¿å­˜èŒƒå›´æœ‰ï¼špage|request|sessin|applicationï¼Œé»˜è®¤ä¸ºpageèŒƒå›´ã€‚ ä½¿ç”¨jsp:setPropertyçš„æ–¹å¼è®¾ç½®javaBeançš„å±æ€§å€¼ 1&lt;jsp:setProperty name=&quot;å¯¹è±¡å&quot; property=&quot;å±æ€§å&quot; value=&quot;å±æ€§å€¼&quot; param=&quot;å‚æ•°å&quot;/&gt; ä½¿ç”¨jsp:getPropertyçš„æ–¹å¼è·å–javaBeançš„å±æ€§å€¼ 1&lt;jsp:getProperty name=&quot;å¯¹è±¡å&quot; property=&quot;å±æ€§å&quot;/&gt; ï¼ˆ3ï¼‰ä¿å­˜èŒƒå›´ JavaBeançš„ä¿å­˜èŒƒå›´æœ‰pageã€requestã€sessionä»¥åŠapplicationï¼Œé»˜è®¤æ˜¯pageèŒƒå›´ã€‚ ï¼ˆ4ï¼‰åˆ é™¤æ–¹å¼1&lt;% å†…ç½®å¯¹è±¡.removeAttribute(â€œJavaBeançš„åå­—â€); %&gt; 5. MVCè®¾è®¡æ¨¡å¼ï¼ˆé‡ç‚¹ï¼‰5.1 åŸºæœ¬æ¦‚å¿µ MVCæ˜¯æ¨¡å‹(Model)å’Œè§†å›¾(View)ä»¥åŠæ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§å°†æ•°æ®ã€ç•Œé¢æ˜¾ç¤ºå’Œä¸šåŠ¡é€»è¾‘è¿›è¡Œåˆ†ç¦»çš„ç»„ç»‡æ–¹å¼ï¼Œè¿™æ ·åœ¨æ”¹è¿›ç•Œé¢åŠç”¨æˆ·äº¤äº’æ—¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œä»è€Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ Mï¼šä¸»è¦ç”¨äºå°è£…ä¸šåŠ¡æ•°æ®çš„JavaBean(Bean) å’Œ ä¸šåŠ¡é€»è¾‘çš„JavaBean(Service)åŠè®¿é—®æ•°æ®åº“çš„DAOå¯¹è±¡ã€‚ Vï¼šä¸»è¦è´Ÿè´£æ•°æ®æ”¶é›† å’Œ æ•°æ®å±•ç°ï¼Œé€šå¸¸ç”±JSPæ–‡ä»¶å®Œæˆã€‚ Cï¼šä¸»è¦è´Ÿè´£æµç¨‹æ§åˆ¶ å’Œ é¡µé¢è·³è½¬ï¼Œé€šå¸¸ç”±Servletå®Œæˆã€‚ 5.2 åŸºæœ¬ç±»å‹","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Servletæ ¸å¿ƒæŠ€æœ¯ï¼ˆä¸‹ï¼‰","slug":"Servletæ ¸å¿ƒæŠ€æœ¯ï¼ˆä¸‹ï¼‰","date":"2020-01-07T08:52:30.000Z","updated":"2025-04-17T08:34:52.017Z","comments":true,"path":"2020/01/07/Servletæ ¸å¿ƒæŠ€æœ¯ï¼ˆä¸‹ï¼‰/","link":"","permalink":"http://yournotes.cn/2020/01/07/Servlet%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%EF%BC%88%E4%B8%8B%EF%BC%89/","excerpt":"1. Servlet + JDBCåº”ç”¨ï¼ˆé‡ç‚¹ï¼‰ åœ¨Servletä¸­å¯ä»¥ä½¿ç”¨JDBCæŠ€æœ¯è®¿é—®æ•°æ®åº“ï¼Œå¸¸è§åŠŸèƒ½å¦‚ä¸‹ï¼š æŸ¥è¯¢DBæ•°æ®ï¼Œç„¶åç”Ÿæˆæ˜¾ç¤ºé¡µé¢ï¼Œä¾‹å¦‚ï¼šåˆ—è¡¨æ˜¾ç¤ºåŠŸèƒ½ã€‚ æ¥æ”¶è¯·æ±‚å‚æ•°ï¼Œç„¶åå¯¹DBæ“ä½œï¼Œä¾‹å¦‚ï¼šæ³¨å†Œã€ç™»å½•ã€ä¿®æ”¹å¯†ç ç­‰åŠŸèƒ½ã€‚ ä¸ºäº†æ–¹ä¾¿é‡ç”¨å’Œä¾¿äºç»´æŠ¤ç­‰ç›®çš„ï¼Œç»å¸¸ä¼šé‡‡ç”¨DAOï¼ˆData Access Objectï¼‰æ¨¡å¼å¯¹æ•°æ®åº“æ“ä½œè¿›è¡Œç‹¬ç«‹å°è£…ã€‚ DAOå·¥å‚ï¼ˆå·¥å‚æ¨¡å¼ï¼‰å·¥å‚ç±»ï¼šå°è£…äº†å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œä¸ºè°ƒç”¨è€…æä¾›ç¬¦åˆè¦æ±‚çš„å¯¹è±¡ã€‚ 2. é‡å®šå‘å’Œè½¬å‘ï¼ˆé‡ç‚¹ï¼‰","text":"1. Servlet + JDBCåº”ç”¨ï¼ˆé‡ç‚¹ï¼‰ åœ¨Servletä¸­å¯ä»¥ä½¿ç”¨JDBCæŠ€æœ¯è®¿é—®æ•°æ®åº“ï¼Œå¸¸è§åŠŸèƒ½å¦‚ä¸‹ï¼š æŸ¥è¯¢DBæ•°æ®ï¼Œç„¶åç”Ÿæˆæ˜¾ç¤ºé¡µé¢ï¼Œä¾‹å¦‚ï¼šåˆ—è¡¨æ˜¾ç¤ºåŠŸèƒ½ã€‚ æ¥æ”¶è¯·æ±‚å‚æ•°ï¼Œç„¶åå¯¹DBæ“ä½œï¼Œä¾‹å¦‚ï¼šæ³¨å†Œã€ç™»å½•ã€ä¿®æ”¹å¯†ç ç­‰åŠŸèƒ½ã€‚ ä¸ºäº†æ–¹ä¾¿é‡ç”¨å’Œä¾¿äºç»´æŠ¤ç­‰ç›®çš„ï¼Œç»å¸¸ä¼šé‡‡ç”¨DAOï¼ˆData Access Objectï¼‰æ¨¡å¼å¯¹æ•°æ®åº“æ“ä½œè¿›è¡Œç‹¬ç«‹å°è£…ã€‚ DAOå·¥å‚ï¼ˆå·¥å‚æ¨¡å¼ï¼‰å·¥å‚ç±»ï¼šå°è£…äº†å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œä¸ºè°ƒç”¨è€…æä¾›ç¬¦åˆè¦æ±‚çš„å¯¹è±¡ã€‚ 2. é‡å®šå‘å’Œè½¬å‘ï¼ˆé‡ç‚¹ï¼‰2.1 é‡å®šå‘çš„æ¦‚è¿°ï¼ˆ1ï¼‰é‡å®šå‘çš„æ¦‚å¿µ é¦–å…ˆå®¢æˆ·æµè§ˆå™¨å‘é€httpè¯·æ±‚ï¼Œå½“webæœåŠ¡å™¨æ¥å—åå‘é€302çŠ¶æ€ç å“åº”åŠå¯¹åº”æ–°çš„locationç»™å®¢æˆ·æµè§ˆå™¨ï¼Œå®¢æˆ·æµè§ˆå™¨å‘ç°æ˜¯302å“åº”ï¼Œåˆ™è‡ªåŠ¨å†å‘é€ä¸€ä¸ªæ–°çš„httpè¯·æ±‚ï¼Œè¯·æ±‚urlæ˜¯æ–°çš„locationåœ°å€ï¼ŒæœåŠ¡å™¨æ ¹æ®æ­¤è¯·æ±‚å¯»æ‰¾èµ„æºå¹¶å‘é€ç»™å®¢æˆ·ã€‚ ï¼ˆ2ï¼‰é‡å®šå‘çš„å®ç° å®ç°é‡å®šå‘éœ€è¦å€ŸåŠ©javax.servlet.http.HttpServletResponseæ¥å£ä¸­çš„ä»¥ä¸‹æ–¹æ³•ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void sendRedirect(String location) ä½¿ç”¨æŒ‡å®šçš„é‡å®šå‘ä½ç½®URLå‘å®¢æˆ·ç«¯å‘é€ä¸´æ—¶é‡å®šå‘å“ ï¼ˆ3ï¼‰é‡å®šå‘çš„åŸç† ï¼ˆ4ï¼‰é‡å®šå‘çš„ç‰¹ç‚¹ é‡å®šå‘ä¹‹åï¼Œæµè§ˆå™¨åœ°å€æ çš„URLä¼šå‘ç”Ÿæ”¹å˜ã€‚ é‡å®šå‘è¿‡ç¨‹ä¸­ä¼šå°†å‰é¢Requestå¯¹è±¡é”€æ¯ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„Requestå¯¹è±¡ã€‚ é‡å®šå‘çš„URLå¯ä»¥æ˜¯å…¶å®ƒé¡¹ç›®å·¥ç¨‹ã€‚ 2.2 è½¬å‘çš„æ¦‚è¿°ï¼ˆ1ï¼‰è½¬å‘çš„æ¦‚å¿µ ä¸€ä¸ªWebç»„ä»¶ï¼ˆServlet&#x2F;JSPï¼‰å°†æœªå®Œæˆçš„å¤„ç†é€šè¿‡å®¹å™¨è½¬äº¤ç»™å¦å¤–ä¸€ä¸ªWebç»„ä»¶ç»§ç»­å¤„ç†ï¼Œè½¬å‘çš„å„ä¸ªç»„ä»¶ä¼šå…±äº«Requestå’ŒResponseå¯¹è±¡ã€‚ ï¼ˆ2ï¼‰è½¬å‘çš„å®ç° ç»‘å®šæ•°æ®åˆ°Requestå¯¹è±¡ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Object getAttribute(String name) å°†æŒ‡å®šå±æ€§å€¼ä½œä¸ºå¯¹è±¡è¿”å›ï¼Œè‹¥ç»™å®šåç§°å±æ€§ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºå€¼ void setAttribute(String name,Object o) åœ¨æ­¤è¯·æ±‚ä¸­å­˜å‚¨å±æ€§å€¼ è·å–è½¬å‘å™¨å¯¹è±¡ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» RequestDispatcher getRequestDispatcher(String path) è¿”å›ä¸€ä¸ªRequestDispatcherå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å……å½“ä½äºç»™å®šè·¯å¾„ä¸Šçš„èµ„æºçš„åŒ…è£…å™¨ è½¬å‘æ“ä½œ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void forward(ServletRequest request, ServletResponse response) å°†è¯·æ±‚ä»ä¸€ä¸ªservletè½¬å‘åˆ°æœåŠ¡å™¨ä¸Šçš„å¦ä¸€ä¸ªèµ„æºï¼ˆServletã€JSPæ–‡ä»¶æˆ–HTMLæ–‡ä»¶ï¼‰ ï¼ˆ3ï¼‰è½¬å‘çš„åŸç† è½¬å‘ä¹‹åæµè§ˆå™¨åœ°å€æ çš„URLä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚ è½¬å‘è¿‡ç¨‹ä¸­å…±äº«Requestå¯¹è±¡ã€‚ è½¬å‘çš„URLä¸å¯ä»¥æ˜¯å…¶å®ƒé¡¹ç›®å·¥ç¨‹ã€‚ ï¼ˆ4ï¼‰é‡å®šå‘å’Œè½¬å‘çš„æ¯”è¾ƒ 3. Servletçº¿ç¨‹å®‰å…¨ï¼ˆé‡ç‚¹ï¼‰ æœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥è¿›è¡Œç›¸åº”çš„è¯·æ±‚å¤„ç†ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¸ºæ¯ä¸ªServletåªåˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚å½“å¤šä¸ªè¯·æ±‚è®¿é—®åŒä¸€ä¸ªServletæ—¶ï¼Œä¼šæœ‰ å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªServletå¯¹è±¡ï¼Œæ­¤æ—¶å°±å¯èƒ½å‘ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ å¤šçº¿ç¨‹å¹¶å‘é€»è¾‘ï¼Œéœ€è¦ä½¿ç”¨synchronizedå¯¹ä»£ç åŠ é”å¤„ç†ï¼Œä½†å°½é‡é¿å…ä½¿ç”¨ã€‚ 4. çŠ¶æ€ç®¡ç†ï¼ˆé‡ç‚¹ï¼‰ Webç¨‹åºåŸºäºHTTPåè®®é€šä¿¡ï¼Œè€ŒHTTPåè®®æ˜¯â€æ— çŠ¶æ€â€çš„åè®®ï¼Œä¸€æ—¦æœåŠ¡å™¨å“åº”å®Œå®¢æˆ·çš„è¯·æ±‚ä¹‹åï¼Œå°±æ–­å¼€è¿æ¥ï¼Œè€ŒåŒä¸€ä¸ªå®¢æˆ·çš„ä¸‹ä¸€æ¬¡è¯·æ±‚åˆä¼šé‡æ–°å»ºç«‹ç½‘ç»œè¿æ¥ã€‚ æœåŠ¡å™¨ç¨‹åºæœ‰æ—¶æ˜¯éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ªå®¢æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæ¯”å¦‚å®¢æˆ·çš„å¤šæ¬¡é€‰è´­å•†å“ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦è·Ÿè¸ªåŒä¸€ä¸ªå®¢æˆ·å‘å‡ºçš„ä¸€ç³»åˆ—è¯·æ±‚ã€‚ æŠŠæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´å¤šæ¬¡äº¤äº’ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå°†å¤šæ¬¡äº¤äº’æ‰€æ¶‰åŠçš„æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œå³çŠ¶æ€ç®¡ç†ã€‚å¤šæ¬¡äº¤äº’çš„æ•°æ®çŠ¶æ€å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¿å­˜ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ã€‚çŠ¶æ€ç®¡ç†ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š å®¢æˆ·ç«¯ç®¡ç†ï¼šå°†çŠ¶æ€ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚åŸºäºCookieæŠ€æœ¯å®ç°ã€‚ æœåŠ¡å™¨ç®¡ç†ï¼šå°†çŠ¶æ€ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚åŸºäºSessionæŠ€æœ¯å®ç°ã€‚ 5. CookieæŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰5.1 åŸºæœ¬æ¦‚å¿µ Cookieæœ¬æ„ä¸ºâ€é¥¼å¹²â€œçš„å«ä¹‰ï¼Œåœ¨è¿™é‡Œè¡¨ç¤ºå®¢æˆ·ç«¯ä»¥â€œå-å€¼â€å½¢å¼è¿›è¡Œä¿å­˜çš„ä¸€ç§æŠ€æœ¯ã€‚ æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°†æ•°æ®ä»¥Set-Cookieæ¶ˆæ¯å¤´çš„æ–¹å¼å“åº”ç»™æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨ä¼šå°†è¿™äº›æ•°æ®ä»¥æ–‡æœ¬æ–‡ä»¶çš„æ–¹å¼ä¿å­˜èµ·æ¥ã€‚ å½“æµè§ˆå™¨å†æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œä¼šå°†è¿™äº›æ•°æ®ä»¥Cookieæ¶ˆæ¯å¤´çš„æ–¹å¼å‘é€ç»™æœåŠ¡å™¨ã€‚ 5.2 ç›¸å…³æ–¹æ³• ä½¿ç”¨javax.servlet.http.Cookieç±»çš„æ„é€ æ–¹æ³•å®ç°Cookieçš„åˆ›å»ºã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Cookie(String name, String value) æ ¹æ®å‚æ•°æŒ‡å®šæ•°å€¼æ„é€ å¯¹è±¡ ä½¿ç”¨javax.servlet.http.HttpServletResponseæ¥å£çš„æˆå‘˜æ–¹æ³•å®ç°Cookieçš„æ·»åŠ ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void addCookie(Cookie cookie) æ·»åŠ å‚æ•°æŒ‡å®šçš„å¯¹è±¡åˆ°å“åº” ä½¿ç”¨javax.servlet.http.HttpServletRequestæ¥å£çš„æˆå‘˜æ–¹æ³•å®ç°Cookieå¯¹è±¡çš„è·å–ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Cookie[] getCookies() è¿”å›æ­¤è¯·æ±‚ä¸­åŒ…å«çš„æ‰€æœ‰Cookieå¯¹è±¡ ä½¿ç”¨javax.servlet.http.Cookieç±»çš„æ„é€ æ–¹æ³•å®ç°Cookieå¯¹è±¡ä¸­å±æ€§çš„è·å–å’Œä¿®æ”¹ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getName() è¿”å›æ­¤Cookieå¯¹è±¡ä¸­çš„åå­— String getValue() è¿”å›æ­¤Cookieå¯¹è±¡çš„æ•°å€¼ void setValue(String newValue) è®¾ç½®Cookieçš„æ•°å€¼ 5.3 Cookieçš„ç”Ÿå‘½å‘¨æœŸ é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šå°†Cookieä¿¡æ¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œåªè¦æµè§ˆå™¨å…³é—­ï¼ŒCookieä¿¡æ¯å°±ä¼šæ¶ˆå¤±ã€‚ å¦‚æœå¸Œæœ›å…³é—­æµè§ˆå™¨åCookieä¿¡æ¯ä»æœ‰æ•ˆï¼Œå¯ä»¥é€šè¿‡Cookieç±»çš„æˆå‘˜æ–¹æ³•å®ç°ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» int getMaxAge() è¿”å›cookieçš„æœ€é•¿ä½¿ç”¨æœŸé™ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ void setMaxAge(int expiry) è®¾ç½®cookieçš„æœ€é•¿ä¿ç•™æ—¶é—´ï¼ˆç§’ï¼‰ 5.4 Cookieçš„è·¯å¾„é—®é¢˜ æµè§ˆå™¨åœ¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œä¼šæ¯”è¾ƒCookieçš„è·¯å¾„ä¸è¯·æ±‚è·¯å¾„æ˜¯å¦åŒ¹é…ï¼Œåªæœ‰åŒ¹é…çš„Cookieæ‰ä¼šå‘é€ç»™æœåŠ¡å™¨ã€‚ Cookieçš„é»˜è®¤è·¯å¾„ç­‰äºæ·»åŠ è¿™ä¸ªCookieä¿¡æ¯æ—¶çš„ç»„ä»¶è·¯å¾„ï¼Œä¾‹å¦‚ï¼š&#x2F;é¡¹ç›®å&#x2F;ç›®å½•&#x2F;add.doè¯·æ±‚æ·»åŠ äº†ä¸€ä¸ªCookieä¿¡æ¯ï¼Œåˆ™è¯¥Cookieçš„è·¯å¾„æ˜¯ &#x2F;é¡¹ç›®å&#x2F;ç›®å½•ã€‚ è®¿é—®çš„è¯·æ±‚åœ°å€å¿…é¡»ç¬¦åˆCookieçš„è·¯å¾„æˆ–è€…å…¶å­è·¯å¾„æ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šå‘é€Cookieä¿¡æ¯ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void setPath(String uri) è®¾ç½®cookieçš„è·¯å¾„ä¿¡æ¯ 5.5 Cookieçš„ç‰¹ç‚¹ CookieæŠ€æœ¯ä¸é€‚åˆå­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œç¨‹åºå‘˜åªç”¨äºå­˜å‚¨å°‘é‡ã€éæ•æ„Ÿä¿¡æ¯ï¼ŒåŸå› å¦‚ä¸‹ï¼š å°†çŠ¶æ€æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨ç«¯ï¼Œä¸å®‰å…¨ã€‚ ä¿å­˜æ•°æ®é‡æœ‰é™åˆ¶ï¼Œå¤§çº¦4KBå·¦å³ã€‚ åªèƒ½ä¿å­˜å­—ç¬¦ä¸²ä¿¡æ¯ã€‚ å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¾ç½®ä¸ºç¦æ­¢ä½¿ç”¨ã€‚ 6. SessionæŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰6.1 åŸºæœ¬æ¦‚å¿µ Sessionæœ¬æ„ä¸ºâ€ä¼šè¯â€çš„å«ä¹‰ï¼Œæ˜¯ç”¨æ¥ç»´æŠ¤ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…³è”çš„ä¸€ç§æŠ€æœ¯ã€‚ æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ¯ä¸€ä¸ªæµè§ˆå™¨éƒ½åœ¨æœåŠ¡å™¨ç«¯çš„å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªç©ºé—´ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªSessionå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ªidå±æ€§ä¸”è¯¥å€¼å”¯ä¸€ï¼Œæˆ‘ä»¬ç§°ä¸ºSessionIdï¼Œå¹¶ä¸”æœåŠ¡å™¨ä¼šå°†è¿™ä¸ªSessionIdä»¥Cookieæ–¹å¼å‘é€ç»™æµè§ˆå™¨å­˜å‚¨ã€‚ æµè§ˆå™¨å†æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ä¼šå°†SessionIdå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¾æ®SessionIdæŸ¥æ‰¾ç›¸å¯¹åº”çš„Sessionå¯¹è±¡ 6.2 ç›¸å…³æ–¹æ³• ä½¿ç”¨javax.servlet.http.HttpServletRequestæ¥å£çš„æˆå‘˜æ–¹æ³•å®ç°Sessionçš„è·å–ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» HttpSession getSession() è¿”å›æ­¤è¯·æ±‚å…³è”çš„å½“å‰Sessionï¼Œè‹¥æ­¤è¯·æ±‚æ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ª ä½¿ç”¨javax.servlet.http.HttpSessionæ¥å£çš„æˆå‘˜æ–¹æ³•å®ç°åˆ¤æ–­å’Œè·å–ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean isNew() åˆ¤æ–­æ˜¯å¦ä¸ºæ–°åˆ›å»ºçš„Session String getId() è·å–Sessionçš„ç¼–å· ä½¿ç”¨javax.servlet.http.HttpSessionæ¥å£çš„æˆå‘˜æ–¹æ³•å®ç°å±æ€§çš„ç®¡ç†ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Object getAttribute(String name) è¿”å›åœ¨æ­¤ä¼šè¯ä¸­ç”¨æŒ‡å®šåç§°ç»‘å®šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å¯¹è±¡åœ¨è¯¥åç§°ä¸‹ç»‘å®šï¼Œåˆ™è¿”å›ç©ºå€¼ void setAttribute(String name, Object value) ä½¿ç”¨æŒ‡å®šçš„åç§°å°†å¯¹è±¡ç»‘å®šåˆ°æ­¤ä¼šè¯ void removeAttribute(String name) ä»æ­¤ä¼šè¯ä¸­åˆ é™¤ä¸æŒ‡å®šåç§°ç»‘å®šçš„å¯¹è±¡ 6.3 Sessionçš„ç”Ÿå‘½å‘¨æœŸ ä¸ºäº†èŠ‚çœæœåŠ¡å™¨å†…å­˜ç©ºé—´èµ„æºï¼ŒæœåŠ¡å™¨ä¼šå°†ç©ºé—²æ—¶é—´è¿‡é•¿çš„Sessionå¯¹è±¡è‡ªåŠ¨æ¸…é™¤æ‰ï¼ŒæœåŠ¡å™¨é»˜è®¤çš„è¶…æ—¶é™åˆ¶ä¸€èˆ¬æ˜¯30åˆ†é’Ÿã€‚ ä½¿ç”¨javax.servlet.http.HttpSessionæ¥å£çš„æˆå‘˜æ–¹æ³•å®ç°å¤±æ•ˆå®ç°çš„è·å–å’Œè®¾ç½®ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» int getMaxInactiveInterval() è·å–å¤±æ•ˆæ—¶é—´ void setMaxInactiveInterval(int interval) è®¾ç½®å¤±æ•ˆæ—¶é—´ å¯ä»¥é…ç½®web.xmlæ–‡ä»¶ä¿®æ”¹å¤±æ•ˆæ—¶é—´ã€‚ 123&lt;session-config&gt; &lt;session-timeout&gt;30&lt;/session-timeout&gt; &lt;/session-config&gt; 6.4 Sessionçš„ç‰¹ç‚¹ æ•°æ®æ¯”è¾ƒå®‰å…¨ã€‚ èƒ½å¤Ÿä¿å­˜çš„æ•°æ®ç±»å‹ä¸°å¯Œï¼Œè€ŒCookieåªèƒ½ä¿å­˜å­—ç¬¦ä¸²ã€‚ èƒ½å¤Ÿä¿å­˜æ›´å¤šçš„æ•°æ®ï¼Œè€ŒCookieå¤§çº¦ä¿å­˜4KBã€‚ æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ä¼šå ç”¨æœåŠ¡å™¨çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœå­˜å‚¨ä¿¡æ¯è¿‡å¤šã€ç”¨æˆ·é‡è¿‡å¤§ï¼Œä¼šä¸¥é‡å½±å“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Servletæ ¸å¿ƒæŠ€æœ¯ï¼ˆä¸Šï¼‰","slug":"Servletæ ¸å¿ƒæŠ€æœ¯ï¼ˆä¸Šï¼‰","date":"2020-01-07T07:20:01.000Z","updated":"2025-04-17T08:34:52.016Z","comments":true,"path":"2020/01/07/Servletæ ¸å¿ƒæŠ€æœ¯ï¼ˆä¸Šï¼‰/","link":"","permalink":"http://yournotes.cn/2020/01/07/Servlet%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%EF%BC%88%E4%B8%8A%EF%BC%89/","excerpt":"1. åŸºç¡€æ¦‚å¿µï¼ˆå¸¸è¯†ï¼‰1.1 C&#x2F;Sæ¶æ„çš„æ¦‚å¿µ","text":"1. åŸºç¡€æ¦‚å¿µï¼ˆå¸¸è¯†ï¼‰1.1 C&#x2F;Sæ¶æ„çš„æ¦‚å¿µ C&#x2F;Sæ¶æ„ï¼ˆClient&#x2F;Serverï¼Œå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒæ—©çš„è½¯ä»¶ä½“ç³»ç»“æ„ï¼Œä¹Ÿæ˜¯ç”Ÿæ´»ä¸­å¾ˆå¸¸è§çš„ç»“æ„ã€‚è¿™ç§ç»“æ„å°†éœ€è¦å¤„ç†çš„ä¸šåŠ¡åˆç†åœ°åˆ†é…åˆ°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼Œå®¢æˆ·ç«¯é€šå¸¸è´Ÿè´£å®Œæˆä¸ç”¨æˆ·çš„äº¤äº’ä»»åŠ¡ï¼ŒæœåŠ¡å™¨é€šå¸¸è´Ÿè´£æ•°æ®çš„ç®¡ç†ã€‚ C&#x2F;Sæ¶æ„çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š å®¢æˆ·ç«¯çš„ç•Œé¢å’ŒåŠŸèƒ½å¯ä»¥å¾ˆä¸°å¯Œã€‚ åº”ç”¨æœåŠ¡å™¨çš„è´Ÿè·è¾ƒè½»ã€‚ å“åº”é€Ÿåº¦è¾ƒå¿«ã€‚ C&#x2F;Sæ¶æ„çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š é€‚ç”¨é¢çª„ï¼Œç”¨æˆ·ç¾¤å›ºå®šã€‚ ç»´æŠ¤å’Œå‡çº§çš„æˆæœ¬é«˜ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯éƒ½éœ€è¦æ›´æ–°ç‰ˆæœ¬ã€‚ 1.2 B&#x2F;Sæ¶æ„çš„æ¦‚å¿µ B&#x2F;Sæ¶æ„ï¼ˆBrowser&#x2F;Serverï¼Œæµè§ˆå™¨&#x2F;æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼Œæ˜¯äº’è”ç½‘å…´èµ·åçš„è½¯ä»¶ä½“ç³»ç»“æ„ï¼Œè¯¥ç»“æ„å°†ç³»ç»ŸåŠŸèƒ½å®ç°çš„ä¸»è¦ä¸šåŠ¡é€»è¾‘é›†ä¸­åˆ°æœåŠ¡å™¨ç«¯ï¼Œæå°‘æ•°ä¸šåŠ¡é€»è¾‘åœ¨æµè§ˆå™¨å®ç°ï¼Œæµè§ˆå™¨é€šå¸¸è´Ÿè´£å®Œæˆä¸ç”¨æˆ·çš„äº¤äº’ä»»åŠ¡ï¼ŒæœåŠ¡å™¨é€šå¸¸è´Ÿè´£æ•°æ®çš„ç®¡ç†ã€‚ B&#x2F;Sæ¶æ„çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š æ— éœ€å®‰è£…å®¢æˆ·ç«¯ï¼Œåªè¦æœ‰æµè§ˆå™¨å³å¯ã€‚ é€‚ç”¨é¢å¹¿ï¼Œç”¨æˆ·ç¾¤ä¸å›ºå®šã€‚ é€šè¿‡æƒé™æ§åˆ¶å®ç°å¤šå®¢æˆ·è®¿é—®çš„ç›®çš„ï¼Œäº¤äº’æ€§è¾ƒå¼ºã€‚ ç»´æŠ¤å’Œå‡çº§çš„æˆæœ¬ä½ï¼Œæ— éœ€æ›´æ–°æ‰€æœ‰å®¢æˆ·ç«¯ç‰ˆæœ¬ã€‚ B&#x2F;Sæ¶æ„çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š åº”ç”¨æœåŠ¡å™¨çš„è´Ÿè·è¾ƒé‡ã€‚ æµè§ˆå™¨çš„ç•Œé¢å’ŒåŠŸèƒ½æƒ³è¦è¾¾åˆ°å®¢æˆ·ç«¯çš„ä¸°å¯Œç¨‹åº¦éœ€è¦èŠ±è´¹å¤§é‡çš„æˆæœ¬ã€‚ åœ¨è·¨æµè§ˆå™¨ä¸Šä¸å°½å¦‚äººæ„ï¼Œé€‚é…æ¯”è¾ƒéº»çƒ¦ã€‚ 1.3 JavaWebçš„æ¦‚å¿µ Webæœ¬æ„ä¸ºç½‘é¡µçš„å«ä¹‰ï¼Œè¿™é‡Œè¡¨ç¤ºäº’è”ç½‘ä¸Šä¾›å¤–ç•Œè®¿é—®çš„èµ„æºã€‚ äº’è”ç½‘ä¸Šä¾›å¤–ç•Œè®¿é—®çš„èµ„æºä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š é™æ€èµ„æºï¼šä¸»è¦æŒ‡Webé¡µé¢ä¸­ä¾›äººä»¬æµè§ˆçš„æ•°æ®å§‹ç»ˆæ˜¯ä¸å˜ã€‚ åŠ¨æ€èµ„æºï¼šä¸»è¦æŒ‡Webé¡µé¢ä¸­ä¾›äººä»¬æµè§ˆçš„æ•°æ®ç”±ç¨‹åºäº§ç”Ÿï¼Œä¸åŒæ—¶é—´ç‚¹è®¿é—®é¡µé¢çœ‹åˆ°çš„å†…å®¹å„ä¸ç›¸åŒã€‚ JavaWebä¸»è¦æŒ‡ä½¿ç”¨Javaè¯­è¨€è¿›è¡ŒåŠ¨æ€Webèµ„æºå¼€å‘æŠ€æœ¯çš„ç»Ÿç§°ï¼Œæ˜¯è§£å†³ç›¸å…³Webäº’è”ç½‘é¢†åŸŸçš„æŠ€æœ¯æ€»å’Œã€‚ æ—©æœŸçš„B&#x2F;Sæ¶æ„: åæ¥çš„B&#x2F;Sæ¶æ„ 2. HTTPåè®®ï¼ˆç†Ÿæ‚‰ï¼‰2.1 HTTPåè®®çš„æ¦‚å¿µ HTTPåè®®ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ç”±W3Cï¼ˆä¸‡ç»´ç½‘è”ç›Ÿï¼‰ç»„ç»‡åˆ¶å®šçš„ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œæ˜¯ç”¨æ¥è§„èŒƒæµè§ˆå™¨ä¸WebæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•é€šè®¯çš„æ•°æ®æ ¼å¼ï¼Œä¸»è¦æ¶‰åŠæµè§ˆå™¨çš„å‘è¯·æ±‚æ ¼å¼å’ŒæœåŠ¡å™¨çš„å“åº”æ ¼å¼ã€‚ HTTPåè®®é€šå¸¸æ‰¿è½½äºTCPåè®®ä¹‹ä¸Šï¼Œè€Œæ‰¿è½½äºTLSæˆ–SSLåè®®å±‚ä¹‹ä¸Šçš„åè®®å°±æ˜¯å¸¸è¯´çš„HTTPSåè®®ã€‚ HTTPé»˜è®¤çš„ç«¯å£å·ä¸º80ï¼ŒHTTPSé»˜è®¤çš„ç«¯å£å·ä¸º443ã€‚ 2.2 HTTPè¯·æ±‚æ ¼å¼ å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªHTTPè¯·æ±‚åˆ°æœåŠ¡å™¨çš„è¯·æ±‚æ¶ˆæ¯ä¸»è¦åŒ…æ‹¬ï¼šè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€ç©ºç™½è¡Œå’Œè¯·æ±‚ä½“ã€‚ 12345è¯·æ±‚è¡Œï¼šç”¨æ¥è¯´æ˜è¯·æ±‚ç±»å‹å’Œè¦è®¿é—®çš„èµ„æºä»¥åŠæ‰€ä½¿ç”¨çš„HTTPç‰ˆæœ¬ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š è¯·æ±‚ç±»å‹ï¼šè¯·æ±‚çš„è·¯å¾„ åè®®çš„ç‰ˆæœ¬(1.1) è¯·æ±‚å¤´ï¼šæ˜¯ç´§æ¥ç€è¯·æ±‚è¡Œï¼ˆå³ç¬¬ä¸€è¡Œï¼‰ä¹‹åçš„éƒ¨åˆ†ï¼Œç”¨æ¥è¯´æ˜æœåŠ¡å™¨è¦ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯ï¼Œæ ¼å¼ï¼ˆkey:valueï¼‰å¦‚ä¸‹ï¼š ä¸»æœº è¯·æ±‚é•¿åº¦ è¯·æ±‚çš„æµè§ˆå™¨ç›¸å…³ä¿¡æ¯ ç©ºç™½è¡Œå°±æ˜¯è¯·æ±‚å¤´éƒ¨çš„ç©ºè¡Œï¼Œå³ä½¿åé¢çš„è¯·æ±‚æ•°æ®ä¸ºç©ºåˆ™å¿…é¡»æœ‰ç©ºè¡Œã€‚ è¯·æ±‚ä½“ï¼šä¹Ÿå«è¯·æ±‚æ•°æ®ï¼Œå¯ä»¥æ·»åŠ ä»»æ„çš„å…¶ä»–æ•°æ®ã€‚ ä¸¾ä¾‹å¦‚ä¸‹ 1234567POST /task01_demo01/demo1.html HTTP/1.1 Host: localhost:8088 Content-Length: 21 Cache-Control: max-age=0 User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) name=scott&amp;pwd=123456 2.3 HTTPå“åº”æ ¼å¼ é€šå¸¸æƒ…å†µä¸‹æœåŠ¡å™¨æ¥æ”¶å¹¶å¤„ç†å®¢æˆ·ç«¯å‘è¿‡æ¥çš„è¯·æ±‚åä¼šè¿”å›ä¸€ä¸ªHTTPçš„å“åº”æ¶ˆæ¯ï¼Œä¸»è¦åŒ…æ‹¬ï¼šå“åº”è¡Œã€å“åº”å¤´ã€ç©ºç™½è¡Œå’Œå“åº”ä½“ã€‚ 1234567å“åº”è¡Œï¼šç”¨æ¥è¯´æ˜HTTPåè®®ç‰ˆæœ¬å·å’ŒçŠ¶æ€ç ä»¥åŠçŠ¶æ€æ¶ˆæ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š åè®®çš„ç‰ˆæœ¬(1.0 1.1) çŠ¶æ€ç  (200 æˆåŠŸ 404 è·¯å¾„é”™è¯¯ 500 æœåŠ¡é”™è¯¯) çŠ¶æ€ä¿¡æ¯ï¼šå“åº”å¤´ç”¨æ¥è¯´æ˜å®¢æˆ·ç«¯è¦ä½¿ç”¨çš„ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œæ ¼å¼ï¼ˆkey:valueï¼‰ã€‚ ç©ºç™½è¡Œï¼šå°±æ˜¯å“åº”å¤´éƒ¨çš„ç©ºè¡Œï¼Œå³ä½¿åé¢çš„è¯·æ±‚æ•°æ®ä¸ºç©ºåˆ™å¿…é¡»æœ‰ç©ºè¡Œã€‚ å“åº”ä½“ï¼šç”¨æ¥æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„æ–‡æœ¬ä¿¡æ¯ã€‚ ä¸¾ä¾‹å¦‚ä¸‹ï¼š 123456789HTTP/1.1 200 OK Content-Type: text/html Content-Length: 588 Date: Thu, 08 Sep 2021 12:59:54 GMT &lt;html&gt;&lt;head&gt;&lt;title&gt;ç¤ºä¾‹1&lt;/title&gt;&lt;/head&gt; &lt;body&gt;&lt;h1&gt;è¿™æ˜¯ä¸€ä¸ªHTMLé¡µé¢&lt;/h1&gt;&lt;/body&gt; &lt;/html&gt; 3. TomcatæœåŠ¡å™¨ï¼ˆé‡ç‚¹ï¼‰3.1 åŸºæœ¬æ¦‚å¿µ Tomcatæœ¬æ„ä¸ºå…¬çŒ«çš„å«ä¹‰ï¼Œæœ€åˆæ˜¯ç”±Sunå…¬å¸çš„è½¯ä»¶æ¶æ„å¸ˆè©¹å§†æ–¯Â·é‚“è‚¯Â·æˆ´ç»´æ£®å¼€å‘çš„ï¼Œåæ¥ä»–å¸®åŠ©å°†å…¶å˜ä¸ºå¼€æºé¡¹ç›®å¹¶ç”±Sunå…¬å¸è´¡çŒ®ç»™Apacheè½¯ä»¶åŸºé‡‘ä¼šã€‚ Tomcat æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå¼€æºçš„è½»é‡çº§Webåº”ç”¨æœåŠ¡å™¨ï¼Œåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œå¹¶å‘é‡å°çš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯•Servletã€JSP ç¨‹åºçš„é¦–é€‰ã€‚ 3.2 å®‰è£…æ–¹å¼ ä¸‹è½½åœ°å€ï¼šhttp://tomcat.apache.org/ 3.3 ç›®å½•ç»“æ„ binï¼š ä¸»è¦å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶å’Œè„šæœ¬ã€‚ confï¼š ä¸»è¦å­˜æ”¾å„ç§é…ç½®æ–‡ä»¶ã€‚ libï¼š ä¸»è¦ç”¨æ¥å­˜æ”¾Tomcatè¿è¡Œéœ€è¦åŠ è½½çš„jaråŒ…ã€‚ logsï¼š ä¸»è¦å­˜æ”¾Tomcatåœ¨è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶ã€‚ tempï¼š ä¸»è¦å­˜æ”¾Tomcatåœ¨è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ã€‚ webappsï¼š ä¸»è¦å­˜æ”¾åº”ç”¨ç¨‹åºï¼Œå½“Tomcatå¯åŠ¨æ—¶ä¼šå»åŠ è½½è¯¥ç›®å½•ä¸‹çš„åº”ç”¨ç¨‹åºã€‚ workï¼š ä¸»è¦å­˜æ”¾tomcatåœ¨è¿è¡Œæ—¶çš„ç¼–è¯‘åæ–‡ä»¶ï¼Œä¾‹å¦‚JSPç¼–è¯‘åçš„æ–‡ä»¶ã€‚ 3.4 å¯åŠ¨å’Œå…³é—­ å¯åŠ¨æ–¹å¼ï¼š ä½¿ç”¨binç›®å½•ä¸‹çš„æ‰¹å¤„ç†æ–‡ä»¶startup.batæ¥å¯åŠ¨TomcatæœåŠ¡å™¨ï¼Œè‹¥å‡ºç°ä¸€ä¸ªæ¯«ç§’æ•°è¯´æ˜å¯åŠ¨æˆåŠŸã€‚ å…³é—­æ–¹å¼ ä½¿ç”¨binç›®å½•ä¸‹çš„æ‰¹å¤„ç†æ–‡ä»¶shutdown.batæ¥å…³é—­TomcatæœåŠ¡å™¨ã€‚ æ³¨æ„äº‹é¡¹ å¯åŠ¨ä¹‹å‰é¦–å…ˆå®‰è£…JDKå¹¶é…ç½®ç¯å¢ƒå˜é‡JAVA_HOMEï¼Œè‹¥å¸Œæœ›TomcatæœåŠ¡å™¨å¯ä»¥åœ¨ä»»æ„è·¯å¾„å¯åŠ¨ï¼Œåˆ™éœ€è¦é…ç½®ç¯å¢ƒå˜é‡CATALINA_HOMEã€‚ å¯åŠ¨ä¿¡æ¯ä¹±ç çš„å¤„ç†æ–¹å¼ï¼šlogging.propertiesæ–‡ä»¶ä¿®æ”¹ä¸ºjava.util.logging.ConsoleHandler.encoding = GBK 3.5 é…ç½®æ–‡ä»¶ server.xmlæ–‡ä»¶æ˜¯æœåŠ¡å™¨çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è®¾ç½®ç«¯å£å·ã€è®¾ç½®åŸŸåæˆ–IPã€é»˜è®¤åŠ è½½çš„é¡¹ç›®ã€è¯·æ±‚ç¼–ç ç­‰ã€‚ 123&lt;Connector port=&quot;8888&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; /&gt; tomcat-users.xmlæ–‡ä»¶ç”¨æ¥é…ç½®ç®¡ç†TomcatæœåŠ¡å™¨çš„ç”¨æˆ·ä¸æƒé™ ã€‚ 12&lt;role rolename=&quot;manager-gui&quot;/&gt; &lt;user username=&quot;admin&quot; password=&quot;123456&quot; roles=&quot;manager-gui&quot;/&gt; 4. Servletçš„æ¦‚å¿µå’Œä½¿ç”¨ï¼ˆé‡ç‚¹ï¼‰4.1åŸºæœ¬æ¦‚å¿µ Servletï¼ˆServer Appletï¼‰æ˜¯Java Servletçš„ç®€ç§°ï¼Œç§°ä¸ºå°æœåŠ¡ç¨‹åºæˆ–æœåŠ¡è¿æ¥å™¨ï¼Œæ˜¯Javaè¯­è¨€ç¼–å†™çš„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œæ¢å¥è¯è¯´ï¼ŒServletå°±æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„Javaç±»ã€‚ Servletç”¨æ¥å®ŒæˆB&#x2F;Sæ¶æ„ä¸‹å®¢æˆ·ç«¯è¯·æ±‚çš„å“åº”å¤„ç†ï¼Œä¹Ÿå°±æ˜¯äº¤äº’å¼åœ°æµè§ˆå’Œç”Ÿæˆæ•°æ®ï¼Œç”ŸæˆåŠ¨æ€Webå†…å®¹ã€‚ 4.2 Servletçš„ç¼–ç¨‹æ­¥éª¤ å»ºç«‹ä¸€ä¸ªJava Web Applicationé¡¹ç›®å¹¶é…ç½®TomcatæœåŠ¡å™¨ã€‚ è‡ªå®šä¹‰ç±»å®ç°Servletæ¥å£æˆ–ç»§æ‰¿ HttpServletç±»ï¼ˆæ¨èï¼‰ å¹¶é‡å†™serviceæ–¹æ³•ã€‚ å°†è‡ªå®šä¹‰ç±»çš„ä¿¡æ¯é…ç½®åˆ° web.xmlæ–‡ä»¶å¹¶å¯åŠ¨é¡¹ç›®ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š 1234567891011121314&lt;!-- é…ç½®Servlet --&gt; &lt;servlet&gt; &lt;!-- HelloServletæ˜¯Servletç±»çš„åˆ«å --&gt; &lt;servlet-name&gt; HelloServlet &lt;/servlet-name&gt; &lt;!-- com.lagou.task01.HelloServletæ˜¯åŒ…å«è·¯å¾„çš„çœŸå®çš„Servletç±»å --&gt; &lt;servlet-class&gt; com.lagou.task01.HelloServlet &lt;/servlet-class&gt; &lt;/servlet&gt; &lt;!-- æ˜ å°„Servlet --&gt; &lt;servlet-mapping&gt; &lt;!-- HelloServletæ˜¯Servletç±»çš„åˆ«åï¼Œä¸ä¸Šè¿°åç§°å¿…é¡»ç›¸åŒ --&gt; &lt;servlet-name&gt; HelloServlet &lt;/servlet-name&gt; &lt;!-- /helloæ˜¯ä¾›æµè§ˆå™¨ä½¿ç”¨çš„åœ°å€ --&gt; &lt;url-pattern&gt; /hello &lt;/url-pattern&gt; &lt;/servlet-mapping&gt; åœ¨æµè§ˆå™¨ä¸Šçš„è®¿é—®æ–¹å¼ä¸ºï¼š 1http://localhost:8080/å·¥ç¨‹è·¯å¾„/url-patternçš„å†…å®¹ 4.3 Servletæ¥å£(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.Servletæ¥å£ç”¨äºå®šä¹‰æ‰€æœ‰servletå¿…é¡»å®ç°çš„æ–¹æ³• (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void init(ServletConfig config) ç”±servletå®¹å™¨è°ƒç”¨ï¼Œä»¥å‘servletæŒ‡ç¤ºservletæ­£åœ¨è¢«æ”¾å…¥æœåŠ¡ä¸­ void service(ServletRequest req,ServletResponse res) ç”±servletå®¹å™¨è°ƒç”¨ï¼Œä»¥å…è®¸servletå“åº”è¯·æ±‚ ServletConfig getServletConfig() è¿”å›ServletConfigå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æ­¤servletçš„åˆå§‹åŒ–å’Œå¯åŠ¨å‚æ•° String getServletInfo() è¿”å›æœ‰å…³servletçš„ä¿¡æ¯ï¼Œå¦‚ä½œè€…ã€ç‰ˆæœ¬å’Œç‰ˆæƒ void destroy() ç”±servletå®¹å™¨è°ƒç”¨ï¼Œä»¥å‘servletæŒ‡ç¤ºè¯¥servletæ­£ 4.4 GenericServletç±»(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.GenericServletç±»ä¸»è¦ç”¨äºå®šä¹‰ä¸€ä¸ªé€šç”¨çš„ã€ä¸åè®®æ— å…³çš„servletï¼Œè¯¥ç±»å®ç°äº†Servletæ¥å£ã€‚ è‹¥ç¼–å†™é€šç”¨servletï¼Œåªéœ€é‡å†™serviceæŠ½è±¡æ–¹æ³•å³å¯ã€‚ (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» abstract void service(ServletRequest req,ServletResponse res) ç”±servletå®¹å™¨è°ƒç”¨å…è®¸servletå“åº” 4.5 HttpServletç±»(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.http.HttpServletç±»æ˜¯ä¸ªæŠ½è±¡ç±»å¹¶ç»§æ‰¿äº†GenericServletç±»ã€‚ ç”¨äºåˆ›å»ºé€‚ç”¨äºç½‘ç«™çš„HTTP Servletï¼Œè¯¥ç±»çš„å­ç±»å¿…é¡»è‡³å°‘é‡å†™ä¸€ä¸ªæ–¹æ³•ã€‚ (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void doGet(HttpServletRequest req,HttpServletResponse resp) å¤„ç†å®¢æˆ·ç«¯çš„GETè¯·æ±‚ void doPost(HttpServletRequest req,HttpServletResponse resp) å¤„ç†å®¢æˆ·ç«¯çš„POSTè¯·æ±‚ void init() è¿›è¡Œåˆå§‹åŒ–æ“ä½œ void service(HttpServletRequest req,HttpServletResponse resp) æ ¹æ®è¯·æ±‚å†³å®šè°ƒç”¨doGetè¿˜æ˜¯doPostæ–¹æ³• void destroy() åˆ é™¤å®ä¾‹æ—¶é‡Šæ”¾èµ„æº 4.6 Servletçš„ç”Ÿå‘½å‘¨æœŸ æ„é€ æ–¹æ³•åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå½“ç¬¬ä¸€æ¬¡è¯·æ±‚Servletæ—¶è°ƒç”¨æ„é€ æ–¹æ³•æ¥åˆ›å»ºServletçš„å®ä¾‹ã€‚ initæ–¹æ³•åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå½“åˆ›å»ºå¥½Servletå®ä¾‹åç«‹å³è°ƒç”¨è¯¥æ–¹æ³•å®ç°Servletçš„åˆå§‹åŒ–ã€‚ serviceæ–¹æ³•è¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ¯å½“æœ‰è¯·æ±‚æ—¶éƒ½ä¼šè°ƒç”¨serviceæ–¹æ³•æ¥ç”¨äºè¯·æ±‚çš„å“åº”ã€‚ destroyæ–¹æ³•åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå½“è¯¥Servletå®ä¾‹æ‰€åœ¨çš„Webåº”ç”¨è¢«å¸è½½å‰è°ƒç”¨è¯¥æ–¹æ³•æ¥é‡Šæ”¾å½“å‰å ç”¨çš„èµ„æºã€‚ 5. POSTå’ŒGETè¯·æ±‚ï¼ˆé‡ç‚¹ï¼‰5.1 GETè¯·æ±‚å‘å‡ºGETè¯·æ±‚çš„ä¸»è¦æ–¹å¼ï¼šï¼ˆ1ï¼‰åœ¨æµè§ˆå™¨è¾“å…¥URLæŒ‰å›è½¦ï¼ˆ2ï¼‰ç‚¹å‡»&lt;a&gt;è¶…é“¾æ¥ï¼ˆ3ï¼‰ç‚¹å‡»submitæŒ‰é’®ï¼Œæäº¤ &lt;form method=&quot;get&quot;&gt;è¡¨å•GETè¯·æ±‚ç‰¹ç‚¹ï¼šä¼šå°†è¯·æ±‚æ•°æ®æ·»åŠ åˆ°è¯·æ±‚URLåœ°å€çš„åé¢ï¼Œåªèƒ½æäº¤å°‘é‡çš„æ•°æ®ã€ä¸å®‰å…¨ 5.2 POSTè¯·æ±‚å‘å‡ºPOSTè¯·æ±‚çš„æ–¹æ³•å¦‚ä¸‹ï¼š ç‚¹å‡»submitæŒ‰é’®ï¼Œæäº¤ &lt;form method=&quot;post&quot;&gt;è¡¨å• POSTè¯·æ±‚çš„ç‰¹ç‚¹ï¼š è¯·æ±‚æ•°æ®æ·»åŠ åˆ°HTTPåè®®ä½“ä¸­ï¼Œå¯æäº¤å¤§é‡æ•°æ®ã€å®‰å…¨æ€§å¥½ 5.3 ServletRequestæ¥å£(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.ServletRequestæ¥å£ä¸»è¦ç”¨äºå‘servletæä¾›å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯ï¼Œå¯ä»¥ä»ä¸­è·å–åˆ°ä»»ä½•è¯·æ±‚ä¿¡æ¯ã€‚ Servletå®¹å™¨åˆ›å»ºä¸€ä¸ªServletRequestå¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™Servletçš„serviceæ–¹æ³•ã€‚ (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getParameter(String name) ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¯·æ±‚å‚æ•°çš„å€¼ï¼Œå¦‚æœè¯¥å‚æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºå€¼ String[] getParameterValues(String name) è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«ç»™å®šè¯·æ±‚å‚æ•°æ‰€å…·æœ‰çš„æ‰€æœ‰å€¼ï¼Œå¦‚æœè¯¥å‚æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºå€¼ Enumeration getParameterNames() è¿”å›åŒ…å«æ­¤è¯·æ±‚ä¸­åŒ…å«çš„å‚æ•°åç§°çš„å­—ç¬¦ä¸²å¯¹è±¡çš„æšä¸¾ã€‚å¦‚æœè¯·æ±‚æ²¡æœ‰å‚æ•°ï¼Œåˆ™æ–¹æ³•è¿”å›ç©ºæšä¸¾ Map&lt;String, String[]&gt; getParameterMap() è¿”å›è¯·æ±‚å‚æ•°çš„é”®å€¼å¯¹ï¼Œä¸€ä¸ªé”®å¯ä»¥å¯¹åº”å¤šä¸ªå€¼ String getRemoteAddr() è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯æˆ–æœ€åä¸€ä¸ªä»£ç†çš„IPåœ°å€ int getRemotePort() è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯æˆ–æœ€åä¸€ä¸ªä»£ç†çš„ç«¯å£å· 5.4 HttpServletRequestæ¥å£(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.http.HttpServletRequestæ¥å£æ˜¯ServletRequestæ¥å£çš„å­æ¥å£ï¼Œä¸»è¦ç”¨äºæä¾›HTTPè¯·æ±‚ä¿¡æ¯çš„åŠŸèƒ½ã€‚ ä¸åŒäºè¡¨å•æ•°æ®ï¼Œåœ¨å‘é€HTTPè¯·æ±‚æ—¶ï¼ŒHTTPè¯·æ±‚å¤´ç›´æ¥ç”±æµè§ˆå™¨è®¾ç½®ã€‚ å¯ç›´æ¥é€šè¿‡HttpServletRequestå¯¹è±¡æä¾›çš„ä¸€ç³»åˆ—getæ–¹æ³•è·å–è¯·æ±‚å¤´æ•°æ®ã€‚ (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getRequestURI() è¿”å›æ­¤è¯·æ±‚çš„èµ„æºè·¯å¾„ä¿¡æ¯ StringBuffffer getRequestURL() è¿”å›æ­¤è¯·æ±‚çš„å®Œæ•´è·¯å¾„ä¿¡æ¯ String getMethod() è¿”å›å‘å‡ºæ­¤è¯·æ±‚çš„HTTPæ–¹æ³•çš„åç§°ï¼Œä¾‹å¦‚GETã€POST String getQueryString() è¿”å›è·¯å¾„åé¢è¯·æ±‚ä¸­é™„å¸¦çš„å‚æ•° String getServletPath() è¿”å›æ­¤è¯·æ±‚ä¸­è°ƒç”¨servletçš„è·¯å¾„éƒ¨åˆ† 5.5 ServletResponseæ¥å£(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.ServletResponseæ¥å£ç”¨äºå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å¸®åŠ©Servletå‘å®¢æˆ·ç«¯å‘é€å“åº”ã€‚ Servletå®¹å™¨åˆ›å»ºServletResponseå¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™servletçš„serviceæ–¹æ³•ã€‚ (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» PrintWriter getWriter() è¿”å›å¯å‘å®¢æˆ·ç«¯å‘é€å­—ç¬¦æ–‡æœ¬çš„PrintWriterå¯¹è±¡ String getCharacterEncoding() è·å–å“åº”å†…å®¹çš„ç¼–ç æ–¹å¼ void setContentType(String type) å¦‚æœå°šæœªæäº¤å“åº”ï¼Œåˆ™è®¾ç½®å‘é€åˆ°å®¢æˆ·ç«¯å“åº”çš„å†…å®¹ç±»å‹ã€‚å†…å®¹ç±»å‹ 5.6 HttpServletResponseæ¥å£(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.http.HttpServletResponseæ¥å£ç»§æ‰¿ServletResponseæ¥å£ï¼Œä»¥ä¾¿åœ¨å‘é€å“åº”æ—¶æä¾›ç‰¹å®šäºHTTPçš„åŠŸèƒ½ã€‚ (2) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void sendRedirect(String location) ä½¿ç”¨æŒ‡å®šçš„é‡å®šå‘ä½ç½®URLå‘å®¢æˆ·ç«¯å‘é€ä¸´æ—¶é‡å®šå‘å“åº” 5.7 ä½¿ç”¨ç¤ºä¾‹1234567891011121314// ç»§æ‰¿HttpServlet public class HelloWorld extends HttpServlet &#123; // é‡å†™HttpServletä¸­çš„doGetæ–¹æ³• protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException &#123; // è®¾ç½®å“åº”è¾“å‡ºç¼–ç ï¼Œé¿å…ä¸­æ–‡ä¹±ç  response.setContentType(â€œtext/html;charset=utf-8â€); // è·å–å“åº”è¾“å‡ºæµ PrintWriter out= response.getWriter(); // åˆ©ç”¨è¾“å‡ºæµè¾“å‡ºä¿¡æ¯ out.println(â€œ&lt;html&gt;&lt;body&gt; Hello worldï¼&lt;/body&gt;&lt;/html&gt;â€); //å…³é—­æµ out.close(); &#125; &#125; æ¡ˆä¾‹é¢˜ç›® ä½¿ç”¨Servletè·å–åœ¨æœåŠ¡å™¨è·å–ä¸€ä¸ª1~100ä¹‹é—´çš„éšæœºæ•°å¹¶å‘é€ç»™å®¢æˆ·ç«¯è¿›è¡Œæ˜¾ç¤ºã€‚ 6. Servletæ¥æ”¶ä¸­æ–‡ä¹±ç ï¼ˆé‡ç‚¹ï¼‰6.1 æ¥æ”¶ä¹±ç åŸå›  æµè§ˆå™¨åœ¨æäº¤è¡¨å•æ—¶ï¼Œä¼šå¯¹ä¸­æ–‡å‚æ•°å€¼è¿›è¡Œè‡ªåŠ¨ç¼–ç ã€‚å½“TomcatæœåŠ¡å™¨æ¥æ”¶åˆ°æµè§ˆå™¨è¯·æ±‚åè‡ªåŠ¨è§£ç ï¼Œå½“ç¼–ç ä¸è§£ç æ–¹å¼ä¸ä¸€è‡´æ—¶,å°±ä¼šå¯¼è‡´ä¹±ç ã€‚ 6.2 è§£å†³POSTæ¥æ”¶ä¹±ç 1234//æ¥æ”¶ä¹‹å‰è®¾ç½®ç¼–ç æ–¹å¼ï¼š request.setCharacterEncoding(â€œutf-8â€) //æç¤ºï¼š//å¿…é¡»åœ¨è°ƒç”¨request.getParameter(â€œnameâ€)ä¹‹å‰è®¾ç½® 6.3 è§£å†³GETæ¥æ”¶ä¹±ç 12345//å°†æ¥æ”¶åˆ°çš„ä¸­æ–‡ä¹±ç é‡æ–°ç¼–ç : // æ¥æ”¶åˆ°getè¯·æ±‚çš„ä¸­æ–‡å­—ç¬¦ä¸² String name = request.getParameter(&quot;name&quot;); // å°†ä¸­æ–‡å­—ç¬¦é‡æ–°ç¼–ç ï¼Œé»˜è®¤ç¼–ç ä¸ºISO-8859-1 String userName = new String(name.getBytes(â€œISO-8859-1â€),â€œutf-8&quot;); 7. ServletConfigæ¥å£ï¼ˆç†Ÿæ‚‰ï¼‰(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.ServletConfifigæ¥å£ç”¨äºæè¿°Servletæœ¬èº«çš„ç›¸å…³é…ç½®ä¿¡æ¯ï¼Œåœ¨åˆå§‹åŒ–æœŸé—´ç”¨äºå°†ä¿¡æ¯ä¼ é€’ç»™Servleté…ç½®å¯¹è±¡ã€‚ (2) é…ç½®æ–¹å¼123456789101112&lt;!-- åœ¨web.xmlä¸­é…ç½®ServletConfigåˆå§‹åŒ–å‚æ•° --&gt; &lt;servlet&gt; &lt;servlet-name&gt;actionservlet&lt;/servlet-name&gt; &lt;servlet-class&gt;com.lagou.demo01.ActionServlet&lt;/servlet-class&gt; &lt;!-- é…ç½® Serlvet çš„åˆå§‹åŒ–å‚æ•° --&gt; &lt;init-param&gt; &lt;!-- å‚æ•°å --&gt; &lt;param-name&gt;config&lt;/param-name&gt; &lt;!-- å‚æ•°å€¼ --&gt; &lt;param-value&gt;struts.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; (3) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getServletName() è¿”å›Servletçš„åˆ«å String getInitParameter(String name) è¿”å›åŒ…å«åˆå§‹åŒ–å‚æ•°å€¼çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¯¥å‚æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›null Enumeration getInitParameterNames() å°†servletçš„åˆå§‹åŒ–å‚æ•°çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²å¯¹è±¡çš„æšä¸¾è¿”å›ï¼Œå¦‚æœservletæ²¡æœ‰åˆå§‹åŒ–å‚æ•°ï¼Œåˆ™è¿”å›ç©ºæšä¸¾ ServletContext getServletContext() è¿”å›å¯¹è°ƒç”¨æ–¹æ­£åœ¨å…¶ä¸­æ‰§è¡Œçš„ServletContextçš„å¼•ç”¨ 8 ServletContextæ¥å£ï¼ˆç†Ÿæ‚‰ï¼‰(1) åŸºæœ¬æ¦‚å¿µ javax.servlet.ServletContextæ¥å£ä¸»è¦ç”¨äºå®šä¹‰ä¸€ç»„æ–¹æ³•ï¼ŒServletä½¿ç”¨è¿™äº›æ–¹æ³•ä¸å®ƒçš„Servletå®¹å™¨é€šä¿¡ã€‚ æœåŠ¡å™¨å®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºå”¯ä¸€çš„ä¸€ä¸ªServletContextå¯¹è±¡ï¼Œç”¨äºå®ç°å¤šä¸ªServletä¹‹é—´çš„ä¿¡æ¯å…±äº«å’Œé€šä¿¡ã€‚ åœ¨Servletä¸­é€šè¿‡this.getServletContext()æ–¹æ³•å¯ä»¥è·å¾—ServletContextå¯¹è±¡ã€‚ (2) é…ç½®æ–¹å¼12345678910&lt;!--åœ¨web.xmlä¸­é…ç½®ServletContextåˆå§‹åŒ–å‚æ•° --&gt; &lt;context-param&gt; &lt;param-name&gt;username&lt;/param-name&gt; &lt;param-value&gt;scott&lt;/param-value&gt; &lt;/context-param&gt; &lt;context-param&gt; &lt;param-name&gt;password&lt;/param-name&gt; &lt;param-value&gt;tiger&lt;/param-value&gt; &lt;/context-param&gt; (3) å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String getInitParameter(String name) è¿”å›åŒ…å«åˆå§‹åŒ–å‚æ•°å€¼çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¯¥å‚æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›null Enumeration getInitParameterNames() å°†servletçš„åˆå§‹åŒ–å‚æ•°çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²å¯¹è±¡çš„æšä¸¾è¿”å›ï¼Œå¦‚æœservletæ²¡æœ‰åˆå§‹åŒ–å‚æ•°ï¼Œåˆ™è¿”å›ç©ºæšä¸¾ String getRealPath(String path) è¿”å›åŒ…å«ç»™å®šè™šæ‹Ÿè·¯å¾„çš„å®é™…è·¯å¾„çš„å­—ç¬¦ä¸² String getContextPath() è¿”å›ä¸æ­¤ä¸Šä¸‹æ–‡å…³è”çš„ä¸»è·¯å¾„ InputStream getResourceAsStream(String path) å°†ä½äºæŒ‡å®šè·¯å¾„çš„èµ„æºä½œä¸ºInputStreamå¯¹è±¡è¿”å› void setAttribute(String name, Object object) å°†æŒ‡å®šçš„å±æ€§åå’Œå±æ€§å€¼ç»‘å®šåˆ°å½“å‰å¯¹è±¡ Object getAttribute(String name) æ ¹æ®æ‰§è¡Œçš„å±æ€§åè·å–å±æ€§å€¼ void removeAttribute(String name) åˆ é™¤æŒ‡å®šçš„å±æ€§åä¿¡æ¯","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Bootstrapè¯¦è§£","slug":"Bootstrapè¯¦è§£","date":"2020-01-05T10:37:14.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2020/01/05/Bootstrapè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2020/01/05/Bootstrap%E8%AF%A6%E8%A7%A3/","excerpt":"1.bootstrapç®€ä»‹1.1 ä»€ä¹ˆæ˜¯Bootstrapï¼Ÿ Bootstrapæ¥è‡ª Twitterï¼Œæ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„å“åº”å¼å‰ç«¯æ¡†æ¶ã€‚","text":"1.bootstrapç®€ä»‹1.1 ä»€ä¹ˆæ˜¯Bootstrapï¼Ÿ Bootstrapæ¥è‡ª Twitterï¼Œæ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„å“åº”å¼å‰ç«¯æ¡†æ¶ã€‚ Bootstrapæ˜¯åŸºäº HTMLã€CSSã€JavaScriptçš„ï¼Œå®ƒç®€æ´çµæ´»ï¼Œä½¿å¾— Web å¼€å‘æ›´åŠ å¿«æ·ã€‚ 1.2 ä¸ºä»€ä¹ˆä½¿ç”¨ Bootstrapï¼Ÿ ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆï¼šè‡ª Bootstrap3 èµ·ï¼Œæ¡†æ¶åŒ…å«äº†è´¯ç©¿äºæ•´ä¸ªåº“ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆçš„æ ·å¼ã€‚ ä¸æ˜¯ç®€å•çš„å¢åŠ ä¸€äº›å¯é€‰çš„é’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„æ ·å¼ï¼Œè€Œæ˜¯ç›´æ¥èåˆè¿›äº†æ¡†æ¶çš„å†…æ ¸ä¸­ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œé’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„æ ·å¼èåˆè¿›äº†æ¡†æ¶çš„æ¯ä¸ªè§’è½ï¼Œè€Œä¸æ˜¯å¢åŠ ä¸€ä¸ªé¢å¤–çš„æ–‡ä»¶ã€‚ æµè§ˆå™¨æ”¯æŒï¼šæ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ Bootstrapã€‚ å®¹æ˜“ä¸Šæ‰‹ï¼šåªè¦æ‚¨å…·å¤‡ HTML å’Œ CSS çš„åŸºç¡€çŸ¥è¯†ï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹å­¦ä¹  Bootstrapã€‚ å“åº”å¼è®¾è®¡ï¼šBootstrap çš„å“åº”å¼ CSS èƒ½å¤Ÿè‡ªé€‚åº”äºå°å¼æœºã€å¹³æ¿ç”µè„‘å’Œæ‰‹æœºã€‚ å®ƒä¸ºå¼€å‘äººå‘˜åˆ›å»ºæ¥å£æä¾›äº†ä¸€ä¸ªç®€æ´ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆã€‚ å®ƒåŒ…å«äº†åŠŸèƒ½å¼ºå¤§çš„å†…ç½®ç»„ä»¶ï¼Œæ˜“äºå®šåˆ¶ã€‚ å®ƒè¿˜æä¾›äº†åŸºäº Web çš„å®šåˆ¶ã€‚ å®ƒæ˜¯å¼€æºçš„ã€‚ 1.3 ä¸‹è½½ä¸ä½¿ç”¨ä¸­æ–‡å®˜ç½‘ï¼šhttps://www.bootcss.com/è‹±æ–‡å®˜ç½‘ï¼šhttp://getbootstrap.com ä¸‹è½½å¥½çš„ï¼Œå‹ç¼©åŒ…è§£å‹å‡ºæ¥ã€‚å°±å¾—åˆ°äº†bootstrapçš„èµ„æºæ–‡ä»¶äº†ã€‚åˆ†åˆ«æ˜¯cssã€jsã€fontå­—ä½“ï¼Œå…¨éƒ¨æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å³å¯ 1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot; /&gt; &lt;link href=&quot;css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; /&gt; &lt;title&gt;æœ¨ç“œç…²é¸¡è„š&lt;/title&gt; &lt;/head&gt; &lt;body style=&quot;padding:100px;&quot;&gt; &lt;h1&gt;Hello, Bootstrap!&lt;/h1&gt; &lt;!-- æ³¨æ„ï¼šè¿™ä¸¤ä¸ªæŒ‰é’®çš„classæ ·å¼æ˜¯Bootstrapå®šä¹‰çš„ --&gt; &lt;button class=&quot;btn btn-primary&quot;&gt;å­¦ä¹ å……ç”µ&lt;/button&gt; &lt;button class=&quot;btn btn-success&quot;&gt;æ›´å¤šæ–‡ç« &lt;/button&gt; &lt;/body&gt;&lt;/html&gt; 2.Bootstrapçš„ä½¿ç”¨2.1 è¡¨æ ¼å’Œä¹‹å‰çš„è¡¨æ ¼ç›¸æ¯”ï¼Œæ ‡ç­¾æ›´ä¸°å¯Œæ›´åŠ è¯­ä¹‰åŒ–ï¼Œæ•ˆæœæ›´ä½³ç¾è§‚ 2.1.1 ä¸°å¯Œçš„æ ‡ç­¾ &lt;table&gt; ä¸ºè¡¨æ ¼æ·»åŠ åŸºç¡€æ ·å¼ &lt;thead&gt; è¡¨æ ¼æ ‡é¢˜è¡Œçš„å®¹å™¨å…ƒç´ ï¼ˆ&lt;tr&gt;ï¼‰ &lt;tbody&gt; è¡¨æ ¼ä¸»ä½“ä¸­çš„è¡¨æ ¼è¡Œçš„å®¹å™¨å…ƒç´ ï¼ˆ&lt;tr&gt;ï¼‰ &lt;tr&gt; è¡¨æ ¼è¡Œ &lt;td&gt; é»˜è®¤çš„è¡¨æ ¼å•å…ƒæ ¼ã€‚ &lt;th&gt; ç‰¹æ®Šçš„è¡¨æ ¼å•å…ƒæ ¼ï¼Œï¼ˆå±…ä¸­å’ŒåŠ ç²—çš„æ•ˆæœï¼‰ã€‚å¿…é¡»åœ¨&lt;thead&gt; å†…ä½¿ç”¨ã€‚ &lt;caption&gt; å…³äºè¡¨æ ¼å­˜å‚¨å†…å®¹çš„æè¿°æˆ–æ€»ç»“ã€‚ 2.1.2 å¥½çœ‹çš„ç±»æ ·å¼ .table ä¸ºä»»æ„ &lt;table&gt; æ·»åŠ åŸºæœ¬æ ·å¼ (åªæœ‰æ¨ªå‘åˆ†éš”çº¿) .table-striped åœ¨ &lt;tbody&gt; å†…æ·»åŠ æ–‘é©¬çº¿å½¢å¼çš„æ¡çº¹ ( IE8 ä¸æ”¯æŒ) ï¼Œéš”è¡Œå˜è‰² .table-bordered ä¸ºæ‰€æœ‰è¡¨æ ¼çš„å•å…ƒæ ¼æ·»åŠ è¾¹æ¡† .table-hover åœ¨ &lt;tbody&gt; å†…çš„ä»»ä¸€è¡Œå¯ç”¨é¼ æ ‡æ‚¬åœçŠ¶æ€ï¼Œé¼ æ ‡æ‚¬åœé«˜äº®çªå‡ºæ˜¾ç¤º .table-condensed è®©è¡¨æ ¼æ›´åŠ ç´§å‡‘ 2.1.3 æƒ…æ™¯è‰²ç±»æ ·å¼é€‚åˆåº”ç”¨åœ¨&lt;th&gt;ã€&lt;tr&gt;ï¼Œ&lt;td&gt; .active æ¿€æ´»æ•ˆæœï¼ˆæ‚¬åœé¢œè‰²ï¼‰ .success è¡¨ç¤ºæˆåŠŸæˆ–ç§¯æçš„åŠ¨ä½œ .info è¡¨ç¤ºæ™®é€šçš„æç¤ºä¿¡æ¯æˆ–åŠ¨ä½œ .warning è¡¨ç¤ºè­¦å‘Šæˆ–éœ€è¦ç”¨æˆ·æ³¨æ„ .danger è¡¨ç¤ºå±é™©æˆ–æ½œåœ¨çš„å¸¦æ¥çš„è´Ÿé¢å½±å“çš„åŠ¨ä½œ 2.1.4 å“åº”å¼è¡¨æ ¼è¡¨æ ¼çš„çˆ¶å…ƒç´ è®¾ç½®å“åº”å¼ï¼Œå°äº768pxï¼Œå‡ºç°è¾¹æ¡† 12345678910111213141516171819202122232425262728293031323334353637&lt;table class=&quot;table table-responsive&quot;&gt; &lt;caption&gt;ç»è¥äº§å“å¤§å…¨&lt;/caption&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;äº§å“&lt;/th&gt; &lt;th&gt;ä»˜æ¬¾æ—¥æœŸ&lt;/th&gt; &lt;th&gt;çŠ¶æ€&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr class=&quot;info&quot;&gt; &lt;td&gt;äº§å“1&lt;/td&gt; &lt;td&gt;2020-1-1&lt;/td&gt; &lt;td&gt;å¾…å‘è´§&lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;active&quot;&gt; &lt;td&gt;äº§å“2&lt;/td&gt; &lt;td&gt;2020-1-2&lt;/td&gt; &lt;td&gt;å·²å‘è´§&lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;success&quot;&gt; &lt;td&gt;äº§å“3&lt;/td&gt; &lt;td&gt;2020-1-3&lt;/td&gt; &lt;td&gt;æœªä»˜æ¬¾&lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;warning&quot;&gt; &lt;td&gt;äº§å“4&lt;/td&gt; &lt;td&gt;2020-1-4&lt;/td&gt; &lt;td&gt;å·²é€€è´§&lt;/td&gt; &lt;/tr&gt; &lt;tr class=&quot;danger&quot;&gt; &lt;td&gt;äº§å“5&lt;/td&gt; &lt;td&gt;2020-1-5&lt;/td&gt; &lt;td&gt;å·²é€€æ¬¾&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; 2.2 è¡¨å•2.2.1 è¡¨å•å¸ƒå±€é»˜è®¤å¸ƒå±€ 123456789101112131415&lt;body style=&quot;padding:100px;&quot;&gt; &lt;form&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;é‚®ç®±&lt;/label&gt; &lt;input type=&quot;email&quot; class=&quot;form-control&quot; placeholder=&quot;è¯·è¾“å…¥é‚®ç®±&quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label&gt;å¯†ç &lt;/label&gt; &lt;input type=&quot;passowd&quot; class=&quot;form-control&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;&gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;button class=&quot;btn btn-primary&quot;&gt;æäº¤&lt;/button&gt; &lt;/div&gt; &lt;/form&gt;&lt;/body&gt; å†…è”å¸ƒå±€ è®©æ‰€æœ‰è¡¨å•å…ƒç´ å±…äºä¸€è¡Œ æ³¨æ„ï¼šå½“å°äº768pxæ—¶,ä¼šè‡ªåŠ¨è¿˜åŸæˆç§»åŠ¨ç«¯æ ·å¼. 1&lt;form class=&quot;form-inline&quot;&gt; 2.2.2 è¡¨å•æ§ä»¶è¾“å…¥æ¡† 123456&lt;form&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;&quot;&gt;è¾“å…¥æ¡†&lt;/label&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;è¯·è¾“å…¥æ–‡æœ¬...&quot;&gt; &lt;/div&gt;&lt;/form&gt; æ–‡æœ¬æ¡† 1234&lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;&quot;&gt;æ–‡æœ¬æ¡†&lt;/label&gt; &lt;textarea class=&quot;form-control&quot; cols=&quot;30&quot; rows=&quot;5&quot;&gt;&lt;/textarea&gt;&lt;/div&gt; å¤é€‰æ¡† checkbox é»˜è®¤ checkbox-inline å†…è” 123456789101112131415161718192021&lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; æŠ½çƒŸ &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;checkbox&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; å–é…’ &lt;/label&gt;&lt;/div&gt; &lt;hr&gt;&lt;div class=&quot;checkbox-inline&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; æ´—æ¾¡ &lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;checkbox-inline&quot;&gt; &lt;label&gt; &lt;input type=&quot;checkbox&quot;&gt; çƒ«å¤´ &lt;/label&gt;&lt;/div&gt; å¤é€‰æŒ‰é’® 12345678910111213141516171819&lt;form&gt; &lt;div class=&quot;btn-group&quot; data-toggle=&quot;buttons&quot;&gt; &lt;label class=&quot;btn btn-primary&quot;&gt; &lt;input type=&quot;checkbox&quot;&gt; éŸ³ä¹ &lt;/label&gt; &lt;label class=&quot;btn btn-primary&quot;&gt; &lt;input type=&quot;checkbox&quot;&gt; ä½“è‚² &lt;/label&gt; &lt;label class=&quot;btn btn-primary&quot;&gt; &lt;input type=&quot;checkbox&quot;&gt; ç¾æœ¯ &lt;/label&gt; &lt;label class=&quot;btn btn-primary&quot;&gt; &lt;input type=&quot;checkbox&quot;&gt; ç”µè„‘ &lt;/label&gt; &lt;/div&gt;&lt;/form&gt;&lt;script src=&quot;js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt; å•é€‰æ¡† 12345678910111213141516&lt;label class=&quot;radio&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot;&gt; ç”·&lt;/label&gt;&lt;label class=&quot;radio&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot;&gt; å¥³&lt;/label&gt;&lt;hr&gt;&lt;label class=&quot;radio-inline&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;gender&quot;&gt; è€•&lt;/label&gt;&lt;label class=&quot;radio-inline&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;gender&quot;&gt; ç»‡&lt;/label&gt;&lt;script src=&quot;js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt; å•é€‰æŒ‰é’® 1234567891011&lt;div class=&quot;btn-group&quot; data-toggle=&quot;buttons&quot;&gt; &lt;label class=&quot;btn btn-primary&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;gender&quot;&gt; ç”· &lt;/label&gt; &lt;label class=&quot;btn btn-primary&quot;&gt; &lt;input type=&quot;radio&quot; name=&quot;gender&quot;&gt; å¥³ &lt;/label&gt;&lt;/div&gt;&lt;script src=&quot;js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt; 2.3 æŒ‰é’® 1234567&lt;button class=&quot;btn btn-default&quot;&gt;é»˜è®¤æŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-primary&quot;&gt;ä¸»è¦æŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-success&quot;&gt;æˆåŠŸæŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-info&quot;&gt;ä¿¡æ¯æŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-warning&quot;&gt;è­¦å‘ŠæŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-danger&quot;&gt;å±é™©æŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-link&quot;&gt;è¿æ¥æŒ‰é’®&lt;/button&gt; æŒ‰é’®å¤§å° 1234&lt;button class=&quot;btn btn-primary btn-lg&quot;&gt;è¶…å¤§æŒ‰é’®ï¼ˆé«˜æ¸…å¤§å±å°å¼æœºï¼‰&lt;/button&gt;&lt;button class=&quot;btn btn-primary&quot;&gt;å¤§æŒ‰é’®ï¼ˆç¬”è®°æœ¬å±å¹•ï¼‰&lt;/button&gt;&lt;button class=&quot;btn btn-primary btn-sm&quot;&gt;å°æŒ‰é’®ï¼ˆå¹³æ¿ç”µè„‘ï¼‰&lt;/button&gt;&lt;button class=&quot;btn btn-primary btn-xs&quot;&gt;è¶…å°æŒ‰é’®ï¼ˆæ‰‹æœºï¼‰&lt;/button&gt; æŒ‰é’®çŠ¶æ€ æ¿€æ´»çŠ¶æ€ï¼šæŒ‰é’®åœ¨æ¿€æ´»æ—¶å°†å‘ˆç°ä¸ºè¢«æŒ‰å‹çš„å¤–è§‚ï¼ˆæ·±è‰²çš„èƒŒæ™¯ã€æ·±è‰²çš„è¾¹æ¡†ã€é˜´å½±ï¼‰; ç¦ç”¨çŠ¶æ€ï¼šå½“æ‚¨ç¦ç”¨ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œå®ƒçš„é¢œè‰²ä¼šå˜æ·¡ 50%ï¼Œå¹¶å¤±å»æ¸å˜; 123&lt;button class=&quot;btn btn-default&quot;&gt;é»˜è®¤æŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-default active&quot;&gt;æ¿€æ´»æŒ‰é’®&lt;/button&gt;&lt;button class=&quot;btn btn-default&quot; disabled&gt;ç¦ç”¨æŒ‰é’®&lt;/button&gt; 2.4 å›¾ç‰‡ .img-roundedï¼šæ·»åŠ  border-radius:6px æ¥è·å¾—å›¾ç‰‡åœ†è§’ã€‚ .img-circleï¼šæ·»åŠ  border-radius:50% æ¥è®©æ•´ä¸ªå›¾ç‰‡å˜æˆåœ†å½¢ã€‚ .img-thumbnailï¼šæ·»åŠ ä¸€äº›å†…è¾¹è·ï¼ˆpaddingï¼‰å’Œä¸€ä¸ªç°è‰²çš„è¾¹æ¡† 123&lt;img src=&quot;img/1.jpg&quot; class=&quot;img-rounded&quot; width=&quot;33%&quot;&gt;&lt;img src=&quot;img/1.jpg&quot; class=&quot;img-circle&quot; width=&quot;33%&quot;&gt;&lt;img src=&quot;img/1.jpg&quot; class=&quot;img-thumbnail&quot; width=&quot;33%&quot;&gt; å“åº”å¼å›¾ç‰‡ 1&lt;img src=&quot;img/1.jpg&quot; class=&quot;img-responsive&quot;&gt; 2.5 ä¸‹æ‹‰èœå•ç»„ä»¶ 1234567891011&lt;div class=&quot;dropdown&quot;&gt; &lt;button class=&quot;btn btn-primary&quot; data-toggle=&quot;dropdown&quot;&gt;æ‹‰å‹¾æ•™è‚² &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;&lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot;&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;å‰æ²¿æŠ€æœ¯&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;åå¸ˆåˆ¶ä½œ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#&quot;&gt;24å°æ—¶å¯¼å¸ˆ&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script src=&quot;js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt; ç”¨æ³•çš„å…³é”®æ ¸å¿ƒ å¤–å›´å®¹å™¨ä½¿ç”¨ class&#x3D;â€dropdownâ€åŒ…è£¹ å†…éƒ¨ç‚¹å‡»æŒ‰é’®äº‹ä»¶ç»‘å®š data-toggle&#x3D;â€dropdownâ€ èœå•å…ƒç´ ä½¿ç”¨ class&#x3D;â€dropdown-menuâ€ 2.6 åˆ†é¡µç»„ä»¶ 1234567&lt;ul class=&quot;pagination&quot;&gt; &lt;li class=&quot;previous&quot;&gt; &lt;a href=&quot;#&quot;&gt; &amp;laquo; &lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;active&quot;&gt; &lt;a href=&quot;#&quot;&gt;1&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=&quot;#&quot;&gt;2&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=&quot;#&quot;&gt;3&lt;/a&gt; &lt;/li&gt; &lt;li class=&quot;next&quot;&gt; &lt;a href=&quot;#&quot;&gt;&amp;raquo;&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; 1&lt;ul class=&quot;pager&quot;&gt; 2.7 æ …æ ¼ç³»ç»Ÿ bootstrapçš„æ …æ ¼ç³»ç»Ÿä¼šå°†æ•´ä¸ªé¡µé¢æ°´å¹³æ–¹å‘ä¸Šå¹³å‡åˆ†æˆ12ä¸ªå°æ ¼å­ å½“æµè§ˆå™¨å¤§å°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ¯è¡Œçš„å…ƒç´ å ç”¨å‡ ä¸ªæ ¼å­ï¼Œä»è€Œè¾¾åˆ°å“åº”å¼çš„æ•ˆæœ æ˜¾ç¤ºå±å¹•çš„æ‰©å¤§å’Œç¼©å°. å®ç°å¦‚ä¸‹æ•ˆæœ 123456789101112131415161718192021222324252627282930313233&lt;style&gt; .a&#123; height: 50px; border: 1px solid black; background-color: #eeeeee; &#125;&lt;/style&gt;&lt;body&gt; &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;!-- col-lg-3 å½“å¤§å±å¹•æ—¶ï¼Œä¸€ä¸ªdivå 3ä»½ï¼Œä¸€è¡Œæ˜¾ç¤º4ä¸ªdiv --&gt; &lt;!-- col-md-4 å½“ä¸­å±å¹•æ—¶ï¼Œä¸€ä¸ªdivå 4ä»½ï¼Œä¸€è¡Œæ˜¾ç¤º3ä¸ªdiv --&gt; &lt;!-- col-sm-6 å½“å°å±å¹•æ—¶ï¼Œä¸€ä¸ªdivå 6ä»½ï¼Œä¸€è¡Œæ˜¾ç¤º2ä¸ªdiv --&gt; &lt;!-- è¶…å°å±å¹•æ—¶ï¼Œä¸€ä¸ªdivå 12ä»½ï¼Œä¸€è¡Œæ˜¾ç¤º1ä¸ªdivï¼Œé»˜è®¤ --&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 a&quot;&gt;x&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt; 2.8 ç¼©ç•¥å›¾ç»„ä»¶ é…åˆå“åº”å¼çš„æ …æ ¼ç³»ç»Ÿ 12345678910111213141516171819202122232425&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6&quot;&gt; &lt;div class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;img/2.jpg&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- å…¶ä½™3å¼ å›¾ç‰‡ --&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6&quot;&gt; &lt;div class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;img/2.jpg&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6&quot;&gt; &lt;div class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;img/2.jpg&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6&quot;&gt; &lt;div class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;img/2.jpg&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; è‡ªå®šä¹‰å†…å®¹ 123456789101112131415161718192021&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-lg-3 col-md-4 col-sm-6&quot;&gt; &lt;div class=&quot;thumbnail&quot;&gt; &lt;img src=&quot;img/2.jpg&quot;&gt; &lt;div class=&quot;caption&quot;&gt; &lt;h3&gt;anå…¥é—¨åˆ°ç²¾é€š&lt;/h3&gt; &lt;p&gt;æœ¨ç“œç…²æœºè„š&lt;/p&gt; &lt;p&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-primary&quot;&gt;è¯•çœ‹&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;btn btn-warning&quot;&gt;è´­ä¹°&lt;/a&gt; &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!--å…¶ä½™2ä¸ªçœç•¥--&gt; &lt;/div&gt;&lt;/div&gt; 2.9 æ¨¡æ€æ¡†ç»„ä»¶ data-toggle&#x3D;â€modalâ€ è§¦å‘ç±»å‹:æ¨¡æ€æ¡†modal data-target&#x3D;â€#myModalâ€ è§¦å‘çš„èŠ‚ç‚¹ data-backdrop&#x3D;â€staticâ€ ç‚¹å‡»é»‘ç°è‰²èƒŒæ™¯ï¼Œä¸ä¼šå…³é—­æ¨¡æ€æ¡† 12345678910111213141516171819202122232425262728293031&lt;button class=&quot;btn btn-warning&quot; data-toggle=&quot;modal&quot; data-target=&quot;#myModal&quot;&gt;å¼¹æ¡†&lt;/button&gt;&lt;!-- å£°æ˜å®šä¹‰æ¨¡æ€æ¡†ç»„ä»¶ --&gt;&lt;div class=&quot;modal&quot; id=&quot;myModal&quot; data-backdrop=&quot;static&quot;&gt; &lt;!-- çª—å£å£°æ˜ --&gt; &lt;div class=&quot;modal-dialog&quot;&gt; &lt;!-- å†…å®¹å£°æ˜ --&gt; &lt;div class=&quot;modal-content&quot;&gt; &lt;!-- 1.æ¡†çš„æ ‡é¢˜ --&gt; &lt;div class=&quot;modal-header&quot;&gt; &lt;button class=&quot;close&quot; data-dismiss=&quot;modal&quot;&gt; &lt;span&gt;&amp;times;&lt;/span&gt; &lt;/button&gt; &lt;h4 class=&quot;modal-title&quot;&gt;å‹æƒ…æç¤º&lt;/h4&gt; &lt;/div&gt; &lt;!-- 2.æ¡†å†…ä¿¡æ¯ --&gt; &lt;div class=&quot;modal-body&quot;&gt; æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åå†è¯•ï¼ &lt;hr&gt; &lt;img src=&quot;img/1.jpg&quot; width=&quot;200px&quot;&gt; &lt;hr&gt; &lt;input type=&quot;text&quot;&gt; &lt;/div&gt; &lt;!-- 3.æ¡†çš„æŒ‰é’® --&gt; &lt;div class=&quot;modal-footer&quot;&gt; &lt;button class=&quot;btn btn-info&quot;&gt;ç¡®å®š&lt;/button&gt; &lt;button class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;å–æ¶ˆ&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 3.æ¡ˆä¾‹3.1 é¦–é¡µè½®æ’­å¤§å›¾ å¤§å°å±å¹•è‡ªåŠ¨é€‚åº”,æ‰©å¤§ç¼©å°æµè§ˆå™¨ æ»šåŠ¨æ•°å­—åŒºç‚¹å‡»å·¦å³åˆ‡æ¢å›¾ç‰‡ å·¦å³åŒºåŸŸç‚¹å‡»åˆ‡æ¢ é»˜è®¤5ç§’é’Ÿè‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€å¼  æœ€åä¸€å¼ ,å›åˆ°ç¬¬ä¸€å¼  12345678910111213141516171819202122232425262728293031&lt;div id=&quot;myCarousel&quot; class=&quot;carousel slide&quot; data-ride=&quot;carousel&quot;&gt; &lt;!-- æ»šåŠ¨åœ†ç‚¹åŒº --&gt; &lt;ol class=&quot;carousel-indicators&quot;&gt; &lt;li data-slide-to=&quot;0&quot; data-target=&quot;#myCarousel&quot;&gt;&lt;/li&gt; &lt;li data-slide-to=&quot;1&quot; data-target=&quot;#myCarousel&quot;&gt;&lt;/li&gt; &lt;li data-slide-to=&quot;2&quot; data-target=&quot;#myCarousel&quot;&gt;&lt;/li&gt; &lt;/ol&gt; &lt;!-- å›¾ç‰‡åŒº --&gt; &lt;div class=&quot;carousel-inner&quot;&gt; &lt;div class=&quot;item active&quot;&gt; &lt;img src=&quot;img/1.jpg&quot;&gt; &lt;/div&gt; &lt;div class=&quot;item&quot;&gt; &lt;img src=&quot;img/2.jpg&quot;&gt; &lt;/div&gt; &lt;div class=&quot;item&quot;&gt; &lt;img src=&quot;img/3.jpg&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- å·¦å³åˆ‡æ¢ --&gt; &lt;a href=&quot;#myCarousel&quot; data-slide=&quot;prev&quot; class=&quot;carousel-control left&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-chevron-left&quot;&gt;&lt;/span&gt; &lt;/a&gt; &lt;a href=&quot;#myCarousel&quot; data-slide=&quot;next&quot; class=&quot;carousel-control right&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-chevron-right&quot;&gt;&lt;/span&gt; &lt;/a&gt;&lt;/div&gt; data å±æ€§è§£é‡Šï¼š data-slide æ¥å—å…³é”®å­— prev æˆ– nextï¼Œç”¨æ¥æ”¹å˜å¹»ç¯ç‰‡ç›¸å¯¹äºå½“å‰ä½ç½®çš„ä½ç½®ï¼› data-slide-to æ¥å‘è½®æ’­åº•éƒ¨åˆ›å»ºä¸€ä¸ªåŸå§‹æ»‘åŠ¨ç´¢å¼•ï¼Œdata-slide-to&#x3D;â€2â€ å°†æŠŠæ»‘åŠ¨å—ç§»åŠ¨åˆ°ä¸€ä¸ªç‰¹å®šçš„ç´¢å¼•ï¼Œç´¢å¼•ä» 0 å¼€å§‹è®¡æ•°ã€‚ data-ride&#x3D;â€carouselâ€å±æ€§ç”¨æˆ·æ ‡è®°è½®æ’­åœ¨é¡µé¢åŠ è½½æ—¶å¼€å§‹åŠ¨ç”»æ’­æ”¾ 3.2 å“åº”å¼å¯¼èˆªæ¡ 12345678910111213141516171819202122232425262728&lt;!-- é»˜è®¤çš„å¯¼èˆªæ¡æ ·å¼ --&gt;&lt;div class=&quot;navbar navbar-default&quot;&gt; &lt;!-- å“åº”å¼çš„å®¹å™¨ --&gt; &lt;div class=&quot;container&quot;&gt; &lt;!-- å¯¼èˆªæ¡çš„å¤´éƒ¨ --&gt; &lt;div class=&quot;navbar-header&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;navbar-brand&quot;&gt;Jasperç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&lt;/a&gt; &lt;!-- data-toggle=&quot;collapse&quot; æ•°æ®åˆ‡æ¢çš„äº‹ä»¶ï¼Œç‰¹æ•ˆæ˜¯æŠ˜å --&gt; &lt;!-- data-target=&quot;#nav&quot; æŠ˜å æ•ˆæœçš„ç›®æ ‡æ˜¯ä¸‹é¢çš„#navå®¹å™¨--&gt; &lt;button class=&quot;navbar-toggle&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#nav&quot;&gt; &lt;span class=&quot;sr-only&quot;&gt;&lt;/span&gt; &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt; &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt; &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;/div&gt; &lt;!-- å¯¼èˆªé¡¹ --&gt; &lt;div id=&quot;nav&quot; class=&quot;collapse navbar-collapse&quot;&gt; &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt; &lt;li class=&quot;active&quot;&gt; &lt;a href=&quot;#&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-home&quot;&gt;&lt;/span&gt; ä¸»é¡µ&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=&quot;#&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-camera&quot;&gt;&lt;/span&gt; äº§å“&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=&quot;#&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-tint&quot;&gt;&lt;/span&gt; ç«äº‰&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=&quot;#&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-earphone&quot;&gt;&lt;/span&gt; è”ç³»æˆ‘ä»¬&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"ECMAScript6è¯¦è§£","slug":"ECMAScript6è¯¦è§£","date":"2020-01-05T10:00:26.000Z","updated":"2025-04-17T08:34:51.958Z","comments":true,"path":"2020/01/05/ECMAScript6è¯¦è§£/","link":"","permalink":"http://yournotes.cn/2020/01/05/ECMAScript6%E8%AF%A6%E8%A7%A3/","excerpt":"1.ECMAScript6 ç®€ä»‹ECMAScript 6.0ï¼ˆä»¥ä¸‹ç®€ç§° ES6ï¼‰æ˜¯ JavaScript è¯­è¨€çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œå·²ç»åœ¨ 2015 å¹´ 6 æœˆæ­£å¼å‘å¸ƒäº†ã€‚å®ƒçš„ç›®æ ‡","text":"1.ECMAScript6 ç®€ä»‹ECMAScript 6.0ï¼ˆä»¥ä¸‹ç®€ç§° ES6ï¼‰æ˜¯ JavaScript è¯­è¨€çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œå·²ç»åœ¨ 2015 å¹´ 6 æœˆæ­£å¼å‘å¸ƒäº†ã€‚å®ƒçš„ç›®æ ‡ï¼Œæ˜¯ä½¿å¾— JavaScript è¯­è¨€å¯ä»¥ç”¨æ¥ç¼–å†™å¤æ‚çš„å¤§å‹åº”ç”¨ç¨‹åºï¼Œæˆä¸ºä¼ä¸šçº§å¼€å‘è¯­è¨€ 1.1 ECMAScript å’Œ JavaScript çš„å…³ç³» è¦è®²æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å›é¡¾å†å²ã€‚ 1996 å¹´ 11 æœˆï¼ŒJavaScript çš„åˆ›é€ è€… Netscape å…¬å¸ï¼Œå†³å®šå°† JavaScript æäº¤ç»™æ ‡å‡†åŒ–ç»„ç»‡ ECMAï¼Œå¸Œæœ›è¿™ç§è¯­è¨€èƒ½å¤Ÿæˆä¸ºå›½é™…æ ‡å‡† ECMA å‘å¸ƒ 262 å·æ ‡å‡†æ–‡ä»¶ï¼ˆECMA-262ï¼‰çš„ç¬¬ä¸€ç‰ˆï¼Œè§„å®šäº†æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„æ ‡å‡†ï¼Œå¹¶å°†è¿™ç§è¯­è¨€ç§°ä¸º ECMAScriptï¼Œè¿™ä¸ªç‰ˆæœ¬å°±æ˜¯ 1.0 ç‰ˆã€‚ å› æ­¤ï¼ŒECMAScript ï¼ˆå®ªæ³•ï¼‰å’Œ JavaScriptï¼ˆå¾‹å¸ˆï¼‰ çš„å…³ç³»æ˜¯ï¼Œå‰è€…æ˜¯åè€…çš„è§„æ ¼ï¼Œåè€…æ˜¯å‰è€…çš„ä¸€ç§å®ç° 1.2 ES6 ä¸ ECMAScript 2015 çš„å…³ç³» 2011 å¹´ï¼ŒECMAScript 5.1 ç‰ˆå‘å¸ƒåï¼Œå°±å¼€å§‹åˆ¶å®š 6.0 ç‰ˆäº†ã€‚å› æ­¤ï¼ŒES6 è¿™ä¸ªè¯çš„åŸæ„ï¼Œå°±æ˜¯æŒ‡ JavaScript è¯­è¨€çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ã€‚ ES6 æ—¢æ˜¯ä¸€ä¸ªå†å²åè¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ³›æŒ‡ï¼Œå«ä¹‰æ˜¯ 5.1 ç‰ˆä»¥åçš„ JavaScript çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œæ¶µç›–äº† ES2015ã€ES2016ã€ES2017 ç­‰ç­‰ 2.æ­å»ºå‰ç«¯ç¯å¢ƒ2.1 Node ç¯å¢ƒ2.1.1 ä»€ä¹ˆæ˜¯Node.jsç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚JavaScriptç¨‹åºï¼Œå¿…é¡»è¦ä¾èµ–æµè§ˆå™¨æ‰èƒ½è¿è¡Œï¼æ²¡æœ‰æµè§ˆå™¨æ€ä¹ˆåŠï¼ŸOKï¼Œnodejså¸®ä½ è§£å†³Node.jsæ˜¯è„±ç¦»æµè§ˆå™¨ç¯å¢ƒè¿è¡Œçš„JavaScriptç¨‹åºï¼ŒåŸºäºGoogleçš„V8å¼•æ“ï¼ŒV8å¼•æ“æ‰§è¡ŒJavascriptçš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ€§èƒ½éå¸¸å¥½ã€‚ 2.1.2 Node.jsæœ‰ä»€ä¹ˆç”¨å¦‚æœä½ æ˜¯å‰ç«¯ç¨‹åºå‘˜ï¼Œä½ ä¸æ‡‚å¾—åƒPHPã€Pythonæˆ–Rubyç­‰åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œç„¶åä½ æƒ³åˆ›å»ºè‡ªå·±çš„æœåŠ¡ï¼Œé‚£Node.jsæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚Node.js æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptï¼Œå¦‚æœä½ ç†Ÿæ‚‰Javascriptï¼Œé‚£ä¹ˆä½ å°†ä¼šå¾ˆå®¹æ˜“çš„å­¦ä¼šNode.jsã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯åç«¯ç¨‹åºå‘˜ï¼Œæƒ³éƒ¨ç½²ä¸€äº›é«˜æ€§èƒ½çš„æœåŠ¡ï¼Œé‚£ä¹ˆå­¦ä¹ Node.jsä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ 2.1.3 å®‰è£…ä¸‹è½½ å®˜ç½‘ï¼šhttps://nodejs.org/en/ä¸­æ–‡ç½‘ï¼šhttp://nodejs.cn/LTSï¼šé•¿æœŸæ”¯æŒç‰ˆæœ¬Currentï¼šæœ€æ–°ç‰ˆå®‰è£…ï¼šWindowsä¸‹åŒå‡»ç‚¹å‡»å®‰è£…â€”â€”&gt;Nextâ€”â€”&gt;finish æ³¨æ„ï¼š node-v14.5.0-x64.msi æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯win7ç³»ç»Ÿçš„è¯ï¼Œå¯èƒ½å®‰è£…ä¸äº†ã€‚ å¦‚æœæ˜¯win7ç³»ç»Ÿï¼Œå®‰è£…node-v10.14.2-x64.msiè¿™ä¸ªç‰ˆæœ¬ æŸ¥çœ‹ç‰ˆæœ¬åœ¨dosçª—å£ä¸­æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬å· 1node -v åˆ›å»ºæ–‡ä»¶å¤¹ my-nodeç”¨vscodeæ‰“å¼€ç›®å½•ï¼Œå…¶ç›®å½•ä¸‹åˆ›å»º hello.js 1console.log(&quot;hello,nodejs&quot;); æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼šCtrl + Shift + yè¾“å…¥å‘½ä»¤ 1node hello.js ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œå¯èƒ½ä¼šæŠ¥é”™ï¼å…¼å®¹æ€§çš„é—®é¢˜ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå³å¯ è¿™æ ·ï¼Œæ²¡æœ‰ä½¿ç”¨æµè§ˆå™¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿è¡Œjsç¨‹åºäº† 2.1.4 æœåŠ¡å™¨ç«¯åº”ç”¨å¼€å‘ï¼ˆäº†è§£ï¼‰ åˆ›å»º node-server.js 12345678910111213const http = require(&quot;http&quot;); // nodeä¸­è‡ªå¸¦çš„requireå¼•å…¥æ–¹æ³•ï¼Œhttpä¹Ÿæ˜¯nodeä¸­è‡ªå¸¦çš„æœåŠ¡å¯¹è±¡http.createServer( function(request,response)&#123; // å‘å‡ºhttpè¯·æ±‚çš„å¤´éƒ¨ä¿¡æ¯ // httpçš„çŠ¶æ€ç ï¼š200ï¼›OK // è¯·æ±‚çš„å†…å®¹ç±»å‹ï¼štext/plain response.writeHead(200,&#123;&quot;Content-Type&quot;: &quot;text/plain&quot;&#125;); //å“åº”çš„æ•°æ® &quot;hello,welcomeï¼&quot; ,æ­¤æ—¶ï¼Œå¹¶ä¸æ”¯æŒä¸­æ–‡ï¼ˆä»¥åä¸€å®šä¼šè§£å†³ï¼ï¼‰ response.end(&quot;hello,welcome!&quot;);&#125; ).listen(8888); // ç›‘å¬ç«¯å£console.log(&quot;æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œè¯·è®¿é—® http://127.0.0.1:8888&quot;); æœåŠ¡å™¨å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp://localhost:8888/ æŸ¥çœ‹webserveræˆåŠŸè¿è¡Œï¼Œå¹¶è¾“å‡ºhtmlé¡µé¢ åœæ­¢æœåŠ¡ï¼šctrl + c 2.2 NPMç¯å¢ƒ2.2.1 ä»€ä¹ˆæ˜¯NPMNPMå…¨ç§°Node Package Managerï¼Œæ˜¯Node.jsåŒ…ç®¡ç†å·¥å…· æ˜¯å…¨çƒæœ€å¤§çš„æ¨¡å—ç”Ÿæ€ç³»ç»Ÿï¼Œé‡Œé¢æ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯å¼€æºå…è´¹çš„ï¼Œä¹Ÿæ˜¯Node.jsçš„åŒ…ç®¡ç†å·¥å…·ï¼Œç›¸å½“äºå‰ç«¯çš„Maven å¦‚æœä¸€ä¸ªé¡¹ç›®éœ€è¦å¼•ç”¨å¾ˆå¤šç¬¬ä¸‰æ–¹çš„jsæ–‡ä»¶ï¼Œæ¯”å¦‚åœ°å›¾ï¼ŒæŠ¥è¡¨ç­‰ï¼Œæ–‡ä»¶æ‚è€Œä¹±ï¼Œè‡ªå·±å»ç½‘ä¸Šä¸‹è½½ï¼Œåˆ°å¤„æ˜¯å¹¿å‘Šå’Œç—…æ¯’ é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±æƒ³åŠæ³•ï¼ŒæŠŠè¿™äº›jsæ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªä»“åº“é‡Œï¼Œå¤§å®¶è°éœ€è¦ï¼Œè°å°±å»ä»“åº“ä¸­æ‹¿è¿‡æ¥ï¼Œæ–¹ä¾¿å¤šäº† npmå°±æ˜¯è¿™ä¸ªä»“åº“ç³»ç»Ÿï¼Œå¦‚æœä½ éœ€è¦æŸä¸ªjsæ–‡ä»¶ï¼Œé‚£å°±å»è¿œç¨‹ä»“åº“ä¸­ä¸‹è½½ï¼Œæ”¾åœ¨æœ¬åœ°ç£ç›˜ä¸­ï¼Œè¿›è€Œå¼•ç”¨åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ ç®¡ç†å‰ç«¯å·¥ç¨‹ so easyï¼ 2.2.2 NPMå·¥å…·çš„å®‰è£…ä½ç½®nodeçš„ç¯å¢ƒåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œnpmå·¥å…·å°±å·²ç»å®‰è£…å¥½äº†ã€‚ Node.jsé»˜è®¤å®‰è£…çš„npmåŒ…å’Œå·¥å…·çš„ä½ç½®ï¼šNode.jsç›®å½•\\node_modules åœ¨è¿™ä¸ªç›®å½•ä¸‹ä½ å¯ä»¥çœ‹è§ npmç›®å½•ï¼Œnpmæœ¬èº«å°±æ˜¯è¢«NPMåŒ…ç®¡ç†å™¨ç®¡ç†çš„ä¸€ä¸ªå·¥å…·ï¼Œè¯´æ˜ Node.jså·²ç»é›†æˆäº†npmå·¥å…· 12#åœ¨å‘½ä»¤æç¤ºç¬¦è¾“å…¥ npm -v å¯æŸ¥çœ‹å½“å‰npmç‰ˆæœ¬npm -v 2.2.3 ä½¿ç”¨npmç®¡ç†é¡¹ç›®2.2.3.1 é¡¹ç›®åˆå§‹åŒ– å…¨æ–°åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œä½œä¸ºé¡¹ç›®ç›®å½•ï¼Œä½¿ç”¨doså‘½ä»¤è¿›å…¥æ­¤ç›®å½•ï¼Œè¾“å…¥å‘½ä»¤ 12345678910111213npm init# æ¥ä¸‹æ¥æ˜¯ä¸€å †é¡¹ç›®ä¿¡æ¯ç­‰å¾…ç€ä½ è¾“å…¥ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤å€¼æˆ–ä½ ä¸çŸ¥é“æ€ä¹ˆå¡«å†™ï¼Œåˆ™ç›´æ¥å›è½¦å³å¯ã€‚# package name: ä½ çš„é¡¹ç›®åå­—å«å•¥# version: ç‰ˆæœ¬å·# description: å¯¹é¡¹ç›®çš„æè¿°# entry point: é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼ˆä¸€èˆ¬ä½ è¦ç”¨é‚£ä¸ªjsæ–‡ä»¶ä½œä¸ºnodeæœåŠ¡ï¼Œå°±å¡«å†™é‚£ä¸ªæ–‡ä»¶ï¼‰# test command: é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è¦ç”¨ä»€ä¹ˆå‘½ä»¤æ¥æ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼ˆé»˜è®¤ä¸ºnode app.jsï¼‰# git repository: å¦‚æœä½ è¦å°†é¡¹ç›®ä¸Šä¼ åˆ°gitä¸­çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦å¡«å†™gitçš„ä»“åº“åœ°å€ï¼ˆè¿™é‡Œå°±ä¸å†™åœ°å€äº†ï¼‰# keywirdsï¼š é¡¹ç›®å…³é”®å­—ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æœ‰å•¥ç”¨ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å†™äº†ï¼‰# author: ä½œè€…çš„åå­—ï¼ˆä¹Ÿå°±æ˜¯ä½ å«å•¥åå­—ï¼‰# license: å‘è¡Œé¡¹ç›®éœ€è¦çš„è¯ä¹¦ï¼ˆè¿™é‡Œä¹Ÿå°±è‡ªå·±ç©ç©ï¼Œå°±ä¸å†™äº†ï¼‰ æœ€åä¼šç”Ÿæˆpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œç›¸å½“äºmavençš„pom.xmlæˆ‘ä»¬ä¹‹åä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚ä¸Šè¿°åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œè¦é‚£ä¹ˆå¤šè¾“å…¥å’Œå›è½¦ã€‚æƒ³ç®€å•ç‚¹ï¼Œä¸€åˆ‡éƒ½æŒ‰ç…§é»˜è®¤å€¼åˆå§‹åŒ–å³å¯ï¼Œokï¼Œå®‰æ’ 1npm init -y 2.2.4 ä¿®æ”¹npmé•œåƒ å’Œ å­˜å‚¨åœ°å€NPMå®˜æ–¹çš„ç®¡ç†çš„åŒ…éƒ½æ˜¯ä» http://npmjs.comä¸‹è½½çš„ï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç«™åœ¨å›½å†…é€Ÿåº¦å¾ˆæ…¢ã€‚ è¿™é‡Œæ¨èä½¿ç”¨æ·˜å® NPM é•œåƒ http://npm.taobao.org/ ï¼Œæ·˜å® NPM é•œåƒæ˜¯ä¸€ä¸ªå®Œæ•´npmjs.com é•œåƒï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º 10åˆ†é’Ÿä¸€æ¬¡ï¼Œä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚ è®¾ç½®é•œåƒå’Œå­˜å‚¨åœ°å€ï¼š 12345678#ç»è¿‡ä¸‹é¢çš„é…ç½®ï¼Œä»¥åæ‰€æœ‰çš„ npm install éƒ½ä¼šç»è¿‡æ·˜å®çš„é•œåƒåœ°å€ä¸‹è½½npm config set registry https://registry.npm.taobao.org#è®¾ç½®npmä¸‹è½½åŒ…æ—¶ä¿å­˜åœ¨æœ¬åœ°çš„åœ°å€ï¼ˆå»ºè®®è‹±æ–‡ç›®å½•ï¼‰npm config set prefix &quot;E:\\\\repo_npm&quot;#æŸ¥çœ‹npmé…ç½®ä¿¡æ¯npm config list 2.2.5 npm installå‘½ä»¤çš„ä½¿ç”¨1npm install jquery ä½¿ç”¨ npm install å®‰è£…ä¾èµ–åŒ…çš„æœ€æ–°ç‰ˆ æ¨¡å—å®‰è£…çš„ä½ç½®ï¼šé¡¹ç›®ç›®å½•\\node_modules å®‰è£…ä¼šè‡ªåŠ¨åœ¨é¡¹ç›®ç›®å½•ä¸‹æ·»åŠ  package-lock.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¸®åŠ©é”å®šå®‰è£…åŒ…çš„ç‰ˆæœ¬ åŒæ—¶package.json æ–‡ä»¶ä¸­ï¼Œä¾èµ–åŒ…ä¼šè¢«æ·»åŠ åˆ°dependenciesèŠ‚ç‚¹ä¸‹ï¼Œç±»ä¼¼mavenä¸­çš„ &lt;dependencies&gt; jQueryç‰ˆæœ¬æœ‰å¾ˆå¤šï¼Œä¸Šè¿°å‘½ä»¤ä¸‹è½½çš„ä»€ä¹ˆç‰ˆæœ¬çš„ï¼Ÿ æœ€æ–°ç‰ˆ å¦‚æœæˆ‘çš„é¡¹ç›®ä½¿ç”¨1.9.1ç‰ˆæœ¬è¿›è¡Œå¼€å‘çš„ï¼Œé€šè¿‡npmå®‰è£…çš„3.5.1ç‰ˆæœ¬å¤ªæ–°ï¼Œä¼šå¯¼è‡´é¡¹ç›®å¤±æ•ˆï¼Œå¦‚ä½•å®‰è£…æŒ‡å®šç‰ˆæœ¬åº“ï¼Ÿ 1npm install jquery@1.9.1 3. ES6åŸºæœ¬è¯­æ³• ESæ ‡å‡†ä¸­ä¸åŒ…å« DOM å’Œ BOMçš„å®šä¹‰ï¼Œåªæ¶µç›–åŸºæœ¬æ•°æ®ç±»å‹ã€å…³é”®å­—ã€è¯­å¥ã€è¿ç®—ç¬¦ã€å†…å»ºå¯¹è±¡ã€å†…å»ºå‡½æ•°ç­‰é€šç”¨è¯­æ³•ã€‚ æœ¬éƒ¨åˆ†åªå­¦ä¹ å‰ç«¯å¼€å‘ä¸­ES6çš„å¿…è¦çŸ¥è¯†ï¼Œæ–¹ä¾¿åé¢é¡¹ç›®å¼€å‘ä¸­å¯¹ä»£ç çš„ç†è§£ã€‚ 3.1 letå£°æ˜å˜é‡ ä¸æˆ‘ä»¬çš„JavaScriptä¸­varå£°æ˜å˜é‡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 1ã€ä½œç”¨åŸŸä¸åŒ 1234567&#123; var a = 0; // varå£°æ˜çš„å˜é‡æ˜¯å…¨å±€å˜é‡ let b = 0; // letå£°æ˜çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡&#125;console.log(a);console.log(b); //b is not definedï¼šbæ²¡æœ‰å®šä¹‰ 2ã€å£°æ˜æ¬¡æ•°ä¸åŒ 123456789// varå¯ä»¥å£°æ˜å¤šæ¬¡// letåªèƒ½å£°æ˜ä¸€æ¬¡var m = 1;var m = 2;let n = 3;let n = 4; //SyntaxError: Identifier &#x27;n&#x27; has already been declaredï¼ˆè¯­æ³•é”™è¯¯ï¼šnå·²ç»å£°æ˜è¿‡äº†ï¼‰console.log(m);console.log(n); 3ã€å£°æ˜ä¸ä½¿ç”¨é¡ºåºä¸åŒ 12345678// var å£°æ˜çš„å˜é‡ä¼šå…¨å±€å­˜å‚¨// let å£°æ˜çš„å˜é‡åªèƒ½åœ¨æ‰§è¡Œåæ‰å­˜å‚¨console.log( x ); //æ²¡æœ‰æŠ¥é”™ï¼Œè¾“å‡ºï¼šundefinedvar x = &quot;è‹¹æœ&quot;;console.log(y); //y is not definedï¼ˆyæ²¡æœ‰å®šä¹‰ï¼‰let y = &quot;é¦™è•‰&quot;; 3.2 constå£°æ˜å¸¸é‡const å£°æ˜å¸¸é‡,ä¸ºåªè¯»å˜é‡ ä¸€æ—¦å£°æ˜ä¹‹åï¼Œå…¶å€¼æ˜¯ä¸å…è®¸æ”¹å˜çš„ ä¸€ä½†å£°æ˜å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ SyntaxError: Missing initializer in const declarationï¼ˆè¯­æ³•é”™è¯¯ï¼Œå£°æ˜å¸¸é‡ä¸¢å¤±äº†åˆå§‹åŒ–ï¼‰ 1234const PI = 3.14;PI = 3.1415; //Assignment to constant variable.ï¼ˆå£°æ˜çš„æ˜¯å¸¸é‡ï¼‰console.log( PI ); 3.3 è§£æ„èµ‹å€¼ è§£æ„èµ‹å€¼æ˜¯å¯¹èµ‹å€¼è¿ç®—ç¬¦çš„æ‰©å±• å®ƒæ˜¯ä¸€ç§é’ˆå¯¹æ•°ç»„æˆ–è€…å¯¹è±¡è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œç„¶åå¯¹å…¶ä¸­çš„å˜é‡è¿›è¡Œèµ‹å€¼ã€‚ è§£æ„ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†é›†åˆå‹æ•°æ®è¿›è¡Œåˆ†è§£ï¼Œæ‹†åˆ†ï¼ŒæŠŠé‡Œé¢çš„å€¼é€ä¸€éå†è·å– åœ¨ä»£ç ä¹¦å†™ä¸Šç®€æ´ä¸”æ˜“è¯»ï¼Œè¯­ä¹‰æ›´åŠ æ¸…æ™°æ˜äº†ï¼›ä¹Ÿæ–¹ä¾¿äº†å¤æ‚å¯¹è±¡ä¸­æ•°æ®å­—æ®µè·å–ã€‚ 3.3.1 æ•°ç»„è§£æ„1234567891011var arr = [1,2,3];// ä¼ ç»Ÿçš„jslet a = arr[0];let b = arr[1];let c = arr[2];console.log(a,b,c);//es6çš„è§£æ„var [x,y,z] = arr;console.log(x,y,z); 3.3.2 å¯¹è±¡è§£æ„123456789101112131415var user = &#123; username : &quot;å•å¸ƒ&quot;, weapon:&quot;æ–¹å¤©ç”»æˆŸ&quot;, horse:&quot;èµ¤å…”é©¬&quot;&#125;;// ä¼ ç»Ÿçš„jslet mingzi = user.username;let wuqi = user.weapon;let zuoji = user.horse;console.log(&quot;å§“å:&quot;+mingzi+&quot;,æ­¦å™¨:&quot;+wuqi+&quot;,åéª‘:&quot;+zuoji);//es6çš„è§£æ„let &#123;username,weapon,horse&#125; = user; // æ³¨æ„ï¼šè§£æ„çš„å˜é‡åå¿…é¡»æ˜¯å¯¹è±¡ä¸­çš„å±æ€§console.log(&quot;å§“å:&quot;+username+&quot;,æ­¦å™¨:&quot;+weapon+&quot;,åéª‘:&quot;+horse); 3.4 æ¨¡æ¿å­—ç¬¦ä¸² æ¨¡æ¿å­—ç¬¦ä¸²ç›¸å½“äºåŠ å¼ºç‰ˆçš„å­—ç¬¦ä¸² ç”¨åå¼•å· &#96;,é™¤äº†ä½œä¸ºæ™®é€šå­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸² è¿˜å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­åŠ å…¥å˜é‡å’Œè¡¨è¾¾å¼ã€‚ 3.4.1 å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²å†è§äº†&quot;\\n&quot; 12345let str = `hello,ä½ ä¿©åœ¨å“ªå‘¢ï¼Ÿå¿ƒæƒ…ä¸å¥½ï¼Œå‡ºæ¥å–ç‚¹å•Šï¼`;console.log(str); 3.4.2 å­—ç¬¦ä¸²æ’å…¥å˜é‡å’Œè¡¨è¾¾å¼å†è§äº†ï¼Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ç”¨ &quot;+&quot; 12345678910let name = `å•å¸ƒ`;let age = 24;// ä¼ ç»Ÿçš„æ‹¼æ¥å­—ç¬¦ä¸²var info1 = &quot;æˆ‘å«:&quot;+ name +&quot;,æˆ‘ä»Šå¹´&quot;+age+&quot;å²ï¼&quot;;console.log(info1);// es6çš„æ‹¼æ¥å­—ç¬¦ä¸²var info2 = `æˆ‘å«:$&#123;name&#125;,æˆ‘æ˜å¹´$&#123;age+1&#125;å²ï¼`;console.log(info2); 3.4.3 å­—ç¬¦ä¸²ä¸­è°ƒç”¨å‡½æ•°è¿˜èƒ½è¿™ä¹ˆç© 123456function test()&#123; return &quot;åƒå–ç©ä¹&quot;;&#125;let str = `æ‚²å‚¬çš„äººç”Ÿï¼Œä»$&#123;test()&#125;å¼€å§‹`;console.log( str ); 3.5 å£°æ˜å¯¹è±¡ç®€å†™å®šä¹‰å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨å˜é‡åä½œä¸ºå±æ€§å 12345678910111213let name = `å•å¸ƒ`;let age = 28;//ä¼ ç»Ÿlet user1 = &#123; name : name, age : age&#125;;console.log(user1);//es6æ–°è¯­æ³•ä¸­çš„ç®€å†™let user2 = &#123;name,age&#125;;console.log(user2); 3.6 å®šä¹‰æ–¹æ³•ç®€å†™1234567891011121314151617// ä¼ ç»Ÿlet user1 = &#123; say : function()&#123; console.log(&quot;å¤§å®¶å¥½ï¼&quot;); &#125;&#125;;user1.say();//es6let user2 = &#123; say()&#123; console.log(&quot;å¤§å®¶å¥½å•Šï¼&quot;); &#125;&#125;;user2.say(); 3.7 å¯¹è±¡æ‹“å±•è¿ç®—ç¬¦æ‹“å±•è¿ç®—ç¬¦ {â€¦} å°†å‚æ•°å¯¹è±¡ä¸­æ‰€æœ‰å¯ä»¥éå†çš„å±æ€§æ‹¿å‡ºæ¥ï¼Œç„¶åæ‹·è´ç»™æ–°å¯¹è±¡ 3.7.1 æ‹·è´å¯¹è±¡(æ·±æ‹·è´)ç§‘å¹»ç”µå½±ä¸­çš„ä¸€æ»´è¡€ï¼Œå°±å¯ä»¥åˆ¶ä½œå‡ºä¸€ä¸ªå®Œå…¨ä¸€æ¨¡ä¸€æ ·çš„å…‹éš†äºº 123456789let user1 = &#123; name:&quot;é¡¹ç¾½&quot;, age:34&#125;;let user2 = &#123;...user1&#125;; // æ·±æ‹·è´ï¼ˆå…‹éš†ï¼‰console.log(user1);console.log(user2); 3.7.2 åˆå¹¶å¯¹è±¡åå™¬åˆå¹¶ï¼ˆä¸¤ä¸ªå¯¹è±¡åˆå¹¶æˆä¸€ä¸ªå¯¹è±¡ï¼‰ 12345678910let user1 = &#123; name:&quot;é¡¹ç¾½&quot;, age:34&#125;;let user2 = &#123;head:&quot;è¯¸è‘›äº®&quot;&#125;;let user = &#123;...user1,...user2&#125;;console.log( user ); 3.8 å‡½æ•°çš„é»˜è®¤å‚æ•°å½¢å‚å¤„å·²å£°æ˜ï¼Œä½†ä¸ä¼ å…¥å®å‚ä¼šæ€æ ·ï¼Ÿ 123456789function test(name , age = 18)&#123; console.log(`æˆ‘å«$&#123;name&#125;ï¼Œæˆ‘ä»Šå¹´$&#123;age&#125;å²`);&#125;test(&quot;å•å¸ƒ&quot;,33); //æˆ‘å«å•å¸ƒï¼Œæˆ‘ä»Šå¹´33å²test(&quot;è²‚è‰&quot;); //æˆ‘å«è²‚è‰ï¼Œæˆ‘ä»Šå¹´18å²test(&quot;å…³ç¾½&quot;,null); //æˆ‘å«å…³ç¾½ï¼Œæˆ‘ä»Šå¹´nullå²test(&quot;é©¬è¶…&quot;,&quot;&quot;); //æˆ‘å«é©¬è¶…ï¼Œæˆ‘ä»Šå¹´å²test(&quot;å¼ é£&quot;,undefined); //æˆ‘å«å¼ é£ï¼Œæˆ‘ä»Šå¹´18å² 3.9 å‡½æ•°çš„ä¸å®šå‚æ•°å®šä¹‰æ–¹æ³•æ—¶ï¼Œä¸ç¡®å®šæœ‰å‡ ä¸ªå‚æ•°ï¼Ÿ 123456789101112function test( ...arg )&#123; console.log(`ä¼ å…¥äº†$&#123;arg.length&#125;ä¸ªå‚æ•°`); for(var i = 0 ;i&lt;arg.length;i++)&#123; console.log(arg[i]); &#125;&#125;test(1);test(1,2);test(1,2,3,4,5,6);test();test(&quot;éƒ­&quot;,&quot;å˜‰&quot;,28); 3.10 ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°æä¾›äº†ä¸€ç§æ›´åŠ ç®€æ´çš„å‡½æ•°ä¹¦å†™æ–¹å¼ã€‚åŸºæœ¬è¯­æ³•æ˜¯ï¼šå‚æ•° &#x3D;&gt; å‡½æ•°ä½“ 12345678910111213141516171819202122232425// ä¼ ç»Ÿvar f1 = function(a)&#123; return a*10;&#125;console.log( f1(10) );// es6var f2 = a=&gt;a*10;console.log( f2(20) );// å½“ç®­å¤´å‡½æ•°ä¸€ä¸ªå‚æ•°æ—¶ï¼Œï¼ˆï¼‰å¯ä»¥çœç•¥// å½“ç®­å¤´å‡½æ•°æ²¡æœ‰å‚æ•°æˆ–è€…æœ‰å¤šä¸ªå‚æ•°ï¼Œè¦ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¥// å½“ç®­å¤´å‡½æ•°çš„å‡½æ•°ä½“æœ‰å¤šè¡Œè¯­å¥ï¼Œç”¨ï½›ï½æ‹¬èµ·æ¥ï¼Œè¡¨ç¤ºä»£ç å—// å½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¹¶ä¸”éœ€è¦è¿”å›æ—¶ï¼Œå¯ä»¥çœç•¥ï½›ï½ï¼Œç»“æœä¼šè‡ªåŠ¨è¿”å›var f3 = (a,b) =&gt; &#123; let sum = a+b; return sum;&#125;console.log( f3(3,7) );// å¯ä»¥å°†f3è¿›è¡Œç®€åŒ–var f4 = (a,b) =&gt; a + b;console.log( f3(11,22) ); 3.11 Promiseï¼ˆäº†è§£ï¼‰ ç”¨æ¥è§£å†³å›è°ƒå‡½æ•°çš„åµŒå¥—å™©æ¢¦ ï¼ˆåé¢å­¦ä¹ ajaxæ‰èƒ½æ›´å¥½çš„ç†è§£ï¼‰ æˆ‘ä»¬å›é¡¾ä¸€ä¸‹åµŒå¥—å™©æ¢¦ï¼š ä½ å’Œæˆ‘æ‰“æ¶ï¼Œæˆ‘æ‰“ä¸è¿‡ä½ ï¼Œæˆ‘è¯´ï¼šä½ åœ¨è¿™ç­‰ç€ï¼Œæˆ‘æ‰¾æˆ‘å“¥æ¥æä½ ï¼ â€œå“¥ï¼Œæˆ‘è¢«è€ç‹æ‰“äº†ï¼Œä½ å¸®æˆ‘æä»–ï¼â€ï¼Œâ€œè¡Œï¼Œæˆ‘å…ˆæŠŠé¥­åšå®Œï¼Œä½ å…ˆå»æ‰¾åˆ˜å¤‡ï¼ŒæŠŠåˆ˜å¤‡æ‰¾æ¥ï¼Œæˆ‘å’Œåˆ˜å¤‡å†ä¸€èµ·å¸®ä½ æŠ¥ä»‡ï¼â€ â€œåˆ˜å¤‡ï¼Œæˆ‘è¢«è€ç‹æ‰“äº†ï¼Œæˆ‘å“¥å«æˆ‘æ¥æ‰¾ä½ ï¼Œä¸€èµ·å¸®æˆ‘æŠ¥ä»‡ï¼â€ï¼Œâ€œæ²¡é—®é¢˜ï¼Œå…„å¼Ÿï¼Œæˆ‘å»äº¤ç”µè¯è´¹ï¼Œä½ å»æ‰¾æˆ‘äºŒå¼Ÿå…³ç¾½ï¼Œä»–æ‰“æ¶å‰å®³ï¼ŒæŠŠä»–å«æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·æ›´æœ‰æŠŠæ¡ï¼â€ â€œå…³ç¾½ï¼Œæˆ‘è¢«äººæ‰“äº†ï¼Œæˆ‘å“¥å«æˆ‘æ‰¾åˆ˜å¤‡ï¼Œåˆ˜å¤‡è®©æˆ‘æ¥æ‰¾ä½ ï¼Œä¸€èµ·å¸®æˆ‘æŠ¥ä»‡ï¼â€ï¼Œâ€œæ²¡é—®é¢˜ï¼Œå…„å¼Ÿï¼Œæˆ‘æœ‰ç‚¹äº‹ï¼Œä½ å…ˆå»æ‰¾æˆ‘ä¸‰å¼Ÿå¼ é£ï¼ŒæŠŠå¼ é£æ‰¾æ¥ï¼Œæˆ‘è¿™è¾¹å°±åŠå®Œäº‹äº†ï¼Œæˆ‘ä»¬ä¸€èµ·å¸®ä½ æŠ¥ä»‡å»ï¼â€ â€œå¼ é£ï¼Œæˆ‘è®©è€ç‹æ‰“äº†ï¼Œè°è°è°ï¼Œå“ï¼Œåæ­£å…³ç¾½è®©æˆ‘æ‰¾ä½ ï¼Œä½ è·Ÿæˆ‘èµ°ï¼Œä¸€èµ·å¸®æˆ‘æŠ¥ä»‡å»ï¼â€ï¼Œâ€œè¡Œå•Šï¼Œè€é“ï¼Œæˆ‘ä¸€ä¼šä»è€ä¸ˆäººå›æ¥å°±å»æ‰¾ä½ ï¼Œä½ å»æŠŠæˆ‘äºŒå“¥çš„å„¿å­å…³å¹³æ‰¾æ¥ï¼Œæ­£å¥½æ‰“ä¸€æ¶è®©è¿™å°å­ç»ƒç»ƒèƒ†ã€‚æ‰¾åˆ°äº†æˆ‘ä»¬ä¸€èµ·å¸®ä½ æŠ¥ä»‡ï¼â€ ã€‚ã€‚ã€‚ æ»¡å˜´çš„å…„å¼Ÿæƒ…æ·±ï¼Œä¸€ä¸ªæ‹–ä¸€ä¸ªï¼Œå°±æ˜¯ä¸æƒ³å¸®æˆ‘æŠ¥ä»‡ ä½¿ç”¨promiseè§£å†³ææ¶æ‰¾äººçš„å™©æ¢¦ â€œå“¥ï¼Œè€ç‹æ‰“æˆ‘ï¼â€ï¼Œâ€œèµ°ï¼Œä½†è€ç‹å‰å®³ï¼Œæˆ‘ä»¬å»æ‰¾åˆ˜å¤‡ä¸€èµ·å¸®ä½ æŠ¥ä»‡ï¼â€ â€œåˆ˜å¤‡ï¼Œèµ°ç€ï¼Œæˆ‘ä»¬ä¸€èµ·æè€ç‹å»â€ï¼Œâ€œæ²¡é—®é¢˜ï¼â€ï¼Œâ€œäºŒå¼Ÿï¼Œè¿‡æ¥ï¼Œæœ‰äººæ¬ºè´Ÿæˆ‘ä»¬ï¼Œå»æä»–ï¼â€ ã€‚ã€‚ã€‚æ‰¾äººè¿‡ç¨‹ä¸­ï¼Œéƒ½æ˜¯ç«‹åˆ»è·Ÿç€èµ°ï¼Œæ²¡äººæ‹–ï¼ æœ€ç»ˆï¼Œæˆ‘ä»¬108äººä¸€èµ·æ‰¾åˆ°äº†è€ç‹ï¼ï¼ï¼ï¼ æ‰¾åˆ°ä¸€ä¸ªäººæˆåŠŸåï¼Œå†ç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªäººã€‚é€æ¸å½¢æˆäº†â€œé˜Ÿä¼â€ ç»„å»ºé˜Ÿä¼çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ‰¾æŸä¸ªäººå¤±è´¥äº†ï¼Œåˆ™â€œé˜Ÿä¼â€å¤±è´¥ å…¶å®æœ‰ç‚¹ç±»ä¼¼â€œå‡»é¼“ä¼ èŠ±â€çš„æ¸¸æˆï¼Œä¸€ä¸ªæˆåŠŸæ‹¿åˆ°èŠ±ä¹‹åï¼Œæ‰èƒ½ä¼ é€’ç»™ä¸‹ä¸€ä¸ªäººã€‚ä¾æ¬¡ç±»æ¨ï¼ 123456789101112setTimeout(()=&gt;&#123; console.log(1); setTimeout(()=&gt;&#123; console.log(2); setTimeout(()=&gt;&#123; console.log(3); setTimeout(()=&gt;&#123; console.log(4); &#125;,1000); &#125;,1000); &#125;,1000);&#125;,1000); ä½¿ç”¨promise 123456789101112131415161718192021222324next = n =&gt; //Promiseçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‡½æ•°ï¼Œ //å¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šresolve(å¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåçš„å›è°ƒå‡½æ•°)ï¼Œreject(å¼‚æ­¥æ“ä½œæ‰§è¡Œå¤±è´¥åçš„å›è°ƒå‡½æ•°) new Promise(function(resolve, reject) &#123; setTimeout(function() &#123; resolve(n); &#125;, 1000); &#125;);next(1) .then(res =&gt; &#123; // æˆåŠŸ console.log(res); return next(2); //åœ¨thenæ–¹æ³•ä¸­è°ƒç”¨çš„nextæ–¹æ³•ï¼Œä¸€å®šè¦ç”¨return ï¼Œå¦åˆ™ä¸ä¼šé€šè¿‡resolveæŠŠæ•°æ®å¾€ä¸‹ä¼ é€’ &#125;) .then(res =&gt; &#123; console.log(res); return next(3); &#125;) .then(res =&gt; &#123; console.log(res); &#125;) .catch(() =&gt; &#123; //å¤„ç†å¤±è´¥ï¼šcatchæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¤±è´¥çš„å›è°ƒ console.log(&quot;å‡ºé”™å•¦ï¼&quot;); &#125;); 3.12 æ¨¡å—åŒ– å¦‚æœåœ¨a.jsæ–‡ä»¶ä¸­å®šä¹‰äº†5ä¸ªæ–¹æ³•ï¼Œç°åœ¨b.jsæ–‡ä»¶ä¸­æƒ³ä½¿ç”¨aä¸­çš„5ä¸ªæ–¹æ³•ï¼Œæ€ä¹ˆåŠï¼Ÿ javaè¯­è¨€çš„åšæ³•æ˜¯importå¼•å…¥ä¹‹åï¼Œå°±èƒ½ä½¿ç”¨äº†ã€‚es6çš„æ¨¡å—åŒ–ï¼Œå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ å°†ä¸€ä¸ªjsæ–‡ä»¶å£°æ˜æˆä¸€ä¸ªæ¨¡å—å¯¼å‡ºä¹‹åï¼Œå¦ä¸€ä¸ªjsæ–‡ä»¶æ‰èƒ½å¼•å…¥è¿™ä¸ªæ¨¡å— æ¯ä¸€ä¸ªæ¨¡å—åªåŠ è½½ä¸€æ¬¡ï¼ˆæ˜¯å•ä¾‹çš„ï¼‰ï¼Œ è‹¥å†å»åŠ è½½åŒç›®å½•ä¸‹åŒæ–‡ä»¶ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–ã€‚ 3.12.1 ä¼ ç»Ÿçš„æ¨¡å—åŒ–åˆ›å»ºuser.jsæ–‡ä»¶ 12345678910111213141516171819function addUser(name)&#123; return `ä¿å­˜$&#123;name&#125;æˆåŠŸï¼`;&#125;function removeUser(id)&#123; return `åˆ é™¤$&#123;id&#125;å·ç”¨æˆ·ï¼`;&#125;// å£°æ˜æ¨¡å—å¹¶å¯¼å‡º// module.exports=&#123;// save:addUser,// delete:removeUser// &#125;// å£°æ˜æ¨¡å—å¯¼å‡ºçš„ç®€å†™module.exports=&#123; addUser, removeUser&#125; test.js 123456789let user = require(&quot;./user.js&quot;); //å¼•å…¥useræ¨¡å—console.log( user );let result1 = user.addUser(&quot;å•å¸ƒ&quot;);let result2 = user.removeUser(101);console.log(result1);console.log(result2); 3.12.2 ES6çš„æ¨¡å—åŒ–user.js 123456789101112let name = &quot;è€å­™&quot;;let age = 66;let fn = function()&#123; return `æˆ‘æ˜¯$&#123;name&#125;!æˆ‘ä»Šå¹´$&#123;age&#125;å²äº†ï¼`;&#125;// å£°æ˜æ¨¡å—å¹¶å¯¼å‡ºexport&#123; name, age, fn&#125; test.js 12345import &#123;name,age,fn&#125; from &quot;./user.js&quot;console.log(name);console.log(age);console.log(fn); è¿è¡Œtest.jsï¼ŒæŠ¥é”™ï¼šSyntaxError: Unexpected token { ï¼ˆè¯­æ³•é”™è¯¯ï¼Œåœ¨æ ‡è®°{çš„ä½ç½® ï¼‰ åŸå› æ˜¯node.jså¹¶ä¸æ”¯æŒes6çš„importè¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦å°†es6è½¬æ¢é™çº§ä¸ºes5ï¼ 3.13 babelç¯å¢ƒbabelæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„è½¬ç å™¨ï¼Œå¯ä»¥å°†ES6ä»£ç è½¬ä¸ºES5ä»£ç ï¼Œä»è€Œåœ¨ç°æœ‰çš„ç¯å¢ƒä¸­æ‰§è¡Œã€‚ è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥ç°åœ¨å°±ç”¨ ES6 ç¼–å†™ç¨‹åºï¼Œè€Œä¸ç”¨æ‹…å¿ƒç°æœ‰ç¯å¢ƒæ˜¯å¦æ”¯æŒ 3.13.1 å®‰è£…babelå®¢æˆ·ç«¯ç¯å¢ƒåˆ›å»ºæ–°ç›®å½• lagou-babelï¼Œåœ¨ç»ˆç«¯ä¸­æ‰“å¼€ï¼Œè¿è¡Œå‘½ä»¤ï¼š 1npm install --global babel-cli æŸ¥çœ‹ç‰ˆæœ¬ 1babel --version å¦‚æœæŠ¥é”™1ï¼šï¼ˆwin7ç³»ç»Ÿä¸­ï¼‰ â€˜babelâ€™ ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚ï¼ˆbabelå‘½ä»¤åœ¨å½“å‰ç³»ç»Ÿä¸­ä¸è¢«è®¤å¯ï¼‰ ç”±äºbabelæ˜¯é€šè¿‡npmå®‰è£…ï¼Œæ‰€ä»¥babelä¼šé»˜è®¤å®‰è£…åˆ° E:\\repo_npm åœ¨ E:\\repo_npm è¿™ä¸ªç›®å½•ä¸‹ï¼Œè¿›å…¥doså‘½ä»¤ï¼Œæ‰§è¡Œ babel â€“versionï¼Œ å¦‚æœæ˜¯æˆåŠŸçš„ï¼Œè¯´æ˜babelå·²ç»å®‰è£…æˆåŠŸ ä½†æ˜¯åœ¨vscodeçš„ç»ˆç«¯ä¸­æ‰“ä¸å¼€ï¼Œé‚£ä¹ˆåªå¯èƒ½æ˜¯ä¸¤ä¸ªåŸå› ï¼š ç¯å¢ƒå˜é‡æ²¡æœ‰é…ç½® ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ pathä¸­åŠ å…¥ ;E:\\repo_npm; åœ¨ä»»æ„ä½ç½®è¿›å…¥dosçª—å£ï¼Œbabel â€“versionå¯ä»¥äº†ï¼Œè¯´æ˜ç¯å¢ƒå˜é‡é…ç½®æˆåŠŸ vscodeå…³æ‰ï¼Œé‡æ–°ä»¥â€œç®¡ç†å‘˜èº«ä»½è¿è¡Œ â€ å¦‚æœæŠ¥é”™2ï¼šï¼ˆwin10ç³»ç»Ÿä¸­ï¼‰ windows10é»˜è®¤ç¦æ­¢è¿è¡Œæœ‰å±é™©çš„è„šæœ¬ï¼Œä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿç­–ç•¥å°±å¥½äº† å¼€å§‹èœå•-&gt; Windows PowerShell (åˆ‡è®°è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)ï¼Œè¾“å…¥ä»£ç  1set-ExecutionPolicy RemoteSigned ç°åœ¨ï¼Œå°±å¯ä»¥çœ‹ç‰ˆæœ¬å·äº†ã€‚ 3.13.2 å®‰è£…è½¬ç å™¨ åˆ›å»ºlagou-babelä¸“å±ç›®å½•ï¼Œåœ¨å…¶ä¸­åˆå§‹åŒ–é¡¹ç›® 1npm init -y åˆ›å»ºbabelé…ç½®æ–‡ä»¶ .babelrc ï¼Œå¹¶è¾“å…¥ä»£ç é…ç½®ï¼š 1234&#123; &quot;presets&quot;: [&quot;es2015&quot;], &quot;plugins&quot;: []&#125; å®‰è£…è½¬ç å™¨ 1npm install --save-dev babel-preset-es2015 è½¬ç  åˆ›å»ºdistç›®å½•ï¼Œç”¨æ¥å­˜æ”¾è½¬ç åçš„æ–‡ä»¶ 123babel user.js --out-file .\\dist\\user.jsæˆ–babel user.js -o .\\dist\\user.js è¿è¡Œè½¬ç åçš„æ–‡ä»¶ 1node .\\dist\\test.js 3.14 ES6æ¨¡å—åŒ–çš„å¦ä¸€ç§å†™æ³•3.14.1 asçš„ç”¨æ³•user.jsï¼šå¦‚æœä½ ä¸æƒ³æš´éœ²æ¨¡å—å½“ä¸­çš„å˜é‡åå­—ï¼Œå¯ä»¥é€šè¿‡asæ¥è¿›è¡Œæ“ä½œ: 123456789101112let name = &quot;æœ¨ç“œç…²é¸¡è„š&quot;;let age = 20;let fn = function()&#123; return `æˆ‘æ˜¯$&#123;name&#125;!æˆ‘ä»Šå¹´$&#123;age&#125;å²äº†ï¼`;&#125;// å£°æ˜æ¨¡å—å¹¶å¯¼å‡ºexport&#123; name as a, age as b, fn as c&#125; test.js 12345import &#123;a,b,c&#125; from &quot;./user.js&quot;;console.log(a);console.log(b);console.log( c() ); ä¹Ÿå¯ä»¥æ¥æ”¶æ•´ä¸ªæ¨¡å— test.js 12345import * as info from &quot;./user.js&quot;; // é€šè¿‡*æ¥æ‰¹é‡æ¥æ”¶ï¼Œasæ¥æŒ‡å®šæ¥æ”¶çš„åå­—console.log(info.a);console.log(into.b);console.log( into.c() ); 3.14.2 é»˜è®¤å¯¼å‡ºå¯ä»¥å°†æ‰€æœ‰éœ€è¦å¯¼å‡ºçš„å˜é‡æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç„¶åé€šè¿‡default exportè¿›è¡Œå¯¼å‡º 1234567891011/*****************å¯¼å‡º****************************/export default&#123; name:&quot;æœ¨ç“œç…²é¸¡è„š&quot;, eat()&#123; return &quot;åƒç‚¹å•¥ï¼&quot;; &#125;&#125;/*****************å¯¼å…¥****************************/import p from &quot;./person.js&quot;;console.log( p.name, p.eat() ); 3.14.3 é‡å‘½åexportå’Œimportå¦‚æœå¯¼å…¥çš„å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œå˜é‡åå­—ç›¸åŒï¼Œå³ä¼šäº§ç”Ÿå‘½åå†²çªçš„é—®é¢˜ï¼Œ ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼ŒES6ä¸ºæä¾›äº†é‡å‘½åçš„æ–¹æ³•ï¼Œå½“ä½ åœ¨å¯¼å…¥åç§°æ—¶å¯ä»¥è¿™æ ·åšï¼š 123456789101112/*******************student1.js**************************/export let name = &quot;æˆ‘æ˜¯æ¥è‡ªstudent1.js&quot;;/*******************student2.js************************/export let name = &quot;æˆ‘æ˜¯æ¥è‡ªstudent2.js&quot;;/*******************test_student.js************************/import &#123;name as name1&#125; from &#x27;./student1.js&#x27;;import &#123;name as name2&#125; from &#x27;./student2.js&#x27;;console.log( name1 ); // æˆ‘æ˜¯æ¥è‡ªstudent1.jsconsole.log( name2 ); // æˆ‘æ˜¯æ¥è‡ªstudent2.js","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"JQueryè¯¦è§£","slug":"JQueryè¯¦è§£","date":"2020-01-05T09:28:10.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2020/01/05/JQueryè¯¦è§£/","link":"","permalink":"http://yournotes.cn/2020/01/05/JQuery%E8%AF%A6%E8%A7%A3/","excerpt":"1.jQueryä»‹ç» jQueryç”±ç¾å›½äººJohn Resigï¼ˆçº¦ç¿°Â·è±è¥¿æ ¼ï¼‰äº2006å¹´åˆ›å»º","text":"1.jQueryä»‹ç» jQueryç”±ç¾å›½äººJohn Resigï¼ˆçº¦ç¿°Â·è±è¥¿æ ¼ï¼‰äº2006å¹´åˆ›å»º jQueryæ˜¯ç›®å‰æœ€æµè¡Œçš„JavaScriptç¨‹åºåº“ï¼Œå®ƒæ˜¯å¯¹JavaScriptå¯¹è±¡å’Œå‡½æ•°çš„å°è£… å®ƒçš„è®¾è®¡æ€æƒ³æ˜¯write less,do more å®ç°éš”è¡Œå˜è‰²æ•ˆæœï¼ŒJavaScriptè¦å¾ªç¯åŠ åˆ¤æ–­ï¼Œè€ŒjQueryåªéœ€ä¸€å¥å…³é”®ä»£ç  1$(&quot;tr:even&quot;).css(&quot;background-color&quot;,&quot;#ccc&quot;); 1.1 jQueryèƒ½åšä»€ä¹ˆ? è®¿é—®å’Œæ“ä½œDOMå…ƒç´  æ§åˆ¶é¡µé¢æ ·å¼ å¯¹é¡µé¢äº‹ä»¶è¿›è¡Œå¤„ç† æ‰©å±•æ–°çš„jQueryæ’ä»¶ ä¸AjaxæŠ€æœ¯å®Œç¾ç»“åˆ jQueryèƒ½åšçš„JavaScriptä¹Ÿéƒ½èƒ½åšï¼Œä½†ä½¿ç”¨jQueryèƒ½å¤§å¹…æé«˜å¼€å‘æ•ˆç‡ å…¶å®ï¼ŒjQueryå’ŒJavaScriptçš„ä¹‹é—´å…³ç³»ï¼Œå¯ä»¥ç†è§£ä¸ºâ€œæˆè¯­â€å’Œâ€œç™½è¯æ–‡â€ä¹‹é—´çš„å…³ç³»ã€‚æˆè¯­æ˜¯å¯¹ç™½è¯æ–‡çš„é«˜åº¦å‹ç¼©ï¼Œè€ŒjQueryä¹Ÿæ˜¯å¯¹JavaScriptçš„é«˜åº¦å‹ç¼©åº“ 1.2 jQueryçš„ä¼˜åŠ¿ ä½“ç§¯å°ï¼Œå‹ç¼©ååªæœ‰100KBå·¦å³ å¼ºå¤§çš„é€‰æ‹©å™¨ å‡ºè‰²çš„DOMå°è£… å¯é çš„äº‹ä»¶å¤„ç†æœºåˆ¶ å‡ºè‰²çš„æµè§ˆå™¨å…¼å®¹æ€§ 1.3 jQueryä¸‹è½½è¿›å…¥jQueryå®˜ç½‘ï¼šhttp://jQuery.com æˆ‘ä»¬ä½¿ç”¨å‹ç¼©ç‰ˆå°±å¯ä»¥ã€‚ä½“ç§¯æ›´å°ï¼Œå†…å®¹å·²ç»é€šè¿‡ç®—æ³•è¿›è¡Œå‹ç¼©ï¼Œ ä¸ä¼šæµªè´¹èµ„æºç©ºé—´ï¼è€Œå¼€å‘ç‰ˆå°±é’ˆå¯¹ä¿®æ”¹jQueryæºç çš„ä¸“ä¸šå‰ç«¯å¼€å‘è€…çš„ã€‚å°±æ˜¯ä¸€ä¸ªå‹ç¼©äº†æ ¼å¼ä¸€ä¸ªæ²¡å‹ç¼©ä¾¿äºçœ‹æºç  2 jQueryçš„ä½¿ç”¨jQueryä½œä¸ºä¸€ä¸ªå•ç‹¬å­˜åœ¨çš„jsæ–‡ä»¶ï¼Œå¹¶ä¸ä¼šä¸å…¶ä»–çš„jsæ–‡ä»¶å‘ç”Ÿå†²çªåœ¨é¡µé¢ä¸­ä½¿ç”¨ä¼ ç»Ÿå¼•å…¥jsæ–‡ä»¶çš„æ–¹å¼å¼•å…¥å³å¯ã€‚ 1&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; 2.1 åŸºæœ¬çš„è¯­æ³•ä»‹ç»123&lt;script&gt; $(selector).action();&lt;/script&gt; è¯´æ˜ï¼š å·¥å‚å‡½æ•° $() ï¼šå°†DOMå¯¹è±¡è½¬åŒ–ä¸ºjQueryå¯¹è±¡ é€‰æ‹©å™¨ selectorï¼šè·å–éœ€è¦æ“ä½œçš„DOM å…ƒç´ ï¼ˆæ²¡é”™ï¼Œç”¨æ³•åŸºæœ¬ä¸Šå’Œcssä¸€è‡´ ï¼‰ æ–¹æ³•action()ï¼šjQueryä¸­æä¾›çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬ç»‘å®šäº‹ä»¶å¤„ç†çš„æ–¹æ³•â€œ$â€ç­‰åŒäºâ€œ jQuery â€ ä¾‹å¦‚ï¼š 1234567&lt;body&gt; &lt;p&gt;hello&lt;/p&gt;&lt;/body&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; alert( $(&quot;p&quot;).text() );&lt;/script&gt; 2.2 jQueryå¯¹è±¡ä¸DOMå¯¹è±¡DOMå¯¹è±¡å’ŒjQueryå¯¹è±¡åˆ†åˆ«æ‹¥æœ‰ä¸€å¥—ç‹¬ç«‹çš„æ–¹æ³•ï¼Œä¸èƒ½æ··ç”¨ 123$(&quot;#title&quot;).html();// ç­‰åŒäºdocument.getELementById(&quot;title&quot;).innerHTML; æƒ³æ··ç”¨ï¼Œè¦è½¬æ¢ DOMå¯¹è±¡è½¬jQueryå¯¹è±¡ 12var a = document.getElementById(&quot;name&quot;); // aæ˜¯DOMå¯¹è±¡var b = $(a); // bæ˜¯jQueryå¯¹è±¡ jQueryå¯¹è±¡è½¬DOMå¯¹è±¡ 12var a = $(&quot;#name&quot;); // aæ˜¯jQueryå¯¹è±¡var b = jqObject.get(0); // bæ˜¯DOMå¯¹è±¡ 2.3 é€‰æ‹©å™¨2.3.1 åŸºæœ¬é€‰æ‹©å™¨åŸºæœ¬é€‰æ‹©å™¨åŒ…æ‹¬æ ‡ç­¾é€‰æ‹©å™¨ã€ç±»é€‰æ‹©å™¨ã€IDé€‰æ‹©å™¨ã€å¹¶é›†é€‰æ‹©å™¨ã€äº¤é›†é€‰æ‹©å™¨å’Œå…¨å±€é€‰æ‹©å™¨ åç§° è¯­æ³•æ„æˆ æè¿° ç¤ºä¾‹ æ ‡ç­¾é€‰æ‹©å™¨ element æ ¹æ®ç»™å®šçš„æ ‡ç­¾ååŒ¹é…å…ƒç´  $(â€œh2â€ )é€‰å–æ‰€æœ‰h2å…ƒç´  ç±»é€‰æ‹©å™¨ .class æ ¹æ®ç»™å®šçš„classåŒ¹é…å…ƒç´  $(â€œ .titleâ€)é€‰å–æ‰€æœ‰classä¸ºtitleçš„å…ƒç´  IDé€‰æ‹©å™¨ #id æ ¹æ®ç»™å®šçš„idåŒ¹é…å…ƒç´  $(â€œ #titleâ€)é€‰å–idä¸ºtitleçš„å…ƒç´  å¹¶é›†é€‰æ‹©å™¨ selector1,selector2,â€¦,selectorN å°†æ¯ä¸€ä¸ªé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ åˆå¹¶åä¸€èµ·è¿”å› $(â€œdiv,p,.titleâ€ )é€‰å–æ‰€æœ‰divã€på’Œæ‹¥æœ‰classä¸ºtitleçš„å…ƒç´  äº¤é›†é€‰æ‹©å™¨ element.classæˆ–element#id åŒ¹é…æŒ‡å®šclassæˆ–idçš„æŸå…ƒç´ æˆ–å…ƒç´ é›†åˆ $(â€œh2.titleâ€)é€‰å–æ‰€æœ‰æ‹¥æœ‰classä¸ºtitleçš„h2å…ƒç´  1234567891011121314&lt;p&gt;ä¸­å›½&lt;/p&gt;&lt;p&gt;æ­¦æ±‰&lt;/p&gt;&lt;p class=&quot;jy&quot;&gt;åŠ æ²¹&lt;/p&gt;&lt;p id=&quot;wan&quot;&gt;ç¥–å›½ä¸‡å²&lt;/p&gt;&lt;h3 class=&quot;jy&quot;&gt;ç¥–å›½ä¸‡å²&lt;/h3&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //$(&quot;p&quot;).css(&quot;color&quot;,&quot;red&quot;); // æ ‡ç­¾é€‰æ‹©å™¨ï¼Œè·å¾—æ‰€æœ‰çš„p //$(&quot;.jy&quot;).css(&quot;color&quot;,&quot;red&quot;); //ç±»é€‰æ‹©å™¨ //$(&quot;#wan&quot;).css(&quot;color&quot;,&quot;red&quot;); //IDé€‰æ‹©å™¨,æ›´å…·å¤‡å”¯ä¸€æ€§ //$(&quot;.jy,#wan&quot;).css(&quot;color&quot;,&quot;red&quot;); // å¹¶é›†é€‰æ‹©å™¨ï¼Œ.jyå’Œ#wan $(&quot;h3.jy&quot;).css(&quot;color&quot;,&quot;red&quot;); // äº¤é›†é€‰æ‹©å™¨ï¼Œæ—¢æ˜¯h3æ ‡ç­¾ï¼Œåˆæ‹¥æœ‰.jyçš„å…ƒç´ &lt;/script&gt; 2.3.2 å±‚æ¬¡é€‰æ‹©å™¨ åç§° è¯­æ³•æ„æˆ æè¿° ç¤ºä¾‹ åä»£é€‰æ‹©å™¨ ancestor descendant é€‰å–ancestorå…ƒç´ é‡Œçš„æ‰€æœ‰descendantï¼ˆåä»£ï¼‰å…ƒç´  $(â€œ#menu spanâ€ )é€‰å–#menuä¸‹çš„&lt;span&gt;å…ƒç´  å­é€‰æ‹©å™¨ parent&gt;child é€‰å–parentå…ƒç´ ä¸‹çš„childï¼ˆå­ï¼‰å…ƒç´  $(â€œ #menu&gt;spanâ€ )é€‰å–#menuçš„å­å…ƒç´ &lt;span&gt; ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨ prev+next é€‰å–ç´§é‚»prevå…ƒç´ ä¹‹åçš„nextå…ƒç´  $(â€œ h2+dl â€œ )é€‰å–ç´§é‚»&lt;h2&gt;å…ƒç´ ä¹‹åçš„åŒè¾ˆå…ƒç´ &lt;dl&gt; åŒè¾ˆå…ƒç´ é€‰æ‹©å™¨ prev~sibings é€‰å–prevå…ƒç´ ä¹‹åçš„æ‰€æœ‰siblingså…ƒç´  $(â€œ h2~dl â€œ )é€‰å–&lt;h2&gt;å…ƒç´ ä¹‹åæ‰€æœ‰çš„åŒè¾ˆå…ƒç´ &lt;dl&gt; 123456789101112131415161718&lt;h3&gt;000&lt;/h3&gt;&lt;div id=&quot;x&quot;&gt; 111 &lt;p&gt;p1&lt;/p&gt; &lt;div&gt; &lt;p&gt;p2&lt;/p&gt; &lt;/div&gt;&lt;/div&gt;&lt;h3&gt;222&lt;/h3&gt; &lt;h3&gt;333&lt;/h3&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //$(&quot;#x p&quot;).css(&quot;color&quot;,&quot;red&quot;); // åä»£é€‰æ‹©å™¨ï¼Œå¿½ç•¥å±‚çº§ //$(&quot;#x&gt;p&quot;).css(&quot;color&quot;,&quot;red&quot;); // å­ä»£é€‰æ‹©å™¨ï¼Œåªè´Ÿè´£å­çº§ //$(&quot;#x+h3&quot;).css(&quot;color&quot;,&quot;red&quot;); // ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨ï¼Œä¸‹ä¸€ä¸ªç´§é‚»çš„å…„å¼Ÿh3 $(&quot;#x~h3&quot;).css(&quot;color&quot;,&quot;red&quot;); // åŒè¾ˆå…ƒç´ é€‰æ‹©å™¨ï¼Œä¸‹é¢çš„æ‰€æœ‰å…„å¼Ÿh3&lt;/script&gt; 2.3.3 å±æ€§é€‰æ‹©å™¨ åç§° è¯­æ³•æ„æˆ æè¿° ç¤ºä¾‹ å±æ€§é€‰æ‹©å™¨ [attribute] é€‰å–åŒ…å«ç»™å®šå±æ€§çš„å…ƒç´  $(â€œ [href]â€ )é€‰å–å«æœ‰hrefå±æ€§çš„å…ƒç´  [attribute&#x3D;value] é€‰å–ç­‰äºç»™å®šå±æ€§æ˜¯æŸä¸ªç‰¹å®šå€¼çš„å…ƒç´  $(â€œ [href &#x3D;â€™#â€™]â€ )é€‰å–hrefå±æ€§å€¼ä¸ºâ€œ#â€çš„å…ƒç´  [attribute !&#x3D;value] é€‰å–ä¸ç­‰äºç»™å®šå±æ€§æ˜¯æŸä¸ªç‰¹å®šå€¼çš„å…ƒç´  $(â€œ [href !&#x3D;â€™#â€™]â€ )é€‰å–hrefå±æ€§å€¼ä¸ä¸ºâ€œ#â€çš„å…ƒç´  [attribute^&#x3D;value] é€‰å–ç»™å®šå±æ€§æ˜¯ä»¥æŸäº›ç‰¹å®šå€¼å¼€å§‹çš„å…ƒç´  $(â€œ [href^&#x3D;â€™enâ€™]â€ )é€‰å–hrefå±æ€§å€¼ä»¥enå¼€å¤´çš„å…ƒç´  [attribute$&#x3D;value] é€‰å–ç»™å®šå±æ€§æ˜¯ä»¥æŸäº›ç‰¹å®šå€¼ç»“å°¾çš„å…ƒç´  $(â€œ [href$&#x3D;â€™.jpgâ€™]â€ )é€‰å–hrefå±æ€§å€¼ä»¥.jpgç»“å°¾çš„å…ƒç´  [attribute*&#x3D;value] é€‰å–ç»™å®šå±æ€§æ˜¯ä»¥åŒ…å«æŸäº›å€¼çš„å…ƒç´  $(â€œ [href* &#x3D;â€™txtâ€™]â€ )é€‰å–hrefå±æ€§å€¼ä¸­å«æœ‰txtçš„å…ƒç´  [s1] [s2] [sN] é€‰å–æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„å¤åˆå±æ€§çš„å…ƒç´  $(â€œli[id][title&#x3D;æ–°é—»]â€ )é€‰å–å«æœ‰idå’Œtitleå±æ€§ä¸ºæ–°é—»çš„&lt;li&gt;å…ƒç´  123456789101112131415161718&lt;a href=&quot;www.lagou.com&quot;&gt;æ‹‰å‹¾ç½‘&lt;/a&gt;&lt;a href=&quot;www.sina.com.cn&quot;&gt;æ–°æµªç½‘&lt;/a&gt;&lt;a href=&quot;http://www.163.com&quot;&gt;ç½‘æ˜“&lt;/a&gt;&lt;p href=&quot;x&quot;&gt;å“ˆå“ˆ1&lt;/p&gt;&lt;p href=&quot;x&quot; title=&quot;x&quot;&gt;å“ˆå“ˆ2&lt;/p&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //$(&quot;[href]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–æ‹¥æœ‰hrefå±æ€§çš„å…ƒç´  //$(&quot;[href=&#x27;x&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–æ‹¥æœ‰href=xçš„å…ƒç´  //$(&quot;a[href!=&#x27;x&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–aæ ‡ç­¾ä¸­hrefä¸ç­‰äºxçš„å…ƒç´  //$(&quot;[href^=&#x27;www&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–hrefå±æ€§ä»¥wwwå¼€å¤´çš„å…ƒç´  //$(&quot;[href$=&#x27;com&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–hrefå±æ€§ä»¥comç»“å°¾çš„å…ƒç´  //$(&quot;[href*=&#x27;a&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–hrefå±æ€§åŒ…å«açš„å…ƒç´  $(&quot;p[href][title=&#x27;x&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;); // é€‰å–æ‹¥æœ‰hrefå±æ€§å’Œtitleå±æ€§ï¼Œå¹¶ä¸”title=xçš„på…ƒç´ &lt;/script&gt; 2.3.4 è¿‡æ»¤é€‰æ‹©å™¨ è¯­æ³•æ„æˆ æè¿° ç¤ºä¾‹ :first é€‰å–ç¬¬ä¸€ä¸ªå…ƒç´  $(â€œ li:firstâ€ )é€‰å–æ‰€æœ‰å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  :last é€‰å–æœ€åä¸€ä¸ªå…ƒç´  $(â€œ li:lastâ€ )é€‰å–æ‰€æœ‰å…ƒç´ ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´  :even é€‰å–ç´¢å¼•æ˜¯å¶æ•°çš„æ‰€æœ‰å…ƒç´ ï¼ˆindexä»0å¼€å§‹ï¼‰ $(â€œ li:evenâ€ )é€‰å–ç´¢å¼•æ˜¯å¶æ•°çš„æ‰€æœ‰å…ƒç´  :odd é€‰å–ç´¢å¼•æ˜¯å¥‡æ•°çš„æ‰€æœ‰å…ƒç´ ï¼ˆindexä»0å¼€å§‹ï¼‰ $(â€œ li:oddâ€ )é€‰å–ç´¢å¼•æ˜¯å¥‡æ•°çš„æ‰€æœ‰å…ƒç´  :eq(index) é€‰å–ç´¢å¼•ç­‰äºindexçš„å…ƒç´ ï¼ˆindexä»0å¼€å§‹ï¼‰ $(â€œli:eq(1)â€ )é€‰å–ç´¢å¼•ç­‰äº1çš„å…ƒç´  :gt(index) é€‰å–ç´¢å¼•å¤§äºindexçš„å…ƒç´ ï¼ˆindexä»0å¼€å§‹ï¼‰ $(â€œ li:gt(1)â€ )é€‰å–ç´¢å¼•å¤§äº1çš„å…ƒç´ ï¼ˆæ³¨ï¼šå¤§äº1ï¼Œä¸åŒ…æ‹¬1ï¼‰ :lt(index) é€‰å–ç´¢å¼•å°äºindexçš„å…ƒç´ ï¼ˆindexä»0å¼€å§‹ï¼‰ $(â€œli:lt(1)â€ )é€‰å–ç´¢å¼•å°äº1çš„å…ƒç´ ï¼ˆæ³¨ï¼šå°äº1ï¼Œä¸åŒ…æ‹¬1ï¼‰ 123456789101112131415161718192021&lt;h2 id=&quot;h2#x&quot;&gt;ä¿®ä»™å°è¯´&lt;/h2&gt;&lt;ul&gt; &lt;li&gt;å‡¡äººä¿®ä»™ä¼ &lt;/li&gt; &lt;li&gt;é®å¤©&lt;/li&gt; &lt;li&gt;ç¥å¢“&lt;/li&gt; &lt;li&gt;æ®‹è¢&lt;/li&gt; &lt;li&gt;å¤§ä¸»å®°&lt;/li&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //$(&quot;li:first&quot;).css(&quot;color&quot;,&quot;red&quot;); // ç¬¬ä¸€ä¸ªli //$(&quot;li:last&quot;).css(&quot;color&quot;,&quot;red&quot;); // æœ€åä¸€ä¸ªli //$(&quot;li:even&quot;).css(&quot;color&quot;,&quot;red&quot;); // å¶æ•°è¡Œçš„li //$(&quot;li:odd&quot;).css(&quot;color&quot;,&quot;red&quot;); // å¥‡æ•°è¡Œçš„li //$(&quot;li:eq(2)&quot;).css(&quot;color&quot;,&quot;red&quot;); // ä¸‹æ ‡ä¸º2çš„li //$(&quot;li:gt(1)&quot;).css(&quot;color&quot;,&quot;red&quot;); // ä¸‹æ ‡å¤§äº1çš„li //$(&quot;li:lt(2)&quot;).css(&quot;color&quot;,&quot;red&quot;); // ä¸‹æ ‡å°äº2çš„li $(&quot;#h2\\\\#x&quot;).css(&quot;color&quot;,&quot;red&quot;); // ä½¿ç”¨è½¬ä¹‰ç¬¦&lt;/script&gt; 2.4 äº‹ä»¶2.4.1 é¼ æ ‡äº‹ä»¶é¼ æ ‡äº‹ä»¶æ˜¯å½“ç”¨æˆ·åœ¨æ–‡æ¡£ä¸Šç§»åŠ¨æˆ–å•å‡»é¼ æ ‡æ—¶è€Œäº§ç”Ÿçš„äº‹ä»¶ï¼Œå¸¸ç”¨é¼ æ ‡äº‹ä»¶æœ‰ï¼š æ–¹æ³• æè¿° æ‰§è¡Œæ—¶æœº click( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„clickäº‹ä»¶ å•å‡»é¼ æ ‡æ—¶ mouseover( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„mouse overäº‹ä»¶ é¼ æ ‡ç§»è¿‡æ—¶ mouseout( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„mouse outäº‹ä»¶ é¼ æ ‡ç§»å‡ºæ—¶ 1234567891011121314151617181920&lt;img src=&quot;img/1.jpg&quot; width=&quot;300&quot;&gt;&lt;img src=&quot;img/1.jpg&quot; width=&quot;300&quot;&gt;&lt;img src=&quot;img/1.jpg&quot; width=&quot;300&quot;&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;img&quot;).click( function()&#123; //ç‚¹å‡»ä¸€ä¸‹ï¼Œæ¢ç…§ç‰‡ $(this).attr( &quot;src&quot;,&quot;img/2.jpg&quot; ); //thiså°±æ˜¯äº‹ä»¶è§¦å‘çš„æºå¤´ &#125; ); $(&quot;img&quot;).mouseover( function()&#123; //ç§»åŠ¨åˆ°å…ƒç´ ä¸Š $(this).css( &quot;border&quot;,&quot;2px solid red&quot; ); &#125; ); $(&quot;img&quot;).mouseout( function()&#123; //ç¦»å¼€å…ƒç´  $(this).css( &quot;border&quot;,&quot;2px solid white&quot; ); &#125; );&lt;/script&gt; 2.4.2 é”®ç›˜äº‹ä»¶ç”¨æˆ·æ¯æ¬¡æŒ‰ä¸‹æˆ–è€…é‡Šæ”¾é”®ç›˜ä¸Šçš„é”®æ—¶éƒ½ä¼šäº§ç”Ÿäº‹ä»¶ï¼Œå¸¸ç”¨é”®ç›˜äº‹ä»¶æœ‰ï¼š æ–¹æ³• æè¿° æ‰§è¡Œæ—¶æœº keydown( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„keydownäº‹ä»¶ æŒ‰ä¸‹é”®ç›˜æ—¶ keyup( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„keyupäº‹ä»¶ é‡Šæ”¾æŒ‰é”®æ—¶ 12345678910&lt;input&gt;&lt;h3&gt;&lt;/h3&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;input&quot;).keyup( function()&#123; var str = $(this).val(); // è·å–æ¡†ä¸­çš„å€¼ $(&quot;h3&quot;).text( str ); // å°†h3å…ƒç´ ä¸­çš„æ–‡æœ¬å†…å®¹æ›´æ”¹ä¸ºstr &#125; );&lt;/script&gt; 2.4.3 è¡¨å•äº‹ä»¶å½“å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶ï¼Œä¼šè§¦å‘focusäº‹ä»¶ï¼Œå¤±å»ç„¦ç‚¹æ—¶ï¼Œä¼šè§¦å‘bluräº‹ä»¶ï¼Œè¯¦è§ä¸‹è¡¨ï¼š æ–¹æ³• æè¿° æ‰§è¡Œæ—¶æœº focus( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„focusäº‹ä»¶ è·å¾—ç„¦ç‚¹ blur( ) è§¦å‘æˆ–å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå…ƒç´ çš„bluräº‹ä»¶ å¤±å»ç„¦ç‚¹ 1234567891011121314151617&lt;form action=&quot;&quot;&gt; &lt;p&gt;å¸å·: &lt;input id=&quot;a&quot; value=&quot;è¯·è¾“å…¥å¸å·...&quot;&gt; &lt;/p&gt; &lt;p&gt;ç”µè¯: &lt;input id=&quot;b&quot;&gt; &lt;/p&gt;&lt;/form&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; //è·å¾—ç„¦ç‚¹ï¼ˆæ¿€æ´»/ç‚¹å‡»ä¸€ä¸‹ï¼‰ $(&quot;#a&quot;).focus(function()&#123; $(this).val(&quot;&quot;); &#125;); //å¤±å»ç„¦ç‚¹ï¼ˆæœªæ¿€æ´»/æœªç‚¹å‡»ï¼‰ $(&quot;#a&quot;).blur(function()&#123; $(this).val(&quot;è¯·è¾“å…¥å¸å·...&quot;); &#125;);&lt;/script&gt; 2.4.4 é¼ æ ‡æ‚¬åœå¤åˆäº‹ä»¶hover()æ–¹æ³•ç›¸å½“äºmouseoverä¸mouseoutäº‹ä»¶çš„ç»„åˆ 12345678910111213&lt;img src=&quot;img/3.jpg&quot; width=&quot;400&quot;&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;img&quot;).hover( function()&#123; $(this).css(&quot;border&quot;,&quot;5px solid red&quot;); &#125;, function()&#123; $(this).css(&quot;border&quot;,&quot;5px solid white&quot;); &#125; );&lt;/script&gt; 2.4.5 è¿ç»­ç‚¹å‡»å¤åˆäº‹ä»¶toggle()é™¤äº†å¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡çš„è¿ç»­å•å‡»äº‹ä»¶ 123456789101112131415&lt;h2&gt;ä¿®ä»™å°è¯´&lt;/h2&gt;&lt;ul&gt; &lt;li&gt;å‡¡äººä¿®ä»™ä¼ &lt;/li&gt; &lt;li&gt;é®å¤©&lt;/li&gt; &lt;li&gt;ç¥å¢“&lt;/li&gt; &lt;li&gt;æ®‹è¢&lt;/li&gt; &lt;li&gt;å¤§ä¸»å®°&lt;/li&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;h2&quot;).click(function()&#123; $(&quot;ul&quot;).toggle(); // è¿ç»­ç‚¹å‡»ï¼Œulçš„å¯è§å’Œéšè—è¿›è¡Œåˆ‡æ¢ &#125;);&lt;/script&gt; 2.4.6 äº‹ä»¶çš„åŠ¨æ€ç»‘å®šå¯¹domå…ƒç´ ç»‘å®šäº‹ä»¶çš„å¦ä¸€ç§å†™æ³• ç»‘å®šä¸€ä¸ªäº‹ä»¶ 123$(&quot;.del&quot;).on(&#x27;click&#x27;, function() &#123; alert(&#x27;hello&#x27;);&#125;) ç»‘å®šå¤šä¸ªäº‹ä»¶ 123$(&quot;.del&quot;).on(&#x27;click mouseover&#x27;, function() &#123; alert(&#x27;hello&#x27;);&#125;) 2.5 å…ƒç´ çš„éšè—å’Œæ˜¾ç¤º2.5.1 æ”¹å˜å…ƒç´ çš„å®½å’Œé«˜ï¼ˆå¸¦åŠ¨ç”»æ•ˆæœï¼‰ show( speed )ï¼šæ˜¾ç¤º hide( speed )ï¼šéšè— toggle( speed )ç­‰ä»·äºshow+hide : æ˜¾ç¤ºçš„éšè—ï¼Œéšè—çš„æ˜¾ç¤º å¯é€‰çš„ speed å‚æ•°è§„å®šéšè—&#x2F;æ˜¾ç¤ºçš„é€Ÿåº¦ï¼Œå¯ä»¥å–ä»¥ä¸‹å€¼ï¼šâ€slowâ€ã€â€fastâ€ æˆ–æ¯«ç§’ 1234567891011121314151617181920212223242526272829303132&lt;style&gt; div&#123; width: 200px; height: 200px; background-color: black; &#125;&lt;/style&gt;&lt;body&gt; &lt;button id=&quot;btn1&quot;&gt;æ˜¾ç¤º&lt;/button&gt; &lt;button id=&quot;btn2&quot;&gt;éšè—&lt;/button&gt; &lt;button id=&quot;btn3&quot;&gt;åˆ‡æ¢&lt;/button&gt; &lt;div&gt;&lt;/div&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;#btn2&quot;).click(function()&#123; //fast:å¿«é€Ÿçš„ //slow:ç¼“æ…¢çš„ //æ¯«ç§’ï¼šè‡ªå®šä¹‰ $(&quot;div&quot;).hide(2000); &#125;); $(&quot;#btn1&quot;).click(function()&#123; $(&quot;div&quot;).show(&#x27;slow&#x27;); &#125;); $(&quot;#btn3&quot;).click(function()&#123; $(&quot;div&quot;).toggle(1000); &#125;); &lt;/script&gt;&lt;/body&gt; 2.5.2 æ”¹å˜å…ƒç´ çš„é«˜ï¼ˆæ‹‰ä¼¸æ•ˆæœï¼‰ slideDown( speed ) ï¼šæ˜¾ç¤º slideUp( speed )ï¼šéšè— slideToggle( speed )ç­‰ä»·äºslideDown+slideUp å¯é€‰çš„ speed å‚æ•°è§„å®šéšè—&#x2F;æ˜¾ç¤ºçš„é€Ÿåº¦ï¼Œå¯ä»¥å–ä»¥ä¸‹å€¼ï¼šâ€slowâ€ã€â€fastâ€ æˆ–æ¯«ç§’ 12345678910111213&lt;script&gt; $(&quot;#btn2&quot;).click(function()&#123; $(&quot;div&quot;).slideUp(1000); //å‘ä¸Šæ”¶ç¼© &#125;); $(&quot;#btn1&quot;).click(function()&#123; $(&quot;div&quot;).slideDown(1000); //å‘ä¸‹ä¼¸å±• &#125;); $(&quot;#btn3&quot;).click(function()&#123; $(&quot;div&quot;).slideToggle(1000); //åˆ‡æ¢ &#125;);&lt;/script&gt; 2.5.3 ä¸æ”¹å˜å…ƒç´ çš„å¤§å°ï¼ˆæ·¡å…¥æ·¡å‡ºæ•ˆæœï¼‰ fadeIn( speed ) æ˜¾ç¤º fadeOut( speed ) éšè— fadeToggle( speed ) ç­‰ä»·äºfadeIn+fadeOutåŠ¨ç”» fadeTo( speed , é€æ˜åº¦ ) æ–¹æ³•å…è®¸æ¸å˜ä¸ºç»™å®šçš„ä¸é€æ˜åº¦ï¼ˆå€¼ä»‹äº 0 ä¸ 1 ä¹‹é—´ï¼‰ å¯é€‰çš„ speed å‚æ•°è§„å®šéšè—&#x2F;æ˜¾ç¤ºçš„é€Ÿåº¦ï¼Œå¯ä»¥å–ä»¥ä¸‹å€¼ï¼šâ€slowâ€ã€â€fastâ€ æˆ–æ¯«ç§’ 1234567891011121314151617&lt;script&gt; $(&quot;#btn2&quot;).click(function()&#123; $(&quot;div&quot;).fadeOut(1000); // éšè—ï¼šæ·¡å‡ºæˆ‘çš„è§†çº¿ &#125;); $(&quot;#btn1&quot;).click(function()&#123; $(&quot;div&quot;).fadeIn(1000); // æ˜¾ç¤ºï¼šæ˜ å…¥çœ¼å¸˜ &#125;); $(&quot;#btn3&quot;).click(function()&#123; $(&quot;div&quot;).fadeToggle(1000); // åˆ‡æ¢ &#125;); $(&quot;#btn4&quot;).click(function()&#123; $(&quot;div&quot;).fadeTo(1000,0.5); // 1ç§’å†…å˜æˆ50%çš„é€æ˜åº¦ &#125;);&lt;/script&gt; 2.5.4 é“¾é“¾æ˜¯å…è®¸æˆ‘ä»¬åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šåœ¨ä¸€æ¡è¯­å¥ä¸­è¿è¡Œå¤šä¸ªjQueryæ–¹æ³•ï¼Œå¯ä»¥æŠŠåŠ¨ä½œ&#x2F;æ–¹æ³•é“¾æ¥åœ¨ä¸€èµ· ï¼›ä¾‹å¦‚ï¼šç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œè®©divå®Œæˆ4ä¸ªæŒ‡å®šåŠ¨ä½œ èƒŒæ™¯å˜ç²‰ å­—ä½“å˜ç»¿ æ”¶ç¼© æ‹‰ä¼¸ 12345678910111213141516171819&lt;style&gt; div&#123; width: 200px; height: 200px; background-color: black; color:white; font-size: 3em; &#125; &lt;/style&gt;&lt;body&gt; &lt;button&gt;è¯•è¯•&lt;/button&gt; &lt;div&gt;hello&lt;/div&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;button&quot;).click(function()&#123; $(&quot;div&quot;).css(&quot;background-color&quot;,&quot;pink&quot;).css(&quot;color&quot;,&quot;green&quot;).slideUp(1000).slideDown(1000); &#125;); &lt;/script&gt;&lt;/body&gt; 2.6 DOMå’ŒCSSçš„æ“ä½œ2.6.1 å±æ€§å‡½æ•° attr( â€œå±æ€§â€ ); è·å¾—å…ƒç´ çš„å±æ€§å€¼ attr( â€œå±æ€§â€ , â€œæ–°å€¼â€ ); ä¿®æ”¹å…ƒç´ çš„å±æ€§å€¼ attr( æ ·å¼å‚æ•° ) ï¼šæ ·å¼å‚æ•°å¯ä»¥å†™æˆjsonæ ¼å¼ 1234567891011121314&lt;body&gt; &lt;button id=&quot;btn1&quot;&gt;ç‚¹æˆ‘è¯•è¯•&lt;/button&gt; &lt;hr&gt; &lt;img src=&quot;img/1.jpg&quot; title=&quot;ç¾å¥³å¤§å›¾&quot; width=&quot;300&quot;&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;#btn1&quot;).click(function()&#123; $(&quot;img&quot;).attr(&quot;src&quot;,&quot;img/2.jpg&quot;); $(&quot;img&quot;).attr(&quot;title&quot;,&quot;é«˜æ¸…æ— ç &quot;); $(&quot;img&quot;).attr( &#123;width:&quot;200&quot;,height:&quot;200&quot;&#125; ); &#125;); &lt;/script&gt;&lt;/body&gt; val() ; è·å¾—è¡¨å•å…ƒç´ ä¸­çš„valueå€¼ val(â€œxâ€) ä¿®æ”¹è¡¨å•å…ƒç´ ä¸­çš„valueå€¼ html(); è·å¾—å…ƒç´ ä¸­çš„å†…å®¹ï¼ˆæ ‡ç­¾+æ–‡æœ¬ï¼‰ html(â€œxâ€) ä¿®æ”¹å…ƒç´ ä¸­çš„å†…å®¹ï¼ˆæ ‡ç­¾+æ–‡æœ¬ï¼‰ text(); è·å¾—å…ƒç´ ä¸­çš„æ–‡æœ¬ text(â€œxâ€) ä¿®æ”¹å…ƒç´ ä¸­çš„æ–‡æœ¬ 12345678910111213141516171819&lt;button&gt;è¯•è¯•&lt;/button&gt;&lt;hr&gt;&lt;input id=&quot;username&quot;&gt;&lt;div&gt; &lt;h1&gt;&lt;i&gt;ä¸­å›½åŠ æ²¹ï¼&lt;/i&gt;&lt;/h1&gt;&lt;/div&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;button&quot;).click(function()&#123; //alert($(&quot;input&quot;).val()); //inputæ¡†ä¸­çš„å€¼ //$(&quot;input&quot;).val(&quot;å“ˆå“ˆå“ˆ&quot;); //ä¿®æ”¹inputæ¡†ä¸­çš„å€¼ //alert( $(&quot;div&quot;).html() ); //è·å¾—divä¸­çš„å†…å®¹ï¼ˆåŒ…å«æ ‡ç­¾ä¿¡æ¯ï¼‰ //alert( $(&quot;div&quot;).text() ); //è·å¾—divä¸­çš„å†…å®¹ï¼ˆä¸åŒ…å«æ ‡ç­¾ä¿¡æ¯ï¼ŒåªåŒ…å«æ–‡æœ¬å†…å®¹ï¼‰ $(&quot;div&quot;).text(&quot;ç¥–å›½ä¸‡å²ï¼&quot;); //ä¿®æ”¹divä¸­çš„å†…å®¹ï¼ˆå…¨éƒ¨å†…å®¹éƒ½è¦†ç›–ï¼‰ &#125;);&lt;/script&gt; 2.6.2 æ ·å¼å‡½æ•° css( â€œå±æ€§â€); è·å¾—è¯¥å±æ€§å€¼ css( â€œå±æ€§â€,â€å€¼â€); è®¾ç½®å±æ€§çš„å€¼ css( { json} ); è®¾ç½®å¤šä¸ªå±æ€§çš„å€¼ 123456789101112131415161718192021222324252627282930313233&lt;style&gt; div&#123; width: 150px; height: 150px; background-color: #000; &#125;&lt;/style&gt;&lt;body&gt; &lt;button&gt;è¯•è¯•&lt;/button&gt; &lt;hr&gt; &lt;div&gt;&lt;/div&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;button&quot;).click(function()&#123; //var w = $(&quot;div&quot;).css(&quot;width&quot;); // è·å–csså±æ€§ï¼Œwidthçš„å€¼ //1.ä¸€ä¸ªé”®å€¼å¯¹ //$(&quot;div&quot;).css(&quot;background-color&quot;,&quot;pink&quot;); //2.é“¾å¼ç¼–ç¨‹ //$(&quot;div&quot;).css(&quot;background-color&quot;,&quot;pink&quot;).css(&quot;border-radius&quot;,&quot;50%&quot;); //3.jsonä¸ºå‚æ•° $(&quot;div&quot;).css(&#123; opacity:&quot;0.4&quot;, background:&quot;orange&quot;, borderRadius:&quot;50%&quot; &#125; ); &#125;); &lt;/script&gt;&lt;/body&gt; width(); è·å¾—å…ƒç´ çš„å®½åº¦ width( number ); ä¿®æ”¹å…ƒç´ çš„å®½åº¦ height(); è·å¾—å…ƒç´ çš„é«˜åº¦ height( number ); ä¿®æ”¹å…ƒç´ çš„é«˜åº¦ 1234567891011121314151617181920212223&lt;style&gt; div&#123; width: 150px; height: 150px; background-color: #000; &#125;&lt;/style&gt;&lt;body&gt; &lt;button&gt;è¯•è¯•&lt;/button&gt; &lt;hr&gt; &lt;div&gt;&lt;/div&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;button&quot;).click(function()&#123; var w = $(&quot;div&quot;).width(); // ï¼ˆæ— å‚ï¼‰è·å–å®½åº¦ var h = $(&quot;div&quot;).height();// ï¼ˆæ— å‚ï¼‰è·å–é«˜åº¦ // alert(&quot;å®½:&quot;+w+&quot;pxï¼Œé«˜:&quot;+h+&quot;px&quot;); $(&quot;div&quot;).width(&quot;300&quot;); // ï¼ˆä¼ å‚ï¼‰ä¿®æ”¹å®½åº¦ $(&quot;div&quot;).height(&quot;300&quot;); //ï¼ˆä¼ å‚ï¼‰ä¿®æ”¹é«˜åº¦ &#125;); &lt;/script&gt;&lt;/body&gt; 2.6.3 ç±»æ ·å¼å‡½æ•° addClass(); ä¸ºå…ƒç´ æ·»åŠ ç±»æ ·å¼ removeClass(); å°†å…ƒç´ çš„ç±»æ ·å¼ç§»é™¤ toggleClass(); æ ·å¼çš„åˆ‡æ¢ï¼ˆæœ‰-&gt;æ— ï¼Œæ— -&gt;æœ‰ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;style&gt; div&#123; width: 100px; height: 100px; background-color: #000; &#125; .a&#123; background: palevioletred; border-radius: 50%; &#125; .b&#123; border:5px dashed darkcyan; opacity: 0.6; &#125; .cn&#123; background: #000; color:#FFF; font-family: å­—é­‚49å·-é€é¥è¡Œä¹¦; &#125;&lt;/style&gt;&lt;body&gt; &lt;button id=&quot;btn1&quot;&gt;è¯•è¯•&lt;/button&gt; &lt;button id=&quot;btn2&quot;&gt;å–æ¶ˆé€æ˜åº¦&lt;/button&gt; &lt;button id=&quot;btn3&quot;&gt;æ ·å¼åˆ‡æ¢&lt;/button&gt; &lt;hr&gt; &lt;div&gt;&lt;/div&gt; &lt;h1&gt;ä¸­åäººæ°‘å…±å’Œå›½ï¼Œä¸‡å²ï¼&lt;/h1&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;#btn1&quot;).click(function()&#123; // $(&quot;div&quot;).addClass(&quot;a&quot;); $(&quot;div&quot;).addClass(&quot;a b&quot;); &#125;); $(&quot;#btn2&quot;).click(function()&#123; $(&quot;div&quot;).removeClass(&quot;b&quot;); &#125;); $(&quot;#btn3&quot;).click(function()&#123; $(&quot;h1&quot;).toggleClass(&quot;cn&quot;); &#125;); &lt;/script&gt;&lt;/body&gt; 2.6.4 èŠ‚ç‚¹æ“ä½œ åˆ›å»ºèŠ‚ç‚¹ å·¥å‚å‡½æ•°$()ç”¨äºè·å–æˆ–åˆ›å»ºèŠ‚ç‚¹ æ’å…¥èŠ‚ç‚¹ æ’å…¥å­èŠ‚ç‚¹ è¯­æ³• åŠŸèƒ½ append(content) $(A).append(B)è¡¨ç¤ºå°†Bè¿½åŠ åˆ°Aä¸­ï¼Œå¦‚ï¼š$(â€œulâ€).append($newNode1); appendTo(content) $(A).appendTo(B)è¡¨ç¤ºæŠŠAè¿½åŠ åˆ°Bä¸­ï¼Œå¦‚ï¼š$newNode1.appendTo(â€œulâ€); prepend(content) $(A). prepend (B)è¡¨ç¤ºå°†Bå‰ç½®æ’å…¥åˆ°Aä¸­ï¼Œå¦‚ï¼š$(â€œulâ€). prepend ($newNode1); prependTo(content) $(A). prependTo (B)è¡¨ç¤ºå°†Aå‰ç½®æ’å…¥åˆ°Bä¸­ï¼Œå¦‚ï¼š$newNode1. prependTo (â€œulâ€); æ’å…¥åŒè¾ˆèŠ‚ç‚¹ è¯­æ³• åŠŸèƒ½ after(content) $(A).after (B)è¡¨ç¤ºå°†Bæ’å…¥åˆ°Aä¹‹åï¼Œå¦‚ï¼š$(â€œulâ€).after($newNode1); insertAfter(content) $(A). insertAfter (B)è¡¨ç¤ºå°†Aæ’å…¥åˆ°Bä¹‹åï¼Œå¦‚ï¼š$newNode1.insertAfter(â€œulâ€); before(content) $(A). before (B)è¡¨ç¤ºå°†Bæ’å…¥è‡³Aä¹‹å‰ï¼Œå¦‚ï¼š$(â€œulâ€).before($newNode1); insertBefore(content) $(A). insertBefore (B)è¡¨ç¤ºå°†Aæ’å…¥åˆ°Bä¹‹å‰ï¼Œå¦‚ï¼š$newNode1.insertBefore(â€œulâ€); æ›¿æ¢èŠ‚ç‚¹ replaceWith() replaceAll() å¤åˆ¶èŠ‚ç‚¹ clone() åˆ é™¤èŠ‚ç‚¹ remove()åˆ é™¤æ•´ä¸ªèŠ‚ç‚¹ empty()æ¸…ç©ºèŠ‚ç‚¹å†…å®¹ 123456789101112131415161718192021222324252627282930313233343536373839&lt;input&gt; &lt;button id=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;&lt;ul&gt; &lt;li&gt;é‡‘ç“¶æ¢…&lt;/li&gt; &lt;li&gt;è²‚è‰å¾€äº‹&lt;/li&gt; &lt;li&gt;ä¸œäº¬çƒ­ä¸çƒ­&lt;/li&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;#test&quot;).click(function()&#123; var bookname = $(&quot;input&quot;).val(); var newli = $(&quot;&lt;li&gt;&quot;+bookname+&quot;&lt;/li&gt;&quot;); //é€šè¿‡å·¥å‚å‡½æ•°ï¼Œåˆ›å»ºæ–°çš„lièŠ‚ç‚¹ /*æ·»åŠ å­èŠ‚ç‚¹*/ //$(&quot;ul&quot;).append(newli); // newliæ·»åŠ åˆ°ulåé¢ //newli.appendTo(&quot;ul&quot;); // newliæ·»åŠ åˆ°ulåé¢ //$(&quot;ul&quot;).prepend(newli); // newliæ·»åŠ åˆ°ulå‰é¢ //newli.prependTo(&quot;ul&quot;); /*æ·»åŠ åŒè¾ˆèŠ‚ç‚¹*/ //$(&quot;li:last&quot;).after( newli ); // newliæ·»åŠ åˆ°æœ€åçš„liçš„åé¢ //newli.insertAfter(&quot;li:last&quot;); //$(&quot;li:last&quot;).before(newli); //newliæ·»åŠ åˆ°æœ€åçš„liçš„å‰é¢ //newli.insertBefore(&quot;li:last&quot;); /*æ›¿æ¢èŠ‚ç‚¹*/ //$(&quot;li:eq(1)&quot;).replaceWith(newli); // å°†ç¬¬äºŒä¸ªliæ›¿æ¢æˆnewli //newli.replaceAll( &quot;li:eq(1)&quot; ); /*å¤åˆ¶èŠ‚ç‚¹*/ //$(&quot;li:first&quot;).clone().insertAfter(&quot;li:last&quot;); // å¤åˆ¶ç¬¬ä¸€ä¸ªliï¼Œå¹¶æ’å…¥åˆ°æœ€åä¸€ä¸ªliçš„åé¢ /*åˆ é™¤èŠ‚ç‚¹*/ //$(&quot;li:eq(1)&quot;).empty(); // æ¸…ç©ºäº†èŠ‚ç‚¹ä¸Šçš„æ–‡æœ¬ï¼ˆèŠ‚ç‚¹å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼‰ $(&quot;li:eq(1)&quot;).remove(); //åˆ é™¤èŠ‚ç‚¹ &#125;);&lt;/script&gt; 2.7 éå†èŠ‚ç‚¹2.7.1 ç¥–å…ˆå…ƒç´ ç”¨äºå‘ä¸Šéå† DOM æ ‘çš„æ–¹æ³• parent() è¿”å›è¢«é€‰å…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ ï¼Œä»…ä»…æ˜¯ä¸Šä¸€çº§ ï¼ˆæ‰¾çˆ¸çˆ¸ï¼‰ parents() è¿”å›è¢«é€‰å…ƒç´ çš„æ‰€æœ‰ç¥–å…ˆå…ƒç´ ï¼Œå®ƒä¸€è·¯å‘ä¸Šç›´åˆ°æ–‡æ¡£çš„æ ¹å…ƒç´ ï¼Œå¯ä»¥é€‰æ‹©è¾ˆåˆ† 123456789101112131415161718&lt;p&gt;&lt;button&gt;æµ‹è¯•&lt;/button&gt;&lt;/p&gt;&lt;ul&gt; &lt;li&gt;a&lt;/li&gt; &lt;li&gt; &lt;b&gt;b&lt;/b&gt; &lt;/li&gt; &lt;li&gt;c&lt;/li&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;button&quot;).click(function()&#123; //var x = $(&quot;b&quot;).parent().html(); // æ‰¾çˆ¸çˆ¸ //var x = $(&quot;b&quot;).parents(&quot;ul&quot;).html(); // æ‰¾ç¥–å®— ul //var x = $(&quot;b&quot;).parents(&quot;body&quot;).html(); // æ‰¾ç¥–å®— body alert( x ); &#125;);&lt;/script&gt; 2.7.2 åŒè¾ˆå…ƒç´  next() è·å–ç´§é‚»åŒ¹é…å…ƒç´ ä¹‹åçš„å…ƒç´  prev() è·å–ç´§é‚»åŒ¹é…å…ƒç´ ä¹‹å‰çš„å…ƒç´  siblings( [selector] ) è·å–ä½äºåŒ¹é…å…ƒç´ å‰é¢å’Œåé¢çš„æ‰€æœ‰åŒè¾ˆå…ƒç´  12345678910111213141516171819202122232425&lt;button&gt;æµ‹è¯•&lt;/button&gt;&lt;p&gt;p1&lt;/p&gt;&lt;ul&gt; &lt;li&gt;a&lt;/li&gt; &lt;li&gt; &lt;b&gt;b&lt;/b&gt; &lt;/li&gt; &lt;li&gt;c&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;p2&lt;/p&gt;&lt;p id=&quot;x&quot;&gt;p3&lt;/p&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;button&quot;).click(function()&#123; //var x = $(&quot;ul&quot;).next().text(); // ç´§é‚»çš„ä¸‹ä¸€ä¸ªå…ƒç´  //var x = $(&quot;ul&quot;).prev().text(); // ç´§é‚»çš„ä¸Šä¸€ä¸ªå…ƒç´  //var x = $(&quot;ul&quot;).siblings(&quot;#x&quot;).text(); // æ‰€æœ‰çš„å…„å¼Ÿä¸­ï¼Œid=xçš„ var arr = $(&quot;ul&quot;).siblings(); // ulçš„æ‰€æœ‰å…„å¼Ÿ,1ä¸ªbuttonï¼Œ3ä¸ªpï¼Œ2ä¸ªscript for(var i = 0 ;i&lt; arr.length ;i++)&#123; alert(arr[i]); &#125; &#125;);&lt;/script&gt; 2.7.3 åä»£å…ƒç´ åä»£æ˜¯å­ã€å­™ã€æ›¾å­™ç­‰ç­‰ children( [selector] ) æ–¹æ³•è¿”å›è¢«é€‰å…ƒç´ çš„æ‰€æœ‰ç›´æ¥å­å…ƒç´ ï¼Œâ€œå­©å­â€ 123456789101112131415&lt;button&gt;æµ‹è¯•&lt;/button&gt;&lt;ul&gt; &lt;li&gt;a&lt;/li&gt; &lt;li&gt;b&lt;/li&gt; &lt;li&gt;c&lt;/li&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;button&quot;).click(function()&#123; //var x = $(&quot;ul&quot;).children().text(); //æ‰€æœ‰å­èŠ‚ç‚¹ï¼šabc var x = $(&quot;ul&quot;).children(&quot;li:first&quot;).text(); //ulä¸­çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ alert(x); &#125;);&lt;/script&gt; find( é€‰æ‹©å™¨ ) æ–¹æ³•è¿”å›è¢«é€‰å…ƒç´ çš„åä»£å…ƒç´ ï¼Œä¸€è·¯å‘ä¸‹ç›´åˆ°æœ€åä¸€ä¸ªåä»£ã€‚ 12345678910111213141516171819&lt;button&gt;æµ‹è¯•&lt;/button&gt;&lt;ul&gt; &lt;li&gt;ç›˜å¤&lt;/li&gt; &lt;li&gt;èš©å°¤&lt;/li&gt; &lt;li&gt;åˆ‘å¤© &lt;p&gt;é¾šå·¥&lt;/p&gt; &lt;/li&gt; &lt;h3&gt;ç¥è&lt;/h3&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;button&quot;).click(function()&#123; //var x = $(&quot;ul&quot;).find(&quot;p&quot;).text(); //åœ¨ulä¸­æŸ¥æ‰¾på…ƒç´ ï¼Œå¿½ç•¥å±‚çº§ //var x = $(&quot;ul&quot;).find(&quot;h3&quot;).text(); //åœ¨ulä¸­æŸ¥æ‰¾h3å…ƒç´ ï¼Œå¿½ç•¥å±‚çº§ var x = $(&quot;ul&quot;).find().text(); // æ‰¾ä»€ä¹ˆï¼Ÿä¸çŸ¥é“ï¼ alert(x); &#125;);&lt;/script&gt; 2.7.4 å…ƒç´ çš„è¿‡æ»¤ first()ï¼šè¿‡æ»¤ç¬¬ä¸€ä¸ªå…ƒç´  last()ï¼šè¿‡æ»¤æœ€åä¸€ä¸ªå…ƒç´  eq(index)ï¼šè¿‡æ»¤åˆ°ä¸‹æ ‡ä¸ºindexçš„å…ƒç´  not()ï¼šé™¤äº†ä»€ä¹ˆä¹‹å¤–çš„å…ƒç´  is()ï¼šè¿”å›å¸ƒå°”ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯è¿™ç§å…ƒç´  12345678910111213141516171819&lt;button&gt;æµ‹è¯•&lt;/button&gt;&lt;ul&gt; &lt;li&gt;ç›˜å¤&lt;/li&gt; &lt;li&gt;èš©å°¤&lt;/li&gt; &lt;li&gt;åˆ‘å¤©&lt;/li&gt;&lt;/ul&gt;&lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(&quot;button&quot;).click(function()&#123; //var x = $(&quot;li&quot;).first().text(); // ç¬¬ä¸€ä¸ªli //var x = $(&quot;li&quot;).last().text(); // æœ€åä¸€ä¸ªli //var x = $(&quot;li&quot;).eq(1).text(); // ä¸‹æ ‡ä¸º1çš„li //var x = $(&quot;li&quot;).not(&quot;li:eq(1)&quot;).text(); // é™¤äº†ä¸‹æ ‡ä¸º1çš„å…¶ä½™æ‰€æœ‰li var x = $(&quot;li&quot;).parent().is(&quot;ul&quot;); // è¿”å›å¸ƒå°”å‹ï¼Œliçš„çˆ¶èŠ‚ç‚¹æ˜¯ä¸æ˜¯ul alert(x); &#125;);&lt;/script&gt; 3 æ¡ˆä¾‹3.1 æ‰‹é£ç´ç‰¹æ•ˆ12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;style&gt; dd&#123; display: none; /*éšè—å…ƒç´ */ &#125;&lt;/style&gt;&lt;body&gt; &lt;nav&gt; &lt;header&gt;æ‹‰å‹¾ç½‘&lt;/header&gt; &lt;ul&gt; &lt;li&gt; &lt;dl&gt; &lt;dt&gt;æ±‚èŒ&lt;/dt&gt; &lt;dd&gt;1.ç®€å†&lt;/dd&gt; &lt;dd&gt;2.é¢è¯•&lt;/dd&gt; &lt;dd&gt;3.å…¥èŒ&lt;/dd&gt; &lt;/dl&gt; &lt;/li&gt; &lt;li&gt; &lt;dl&gt; &lt;dt&gt;æ•™è‚²&lt;/dt&gt; &lt;dd&gt;1.çœ‹è§†é¢‘&lt;/dd&gt; &lt;dd&gt;2.åšä½œä¸š&lt;/dd&gt; &lt;dd&gt;3.24å°æ—¶åœ¨çº¿è¾…å¯¼&lt;/dd&gt; &lt;/dl&gt; &lt;/li&gt; &lt;li&gt; &lt;dl&gt; &lt;dt&gt;3Wåˆ›ä¸š&lt;/dt&gt; &lt;dd&gt;1.å¸®åŠ©å°ä¼ä¸š&lt;/dd&gt; &lt;dd&gt;2.å¤´è„‘é£æš´&lt;/dd&gt; &lt;dd&gt;3.èµšé’±å•¦&lt;/dd&gt; &lt;/dl&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/nav&gt; &lt;script src=&quot;js/jquery-3.4.1.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(&quot;nav dt&quot;).click(function()&#123; //æ‰€æœ‰çš„ddå…¨éƒ¨éƒ½é—­åˆä¸Šï¼Œé™¤äº†è‡ªå·±çš„å…„å¼Ÿ $(&quot;dd&quot;).not( $(this).siblings() ).slideUp(500); // è‡ªå·±çš„å…„å¼Ÿè¿›è¡Œåˆ‡æ¢ï¼Œæ˜¾ç¤ºé—­åˆä¸Šï¼Œé—­åˆçš„æ˜¾ç¤ºå‡ºæ¥ $(this).siblings().slideToggle(500); &#125;); &lt;/script&gt;&lt;/body&gt; 3.2 è´­ç‰©è½¦ç»“ç®— 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;style&gt; .jian,.jia&#123; border:1px solid #999; display: inline-block; /*è¶…é“¾æ¥aæ˜¯è¡Œå†…å…ƒç´ ï¼Œåªèƒ½è½¬æ¢æˆè¡Œå†…å—å…ƒç´ ï¼Œæ‰èƒ½æ”¹å˜å®½å’Œé«˜*/ width: 20px; height: 20px; text-align: center; text-decoration: none; &#125;&lt;/style&gt;&lt;body&gt; &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; width=&quot;400&quot;&gt; &lt;tr&gt; &lt;td&gt;å•†å“ç¼–å·&lt;/td&gt; &lt;td&gt;åç§°&lt;/td&gt; &lt;td&gt;å•ä»·&lt;/td&gt; &lt;td&gt;æ•°é‡&lt;/td&gt; &lt;td&gt;æ€»ä»·&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;ç‚¸é¦™è‚ &lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;td&gt; &lt;a href=&quot;#&quot; class=&quot;jian&quot;&gt;-&lt;/a&gt; &lt;span&gt;1&lt;/span&gt; &lt;a href=&quot;#&quot; class=&quot;jia&quot;&gt;+&lt;/a&gt; &lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;2&lt;/td&gt; &lt;td&gt;ç‹å…«&lt;/td&gt; &lt;td&gt;10&lt;/td&gt; &lt;td&gt; &lt;a href=&quot;#&quot; class=&quot;jian&quot;&gt;-&lt;/a&gt; &lt;span&gt;1&lt;/span&gt; &lt;a href=&quot;#&quot; class=&quot;jia&quot;&gt;+&lt;/a&gt; &lt;/td&gt; &lt;td&gt;10&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;3&lt;/td&gt; &lt;td&gt;æé¾™&lt;/td&gt; &lt;td&gt;1000&lt;/td&gt; &lt;td&gt; &lt;a href=&quot;#&quot; class=&quot;jian&quot;&gt;-&lt;/a&gt; &lt;span&gt;1&lt;/span&gt; &lt;a href=&quot;#&quot; class=&quot;jia&quot;&gt;+&lt;/a&gt; &lt;/td&gt; &lt;td&gt;1000&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;p style=&quot;width: 400px; text-align: right;&quot;&gt; æ€»ä»·ï¼š&lt;b style=&quot;color:red;&quot;&gt;111&lt;/b&gt; &lt;button&gt;æäº¤è®¢å•&lt;/button&gt; &lt;/p&gt;&lt;/body&gt;","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"JavaScriptè¯¦è§£","slug":"JavaScript","date":"2020-01-05T00:50:39.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2020/01/05/JavaScript/","link":"","permalink":"http://yournotes.cn/2020/01/05/JavaScript/","excerpt":"1. JavaScriptä»‹ç» è™½ç„¶æ˜¯javaä½œä¸ºå‰ç¼€ï¼Œä½†javaå’Œjavascriptçš„å…³ç³»ï¼Œå°±åƒè€å©†å’Œè€å©†é¥¼ã€å­™æ‚Ÿç©ºä¸å­™ä¸­å±±ä¹‹é—´çš„å…³ç³»ï¼Œæ²¡æœ‰ä¸€æ¯›é’±å…³ç³»ï¼","text":"1. JavaScriptä»‹ç» è™½ç„¶æ˜¯javaä½œä¸ºå‰ç¼€ï¼Œä½†javaå’Œjavascriptçš„å…³ç³»ï¼Œå°±åƒè€å©†å’Œè€å©†é¥¼ã€å­™æ‚Ÿç©ºä¸å­™ä¸­å±±ä¹‹é—´çš„å…³ç³»ï¼Œæ²¡æœ‰ä¸€æ¯›é’±å…³ç³»ï¼ ç½‘æ™¯å…¬å¸åœ¨Netscape2.0é¦–å…ˆæ¨å‡ºäº†JavaScript JavaScript çš„æ­£å¼åç§°æ˜¯ â€œECMAScriptâ€ï¼Œæ­¤æ ‡å‡†ç”± ECMA ç»„ç»‡å‘å±•å’Œç»´æŠ¤ï¼Œç®€ç§°â€œjsâ€ JavaScript æ˜¯ä¸€ç§ç½‘é¡µç¼–ç¨‹æŠ€æœ¯ï¼Œç”¨æ¥å‘ HTML é¡µé¢æ·»åŠ äº¤äº’è¡Œä¸º JavaScript æ˜¯ä¸€ç§åŸºäºå¯¹è±¡å’Œäº‹ä»¶é©±åŠ¨çš„è§£é‡Šæ€§è„šæœ¬è¯­è¨€ï¼Œç›´æ¥åµŒå…¥ HTML é¡µé¢ï¼Œç”±æµè§ˆå™¨è§£é‡Šæ‰§è¡Œä»£ç ï¼Œä¸è¿›è¡Œé¢„ç¼–è¯‘ 1.1 jsçš„ç‰¹ç‚¹ å¯ä»¥ä½¿ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å·¥å…·ç¼–å†™ï¼Œåªéœ€è¦æµè§ˆå™¨å°±å¯ä»¥æ‰§è¡Œç¨‹åº ï¼ˆåé¢ä¼šå­¦ä¹ ä¸ç”¨æµè§ˆå™¨ä¹Ÿèƒ½è¿è¡Œï¼‰ è§£é‡Šæ‰§è¡Œï¼šäº‹å…ˆä¸ç¼–è¯‘ï¼Œé€è¡Œæ‰§è¡Œ åŸºäºå¯¹è±¡ï¼šå†…ç½®å¤§é‡ç°æˆå¯¹è±¡ é€‚å®œï¼š å®¢æˆ·ç«¯æ•°æ®è®¡ç®— å®¢æˆ·ç«¯è¡¨å•åˆæ³•æ€§éªŒè¯ æµè§ˆå™¨äº‹ä»¶çš„è§¦å‘ ç½‘é¡µç‰¹æ®Šæ˜¾ç¤ºæ•ˆæœåˆ¶ä½œ 1.2 jsçš„ç»„æˆ ECMAScriptï¼šå®šä¹‰æ ¸å¿ƒè¯­æ³•ï¼Œå…³é”®å­—ï¼Œè¿ç®—ç¬¦ï¼Œæ•°æ®ç±»å‹ç­‰ç³»åˆ—æ ‡å‡† DOMï¼šæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå°†ä¸€ä¸ªhtmlé¡µé¢çš„æ‰€æœ‰èŠ‚ç‚¹çœ‹æˆæ˜¯ä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡ã€‚æ›´æœ‰å±‚æ¬¡æ„Ÿçš„ç®¡ç†æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚ BOMï¼šæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œæ˜¯å¯¹æµè§ˆå™¨çª—å£è¿›è¡Œè®¿é—®å’Œæ“ä½œã€‚ä½¿ç”¨ BOMï¼Œå¼€å‘è€…å¯ä»¥ç§»åŠ¨çª—å£ã€æ”¹å˜çŠ¶æ€æ ä¸­çš„æ–‡æœ¬ä»¥åŠæ‰§è¡Œå…¶ä»–ä¸é¡µé¢å†…å®¹ä¸ç›´æ¥ç›¸å…³çš„åŠ¨ä½œã€‚ä½¿ BOM ç‹¬æ ‘ä¸€å¸œä¸”åˆå¸¸å¸¸ä»¤äººæ€€ç–‘çš„åœ°æ–¹åœ¨äºï¼Œå®ƒåªæ˜¯ JavaScript çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ²¡æœ‰ä»»ä½•ç›¸å…³çš„å‡†ã€‚ å¼¹å‡ºæ–°çš„æµè§ˆå™¨çª—å£ ç§»åŠ¨ã€å…³é—­æµè§ˆå™¨çª—å£ä»¥åŠè°ƒæ•´çª—å£å¤§å° æä¾› Web æµè§ˆå™¨è¯¦ç»†ä¿¡æ¯çš„å®šä½å¯¹è±¡ æä¾›ç”¨æˆ·å±å¹•åˆ†è¾¨ç‡è¯¦ç»†ä¿¡æ¯çš„å±å¹•å¯¹è±¡ å¯¹ cookie çš„æ”¯æŒ IE æ‰©å±•äº† BOMï¼ŒåŠ å…¥äº† ActiveXObject ç±»ï¼Œå¯ä»¥é€šè¿‡ JavaScript å®ä¾‹åŒ– ActiveXå¯¹è±¡ï¼Œè¿›è€Œå®ç°ajaxå±€éƒ¨åˆ·æ–°æŠ€æœ¯ 2. HTMLä¸JavaScriptç»“åˆæ–¹å¼ä¸CSSä¸€æ ·ä½¿ç”¨JSçš„ä¹Ÿæ˜¯æœ‰ä¸‰ç§æ–¹å¼ 2.1 è¡Œå†…è„šæœ¬ç›´æ¥ç¼–è¾‘åœ¨æ ‡ç­¾é‡Œé¢åªå¯¹å½“å‰æ ‡ç­¾æœ‰æ•ˆï¼Œæ¯”å¦‚ä¸‹é¢çš„æŒ‰é’®ï¼šonclick&#x3D;â€xxxâ€ 123&lt;button onclick=&quot;aler(å¼¹æ¡†æµ‹è¯•)&quot;&gt; ç‚¹æˆ‘ä¸€ä¸‹&lt;/button&gt; 2.2 å†…éƒ¨è„šæœ¬ ä½¿ç”¨&lt;script&gt; &lt;/script&gt; æ ‡å‡†æ˜¯å†™åœ¨headå’Œbodyä¹‹é—´ï¼ˆè„–å­ä½ç½®ï¼‰ï¼Œä½†å…¶å®åªè¦å†™åœ¨htmlæ–‡ä»¶å†…éƒ¨å°±å¯ä»¥ï¼Œæ— è®ºä»€ä¹ˆä½ç½®&lt;html&gt;å¤–ï¼Œ&lt;p&gt;&lt;/p&gt;å†…éƒ¨ï¼Œéƒ½å¯ä»¥ã€‚ 12345&lt;body&gt; &lt;script&gt; alert(&quot;å¼¹æ¡†&quot;); &lt;/script&gt; &lt;/body&gt; 2.3 å¤–éƒ¨è„šæœ¬ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•js åœ¨jsç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåç¼€åæ˜¯.js åœ¨htmlé¡µé¢ä¸­ï¼Œä½¿ç”¨ï¼š 1&lt;script src=&quot;js/xx.js&quot;&gt;&lt;/script&gt; ä»¥ä¸Šä½¿ç”¨è„šæœ¬çš„ä¸‰ç§æ–¹å¼çš„ä¼˜å…ˆçº§ï¼Œè°åœ¨ä¸Šï¼Œè°å…ˆæ‰§è¡Œã€‚å› ä¸ºæ˜¯è§£é‡Šæ€§è¯­è¨€ã€‚ 3. JavaScriptçš„ä½¿ç”¨3.1 å˜é‡ å› ä¸ºjsæ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥ï¼Œåœ¨å®šä¹‰å˜é‡çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æ˜¯var å£°æ˜å˜é‡ï¼š var x ; var x,y; æ•°å€¼ç±»å‹ï¼šnumber ä¸åŒºåˆ†æ•´å‹æ•°å€¼å’Œæµ®ç‚¹å‹æ•°å€¼ æ‰€æœ‰æ•°å­—éƒ½é‡‡ç”¨ 64 ä½æµ®ç‚¹æ ¼å¼å­˜å‚¨ï¼Œç±»ä¼¼äºdouble æ ¼å¼ å­—ç¬¦ä¸²ï¼šstring é¦–å°¾ç”±å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·1var a = &quot;æ¬¢è¿æ¥åˆ°JavaScriptä¸–ç•Œ&quot; å¸ƒå°”ç±»å‹ ä»…æœ‰ä¸¤ä¸ªå€¼ï¼štrueå’Œfalseä¹Ÿä»£è¡¨1å’Œ0 åœ¨å®é™…è¿ç®—ä¸­true&#x3D;1ï¼Œfalse&#x3D;0 3.1.1 è‡ªåŠ¨ç±»å‹è½¬æ¢1234æ•°å­— + å­—ç¬¦ä¸²ï¼šæ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸² 10+â€™aâ€™ -&gt; 10a æ•°å­— + å¸ƒå°”å€¼ï¼štrueè½¬æ¢ä¸º1ï¼Œfalseè½¬æ¢ä¸º0 true+5-&gt;6 å­—ç¬¦ä¸² + å¸ƒå°”å€¼ï¼šå¸ƒå°”å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²trueæˆ–false true+â€™aâ€™-&gt;truea å¸ƒå°”å€¼ + å¸ƒå°”å€¼ï¼šå¸ƒå°”å€¼è½¬æ¢ä¸ºæ•°å€¼1æˆ–0 true+true-&gt;2 3.1.2 æ•°æ®ç±»å‹è½¬æ¢å‡½æ•° parseIntï¼šå¼ºåˆ¶è½¬æ¢æˆæ•´æ•° å¦‚æœä¸èƒ½è½¬æ¢ï¼Œåˆ™è¿”å› NaN ï¼ˆNaN å±æ€§æ˜¯ä»£è¡¨éæ•°å­—å€¼çš„ç‰¹æ®Šå€¼ã€‚è¯¥å±æ€§ç”¨äºæŒ‡ç¤ºæŸä¸ªå€¼ä¸æ˜¯æ•°å­—ï¼‰ ä¾‹å¦‚ï¼šparseInt(â€œ6.32â€)&#x3D;6 parseFloatï¼šå¼ºåˆ¶è½¬æ¢æˆæµ®ç‚¹æ•° å¦‚æœä¸èƒ½è½¬æ¢ï¼Œåˆ™è¿”å› NaN ä¾‹å¦‚ï¼šparseFloat(â€œ6.32â€)&#x3D;6.32 typeofï¼šæŸ¥è¯¢æ•°å€¼å½“å‰ç±»å‹ï¼Œè¿”å› string &#x2F; number &#x2F; boolean &#x2F; object ä¾‹å¦‚ï¼štypeof(â€œtestâ€+3)&#x3D;&#x3D;â€stringâ€ 3.1.3 null ä¸undefined null åœ¨ç¨‹åºä¸­ä»£è¡¨â€æ— å€¼â€æˆ–è€…â€æ— å¯¹è±¡â€ å¯ä»¥é€šè¿‡ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ null æ¥æ¸…é™¤å˜é‡çš„å†…å®¹ undefinded å£°æ˜äº†å˜é‡ä½†ä»æœªèµ‹å€¼æˆ–è€…å¯¹è±¡å±æ€§ä¸å­˜åœ¨ 3.1.4 ç®—æœ¯è¿ç®— åŠ (ï¼‹)ã€ å‡(ï¼)ã€ ä¹˜( * ) ã€é™¤( &#x2F; ) ã€ä½™æ•°( % ) -å¯ä»¥è¡¨ç¤ºå‡å·ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè´Ÿå·ï¼Œå¦‚ï¼šx &#x3D; -y +å¯ä»¥è¡¨ç¤ºåŠ æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²çš„è¿æ¥ é€’å¢( ++ ) ã€é€’å‡( â€“ ) i++ ç›¸å½“äº i&#x3D;i+1 iâ€“ ç›¸å½“äº i&#x3D;i-1 3.1.5 å…³ç³»è¿ç®— ä¸¥æ ¼ç›¸ç­‰ï¼š&#x3D;&#x3D;&#x3D; ç±»å‹ç›¸åŒ æ•°å€¼ç›¸åŒ éä¸¥æ ¼ç›¸ç­‰ï¼š&#x3D;&#x3D; 123456var a = &quot;10&quot;; var b = 10; if (a == b) alert(&quot;equal&quot;); if (a === b) alert(&quot;same&quot;); 3.1.6 é€»è¾‘è¿ç®— é€»è¾‘éï¼ˆ!ï¼‰ã€é€»è¾‘ä¸ï¼ˆ&amp;&amp;ï¼‰ã€é€»è¾‘æˆ–ï¼ˆ||ï¼‰ é€»è¾‘è¿ç®—çš„æ“ä½œæ•°å‡ä¸º boolean è¡¨è¾¾å¼ æˆ‘è¦åƒä¸¤ç¢—æ‹‰é¢æˆ–è€…10ä¸ªåŒ…å­æ‰èƒ½åƒé¥±ï¼é—®é¢˜æ˜¯ï¼Œæˆ‘åªåƒä¸¤ç¢—é¢ï¼Œé¥±äº†ï¼ æˆ‘åªåƒ10ä¸ªåŒ…å­ï¼Œé¥±äº† æˆ‘è¦åƒä¸¤ç¢—æ‹‰é¢å¹¶ä¸”10ä¸ªåŒ…å­æ‰èƒ½åƒé¥±ï¼é—®é¢˜æ˜¯ï¼Œæˆ‘åªåƒä¸¤ç¢—é¢ï¼Œæ²¡é¥±ï¼ æˆ‘åªåƒ10ä¸ªåŒ…å­ï¼Œæ²¡é¥± 3.1.7 æ§åˆ¶è¯­å¥12345ifï¼ˆå…³ç³»è¡¨è¾¾å¼ï¼‰ &#123; // è¯­å¥å— 1 &#125;else &#123; // è¯­å¥å— 2 &#125; 123456789if (è¡¨è¾¾å¼1) &#123; // è¯­å¥1; &#125;else if (è¡¨è¾¾å¼2)&#123; // è¯­å¥2; &#125;else if (è¡¨è¾¾å¼3)&#123; // è¯­å¥3; &#125;else&#123; // è¯­å¥4; &#125; 12345678910switch (è¡¨è¾¾å¼) &#123; case å€¼1: // è¯­å¥1; break; case å€¼2: // è¯­å¥2; break; default: // è¯­å¥4; &#125; 123for (var i=1 ; i&lt;=5 ; i++)&#123; alert(i); &#125; 123while (æ¡ä»¶)&#123; // è¯­å¥1; ... &#125; 3.2 å¸¸ç”¨å­—ç¬¦ä¸²API length:è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆå­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ä¸ªæ•°ï¼‰ å±æ€§ï¼Œæ²¡æœ‰å°æ‹¬å·12var str = &quot;hello&quot;;console.log(str.length); toUpperCase&#x2F;toLowerCase :è½¬å¤§å°å†™123var name = &quot;AngierSun&quot;; console.log( &quot;å¤§å†™ï¼š&quot;+name.toUpperCase() ); console.log( &quot;å°å†™ï¼š&quot;+name.toLowerCase() ); charAt(ä¸‹æ ‡) ï¼š è¿”å›æŸä¸ªä¸‹æ ‡ä¸Šçš„å­—ç¬¦123456var str1 = &quot;javascriptç½‘é¡µæ•™ç¨‹&quot;; var str2 = str1.charAt(12); // ä¸‹æ ‡12ä¸Šçš„å­—ç¬¦ console.log(str2); //æ•™ var str3 = str1.charCodeAt(12); console.log(str3); //25945:ï¼ˆæ±‰å­—â€œæ•™â€åœ¨unicodeç¼–ç ä¸­çš„ç¼–å·ï¼‰ indexof(å­—ç¬¦)ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­å­—ç¬¦å‡ºç°çš„é¦–æ¬¡ä¸‹æ ‡ lastIndexof(å­—ç¬¦)ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­å­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡123456var str1 = &quot;javascriptç½‘é¡µæ•™ç¨‹&quot;; var str2 = str1.indexOf(&quot;a&quot;); console.log(str2); // 1 , aå­—ç¬¦åœ¨str1ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ var str3 = str1.lastIndexOf(&quot;a&quot;); //3,aå­—ç¬¦åœ¨str1ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ console.log(str3); substring(å¼€å§‹,ç»“æŸ)ï¼šæˆªå–å­—ç¬¦ä¸²ä¸­ä¸€éƒ¨åˆ†ï¼ˆç»“æŸæ˜¯ä¸åŒ…å«çš„ï¼‰ 123var str1 = &quot;abcdefgh&quot;; var str2 = str1.substring(2,4); console.log(str2); //cdï¼Œä»2å¼€å§‹ï¼ˆåŒ…å«ï¼‰ï¼Œ4ç»“æŸï¼ˆä¸åŒ…å«ï¼‰ replace(æ—§çš„,æ–°çš„)ï¼šå°†å­—ç¬¦ä¸²ä¸­çš„æ—§å­—ç¬¦æ›¿æ¢æˆæ–°å­—ç¬¦123var str1 = &quot;abcde&quot;; var str2 = str1.replace(&quot;cd&quot;,&quot;XXX&quot;); console.log(str2); // abXXXeï¼Œå°†str1ä¸­çš„cdæ›¿æ¢æˆXXX split(åˆ†å‰²çš„èŠ‚ç‚¹)ï¼šä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡å‰²æˆNä¸ªå°å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯æ•°ç»„ç±»å‹1234var str1 = &quot;ä¸€,äºŒ,ä¸‰,å››,äº”&quot;;var arr = str1.split(&quot;,&quot;); // å°†str1 ä»¥é€—å·è¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²æˆNä»½ï¼Œæ‰€ä»¥è¿”å›çš„ç»“æœä¸€å®š æ˜¯æ•°ç»„ç»“æ„ console.log( &quot;å…±åˆ†å‰²æˆï¼š&quot;+arr.length+&quot;ä»½&quot; ); console.log( &quot;ç¬¬ä¸‰ä»½æ˜¯ï¼š&quot; + arr[2] ); // ä¸‰ 3.3 æ•°ç»„3.3.1 åˆ›å»ºæ•°ç»„1var arr = new Array(); 3.3.2 åˆå§‹åŒ–æ•°ç»„çš„ä¸‰ç§æ–¹å¼123456789101112// ç¬¬ä¸€ç§ var arr1 = new Array(); arr1[0] = 110; arr1[1] = 119; arr1[2] = 120; // ç¬¬äºŒç§ var arr1 = new Array(10,&quot;a&quot;,true); // ç¬¬ä¸‰ç§ var arr1 = [10,&quot;a&quot;,true]; for (var i = 0; i &lt; arr1.length; i++) &#123; console.log(arr1[i]); &#125; 3.3.3 æ•°ç»„çš„å¸¸ç”¨çš„æ–¹æ³• toString(): å°†æ•°ç»„è½¬å­—ç¬¦ä¸² 12345var arr = [1,2,3,4]; console.log(&quot;ç±»å‹ä¸ºï¼š&quot; + typeof( arr ) ); var str = arr.toString(); // å°†æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸² console.log( str +&quot;,ç±»å‹ä¸ºï¼š&quot; + typeof( str ) ); join(è¿æ¥ç¬¦å·)ï¼šå°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç”¨è¿æ¥ç¬¦å·è¿æ¥æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚ 123var arr = [1,2,3,4]; var str = arr.join(&quot;-&quot;); // å°†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ç”¨-è¿›è¡Œè¿æ¥ï¼Œå¹¶å½¢æˆä¸€ä¸ªå…¨æ–°çš„å­—ç¬¦ä¸² console.log( str +&quot;,ç±»å‹ä¸ºï¼š&quot; + typeof( str ) ); concat(æ–°å…ƒç´ )ï¼šå°†åŸæ¥çš„æ•°ç»„è¿æ¥æ–°å…ƒç´ ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚ 1234var arr = [1,2,3,4]; var arrnew = arr.concat(5,6); // åœ¨arræ•°ç»„çš„åé¢æ·»åŠ æ–°çš„å…ƒç´ ï¼Œå½¢æˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œä½†æ˜¯ åŸæ•°ç»„æ˜¯ä¸å˜çš„ console.log( arrnew +&quot;,ç±»å‹ä¸ºï¼š&quot; + typeof( arrnew ) ); console.log(&quot;åŸæ•°ç»„ï¼š&quot; + arr); slice(å¼€å§‹ï¼Œç»“æŸ)ï¼šåœ¨æ•°ç»„ä¸­æå–ä¸€éƒ¨åˆ†ï¼Œå½¢æˆæ–°çš„æ•°ç»„ã€‚ 1,2,3,4,5 slice(2,4) ç»“æœï¼š3,4 123var arr = [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;,&#x27;f&#x27;,&#x27;g&#x27;,&#x27;h&#x27;]; var arrnew = arr.slice( 2,4 ); // åœ¨arræ•°ç»„ä¸­æˆªå–ï¼Œä»2å¼€å§‹ï¼ˆåŒ…å«ï¼‰ï¼Œ4ç»“æŸï¼ˆä¸åŒ… å«ï¼‰console.log( arrnew ); // cd reverse()ï¼šæ•°ç»„çš„åè½¬ï¼ˆå€’åºï¼‰ 1234var arr = [31,12,111,444]; console.log( arr.toString() ); arr.reverse(); // å°†æ•°ç»„ä¸­çš„å…ƒç´ å€’ç½® console.log( arr.toString() ); sort()ï¼šæ•°ç»„æ’åº arr.sort() å­—ç¬¦æ’åº 123var arr = [31,12,111,444]; arr.sort(); // å­—ç¬¦æ’åºï¼ˆä¸ä¼šæŒ‰ç…§å­—é¢é‡çš„å¤§å°ï¼‰ console.log( arr ); arr.sort(func) æ•°å€¼æ’åº 123456var arr = [31,12,111,444]; arr.sort( f ); // æ•°å­—æ’åºï¼ˆä¼šæŒ‰ç…§å­—é¢é‡çš„å¤§å°ï¼‰ console.log( arr ); // å®šä¹‰æ’åºå‡½æ•° function f(a,b)&#123; return a-b; &#125; 3.4 Mathæ•°å­¦å¯¹è±¡ Math å¯¹è±¡ç”¨äºæ‰§è¡Œæ•°å­¦ä»»åŠ¡ æ²¡æœ‰æ„é€ å‡½æ•° Math() æ— éœ€åˆ›å»ºï¼Œç›´æ¥æŠŠ Math ä½œä¸ºå¯¹è±¡ä½¿ç”¨å°±å¯ä»¥è°ƒç”¨å…¶æ‰€æœ‰å±æ€§å’Œæ–¹æ³• 1234// è¿”å›0-9ä¹‹é—´ä»»æ„ä¸€ä¸ªéšæœºæ•°å­— var i = Math.random() * 10; var j = Math.floor(i); console.log(j); 3.5 Numberå¯¹è±¡Number.fixed(2); è‡ªå¸¦å››èˆäº”å…¥æŠ€èƒ½ 12345var n = new Number( 12.345 ); var n1 = n.toFixed(2); // 12.35ï¼Œå›ºå®šä¸¤ä½å°æ•°ï¼Œç¬¬ä¸‰ä½å°æ•°å››èˆäº”å…¥ console.log( n1 ); var x = new Number( 12.3 ); var n2 = x.toFixed(2); // 12.30ï¼Œå›ºå®šä¸¤ä½å°æ•°ï¼Œä½æ•°ä¸å¤Ÿï¼Œ0æ¥è¡¥é½ console.log( n2 ); 3.6 æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²æ‰§è¡Œæ¨¡å¼åŒ¹é…çš„å¼ºå¤§å·¥å…· 12var reg1 = /^\\d&#123;3,6&#125;$/; // åŒ¹é…çº¯æ•°å­—3-6ä¸ª var reg2 = new RegExp(â€œ^\\\\d&#123;3,6&#125;$&quot;); 123456789101112131415161718// æ–¹å¼1 var age = &quot;18&quot;; // åˆ¤æ–­ï¼š1-3ä½çº¯æ•°å­— var reg = /^\\d&#123;1,3&#125;$/; // ä»¥/^å¼€å§‹ï¼Œä¸­é—´å†™æ­£åˆ™å†…å®¹ï¼Œä»¥$/ç»“æŸ var b = reg.test(age); // éªŒè¯ageå˜é‡çš„æ˜¯å¦ç¬¦åˆregçš„åŒ¹é… if (b == true) &#123; console.log(&quot;éªŒè¯é€šè¿‡ï¼&quot;); &#125; else &#123; console.log(&quot;æ ¼å¼é”™è¯¯&quot;);&#125;// æ–¹å¼2 var name = &quot;abc123&quot;; // å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼ˆç‰¹æ®Šå­—ç¬¦ä¸èƒ½å‡ºç°ï¼‰, 5~8ä½ var reg = new RegExp(&quot;^[a-zA-Z0-9]&#123;5,8&#125;$&quot;); // ä»¥^å¼€å§‹ï¼Œä¸­é—´å†™æ­£åˆ™å†…å®¹ï¼Œä»¥$ç»“æŸ if (reg.test(name)) &#123; console.log(&quot;éªŒè¯é€šè¿‡ï¼&quot;); &#125; else &#123; console.log(&quot;æ ¼å¼é”™è¯¯&quot;); &#125; 3.7 æ—¥æœŸå¯¹è±¡123456789var time = new Date(); console.log( time ); // Tue Jul 14 2020 11:09:46 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) var year = time.getFullYear(); // å¹´ä»½ var month = time.getMonth() + 1; //æœˆä»½ä»0å¼€å§‹ï¼Œ11ç»“æŸï¼Œæ‰€ä»¥å›½å†…ä¹ æƒ¯è¦+1 var day = time.getDate(); // å‡ å· var hour = time.getHours(); // å‡ ç‚¹ var mm = time.getMinutes(); // åˆ†é’Ÿ var s = time.getSeconds(); //ç§’ var ms = time.getMilliseconds(); // æ¯«ç§’ï¼Œ 1000æ¯«ç§’ = 1ç§’ var timestr = year+&quot;å¹´&quot;+month+&quot;æœˆ&quot;+day+&quot;å· &quot;+hour+&quot;ç‚¹&quot;+mm+&quot;åˆ†&quot;+s+&quot;ç§’&quot;+ms+&quot;æ¯«ç§’&quot;; console.log( timestr ); 3.8 å‡½æ•° ä½¿ç”¨å…³é”®å­—functionå®šä¹‰å‡½æ•° 123function å‡½æ•°å( å½¢å‚åˆ—è¡¨ )&#123; // å‡½æ•°ä½“ return è¿”å›å€¼; &#125; å‡½æ•°å£°æ˜åä¸ä¼šç«‹å³æ‰§è¡Œï¼Œä¼šåœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™è°ƒç”¨åˆ°ã€‚ æ³¨æ„ï¼š å½¢å‚ï¼šä¸€å®šä¸è¦å¸¦æ•°æ®ç±»å‹ åˆ†å·æ˜¯ç”¨æ¥åˆ†éš”å¯æ‰§è¡ŒJavaScriptè¯­å¥ã€‚ ç”±äºå‡½æ•°å£°æ˜ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œè¯­å¥ï¼Œæ‰€ä»¥ä¸ä»¥åˆ†å·ç»“æŸã€‚ 3.8.1 æ— è¿”å›å€¼12345function qiuhe(a, b) &#123; var he = a + b; console.log(&quot;ä¸¤æ•°ä¹‹å’Œï¼š&quot; + he); &#125;qiuhe(3,4); 3.8.2 æœ‰è¿”å›å€¼123456function qiuhe(a, b) &#123; var he = a + b; return &quot;ä¸¤æ•°ä¹‹å’Œï¼š&quot; + he; &#125;var s = qiuhe(3,4); console.log( s ); 3.8.3 å‚æ•°å¯¹è±¡åœ¨å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å‚æ•°åˆ—è¡¨çš„å±æ€§ 1234function func(a,b,c)&#123; console.log( arguments.length ); // è·å¾—å‚æ•°çš„ä¸ªæ•° console.log( arguments[1] ); // è·å¾—ä¸‹æ ‡ä¸º1çš„å‚æ•° &#125; 3.8.4 æ„é€ å‡½æ•°å‡½æ•°åŒæ ·å¯ä»¥é€šè¿‡å†…ç½®çš„ JavaScript å‡½æ•°æ„é€ å™¨ï¼ˆFunction()ï¼‰å®šä¹‰ 123var myFunction = new Function(&quot;a&quot;, &quot;b&quot;, &quot;return a * b&quot;); var x = myFunction(4, 3); console.log(x); æ³¨ï¼š ä¸Šè¿°å‡½æ•°ä»¥åˆ†å·ç»“å°¾ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ‰§è¡Œè¯­å¥ã€‚ 3.8.5 æ„é€ å‡½æ•°æ²¡æœ‰åç§°çš„å‡½æ•° 1234var fn = function(a, b) &#123;// æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œåº”è¯¥ç”¨ä¸€ä¸ªå˜é‡æ¥æ¥æ”¶ return a * 10 + b; &#125;;console.log( fn(3, 4) ); 3.8.6 å…¨å±€å‡½æ•° isNaNï¼šæ£€æŸ¥å…¶å‚æ•°æ˜¯å¦æ˜¯éæ•°å­—å€¼ 1234567console.log( isNaN( 123 ) ); // æ•°å­—ï¼Œfalse console.log( isNaN( &quot;hello&quot; ) ); // éæ•°å­—ï¼Œtrue console.log( isNaN( 4-1 ) ); // æ•°å­—ï¼Œfalse console.log( isNaN( 123 ) ); // æ•°å­—ï¼Œfalse console.log( isNaN( -10 ) ); // æ•°å­—ï¼Œfalse console.log( isNaN( &quot;123&quot; ) ); // æ•°å­—ï¼Œfalse console.log( isNaN( &quot;1a23&quot; ) ); // éæ•°å­—ï¼Œtrue evalï¼šç”¨æ¥è½¬æ¢å­—ç¬¦ä¸²ä¸­çš„è¿ç®— 12var str = &quot;1+3&quot;; console.log( str ); // 1+3 , +ä¼šè®¤å®šä¸ºä¸€ç§å­—ç¬¦ç¬¦å·è€Œå·²ï¼Œæ²¡æœ‰åŠ æ³•çš„ä½œç”¨ console.log( eval( str ) ); // è®©å­—ç¬¦ä¸²ä¸­çš„è¿ç®—ç¬¦å·ç”Ÿæ•ˆ encodeURI ä¸ decodeURI 12345var name = &quot;æœ¨ç“œç…²é¸¡è„š&quot;; console.log( &quot;è½¬ç å‰ï¼š&quot; + name ); name = encodeURI(name); console.log( &quot;è½¬ç åï¼š&quot; + name ); name = decodeURI(name); console.log( &quot;è§£ç åï¼š&quot; + name ); 3.8.7 é—­åŒ… é—­åŒ…çš„æ¦‚å¿µï¼šæŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°ä¸­åŒ…å«å¦ä¸€ä¸ªå‡½æ•°ã€‚ é—­åŒ…çš„ä½œç”¨ï¼šè®¿é—®å‡½æ•°å†…éƒ¨å˜é‡ã€ä¿æŒå‡½æ•°åœ¨ç¯å¢ƒä¸­ä¸€ç›´å­˜åœ¨ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å¤„ç†ï¼›ç®€å•åœ°è¯´ï¼šå°±æ˜¯åœ¨å‡½æ•°çš„å±€éƒ¨èŒƒå›´å†…å£°æ˜ä¸€ä¸ªå°é—­çš„ç¯å¢ƒï¼Œæ­¤ç¯å¢ƒä¸ä¼šè¢«åƒåœ¾å›æ”¶æ¢æµ‹åˆ°ã€‚ä¿è¯äº†æ•°æ®çš„å®‰å…¨å”¯ä¸€æ€§æƒ³äº†è§£é—­åŒ…ï¼Œé¦–å…ˆè¦äº†è§£ä»€ä¹ˆæ˜¯å…¨å±€å˜é‡ï¼Œä»€ä¹ˆæ˜¯å±€éƒ¨å˜é‡ 123456789101112a = 10; // å…¨å±€å˜é‡ï¼Œå£°æ˜çš„æ—¶å€™å¯ä»¥ä¸ä½¿ç”¨var function test1()&#123; b = 20; // ä¸é€‚ç”¨varå£°æ˜çš„å˜é‡ï¼Œå°±æ˜¯å…¨å±€å˜é‡ var c = 30; // ç”¨varå£°æ˜ï¼Œå¹¶ä¸”åœ¨å‡½æ•°çš„å†…éƒ¨ã€‚è¿™æ ·çš„å˜é‡å«åšå±€éƒ¨å˜é‡ï¼Œæœ‰æ•ˆèŒƒå›´åªèƒ½ åœ¨å…¶å£°æ˜çš„å‡½æ•°å†…éƒ¨ console.log(c); &#125;function test2()&#123; console.log(c); //c is not defined (cå˜é‡æ²¡æœ‰å®šä¹‰) &#125;test1(); test2(); éœ€æ±‚ï¼šç»Ÿè®¡æ–¹æ³•æ‰§è¡Œäº†å¤šå°‘æ¬¡ 1234567function test1()&#123; count++; // è‡ªå¢+1 &#125;test1(); test1(); test1(); console.log( count ); è°éƒ½å¯ä»¥è®¿é—®countï¼Œæ‰€ä»¥countå˜é‡å¹¶ä¸å®‰å…¨ï¼Œå› ä¸ºæ˜¯å…¨å±€å˜é‡ã€‚ å¦‚ä½•æ‰èƒ½å®‰å…¨å‘¢ï¼Ÿå°†countå£°æ˜ä¸ºå±€éƒ¨å˜é‡ 12345678function test1()&#123; var count = 0; //å±€éƒ¨å˜é‡ return count++; //å¤–éƒ¨æ— æ³•è®¿é—®countï¼Œåªèƒ½é€šè¿‡returnæ‰èƒ½å°†countå˜é‡è¿”å›ï¼Œå¹¶è¾“ å‡º &#125;test1(); test1(); test1(); console.log( test1() ); // æ¯æ¬¡è°ƒç”¨æ–¹æ³•ï¼Œé¦–å…ˆå°±æ˜¯å°†å˜é‡è¿˜åŸä¸º0 ç»“æœä¸€ç›´æ˜¯0ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨test1()ï¼Œæ–¹æ³•ä½“çš„ç¬¬ä¸€å¥ä»£ç å°±æ˜¯è¿˜åŸï¼Œæ— è®ºæ›¾ç»çš„å€¼æ˜¯å¤šå°‘ã€‚ çªå‘å¥‡æƒ³ï¼Œå¦‚æœåœ¨test1()å‡½æ•°é‡Œé¢ï¼Œå†åµŒå¥—ä¸€ä¸ªå‡½æ•°ï¼Œjsæ˜¯æ”¯æŒå‡½æ•°åµŒå¥—çš„ 123456789101112function test1()&#123; var count = 0; //å±€éƒ¨å˜é‡ function jia()&#123; return count++; &#125; jia(); return count; &#125; test1(); test1(); test1(); console.log( test1() ); // æ¯æ¬¡è°ƒç”¨æ–¹æ³•ï¼Œé¦–å…ˆå°±æ˜¯å°†å˜é‡è¿˜åŸä¸º0 å¦‚æœæ¯æ¬¡åªè°ƒç”¨test1()é‡Œé¢çš„jia()å°±å¥½äº†ã€‚okï¼Œé—­åŒ…å¸®ä½ è§£å†³æ­¤é—®é¢˜ï¼ 1234567891011function test1()&#123; var count = 0; //å±€éƒ¨å˜é‡ function jia()&#123; return count+=1; &#125; return jia; &#125;var fn = test1(); // fn =&gt; function jia()&#123;return count+=1; &#125; fn(); fn(); console.log( fn() ); // æ¯æ¬¡è°ƒç”¨æ–¹æ³•ï¼Œé¦–å…ˆå°±æ˜¯å°†å˜é‡è¿˜åŸä¸º0 é—­åŒ…æ˜¯ä¸€ç§ä¿æŠ¤ç§æœ‰å˜é‡çš„æœºåˆ¶ï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶å½¢æˆç§æœ‰çš„ä½œç”¨åŸŸï¼Œä¿æŠ¤é‡Œé¢çš„ç§æœ‰å˜é‡ä¸ å—å¤–ç•Œå¹²æ‰°ã€‚ ç›´è§‚çš„è¯´å°±æ˜¯å½¢æˆä¸€ä¸ªä¸é”€æ¯çš„æ ˆç¯å¢ƒã€‚ é—­åŒ…çš„ä¼˜ç‚¹ï¼š æ–¹ä¾¿è°ƒç”¨ä¸Šä¸‹æ–‡ä¸­å£°æ˜çš„å±€éƒ¨å˜é‡ é€»è¾‘ç´§å¯†ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å†åˆ›å»ºä¸ªå‡½æ•°ï¼Œé¿å…äº†ä¼ å‚çš„é—®é¢˜ é—­åŒ…çš„ç¼ºç‚¹ï¼š å› ä¸ºä½¿ç”¨é—­åŒ…ï¼Œå¯ä»¥ä½¿å‡½æ•°åœ¨æ‰§è¡Œå®Œåä¸è¢«é”€æ¯ï¼Œä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœå¤§é‡ä½¿ç”¨é—­åŒ…å°±ä¼šé€  æˆå†…å­˜æ³„éœ²ï¼Œå†…å­˜æ¶ˆè€—å¾ˆå¤§ 3.9 å¼¹æ¡†è¾“å‡º æ™®é€šå¼¹æ¡† alert(&quot;helloï¼Œæœ¨ç“œç…²é¸¡è„š&quot;); æ§åˆ¶å°æ—¥å¿—è¾“å‡º console.log(&quot;è°·æ­Œæµè§ˆå™¨æŒ‰F12è¿›å…¥æ§åˆ¶å°&quot;); é¡µé¢è¾“å‡º document.write(&quot;&lt;h2&gt;æˆ‘çˆ±ä½ ä¸­å›½&lt;/h2&gt;&quot;); å°†&lt;h2&gt;å…ƒç´ è¾“å‡ºåˆ°&lt;body&gt;ä¸­ ç¡®è®¤æ¡† confirm(â€œç¡®å®šåˆ é™¤å—ï¼Ÿâ€); 123456var b = confirm(&quot;ç¡®å®šåˆ é™¤å—ï¼Ÿ&quot;); if(b)&#123; document.write( &quot;&lt;h1&gt;åˆ é™¤æˆåŠŸï¼&lt;/h1&gt;&quot; ); &#125;else&#123; document.write( &quot;&lt;h1&gt;ä½ å–æ¶ˆäº†æ“ä½œ&lt;/h1&gt;&quot; ); &#125; è¾“å…¥æ¡† prompt(â€œè¯·è¾“å…¥å§“åï¼šâ€); 12var name = prompt(&quot;è¯·è¾“å…¥ä½ çš„åå­—ï¼š&quot;); document.write( &quot;&lt;h1&gt;å¤§åï¼š&quot;+name+&quot;ï¼&lt;/h1&gt;&quot; ); 4. DOM æ“ä½œ åœ¨ä¸€ä¸ªhtmlé¡µé¢ä¸­ï¼Œä¼šä½¿ç”¨å¾ˆå¤šæ ‡ç­¾æ¥è§„åˆ’åˆ¶ä½œé¡µé¢ã€‚ æ¯ä¸ªæ ‡ç­¾éƒ½æœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åŠ¨æ€çš„ä¿®æ”¹æŸä¸ªæ ‡ç­¾çš„å€¼ã€‚é‚£æˆ‘ä»¬å°±éœ€è¦åœ¨é¡µé¢ä¸­æŸ¥æ‰¾åˆ°è¿™ä¸ªæ ‡ç­¾å…ƒç´  å¦‚ä½•æŸ¥æ‰¾åˆ°è¿™ä¸ªå…ƒç´ æ˜¯ä¸ªéš¾é¢˜ï¼ŒW3Cç»„ç»‡çš„å·¥ç¨‹å¸ˆä»¬ï¼Œçªç„¶çœ‹åˆ°äº†ä¸€æ£µå¤§æ ‘ã€‚æˆ‘è¦æ˜¯æƒ³æ‰¾åˆ°æŸä¸€ç‰‡å¶å­ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ â€œé¡ºè—¤æ‘¸ç“œâ€ï¼Œä¸»æ ‘å¹²æœ‰åˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯è¿˜æœ‰è®¸å¤šå°åˆ†æ”¯ï¼Œåªè¦æŠŠè¿™ä¸ªåˆ†æ”¯çš„ç»“æ„æ•´ç†æ¸…æ¥šï¼Œä»»ä½•ä¸€ç‰‡å¶å­éƒ½ä¸æ˜¯éš¾äº‹äº† å¶å­å’Œå¤§æ ‘çš„ä¸€äº›å¯å‘ï¼Œå·¥ç¨‹å¸ˆä»¬å¼€ä¼šè®¨è®ºå°±å®šäº†è¿™ä¸ªç†è®ºâ€œæ–‡æ¡£å¯¹è±¡æ¨¡å‹â€ï¼Œ æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå°±æ˜¯å°†é¡µé¢ä¸­æ‰€æœ‰çš„æ ‡ç­¾å…ƒç´ éƒ½çœ‹æˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸€ç‰‡å¶å­ï¼‰ï¼Œä¸»æ ‘å¹²å®šä¹‰ä¸ºæ ¹èŠ‚ç‚¹ï¼ˆæ ¹å…ƒç´ ï¼‰ï¼Œæ‰€æœ‰çš„æ ‡ç­¾éƒ½æ˜¯ä»æ ¹å…ƒç´ å»¶ä¼¸å‡ºå»çš„ï¼Œæ‘¸æ¸…ç»“æ„ï¼Œæ‰¾åˆ°æŸä¸ªæ ‡ç­¾å°±ä¸å†å›°éš¾äº† åœ¨èŠ‚ç‚¹æ ‘ä¸­ï¼Œé¡¶ç«¯èŠ‚ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹ï¼ˆrootï¼‰ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰çˆ¶èŠ‚ç‚¹ï¼ˆé™¤äº†æ ¹èŠ‚ç‚¹ï¼‰ ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„å­èŠ‚ç‚¹ åŒèƒæ˜¯æ‹¥æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ 12345678910&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;DOMæ¥äº†&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;HTML DOM&lt;/h1&gt; &lt;p&gt;Hello world!&lt;/p&gt; &lt;/body&gt; &lt;/html&gt; ä»ä¸Šé¢çš„ HTML ä¸­ï¼š &lt;html&gt; èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼›å®ƒæ˜¯æ ¹èŠ‚ç‚¹ &lt;head&gt; å’Œ &lt;body&gt; çš„çˆ¶èŠ‚ç‚¹æ˜¯ &lt;html&gt; èŠ‚ç‚¹ æ–‡æœ¬èŠ‚ç‚¹ â€œHello world!â€ çš„çˆ¶èŠ‚ç‚¹æ˜¯ &lt;p&gt; èŠ‚ç‚¹ å¹¶ä¸”ï¼š &lt;html&gt; èŠ‚ç‚¹æ‹¥æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼š&lt;head&gt; å’Œ &lt;body&gt; &lt;head&gt; èŠ‚ç‚¹æ‹¥æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼š&lt;meta&gt; ä¸ &lt;title&gt; èŠ‚ç‚¹ &lt;title&gt; èŠ‚ç‚¹ä¹Ÿæ‹¥æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼šæ–‡æœ¬èŠ‚ç‚¹ â€œDOM æ¥äº†â€&lt;h1&gt; å’Œ &lt;p&gt; èŠ‚ç‚¹æ˜¯åŒèƒèŠ‚ç‚¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯&lt;body&gt; çš„å­èŠ‚ç‚¹ å¹¶ä¸”ï¼š &lt;head&gt; å…ƒç´ æ˜¯ &lt;html&gt; å…ƒç´ çš„é¦–ä¸ªå­èŠ‚ç‚¹ &lt;body&gt; å…ƒç´ æ˜¯ &lt;html&gt; å…ƒç´ çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ &lt;h1&gt; å…ƒç´ æ˜¯ &lt;body&gt; å…ƒç´ çš„é¦–ä¸ªå­èŠ‚ç‚¹ &lt;p&gt; å…ƒç´ æ˜¯ &lt;body å…ƒç´ çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ jsä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šç§æ–¹æ³•æ¥å®ç°åœ¨é¡µé¢æ‰¾æŸ¥æ‰¾æŸä¸ªå…ƒç´ èŠ‚ç‚¹ 4.1 DOMè®¿é—® getElementByIdï¼šé€šè¿‡idå±æ€§è·å¾—å…ƒç´ èŠ‚ç‚¹å¯¹è±¡ æ¡ˆä¾‹ï¼šå½“å¸å·ä¸ºç©ºæ—¶ï¼Œé˜»æ­¢è¡¨å•æäº¤ 1234567891011121314151617&lt;body&gt; &lt;form action=&quot;xxx&quot; onsubmit=&quot;return login()&quot;&gt; &lt;p&gt;å¸å·ï¼š&lt;input id=&quot;username&quot;/&gt;&lt;/p&gt; &lt;p&gt;ç”µè¯ï¼š&lt;input id=&quot;phone&quot;/&gt;&lt;/p&gt; &lt;p&gt;&lt;button&gt;ç™»å½•&lt;/button&gt;&lt;/p&gt; &lt;/form&gt; &lt;script&gt; function login() &#123; var name = document.getElementById(&quot;username&quot;).value ; if(name == &quot;&quot;)&#123; alert(&quot;å¸å·ä¸èƒ½ä¸ºç©ºï¼&quot;); return false; // é˜»æ­¢è¡¨å•çš„æäº¤ &#125; return true; // æ”¾è¡Œï¼Œè®©è¡¨å•æäº¤ &#125; &lt;/script&gt; &lt;/body&gt; getElementsByNameï¼šé€šè¿‡nameå±æ€§è·å¾—å…ƒç´ èŠ‚ç‚¹å¯¹è±¡é›† æ¡ˆä¾‹ï¼šè´­ç‰©è½¦å…¨é€‰æ•ˆæœ 12345678910111213141516171819202122232425262728293031323334&lt;body&gt; &lt;h2&gt;æˆ‘çš„è´­ç‰©è½¦&lt;/h2&gt; &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; onchange=&quot;quan(this)&quot; /&gt; å…¨é€‰&lt;/td&gt; &lt;td&gt;åç§°&lt;/td&gt; &lt;td&gt;å•ä»·&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;one&quot; /&gt;1&lt;/td&gt; &lt;td&gt;åŠŸèƒ½æ€§é¥®æ–™-å°–å«&lt;/td&gt; &lt;td&gt;4.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;one&quot; /&gt;2&lt;/td&gt; &lt;td&gt;ç«è…¿è‚ &lt;/td&gt; &lt;td&gt;2.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;one&quot; /&gt;3&lt;/td&gt; &lt;td&gt;åŒ…å­&lt;/td&gt; &lt;td&gt;1.5&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;p&gt; &lt;button&gt;æäº¤è®¢å•&lt;/button&gt; &lt;/p&gt; &lt;script&gt; function quan(all) &#123; var arr = document.getElementsByName(&quot;one&quot;); for (var i = 0; i &lt; arr.length; i++) &#123; arr[i].checked = all.checked; // å°†å…¨é€‰æ¡†çš„çŠ¶æ€ï¼Œèµ‹å€¼ç»™æ¯ä¸€ä¸ªå¤é€‰æ¡† &#125; &#125; &lt;/script&gt; &lt;/body&gt; getElementsByTagNameï¼šé€šè¿‡æ ‡ç­¾åç§°è·å¾—å…ƒç´ èŠ‚ç‚¹å¯¹è±¡é›† æ¡ˆä¾‹ï¼šè¡¨æ ¼éš”è¡Œå˜è‰² 1234567891011121314151617181920212223242526272829303132&lt;body&gt; &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; onchange=&quot;quan(this)&quot; /&gt; å…¨é€‰&lt;/td&gt; &lt;td&gt;åç§°&lt;/td&gt; &lt;td&gt;å•ä»·&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;one&quot; /&gt;1&lt;/td&gt; &lt;td&gt;åŠŸèƒ½æ€§é¥®æ–™-å°–å«&lt;/td&gt; &lt;td&gt;4.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;one&quot; /&gt;2&lt;/td&gt; &lt;td&gt;ç«è…¿è‚ &lt;/td&gt; &lt;td&gt;2.0&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;one&quot; /&gt;3&lt;/td&gt; &lt;td&gt;åŒ…å­&lt;/td&gt; &lt;td&gt;1.5&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;script&gt; var rows = document.getElementsByTagName(&quot;tr&quot;); //é€šè¿‡æ ‡ç­¾åè·å¾—å…ƒç´ å¯¹è±¡ é›†åˆ for (var i = 0; i &lt; rows.length; i++) &#123; if(i % 2 == 1)&#123; // å¥‡æ•° rows[i].style.backgroundColor = &quot;pink&quot;; &#125; &#125; &lt;/script&gt; &lt;/body&gt; 4.2 DOMä¿®æ”¹ ä¿®æ”¹ HTML DOM æ„å‘³ç€è®¸å¤šä¸åŒçš„æ–¹é¢ï¼š æ”¹å˜ HTML å†…å®¹ æ”¹å˜ CSS æ ·å¼ æ”¹å˜ HTML å±æ€§ åˆ›å»ºæ–°çš„ HTML å…ƒç´  åˆ é™¤å·²æœ‰çš„ HTML å…ƒç´  æ”¹å˜äº‹ä»¶ï¼ˆå¤„ç†ç¨‹åºï¼‰ æ”¹å˜ä¸€ä¸ª &lt;h2&gt; å…ƒç´ çš„ HTML å†…å®¹ : 123456789&lt;body&gt; &lt;button onclick=&quot;test()&quot;&gt;ç‚¹æˆ‘è¯•è¯•&lt;/button&gt; &lt;script&gt; function test()&#123; document.getElementById(&quot;hello&quot;).innerHTML = &quot;èµ°å“‡ï¼Œå–ç‚¹å»~ï¼&quot;; &#125; &lt;/script&gt; &lt;h2 id=&quot;hello&quot;&gt;ä½ å¥½ï¼&lt;/h2&gt; &lt;/body&gt; æ”¹å˜ä¸€ä¸ª&lt;h2&gt;çš„ HTML æ ·å¼ 12345678910&lt;body&gt; &lt;button onclick=&quot;chou()&quot;&gt;ä½ ç…å•¥&lt;/button&gt; &lt;script&gt; function chou()&#123; document.getElementById(&quot;hello&quot;).style.color = &quot;red&quot;; document.getElementById(&quot;hello&quot;).style.fontFamily = &quot;åæ–‡å½©äº‘&quot;; &#125; &lt;/script&gt; &lt;h2 id=&quot;hello&quot;&gt;ä½ å¥½ï¼&lt;/h2&gt; &lt;/body&gt; 4.2.1 æ·»åŠ èŠ‚ç‚¹ ç‚¹å‡»æŒ‰é’®ï¼Œåœ¨é¡µé¢ä¸­åˆ›å»ºä¸€å¼ å›¾ç‰‡ 12345678910111213141516171819&lt;body&gt; &lt;button onclick=&quot;add()&quot;&gt;æ·»åŠ &lt;/button&gt; &lt;div&gt;&lt;/div&gt; &lt;script&gt; function add()&#123; // &lt;img&gt; var img = document.createElement(&quot;img&quot;); // &lt;img src=&quot;../lagou-html/img/cat.gif&quot;&gt; img.setAttribute(&quot;src&quot;,&quot;../lagou-html/img/cat.gif&quot;); // &lt;img src=&quot;../lagou- html/img/cat.gif&quot; title=&quot;å°çŒ«å’ª&quot;&gt; img.setAttribute(&quot;title&quot;,&quot;å°çŒ«å’ª&quot;); // &lt;img src=&quot;../lagou- html/img/cat.gif&quot; title=&quot;å°çŒ«å’ª&quot; id=&quot;cat&quot;&gt; img.setAttribute(&quot;id&quot;,&quot;cat&quot;); var divs = document.getElementsByTagName(&quot;div&quot;); divs[0].appendChild(img); &#125; &lt;/script&gt; &lt;/body&gt; 4.2.2 åˆ é™¤èŠ‚ç‚¹ ç‚¹å‡»æŒ‰é’®ï¼ŒæŠŠä¸Šé¢åˆšåˆ›å»ºçš„å›¾ç‰‡ä»é¡µé¢ä¸Šåˆ é™¤ 1234567891011121314&lt;body&gt; &lt;button onclick=&quot;add()&quot;&gt;æ·»åŠ &lt;/button&gt; &lt;button onclick=&quot;del()&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;div&gt; &lt;/div&gt; &lt;script&gt; function add()&#123; ã€‚ã€‚ã€‚ç•¥ã€‚ã€‚ã€‚ &#125; function del()&#123; var img = document.getElementById(&quot;cat&quot;); img.parentNode.removeChild(img); // å¿…é¡»é€šè¿‡çˆ¶èŠ‚ç‚¹ï¼Œæ‰èƒ½åˆ é™¤å­èŠ‚ç‚¹ &#125; &lt;/script&gt; &lt;/body 4.2.3 æ›¿æ¢èŠ‚ç‚¹ ç‚¹å‡»æŒ‰é’®ï¼ŒæŠŠä¸Šé¢åˆšåˆ›å»ºçš„å›¾ç‰‡æ›¿æ¢æˆå¦ä¸€å¼  12345678910111213141516171819202122&lt;body&gt; &lt;button onclick=&quot;add()&quot;&gt;æ·»åŠ &lt;/button&gt; &lt;button onclick=&quot;del()&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;button onclick=&quot;rep()&quot;&gt;æ›¿æ¢&lt;/button&gt; &lt;div&gt; &lt;/div&gt; &lt;script&gt; function add()&#123; ã€‚ã€‚ã€‚ç•¥ã€‚ã€‚ã€‚ &#125; function del()&#123; ã€‚ã€‚ã€‚ç•¥ã€‚ã€‚ã€‚ &#125; function rep()&#123; var imgold = document.getElementById(&quot;cat&quot;); // é€šè¿‡ä¿®æ”¹å…ƒç´ çš„å±æ€§ï¼Œåšçš„æ›¿æ¢ // img.setAttribute(&quot;src&quot;,&quot;../lagou-html/img/2.jpg&quot;); var imgnew = document.createElement(&quot;img&quot;); imgnew.setAttribute(&quot;src&quot;,&quot;../lagou-html/img/1.jpg&quot;); imgold.parentNode.replaceChild( imgnew, imgold ); &#125; &lt;/script&gt; &lt;/body&gt; 4.3 äº‹ä»¶jsæ•è·æŸä¸ªåŠ¨ä½œè€Œåšå‡ºçš„åé¦ˆ HTML äº‹ä»¶çš„ä¾‹å­ï¼š å½“ç”¨æˆ·ç‚¹å‡»é¼ æ ‡æ—¶ å½“ç½‘é¡µå·²åŠ è½½æ—¶ å½“å›¾ç‰‡å·²åŠ è½½æ—¶ å½“é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶ å½“è¾“å…¥å­—æ®µè¢«æ”¹å˜æ—¶ å½“ HTML è¡¨å•è¢«æäº¤æ—¶ å½“ç”¨æˆ·è§¦å‘æŒ‰é”®æ—¶ 4.3.1 çª—å£äº‹ä»¶ä»…åœ¨ body å’Œ frameset å…ƒç´ ä¸­æœ‰æ•ˆã€‚ onload å½“æ–‡æ¡£è¢«è½½å…¥æ—¶æ‰§è¡Œè„šæœ¬ 1234567&lt;body onload=&quot;test()&quot;&gt; &lt;script&gt; function test() &#123; document.write(&quot;æœ¨ç“œç…²é¸¡è„š&quot;); &#125; &lt;/script&gt; &lt;/body&gt; 4.3.2 è¡¨å•å…ƒç´ äº‹ä»¶ï¼ˆForm Element Eventsï¼‰ä»…åœ¨è¡¨å•å…ƒç´ ä¸­æœ‰æ•ˆã€‚ onblur å½“å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶æ‰§è¡Œè„šæœ¬ onfocus å½“å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶æ‰§è¡Œè„šæœ¬ 1234567891011121314&lt;body&gt; &lt;script&gt; function a() &#123; console.log(&quot;è·å¾—ç„¦ç‚¹==è¢«æ¿€æ´»&quot;); &#125; function b() &#123; console.log(&quot;å¤±å»ç„¦ç‚¹&quot;); &#125; &lt;/script&gt; &lt;form action=&quot;&quot;&gt; &lt;p&gt;å¸å·ï¼š&lt;input onfocus=&quot;a()&quot; onblur=&quot;b()&quot; /&gt;&lt;/p&gt; &lt;p&gt;å¯†ç ï¼š&lt;input /&gt;&lt;/p&gt; &lt;/form&gt; &lt;/body&gt; 4.3.3 é¼ æ ‡äº‹ä»¶ï¼ˆ Mouse Eventsï¼‰ onclick å½“é¼ æ ‡è¢«å•å‡»æ—¶æ‰§è¡Œè„šæœ¬ ondblclick å½“é¼ æ ‡è¢«åŒå‡»æ—¶æ‰§è¡Œè„šæœ¬ onmouseout å½“é¼ æ ‡æŒ‡é’ˆç§»å‡ºæŸå…ƒç´ æ—¶æ‰§è¡Œè„šæœ¬ onmouseover å½“é¼ æ ‡æŒ‡é’ˆæ‚¬åœäºæŸå…ƒç´ ä¹‹ä¸Šæ—¶æ‰§è¡Œè„šæœ¬ 12345678910111213141516171819202122232425&lt;style&gt; img&#123; width: 30%; border: 5px solid white; &#125; &lt;/style&gt; &lt;body&gt; &lt;img src=&quot;img/logo.png&quot; onmouseover=&quot;shang(this)&quot; onmouseout=&quot;xia(this)&quot; onclick=&quot;dan()&quot;&gt; &lt;img src=&quot;img/logo.png&quot; onmouseover=&quot;shang(this)&quot; onmouseout=&quot;xia(this)&quot; ondblclick=&quot;shuang()&quot;&gt; &lt;img src=&quot;img/logo.png&quot; onmouseover=&quot;shang(this)&quot; onmouseout=&quot;xia(this)&quot; &gt; &lt;script&gt; function dan()&#123; alert(&quot;ç‚¹äº†ä¸€ä¸‹&quot;); &#125; function shuang()&#123; alert(&quot;è¿ç»­å¿«è¯»ç‚¹ä¸¤ä¸‹&quot;); &#125; function shang(img)&#123; img.style.border = &quot;5px solid red&quot;; &#125; function xia(img)&#123; img.style.border = &quot;5px solid white&quot;; &#125; &lt;/script&gt;&lt;/body&gt; 4.3.4 é”®ç›˜äº‹ä»¶ onkeydown æŒ‰ä¸‹å» onkeyup å¼¹ä¸Šæ¥ 12345678910111213&lt;script&gt; window.onkeydown = function()&#123; // eventï¼šäº‹ä»¶æºï¼ˆæŒ‰é”®ï¼‰ // console.log( &quot;æŒ‰é”®ç¼–ç ï¼š&quot;+event.keyCode ); if(event.keyCode == &quot;13&quot;)&#123; // å›è½¦é”® alert(&quot;ç™»å½•æˆåŠŸï¼&quot;); &#125; &#125; window.onkeyup = function()&#123; console.log(event.keyCode); // æŒ‰ä½æŒ‰é”®ä¸æ¾æ‰‹æ˜¯ä¸ä¼šè§¦å‘çš„ã€‚å½“æ¾æ‰‹æ—¶ï¼ŒæŒ‰é”®å›å¼¹åˆ™ è§¦å‘ &#125; &lt;/script&gt; 4.3.5 äº‹ä»¶å†’æ³¡ åˆ›å»ºä¸¤ä¸ªdivï¼Œä¸€ä¸ªå¤§ä¸€äº›ï¼Œä¸€ä¸ªå°ä¸€äº› 123456789101112131415161718192021222324252627&lt;style&gt; #father &#123; width: 200px; height: 200px; background: black; padding: 10px; &#125; #child &#123; width: 100px; height: 100px; background: greenyellow; &#125; &lt;/style&gt; &lt;body&gt; &lt;div id=&quot;father&quot;&gt; &lt;div id=&quot;child&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;script&gt; // ä»£ç ä¸é‡è¦ï¼Œé‡è¦æ˜¯çŸ¥é“è¿™ä¸ªäº‹ä»¶å‘ç”Ÿï¼Œæ˜¯æ­£å¸¸ç°è±¡ document.getElementById(&quot;father&quot;).addEventListener(&quot;click&quot;, function()&#123; alert(&quot;çˆ¶çº§å…ƒç´ çš„äº‹ä»¶è¢«è§¦å‘ï¼š&quot; + this.id); &#125;); document.getElementById(&quot;child&quot;).addEventListener(&quot;click&quot;, function(e) &#123; e.stopPropagation() //å–æ¶ˆäº‹ä»¶çš„å†’æ³¡æœºåˆ¶ alert(&quot;å­çº§å…ƒç´ çš„äº‹ä»¶è¢«è§¦å‘ï¼š&quot; + this.id); &#125;); &lt;/script&gt; &lt;/body&gt; å…ˆå­ï¼Œåçˆ¶ã€‚äº‹ä»¶çš„è§¦å‘é¡ºåºè‡ªå†…å‘å¤–ï¼Œè¿™å°±æ˜¯äº‹ä»¶å†’æ³¡ï¼› 4.3.6 äº‹ä»¶æ•è· è¿˜æ˜¯åˆšæ‰åˆ›å»ºä¸¤ä¸ªdivï¼Œä¸€ä¸ªå¤§ä¸€äº›ï¼Œä¸€ä¸ªå°ä¸€äº› 12345678910111213141516171819202122&lt;style&gt; #father &#123; width: 200px; height: 200px; background: black; padding: 10px; &#125; #child &#123; width: 100px; height: 100px; background: greenyellow; &#125; &lt;/style&gt; &lt;body&gt; &lt;div id=&quot;father&quot;&gt; &lt;div id=&quot;child&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;script&gt; document.getElementById(&quot;father&quot;).addEventListener(&quot;click&quot;,function()&#123; alert(&quot;çˆ¶çº§ï¼š&quot; + this.id); &#125;,true); document.getElementById(&quot;child&quot;).addEventListener(&quot;click&quot;,function()&#123; alert(&quot;å­çº§ï¼š&quot; + this.id); &#125;,true); &lt;/script&gt; &lt;/body&gt; å…ˆçˆ¶,åå­ã€‚äº‹ä»¶è§¦å‘é¡ºåºå˜æ›´ä¸ºè‡ªå¤–å‘å†…ï¼Œè¿™å°±æ˜¯äº‹ä»¶æ•è·ï¼› 4.4 é¢å‘å¯¹è±¡OOP ä½¿ç”¨Objectåˆ›å»ºé€šç”¨å¯¹è±¡ 1234567891011121314var user = new Object(); user.name = &quot;å•å¸ƒ&quot;; user.age = 21; user.say = function()&#123; console.log(&quot;å¤§å®¶å¥½ï¼Œæˆ‘å«ï¼š&quot;+this.name+&quot;ï¼Œæˆ‘ä»Šå¹´&quot;+this.age+&quot;å²äº†ï¼&quot;);&#125;user.say(); var dog = new Object(); dog.nickname = &quot;å±å°¿å¤š&quot;; dog.wang = function()&#123; console.log(&quot;æˆ‘é¥¿äº†ï¼Œæˆ‘è¦æ‹†å®¶äº†ï¼&quot;); &#125;dog.wang(); ä½¿ç”¨æ„é€ å‡½æ•° 123456789function userinfo(name , age)&#123; this.name = name; this.age = age; this.say = function()&#123; console.log(&quot;å¤§å®¶å¥½ï¼Œæˆ‘å«ï¼š&quot;+this.name+&quot;ï¼Œæˆ‘ä»Šå¹´&quot;+this.age+&quot;å²äº†ï¼&quot;); &#125; &#125;var user = new userinfo(&quot;è©¹å§†æ–¯&quot;,35); user.say(); ä½¿ç”¨ç›´æ¥é‡ 123456789var user = &#123; username : &quot;å­™æ‚Ÿç©º&quot;, age : 527, say : function()&#123; console.log(&quot;å¤§å®¶å¥½ï¼Œæˆ‘å«ï¼š&quot;+this.username+&quot;ï¼Œæˆ‘ä»Šå¹´&quot;+this.age+&quot;å²äº†ï¼&quot;); &#125; &#125;;user.say(); 4.5 JSON å¤§å®¶åœ¨äº’è”ç½‘ä¸Šæ¥å›ä¼ é€’æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ¼å¼ï¼Œè§£æèµ·æ¥çš„éš¾åº¦å¾ˆå¤§ï¼ˆæ¯ä¸ªäººçš„ç¼–ç å–œå¥½ä¸ä¸€æ ·ï¼‰ JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆ 12345&#123;å±æ€§1ï¼šå€¼1ï¼Œå±æ€§2ï¼šå€¼2ï¼Œ... ...&#125; 12345678910111213&lt;script&gt; var json1 = &#123; username: &quot;å•å¸ƒ&quot;, age: 31 &#125;; console.log(&quot;å§“åï¼š&quot; + json1.username + &quot;ï¼Œå¹´é¾„ï¼š&quot; + json1.age + &quot;å²&quot;); // jsonæ•°ç»„ var josnarr = [&#123; name: &quot;è²‚è‰&quot;, age: 18 &#125;, &#123; name: &quot;å°ä¹”&quot;, age: 17 &#125;]; console.log(&quot;è²‚è‰&quot; + josnarr[0].age + &quot;å²äº†&quot;); console.log(&quot;å°ä¹”&quot; + josnarr[1].age + &quot;å²äº†&quot;); // å¤æ‚çš„jsonå¯¹è±¡ var long = &#123; name: &quot;èµµäº‘&quot;, sex: &quot;ç”·&quot;, hobby: [&quot;ç‰å…°ç™½é¾™é©¹&quot;, &quot;é¾™èƒ†äº®é“¶æª&quot;, &quot;é’é‡­å‰‘&quot;] &#125;; console.log(long.name + &quot;çš„ä¸»æ”»æ­¦å™¨ï¼š&quot; + long.hobby[1]); &lt;/script&gt; 5. BOMæ“ä½œæ˜¯javascriptå¯¹æµè§ˆå™¨çš„ä¸€äº›å¸¸è§„æ“ä½œçš„æ–¹æ³• 5.1 windowå¯¹è±¡ 12345678&lt;button onclick=&quot;Jasper()&quot;&gt;çœ‹çœ‹æ›´å¤šæŠ€æœ¯æ–‡ç« &lt;/button&gt; &lt;script&gt; function Jasper()&#123; window.open(&quot;http://yournotes.cn&quot; , &quot;æœ¨ç“œç…²é¸¡è„š&quot;,&quot;width=500,height=300,left=400&quot;); //window.open(&quot;http://yournotes.cn&quot; , &quot;æœ¨ç“œç…²é¸¡è„š&quot; , &quot;fullscreen=yes&quot;); // IEæ‰ ç”Ÿæ•ˆ &#125;&lt;/script&gt; 5.1.1 screenå±å¹•å¯¹è±¡æˆ‘æƒ³çŸ¥é“æˆ‘çš„ç”µè„‘å±å¹•å¤šå¤§ï¼Ÿå®é™…ä¸Šï¼Œå¾—åˆ°çš„å°±æ˜¯åˆ†è¾¨ç‡ 12345678&lt;body&gt; &lt;button onclick=&quot;kai()&quot;&gt;æ±‚å¤§å°&lt;/button&gt; &lt;/body&gt; &lt;script&gt; function kai() &#123; alert(window.screen.width + &quot;|&quot; + window.screen.height); &#125; &lt;/script&gt; 5.1.2 locationå®šä½åŒ…å«æœ‰å…³å½“å‰ URL çš„ä¿¡æ¯ï¼Œé€šå¸¸ç”¨æ¥åšé¡µé¢è·³è½¬ 1234567&lt;button onclick=&quot;test()&quot;&gt;æµ‹è¯•&lt;/button&gt; &lt;script&gt; function test()&#123; console.log( &quot;å½“å‰é¡µé¢çš„URLè·¯å¾„åœ°å€ï¼š&quot;+ location.href ); location.reload(); // é‡æ–°åŠ è½½å½“å‰é¡µé¢ï¼ˆåˆ·æ–°ï¼‰ location.href = &quot;http://lagou.com&quot;; // è·³è½¬é¡µé¢ &#125; &lt;/script&gt; 5.1.3 historyæµè§ˆå™¨å†å²historyå¯¹è±¡ä¼šè®°å½•æµè§ˆå™¨çš„ç—•è¿¹ a.html 1&lt;a href=&quot;b.html&quot;&gt;å»bé¡µé¢&lt;/a&gt; b.html 123456&lt;button onclick=&quot;hui()&quot;&gt;è¿”å›&lt;/button&gt; &lt;script&gt; function hui()&#123; //history.go(-1); //ä¸Šä¸€çº§é¡µé¢ history.back(); // ä¸go(-1)æ˜¯ç­‰ä»·çš„ &#125; &lt;/script&gt; 5.1.4 navigatorå¯¼èˆªï¼ˆäº†è§£ï¼‰window.navigator å¯¹è±¡åŒ…å«æœ‰å…³è®¿é—®è€…æµè§ˆå™¨çš„ä¿¡æ¯ 12345678910&lt;script&gt; var str = &quot;&quot;; str += &quot;&lt;p&gt;æµè§ˆå™¨çš„ä»£å·ï¼š&quot;+ navigator.appCodeName +&quot;&lt;/p&gt;&quot;; str += &quot;&lt;p&gt;æµè§ˆå™¨çš„åç§°ï¼š&quot;+ navigator.appName+&quot;&lt;/p&gt;&quot;; str += &quot;&lt;p&gt;æµè§ˆå™¨çš„ç‰ˆæœ¬ï¼š&quot;+ navigator.appVersion+&quot;&lt;/p&gt;&quot;; str += &quot;&lt;p&gt;ç¡¬ä»¶å¹³å°ï¼š&quot;+ navigator.platform+&quot;&lt;/p&gt;&quot;; str += &quot;&lt;p&gt;ç”¨æˆ·ä»£ç†ï¼š&quot;+ navigator.userAgent +&quot;&lt;/p&gt;&quot;; str += &quot;&lt;p&gt;å¯ç”¨Cookiesï¼š&quot;+navigator.cookieEnabled+&quot;&lt;/p&gt;&quot;; document.write(str); &lt;/script&gt; 5.1.5 å­˜å‚¨å¯¹è±¡ç”¨èµ·æ¥å’Œæˆ‘ä»¬åœ¨javaä¸­mapå¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯é”®å€¼å¯¹çš„æ–¹å¼å­˜æ•°æ® æœ¬åœ°å­˜å‚¨ localStorage ä¿å­˜æ•°æ® 1localStorage.setItem(&quot;name&quot;,&quot;curry&quot;); æå–æ•°æ® 1localStorage.getItem(&quot;name&quot;); åˆ é™¤æ•°æ® 1localStorage.removeItem(&quot;name&quot;); å¤šæ ·åŒ–æ“ä½œ 123456789101112131415161718192021// ä¸‰ç§æ–¹å¼ä¿å­˜æ•°æ® localStorage[&quot;a&quot;] = 1; localStorage.b = 2; localStorage.setItem(&quot;c&quot;,3); // æŸ¥çœ‹æ•°æ®ç±»å‹ console.log( typeof localStorage[&quot;a&quot;] )console.log( typeof localStorage[&quot;b&quot;] ) console.log( typeof localStorage[&quot;c&quot;] ) // ç¬¬ä¸€ç§æ–¹å¼è¯»å– var a = localStorage.a; console.log(a); // ç¬¬äºŒç§æ–¹å¼è¯»å– var b = localStorage[&quot;b&quot;]; console.log(b); // ç¬¬ä¸‰ç§æ–¹å¼è¯»å– var c = localStorage.getItem(&quot;c&quot;); console.log(c); ä¼šè¯å­˜å‚¨ sessionStorage ä¼šè¯ï¼Œå°±æ˜¯ä¿æŒæµè§ˆå™¨åˆ«å…³é—­ã€‚å…³é—­æµè§ˆå°±ç­‰äºç»“æŸäº†ä¸€æ¬¡ä¼šè¯ã€‚å¼€å¯æµè§ˆå™¨å°±æ„å‘³ç€åˆ›å»ºäº†ä¸€æ¬¡ä¼šè¯ã€‚ ä¿å­˜æ•°æ® 1sessionStorage.setItem(&quot;name&quot;, &quot;klay&quot;); æå–æ•°æ® 1var lastname = sessionStorage.getItem(&quot;name&quot;); åˆ é™¤æŒ‡å®šé”®çš„æ•°æ® 1sessionStorage.removeItem(&quot;name&quot;); åˆ é™¤æ‰€æœ‰æ•°æ® 1sessionStorage.clear(); æ¡ˆä¾‹ï¼šè®°å½•ç‚¹å‡»äº†å‡ ä¸‹æŒ‰é’® 1234567891011&lt;button onclick=&quot;dian()&quot;&gt;ç‚¹æˆ‘&lt;/button&gt; &lt;h3 id=&quot;result&quot;&gt;&lt;/h3&gt; &lt;script&gt; function dian()&#123; if( sessionStorage.getItem(&quot;clickCount&quot;) )&#123; sessionStorage.setItem(&quot;clickCount&quot;,Number(sessionStorage.getItem(&quot;clickCount&quot;)) + 1); &#125;else&#123; sessionStorage.setItem(&quot;clickCount&quot;, 1); &#125; document.getElementById(&quot;result&quot;).innerHTML = &quot;å·²ç»ç‚¹å‡»äº†&quot;+ sessionStorage.getItem(&quot;clickCount&quot;) +&quot;æ¬¡ï¼&quot; &#125; &lt;/script&gt; 5.2 è®¡æ—¶æ“ä½œ5.2.1 å‘¨æœŸæ€§å®šæ—¶å™¨setIntervalsetInterval(1,2)ï¼šå‘¨æœŸæ€§è§¦å‘ä»£ç exp ï¼ˆå¸¸ç”¨ï¼‰1ï¼šæ‰§è¡Œè¯­å¥2ï¼šæ—¶é—´å‘¨æœŸï¼Œå•ä½ä¸ºæ¯«ç§’ æ¡ˆä¾‹ï¼šé—ªçƒçš„å­—ä½“ ï¼ˆ1ç§’1å˜è‰²ï¼‰ 12345678910111213&lt;body&gt; &lt;h1 id=&quot;title&quot;&gt;æœ¨ç“œç…²é¸¡è„š&lt;/h1&gt; &lt;script&gt; var colors = [&quot;red&quot;,&quot;blue&quot;,&quot;yellow&quot;,&quot;pink&quot;,&quot;orange&quot;,&quot;black&quot;]; var i = 0; function bian()&#123; document.getElementById(&quot;title&quot;).style.color = colors[i++]; if(i == colors.length)&#123; i = 0; // é¢œè‰²é‡æ–°å¼€å§‹ &#125; &#125; setInterval(bian,100); // æ¯éš”0.1ç§’ï¼Œæ‰§è¡Œä¸€æ¬¡bianå‡½æ•° &lt;/script&gt; &lt;/body&gt; æ¡ˆä¾‹ï¼šåœ¨é—ªçƒå­—ä½“çš„åŸºç¡€ä¸Šæ‰©å±•ï¼Œé—ªçƒçš„ç”µå­æ—¶é’Ÿ 1234567891011121314151617181920&lt;body&gt; &lt;h1 id=&quot;title&quot;&gt;&lt;/h1&gt; &lt;script&gt; var colors = [&quot;red&quot;,&quot;blue&quot;,&quot;yellow&quot;,&quot;pink&quot;,&quot;orange&quot;,&quot;black&quot;]; var i = 0; function bian()&#123; document.getElementById(&quot;title&quot;).style.color = colors[i++]; if(i == colors.length)&#123; i = 0; // é¢œè‰²é‡æ–°å¼€å§‹ &#125; &#125; function time()&#123; var d = new Date(); var str = d.getFullYear()+&quot;å¹´&quot;+(d.getMonth()+1)+&quot;æœˆ&quot;+d.getDate()+&quot;å·&quot;+d.getHours()+&quot;ç‚¹&quot;+d.getMinutes()+&quot;åˆ†&quot;+d.getSeconds()+&quot;ç§’&quot;; document.getElementById(&quot;title&quot;).innerHTML = str; &#125; setInterval(bian,1000); // æ¯éš”1ç§’ï¼Œæ‰§è¡Œä¸€æ¬¡å˜è‰²å‡½æ•°bian setInterval(time,1000); // æ¯éš”1ç§’ï¼Œæ‰§è¡Œä¸€æ¬¡æ—¶é—´å‡½æ•°time &lt;/script&gt;&lt;/body&gt; 5.2.2 åœæ­¢å®šæ—¶å™¨clearIntervalæ¡ˆåˆ—ï¼šæ¨¡æ‹Ÿå¹´ä¼šæŠ½å¥– 12345678910111213141516171819&lt;body&gt; &lt;img id=&quot;tu&quot; src=&quot;./img/1.jpg&quot; width=&quot;50%&quot; /&gt; &lt;br /&gt; &lt;button onclick=&quot;begin()&quot;&gt;å¼€å§‹&lt;/button&gt; &lt;button onclick=&quot;stop()&quot;&gt;åœæ­¢&lt;/button&gt; &lt;script&gt; var arr = [&quot;1.jpg&quot;, &quot;2.jpg&quot;, &quot;3.jpg&quot;, &quot;4.jpg&quot;, &quot;5.jpg&quot;]; function begin() &#123; timer = setInterval(bian, 100); // æ²¡æœ‰ä½¿ç”¨varï¼Œæ‰€ä»¥timeræ˜¯å…¨å±€å˜é‡ &#125; function stop() &#123; clearInterval(timer); // åœæ­¢å®šæ—¶å™¨ &#125; function bian() &#123; var i = Math.floor(Math.random() * arr.length); // 0-4 document.getElementById(&quot;tu&quot;).src = &quot;../img/&quot; + arr[i]; &#125; &lt;/script&gt; &lt;/body&gt; 5.2.3 ä¸€æ¬¡æ€§å®šæ—¶å™¨setTimeoutç›¸å½“äºå»¶è¿Ÿçš„æ•ˆæœï¼Œåªæ‰§è¡Œä¸€æ¬¡ 1234567&lt;script&gt; function bian()&#123; document.body.style.backgroundColor = &quot;red&quot;; &#125; //3ç§’ä¹‹åè°ƒç”¨ setTimeout(bian,3000); &lt;/script&gt;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å‰ç«¯/JavaScript","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"CSSè¯¦è§£","slug":"CSS","date":"2020-01-04T06:18:24.000Z","updated":"2025-04-17T08:34:51.957Z","comments":true,"path":"2020/01/04/CSS/","link":"","permalink":"http://yournotes.cn/2020/01/04/CSS/","excerpt":"1. CSSä»‹ç»1.1 ä»€ä¹ˆæ˜¯CSSï¼Ÿ","text":"1. CSSä»‹ç»1.1 ä»€ä¹ˆæ˜¯CSSï¼Ÿ CSSæ˜¯æŒ‡å±‚å æ ·å¼è¡¨ cascading style sheets é€šè¿‡CSSå¯ä»¥è®©æˆ‘ä»¬å®šä¹‰HTMLå…ƒç´ å¦‚ä½•æ˜¾ç¤ºã€‚ CSSå¯ä»¥è®©æˆ‘ä»¬åŸæœ¬HTMLä¸èƒ½æè¿°çš„æ•ˆæœï¼Œé€šè¿‡CSSæè¿°å‡ºæ¥ã€‚ é€šè¿‡CSSæè¿°æˆ‘ä»¬çš„htmlé¡µé¢ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„é¡µé¢æ›´åŠ æ¼‚äº®ï¼Œå¯ä»¥æé«˜å·¥ä½œæ•ˆç‡ã€‚ 2. CSSä¸HTMLç»“åˆæ–¹å¼2.1 å†…è”&#x2F;è¡Œå†… æ ·å¼å°±æ˜¯åœ¨æˆ‘ä»¬çš„HTMLæ ‡ç­¾ä¸Šé€šè¿‡styleå±æ€§æ¥å¼•ç”¨CSSä»£ç ã€‚ä¼˜ç‚¹:ç®€å•æ–¹ä¾¿ ï¼›ç¼ºç‚¹:åªèƒ½å¯¹ä¸€ä¸ªæ ‡ç­¾è¿›è¡Œä¿®é¥°ã€‚ 2.2 å†…éƒ¨æ ·å¼è¡¨æˆ‘ä»¬é€šè¿‡&lt;style&gt;æ ‡ç­¾æ¥å£°æ˜æˆ‘ä»¬çš„CSS. é€šå¸¸&lt;style&gt;æ ‡ç­¾æˆ‘ä»¬æ¨èå†™åœ¨headå’Œbodyä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯â€œè„–å­â€çš„ä½ç½® ä¼˜ç‚¹:å¯ä»¥é€šè¿‡å¤šä¸ªæ ‡ç­¾è¿›è¡Œç»Ÿä¸€çš„æ ·å¼è®¾ç½®ç¼ºç‚¹: å®ƒåªèƒ½åœ¨æœ¬é¡µé¢ä¸Šè¿›è¡Œä¿®é¥°è¯­æ³•ï¼š é€‰æ‹©å™¨ {å±æ€§:å€¼;å±æ€§:å€¼} 2.3 å¤–éƒ¨æ ·å¼è¡¨æˆ‘ä»¬éœ€è¦å•ç‹¬å®šä¹‰ä¸€ä¸ªCSSæ–‡ä»¶,æ³¨æ„CSSæ–‡ä»¶çš„åç¼€åå°±æ˜¯.cssåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºcssç›®å½•ï¼Œåœ¨cssç›®å½•ä¸­åˆ›å»ºcssæ–‡ä»¶name.cssåœ¨&lt;head&gt;ä¸­ä½¿ç”¨&lt;link&gt;æ ‡ç­¾å¼•ç”¨å¤–éƒ¨çš„cssæ–‡ä»¶ è¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§å¼•å…¥cssæ–‡ä»¶çš„æ–¹å¼ï¼š 123&lt;style&gt; @import &#x27;css/first.css&#x27; &lt;/style&gt; å…³äºå¤–éƒ¨å¯¼å…¥cssä½¿ç”¨&lt;link&gt;ä¸@importçš„åŒºåˆ«? åŠ è½½é¡ºåºä¸åŒ @importæ–¹å¼å¯¼å…¥ä¼šå…ˆåŠ è½½htmlï¼Œç„¶åæ‰å¯¼å…¥cssæ ·å¼ï¼Œé‚£ä¹ˆå¦‚æœç½‘ç»œæ¡ä»¶ä¸å¥½ï¼Œå°±ä¼šå…ˆçœ‹åˆ°æ²¡æœ‰ä¿®é¥°çš„é¡µé¢ï¼Œç„¶åæ‰çœ‹åˆ°ä¿®é¥°åçš„é¡µé¢ã€‚ å¦‚æœä½¿ç”¨linkæ–¹å¼ï¼Œå®ƒä¼šå…ˆåŠ è½½æ ·å¼è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç›´æ¥å°±æ˜¯ä¿®é¥°çš„é¡µé¢ï¼› @importæ–¹å¼å¯¼å…¥cssæ ·å¼ï¼Œå®ƒæ˜¯ä¸æ”¯æŒjavascriptçš„åŠ¨æ€ä¿®æ”¹çš„ã€‚è€Œlinkæ”¯æŒã€‚ ä¸‰ç§æ ·å¼è¡¨çš„ä¼˜å…ˆçº§ï¼šæ»¡è¶³å°±è¿‘åŸåˆ™å†…è” &gt; å†…éƒ¨ &gt; å¤–éƒ¨ 3. CSSçš„ä½¿ç”¨3.1 cssä¸­çš„é€‰æ‹©å™¨3.1.1 å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰é€‰æ‹©å™¨å®ƒå¯ä»¥å¯¹é¡µé¢ä¸Šç›¸åŒçš„æ ‡ç­¾è¿›è¡Œç»Ÿä¸€çš„è®¾ç½®ï¼Œå®ƒæè¿°çš„å°±æ˜¯æ ‡ç­¾çš„åç§°. 3.1.2 ç±»é€‰æ‹©å™¨ç±»é€‰æ‹©å™¨åœ¨ä½¿ç”¨æ—¶ä½¿ç”¨â€.â€æ¥æè¿°ï¼Œå®ƒæè¿°çš„æ˜¯å…ƒç´ ä¸Šçš„classå±æ€§å€¼ 3.1.3 idé€‰æ‹©å™¨å®ƒåªèƒ½é€‰æ‹©ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨ â€œ#â€ å¼•å…¥ï¼Œå¼•ç”¨çš„æ˜¯å…ƒç´ çš„idå±æ€§å€¼ã€‚idé€‰æ‹©å™¨å€¼ä¸èƒ½é‡å¤ï¼Œæ¯”ç±»é€‰æ‹©å™¨æ›´å…·æœ‰å”¯ä¸€æ€§ 3.1.4 é€‰æ‹©å™¨ç»„é€—å·è¡¨ç¤ºï¼Œè°å’Œè°ã€‚ ä¾‹å¦‚ï¼Œæˆ‘æœ‰æ‰‹æœºï¼Œä½ æœ‰æ‰‹æœºï¼Œä»–ä¹Ÿæœ‰æ‰‹æœºï¼Œä¸€æ¡ä¸€æ¡å†™å¤ªéº»çƒ¦ï¼Œå°±å¯ä»¥åˆå¹¶ç¼–å†™ 123æˆ‘ï¼Œä½ ï¼Œä»–&#123; æœ‰æ‰‹æœº&#125; 3.1.5 æ´¾ç”Ÿé€‰æ‹©å™¨ å­ä»£ï¼šçˆ¶å­å…³ç³»ï¼ˆéš”ä»£ä¸ç®¡ï¼‰çˆ¶ &gt; å­ä»£ åä»£ï¼šçˆ¶å­å­™ï¼Œæ›¾å­™ï¼Œä»å­™â€¦ çˆ¶ åä»£ div&gt;p åªå½±å“divçš„å­æ ‡ç­¾p å­™æ ‡ç­¾ä¸å½±å“ div p åä»£éƒ½å½±å“ 3.1.6 CSSä¼ªç±» CSSä¼ªç±»å¯å¯¹cssçš„é€‰æ‹©å™¨æ·»åŠ ä¸€äº›ç‰¹æ®Šæ•ˆæœ ä¼ªç±»å±æ€§åˆ—è¡¨ï¼š :active å‘è¢«æ¿€æ´»çš„å…ƒç´ æ·»åŠ æ ·å¼ã€‚ :hover å½“é¼ æ ‡æ‚¬æµ®åœ¨å…ƒç´ ä¸Šæ–¹æ—¶ï¼Œå‘å…ƒç´ æ·»åŠ æ ·å¼ã€‚ :link å‘æœªè¢«è®¿é—®çš„é“¾æ¥æ·»åŠ æ ·å¼ã€‚ :visited å‘å·²è¢«è®¿é—®çš„é“¾æ¥æ·»åŠ æ ·å¼ã€‚ :first-child å‘å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ æ·»åŠ æ ·å¼ã€‚ è¶…é“¾æ¥çš„ä¼ªç±»ï¼šè¦éµå®ˆä½¿ç”¨é¡ºåºï¼Œçˆ±æ¨åŸåˆ™ LoVeHAteï¼šlvha 1234a:link &#123;color: #FF0000&#125; /* æœªè®¿é—®çš„é“¾æ¥ */ a:visited &#123;color: #00FF00&#125; /* å·²è®¿é—®çš„é“¾æ¥ */ a:hover &#123;color: #FF00FF&#125; /* é¼ æ ‡ç§»åŠ¨åˆ°é“¾æ¥ä¸Š */ a:active &#123;color: #0000FF&#125; /* é€‰å®šçš„é“¾æ¥ */ 3.2 CSSåŸºæœ¬å±æ€§3.2.1æ–‡æœ¬å±æ€§ æŒ‡å®šå­—ä½“ï¼šfont-family : value; å­—ä½“å¤§å°ï¼šfont-size : value; pxï¼šåƒç´  emï¼šå€æ•° å­—ä½“åŠ ç²—ï¼šfont-weight : normal&#x2F;bold; æ–‡æœ¬é¢œè‰²ï¼šcolor : value; æ–‡æœ¬æ’åˆ—ï¼štext-align : left&#x2F;right&#x2F;center; æ–‡å­—ä¿®é¥°ï¼štext-decoration : none&#x2F;underline; è¡Œé«˜ï¼šline-height : value; é¦–è¡Œæ–‡æœ¬ç¼©è¿›ï¼štext-indent : value ï¼ˆ2emï¼‰; 3.2.2 èƒŒæ™¯å±æ€§CSS å…è®¸åº”ç”¨çº¯è‰²ä½œä¸ºèƒŒæ™¯ï¼Œä¹Ÿå…è®¸ä½¿ç”¨èƒŒæ™¯å›¾åƒåˆ›å»ºç›¸å½“å¤æ‚çš„æ•ˆæœã€‚ background-color è®¾ç½®å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ã€‚ background-image æŠŠå›¾åƒè®¾ç½®ä¸ºèƒŒæ™¯ã€‚ 1background-image: url(&#x27;img/1.jpg&#x27;); background-repeat è®¾ç½®èƒŒæ™¯å›¾åƒçš„å¢™çº¸æ•ˆæœï¼Œæ˜¯å¦åŠå¦‚ä½•é‡å¤ repeatï¼šåœ¨å‚ç›´æ–¹å‘å’Œæ°´å¹³æ–¹å‘é‡å¤ï¼Œä¸ºé‡å¤å€¼ repeat-xï¼šä»…åœ¨æ°´å¹³æ–¹å‘é‡å¤ repeat-yï¼šä»…åœ¨å‚ç›´æ–¹å‘é‡å¤ no-repeatï¼šä»…æ˜¾ç¤ºä¸€æ¬¡ background-position è®¾ç½®èƒŒæ™¯å›¾åƒçš„èµ·å§‹ä½ç½® æ§åˆ¶æ°´å¹³æ–¹å‘ xè½´ï¼š æ­£å€¼ï¼Œå‘å³ç§»åŠ¨ï¼› è´Ÿå€¼ï¼Œå‘å·¦ç§»åŠ¨ æ§åˆ¶å‚ç›´æ–¹å‘ yè½´ï¼š æ­£å€¼ï¼Œå‘ä¸‹ç§»åŠ¨ï¼› è´Ÿå€¼ï¼Œå‘ä¸Šç§»åŠ¨ 12/* å›¾ç‰‡å‘å·¦ç§»åŠ¨50pxï¼Œå‘ä¸‹ç§»åŠ¨100px ï¼ˆå¯ä»¥ä¸ºè´Ÿå€¼ï¼‰ */ background-position:50px 100px; background-attachment èƒŒæ™¯å›¾åƒæ˜¯å¦å›ºå®šæˆ–è€…éšç€é¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ»šåŠ¨ é»˜è®¤å€¼æ˜¯ scrollï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒèƒŒæ™¯ä¼šéšæ–‡æ¡£æ»šåŠ¨ å¯å–å€¼ä¸º fixedï¼šèƒŒæ™¯å›¾åƒå›ºå®šï¼Œå¹¶ä¸ä¼šéšç€é¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ»šåŠ¨ï¼Œå¸¸ç”¨äºå®ç°ç§°ä¸ºæ°´å°çš„å›¾åƒ 1background-attachment: fixed; 3.2.3 åˆ—è¡¨CSSåˆ—è¡¨å±æ€§ä½œç”¨å¦‚ä¸‹ï¼š è®¾ç½®ä¸åŒçš„åˆ—è¡¨é¡¹æ ‡è®°ä¸ºæœ‰åºåˆ—è¡¨ è®¾ç½®ä¸åŒçš„åˆ—è¡¨é¡¹æ ‡è®°ä¸ºæ— åºåˆ—è¡¨ è®¾ç½®åˆ—è¡¨é¡¹æ ‡è®°ä¸ºå›¾åƒ æœ‰ä¸¤ç§ç±»å‹çš„åˆ—è¡¨ï¼š æ— åºåˆ—è¡¨ - åˆ—è¡¨é¡¹æ ‡è®°ç”¨ç‰¹æ®Šå›¾å½¢ï¼ˆå¦‚å°é»‘ç‚¹ã€å°æ–¹æ¡†ç­‰ï¼‰ æœ‰åºåˆ—è¡¨ - åˆ—è¡¨é¡¹çš„æ ‡è®°æœ‰æ•°å­—æˆ–å­—æ¯ ä½¿ç”¨CSSï¼Œå¯ä»¥åˆ—å‡ºè¿›ä¸€æ­¥çš„æ ·å¼ï¼Œå¹¶å¯ç”¨å›¾åƒä½œåˆ—è¡¨é¡¹æ ‡è®°ã€‚ noneï¼šæ— æ ‡è®°ã€‚ï¼ˆå»é™¤æ ‡è®°ï¼‰ discï¼šé»˜è®¤ã€‚æ ‡è®°æ˜¯å®å¿ƒåœ†ã€‚ circleï¼šæ ‡è®°æ˜¯ç©ºå¿ƒåœ†ã€‚ squareï¼šæ ‡è®°æ˜¯å®å¿ƒæ–¹å—ã€‚ decimalï¼šæ ‡è®°æ˜¯æ•°å­—ã€‚ decimal-leading-zeroï¼š0å¼€å¤´çš„æ•°å­—æ ‡è®°ã€‚(01, 02, 03, ç­‰ã€‚) lower-romanï¼šå°å†™ç½—é©¬æ•°å­—(i, ii, iii, iv, v, ç­‰ã€‚) upper-romanï¼šå¤§å†™ç½—é©¬æ•°å­—(I, II, III, IV, V, ç­‰ã€‚) lower-alphaï¼šå°å†™è‹±æ–‡å­—æ¯The marker is lower-alpha (a, b, c, d, e,ç­‰ã€‚) upper-alphaï¼šå¤§å†™è‹±æ–‡å­—æ¯The marker is upper-alpha (A, B, C, D, E,ç­‰ã€‚) 3.2.4 è¾¹æ¡†å±æ€§CSSè¾¹æ¡†å±æ€§å…è®¸ä½ æŒ‡å®šä¸€ä¸ªå…ƒç´ è¾¹æ¡†çš„æ ·å¼å’Œé¢œè‰²ã€‚ 12345678910&lt;style&gt; div&#123; border-width: 20px; border-color: green; border-style: outset; &#125; &lt;/style&gt;&lt;body&gt; &lt;div&gt;hello&lt;/div&gt; &lt;/body&gt; border-styleå–å€¼ï¼š 3.2.5 è½®å»“å±æ€§è½®å»“ï¼ˆoutlineï¼‰æ˜¯ç»˜åˆ¶äºå…ƒç´ å‘¨å›´çš„ä¸€æ¡çº¿ï¼Œä½äºè¾¹æ¡†è¾¹ç¼˜çš„å¤–å›´ï¼Œå¯èµ·åˆ°çªå‡ºå…ƒç´ çš„ä½œç”¨ã€‚ è½®å»“å’Œè¾¹æ¡†çš„åŒºåˆ«ï¼š è¾¹æ¡† (border) å¯ä»¥æ˜¯å›´ç»•å…ƒç´ å†…å®¹å’Œå†…è¾¹è·çš„ä¸€æ¡æˆ–å¤šæ¡çº¿ï¼› è½®å»“ï¼ˆoutlineï¼‰æ˜¯ç»˜åˆ¶äºå…ƒç´ å‘¨å›´çš„ä¸€æ¡çº¿ï¼Œä½äºè¾¹æ¡†è¾¹ç¼˜çš„å¤–å›´ï¼Œå¯èµ·åˆ°çªå‡ºå…ƒç´ çš„ä½œç”¨ã€‚ CSS outline å±æ€§è§„å®šå…ƒç´ è½®å»“çš„æ ·å¼ã€é¢œè‰²å’Œå®½åº¦ã€‚ 3.2.6 ç›’å­æ¨¡å‹æ‰€æœ‰HTMLå…ƒç´ å¯ä»¥çœ‹ä½œç›’å­ï¼Œåœ¨CSSä¸­ï¼Œâ€box modelâ€è¿™ä¸€æœ¯è¯­æ˜¯ç”¨æ¥è®¾è®¡å’Œå¸ƒå±€æ—¶ä½¿ç”¨ã€‚ CSSç›’å­æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›’å­ï¼Œå°è£…å‘¨å›´çš„HTMLå…ƒç´ ï¼Œå®ƒåŒ…æ‹¬ï¼šè¾¹è·ï¼Œè¾¹æ¡†ï¼Œå¡«å……ï¼Œå’Œå®é™…å†…å®¹ã€‚ç›’å­æ¨¡å‹å…è®¸æˆ‘ä»¬åœ¨å…¶å®ƒå…ƒç´ å’Œå‘¨å›´å…ƒç´ è¾¹æ¡†ä¹‹é—´çš„ç©ºé—´æ”¾ç½®å…ƒç´ ã€‚ä¸‹é¢çš„å›¾ç‰‡è¯´æ˜äº†ç›’å­æ¨¡å‹(Box Model)ï¼š margin(å¤–è¾¹è·) - ç›’å­ä¸ç›’å­ä¹‹é—´çš„è·ç¦» border(è¾¹æ¡†) - ç›’å­çš„ä¿æŠ¤å£³ padding(å†…è¾¹è·&#x2F;å¡«å……) - å†…å¡«å……ï¼Œç›’å­è¾¹ä¸å†…å®¹ä¹‹é—´çš„è·ç¦» content(å†…å®¹) - ç›’å­çš„å†…å®¹ï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬æˆ–å›¾åƒ 3.3 CSSå®šä½3.3.1 é»˜è®¤å®šä½ å—çº§å…ƒç´ ï¼šh1~h6ï¼Œp, div ç­‰ï¼Œè‡ªä¸Šè€Œä¸‹ï¼Œå‚ç›´æ’åˆ—ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰ï¼›å¯ä»¥æ”¹å˜å®½é«˜ è¡Œå†…å…ƒç´ ï¼ša,b,span,ç­‰ï¼Œä»å·¦å‘å³ï¼Œæ°´å¹³æ’åˆ—ï¼ˆä¸ä¼šæ¢è¡Œï¼‰ï¼›ä¸èƒ½æ”¹å˜å®½é«˜ è¡Œå†…å—å…ƒç´ ï¼šinput,imgç­‰ï¼Œä»å·¦å‘å³ï¼Œæ°´å¹³æ’åˆ—ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰ï¼›å¯ä»¥æ”¹å˜å®½é«˜ 3.3.2 æµ®åŠ¨å®šä½ è®©å…ƒç´ â€œé£â€èµ·æ¥ã€‚ä¸ä»…å¯ä»¥é ç€å·¦è¾¹æˆ–å³è¾¹ã€‚è¿˜å¯ä»¥æ¶ˆé™¤â€œå—çº§â€çš„éœ¸é“ç‰¹æ€§ï¼ˆç‹¬è‡ªå ä¸€è¡Œï¼‰ã€‚ floatå–å€¼ï¼š none ï¼šä¸æµ®åŠ¨ leftï¼šè´´ç€å·¦è¾¹ æµ®åŠ¨ rightï¼šè´´ç€å³è¾¹ æµ®åŠ¨ 3.3.3 ç›¸å¯¹å®šä½å’ŒåŸæ¥çš„ä½ç½®è¿›è¡Œæ¯”è¾ƒï¼Œè¿›è¡Œç§»åŠ¨å®šä½ï¼ˆåç§»ï¼‰ 3.3.4 ç»å¯¹å®šä½æœ¬å…ƒç´ ä¸å·²å®šä½çš„ç¥–å…ˆå…ƒç´ çš„è·ç¦» å¦‚æœçˆ¶çº§å…ƒç´ å®šä½äº†ï¼Œå°±ä»¥çˆ¶çº§ä¸ºå‚ç…§ç‰©ï¼› å¦‚æœçˆ¶çº§æ²¡å®šä½ï¼Œæ‰¾çˆ·çˆ·çº§ï¼Œçˆ·çˆ·å®šä½äº†ï¼Œä»¥çˆ·çˆ·ä¸ºå‚ç…§ç‰©ã€‚ å¦‚æœçˆ·çˆ·æ²¡å®šä½ï¼Œç»§ç»­å‘ä¸Šæ‰¾ï¼Œéƒ½æ²¡å®šä½çš„è¯ï¼Œbodyæ˜¯æœ€ç»ˆé€‰æ‹© 1234567&lt;div class=&quot;yeye&quot;&gt; &lt;div class=&quot;father&quot;&gt; &lt;div class=&quot;a&quot;&gt;1&lt;/div&gt; &lt;div class=&quot;b&quot;&gt;2&lt;/div&gt; &lt;div class=&quot;c&quot;&gt;3&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; ä»¥çˆ¶èŠ‚ç‚¹ä½œä¸ºå‚ç…§ç‰© ä»¥çˆ·çˆ·èŠ‚ç‚¹ä½œä¸ºå‚ç…§ç‰© 3.3.5 å›ºå®šå®šä½å°†å…ƒç´ çš„å†…å®¹å›ºå®šåœ¨çª—å£çš„æŸä¸ªä½ç½®ï¼Œå½“ç”¨æˆ·å‘ä¸‹æ»šåŠ¨é¡µé¢æ—¶å…ƒç´ æ¡†å¹¶ä¸éšç€ç§»åŠ¨ position:fixed 3.3.6 z-indexå¦‚æœæœ‰é‡å å…ƒç´ ï¼Œä½¿ç”¨zè½´å±æ€§ï¼Œå®šä¹‰ä¸Šä¸‹å±‚æ¬¡ã€‚å¤§çš„åœ¨ä¸Šé¢ æ³¨æ„ï¼š zè½´å±æ€§ï¼Œè¦é…åˆç›¸å¯¹æˆ–ç»å¯¹å®šä½æ¥ä½¿ç”¨ã€‚ zå€¼æ²¡æœ‰é¢å®šæ•°å€¼ï¼ˆæ•´å‹å°±å¯ä»¥ï¼Œå…·ä½“ç”¨æ•°å­—å‡ ï¼Œæ‚‰å¬å°Šä¾¿ï¼‰ 4. CSS34.1 åœ†è§’border-radiusï¼šå·¦ä¸Š å³ä¸Š å³ä¸‹ å·¦ä¸‹; border-radiusï¼šå››ä¸ªè§’; border-radiusï¼š50%; åœ†å½¢ï¼› 4.2 ç›’å­é˜´å½±box-shadowï¼š1 2 3 4 5; 1ï¼šæ°´å¹³åç§»2ï¼šå‚ç›´åç§»3ï¼šæ¨¡ç³ŠåŠå¾„4ï¼šæ‰©å¼ åŠå¾„5ï¼šé¢œè‰² 4.3 æ¸å˜4.3.1 çº¿æ€§æ¸å˜1background:linear-gradient([æ–¹å‘/è§’åº¦]ï¼Œé¢œè‰²åˆ—è¡¨)ï¼› 123456789101112131415161718&lt;style&gt; div&#123;width: 200px; height: 60px; margin: 10px; &#125; .a1 &#123;background: linear-gradient(red,black); &#125; .a2 &#123;background: linear-gradient(red,black,pink, green); &#125; .a3 &#123;background: linear-gradient(to left,red,black); &#125; .a4 &#123;background: linear-gradient(to top left,red,black); &#125; .a5 &#123;background: linear-gradient(30deg,red,black); &#125; &lt;/style&gt; &lt;body&gt; &lt;div class=&quot;a1&quot;&gt;&lt;/div&gt; &lt;div class=&quot;a2&quot;&gt;&lt;/div&gt; &lt;div class=&quot;a3&quot;&gt;&lt;/div&gt; &lt;div class=&quot;a4&quot;&gt;&lt;/div&gt; &lt;div class=&quot;a5&quot;&gt;&lt;/div&gt; &lt;/body&gt; 4.3.2 å¾„å‘æ¸å˜ä»¥åœ†å¿ƒå‘å¤–å‘æ•£ 1background: radial-gradient(é¢œè‰²åˆ—è¡¨); 1234567891011121314&lt;style&gt; div &#123; width: 200px; height: 200px; margin: 10px; &#125; .a1 &#123; background: radial-gradient(red, black); &#125; .a2 &#123; background: radial-gradient(red, black, pink, green); &#125; .a3 &#123; border-radius: 50%; background: radial-gradient(red, black); &#125; &lt;/style&gt; &lt;body&gt; &lt;div class=&quot;a1&quot;&gt;&lt;/div&gt; &lt;div class=&quot;a2&quot;&gt;&lt;/div&gt; &lt;div class=&quot;a3&quot;&gt;&lt;/div&gt;&lt;/body&gt; 4.4 èƒŒæ™¯background-originï¼šæŒ‡å®šäº†èƒŒæ™¯å›¾åƒçš„ä½ç½®åŒºåŸŸ border-box : èƒŒæ™¯è´´è¾¹æ¡†çš„è¾¹ padding-box : èƒŒæ™¯è´´å†…è¾¹æ¡†çš„è¾¹ content-box : èƒŒæ™¯è´´å†…å®¹çš„è¾¹ 123456789101112131415161718&lt;style&gt; div &#123; background: url(&quot;img/1.jpg&quot;) no-repeat; width: 200px; height: 80px; margin: 20px; border: 10px dashed black; padding: 20px; &#125; .a &#123;background-origin: border-box; &#125; .b &#123;background-origin: padding-box; &#125; .c &#123;background-origin: content-box; &#125; &lt;/style&gt; &lt;body&gt; &lt;div class=&quot;a&quot;&gt;&lt;/div&gt; &lt;div class=&quot;b&quot;&gt;&lt;/div&gt; &lt;div class=&quot;c&quot;&gt;&lt;/div&gt; &lt;/body&gt; 4.4.2 èƒŒæ™¯å‰ªè£background-clip: border-box è¾¹æ¡†å¼€åˆ‡ padding-box å†…è¾¹è·å¼€åˆ‡ content-box å†…å®¹å¼€åˆ‡ 1234567891011121314151617&lt;style&gt; div &#123; width: 200px; height: 80px; border: 10px dashed red; background-color: darkcyan; margin: 20px; padding: 20px; &#125; .a &#123;background-clip: border-box; &#125; .b &#123;background-clip: padding-box; &#125; .c &#123;background-clip: content-box; &#125; &lt;/style&gt; &lt;body&gt; &lt;div class=&quot;a&quot;&gt;&lt;/div&gt; &lt;div class=&quot;b&quot;&gt;&lt;/div&gt; &lt;div class=&quot;c&quot;&gt;&lt;/div&gt; &lt;/body&gt; 4.4.3 èƒŒæ™¯å¤§å°background-size: cover ç¼©æ”¾æˆå®Œå…¨è¦†ç›–èƒŒæ™¯åŒºåŸŸæœ€å°å¤§å° contain ç¼©æ”¾æˆå®Œå…¨é€‚åº”èƒŒæ™¯åŒºåŸŸæœ€å¤§å¤§å° 123456789101112131415&lt;style&gt; div &#123; background: url(&quot;img/1.jpg&quot;) no-repeat; width: 200px; height: 100px; border: 2px solid red; margin: 20px; &#125; .a &#123;background-size: cover; /* å®Œå…¨è¦†ç›– */ &#125; .b &#123;background-size: contain; /* å®Œå…¨é€‚åº” */ &#125; &lt;/style&gt; &lt;body&gt; &lt;div class=&quot;a&quot;&gt;&lt;/div&gt; &lt;div class=&quot;b&quot;&gt;&lt;/div&gt; &lt;/body&gt; 4.5 è¿‡åº¦åŠ¨ç”»4.5.1 è¿‡åº¦ä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œä¸­é—´çš„â€œç¼“æ…¢â€è¿‡ç¨‹ï¼› ç¼ºç‚¹æ˜¯ï¼Œæ§åˆ¶ä¸äº†ä¸­é—´æŸä¸ªæ—¶é—´ç‚¹ã€‚ transitionï½›1 2 3 4ï½ 1ï¼šè¿‡æ¸¡æˆ–åŠ¨ç”»æ¨¡æ‹Ÿçš„csså±æ€§ 2ï¼šå®Œæˆè¿‡æ¸¡æ‰€ä½¿ç”¨çš„æ—¶é—´ï¼ˆ2så†…å®Œæˆï¼‰ 3ï¼šè¿‡æ¸¡å‡½æ•°â€¦ 4ï¼šè¿‡æ¸¡å¼€å§‹å‡ºç°çš„å»¶è¿Ÿæ—¶é—´ 1transition: width 2s ease 1s; ç›®å‰ï¼Œcss3åªå¼€å‘å‡ºéƒ¨åˆ†çš„è¿‡æ¸¡å±æ€§ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š 12345678910111213141516&lt;style&gt; div&#123; width: 100px; height: 50px; border: 2px solid red; &#125; .a&#123; transition: width 2s linear 1s; /*1ç§’è¿‡åï¼Œdivåœ¨2ç§’å†…åŒ€é€Ÿç¼“æ…¢çš„å˜å®½*/ &#125; div:hover&#123; width: 300px; &#125; /*è§¦å‘divå˜å®½*/ &lt;/style&gt; &lt;body&gt; &lt;div class=&quot;a&quot;&gt;Hello&lt;/div&gt; &lt;/body&gt; 4.5.2 åŠ¨ç”»ä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œè¿‡ç¨‹ä¸­æ¯ä¸ªæ—¶é—´ç‚¹éƒ½å¯ä»¥æ§åˆ¶ã€‚ å…³é”®å¸§ï¼š@keyframes åŠ¨ç”»å¸§ { from{} to{} } æˆ–è€…{ 0%{} 20%{}â€¦ } åŠ¨ç”»å±æ€§ï¼šanimation{ 1 , 2 , 3 , 4 , 5 }1ï¼šåŠ¨ç”»å¸§2ï¼šæ‰§è¡Œæ—¶é—´3ï¼šè¿‡æ¸¡å‡½æ•°4ï¼šåŠ¨ç”»æ‰§è¡Œçš„å»¶è¿Ÿï¼ˆå¯çœç•¥ï¼‰5ï¼šåŠ¨ç”»æ‰§è¡Œçš„æ¬¡æ•° éœ€æ±‚1ï¼šä¸€ä¸ª å…ƒç´ ä»å·¦å‘å³ç§»åŠ¨ï¼Œ3ç§’å†…æ‰§è¡Œ2æ¬¡ 123456789101112131415161718&lt;style&gt; div&#123; width: 700px; border: 1px solid red; &#125; @keyframes x&#123; from&#123; margin-left: 0px;&#125; to&#123; margin-left: 550px;&#125; &#125; img&#123; animation: x 3s linear 2; &#125; &lt;/style&gt; &lt;body&gt; &lt;div&gt; &lt;img src=&quot;img/cat.gif&quot;&gt; &lt;/div&gt; &lt;/body&gt; éœ€æ±‚2ï¼šä¸€ä¸ª å…ƒç´ ä»å·¦å‘å³ç§»åŠ¨ï¼Œ3ç§’å†…æ‰§è¡Œå®Œæˆã€‚æ— é™æ¬¡äº¤æ›¿æ‰§è¡Œinfiniteï¼šæ— é™æ¬¡alternateï¼šæ¥å›æ‰§è¡Œï¼ˆäº¤æ›¿ï¼Œä¸€å»ä¸€å›ï¼‰ 12345678910111213141516171819202122232425262728&lt;style&gt; .wai&#123; width: 600px; height: 100px; border: 2px solid red; &#125; .nei&#123; width: 40px; height: 80px; margin: 5px; background: red; &#125; .nei&#123; animation: x 3s linear infinite alternate; &#125; @keyframes x&#123; 0%&#123; margin-left: 0px; &#125; 25%&#123; background: yellowgreen; &#125; 50%&#123; background: goldenrod; &#125; 75%&#123; background: palevioletred;&#125; 100%&#123;background: coral; margin-left: 550px; &#125; &#125;&lt;/style&gt; &lt;body&gt; &lt;div class=&quot;wai&quot;&gt; &lt;div class=&quot;nei&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"JDBCç»¼åˆæ¡ˆä¾‹","slug":"JDBCç»¼åˆæ¡ˆä¾‹","date":"2020-01-04T01:51:59.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2020/01/04/JDBCç»¼åˆæ¡ˆä¾‹/","link":"","permalink":"http://yournotes.cn/2020/01/04/JDBC%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/","excerpt":"1. å•†åŸæ¡ˆä¾‹è¡¨è®¾è®¡é€šè¿‡å¯¹å•†åŸé¡¹ç›®çš„éƒ¨åˆ†è¡¨å…³ç³»è¿›è¡Œåˆ†æ,å®Œæˆæ•°æ®åº“è¡¨çš„è®¾è®¡","text":"1. å•†åŸæ¡ˆä¾‹è¡¨è®¾è®¡é€šè¿‡å¯¹å•†åŸé¡¹ç›®çš„éƒ¨åˆ†è¡¨å…³ç³»è¿›è¡Œåˆ†æ,å®Œæˆæ•°æ®åº“è¡¨çš„è®¾è®¡ 1.1 è¡¨å…³ç³»åˆ†æ 1.2 å»ºåº“,å»ºè¡¨ åˆ›å»ºåä¸º storeçš„æ•°æ®åº“, å¯¹åº”å•†åŸé¡¹ç›® 1create database db6 character set utf8; åˆ›å»ºç”¨æˆ·è¡¨ 12345678CREATE TABLE user ( uid varchar(32) PRIMARY KEY, -- ç”¨æˆ·ID username varchar(20) , -- ç”¨æˆ·å password varchar(20) , -- å¯†ç  telephone varchar(20) , -- ç”µè¯ birthday date , -- ç”Ÿæ—¥ sex varchar(10) -- æ€§åˆ«); 123456INSERT INTO USER VALUES (&#x27;001&#x27;,&#x27;æ¸£æ¸£è¾‰&#x27;,&#x27;123456&#x27;,&#x27;13511112222&#x27;,&#x27;2015-11-04&#x27;,&#x27;ç”·&#x27;),(&#x27;002&#x27;,&#x27;è¯æ°´å“¥&#x27;,&#x27;123456&#x27;,&#x27;13533334444&#x27;,&#x27;1990-02-01&#x27;,&#x27;ç”·&#x27;),(&#x27;003&#x27;,&#x27;å¤§æ˜ç™½&#x27;,&#x27;123456&#x27;,&#x27;13544445555&#x27;,&#x27;2015-11-03&#x27;,&#x27;ç”·&#x27;),(&#x27;004&#x27;,&#x27;é•¿æµ·&#x27;,&#x27;123456&#x27;,&#x27;13566667777&#x27;,&#x27;2000-02-01&#x27;,&#x27;ç”·&#x27;),(&#x27;005&#x27;,&#x27;ä¹”æ‰&#x27;,&#x27;123456&#x27;,&#x27;13588889999&#x27;,&#x27;2000-02-01&#x27;,&#x27;ç”·&#x27;); åˆ›å»ºè®¢å•è¡¨ 1234567891011CREATE TABLE orders ( oid varchar(32) PRIMARY KEY, -- è®¢å•id ordertime datetime , -- ä¸‹å•æ—¶é—´ total double , -- æ€»é‡‘é¢ name varchar(20), -- æ”¶è´§äººå§“å telephone varchar(20) , -- ç”µè¯ address varchar(30) , -- åœ°å€ state int(11) , -- è®¢å•çŠ¶æ€ uid varchar(32), -- å¤–é”®å­—æ®µ å¯¹åº”ç”¨æˆ·è¡¨id CONSTRAINT ofk_0001 FOREIGN KEY (uid) REFERENCES user (uid)); 123-- æ’å…¥ä¸€æ¡è®¢å•æ•°æ®INSERT INTO orders VALUES(&#x27;order001&#x27;,&#x27;2019-10-11&#x27;,5500,&#x27;ä¹”æ‰&#x27;,&#x27;15512342345&#x27;,&#x27;çš‡å®¶æ´—æµ´&#x27;,0,&#x27;001&#x27;); åˆ›å»ºå•†å“åˆ†ç±»è¡¨ 1234CREATE TABLE category ( cid varchar(32) PRIMARY KEY, cname varchar(20)); 1INSERT INTO `category` VALUES (&#x27;1&#x27;,&#x27;æ‰‹æœºæ•°ç &#x27;),(&#x27;2&#x27;,&#x27;ç”µè„‘åŠå…¬&#x27;),(&#x27;3&#x27;,&#x27;è¿åŠ¨é‹æœ&#x27;),(&#x27;4&#x27;,&#x27;å›¾ä¹¦éŸ³åƒ&#x27;); åˆ›å»ºå•†å“è¡¨ 12345678910CREATE TABLE product ( pid varchar(32) PRIMARY KEY, -- å•†å“id pname varchar(50) , -- å•†å“åç§° price double, -- å•†å“ä»·æ ¼ pdesc varchar(255), -- å•†å“æè¿° pflag int(11) , -- å•†å“çŠ¶æ€ 1 ä¸Šæ¶ ,0 ä¸‹æ¶ cid varchar(32) , -- å¤–é”®å¯¹åº” åˆ†ç±»è¡¨id KEY sfk_0001 (cid), CONSTRAINT sfk_0001 FOREIGN KEY (cid) REFERENCES category (cid)); 123456789101112INSERT INTO `product` VALUES (&#x27;1&#x27;,&#x27;å°ç±³6&#x27;,2200,&#x27;å°ç±³ ç§»åŠ¨è”é€šç”µä¿¡4Gæ‰‹æœº åŒå¡åŒå¾…&#x27;,0,&#x27;1&#x27;),(&#x27;2&#x27;,&#x27;åä¸ºMate9&#x27;,2599,&#x27;åä¸º åŒå¡åŒå¾… é«˜æ¸…å¤§å±&#x27;,0,&#x27;1&#x27;),(&#x27;3&#x27;,&#x27;OPPO11&#x27;,3000,&#x27;ç§»åŠ¨è”é€š åŒ4Gæ‰‹æœº&#x27;,0,&#x27;1&#x27;),(&#x27;4&#x27;,&#x27;åä¸ºè£è€€&#x27;,1499,&#x27;3GBå†…å­˜æ ‡å‡†ç‰ˆ é»‘è‰² ç§»åŠ¨4Gæ‰‹æœº&#x27;,0,&#x27;1&#x27;),(&#x27;5&#x27;,&#x27;åç¡•å°å¼ç”µè„‘&#x27;,5000,&#x27;çˆ†æ¬¾ç›´é™ï¼Œæ»¡åƒå‡ç™¾&#x27;,0,&#x27;2&#x27;),(&#x27;6&#x27;,&#x27;MacBook&#x27;,6688,&#x27;128GB é—ªå­˜&#x27;,0,&#x27;2&#x27;),(&#x27;7&#x27;,&#x27;ThinkPad&#x27;,4199,&#x27;è½»è–„ç³»åˆ—1)&#x27;,0,&#x27;2&#x27;),(&#x27;8&#x27;,&#x27;è”æƒ³å°æ–°&#x27;,4499,&#x27;14è‹±å¯¸è¶…è–„ç¬”è®°æœ¬ç”µè„‘&#x27;,0,&#x27;2&#x27;),(&#x27;9&#x27;,&#x27;æå®éŸ³é€Ÿ6&#x27;,500,&#x27;å®æˆ˜ç¯®çƒé‹&#x27;,0,&#x27;3&#x27;),(&#x27;10&#x27;,&#x27;AJ11&#x27;,3300,&#x27;ä¹”ä¸¹å®æˆ˜ç³»åˆ—&#x27;,0,&#x27;3&#x27;),(&#x27;11&#x27;,&#x27;AJ1&#x27;,5800,&#x27;ç²¾ç¥å°ä¼™ç³»åˆ—&#x27;,0,&#x27;3&#x27;); è®¢å•é¡¹è¡¨ (ä¸­é—´è¡¨) 12345678910-- è®¢å•é¡¹è¡¨CREATE TABLE orderitem ( itemid VARCHAR(32) PRIMARY KEY, -- è®¢å•é¡¹ID pid VARCHAR(32), -- å¤–é”® å¯¹åº”å•†å“è¡¨ id oid VARCHAR(32), -- å¤–é”® å¯¹åº”è®¢å•è¡¨ id KEY fk_0001 (pid), KEY fk_0002 (oid), CONSTRAINT fk_0001 FOREIGN KEY (pid) REFERENCES product (pid), CONSTRAINT fk_0002 FOREIGN KEY (oid) REFERENCES orders (oid)); 123-- å‘ä¸­é—´è¡¨ä¸­æ’å…¥ä¸¤æ¡æ•°æ®INSERT INTO orderitem VALUES(&#x27;item001&#x27;,&#x27;1&#x27;,&#x27;order001&#x27;);INSERT INTO orderitem VALUES(&#x27;item002&#x27;,&#x27;11&#x27;,&#x27;order001&#x27;); 2.ç¯å¢ƒæ­å»º2.1 é¡¹ç›®ç»“æ„1234com.lagou.app æµ‹è¯•åŒ… ç”¨äºå¯¹DAOä»£ç è¿›è¡Œæµ‹è¯•com.lagou.dao daoåŒ… æ•°æ®è®¿é—®å±‚,åŒ…å«æ‰€æœ‰å¯¹æ•°æ®åº“çš„ç›¸å…³æ“ä½œçš„ç±»com.lagou.entity å®ä½“åŒ… ä¿å­˜æ ¹æ®æ•°æ®åº“è¡¨ å¯¹åº”åˆ›å»ºçš„JavaBeanç±»com.lagou.utils å·¥å…·åŒ… 2.2 å¯¼å…¥æ‰€éœ€JaråŒ…1æˆ‘ä»¬åªéœ€è¦å¯¼å…¥myjarä»“åº“åˆ°é¡¹ç›®ä¸­å°±å¯ä»¥äº† 2.3 å¯¼å…¥é…ç½®æ–‡ä»¶åŠå·¥å…·ç±» 3. JavaBeanç±»åˆ›å»º3.1 è®¾è®¡ç”¨æˆ·ä¸è®¢å•3.1.1 ä¸€å¯¹å¤šå…³ç³»åˆ†æ åœ¨Javaä¸€å¯¹å¤šçš„æ•°æ®å…³ç³»ä¸­ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹è®¾è®¡åŸåˆ™ï¼š Javaç±»çš„åç§° &#x3D; å®ä½“è¡¨çš„åç§° Javaç±»çš„å±æ€§ &#x3D; å®ä½“è¡¨çš„å­—æ®µ Javaç±»çš„ä¸€ä¸ªå¯¹è±¡ &#x3D; è¡¨çš„ä¸€è¡Œè®°å½• å¤–é”®å…³ç³» &#x3D; å¼•ç”¨é…ç½® ä¸€ä¸ªç”¨æˆ·æ‹¥æœ‰å¤šä¸ªè®¢å•,æ‰€ä»¥ ç”¨æˆ·æ˜¯ä¸€çš„ä¸€æ–¹, è®¢å•æ˜¯å¤šçš„ä¸€æ–¹ 3.1.2 Userç±»12345678910111213141516171819202122232425/** * ç”¨æˆ·è¡¨ å¯¹åº” Userç±» * `uid` VARCHAR(32) NOT NULL, * `username` VARCHAR(20) DEFAULT NULL, * `password` VARCHAR(20) DEFAULT NULL, * `telephone` VARCHAR(20) DEFAULT NULL, * `birthday` DATE DEFAULT NULL, * `sex` VARCHAR(10) DEFAULT NULL, * */public class User &#123; private String uid; private String username; private String password; private String telephone; private String birthday; private String sex; //æä¾› get set toStringæ–¹æ³•&#125; 3.1.3 Ordersç±»1234567891011121314151617181920212223242526/** * è®¢å•è¡¨ * `oid` VARCHAR(32) NOT NULL, * `ordertime` DATETIME DEFAULT NULL, * `total` DOUBLE DEFAULT NULL, * `name` VARCHAR(20) DEFAULT NULL, * `telephone` VARCHAR(20) DEFAULT NULL, * `address` VARCHAR(30) DEFAULT NULL, * `state` INT(11) DEFAULT NULL, * `uid` VARCHAR(32) DEFAULT NULL, * * */public class Orders &#123; private String oid; //è®¢å•å· private String ordertime; //ä¸‹å•æ—¶é—´ private double total; //è®¢å•çš„æ€»é‡‘é¢ private String name; //æ”¶è´§äººå§“å private String telephone; //æ”¶è´§äººç”µè¯ private String address; //æ”¶è´§äººåœ°å€ private int state; //è®¢å•çŠ¶æ€ 1 ä»£è¡¨å·²æ”¯ä»˜ , 0 ä»£è¡¨æœªæ”¯ä»˜ //è®¢å•å±äºå“ªä¸ªç”¨æˆ·å‘¢ ? //æä¾› get set toStringæ–¹æ³•&#125; 3.1.4 Ordersç±»è®¾è®¡åˆ†æ ç¬¬ä¸€ç§æ–¹å¼ æ ¹æ®ä¸¤å¼ è¡¨å…³ç³»çš„æè¿° æˆ‘ä»¬å¯ä»¥åœ¨ è®¢å•ç±»ä¸­ æ·»åŠ ä¸€ä¸ªuid æˆå‘˜å˜é‡,è¡¨ç¤ºè®¢å•å±äºå“ªä¸ªç”¨æˆ· 1private String uid; ä½†æ˜¯è¿™æ ·è®¾è®¡ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜,æ¯”å¦‚ æˆ‘è¦æŸ¥è¯¢çš„æ˜¯è®¢å•æ˜¯å±äºå“ªä¸ªç”¨æˆ·çš„ç”¨æˆ·å ? ä½†æ˜¯æˆ‘ä»¬åªæœ‰ä¸€ä¸ªuid ç¬¬äºŒç§æ–¹å¼ Javaç±»è¡¨ç¤ºä¸€å¯¹å¤šå…³ç³»,å¯ä»¥åœ¨å¤šçš„ä¸€æ–¹æ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡,è¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹ å°±æ˜¯ä¸€çš„ä¸€æ–¹çš„ç±»å‹. å†åœ¨è®¢å•è¡¨ä¸­ æ·»åŠ ä¸€ä¸ª Userå¯¹è±¡,Userå¯¹è±¡ä¸­ ,ä¿å­˜è¯¥è®¢å•å…³è”çš„ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ 12private String uid;private User user; 3.1.4 ä¿®æ”¹Ordersç±»12345678910111213141516public class Orders &#123; private String oid; //è®¢å•å· private String ordertime; //ä¸‹å•æ—¶é—´ private double total; //è®¢å•çš„æ€»é‡‘é¢ private String name; //æ”¶è´§äººå§“å private String telephone; //æ”¶è´§äººç”µè¯ private String address; //æ”¶è´§äººåœ°å€ private int state; //è®¢å•çŠ¶æ€ 1 ä»£è¡¨å·²æ”¯ä»˜ , 0 ä»£è¡¨æœªæ”¯ä»˜ //è®¢å•å±äºå“ªä¸ªç”¨æˆ·å‘¢ ? private String uid; //è¡¨ç¤ºå¤–é”® private User user; //ç”¨æ¥ä¿å­˜è®¢å•å¯¹åº”çš„è¯¦ç»†çš„ç”¨æˆ·ä¿¡æ¯ //æä¾› get set toStringæ–¹æ³•&#125; 3.2 è®¾è®¡å•†å“ä¸åˆ†ç±»åˆ†ç±»ä¸å•†å“ åŒæ ·æ˜¯ä¸€å¯¹å¤šå…³ç³», æˆ‘ä»¬å¯ä»¥åœ¨å¤šçš„ä¸€æ–¹è¿›è¡Œæ“ä½œ æ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡ ç±»å‹æ˜¯ä¸€çš„ä¸€æ–¹çš„ç±»å‹ 3.2.1 Categoryç±»1234567public class Category &#123; private String cid; private String cname; //æä¾› get set toStringæ–¹æ³•&#125; 3.2.2 Productç±»123456789101112131415161718public class Product &#123; private String pid; private String pname; private double price; private String pdesc; private int pflag; //æ˜¯å¦ä¸Šæ¶ 1 ä¸Šæ¶ ,0 ä¸‹æ¶ private String cid; //å¤–é”® å¯¹åº”åˆ†ç±»è¡¨ä¸»é”® private Category category; //ç”¨äºä¿å­˜Categoryçš„è¯¦ç»†æ•°æ® //æä¾› get set toStringæ–¹æ³•&#125; 3.3 è®¾è®¡è®¢å•é¡¹3.3.1 å¤šå¯¹å¤šå…³ç³»åˆ†æå•†å“ä¸è®¢å•æ˜¯å¤šå¯¹å¤šå…³ç³», ä¸€ä¸ªè®¢å•ä¸Šå¯ä»¥æœ‰å¤šä¸ªå•†å“, ä¸€ä¸ªå•†å“å¯ä»¥å‡ºç°åœ¨å¤šä¸ªè®¢å•ä¸­. å¤šå¯¹å¤šå»ºè¡¨åŸåˆ™ éœ€è¦ä¸€å¼ ä¸­é—´è¡¨,ä¸­é—´è¡¨ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªå­—æ®µ,ä½œä¸ºä¸­é—´è¡¨çš„å¤–é”®åˆ†åˆ«æŒ‡å‘å¦å¤–ä¸¤å¼ è¡¨çš„ä¸»é”® 3.3.2 åˆ›å»ºOrderItem123456789101112131415161718192021/** * è®¢å•é¡¹è¡¨(ä¸­é—´è¡¨) * `itemid` VARCHAR(32) NOT NULL, * `pid` VARCHAR(32) DEFAULT NULL, * `oid` VARCHAR(32) DEFAULT NULL, * * */public class OrderItem &#123; //è®¢å•é¡¹ æŒ‡çš„æ˜¯ä¸­é—´è¡¨ä¸­çš„ä¸€æ¡æ•°æ® private String itemid; //è®¢å•é¡¹çš„id private String pid; //å¤–é”® æŒ‡å‘å•†å“è¡¨ä¸»é”® private String oid; //å¤–é”® æŒ‡å‘è®¢å•è¡¨çš„ä¸»é”® private Product product;//è®¢å•é¡¹å†…éƒ¨çš„å•†å“è¯¦ç»†ä¿¡æ¯ private Orders orders;//è®¢å•é¡¹å±äºå“ªä¸ªè®¢å• &#125; 4.ç¼–å†™DAOç±»4.1 UserDao éœ€æ±‚ä¸€: ç¼–å†™ä¸€ä¸ªæ³¨å†Œç”¨æˆ·çš„æ–¹æ³•,æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªUserå¯¹è±¡ éœ€æ±‚äºŒ: ç¼–å†™ä¸€ä¸ª ç”¨æˆ·ç™»å½•çš„æ–¹æ³•,æ¥æ”¶çš„å‚æ•°æ˜¯ ç”¨æˆ·å å’Œå¯†ç , è¿”å›å€¼æ˜¯Userå¯¹è±¡ 4.1.1 ç¼–å†™UserDao123456789101112131415161718192021222324252627282930313233343536373839public class UserDao &#123; /** * æ³¨å†Œç”¨æˆ· * */ public int register(User user) throws SQLException &#123; //1.è·å–QueryRunner QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); //2.ç¼–å†™SQL String sql = &quot;insert into user values(?,?,?,?,?,?)&quot;; Object[] param = &#123;user.getUid(), user.getUsername(), user.getPassword(), user.getTelephone(), user.getBirthday(), user.getSex()&#125;; //3.æ‰§è¡Œæ’å…¥æ“ä½œ int update = qr.update(sql,param); //4.è¿”å›å—å½±å“çš„è¡Œæ•° return update; &#125; /** * ç”¨æˆ·æ³¨å†Œ * */ public User login(String username , String password) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from user where username = ? and password = ?&quot;; //è¿”å›çš„æ˜¯ä¸€ä¸ªUserå¯¹è±¡ ä½¿ç”¨BeanHandlerå°†ç»“æœé›†çš„ç¬¬ä¸€æ¡å’Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªJavabeanä¸­ User user = qr.query(sql, new BeanHandler&lt;User&gt;(User.class), username, password); return user; &#125;&#125; 4.1.2 æµ‹è¯•æ³¨å†Œä¸ç™»å½•åŠŸèƒ½123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public class TestUserDao &#123; //åˆ›å»ºUserDao UserDao userDao = new UserDao(); //æµ‹è¯•æ³¨å†ŒåŠŸèƒ½ @Test public void testRegister() throws SQLException &#123; //1. åˆ›å»ºUserå¯¹è±¡ User user = new User(); //2. å¯¹Userå¯¹è±¡è¿›è¡Œèµ‹å€¼ user.setUid(UUIDUtils.getUUID()); user.setUsername(&quot;å¤§éƒ&quot;); user.setPassword(&quot;654321&quot;); user.setTelephone(&quot;15052005200&quot;); user.setSex(&quot;ç”·&quot;); user.setBirthday(DateUtils.getDateFormart()); //3.æ‰§è¡Œæ³¨å†Œ int register = userDao.register(user); //4.åˆ¤æ–­æ³¨å†Œæ˜¯å¦æˆåŠŸ if(register &gt; 0)&#123; System.out.println(&quot;æ³¨å†ŒæˆåŠŸ,æ¬¢è¿æ‚¨: &quot; + user.getUsername()); &#125;else&#123; System.out.println(&quot;æ³¨å†Œå¤±è´¥! !&quot;); &#125; &#125; //æµ‹è¯•ç™»å½•åŠŸèƒ½ @Test public void testLogin() throws SQLException &#123; //è°ƒç”¨UserDaoçš„ loginæ–¹æ³•,ä¼ å…¥ç”¨æˆ·åå¯†ç  User user = userDao.login(&quot;å¤§éƒ&quot;, &quot;654321&quot;); //åˆ¤æ–­userä¸ä¸ºç©º ç™»å½•æˆåŠŸ if(user != null)&#123; System.out.println(user.getUsername() +&quot; æ¬¢è¿æ‚¨!&quot;); &#125;else&#123; System.out.println(&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯! !&quot;); &#125; &#125;&#125; 4.2 ProductDao éœ€æ±‚1: æ ¹æ®å•†å“ID è·å–å•†å“åç§° ,å•†å“ä»·æ ¼ ä»¥åŠå•†å“æ‰€å±åˆ†ç±»çš„åç§° å‚æ•° pid, è¿”å›å€¼ productå¯¹è±¡ éœ€æ±‚2: æ ¹æ®åˆ†ç±»ID è·å–å•†å“åˆ†ç±»ä¿¡æ¯ å‚æ•° cid , è¿”å›å€¼ categoryå¯¹è±¡ éœ€æ±‚3: æŸ¥è¯¢æŒ‡å®šåˆ†ç±»ID ä¸‹çš„å•†å“ä¸ªæ•° å‚æ•° cid , è¿”å›å€¼ intç±»å‹ å•†å“ä¸ªæ•° éœ€æ±‚4: æŸ¥è¯¢æŒ‡å®šåˆ†ç±»ID ä¸‹çš„æ‰€æœ‰å•†å“ä¿¡æ¯ å‚æ•°åˆ†ç±»ID ,è¿”å›å€¼ Listé›†åˆ é›†åˆä¸­ä¿å­˜å•†å“å¯¹è±¡ 4.2.1 ç¼–å†™ ProductDao123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960public class ProductDao &#123; //1.æ ¹æ®å•†å“ID è·å–å•†å“åç§° ,å•†å“ä»·æ ¼ ä»¥åŠå•†å“æ‰€å±åˆ†ç±»çš„åç§° public Product findProductById(String pid) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from product where pid = ?&quot;; Product product = qr.query(sql, new BeanHandler&lt;Product&gt;(Product.class), pid); //è°ƒç”¨ findCategoryById()æ–¹æ³•, ä¼ é€’å¤–é”®cid è·å–å•†å“å¯¹åº” çš„åˆ†ç±»ä¿¡æ¯ Category category = findCategoryById(product.getCid()); //å°†categoryä¿å­˜åˆ°å•†å“å¯¹è±¡ä¸­ product.setCategory(category); return product; &#125; //2.æ ¹æ®åˆ†ç±»ID è·å–å•†å“åˆ†ç±»ä¿¡æ¯ public Category findCategoryById(String cid) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from category where cid = ?&quot;; Category category = qr.query(sql, new BeanHandler&lt;Category&gt;(Category.class),cid); return category; &#125; //3.æŸ¥è¯¢æŒ‡å®šåˆ†ç±»ID ä¸‹çš„å•†å“ä¸ªæ•° public int getCount(String cid) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select count(*) from product where cid = ?&quot;; //è·å–çš„å•åˆ—æ•°æ® ,ä½¿ç”¨ScalarHandler å°è£… Long count = (Long)qr.query(sql,new ScalarHandler&lt;&gt;(),cid); //å°†Langç±»å‹è½¬æ¢ä¸º int ç±»å‹,å¹¶è¿”å› return count.intValue(); &#125; //4.æŸ¥è¯¢æŒ‡å®šåˆ†ç±»ä¸‹çš„æ‰€æœ‰å•†å“ä¿¡æ¯ public List&lt;Product&gt; findProductByCid(String cid) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from product where cid = ?&quot;; //æŸ¥è¯¢ç»“æœæ˜¯ä¸€ä¸ªListé›†åˆ, ä½¿ç”¨BeanListHandler å°è£…ç»“æœé›† List&lt;Product&gt; list = qr.query(sql, new BeanListHandler&lt;Product&gt;(Product.class), cid); return list; &#125;&#125; 4.2.2 æµ‹è¯• ProductDao123456789101112131415161718192021222324252627282930313233343536public class TestProductDao &#123; ProductDao productDao = new ProductDao(); //1.æµ‹è¯• æ ¹æ®å•†å“ID è·å–å•†å“åç§° ,å•†å“ä»·æ ¼ ä»¥åŠå•†å“æ‰€å±åˆ†ç±»çš„åç§° @Test public void testFindProductById() throws SQLException &#123; Product product = productDao.findProductById(&quot;1&quot;); System.out.println(&quot;å•†å“åç§°: &quot;+product.getPname()+ &quot;, å•†å“ä»·æ ¼: &quot; + product.getPrice() + &quot;, å•†å“æ‰€å±åˆ†ç±»: &quot;+ product.getCategory().getCname()); &#125; //2.æµ‹è¯• æŸ¥è¯¢æŒ‡å®šåˆ†ç±»IDä¸‹çš„å•†å“æ•° @Test public void testGetCount() throws SQLException &#123; //æŸ¥è¯¢ cidä¸º3çš„åˆ†ç±»ä¸‹æœ‰å¤šå°‘ä¸ªå•†å“ int count = productDao.getCount(&quot;3&quot;); System.out.println(&quot;åˆ†ç±»IDä¸º3çš„åˆ†ç±»ä¸‹å•†å“ä¸ªæ•°: &quot; + count); &#125; //3.æµ‹è¯• æŸ¥è¯¢æŒ‡å®šåˆ†ç±»ä¸‹çš„æ‰€æœ‰å•†å“ä¿¡æ¯ @Test public void testFindProductByCid() throws SQLException &#123; //æŸ¥è¯¢cidä¸º 2çš„åˆ†ç±»ä¸‹ æ‰€æœ‰çš„å•†å“ä¿¡æ¯ List&lt;Product&gt; list = productDao.findProductByCid(&quot;2&quot;); for (Product product : list) &#123; System.out.println(product); &#125; &#125;&#125; 4.3 OrdersDao4.3.1 å¤šå¯¹ä¸€åˆ†æOrderItemè¡¨ä¸Ordersè¡¨çš„å…³ç³»æ˜¯ å¤šå¯¹ä¸€ ä¹‹å‰æˆ‘ä»¬ä¸€ç›´æ˜¯åœ¨æè¿°ä¸€å¯¹å¤š,é‚£ä¹ˆæˆ‘ä»¬å†åå‘æè¿°ä¸€ä¸‹ å¤šå¯¹ä¸€ æ–¹å¼æ˜¯åœ¨Ordersä¸­åº”è¯¥æœ‰ä¸€ä¸ª é›†åˆç”¨æ¥ä¿å­˜è®¢å•ä¸­çš„è®¢å•é¡¹ä¿¡æ¯ åœ¨Ordersç±»ä¸­æ·»åŠ  è®¢å•é¡¹çš„é›†åˆ 12345678910//è¯¥è®¢å•ä¸­æœ‰å¤šå°‘è®¢å•é¡¹ List&lt;OrderItem&gt; orderItems = new ArrayList&lt;OrderItem&gt;(); public List&lt;OrderItem&gt; getOrderItems() &#123; return orderItems; &#125; public void setOrderItems(List&lt;OrderItem&gt; orderItems) &#123; this.orderItems = orderItems; &#125; 4.3.2 åˆ›å»ºOrdersDao éœ€æ±‚1: è·å– uidä¸º 001 çš„ç”¨æˆ·çš„æ‰€æœ‰è®¢å•ä¿¡æ¯ å‚æ•° uid, è¿”å›å€¼ LIst è®¢å•é›†åˆ éœ€æ±‚2: è·å–è®¢å•ç¼–å·ä¸º order001çš„è®¢å•ä¸­çš„æ‰€æœ‰å•†å“ä¿¡æ¯ å‚æ•° oid, è¿”å›å€¼List å•†å“é›†åˆ 123456789101112-- è·å–è®¢å•ç¼–å·ä¸º: order001çš„è®¢å•ä¸­çš„æ‰€æœ‰å•†å“ä¿¡æ¯-- 1.æŸ¥è¯¢è®¢å•é¡¹è¡¨ä¸­ oidæ˜¯order001çš„ æ‰€æœ‰å•†å“ä¿¡æ¯SELECT oi.pidFROM orderitem oi WHERE oid = &#x27;order001&#x27;;-- 2.å°†ä¸Šé¢çš„æŸ¥è¯¢è¯­å¥ä½œä¸ºinå‡½æ•°çš„æ¡ä»¶, æŸ¥è¯¢productè¡¨SELECT * FROM product WHERE pid IN(SELECT oi.pidFROM orderitem oi WHERE oid = &#x27;order001&#x27;); 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class OrdersDao &#123; //éœ€æ±‚1: è·å– uidä¸º 001 çš„ç”¨æˆ·çš„æ‰€æœ‰è®¢å•ä¿¡æ¯ public List&lt;Orders&gt; findAllOrders(String uid) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from orders where uid = ?&quot;; //ä¸€ä¸ªç”¨æˆ·æ‰€æœ‰çš„è®¢å•ä¿¡æ¯ List&lt;Orders&gt; ordersList = qr.query(sql, new BeanListHandler&lt;Orders&gt;(Orders.class), uid); return ordersList; &#125; //éœ€æ±‚2: è·å–è®¢å•ç¼–å·ä¸º order001çš„è®¢å•ä¸­çš„æ‰€æœ‰å•†å“ä¿¡æ¯ public List&lt;Product&gt; findOrderById(String oid) throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); //1.æŸ¥è¯¢è®¢å•é¡¹è¡¨ è·å–è®¢å•é¡¹è¡¨ä¸­ è®¢å•IDä¸ºorder001çš„æ•°æ® String sql = &quot;SELECT pid FROM orderitem WHERE oid = ? &quot;; //2.æŸ¥è¯¢çš„ç»“æœæ˜¯ å¤šæ¡è®¢å•é¡¹æ•°æ® List&lt;OrderItem&gt; list = qr.query(sql, new BeanListHandler&lt;OrderItem&gt;(OrderItem.class), oid); //3.åˆ›å»ºé›†åˆä¿å­˜å•†å“ä¿¡æ¯ List&lt;Product&gt; productList = new ArrayList&lt;&gt;(); ProductDao productDao = new ProductDao(); //4.éå†è®¢å•é¡¹é›†åˆ è·å–Pid for (OrderItem orderItem : list) &#123; //4.1ä»orderitemä¸­è·å– pid String pid = orderItem.getPid(); //4.2 è°ƒç”¨productDao Product product = productDao.findProductById(pid); //4.3 ä¿å­˜åˆ°é›†åˆ productList.add(product); &#125; //è¿”å› è®¢å•ä¸­å¯¹åº”çš„å•†å“ä¿¡æ¯ return productList; &#125;&#125; 4.3.3 æµ‹è¯•OrdersDao123456789101112131415161718192021222324252627public class TestOrderDao &#123; OrdersDao ordersDao = new OrdersDao(); //1.è·å– uidä¸º 001 çš„ç”¨æˆ·çš„æ‰€æœ‰è®¢å•ä¿¡æ¯ @Test public void testFindAllOrders() throws SQLException &#123; List&lt;Orders&gt; allOrders = ordersDao.findAllOrders(&quot;001&quot;); //éå†æ‰“å°è®¢å•ä¿¡æ¯ for (Orders order : allOrders) &#123; System.out.println(order); &#125; &#125; //æµ‹è¯• è·å–è®¢å•ç¼–å·ä¸º: order001çš„è®¢å•ä¸­çš„æ‰€æœ‰å•†å“ä¿¡æ¯ @Test public void testFindOrderById() throws SQLException &#123; List&lt;Product&gt; list = ordersDao.findOrderById(&quot;order001&quot;); System.out.println(&quot;è®¢å•ç¼–å·ä¸ºorder001ä¸­çš„å•†å“æœ‰: &quot;); for (Product product : list) &#123; System.out.println(product); &#125; &#125;&#125;","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"æ•°æ®åº“è¿æ¥æ± &DBUtils","slug":"æ•°æ®åº“è¿æ¥æ± -DBUtils","date":"2019-12-22T23:31:53.000Z","updated":"2025-04-17T08:34:52.023Z","comments":true,"path":"2019/12/23/æ•°æ®åº“è¿æ¥æ± -DBUtils/","link":"","permalink":"http://yournotes.cn/2019/12/23/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0-DBUtils/","excerpt":"1. æ•°æ®åº“è¿æ¥æ± 1.1 è¿æ¥æ± ä»‹ç» ä»€ä¹ˆæ˜¯è¿æ¥æ± ","text":"1. æ•°æ®åº“è¿æ¥æ± 1.1 è¿æ¥æ± ä»‹ç» ä»€ä¹ˆæ˜¯è¿æ¥æ±  å®é™…å¼€å‘ä¸­â€œè·å¾—è¿æ¥â€æˆ–â€œé‡Šæ”¾èµ„æºâ€æ˜¯éå¸¸æ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¸ºäº†è§£å†³æ­¤ç±»æ€§èƒ½é—®é¢˜ï¼Œé€šå¸¸æƒ…å†µæˆ‘ä»¬é‡‡ç”¨è¿æ¥æ± æŠ€æœ¯ï¼Œæ¥å…±äº«è¿æ¥Connectionã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºè¿æ¥ã€é‡Šæ”¾è¿æ¥äº†ï¼Œè¿™äº›æ“ä½œéƒ½äº¤ç»™äº†è¿æ¥æ± . è¿æ¥æ± çš„å¥½å¤„ ç”¨æ± æ¥ç®¡ç†Connectionï¼Œè¿™æ ·å¯ä»¥é‡å¤ä½¿ç”¨Connectionã€‚ å½“ä½¿ç”¨å®ŒConnectionåï¼Œè°ƒç”¨Connectionçš„close()æ–¹æ³•ä¹Ÿä¸ä¼šçœŸçš„å…³é—­Connectionï¼Œè€Œæ˜¯æŠŠConnectionâ€œå½’è¿˜â€ç»™æ± ã€‚ 1.2 JDBCæ–¹å¼ä¸è¿æ¥æ± æ–¹å¼ æ™®é€šJDBCæ–¹å¼ è¿æ¥æ± æ–¹å¼ 1.3 å¦‚ä½•ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± Javaä¸ºæ•°æ®åº“è¿æ¥æ± æä¾›äº†å…¬å…±çš„æ¥å£ï¼šjavax.sql.DataSourceï¼Œå„ä¸ªå‚å•†éœ€è¦è®©è‡ªå·±çš„è¿æ¥æ± å®ç°è¿™ä¸ªæ¥å£ã€‚è¿™æ ·åº”ç”¨ç¨‹åºå¯ä»¥æ–¹ä¾¿çš„åˆ‡æ¢ä¸åŒå‚å•†çš„è¿æ¥æ± ï¼ å¸¸è§çš„è¿æ¥æ± æœ‰ DBCPè¿æ¥æ± , C3P0è¿æ¥æ± , Druidè¿æ¥æ± , æ¥ä¸‹é‡Œæˆ‘ä»¬å°±è¯¦ç»†å­¦ä¹ ä¸€ä¸‹ 1.4 æ•°æ®å‡†å¤‡12345678910111213141516171819202122232425-- åˆ›å»ºæ•°æ®åº“ -- CREATE DATABASE db5 CHARACTER SET utf8;-- ä½¿ç”¨æ•°æ®åº“ -- USE db5;-- åˆ›å»ºå‘˜å·¥è¡¨ -- CREATE TABLE employee ( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR (20), -- å‘˜å·¥å§“å age INT , -- å‘˜å·¥å¹´é¾„ sex VARCHAR (6), -- å‘˜å·¥æ€§åˆ« salary DOUBLE , -- è–ªæ°´ empdate DATE -- å…¥èŒæ—¥æœŸ );-- æ’å…¥æ•°æ® --INSERT INTO employee (eid, ename, age, sex, salary, empdate) VALUES(NULL,&#x27;ææ¸… ç…§&#x27;,22,&#x27;å¥³&#x27;,4000,&#x27;2018-11-12&#x27;); INSERT INTO employee (eid, ename, age, sex, salary, empdate) VALUES(NULL,&#x27;æ—é»›ç‰&#x27;,20,&#x27;å¥³&#x27;,5000,&#x27;2019-03-14&#x27;); INSERT INTO employee (eid, ename, age, sex, salary, empdate) VALUES(NULL,&#x27;æœç”«&#x27;,40,&#x27;ç”·&#x27;,6000,&#x27;2020-01-01&#x27;); INSERT INTO employee (eid, ename, age, sex, salary, empdate) VALUES(NULL,&#x27;æç™½&#x27;,25,&#x27;ç”·&#x27;,3000,&#x27;2017-10-01&#x27;); 1.5 DBCPè¿æ¥æ± DBCPä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºçš„è¿æ¥æ± ï¼Œæ˜¯Apacheæˆå‘˜ä¹‹ä¸€ï¼Œåœ¨ä¼ä¸šå¼€å‘ä¸­ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œtomcatå†…ç½®çš„è¿æ¥æ± ã€‚ 1.5.1 åˆ›å»ºé¡¹ç›® å¯¼å…¥jaråŒ…1ï¼‰å°†è¿™ä¸¤ä¸ª jaråŒ…æ·»åŠ åˆ° myJaræ–‡ä»¶å¤¹ä¸­ ï¼ˆjaråŒ…åœ¨èµ„æ–™é‡Œçš„è½¯ä»¶æ–‡ä»¶å¤¹ä¸­ï¼‰ 2ï¼‰ æ·»åŠ myJaråº“ åˆ°é¡¹ç›®çš„ä¾èµ–ä¸­ 1.5.2 ç¼–å†™å·¥å…·ç±» è¿æ¥æ•°æ®åº“è¡¨çš„å·¥å…·ç±», é‡‡ç”¨DBCPè¿æ¥æ± çš„æ–¹å¼æ¥å®Œæˆ Javaä¸­æä¾›äº†ä¸€ä¸ªè¿æ¥æ± çš„è§„åˆ™æ¥å£ ï¼š DataSource , å®ƒæ˜¯javaä¸­æä¾›çš„è¿æ¥æ±  åœ¨DBCPåŒ…ä¸­æä¾›äº†DataSourceæ¥å£çš„å®ç°ç±»ï¼Œæˆ‘ä»¬è¦ç”¨çš„å…·ä½“çš„è¿æ¥æ± BasicDataSource ç±» ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class DBCPUtils&#123; // 1.å®šä¹‰å¸¸é‡ ä¿å­˜æ•°æ®åº“è¿æ¥çš„ç›¸å…³ä¿¡æ¯ public static final String DRIVERNAME = &quot;com.mysql.jdbc.Driver&quot;; public static final String URL = &quot;jdbc:mysql://localhost:3306/db5?characterEncoding=UTF-8&quot;; public static final String USERNAME = &quot;root&quot;; public static final String PASSWORD = &quot;123456&quot;; // 2.åˆ›å»ºè¿æ¥æ± å¯¹è±¡ï¼ˆç”±DBCPæä¾›çš„å®ç°ç±»ï¼‰ public static BasicDataSource dataSource = new BasicDataSource(); // 3.ä½¿ç”¨é™æ€ä»£ç å—é…ç½® static&#123; dataSource.setDriverClassName(DRIVERNAME); dataSource.setUrl(URL); dataSource.setUsername(USERNAME); dataSource.setPassword(PASSWORD); &#125; //4.è·å–è¿æ¥çš„æ–¹æ³• public static Connection getConnection() throws SQLException &#123; //ä»è¿æ¥æ± ä¸­è·å–è¿æ¥ Connection connection = dataSource.getConnection(); return connection; &#125; //5.é‡Šæ”¾èµ„æºæ–¹æ³• public static void close(Connection con, Statement statement)&#123; if(con != null &amp;&amp; statement != null)&#123; try &#123;statement.close(); //å½’è¿˜è¿æ¥ con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void close(Connection con, Statement statement, ResultSet resultSet)&#123; if(con != null &amp;&amp; statement != null &amp;&amp; resultSet != null)&#123; try &#123; resultSet.close(); statement.close(); //å½’è¿˜è¿æ¥ con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; 1.5.3 æµ‹è¯•å·¥å…·ç±»éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å§“å 1234567891011121314151617181920212223242526public class TestDBCP &#123; /* * æµ‹è¯•DBCPè¿æ¥æ±  * */ public static void main(String[] args) throws SQLException &#123; //1.ä»DBCPè¿æ¥æ± ä¸­æ‹¿åˆ°è¿æ¥ Connection con = DBCPUtils.getConnection(); //2.è·å–Statementå¯¹è±¡ Statement statement = con.createStatement(); //3.æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å§“å String sql = &quot;select ename from employee&quot;; ResultSet resultSet = statement.executeQuery(sql); //4.å¤„ç†ç»“æœé›† while(resultSet.next())&#123; String ename = resultSet.getString(&quot;ename&quot;); System.out.println(&quot;å‘˜å·¥å§“å: &quot; + ename); &#125; //5.é‡Šæ”¾èµ„æº DBCPUtils.close(con,statement,resultSet); &#125; &#125; 1.5.4 å¸¸è§é…ç½®é¡¹ å±æ€§ æè¿° driverClassName æ•°æ®åº“é©±åŠ¨åç§° url æ•°æ®åº“åœ°å€ username ç”¨æˆ·å password å¯†ç  maxActive æœ€å¤§è¿æ¥æ•°é‡ maxIdle æœ€å¤§ç©ºé—²è¿æ¥ minIdle æœ€å°ç©ºé—²è¿æ¥ initialSize åˆå§‹åŒ–è¿æ¥ 1.6 C3P0 è¿æ¥æ± C3P0æ˜¯ä¸€ä¸ªå¼€æºçš„JDBCè¿æ¥æ± ,æ”¯æŒJDBC3è§„èŒƒå’ŒJDBC2çš„æ ‡å‡†æ‰©å±•ã€‚ç›®å‰ä½¿ç”¨å®ƒçš„å¼€æºé¡¹ç›®æœ‰Hibernateã€Springç­‰ã€‚ 1.6.1 å¯¼å…¥jaråŒ…åŠé…ç½®æ–‡ä»¶ å°†jaråŒ… å¤åˆ¶åˆ°myJaræ–‡ä»¶å¤¹å³å¯,IDEAä¼šè‡ªåŠ¨å¯¼å…¥ å¯¼å…¥é…ç½®æ–‡ä»¶ c3p0-confifig.xml c3p0-confifig.xml æ–‡ä»¶åä¸å¯æ›´æ”¹ ç›´æ¥æ”¾åˆ°srcä¸‹ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°åˆ°èµ„æºæ–‡ä»¶å¤¹ä¸­ 12345678910111213141516171819202122232425262728&lt;c3p0-config&gt; &lt;!--é»˜è®¤é…ç½®--&gt; &lt;default-config&gt; &lt;property name=&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt; &lt;property name=&quot;jdbcUrl&quot;&gt;jdbc:mysql://localhost:3306/db5?characterEncoding=UTF-8&lt;/property&gt; &lt;property name=&quot;user&quot;&gt;root&lt;/property&gt; &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt; &lt;!-- initialPoolSizeï¼šåˆå§‹åŒ–æ—¶è·å–ä¸‰ä¸ªè¿æ¥ï¼Œ å–å€¼åº”åœ¨minPoolSizeä¸maxPoolSizeä¹‹é—´ã€‚ --&gt; &lt;property name=&quot;initialPoolSize&quot;&gt;3&lt;/property&gt; &lt;!-- maxIdleTimeï¼šæœ€å¤§ç©ºé—²æ—¶é—´,60ç§’å†…æœªä½¿ç”¨åˆ™è¿æ¥è¢«ä¸¢å¼ƒã€‚è‹¥ä¸º0åˆ™æ°¸ä¸ä¸¢å¼ƒã€‚--&gt; &lt;property name=&quot;maxIdleTime&quot;&gt;60&lt;/property&gt; &lt;!-- maxPoolSizeï¼šè¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å¤§è¿æ¥æ•° --&gt; &lt;property name=&quot;maxPoolSize&quot;&gt;100&lt;/property&gt; &lt;!-- minPoolSize: è¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å°è¿æ¥æ•° --&gt; &lt;property name=&quot;minPoolSize&quot;&gt;10&lt;/property&gt; &lt;/default-config&gt; &lt;!--é…ç½®è¿æ¥æ± mysql--&gt; &lt;named-config name=&quot;mysql&quot;&gt; &lt;property name=&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt; &lt;property name=&quot;jdbcUrl&quot;&gt;jdbc:mysql://localhost:3306/db5&lt;/property&gt; &lt;property name=&quot;user&quot;&gt;root&lt;/property&gt; &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt; &lt;property name=&quot;initialPoolSize&quot;&gt;10&lt;/property&gt; &lt;property name=&quot;maxIdleTime&quot;&gt;30&lt;/property&gt; &lt;property name=&quot;maxPoolSize&quot;&gt;100&lt;/property&gt; &lt;property name=&quot;minPoolSize&quot;&gt;10&lt;/property&gt; &lt;/named-config&gt; &lt;!--é…ç½®è¿æ¥æ± 2,å¯ä»¥é…ç½®å¤šä¸ª--&gt; &lt;/c3p0-config&gt; åœ¨é¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ªresourceæ–‡ä»¶å¤¹(ä¸“é—¨å­˜æ”¾èµ„æºæ–‡ä»¶) é€‰æ‹©æ–‡ä»¶å¤¹,å³é”® å°†resourceæ–‡ä»¶å¤¹æŒ‡å®šä¸ºèµ„æºæ–‡ä»¶å¤¹ å°†æ–‡ä»¶æ”¾åœ¨resourceç›®å½•ä¸‹å³å¯,åˆ›å»ºè¿æ¥æ± å¯¹è±¡çš„æ—¶å€™ä¼šå»åŠ è½½è¿™ä¸ªé…ç½®æ–‡ä»¶ 1.6.2 ç¼–å†™C3P0å·¥å…·ç±» C3P0æä¾›çš„æ ¸å¿ƒå·¥å…·ç±», ComboPooledDataSource , å¦‚æœæƒ³ä½¿ç”¨è¿æ¥æ± ,å°±å¿…é¡»åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ new ComboPooledDataSource(); ä½¿ç”¨ é»˜è®¤é…ç½® new ComboPooledDataSource(â€œmysqlâ€); ä½¿ç”¨å‘½åé…ç½® 12345678910111213141516171819202122232425262728293031323334353637public class C3P0Utils &#123; //1.åˆ›å»ºè¿æ¥æ± å¯¹è±¡ C3P0å¯¹DataSourceæ¥å£çš„å®ç°ç±» //ä½¿ç”¨çš„é…ç½®æ˜¯ é…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤é…ç½® //public static ComboPooledDataSource dataSource = new ComboPooledDataSource(); //ä½¿ç”¨æŒ‡å®šçš„é…ç½® public static ComboPooledDataSource dataSource = new ComboPooledDataSource(&quot;mysql&quot;); //è·å–è¿æ¥çš„æ–¹æ³• public static Connection getConnection() throws SQLException &#123; return dataSource.getConnection(); &#125; //é‡Šæ”¾èµ„æº public static void close(Connection con, Statement statement)&#123; if(con != null &amp;&amp; statement != null)&#123; try &#123; statement.close(); //å½’è¿˜è¿æ¥ con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void close(Connection con, Statement statement, ResultSet resultSet)&#123; if(con != null &amp;&amp; statement != null &amp;&amp; resultSet != null)&#123; try &#123; resultSet.close(); statement.close(); //å½’è¿˜è¿æ¥ con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; 1.6.3 æµ‹è¯•å·¥å…·ç±»éœ€æ±‚ï¼šæŸ¥è¯¢å§“åä¸º æç™½çš„å‘˜å·¥ä¿¡æ¯ 1234567891011121314151617181920212223242526272829public class TestC3P0 &#123; //éœ€æ±‚ æŸ¥è¯¢å§“åä¸ºæç™½çš„ è®°å½• public static void main(String[] args) throws SQLException &#123; //1.è·å–è¿æ¥ Connection con = C3P0Utils.getConnection(); //2.è·å–é¢„å¤„ç†å¯¹è±¡ String sql = &quot;select * from employee where ename = ?&quot;; PreparedStatement ps = con.prepareStatement(sql); //3.è®¾ç½®å ä½ç¬¦çš„å€¼ ps.setString(1,&quot;æç™½&quot;); ResultSet resultSet = ps.executeQuery(); //4.å¤„ç†ç»“æœé›† while(resultSet.next())&#123; int eid = resultSet.getInt(&quot;eid&quot;); String ename = resultSet.getString(&quot;ename&quot;); int age = resultSet.getInt(&quot;age&quot;); String sex = resultSet.getString(&quot;sex&quot;); double salary = resultSet.getDouble(&quot;salary&quot;); Date date = resultSet.getDate(&quot;empdate&quot;); System.out.println(eid +&quot; &quot; + ename + &quot; &quot; + age +&quot; &quot; + sex +&quot; &quot; + salary +&quot; &quot; +date); &#125; //5.é‡Šæ”¾èµ„æº C3P0Utils.close(con,ps,resultSet); &#125; &#125; 1.6.4 å¸¸è§é…ç½® 1.7 Druid è¿æ¥æ± Druidï¼ˆå¾·é²ä¼Šï¼‰æ˜¯é˜¿é‡Œå·´å·´å¼€å‘çš„å·ç§°ä¸ºç›‘æ§è€Œç”Ÿçš„æ•°æ®åº“è¿æ¥æ± ï¼ŒDruidæ˜¯ç›®å‰æœ€å¥½çš„æ•°æ®åº“è¿æ¥æ± ã€‚åœ¨åŠŸèƒ½ã€æ€§èƒ½ã€æ‰©å±•æ€§æ–¹é¢ï¼Œéƒ½è¶…è¿‡å…¶ä»–æ•°æ®åº“è¿æ¥æ± ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ï¼Œå¯ä»¥å¾ˆå¥½çš„ç›‘æ§DBæ± è¿æ¥å’ŒSQLçš„æ‰§è¡Œæƒ…å†µã€‚ 1.7.1 å¯¼å…¥jaråŒ…åŠé…ç½®æ–‡ä»¶ å¯¼å…¥ jaråŒ… å¯¼å…¥é…ç½®æ–‡ä»¶ æ˜¯propertieså½¢å¼çš„ å¯ä»¥å«ä»»æ„åç§°ï¼Œå¯ä»¥æ”¾åœ¨ä»»æ„ç›®å½•ä¸‹,æˆ‘ä»¬ç»Ÿä¸€æ”¾åˆ° resourcesèµ„æºç›®å½• 1234567driverClassName=com.mysql.jdbc.Driver url=jdbc:mysql://127.0.0.1:3306/db5?characterEncoding=UTF-8 username=root password=123456 initialSize=5 maxActive=10 maxWait=3000 1.7.2 ç¼–å†™Druidå·¥å…·ç±» è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡ é€šè¿‡å·¥å‚æ¥æ¥è·å– DruidDataSourceFactoryç±»çš„createDataSourceæ–¹æ³• createDataSource(Properties p) æ–¹æ³•å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå±æ€§é›†å¯¹è±¡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class DruidUtils &#123; //1.å®šä¹‰æˆå‘˜å˜é‡ public static DataSource dataSource; //2.é™æ€ä»£ç å— static&#123; try &#123; //3.åˆ›å»ºå±æ€§é›†å¯¹è±¡ Properties p = new Properties(); //4.åŠ è½½é…ç½®æ–‡ä»¶ Druid è¿æ¥æ± ä¸èƒ½å¤Ÿä¸»åŠ¨åŠ è½½é…ç½®æ–‡ä»¶ ,éœ€è¦æŒ‡å®šæ–‡ä»¶ InputStream inputStream = DruidUtils.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;); //5. ä½¿ç”¨Propertieså¯¹è±¡çš„ loadæ–¹æ³• ä»å­—èŠ‚æµä¸­è¯»å–é…ç½®ä¿¡æ¯ p.load(inputStream); //6. é€šè¿‡å·¥å‚ç±»è·å–è¿æ¥æ± å¯¹è±¡ dataSource = DruidDataSourceFactory.createDataSource(p); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; //è·å–è¿æ¥çš„æ–¹æ³• public static Connection getConnection()&#123; try &#123; return dataSource.getConnection(); &#125; catch (SQLException e) &#123; e.printStackTrace(); return null; &#125; &#125; //é‡Šæ”¾èµ„æº public static void close(Connection con, Statement statement)&#123; if(con != null &amp;&amp; statement != null)&#123; try &#123; statement.close(); //å½’è¿˜è¿æ¥ con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void close(Connection con, Statement statement, ResultSet resultSet)&#123; if(con != null &amp;&amp; statement != null &amp;&amp; resultSet != null)&#123; try &#123; resultSet.close(); statement.close(); //å½’è¿˜è¿æ¥ con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; 1.7.3 æµ‹è¯•å·¥å…·ç±»éœ€æ±‚ï¼šæŸ¥è¯¢è–ªèµ„åœ¨3000-5000å…ƒä¹‹é—´çš„å‘˜å·¥å§“å 12345678910111213141516171819202122public class TestDruid &#123; // éœ€æ±‚ æŸ¥è¯¢ è–ªèµ„åœ¨3000 åˆ° 5000ä¹‹é—´çš„å‘˜å·¥çš„å§“å public static void main(String[] args) throws SQLException &#123; //1.è·å–è¿æ¥ Connection con = DruidUtils.getConnection(); //2.è·å–Statementå¯¹è±¡ Statement statement = con.createStatement(); //3.æ‰§è¡ŒæŸ¥è¯¢ ResultSet resultSet = statement.executeQuery(&quot;select ename from employee where salary between 3000 and 5000&quot;); //4.å¤„ç†ç»“æœé›† while(resultSet.next())&#123; String ename = resultSet.getString(&quot;ename&quot;); System.out.println(ename); &#125; //5.é‡Šæ”¾èµ„æº DruidUtils.close(con,statement,resultSet); &#125; &#125; 2. DBUtilså·¥å…·ç±»2.1 DBUtilsç®€ä»‹ä½¿ç”¨JDBCæˆ‘ä»¬å‘ç°å†—ä½™çš„ä»£ç å¤ªå¤šäº†,ä¸ºäº†ç®€åŒ–å¼€å‘ æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ DbUtils Commons DbUtilsæ˜¯Apacheç»„ç»‡æä¾›çš„ä¸€ä¸ªå¯¹JDBCè¿›è¡Œç®€å•å°è£…çš„å¼€æºå·¥å…·ç±»åº“ï¼Œä½¿ç”¨å®ƒèƒ½å¤Ÿç®€åŒ–JDBCåº”ç”¨ç¨‹åºçš„å¼€å‘ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½ã€‚ ä½¿ç”¨æ–¹å¼: DBUtilså°±æ˜¯JDBCçš„ç®€åŒ–å¼€å‘å·¥å…·åŒ…ã€‚éœ€è¦é¡¹ç›®å¯¼å…¥commons-dbutils-1.6.jarã€‚ 2.1.1 DBUtilsæ ¸å¿ƒåŠŸèƒ½ä»‹ç» QueryRunner ä¸­æä¾›å¯¹sqlè¯­å¥æ“ä½œçš„API. ResultSetHandleræ¥å£ï¼Œç”¨äºå®šä¹‰selectæ“ä½œåï¼Œæ€æ ·å°è£…ç»“æœé›†. DbUtilsç±»,ä»–å°±æ˜¯ä¸€ä¸ªå·¥å…·ç±»,å®šä¹‰äº†å…³é—­èµ„æºä¸äº‹åŠ¡å¤„ç†ç›¸å…³æ–¹æ³• 2.2 æ¡ˆåˆ—ç›¸å…³çŸ¥è¯†2.2.1 è¡¨å’Œç±»ä¹‹é—´çš„å…³ç³» æ•´ä¸ªè¡¨å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªç±» è¡¨ä¸­çš„ä¸€è¡Œè®°å½•,å¯¹åº”ä¸€ä¸ªç±»çš„å®ä¾‹(å¯¹è±¡) è¡¨ä¸­çš„ä¸€åˆ—,å¯¹åº”ç±»ä¸­çš„ä¸€ä¸ªæˆå‘˜å±æ€§ 2.2.2 JavaBeanç»„ä»¶ JavaBean å°±æ˜¯ä¸€ä¸ªç±», å¼€å‘ä¸­é€šå¸¸ç”¨äºå°è£…æ•°æ®,æœ‰ä¸€ä¸‹ç‰¹ç‚¹ éœ€è¦å®ç° åºåˆ—åŒ–æ¥å£, Serializable (æš‚æ—¶å¯ä»¥çœç•¥) æä¾›ç§æœ‰å­—æ®µ: private ç±»å‹ å˜é‡å; æä¾› getter å’Œ setter æä¾› ç©ºå‚æ„é€  åˆ›å»ºEmployeeç±»å’Œæ•°æ®åº“çš„employeeè¡¨å¯¹åº” æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª entityåŒ…,ä¸“é—¨ç”¨æ¥å­˜æ”¾ JavaBeanç±» 123456789public class Employee implements Serializable &#123; private int eid; private String ename; private int age; private String sex; private double salary; private Date empdate; //ç©ºå‚ getter setterçœç•¥ &#125; 2.3 DBUtilså®Œæˆ CRUD2.3.1 QueryRunneræ ¸å¿ƒç±» æ„é€ æ–¹æ³• QueryRunner() QueryRunner(DataSource ds) æä¾›æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰ï¼ŒDBUtilsåº•å±‚è‡ªåŠ¨ç»´æŠ¤è¿æ¥connection å¸¸ç”¨æ–¹æ³• update(Connection conn, String sql, Objectâ€¦ params) ï¼Œç”¨æ¥å®Œæˆè¡¨æ•°æ®çš„å¢åŠ ã€åˆ é™¤ã€æ›´æ–°æ“ä½œ query(Connection conn, String sql, ResultSetHandler rsh, Objectâ€¦ params)ï¼Œç”¨æ¥å®Œæˆè¡¨æ•°æ®çš„æŸ¥è¯¢æ“ä½œ 2.3.2 QueryRunnerçš„åˆ›å»º æ‰‹åŠ¨æ¨¡å¼ 12//æ‰‹åŠ¨æ–¹å¼ åˆ›å»ºQueryRunnerå¯¹è±¡ QueryRunner qr = new QueryRunner(); è‡ªåŠ¨æ¨¡å¼ 12//è‡ªåŠ¨åˆ›å»º ä¼ å…¥æ•°æ®åº“è¿æ¥æ± å¯¹è±¡ QueryRunner qr2 = new QueryRunner(DruidUtils.getDataSource()); è‡ªåŠ¨æ¨¡å¼éœ€è¦ä¼ å…¥è¿æ¥æ± å¯¹è±¡ 1234//è·å–è¿æ¥æ± å¯¹è±¡ public static DataSource getDataSource()&#123; return dataSource; &#125; 2.3.3 QueryRunnerå®ç°å¢åˆ æ”¹æ ¸å¿ƒæ–¹æ³• update(Connection conn, String sql, Objectâ€¦ params) å‚æ•° è¯´æ˜ Connection conn æ•°æ®åº“è¿æ¥å¯¹è±¡, è‡ªåŠ¨æ¨¡å¼åˆ›å»ºQueryRun å¯ä»¥ä¸ä¼  ,æ‰‹åŠ¨æ¨¡å¼å¿…é¡»ä¼ é€’ String sql String sql å ä½ç¬¦å½¢å¼çš„SQL ,ä½¿ç”¨ ? å·å ä½ç¬¦ Objectâ€¦ param Objectç±»å‹çš„ å¯å˜å‚,ç”¨æ¥è®¾ç½®å ä½ç¬¦ä¸Šçš„å‚æ•° æ­¥éª¤ åˆ›å»ºQueryRunner(æ‰‹åŠ¨æˆ–è‡ªåŠ¨) å ä½ç¬¦æ–¹å¼ ç¼–å†™SQL è®¾ç½®å ä½ç¬¦å‚æ•° æ‰§è¡Œ 2.3.3.1æ·»åŠ 1234567891011121314151617@Test public void testInsert() throws SQLException &#123; //1.åˆ›å»º QueryRunner æ‰‹åŠ¨æ¨¡å¼åˆ›å»º QueryRunner qr = new QueryRunner(); //2.ç¼–å†™ å ä½ç¬¦æ–¹å¼ SQL String sql = &quot;insert into employee values(?,?,?,?,?,?)&quot;; //3.è®¾ç½®å ä½ç¬¦çš„å‚æ•° Object[] param = &#123;null,&quot;å¼ ç™¾ä¸‡&quot;,20,&quot;å¥³&quot;,10000,&quot;1990-12-26&quot;&#125;; //4.æ‰§è¡Œ updateæ–¹æ³• Connection con = DruidUtils.getConnection(); int i = qr.update(con, sql, param); //5.é‡Šæ”¾èµ„æº DbUtils.closeQuietly(con); &#125; 2.3.3.2 ä¿®æ”¹1234567891011121314//ä¿®æ”¹æ“ä½œ ä¿®æ”¹å§“åä¸ºå¼ ç™¾ä¸‡çš„å‘˜å·¥å·¥èµ„ @Test public void testUpdate() throws SQLException &#123; //1.åˆ›å»ºQueryRunnerå¯¹è±¡ è‡ªåŠ¨æ¨¡å¼,ä¼ å…¥æ•°æ®åº“è¿æ¥æ±  QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); //2.ç¼–å†™SQL String sql = &quot;update employee set salary = ? where ename = ?&quot;; //3.è®¾ç½®å ä½ç¬¦å‚æ•° Object[] param = &#123;0,&quot;å¼ ç™¾ä¸‡&quot;&#125;; //4.æ‰§è¡Œupdate, ä¸éœ€è¦ä¼ å…¥è¿æ¥å¯¹è±¡ qr.update(sql,param); &#125; 2.3.3.3 åˆ é™¤ 1234567//åˆ é™¤æ“ä½œ åˆ é™¤idä¸º1 çš„æ•°æ® @Test public void testDelete() throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;delete from employee where eid = ?&quot;; //åªæœ‰ä¸€ä¸ªå‚æ•°,ä¸éœ€è¦åˆ›å»ºæ•°ç»„ qr.update(sql,1); &#125; 2.3.4QueryRunnerå®ç°æŸ¥è¯¢æ“ä½œ2.3.4.1 ResultSetHandleræ¥å£ç®€ä»‹ ResultSetHandlerå¯ä»¥å¯¹æŸ¥è¯¢å‡ºæ¥çš„ResultSetç»“æœé›†è¿›è¡Œå¤„ç†ï¼Œè¾¾åˆ°ä¸€äº›ä¸šåŠ¡ä¸Šçš„éœ€æ±‚ã€‚ 2.3.4.2 ResultSetHandlerç»“æœé›†å¤„ç†ç±»æœ¬ä¾‹å±•ç¤ºçš„æ˜¯ä½¿ç”¨ResultSetHandleræ¥å£çš„å‡ ä¸ªå¸¸è§å®ç°ç±»å®ç°æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä»£ç é‡ï¼Œä¼˜åŒ–ã€ç¨‹åºã€‚ æ¯ä¸€ç§å®ç°ç±»éƒ½ä»£è¡¨äº†å¯¹æŸ¥è¯¢ç»“æœé›†çš„ä¸€ç§å¤„ç†æ–¹å¼ ResultSetHandlerå®ç°ç±» è¯´æ˜ ArrayHandler å°†ç»“æœé›†ä¸­çš„ç¬¬ä¸€æ¡è®°å½•å°è£…åˆ°ä¸€ä¸ªObject[]æ•°ç»„ä¸­ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯è¿™æ¡è®°å½•ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µçš„å€¼ ArrayListHandler å°†ç»“æœé›†ä¸­çš„æ¯ä¸€æ¡è®°å½•éƒ½å°è£…åˆ°ä¸€ä¸ªObject[]æ•°ç»„ä¸­ï¼Œå°†è¿™äº›æ•°ç»„åœ¨å°è£…åˆ°Listé›†åˆä¸­ã€‚ BeanHandler å°†ç»“æœé›†ä¸­ç¬¬ä¸€æ¡è®°å½•å°è£…åˆ°ä¸€ä¸ªæŒ‡å®šçš„javaBeanä¸­. BeanListHandler å°†ç»“æœé›†ä¸­æ¯ä¸€æ¡è®°å½•å°è£…åˆ°æŒ‡å®šçš„javaBeanä¸­ï¼Œå†å°†è¿™äº›javaBeanåœ¨å°è£…åˆ°Listé›†åˆä¸­ ColumnListyHandler å°†ç»“æœé›†ä¸­æŒ‡å®šçš„åˆ—çš„å­—æ®µå€¼ï¼Œå°è£…åˆ°ä¸€ä¸ªListé›†åˆä¸­ KeyedHandler å°†ç»“æœé›†ä¸­æ¯ä¸€æ¡è®°å½•å°è£…åˆ°Map&lt;String,Object&gt;,åœ¨å°†è¿™ä¸ªmapé›†åˆåšä¸ºå¦ä¸€ä¸ªMapçš„value,å¦ä¸€ä¸ªMapé›†åˆçš„keyæ˜¯æŒ‡å®šçš„å­—æ®µçš„å€¼ã€‚ MapHandler å°†ç»“æœé›†ä¸­ç¬¬ä¸€æ¡è®°å½•å°è£…åˆ°äº†Map&lt;String,Object&gt;é›†åˆä¸­ï¼Œkeyå°±æ˜¯å­—æ®µåç§°ï¼Œvalueå°±æ˜¯å­—æ®µå€¼ MapListHandler å°†ç»“æœé›†ä¸­æ¯ä¸€æ¡è®°å½•å°è£…åˆ°äº†Map&lt;String,Object&gt;é›†åˆä¸­ï¼Œkeyå°±æ˜¯å­—æ®µåç§°ï¼Œvalueå°±æ˜¯å­—æ®µå€¼ï¼Œåœ¨å°†è¿™äº›Mapå°è£…åˆ°Listé›†åˆä¸­ã€‚ ScalarHandler å®ƒæ˜¯ç”¨äºå°è£…å•ä¸ªæ•°æ®ã€‚ä¾‹å¦‚ select count(*) from è¡¨æ“ä½œã€‚ ResultSetHandler å¸¸ç”¨å®ç°ç±»æµ‹è¯• QueryRunnerçš„æŸ¥è¯¢æ–¹æ³• queryæ–¹æ³•çš„è¿”å›å€¼éƒ½æ˜¯æ³›å‹,å…·ä½“çš„è¿”å›å€¼ç±»å‹,ä¼šæ ¹æ®ç»“æœé›†çš„å¤„ç†æ–¹å¼,å‘ç”Ÿå˜åŒ– æ–¹æ³• è¯´æ˜ query(String sql, handler ,Object[] param) è‡ªåŠ¨æ¨¡å¼åˆ›å»ºQueryRunner, æ‰§è¡ŒæŸ¥è¯¢ query(Connection con,String sql,handler,Object[] param) æ‰‹åŠ¨æ¨¡å¼åˆ›å»ºQueryRunner, æ‰§è¡ŒæŸ¥è¯¢ åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±», å¯¹ResultSetHandleræ¥å£çš„å‡ ä¸ªå¸¸è§å®ç°ç±»è¿›è¡Œæµ‹è¯• æŸ¥è¯¢idä¸º5çš„è®°å½•,å°è£…åˆ°æ•°ç»„ä¸­ æŸ¥è¯¢æ‰€æœ‰æ•°æ®,å°è£…åˆ°Listé›†åˆä¸­ æŸ¥è¯¢idä¸º5çš„è®°å½•,å°è£…åˆ°æŒ‡å®šJavaBeanä¸­ æŸ¥è¯¢è–ªèµ„å¤§äº 3000 çš„æ‰€å‘˜å·¥ä¿¡æ¯,å°è£…åˆ°JavaBeanä¸­å†å°è£…åˆ°Listé›†åˆä¸­ æŸ¥è¯¢å§“åæ˜¯ å¼ ç™¾ä¸‡çš„å‘˜å·¥ä¿¡æ¯,å°†ç»“æœå°è£…åˆ°Mapé›†åˆä¸­ æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„è–ªèµ„æ€»é¢ æŸ¥è¯¢idä¸º5çš„è®°å½•,å°è£…åˆ°æ•°ç»„ä¸­ 1234567891011121314151617/* * æŸ¥è¯¢idä¸º5çš„è®°å½•,å°è£…åˆ°æ•°ç»„ä¸­ * ArrayHandler å°†ç»“æœé›†çš„ç¬¬ä¸€æ¡æ•°æ®å°è£…åˆ°æ•°ç»„ä¸­ * */ @Test public void testFindById() throws SQLException &#123; //1.åˆ›å»ºQueryRunner QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); //2.ç¼–å†™SQL String sql = &quot;select * from employee where eid = ?&quot;; //3.æ‰§è¡ŒæŸ¥è¯¢ Object[] query = qr.query(sql, new ArrayHandler(), 5); //4.è·å–æ•°æ® System.out.println(Arrays.toString(query)); &#125; æŸ¥è¯¢æ‰€æœ‰æ•°æ®,å°è£…åˆ°Listé›†åˆä¸­ 12345678910111213141516171819/** * æŸ¥è¯¢æ‰€æœ‰æ•°æ®,å°è£…åˆ°Listé›†åˆä¸­ * ArrayListHandlerå¯ä»¥å°†æ¯æ¡æ•°æ®å…ˆå°è£…åˆ°æ•°ç»„ä¸­, å†å°†æ•°ç»„å°è£…åˆ°é›†åˆä¸­ **/ @Test public void testFindAll() throws SQLException &#123; //1.åˆ›å»ºQueryRunner QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); //2.ç¼–å†™SQL String sql = &quot;select * from employee&quot;; //3.æ‰§è¡ŒæŸ¥è¯¢ List&lt;Object[]&gt; query = qr.query(sql, new ArrayListHandler()); //4.éå†é›†åˆè·å–æ•°æ® for (Object[] objects : query) &#123; System.out.println(Arrays.toString(objects)); &#125; &#125; æ ¹æ®IDæŸ¥è¯¢,å°è£…åˆ°æŒ‡å®šJavaBeanä¸­ 1234567891011/** * æŸ¥è¯¢idä¸º3çš„è®°å½•,å°è£…åˆ°æŒ‡å®šJavaBeanä¸­ * BeanHandler å°†ç»“æœé›†çš„ç¬¬ä¸€æ¡æ•°æ®å°è£…åˆ° javaBeanä¸­ * **/@Test public void testFindByIdJavaBean() throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from employee where eid = ?&quot;; Employee employee = qr.query(sql, new BeanHandler&lt;Employee&gt;(Employee.class), 3); System.out.println(employee); &#125; æŸ¥è¯¢è–ªèµ„å¤§äº 3000 çš„æ‰€å‘˜å·¥ä¿¡æ¯,å°è£…åˆ°JavaBeanä¸­å†å°è£…åˆ°Listé›†åˆä¸­ 123456789101112/** * æŸ¥è¯¢è–ªèµ„å¤§äº 3000 çš„æ‰€å‘˜å·¥ä¿¡æ¯,å°è£…åˆ°JavaBeanä¸­å†å°è£…åˆ°Listé›†åˆä¸­ * BeanListHandler å°†ç»“æœé›†çš„æ¯ä¸€æ¡å’Œæ•°æ®å°è£…åˆ° JavaBeanä¸­ å†å°†JavaBean æ”¾åˆ°listé›†åˆä¸­ **/ @Test public void testFindBySalary() throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from employee where salary &gt; ?&quot;; List&lt;Employee&gt; list = qr.query(sql, new BeanListHandler&lt;Employee&gt;(Employee.class), 3000); for (Employee employee : list) &#123; System.out.println(employee); &#125; &#125; æŸ¥è¯¢å§“åæ˜¯ å¼ ç™¾ä¸‡çš„å‘˜å·¥ä¿¡æ¯,å°†ç»“æœå°è£…åˆ°Mapé›†åˆä¸­ 123456789101112131415/** *æŸ¥è¯¢å§“åæ˜¯ å¼ ç™¾ä¸‡çš„å‘˜å·¥ä¿¡æ¯,å°†ç»“æœå°è£…åˆ°Mapé›†åˆä¸­ * MapHandler å°†ç»“æœé›†çš„ç¬¬ä¸€æ¡è®°å½•å°è£…åˆ° Map&lt;String,Object&gt;ä¸­ * keyå¯¹åº”çš„æ˜¯ åˆ—å valueå¯¹åº”çš„æ˜¯ åˆ—çš„å€¼ **/ @Test public void testFindByName() throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select * from employee where ename = ?&quot;; Map&lt;String, Object&gt; map = qr.query(sql, new MapHandler(), &quot;å¼ ç™¾ä¸‡&quot;); Set&lt;Map.Entry&lt;String, Object&gt;&gt; entries = map.entrySet(); for (Map.Entry&lt;String, Object&gt; entry : entries) &#123; //æ‰“å°ç»“æœ System.out.println(entry.getKey() +&quot; = &quot; +entry.getValue()); &#125; &#125; æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„è–ªèµ„æ€»é¢ 12345678910/** *æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„è–ªèµ„æ€»é¢ * ScalarHandler ç”¨äºå°è£…å•ä¸ªçš„æ•°æ® **/ @Test public void testGetSum() throws SQLException &#123; QueryRunner qr = new QueryRunner(DruidUtils.getDataSource()); String sql = &quot;select sum(salary) from employee&quot;; Double sum = (Double)qr.query(sql, new ScalarHandler&lt;&gt;()); System.out.println(&quot;å‘˜å·¥è–ªèµ„æ€»é¢: &quot; + sum); &#125; 3.æ•°æ®æ‰¹å¤„ç†3.1 ä»€ä¹ˆæ˜¯æ‰¹å¤„ç† æ‰¹å¤„ç†(batch) æ“ä½œæ•°æ®åº“ æ‰¹å¤„ç†æŒ‡çš„æ˜¯ä¸€æ¬¡æ“ä½œä¸­æ‰§è¡Œå¤šæ¡SQLè¯­å¥ï¼Œæ‰¹å¤„ç†ç›¸æ¯”äºä¸€æ¬¡ä¸€æ¬¡æ‰§è¡Œæ•ˆç‡ä¼šæé«˜å¾ˆå¤šã€‚ å½“å‘æ•°æ®åº“ä¸­æ·»åŠ å¤§é‡çš„æ•°æ®æ—¶ï¼Œéœ€è¦ç”¨åˆ°æ‰¹å¤„ç†ã€‚ ä¸¾ä¾‹: é€è´§å‘˜çš„å·¥ä½œï¼š æœªä½¿ç”¨æ‰¹å¤„ç†çš„æ—¶å€™ï¼Œé€è´§å‘˜æ¯æ¬¡åªèƒ½è¿é€ ä¸€ä»¶è´§ç‰©ç»™å•†å®¶ï¼› ä½¿ç”¨æ‰¹å¤„ç†ï¼Œåˆ™æ˜¯é€è´§å‘˜å°†æ‰€æœ‰è¦è¿é€çš„è´§ç‰©, éƒ½ç”¨è½¦å¸¦åˆ°å‘æ”¾å¤„æ´¾ç»™å®¢æˆ·ã€‚ 3.2 å®ç°æ‰¹å¤„ç†Statementå’ŒPreparedStatementéƒ½æ”¯æŒæ‰¹å¤„ç†æ“ä½œï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹PreparedStatementçš„æ‰¹å¤„ç†æ–¹å¼ï¼š è¦ç”¨åˆ°çš„æ–¹æ³• æ–¹æ³• è¯´æ˜ void addBatch() å°†ç»™å®šçš„ SQL å‘½ä»¤æ·»åŠ åˆ°æ­¤ Statement å¯¹è±¡çš„å½“å‰å‘½ä»¤åˆ—è¡¨ä¸­ã€‚é€šè¿‡è°ƒç”¨æ–¹æ³• executeBatch å¯ä»¥æ‰¹é‡æ‰§è¡Œæ­¤åˆ—è¡¨ä¸­çš„å‘½ä»¤ã€‚ int[] executeBatch() æ¯æ¬¡æäº¤ä¸€æ‰¹å‘½ä»¤åˆ°æ•°æ®åº“ä¸­æ‰§è¡Œï¼Œå¦‚æœæ‰€æœ‰çš„å‘½ä»¤éƒ½æˆåŠŸæ‰§è¡Œäº†ï¼Œ mysql æ‰¹å¤„ç†æ˜¯é»˜è®¤å…³é—­çš„ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸€ä¸ªå‚æ•°æ‰æ‰“å¼€mysql æ•°æ®åº“æ‰¹å¤„ç†ï¼Œåœ¨urlä¸­æ·»åŠ  12rewriteBatchedStatements=true ä¾‹å¦‚: url=jdbc:mysql://127.0.0.1:3306/db5?characterEncoding=UTF-8&amp;rewriteBatchedStatements=true åˆ›å»ºä¸€å¼ è¡¨ 1234CREATE TABLE testBatch ( id INT PRIMARY KEY AUTO_INCREMENT, uname VARCHAR(50) ) æµ‹è¯•å‘è¡¨ä¸­æ’å…¥ 1ä¸‡æ¡æ•°æ® 123456789101112131415161718192021222324252627public class TestBatch &#123; //ä½¿ç”¨æ‰¹å¤„ç†,å‘è¡¨ä¸­æ·»åŠ  1ä¸‡æ¡æ•°æ® public static void main(String[] args) &#123; try &#123; //1.è·å–è¿æ¥ Connection con = DruidUtils.getConnection(); //2.è·å–é¢„å¤„ç†å¯¹è±¡ String sql =&quot;insert into testBatch(uname) values(?)&quot;; PreparedStatement ps = con.prepareStatement(sql); //3.åˆ›å»º forå¾ªç¯ æ¥è®¾ç½®å ä½ç¬¦å‚æ•° for (int i = 0; i &lt; 10000 ; i++) &#123; ps.setString(1,&quot;å°å¼º&quot;+i); //å°†SQLæ·»åŠ åˆ°æ‰¹å¤„ç† åˆ—è¡¨ ps.addBatch(); &#125; //æ·»åŠ æ—¶é—´æˆ³ æµ‹è¯•æ‰§è¡Œæ•ˆç‡ long start = System.currentTimeMillis(); //ç»Ÿä¸€ æ‰¹é‡æ‰§è¡Œ ps.executeBatch(); long end = System.currentTimeMillis(); System.out.println(&quot;æ’å…¥10000æ¡æ•°æ®ä½¿ç”¨: &quot; +(end - start) +&quot; æ¯«ç§’!&quot;); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; 4. MySqlå…ƒæ•°æ®4.1 ä»€ä¹ˆæ˜¯å…ƒæ•°æ® é™¤äº†è¡¨ä¹‹å¤–çš„æ•°æ®éƒ½æ˜¯å…ƒæ•°æ®,å¯ä»¥åˆ†ä¸ºä¸‰ç±» æŸ¥è¯¢ç»“æœä¿¡æ¯ï¼š UPDATE æˆ– DELETEè¯­å¥ å—å½±å“çš„è®°å½•æ•°ã€‚ æ•°æ®åº“å’Œæ•°æ®è¡¨çš„ä¿¡æ¯ï¼š åŒ…å«äº†æ•°æ®åº“åŠæ•°æ®è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚ MySQL****æœåŠ¡å™¨ä¿¡æ¯ï¼š åŒ…å«äº†æ•°æ®åº“æœåŠ¡å™¨çš„å½“å‰çŠ¶æ€ï¼Œç‰ˆæœ¬å·ç­‰ã€‚ 4.2 å¸¸ç”¨å‘½ä»¤123456789-- å…ƒæ•°æ®ç›¸å…³çš„å‘½ä»¤ä»‹ç» -- 1.æŸ¥çœ‹æœåŠ¡å™¨å½“å‰çŠ¶æ€ -- 2.æŸ¥çœ‹MySQlçš„ç‰ˆæœ¬ä¿¡æ¯ -- 3.æŸ¥è¯¢è¡¨ä¸­çš„è¯¦ç»†ä¿¡æ¯ -- 4.æ˜¾ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯ -- 5.åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ -- 6.æ˜¾ç¤ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨ -- 7.è·å–å½“å‰çš„æ•°æ®åº“å select version(); è·å–mysqlæœåŠ¡å™¨çš„ç‰ˆæœ¬ä¿¡æ¯ show status; æŸ¥çœ‹æœåŠ¡å™¨çš„çŠ¶æ€ä¿¡æ¯ show columns from table_name; æ˜¾ç¤ºè¡¨çš„å­—æ®µä¿¡æ¯ç­‰ï¼Œå’Œdesc table_nameä¸€æ · show index from table_name; æ˜¾ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯ï¼ŒåŒ…æ‹¬PRIMARY KEYï¼ˆä¸»é”®ï¼‰ show databases:åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ show tables : æ˜¾ç¤ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨ select database(): è·å–å½“å‰çš„æ•°æ®åº“å 4.3 ä½¿ç”¨JDBC è·å–å…ƒæ•°æ®é€šè¿‡JDBC ä¹Ÿå¯ä»¥è·å–åˆ°å…ƒæ•°æ®,æ¯”å¦‚æ•°æ®åº“çš„ç›¸å…³ä¿¡æ¯,æˆ–è€…å½“æˆ‘ä»¬ä½¿ç”¨ç¨‹åºæŸ¥è¯¢ä¸€ä¸ªä¸ç†Ÿæ‚‰çš„è¡¨æ—¶, æˆ‘ä»¬å¯ä»¥é€šè¿‡è·å–å…ƒç´ æ®ä¿¡æ¯,äº†è§£è¡¨ä¸­æœ‰å¤šå°‘ä¸ªå­—æ®µ,å­—æ®µçš„åç§° å’Œ å­—æ®µçš„ç±»å‹ 4.3.1 å¸¸ç”¨ç±»ä»‹ç» JDBCä¸­æè¿°å…ƒæ•°æ®çš„ç±» å…ƒæ•°æ®ç±» ä½œç”¨ DatabaseMetaData æè¿°æ•°æ®åº“çš„å…ƒæ•°æ®å¯¹è±¡ ResultSetMetaData æè¿°ç»“æœé›†çš„å…ƒæ•°æ®å¯¹è±¡ è·å–å…ƒæ•°æ®å¯¹è±¡çš„æ–¹æ³• : getMetaData () connection è¿æ¥å¯¹è±¡, è°ƒç”¨ getMetaData () æ–¹æ³•,è·å–çš„æ˜¯DatabaseMetaData æ•°æ®åº“å…ƒæ•°æ®å¯¹è±¡ PrepareStatement é¢„å¤„ç†å¯¹è±¡è°ƒç”¨ getMetaData () , è·å–çš„æ˜¯ResultSetMetaData , ç»“æœé›†å…ƒæ•°æ®å¯¹è±¡ DatabaseMetaDataçš„å¸¸ç”¨æ–¹æ³• æ–¹æ³• è¯´æ˜ getURL() è·å–æ•°æ®åº“çš„URL getUserName() è·å–å½“å‰æ•°æ®åº“çš„ç”¨æˆ·å getDatabaseProductName() è·å–æ•°æ®åº“çš„äº§å“åç§° getDatabaseProductVersion() è·å–æ•°æ®çš„ç‰ˆæœ¬å· getDriverName() è¿”å›é©±åŠ¨ç¨‹åºçš„åç§° isReadOnly() åˆ¤æ–­æ•°æ®åº“æ˜¯å¦åªå…è®¸åªè¯» true ä»£è¡¨åªè¯» ResultSetMetaDataçš„å¸¸ç”¨æ–¹æ³• æ–¹æ³• è¯´æ˜ getColumnCount() å½“å‰ç»“æœé›†å…±æœ‰å¤šå°‘åˆ— getColumnName(int i) è·å–æŒ‡å®šåˆ—å·çš„åˆ—å, å‚æ•°æ˜¯æ•´æ•° ä»1å¼€å§‹ getColumnTypeName(int i) è·å–æŒ‡å®šåˆ—å·åˆ—çš„ç±»å‹, å‚æ•°æ˜¯æ•´æ•° ä»1å¼€å§‹ 4.3.2 ä»£ç ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public class TestMetaData &#123; //è·å–æ•°æ®åº“ç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯ ä½¿ç”¨DatabaseMetaData @Test public void testDataBaseMetaData() throws SQLException &#123; //1.è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡ connection Connection connection = DruidUtils.getConnection(); //2.è·å–ä»£è¡¨æ•°æ®åº“çš„ å…ƒæ•°æ®å¯¹è±¡ DatabaseMetaData DatabaseMetaData metaData = connection.getMetaData(); //3.è·å–æ•°æ®åº“ç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯ String url = metaData.getURL(); System.out.println(&quot;æ•°æ®åº“URL: &quot; + url); String userName = metaData.getUserName(); System.out.println(&quot;å½“å‰ç”¨æˆ·: &quot; + userName ); String productName = metaData.getDatabaseProductName(); System.out.println(&quot;æ•°æ®åº“äº§å“å: &quot; + productName); String version = metaData.getDatabaseProductVersion(); System.out.println(&quot;æ•°æ®åº“ç‰ˆæœ¬: &quot; + version); String driverName = metaData.getDriverName(); System.out.println(&quot;é©±åŠ¨åç§°: &quot; + driverName); //åˆ¤æ–­å½“å‰æ•°æ®åº“æ˜¯å¦åªå…è®¸åªè¯» boolean b = metaData.isReadOnly(); //å¦‚æœæ˜¯ true å°±è¡¨ç¤º åªè¯» if(b)&#123; System.out.println(&quot;å½“å‰æ•°æ®åº“åªå…è®¸è¯»æ“ä½œ!&quot;); &#125;else&#123; System.out.println(&quot;ä¸æ˜¯åªè¯»æ•°æ®åº“&quot;); &#125; connection.close(); &#125; //è·å–ç»“æœé›†ä¸­çš„å…ƒæ•°æ®ä¿¡æ¯ @Test public void testResultSetMetaData() throws SQLException &#123; //1.è·å–è¿æ¥ Connection con = DruidUtils.getConnection(); //2.è·å–é¢„å¤„ç†å¯¹è±¡ PreparedStatement ps = con.prepareStatement(&quot;select * from employee&quot;); ResultSet resultSet = ps.executeQuery(); //3.è·å–ç»“æœé›†å…ƒç´ æ®å¯¹è±¡ ResultSetMetaData metaData = ps.getMetaData(); //4.è·å–å½“å‰ç»“æœé›† å…±æœ‰å¤šå°‘åˆ— int count = metaData.getColumnCount(); System.out.println(&quot;å½“å‰ç»“æœé›†ä¸­å…±æœ‰: &quot; + count + &quot; åˆ—&quot;); //5.ç»“æœé›†ä¸­ åˆ—çš„åç§° å’Œ ç±»å‹ for (int i = 1; i &lt;= count; i++) &#123; String columnName = metaData.getColumnName(i); System.out.println(&quot;åˆ—å: &quot;+ columnName); String columnTypeName = metaData.getColumnTypeName(i); System.out.println(&quot;ç±»å‹: &quot; +columnTypeName); &#125; //é‡Šæ”¾èµ„æº DruidUtils.close(con,ps,resultSet); &#125; &#125;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"JDBC","slug":"JDBC","date":"2019-12-22T04:57:36.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2019/12/22/JDBC/","link":"","permalink":"http://yournotes.cn/2019/12/22/JDBC/","excerpt":"1. JDBCæ¦‚è¿°1.1 å®¢æˆ·ç«¯æ“ä½œæ•°æ®åº“çš„æ–¹å¼ æ–¹å¼1: ä½¿ç”¨ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯æ¥è®¿é—® MySQLï¼šSQLyogã€Navicatç­‰ç­‰","text":"1. JDBCæ¦‚è¿°1.1 å®¢æˆ·ç«¯æ“ä½œæ•°æ®åº“çš„æ–¹å¼ æ–¹å¼1: ä½¿ç”¨ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯æ¥è®¿é—® MySQLï¼šSQLyogã€Navicatç­‰ç­‰ æ–¹å¼2: ä½¿ç”¨å‘½ä»¤è¡Œ æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„æ˜¯é€šè¿‡ Javaç¨‹åº æ¥è®¿é—® MySQL æ•°æ®åº“ 1.2 ä»€ä¹ˆæ˜¯JDBC JDBC(Java Data Base Connectivity) æ˜¯ Java è®¿é—®æ•°æ®åº“çš„æ ‡å‡†è§„èŒƒ.æ˜¯ä¸€ç§ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java APIï¼Œå¯ä»¥ä¸ºå¤šç§å…³ç³»æ•°æ®åº“æä¾›ç»Ÿä¸€è®¿é—®ï¼Œå®ƒç”±ä¸€ç»„ç”¨Javaè¯­è¨€ç¼–å†™çš„ç±»å’Œæ¥å£ç»„æˆã€‚æ˜¯Javaè®¿é—®æ•°æ®åº“çš„æ ‡å‡†è§„èŒƒ. 1.3 JDBCåŸç† JDBCæ˜¯æ¥å£ï¼Œé©±åŠ¨æ˜¯æ¥å£çš„å®ç°ï¼Œæ²¡æœ‰é©±åŠ¨å°†æ— æ³•å®Œæˆæ•°æ®åº“è¿æ¥ï¼Œä»è€Œä¸èƒ½æ“ä½œæ•°æ®åº“ï¼æ¯ä¸ªæ•°æ®åº“å‚å•†éƒ½éœ€è¦æä¾›è‡ªå·±çš„é©±åŠ¨ï¼Œç”¨æ¥è¿æ¥è‡ªå·±å…¬å¸çš„æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯è¯´é©±åŠ¨ä¸€èˆ¬éƒ½ç”±æ•°æ®åº“ç”Ÿæˆå‚å•†æä¾›ã€‚ æ€»ç»“ï¼š JDBCå°±æ˜¯ç”±sunå…¬å¸å®šä¹‰çš„ä¸€å¥—æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“çš„è§„åˆ™(æ¥å£)ï¼Œè€Œæ•°æ®åº“å‚å•†éœ€è¦å®ç°è¿™å¥—æ¥å£,æä¾›æ•°æ®åº“é©±åŠ¨jaråŒ…, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™å¥—æ¥å£ç¼–ç¨‹,çœŸæ­£æ‰§è¡Œçš„ä»£ç æ˜¯å¯¹åº”é©±åŠ¨åŒ…ä¸­çš„å®ç°ç±»ã€‚ 2. JDBCå¼€å‘2.1 æ•°æ®å‡†å¤‡12345678910111213141516-- åˆ›å»º jdbc_userè¡¨ CREATE TABLE jdbc_user ( id INT PRIMARY KEY AUTO_INCREMENT, username VARCHAR(50), PASSWORD VARCHAR(50), birthday DATE ); -- æ·»åŠ æ•°æ® INSERT INTO jdbc_user (username, PASSWORD,birthday) VALUES(&#x27;admin1&#x27;, &#x27;123&#x27;,&#x27;1991/12/24&#x27;), (&#x27;admin2&#x27;,&#x27;123&#x27;,&#x27;1995/12/24&#x27;), (&#x27;test1&#x27;, &#x27;123&#x27;,&#x27;1998/12/24&#x27;), (&#x27;test2&#x27;, &#x27;123&#x27;,&#x27;2000/12/24&#x27;); 2.2 MySqlé©±åŠ¨åŒ… å°†MySQLé©±åŠ¨åŒ…æ·»åŠ åˆ°jaråŒ…åº“æ–‡ä»¶å¤¹ä¸­ï¼ŒMyjaræ–‡ä»¶å¤¹,ç”¨äºå­˜æ”¾å½“å‰é¡¹ç›®éœ€è¦çš„æ‰€æœ‰jaråŒ… åœ¨ ideaä¸­ é…ç½®jaråŒ…åº“çš„ä½ç½® åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®jdbc_task01, é…ç½®jaråŒ…åº“ 2.3 APIä½¿ç”¨ï¼š1.æ³¨å†Œé©±åŠ¨ JDBCè§„èŒƒå®šä¹‰é©±åŠ¨æ¥å£ï¼š java.sql.Driver MySqlé©±åŠ¨åŒ…æä¾›äº†å®ç°ç±»ï¼š com.mysql.jdbc.Driver åŠ è½½æ³¨å†Œé©±åŠ¨çš„æ–¹å¼ æè¿° Class.forName(æ•°æ®åº“é©±åŠ¨å®ç°ç±») åŠ è½½å’Œæ³¨å†Œæ•°æ®åº“é©±åŠ¨,æ•°æ®åº“é©±åŠ¨ç”±æ•°æ®åº“å‚å•†MySqlæä¾› ä»£ç ç¤ºä¾‹ 1234567public class JDBCDemo01 &#123; public static void main(String[] args) throws ClassNotFoundException &#123; //1.æ³¨å†Œé©±åŠ¨ // forName æ–¹æ³•æ‰§è¡Œå°†ç±»è¿›è¡Œåˆå§‹åŒ– Class.forName(&quot;com.mysql.jdbc.Driver&quot;); &#125; &#125; ä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥æ³¨å†Œé©±åŠ¨? æˆ‘ä»¬çŸ¥é“ Classç±»çš„forNameæ–¹æ³• ,å¯ä»¥å°†ä¸€ä¸ªç±»åˆå§‹åŒ–, ç°åœ¨æˆ‘ä»¬ä¸€èµ·Driverç±»çš„ çœ‹ä¸€ä¸‹æºç  123456789101112131415161718// Driverç±»æ˜¯MySqlæä¾›çš„æ•°æ®åº“é©±åŠ¨ç±», å®ç°äº†JDBCçš„Driveræ¥å£ java.sql.Driver public class Driver extends NonRegisteringDriver implements java.sql.Driver &#123; // ç©ºå‚æ„é€  public Driver() throws SQLException &#123; &#125; //é™æ€ä»£ç å—,Classç±»çš„ forName()æ–¹æ³•å°†Driverç±» åŠ è½½åˆ°å†…å­˜, staticä»£ç å—ä¼šè‡ªåŠ¨æ‰§è¡Œ static &#123; try &#123; /* DriverManager é©±åŠ¨ç®¡ç†ç±» registerDriver(new Driver) æ³¨å†Œé©±åŠ¨çš„æ–¹æ³• æ³¨å†Œæ•°æ®åº“é©±åŠ¨ */ DriverManager.registerDriver(new Driver()); &#125; catch (SQLException var1) &#123; throw new RuntimeException(&quot;Can&#x27;t register driver!&quot;); &#125; &#125; &#125; æ³¨ï¼š ä» JDBC3 å¼€å§‹ï¼Œç›®å‰å·²ç»æ™®éä½¿ç”¨çš„ç‰ˆæœ¬ã€‚å¯ä»¥ä¸ç”¨æ³¨å†Œé©±åŠ¨è€Œç›´æ¥ä½¿ç”¨ã€‚ Class.forName è¿™å¥è¯å¯ä»¥çœç•¥ã€‚ 2.4 APIä½¿ç”¨ï¼š2.è·å¾—è¿æ¥ Connection æ¥å£ï¼Œä»£è¡¨ä¸€ä¸ªè¿æ¥å¯¹è±¡ ,å…·ä½“çš„å®ç°ç±»ç”±æ•°æ®åº“çš„å‚å•†å®ç° ä½¿ç”¨ DriverManagerç±»çš„é™æ€æ–¹æ³•,getConnectionå¯ä»¥è·å–æ•°æ®åº“çš„è¿æ¥ è·å–è¿æ¥çš„é™æ€æ–¹æ³• è¯´æ˜ Connection getConnection(String url, String user,String password) é€šè¿‡è¿æ¥å­—ç¬¦ä¸²å’Œç”¨æˆ·å,å¯†ç æ¥è·å–æ•°æ® getConnectionæ–¹æ³• 3ä¸ª è¿æ¥å‚æ•°è¯´æ˜ è¿æ¥å‚æ•° è¯´æ˜ user ç™»é™†ç”¨æˆ·å password ç™»å½•å¯†ç  url æ•°æ®åº“åœ°å€ï¼ŒmySql URLçš„æ ¼å¼jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;db4 å¯¹URLçš„è¯¦ç»†è¯´æ˜ 1jdbc:mysql://localhost:3306/db4?characterEncoding=UTF-8 JDBCè§„å®šurlçš„æ ¼å¼ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†ä¸­é—´ä½¿ç”¨å†’å·åˆ†éš”ã€‚ ç¬¬ä¸€éƒ¨åˆ†æ˜¯åè®® jdbcï¼Œè¿™æ˜¯å›ºå®šçš„ï¼› ç¬¬äºŒéƒ¨åˆ†æ˜¯å­åè®®ï¼Œå°±æ˜¯æ•°æ®åº“åç§°ï¼Œè¿æ¥mysqlæ•°æ®åº“ï¼Œç¬¬äºŒéƒ¨åˆ†å½“ç„¶æ˜¯mysqläº†ï¼› ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç”±æ•°æ®åº“å‚å•†è§„å®šçš„ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ¯ä¸ªæ•°æ®åº“å‚å•†çš„è¦æ±‚ï¼Œmysqlçš„ç¬¬ä¸‰éƒ¨åˆ†åˆ†åˆ«ç”±æ•°æ®åº“æœåŠ¡å™¨çš„IPåœ°å€ï¼ˆlocalhostï¼‰ã€ç«¯å£å·ï¼ˆ3306ï¼‰ï¼Œä»¥åŠè¦ä½¿ç”¨çš„ æ•°æ®åº“åç§° ç»„æˆã€‚ ä»£ç ç¤ºä¾‹ 1234567891011public class JDBCDemo02 &#123; public static void main(String[] args) throws Exception &#123; //1.æ³¨å†Œé©±åŠ¨ Class.forName(&quot;com.mysql.jdbc.Driver&quot;); //2.è·å–è¿æ¥ url,ç”¨æˆ·å, å¯†ç  String url = &quot;jdbc:mysql://localhost:3306/db4&quot;; Connection con = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;); //com.mysql.jdbc.JDBC4Connection@2e3fc542 System.out.println(con); &#125; &#125; 2.5 APIä½¿ç”¨ï¼š3.è·å–è¯­å¥æ‰§è¡Œå¹³å° é€šè¿‡Connection çš„ createStatementæ–¹æ³• è·å–sqlè¯­å¥æ‰§è¡Œå¯¹è±¡ Connectionæ¥å£ä¸­çš„æ–¹æ³• è¯´æ˜ Statement createStatement() åˆ›å»º SQLè¯­å¥æ‰§è¡Œå¯¹è±¡ Statement ï¼š ä»£è¡¨ä¸€æ¡è¯­å¥å¯¹è±¡ï¼Œç”¨äºå‘é€ SQL è¯­å¥ç»™æœåŠ¡å™¨ï¼Œç”¨äºæ‰§è¡Œé™æ€ SQL è¯­å¥å¹¶è¿”å›å®ƒæ‰€ç”Ÿæˆç»“æœçš„å¯¹è±¡ã€‚ Statementç±» å¸¸ç”¨æ–¹æ³• è¯´æ˜ int executeUpdate(String sql) æ‰§è¡Œinsert update deleteè¯­å¥.è¿”å›intç±»å‹,ä»£è¡¨å—å½±å“çš„è¡Œæ•° ResultSet executeQuery(String æ‰§è¡Œselectè¯­å¥, è¿”å›ResultSetç»“æœé›†å¯¹è±¡ ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526public class JDBCDemo03 &#123; public static void main(String[] args) throws Exception &#123; //1.æ³¨å†Œé©±åŠ¨ Class.forName(&quot;com.mysql.jdbc.Driver&quot;); //2.è·å–è¿æ¥ url,ç”¨æˆ·å, å¯†ç  String url = &quot;jdbc:mysql://localhost:3306/db4&quot;; Connection con = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;); //3.è·å– Statementå¯¹è±¡ Statement statement = con.createStatement(); //4.æ‰§è¡Œåˆ›å»ºè¡¨æ“ä½œ String sql = &quot;create table test01(id int, name varchar(20),age int);&quot;; //5.å¢åˆ æ”¹æ“ä½œ ä½¿ç”¨executeUpdate,å¢åŠ ä¸€å¼ è¡¨ int i = statement.executeUpdate(sql); //6.è¿”å›å€¼æ˜¯å—å½±å“çš„å‡½æ•° System.out.println(i); //7.å…³é—­æµ statement.close(); con.close(); &#125; &#125; 2.6 APIä½¿ç”¨ï¼š4.å¤„ç†ç»“æœé›† åªæœ‰åœ¨è¿›è¡ŒæŸ¥è¯¢æ“ä½œçš„æ—¶å€™, æ‰ä¼šå¤„ç†ç»“æœé›† ä»£ç ç¤ºä¾‹ 1234567891011121314151617public class JDBCDemo04 &#123; public static void main(String[] args) throws SQLException &#123; //1.æ³¨å†Œé©±åŠ¨ å¯ä»¥çœç•¥ //2.è·å–è¿æ¥ String url = &quot;jdbc:mysql://localhost:3306/db4&quot;; Connection con = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;); //3.è·å– Statementå¯¹è±¡ Statement statement = con.createStatement(); String sql = &quot;select * from jdbc_user&quot;; //æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ,è¿”å›çš„æ˜¯ä¸€ä¸ª ResultSet ç»“æœå¯¹è±¡ ResultSet resultSet = statement.executeQuery(sql); //4.å¤„ç†ç»“æœé›† resultSet &#125; &#125; 2.6.1 ResultSetæ¥å£ ä½œç”¨ï¼šå°è£…æ•°æ®åº“æŸ¥è¯¢çš„ç»“æœé›†ï¼Œå¯¹ç»“æœé›†è¿›è¡Œéå†ï¼Œå–å‡ºæ¯ä¸€æ¡è®°å½•ã€‚ ResultSetæ¥å£æ–¹æ³• è¯´æ˜ boolean next() 1) æ¸¸æ ‡å‘ä¸‹ä¸€è¡Œ2) è¿”å› boolean ç±»å‹ï¼Œå¦‚æœè¿˜æœ‰ä¸‹ä¸€æ¡è®°å½•ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false xxx getXxx( String or int) 1) é€šè¿‡åˆ—åï¼Œå‚æ•°æ˜¯ String ç±»å‹ã€‚è¿”å›ä¸åŒçš„ç±»å‹2) é€šè¿‡åˆ—å·ï¼Œå‚æ•°æ˜¯æ•´æ•°ï¼Œä» 1 å¼€å§‹ã€‚è¿”å›ä¸åŒçš„ç±»å‹ ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031public class JDBCDemo04 &#123; public static void main(String[] args) throws SQLException &#123; //1.æ³¨å†Œé©±åŠ¨ å¯ä»¥çœç•¥ //2.è·å–è¿æ¥ String url = &quot;jdbc:mysql://localhost:3306/db4&quot;; Connection con = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;); //3.è·å– Statementå¯¹è±¡ Statement statement = con.createStatement(); String sql = &quot;select * from jdbc_user&quot;; //æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ,è¿”å›çš„æ˜¯ä¸€ä¸ª ResultSet ç»“æœå¯¹è±¡ ResultSet resultSet = statement.executeQuery(sql); //4.å¤„ç†ç»“æœé›† // ä½¿ç”¨whileå¾ªç¯ while(resultSet.next())&#123; //è·å–id int id = resultSet.getInt(&quot;id&quot;); //è·å–å§“å String username = resultSet.getString(&quot;username&quot;); //è·å–ç”Ÿæ—¥ Date birthday = resultSet.getDate(&quot;birthday&quot;); System.out.println(id + &quot; = &quot; +username + &quot; : &quot; + birthday); &#125; //å…³é—­è¿æ¥ resultSet.close(); statement.close(); con.close(); &#125; &#125; 2.7 APIä½¿ç”¨ï¼š5.é‡Šæ”¾èµ„æº éœ€è¦é‡Šæ”¾çš„å¯¹è±¡ï¼šResultSet ç»“æœé›†ï¼ŒStatement è¯­å¥ï¼ŒConnection è¿æ¥ é‡Šæ”¾åŸåˆ™ï¼šå…ˆå¼€çš„åå…³ï¼Œåå¼€çš„å…ˆå…³ã€‚ResultSet &#x3D;&#x3D;&gt; Statement &#x3D;&#x3D;&gt; Connection æ”¾åœ¨å“ªä¸ªä»£ç å—ä¸­ï¼šfifinally å— ä¸IOæµä¸€æ ·ï¼Œä½¿ç”¨åçš„ä¸œè¥¿éƒ½éœ€è¦å…³é—­ï¼å…³é—­çš„é¡ºåºæ˜¯å…ˆå¼€åå…³, å…ˆå¾—åˆ°çš„åå…³é—­ï¼Œåå¾—åˆ°çš„å…ˆå…³é—­ ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132public class JDBCDemo05 &#123;public static void main(String[] args) &#123; Connection connection = null; Statement statement = null; ResultSet resultSet = null; try &#123; //1.æ³¨å†Œé©±åŠ¨ï¼ˆçœç•¥ï¼‰ //2.è·å–è¿æ¥ String url = &quot;jdbc:mysql://localhost:3306/db4&quot;; connection = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;); //3.è·å– Statementå¯¹è±¡ statement = connection.createStatement(); String sql = &quot;select * from jdbc_user&quot;; resultSet = statement.executeQuery(sql); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; finally &#123; /** * å¼€å¯é¡ºåº: connection ==&gt; statement =&gt; resultSet * å…³é—­é¡ºåº: resultSet ==&gt; statement ==&gt; connection */ try &#123; resultSet.close(); statement.close(); connection.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; 2.8 æ­¥éª¤æ€»ç»“ è·å–é©±åŠ¨(å¯ä»¥çœç•¥) è·å–è¿æ¥ è·å–Statementå¯¹è±¡ å¤„ç†ç»“æœé›†(åªåœ¨æŸ¥è¯¢æ—¶å¤„ç†) é‡Šæ”¾èµ„æº 3. JDBCå®ç°å¢åˆ æ”¹æŸ¥3.1 JDBCå·¥å…·ç±» ä»€ä¹ˆæ—¶å€™è‡ªå·±åˆ›å»ºå·¥å…·ç±»ï¼Ÿ å¦‚æœä¸€ä¸ªåŠŸèƒ½ç»å¸¸è¦ç”¨åˆ°ï¼Œæˆ‘ä»¬å»ºè®®æŠŠè¿™ä¸ªåŠŸèƒ½åšæˆä¸€ä¸ªå·¥å…·ç±»ï¼Œå¯ä»¥åœ¨ä¸åŒçš„åœ°æ–¹é‡ç”¨ã€‚ â€œè·å¾—æ•°æ®åº“è¿æ¥â€æ“ä½œï¼Œå°†åœ¨ä»¥åçš„å¢åˆ æ”¹æŸ¥æ‰€æœ‰åŠŸèƒ½ä¸­éƒ½å­˜åœ¨ï¼Œå¯ä»¥å°è£…å·¥å…·ç±»JDBCUtilsã€‚æä¾›è·å–è¿æ¥å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œè¾¾åˆ°ä»£ç çš„é‡å¤åˆ©ç”¨ã€‚ å·¥å…·ç±»åŒ…å«çš„å†…å®¹ å¯ä»¥æŠŠå‡ ä¸ªå­—ç¬¦ä¸²å®šä¹‰æˆå¸¸é‡ï¼šç”¨æˆ·åï¼Œå¯†ç ï¼ŒURLï¼Œé©±åŠ¨ç±» å¾—åˆ°æ•°æ®åº“çš„è¿æ¥ï¼šgetConnection() å…³é—­æ‰€æœ‰æ‰“å¼€çš„èµ„æºï¼š ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/** * JDBC å·¥å…·ç±» */ public class JDBCUtils &#123; //1. å®šä¹‰å­—ç¬¦ä¸²å¸¸é‡, è®°å½•è·å–è¿æ¥æ‰€éœ€è¦çš„ä¿¡æ¯ public static final String DRIVERNAME = &quot;com.mysql.jdbc.Driver&quot;; public static final String URL = &quot;jdbc:mysql://localhost:3306/db4?characterEncoding=UTF-8&quot;; public static final String USER = &quot;root&quot;; public static final String PASSWORD = &quot;123456&quot;; //2. é™æ€ä»£ç å—, éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ static&#123; try &#123; //æ³¨å†Œé©±åŠ¨ Class.forName(DRIVERNAME); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125; //3.è·å–è¿æ¥çš„é™æ€æ–¹æ³• public static Connection getConnection()&#123; try &#123; //è·å–è¿æ¥å¯¹è±¡ Connection connection = DriverManager.getConnection(URL, USER, PASSWORD); //è¿”å›è¿æ¥å¯¹è±¡ return connection; &#125; catch (SQLException e) &#123; e.printStackTrace(); return null; &#125; &#125; //å…³é—­èµ„æºçš„æ–¹æ³• public static void close(Connection con, Statement st)&#123; if(con != null &amp;&amp; st != null)&#123; try &#123; st.close(); con.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void close(Connection con, Statement st, ResultSet rs)&#123; if(rs != null)&#123; try &#123;rs.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; close(con,st); &#125; &#125; 3.2 DMLæ“ä½œ3.2.1 æ’å…¥è®°å½•è§£å†³æ’å…¥ä¸­æ–‡ä¹±ç é—®é¢˜ 12jdbc:mysql://localhost:3306/db4?characterEncoding=UTF-8 characterEncoding=UTF-8 æŒ‡å®šå­—ç¬¦çš„ç¼–ç ã€è§£ç æ ¼å¼ã€‚ ä»£ç ç¤ºä¾‹ 12345678910111213141516171819202122/** * æ’å…¥æ•°æ® * @throws SQLException */ @Test public void testInsert() throws SQLException &#123; //1.é€šè¿‡å·¥å…·ç±»è·å–è¿æ¥ Connection connection = JDBCUtils.getConnection(); //2.è·å–Statement Statement statement = connection.createStatement(); //2.1 ç¼–å†™Sql String sql = &quot;insert into jdbc_user values(null,&#x27;å¼ ç™¾ä¸‡&#x27;,&#x27;123&#x27;,&#x27;2020/1/1&#x27;)&quot;; //2.2 æ‰§è¡ŒSql int i = statement.executeUpdate(sql); System.out.println(i); //3.å…³é—­æµ JDBCUtils.close(connection,statement); &#125; 3.2.2 æ›´æ–°è®°å½• æ ¹æ®ID éœ€æ”¹ç”¨æˆ·åç§° 12345678910/** * ä¿®æ”¹ id ä¸º1 çš„ç”¨æˆ·åä¸º æœ¨ç“œç…²é¸¡è„š */ @Test public void testUpdate() throws SQLException &#123; Connection connection = JDBCUtils.getConnection(); Statement statement = connection.createStatement(); String sql = &quot;update jdbc_user set username = &#x27;æœ¨ç“œç…²é¸¡è„š&#x27; where id = 1&quot;; statement.executeUpdate(sql); JDBCUtils.close(connection,statement); &#125; 3.2.3 åˆ é™¤è®°å½• åˆ é™¤idä¸º3å’Œ4çš„è®°å½• 1234567891011/** * åˆ é™¤id ä¸º 3 å’Œ 4çš„è®°å½• * @throws SQLException */ @Test public void testDelete() throws SQLException &#123; Connection connection = JDBCUtils.getConnection(); Statement statement = connection.createStatement(); statement.executeUpdate(&quot;delete from jdbc_user where id in(3,4)&quot;); JDBCUtils.close(connection,statement); &#125; 3.3 DQLæ“ä½œ3.3.1 æŸ¥è¯¢å§“åä¸ºæœ¨ç“œç…²é¸¡è„šçš„ä¸€æ¡è®°å½•12345678910111213141516171819202122public class TestJDBC02 &#123; public static void main(String[] args) throws SQLException &#123; //1.è·å–è¿æ¥å¯¹è±¡ Connection connection = JDBCUtils.getConnection(); //2.è·å–Statementå¯¹è±¡ Statement statement = connection.createStatement(); String sql = &quot;SELECT * FROM jdbc_user WHERE username = &#x27;æœ¨ç“œç…²é¸¡è„š&#x27;;&quot;; ResultSet resultSet = statement.executeQuery(sql); //3.å¤„ç†ç»“æœé›† while(resultSet.next())&#123; //é€šè¿‡åˆ—å è·å–å­—æ®µä¿¡æ¯ int id = resultSet.getInt(&quot;id&quot;); String username = resultSet.getString(&quot;username&quot;); String password = resultSet.getString(&quot;password&quot;); String birthday = resultSet.getString(&quot;birthday&quot;); System.out.println(id+&quot; &quot;+username+&quot; &quot; + password +&quot; &quot; + birthday); &#125; //4.é‡Šæ”¾èµ„æº JDBCUtils.close(connection,statement,resultSet); &#125; &#125; 4. SQLæ³¨å…¥é—®é¢˜4.1 Sqlæ³¨å…¥æ¼”ç¤º å‘jdbc_userè¡¨ä¸­ æ’å…¥ä¸¤æ¡æ•°æ® 123-- æ’å…¥2æ¡æ•°æ® INSERT INTO jdbc_user VALUES(NULL,&#x27;jack&#x27;,&#x27;123456&#x27;,&#x27;2020/2/24&#x27;); INSERT INTO jdbc_user VALUES(NULL,&#x27;tom&#x27;,&#x27;123456&#x27;,&#x27;2020/2/24&#x27;); SQLæ³¨å…¥æ¼”ç¤º 123-- SQLæ³¨å…¥æ¼”ç¤º -- å¡«å†™ä¸€ä¸ªé”™è¯¯çš„å¯†ç  SELECT * FROM jdbc_user WHERE username = &#x27;tom&#x27; AND PASSWORD = &#x27;123&#x27; OR &#x27;1&#x27; = &#x27;1&#x27;; å¦‚æœè¿™æ˜¯ä¸€ä¸ªç™»é™†æ“ä½œ,é‚£ä¹ˆç”¨æˆ·å°±ç™»é™†æˆåŠŸäº†.æ˜¾ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çœ‹åˆ°çš„ç»“æœ 4.2 SQLæ³¨å…¥æ¡ˆä¾‹ï¼šç”¨æˆ·ç™»é™† éœ€æ±‚ ç”¨æˆ·åœ¨æ§åˆ¶å°ä¸Šè¾“å…¥ç”¨æˆ·åå’Œå¯†ç , ç„¶åä½¿ç”¨ Statement å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼ å®ç°ç”¨æˆ·çš„ç™»å½•ã€‚ æ­¥éª¤ å¾—åˆ°ç”¨æˆ·ä»æ§åˆ¶å°ä¸Šè¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ¥æŸ¥è¯¢æ•°æ®åº“ å†™ä¸€ä¸ªç™»å½•çš„æ–¹æ³• â€‹ a) é€šè¿‡å·¥å…·ç±»å¾—åˆ°è¿æ¥ â€‹ b) åˆ›å»ºè¯­å¥å¯¹è±¡ï¼Œä½¿ç”¨æ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹å¼ç”Ÿæˆ SQL è¯­å¥ â€‹ c) æŸ¥è¯¢æ•°æ®åº“ï¼Œå¦‚æœæœ‰è®°å½•åˆ™è¡¨ç¤ºç™»å½•æˆåŠŸï¼Œå¦åˆ™ç™»å½•å¤±è´¥ â€‹ d) é‡Šæ”¾èµ„æº 1Sqlæ³¨å…¥æ–¹å¼: 123&#x27; or &#x27;1&#x27;=&#x27;1 ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435public class TestLogin01 &#123; /** * ç”¨æˆ·ç™»å½•æ¡ˆä¾‹ * ä½¿ç”¨ Statementå­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å®ŒæˆæŸ¥è¯¢ * @param args */ public static void main(String[] args) throws SQLException &#123; //1.è·å–è¿æ¥ Connection connection = JDBCUtils.getConnection(); //2.è·å–Statement Statement statement = connection.createStatement(); //3.è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç  Scanner sc = new Scanner(System.in); System.out.println(&quot;è¯·è¾“å…¥ç”¨æˆ·å: &quot;); String name = sc.nextLine(); System.out.println(&quot;è¯·è¾“å…¥å¯†ç : &quot;); String pass = sc.nextLine(); System.out.println(pass); //4.æ‹¼æ¥Sql,æ‰§è¡ŒæŸ¥è¯¢ String sql = &quot;select * from jdbc_user &quot; + &quot;where username = &quot; + &quot; &#x27;&quot; + name +&quot;&#x27; &quot; +&quot; and password = &quot; +&quot; &#x27;&quot; + pass +&quot;&#x27;&quot;; System.out.println(sql); ResultSet resultSet = statement.executeQuery(sql); //5.å¤„ç†ç»“æœé›†,åˆ¤æ–­ç»“æœé›†æ˜¯å¦ä¸ºç©º if(resultSet.next())&#123; System.out.println(&quot;ç™»å½•æˆåŠŸ! æ¬¢è¿æ‚¨: &quot; + name); &#125;else &#123; System.out.println(&quot;ç™»å½•å¤±è´¥!&quot;); &#125; //é‡Šæ”¾èµ„æº JDBCUtils.close(connection,statement,resultSet); &#125; &#125; 4.3 é—®é¢˜åˆ†æ ä»€ä¹ˆæ˜¯SQLæ³¨å…¥? æˆ‘ä»¬è®©ç”¨æˆ·è¾“å…¥çš„å¯†ç å’Œ SQL è¯­å¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ã€‚ç”¨æˆ·è¾“å…¥çš„å†…å®¹ä½œä¸ºäº† SQL è¯­å¥è¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼Œæ”¹å˜äº† åŸæœ‰SQL çœŸæ­£çš„æ„ä¹‰ï¼Œä»¥ä¸Šé—®é¢˜ç§°ä¸º SQL æ³¨å…¥ . å¦‚ä½•å®ç°çš„æ³¨å…¥ æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ•°æ®,æ‹¼æ¥å¤„çš„å­—ç¬¦ä¸² 12345select * from jdbc_user where username = &#x27;abc&#x27; and password = &#x27;abc&#x27; or &#x27;1&#x27;=&#x27;1&#x27; name=&#x27;abc&#x27; and password=&#x27;abc&#x27; ä¸ºå‡ &#x27;1&#x27;=&#x27;1&#x27; çœŸ ç›¸å½“äº select * from user where true=true; æŸ¥è¯¢äº†æ‰€æœ‰è®°å½• å¦‚ä½•è§£å†³ è¦è§£å†³ SQL æ³¨å…¥å°±ä¸èƒ½è®©ç”¨æˆ·è¾“å…¥çš„å¯†ç å’Œæˆ‘ä»¬çš„ SQL è¯­å¥è¿› è¡Œç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥ã€‚ 5. é¢„å¤„ç†å¯¹è±¡5.1 PreparedStatementæ¥å£ä»‹ç» PreparedStatement æ˜¯ Statement æ¥å£çš„å­æ¥å£ï¼Œç»§æ‰¿äºçˆ¶æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ã€‚å®ƒæ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„ SQL è¯­å¥å¯¹è±¡. é¢„ç¼–è¯‘: æ˜¯æŒ‡SQL è¯­å¥è¢«é¢„ç¼–è¯‘,å¹¶å­˜å‚¨åœ¨ PreparedStatement å¯¹è±¡ä¸­ã€‚ç„¶åå¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡å¤šæ¬¡é«˜æ•ˆåœ°æ‰§è¡Œè¯¥è¯­å¥ã€‚ 5.2 PreparedStatement ç‰¹ç‚¹ å› ä¸ºæœ‰é¢„å…ˆç¼–è¯‘çš„åŠŸèƒ½ï¼Œæé«˜ SQL çš„æ‰§è¡Œæ•ˆç‡ã€‚ å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢ SQL æ³¨å…¥çš„é—®é¢˜ï¼Œå®‰å…¨æ€§æ›´é«˜ 5.3 è·å–PreparedStatement å¯¹è±¡ é€šè¿‡Connectionåˆ›å»ºPreparedStatementå¯¹è±¡ Connection æ¥å£ä¸­çš„æ–¹æ³• è¯´æ˜ PreparedStatement prepareStatement(String sql) æŒ‡å®šé¢„ç¼–è¯‘çš„ SQL è¯­å¥ 5.4 PreparedStatement æ¥å£å¸¸ç”¨æ–¹æ³• å¸¸ç”¨æ–¹æ³• è¯´æ˜ int executeUpdate() æ‰§è¡Œinsert update deleteè¯­å¥. ResultSet executeQuery() æ‰§è¡Œselectè¯­å¥. è¿”å›ç»“æœé›†å¯¹è±¡ Resulet 5.5 ä½¿ç”¨PreparedStatementçš„æ­¥éª¤ ç¼–å†™ SQL è¯­å¥ï¼ŒæœªçŸ¥å†…å®¹ä½¿ç”¨?å ä½ï¼š 1SELECT * FROM jdbc_user WHERE username=? AND password=? è·å¾— PreparedStatement å¯¹è±¡ è®¾ç½®å®é™…å‚æ•°ï¼šsetXxx( å ä½ç¬¦çš„ä½ç½®, çœŸå®çš„å€¼) æ‰§è¡Œå‚æ•°åŒ– SQL è¯­å¥ 5)å…³é—­èµ„æº setXxxé‡è½½æ–¹æ³• è¯´æ˜ void setDouble(int parameterIndex, double x) å°†æŒ‡å®šå‚æ•°è®¾ç½®ä¸ºç»™å®š Java double å€¼ã€‚ void setInt(int parameterIndex, int x) å°†æŒ‡å®šå‚æ•°è®¾ç½®ä¸ºç»™å®š Java int å€¼ã€‚ void setString(int parameterIndex, String x) å°†æŒ‡å®šå‚æ•°è®¾ç½®ä¸ºç»™å®š Java String å€¼ã€‚ void setObject(int parameterIndex, Object x) ä½¿ç”¨ç»™å®šå¯¹è±¡è®¾ç½®æŒ‡å®šå‚æ•°çš„å€¼ã€‚ 5.6 ä½¿ç”¨PreparedStatementå®Œæˆç™»é™†æ¡ˆä¾‹ ä½¿ç”¨ PreparedStatement é¢„å¤„ç†å¯¹è±¡,å¯ä»¥æœ‰æ•ˆçš„é¿å…SQLæ³¨å…¥ æ­¥éª¤ï¼š 1.è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡ 2.ç¼–å†™SQL ä½¿ç”¨? å ä½ç¬¦æ–¹å¼ 3.è·å–é¢„å¤„ç†å¯¹è±¡ (é¢„ç¼–è¯‘å¯¹è±¡ä¼šå°†Sqlå‘é€ç»™æ•°æ®åº“ è¿›è¡Œé¢„ç¼–è¯‘) 4.æç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·å &amp; å¯†ç  5.è®¾ç½®å®é™…å‚æ•°ï¼šsetXxx(å ä½ç¬¦çš„ä½ç½®, çœŸå®çš„å€¼) 6.æ‰§è¡ŒæŸ¥è¯¢è·å–ç»“æœé›† 7.åˆ¤æ–­æ˜¯å¦æŸ¥è¯¢åˆ°æ•°æ® 8.å…³é—­èµ„æº 12345678910111213141516171819202122232425262728293031323334353637383940public class TestLogin02 &#123; /** * ä½¿ç”¨é¢„ç¼–è¯‘å¯¹è±¡ PrepareStatement å®Œæˆç™»å½•æ¡ˆä¾‹ * @param args * @throws SQLException */ public static void main(String[] args) throws SQLException &#123; //1.è·å–è¿æ¥ Connection connection = JDBCUtils.getConnection(); //2.è·å–Statement Statement statement = connection.createStatement(); //3.è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç  Scanner sc = new Scanner(System.in); System.out.println(&quot;è¯·è¾“å…¥ç”¨æˆ·å: &quot;); String name = sc.nextLine(); System.out.println(&quot;è¯·è¾“å…¥å¯†ç : &quot;); String pass = sc.nextLine(); System.out.println(pass); //4.è·å– PrepareStatement é¢„ç¼–è¯‘å¯¹è±¡ //4.1 ç¼–å†™SQL ä½¿ç”¨ ? å ä½ç¬¦æ–¹å¼ String sql = &quot;select * from jdbc_user where username = ? and password = ?&quot;; PreparedStatement ps = connection.prepareStatement(sql); //4.2 è®¾ç½®å ä½ç¬¦å‚æ•° ps.setString(1,name); ps.setString(2,pass); //5. æ‰§è¡ŒæŸ¥è¯¢ å¤„ç†ç»“æœé›† ResultSet resultSet = ps.executeQuery(); if(resultSet.next())&#123; System.out.println(&quot;ç™»å½•æˆåŠŸ! æ¬¢è¿æ‚¨: &quot; + name); &#125;else&#123; System.out.println(&quot;ç™»å½•å¤±è´¥!&quot;); &#125; //6.é‡Šæ”¾èµ„æº JDBCUtils.close(connection,statement,resultSet); &#125; &#125; 5.7 PreparedStatementçš„æ‰§è¡ŒåŸç† åˆ†åˆ«ä½¿ç”¨ Statementå¯¹è±¡ å’Œ PreparedStatementå¯¹è±¡è¿›è¡Œæ’å…¥æ“ä½œ ä»£ç ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132public class TestPS &#123; public static void main(String[] args) throws SQLException &#123; Connection con = JDBCUtils.getConnection(); //è·å– Sqlè¯­å¥æ‰§è¡Œå¯¹è±¡ Statement st = con.createStatement(); //æ’å…¥ä¸¤æ¡æ•°æ® st.executeUpdate(&quot;insert into jdbc_user values(null,&#x27;å¼ ä¸‰&#x27;,&#x27;123&#x27;,&#x27;1992/12/26&#x27;)&quot;); st.executeUpdate(&quot;insert into jdbc_user values(null,&#x27;æå››&#x27;,&#x27;123&#x27;,&#x27;1992/12/26&#x27;)&quot;); //è·å–é¢„å¤„ç†å¯¹è±¡ PreparedStatement ps = con.prepareStatement(&quot;insert into jdbc_user values(?,?,?,?)&quot;); //ç¬¬ä¸€æ¡æ•° è®¾ç½®å ä½ç¬¦å¯¹åº”çš„å‚æ•° ps.setString(1,null); ps.setString(2,&quot;é•¿æµ·&quot;); ps.setString(3,&quot;qwer&quot;); ps.setString(4,&quot;1990/1/10&quot;); //æ‰§è¡Œæ’å…¥ ps.executeUpdate(); //ç¬¬äºŒæ¡æ•°æ® ps.setString(1,null); ps.setString(2,&quot;å°æ–Œ&quot;); ps.setString(3,&quot;1122&quot;); ps.setString(4,&quot;1990/1/10&quot;); //æ‰§è¡Œæ’å…¥ ps.executeUpdate(); //é‡Šæ”¾èµ„æº st.close(); ps.close(); con.close(); &#125; &#125; 5.8 Statement ä¸ PreparedStatementçš„åŒºåˆ« Statementç”¨äºæ‰§è¡Œé™æ€SQLè¯­å¥ï¼Œåœ¨æ‰§è¡Œæ—¶ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªäº‹å…ˆå‡†å¤‡å¥½çš„SQLè¯­å¥ã€‚ PrepareStatementæ˜¯é¢„ç¼–è¯‘çš„SQLè¯­å¥å¯¹è±¡ï¼Œè¯­å¥ä¸­å¯ä»¥åŒ…å«åŠ¨æ€å‚æ•°â€œ?â€ï¼Œåœ¨æ‰§è¡Œæ—¶å¯ä»¥ä¸ºâ€œ?â€åŠ¨æ€è®¾ç½®å‚æ•°å€¼ã€‚ PrepareStatementå¯ä»¥å‡å°‘ç¼–è¯‘æ¬¡æ•°æé«˜æ•°æ®åº“æ€§èƒ½ã€‚ 6 JDBC æ§åˆ¶äº‹åŠ¡ ä¹‹å‰æˆ‘ä»¬æ˜¯ä½¿ç”¨ MySQL çš„å‘½ä»¤æ¥æ“ä½œäº‹åŠ¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ JDBC æ¥æ“ä½œé“¶è¡Œè½¬è´¦çš„äº‹åŠ¡ã€‚ 6.1 æ•°æ®å‡†å¤‡123456789101112-- åˆ›å»ºè´¦æˆ·è¡¨ CREATE TABLE account( -- ä¸»é”® id INT PRIMARY KEY AUTO_INCREMENT, -- å§“å NAME VARCHAR(10), -- è½¬è´¦é‡‘é¢ money DOUBLE ); -- æ·»åŠ ä¸¤ä¸ªç”¨æˆ· INSERT INTO account (NAME, money) VALUES (&#x27;tom&#x27;, 1000), (&#x27;jack&#x27;, 1000); 6.2 äº‹åŠ¡ç›¸å…³APIæˆ‘ä»¬ä½¿ç”¨Connectionä¸­çš„æ–¹æ³•å®ç°äº‹åŠ¡ç®¡ç† æ–¹æ³• è¯´æ˜ void setAutoCommit(boolean autoCommit) å‚æ•°æ˜¯ true æˆ– false å¦‚æœè®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºå…³é—­è‡ªåŠ¨æäº¤ï¼Œç›¸å½“äºå¼€å¯äº‹åŠ¡ void commit() æäº¤äº‹åŠ¡ void rollback() å›æ»šäº‹åŠ¡ 6.3 å¼€å‘æ­¥éª¤ è·å–è¿æ¥ å¼€å¯äº‹åŠ¡ è·å–åˆ° PreparedStatement , æ‰§è¡Œä¸¤æ¬¡æ›´æ–°æ“ä½œ æ­£å¸¸æƒ…å†µä¸‹æäº¤äº‹åŠ¡ å‡ºç°å¼‚å¸¸å›æ»šäº‹åŠ¡ æœ€åå…³é—­èµ„æº 6.4 ä»£ç ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243public class JDBCTransaction &#123; //JDBC æ“ä½œäº‹åŠ¡ public static void main(String[] args) &#123; Connection con = null; PreparedStatement ps = null; try &#123; //1. è·å–è¿æ¥ con = JDBCUtils.getConnection(); //2. å¼€å¯äº‹åŠ¡ con.setAutoCommit(false); //3. è·å–åˆ° PreparedStatement æ‰§è¡Œä¸¤æ¬¡æ›´æ–°æ“ä½œ //3.1 tom è´¦æˆ· -500 ps = con.prepareStatement(&quot;update account set money = money - ? where name = ? &quot;); ps.setDouble(1,500.0); ps.setString(2,&quot;tom&quot;); ps.executeUpdate(); //æ¨¡æ‹Ÿtomè½¬è´¦å å‡ºç°å¼‚å¸¸ System.out.println(1 / 0); //3.2 jack è´¦æˆ· +500 ps = con.prepareStatement(&quot;update account set money = money + ? where name = ? &quot;); ps.setDouble(1,500.0); ps.setString(2,&quot;jack&quot;); ps.executeUpdate(); //4. æ­£å¸¸æƒ…å†µä¸‹æäº¤äº‹åŠ¡ con.commit(); System.out.println(&quot;è½¬è´¦æˆåŠŸ!&quot;); &#125; catch (SQLException e) &#123; e.printStackTrace(); try &#123; //5. å‡ºç°å¼‚å¸¸å›æ»šäº‹åŠ¡ con.rollback(); &#125; catch (SQLException ex) &#123; ex.printStackTrace(); &#125; &#125; finally &#123; //6. æœ€åå…³é—­èµ„æº JDBCUtils.close(con,ps); &#125; &#125; &#125;","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Javaæ–°ç‰¹æ€§","slug":"Javaæ–°ç‰¹æ€§","date":"2019-08-24T13:06:29.000Z","updated":"2025-04-17T08:34:51.979Z","comments":true,"path":"2019/08/24/Javaæ–°ç‰¹æ€§/","link":"","permalink":"http://yournotes.cn/2019/08/24/Java%E6%96%B0%E7%89%B9%E6%80%A7/","excerpt":"1 Java8çš„æ–°ç‰¹æ€§1.1 Java8çš„æ¦‚è¿° Java8æ˜¯ Java è¯­è¨€çš„ä¸€ä¸ªé‡è¦ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬äº2014å¹´3æœˆå‘å¸ƒï¼Œæ˜¯è‡ªJava5ä»¥æ¥æœ€å…·é©å‘½æ€§çš„ç‰ˆ æœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒ…å«è¯­è¨€ã€ç¼–è¯‘å™¨ã€åº“ã€å·¥å…·å’ŒJVMç­‰æ–¹é¢çš„åå¤šä¸ªæ–°ç‰¹æ€§ã€‚","text":"1 Java8çš„æ–°ç‰¹æ€§1.1 Java8çš„æ¦‚è¿° Java8æ˜¯ Java è¯­è¨€çš„ä¸€ä¸ªé‡è¦ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬äº2014å¹´3æœˆå‘å¸ƒï¼Œæ˜¯è‡ªJava5ä»¥æ¥æœ€å…·é©å‘½æ€§çš„ç‰ˆ æœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒ…å«è¯­è¨€ã€ç¼–è¯‘å™¨ã€åº“ã€å·¥å…·å’ŒJVMç­‰æ–¹é¢çš„åå¤šä¸ªæ–°ç‰¹æ€§ã€‚ 1.2 å‡½æ•°å¼æ¥å£ å‡½æ•°å¼æ¥å£ä¸»è¦æŒ‡åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå¦‚ï¼šjava.lang.Runnableã€java.util.Comparator æ¥å£ç­‰ã€‚ Java8æä¾›@FunctionalInterfaceæ³¨è§£æ¥å®šä¹‰å‡½æ•°å¼æ¥å£ï¼Œè‹¥å®šä¹‰çš„æ¥å£ä¸ç¬¦åˆå‡½æ•°å¼çš„è§„èŒƒä¾¿ä¼š æŠ¥é”™ã€‚ Java8ä¸­å¢åŠ äº†java.util.functionåŒ…ï¼Œè¯¥åŒ…åŒ…å«äº†å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ï¼Œå…·ä½“å¦‚ä¸‹ï¼š æ¥å£åç§° æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Consumer void accept(T t) æ ¹æ®æŒ‡å®šçš„å‚æ•°æ‰§è¡Œæ“ä½œ Supplier T get() å¾—åˆ°ä¸€ä¸ªè¿”å›å€¼ Function R apply(T t) æ ¹æ®æŒ‡å®šçš„å‚æ•°æ‰§è¡Œæ“ä½œå¹¶è¿”å› Predicate boolean test(T t) åˆ¤æ–­æŒ‡å®šçš„å‚æ•°æ˜¯å¦æ»¡è¶³æ¡ä»¶ 1.3 Lambdaè¡¨è¾¾å¼ Lambda è¡¨è¾¾å¼æ˜¯å®ä¾‹åŒ–å‡½æ•°å¼æ¥å£çš„é‡è¦æ–¹å¼ï¼Œä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ä»£ç å˜çš„æ›´åŠ ç®€æ´ ç´§å‡‘ã€‚ lambdaè¡¨è¾¾å¼ï¼šå‚æ•°åˆ—è¡¨ã€ç®­å¤´ç¬¦å·-&gt;å’Œæ–¹æ³•ä½“ç»„æˆï¼Œè€Œæ–¹æ³•ä½“ä¸­å¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯è¯­å¥ å—ã€‚ è¯­æ³•æ ¼å¼ï¼š(å‚æ•°åˆ—è¡¨) -&gt; &#123; æ–¹æ³•ä½“; &#125; å…¶ä¸­()ã€å‚æ•°ç±»å‹ã€{} ä»¥åŠreturnå…³é”®å­— å¯ä»¥çœç•¥ã€‚ 1.4 æ–¹æ³•å¼•ç”¨ æ–¹æ³•å¼•ç”¨ä¸»è¦æŒ‡é€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•è€Œä¸éœ€è¦ä¸ºæ–¹æ³•å¼•ç”¨æä¾›æ–¹æ³•ä½“ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨äº¤ ç»™å‡½æ•°å¼æ¥å£æ‰§è¡Œã€‚ æ–¹æ³•å¼•ç”¨ä½¿ç”¨ä¸€å¯¹å†’å· :: å°†ç±»æˆ–å¯¹è±¡ä¸æ–¹æ³•åè¿›è¡Œè¿æ¥ï¼Œé€šå¸¸ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š å¯¹è±¡çš„éé™æ€æ–¹æ³•å¼•ç”¨ ObjectName :: MethodName ç±»çš„é™æ€æ–¹æ³•å¼•ç”¨ ClassName :: StaticMethodName ç±»çš„éé™æ€æ–¹æ³•å¼•ç”¨ ClassName :: MethodName æ„é€ å™¨çš„å¼•ç”¨ ClassName :: new æ•°ç»„çš„å¼•ç”¨ TypeName[] :: new æ–¹æ³•å¼•ç”¨æ˜¯åœ¨ç‰¹å®šåœºæ™¯ä¸‹lambdaè¡¨è¾¾å¼çš„ä¸€ç§ç®€åŒ–è¡¨ç¤ºï¼Œå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä»£ç çš„ç¼–å†™ä½¿ä»£ç æ›´åŠ  ç´§å‡‘ç®€æ´ï¼Œä»è€Œå‡å°‘å†—ä½™ä»£ç ã€‚ 1.5 Streamæ¥å£ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.util.stream.Streamæ¥å£æ˜¯å¯¹é›†åˆåŠŸèƒ½çš„å¢å¼ºï¼Œå¯ä»¥å¯¹é›†åˆå…ƒç´ è¿›è¡Œå¤æ‚çš„æŸ¥æ‰¾ã€è¿‡æ»¤ã€ç­›é€‰ ç­‰æ“ä½œã€‚ Streamæ¥å£å€ŸåŠ©äºLambda è¡¨è¾¾å¼æå¤§çš„æé«˜ç¼–ç¨‹æ•ˆç‡å’Œç¨‹åºå¯è¯»æ€§ï¼ŒåŒæ—¶å®ƒæä¾›ä¸²è¡Œå’Œå¹¶è¡Œä¸¤ ç§æ¨¡å¼è¿›è¡Œæ±‡èšæ“ä½œï¼Œå¹¶å‘æ¨¡å¼èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨æ­¥éª¤ åˆ›å»ºStreamï¼Œé€šè¿‡ä¸€ä¸ªæ•°æ®æºæ¥è·å–ä¸€ä¸ªæµã€‚ è½¬æ¢Streamï¼Œæ¯æ¬¡è½¬æ¢è¿”å›ä¸€ä¸ªæ–°çš„Streamå¯¹è±¡ã€‚ å¯¹Streamè¿›è¡Œèšåˆæ“ä½œå¹¶äº§ç”Ÿç»“æœã€‚ ï¼ˆ3ï¼‰åˆ›å»ºæ–¹å¼ æ–¹å¼ä¸€ï¼šé€šè¿‡è°ƒç”¨é›†åˆçš„é»˜è®¤æ–¹æ³•æ¥è·å–æµï¼Œå¦‚ï¼šdefault Stream stream() æ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„å·¥å…·ç±»ä¸­çš„é™æ€æ–¹æ³•æ¥è·å–æµï¼Œå¦‚ï¼šstatic IntStream stream(int[] array) æ–¹å¼ä¸‰ï¼šé€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•æ¥è·å–æµï¼Œå¦‚ï¼šstatic Stream of(Tâ€¦ values) æ–¹å¼å››ï¼šé€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•æ¥è·å–æµï¼Œstatic Stream generate(Supplier s) ï¼ˆ4ï¼‰ä¸­é—´æ“ä½œ ç­›é€‰ä¸åˆ‡ç‰‡çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Stream filter(Predicate predicate) è¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…å…ƒç´ çš„æµ Stream distinct() è¿”å›ä¸åŒ…å«é‡å¤å…ƒç´ çš„æµ Stream limit(long maxSize) è¿”å›ä¸è¶…è¿‡ç»™å®šå…ƒç´ æ•°é‡çš„æµ Stream skip(long n) è¿”å›ä¸¢å¼ƒå‰nä¸ªå…ƒç´ åçš„æµ æ˜ å°„çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Stream sorted() è¿”å›ç»è¿‡è‡ªç„¶æ’åºåå…ƒç´ ç»„æˆçš„æµ Stream sorted(Comparator comparator) è¿”å›ç»è¿‡æ¯”è¾ƒå™¨æ’åºåå…ƒç´ ç»„æˆçš„æµ ï¼ˆ5ï¼‰ç»ˆæ­¢æ“ä½œ åŒ¹é…ä¸æŸ¥æ‰¾çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Optional findFirst() è¿”å›è¯¥æµçš„ç¬¬ä¸€ä¸ªå…ƒç´  boolean allMatch(Predicate predicate) è¿”å›æ‰€æœ‰å…ƒç´ æ˜¯å¦åŒ¹é… boolean noneMatch(Predicate predicate) è¿”å›æ²¡æœ‰å…ƒç´ æ˜¯å¦åŒ¹é… Optional max(Comparator comparator) æ ¹æ®æ¯”è¾ƒå™¨è¿”å›æœ€å¤§å…ƒç´  Optional min(Comparator comparator) æ ¹æ®æ¯”è¾ƒå™¨è¿”å›æœ€å°å…ƒç´  long count() è¿”å›å…ƒç´ çš„ä¸ªæ•° void forEach(Consumer action) å¯¹æµä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ è§„çº¦çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Optional reduce(BinaryOperator accumulator) è¿”å›ç»“åˆåçš„å…ƒç´ å€¼ æ”¶é›†çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» R collect(Collector collector) ä½¿ç”¨æ”¶é›†å™¨å¯¹å…ƒç´ è¿›è¡Œå¤„ç† ï¼ˆ6ï¼‰æ¡ˆä¾‹é¢˜ç›®ï¼š å‡†å¤‡ä¸€ä¸ªListé›†åˆå¹¶æ”¾å…¥Personç±»å‹çš„å¯¹è±¡ï¼Œå°†é›†åˆä¸­æ‰€æœ‰æˆå¹´äººè¿‡æ»¤å‡ºæ¥æ”¾åˆ°å¦å¤–ä¸€ä¸ªé›†åˆå¹¶æ‰“ å°å‡ºæ¥ã€‚ 1.6 Optionalç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.util.Optionalç±»å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€å•çš„å®¹å™¨ï¼Œå…¶å€¼å¯èƒ½æ˜¯nullæˆ–è€…ä¸æ˜¯nullï¼Œä»£è¡¨ä¸€ä¸ªå€¼å­˜åœ¨ æˆ–ä¸å­˜åœ¨ã€‚ è¯¥ç±»çš„å¼•å…¥å¾ˆå¥½çš„è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static Optional ofNullable(T value) æ ¹æ®å‚æ•°æŒ‡å®šæ•°å€¼æ¥å¾—åˆ°Optionalç±»å‹çš„å¯¹è±¡ Optional map(Function mapper) æ ¹æ®å‚æ•°æŒ‡å®šè§„åˆ™çš„ç»“æœæ¥å¾—åˆ°Optionalç±»å‹çš„å¯¹è±¡ T orElse(T other) è‹¥è¯¥å€¼å­˜åœ¨å°±è¿”å›ï¼Œå¦åˆ™è¿”å›otherçš„æ•°å€¼ã€‚ 2 Java9çš„æ–°ç‰¹æ€§2.1 Java9çš„æ¦‚è¿° Java9å‘å¸ƒäº2017å¹´9æœˆå‘å¸ƒï¼Œå¸¦æ¥äº†å¾ˆå¤šæ–°ç‰¹æ€§ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„å˜åŒ–æ˜¯æ¨¡å—åŒ–ç³»ç»Ÿã€‚ æ¨¡å—å°±æ˜¯ä»£ç å’Œæ•°æ®çš„å°è£…ä½“ï¼Œæ¨¡å—çš„ä»£ç è¢«ç»„ç»‡æˆå¤šä¸ªåŒ…ï¼Œæ¯ä¸ªåŒ…ä¸­åŒ…å«Javaç±»å’Œæ¥å£ï¼Œæ¨¡å—çš„ æ•°æ®åˆ™åŒ…æ‹¬èµ„æºæ–‡ä»¶å’Œå…¶ä»–é™æ€ä¿¡æ¯ã€‚ 2.2 æ¨¡å—åŒ–çš„ä½¿ç”¨ï¼ˆ1ï¼‰è¯­æ³•æ ¼å¼ åœ¨ module-info.java æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ–°çš„å…³é”®è¯moduleæ¥å£°æ˜ä¸€ä¸ªæ¨¡å—ï¼Œå…·ä½“å¦‚ä¸‹ï¼š 123module æ¨¡å—åç§° &#123; //Content&#125; ï¼ˆ2ï¼‰æ¨¡å—åŒ–çš„ä¼˜åŠ¿ å‡å°‘å†…å­˜çš„å¼€é”€ã€‚ å¯ç®€åŒ–å„ç§ç±»åº“å’Œå¤§å‹åº”ç”¨çš„ å¼€å‘å’Œç»´æŠ¤ã€‚ å®‰å…¨æ€§ï¼Œå¯ç»´æŠ¤æ€§ï¼Œæé«˜æ€§èƒ½ã€‚ 2.3 é’»çŸ³æ“ä½œç¬¦çš„ä½¿ç”¨å‡çº§ åœ¨Java9ä¸­å…è®¸åœ¨åŒ¿åå†…éƒ¨ç±»çš„ä½¿ç”¨ä¸­ä½¿ç”¨é’»çŸ³æ“ä½œç¬¦ã€‚ 2.4 é›†åˆå·¥å‚æ–¹æ³•ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ Java9çš„Listã€Setå’ŒMapé›†åˆä¸­å¢åŠ äº†é™æ€å·¥å‚æ–¹æ³•ofå®ç°ä¸å¯å˜å®ä¾‹çš„åˆ›å»ºã€‚ ä¸å¯å˜ä½“ç°åœ¨æ— æ³•æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤å®ƒä»¬çš„å…ƒç´ ã€‚ ä¸å…è®¸æ·»åŠ nullå…ƒç´ å¯¹è±¡ã€‚ ï¼ˆ2ï¼‰å®é™…æ„ä¹‰ ä¿è¯çº¿ç¨‹å®‰å…¨ï¼šåœ¨å¹¶å‘ç¨‹åºä¸­æ—¢ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ï¼Œä¹Ÿå¤§å¤§å¢å¼ºäº†å¹¶å‘æ—¶çš„æ•ˆç‡ã€‚ è¢«ä¸å¯ä¿¡çš„ç±»åº“ä½¿ç”¨æ—¶ä¼šå¾ˆå®‰å…¨ã€‚ å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸éœ€è¦æ”¯æŒä¿®æ”¹æ“ä½œï¼Œå°†ä¼šèŠ‚çœç©ºé—´å’Œæ—¶é—´çš„å¼€é”€ã€‚ å¯ä»¥å½“ä½œä¸€ä¸ªå¸¸é‡æ¥å¯¹å¾…ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡åœ¨ä»¥åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚ 2.5 InputStreamçš„å¢å¼º InputStreamç±»ä¸­æä¾›äº†transferToæ–¹æ³•å®ç°å°†æ•°æ®ç›´æ¥ä¼ è¾“åˆ°OutputStreamä¸­ã€‚ 3 Java10çš„æ–°ç‰¹æ€§3.1 Java10çš„æ¦‚è¿° Java10äº2018å¹´3æœˆå‘å¸ƒï¼Œæ”¹è¿›çš„å…³é”®ç‚¹åŒ…æ‹¬ä¸€ä¸ªæœ¬åœ°ç±»å‹æ¨æ–­ã€ä¸€ä¸ªåƒåœ¾å›æ”¶çš„å¢å¼ºã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean isBlank() åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºæˆ–åªåŒ…å«ç©ºç™½ä»£ç ç‚¹ Optional map(Function mapper) æ ¹æ®å‚æ•°æŒ‡å®šè§„åˆ™çš„ç»“æœæ¥å¾—åˆ°Optionalç±» å‹çš„å¯¹è±¡ T orElse(T other) è‹¥è¯¥å€¼å­˜åœ¨å°±è¿”å›ï¼Œå¦åˆ™è¿”å›otherçš„æ•° å€¼ã€‚ Java10è®¡åˆ’åªæ˜¯ä¸€ä¸ªçŸ­æœŸç‰ˆæœ¬ï¼Œå› æ­¤å…¬å¼€æ›´æ–°å°†åœ¨å…­ä¸ªæœˆå†…ç»“æŸï¼Œ9æœˆä»½å‘å¸ƒçš„Java11å°†æ˜¯Javaçš„ é•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ï¼ŒLTSç‰ˆæœ¬çš„å‘å¸ƒæ¯ä¸‰å¹´å‘å¸ƒä¸€æ¬¡ã€‚ 3.2 å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ Java10å¯ä»¥ä½¿ç”¨varä½œä¸ºå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­æ ‡è¯†ç¬¦ï¼Œæ­¤ç¬¦å·ä»…é€‚ç”¨äºå±€éƒ¨å˜é‡ï¼Œå¢å¼ºforå¾ªç¯çš„ç´¢ å¼•ï¼Œä»¥åŠä¼ ç»Ÿforå¾ªç¯çš„æœ¬åœ°å˜é‡ã€‚ å®ƒä¸èƒ½ä½¿ç”¨äºæ–¹æ³•å½¢å¼å‚æ•°ï¼Œæ„é€ å‡½æ•°å½¢å¼å‚æ•°ï¼Œæ–¹æ³•è¿”å›ç±»å‹ï¼Œå­—æ®µï¼Œcatchå½¢å¼å‚æ•°æˆ–ä»»ä½•å…¶ ä»–ç±»å‹çš„å˜é‡å£°æ˜ã€‚ ï¼ˆ2ï¼‰å®é™…æ„ä¹‰ æ ‡è¯†ç¬¦varä¸æ˜¯å…³é”®å­—ï¼Œåªæ˜¯ä¸€ä¸ªä¿ç•™çš„ç±»å‹åç§°ã€‚è¿™æ„å‘³ç€varç”¨ä½œå˜é‡ï¼Œæ–¹æ³•åæˆ–åŒ…åçš„ä»£ç ä¸ ä¼šå—åˆ°å½±å“ï¼Œä½†varä¸èƒ½ä½œä¸ºç±»æˆ–åˆ™æ¥å£çš„åå­—ã€‚ é¿å…äº†ä¿¡æ¯å†—ä½™ã€‚ å¯¹é½äº†å˜é‡åã€‚ æ›´å®¹æ˜“é˜…è¯»ã€‚ 4 Java11çš„æ–°ç‰¹æ€§4.1 Java11çš„æ¦‚è¿° Java11äº2018å¹´9æœˆæ­£å¼å‘å¸ƒï¼Œè¿™æ˜¯ Java å¤§ç‰ˆæœ¬å‘¨æœŸå˜åŒ– åçš„ç¬¬ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œéå¸¸å€¼å¾—å…³ æ³¨ã€‚ 4.2 ç®€åŒ–çš„ç¼–è¯‘è¿è¡Œæ“ä½œ åœ¨Java11ä¸­å¯ä»¥ä½¿ç”¨javaå‘½ä»¤ä¸€æ¬¡æ€§è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œæ“ä½œã€‚ æ‰§è¡Œæºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªç±»å¿…é¡»åŒ…å«ä¸»æ–¹æ³•ã€‚ ä¸å¯ä»¥ä½¿ç”¨å…¶å®ƒæºæ–‡ä»¶ä¸­è‡ªå®šä¹‰çš„ç±»ã€‚ 4.3 Stringç±»æ–°å¢æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean isBlank() åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºæˆ–åªåŒ…å«ç©ºç™½ä»£ç ç‚¹ Optional map(Function&lt;? super T,? extends U&gt; mapper) æ ¹æ®å‚æ•°æŒ‡å®šè§„åˆ™çš„ç»“æœæ¥å¾—åˆ°Optionalç±» å‹çš„å¯¹è±¡ T orElse(T other) è‹¥è¯¥å€¼å­˜åœ¨å°±è¿”å›ï¼Œå¦åˆ™è¿”å›otherçš„æ•° å€¼ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"IOæµ","slug":"IOæµ","date":"2019-08-18T10:49:13.000Z","updated":"2025-04-17T08:34:51.978Z","comments":true,"path":"2019/08/18/IOæµ/","link":"","permalink":"http://yournotes.cn/2019/08/18/IO%E6%B5%81/","excerpt":"1. IOæµæ¦‚è¿°1.1 IOæµçš„æ¦‚å¿µ IOå°±æ˜¯Inputå’ŒOutputçš„ç®€å†™ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥å’Œè¾“å‡ºçš„å«ä¹‰ã€‚","text":"1. IOæµæ¦‚è¿°1.1 IOæµçš„æ¦‚å¿µ IOå°±æ˜¯Inputå’ŒOutputçš„ç®€å†™ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥å’Œè¾“å‡ºçš„å«ä¹‰ã€‚ IOæµå°±æ˜¯æŒ‡è¯»å†™æ•°æ®æ—¶åƒæµæ°´ä¸€æ ·ä»ä¸€ç«¯æµåˆ°å¦å¤–ä¸€ç«¯ï¼Œå› æ­¤å¾—åä¸ºâ€œæµâ€ã€‚ 1.2 åŸºæœ¬åˆ†ç±» æŒ‰ç…§è¯»å†™æ•°æ®çš„åŸºæœ¬å•ä½ä¸åŒï¼Œåˆ†ä¸º å­—èŠ‚æµ å’Œ å­—ç¬¦æµã€‚ å…¶ä¸­å­—èŠ‚æµä¸»è¦æŒ‡ä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œæ•°æ®è¯»å†™çš„æµï¼Œå¯ä»¥è¯»å†™ä»»æ„ç±»å‹çš„æ–‡ä»¶ã€‚ å…¶ä¸­å­—ç¬¦æµä¸»è¦æŒ‡ä»¥å­—ç¬¦(2ä¸ªå­—èŠ‚)ä¸ºå•ä½è¿›è¡Œæ•°æ®è¯»å†™çš„æµï¼Œåªèƒ½è¯»å†™æ–‡æœ¬æ–‡ä»¶ã€‚ æŒ‰ç…§è¯»å†™æ•°æ®çš„æ–¹å‘ä¸åŒï¼Œåˆ†ä¸º è¾“å…¥æµ å’Œ è¾“å‡ºæµï¼ˆç«™åœ¨ç¨‹åºçš„è§’åº¦ï¼‰ã€‚ å…¶ä¸­è¾“å…¥æµä¸»è¦æŒ‡ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®å†…å®¹è¾“å…¥åˆ°ç¨‹åºä¸­ï¼Œä¹Ÿå°±æ˜¯è¯»æ–‡ä»¶ã€‚ å…¶ä¸­è¾“å‡ºæµä¸»è¦æŒ‡å°†ç¨‹åºä¸­çš„æ•°æ®å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œä¹Ÿå°±æ˜¯å†™æ–‡ä»¶ã€‚ æŒ‰ç…§æµçš„è§’è‰²ä¸åŒåˆ†ä¸ºèŠ‚ç‚¹æµå’Œå¤„ç†æµã€‚ å…¶ä¸­èŠ‚ç‚¹æµä¸»è¦æŒ‡ç›´æ¥å’Œè¾“å…¥è¾“å‡ºæºå¯¹æ¥çš„æµã€‚ å…¶ä¸­å¤„ç†æµä¸»è¦æŒ‡éœ€è¦å»ºç«‹åœ¨èŠ‚ç‚¹æµçš„åŸºç¡€ä¹‹ä¸Šçš„æµ 1.3 ä½“ç³»ç»“æ„ 2. ç›¸å…³æµçš„è¯¦è§£2.1 FileWriterç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.FileWriterç±»ä¸»è¦ç”¨äºå°†æ–‡æœ¬å†…å®¹å†™å…¥åˆ°æ–‡æœ¬æ–‡ä»¶ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» FileWriter(String fileName) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ–‡ä»¶åæ„é€ å¯¹è±¡ FileWriter(String fileName, boolean append) ä»¥è¿½åŠ çš„æ–¹å¼æ ¹æ®å‚æ•°æŒ‡å®šçš„æ–‡ä»¶åæ¥æ„é€ å¯¹è±¡ void write(int c) å†™å…¥å•ä¸ªå­—ç¬¦ void write(char[] cbuf, int off, int len) å°†æŒ‡å®šå­—ç¬¦æ•°ç»„ä¸­ä»åç§»é‡offå¼€å§‹çš„lenä¸ªå­—ç¬¦å†™å…¥æ­¤ æ–‡ä»¶è¾“å‡ºæµ void write(char[] cbuf) å°†cbuf.lengthä¸ªå­—ç¬¦ä»æŒ‡å®šå­—ç¬¦æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡º æµä¸­ void flush() åˆ·æ–°æµ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.1 FileReaderç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.FileReaderç±»ä¸»è¦ç”¨äºä»æ–‡æœ¬æ–‡ä»¶è¯»å–æ–‡æœ¬æ•°æ®å†…å®¹ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» FileReader(String fileName) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ–‡ä»¶åæ„é€ å¯¹è±¡ int read() è¯»å–å•ä¸ªå­—ç¬¦çš„æ•°æ®å¹¶è¿”å›ï¼Œè¿”å›-1è¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ int read(char[] cbuf, int offset, int length) ä»è¾“å…¥æµä¸­å°†æœ€å¤šlenä¸ªå­—ç¬¦çš„æ•°æ®è¯»å…¥ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å– åˆ°çš„å­—ç¬¦ä¸ªæ•°ï¼Œè¿”å›-1è¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ int read(char[] cbuf) ä»æ­¤è¾“å…¥æµä¸­å°†æœ€å¤š cbuf.length ä¸ªå­—ç¬¦çš„æ•°æ®è¯»å…¥å­—ç¬¦æ•°ç»„ä¸­ï¼Œè¿” å›è¯»å–åˆ°çš„å­—ç¬¦ä¸ªæ•°ï¼Œè¿”å›-1è¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.3 FileOutputStreamç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.FileOutputStreamç±»ä¸»è¦ç”¨äºå°†å›¾åƒæ•°æ®ä¹‹ç±»çš„åŸå§‹å­—èŠ‚æµå†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» FileOutputStream(String name) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ–‡ä»¶åæ¥æ„é€ å¯¹è±¡ FileOutputStream(String name, boolean append) ä»¥è¿½åŠ çš„æ–¹å¼æ ¹æ®å‚æ•°æŒ‡å®šçš„æ–‡ä»¶åæ¥æ„é€ å¯¹è±¡ void write(int b) å°†æŒ‡å®šå­—èŠ‚å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ void write(byte[] b, int off, int len) å°†æŒ‡å®šå­—èŠ‚æ•°ç»„ä¸­ä»åç§»é‡offå¼€å§‹çš„lenä¸ªå­—èŠ‚å†™å…¥ æ­¤æ–‡ä»¶è¾“å‡ºæµ void write(byte[] b) å°† b.length ä¸ªå­—èŠ‚ä»æŒ‡å®šå­—èŠ‚æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡º æµä¸­ void flush() åˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºä»»ä½•ç¼“å†²çš„è¾“å‡ºå­—èŠ‚ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.4 FileInputStreamç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.FileInputStreamç±»ä¸»è¦ç”¨äºä»è¾“å…¥æµä¸­ä»¥å­—èŠ‚æµçš„æ–¹å¼è¯»å–å›¾åƒæ•°æ®ç­‰ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» FileInputStream(String name) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„åæ¥æ„é€ å¯¹è±¡ int read() ä»è¾“å…¥æµä¸­è¯»å–å•ä¸ªå­—èŠ‚çš„æ•°æ®å¹¶è¿”å›ï¼Œè¿”å›-1è¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ int read(byte[] b, int off, int len) ä»æ­¤è¾“å…¥æµä¸­å°†æœ€å¤šlenä¸ªå­—èŠ‚çš„æ•°æ®è¯»å…¥å­—èŠ‚æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„ å­—èŠ‚ä¸ªæ•°ï¼Œè¿”å›-1è¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ int read(byte[] b) ä»æ­¤è¾“å…¥æµä¸­å°†æœ€å¤š b.length ä¸ªå­—èŠ‚çš„æ•°æ®è¯»å…¥å­—èŠ‚æ•°ç»„ä¸­ï¼Œè¿”å›è¯» å–åˆ°çš„å­—èŠ‚ä¸ªæ•°ï¼Œè¿”å›-1è¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº int available() è·å–è¾“å…¥æµæ‰€å…³è”æ–‡ä»¶çš„å¤§å° æ¡ˆä¾‹é¢˜ç›® ç¼–ç¨‹å®ç°ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„æ‹·è´åŠŸèƒ½ã€‚ 2.5 BufferedOutputStreamç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.BufferedOutputStreamç±»ä¸»è¦ç”¨äºæè¿°ç¼“å†²è¾“å‡ºæµï¼Œæ­¤æ—¶ä¸ç”¨ä¸ºå†™å…¥çš„æ¯ä¸ªå­—èŠ‚è°ƒç”¨åº•å±‚ ç³»ç»Ÿã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» BufferedOutputStream(OutputStream out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ BufferedOutputStream(OutputStream out, int size) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨å’Œç¼“å†²åŒºå¤§å°æ¥æ„é€  å¯¹è±¡ void write(int b) å†™å…¥å•ä¸ªå­—èŠ‚ void write(byte[] b, int off, int len) å†™å…¥å­—èŠ‚æ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ® void write(byte[] b) å†™å…¥å‚æ•°æŒ‡å®šçš„æ•´ä¸ªå­—èŠ‚æ•°ç»„ void flush() åˆ·æ–°æµ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.6 BufferedInputStreamç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.BufferedInputStreamç±»ä¸»è¦ç”¨äºæè¿°ç¼“å†²è¾“å…¥æµã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» BufferedInputStream(InputStream in) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ„é€ å¯¹è±¡ BufferedInputStream(InputStream in, int size) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨å’Œç¼“å†²åŒºå¤§å°æ„é€ å¯¹è±¡ int read() è¯»å–å•ä¸ªå­—èŠ‚ int read(byte[] b, int off, int len) è¯»å–lenä¸ªå­—èŠ‚ int read(byte[] b) è¯»å–b.lengthä¸ªå­—èŠ‚ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.7 BufferedWriterç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.BufferedWriterç±»ä¸»è¦ç”¨äºå†™å…¥å•ä¸ªå­—ç¬¦ã€å­—ç¬¦æ•°ç»„ä»¥åŠå­—ç¬¦ä¸²åˆ°è¾“å‡ºæµä¸­ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» BufferedWriter(Writer out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ BufferedWriter(Writer out, int sz) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨å’Œç¼“å†²åŒºå¤§å°æ¥æ„é€ å¯¹è±¡ void write(int c) å†™å…¥å•ä¸ªå­—ç¬¦åˆ°è¾“å‡ºæµä¸­ void write(char[] cbuf, int off, int len) å°†å­—ç¬¦æ•°ç»„cbufä¸­ä»ä¸‹æ ‡offå¼€å§‹çš„lenä¸ªå­—ç¬¦å†™å…¥è¾“å‡ºæµ ä¸­ void write(char[] cbuf) å°†å­—ç¬¦ä¸²æ•°ç»„cbufä¸­æ‰€æœ‰å†…å®¹å†™å…¥è¾“å‡ºæµä¸­ void write(String s, int off, int len) å°†å‚æ•°sä¸­ä¸‹æ ‡ä»offå¼€å§‹çš„lenä¸ªå­—ç¬¦å†™å…¥è¾“å‡ºæµä¸­ void write(String str) å°†å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²å†…å®¹å†™å…¥è¾“å‡ºæµä¸­ void newLine() ç”¨äºå†™å…¥è¡Œåˆ†éš”ç¬¦åˆ°è¾“å‡ºæµä¸­ void flush() åˆ·æ–°æµ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.8 BufferedReaderç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.BufferedReaderç±»ç”¨äºä»è¾“å…¥æµä¸­è¯»å–å•ä¸ªå­—ç¬¦ã€å­—ç¬¦æ•°ç»„ä»¥åŠå­—ç¬¦ä¸²ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» BufferedReader(Reader in) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ BufferedReader(Reader in, int sz) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨å’Œç¼“å†²åŒºå¤§å°æ¥æ„é€ å¯¹è±¡ int read() ä»è¾“å…¥æµè¯»å–å•ä¸ªå­—ç¬¦ï¼Œè¯»å–åˆ°æœ«å°¾åˆ™è¿”å›-1ï¼Œå¦åˆ™è¿”å›å®é™…è¯»å–åˆ° çš„å­—ç¬¦å†…å®¹ int read(char[] cbuf, int off, int len) ä»è¾“å…¥æµä¸­è¯»å–lenä¸ªå­—ç¬¦æ”¾å…¥æ•°ç»„cbufä¸­ä¸‹æ ‡ä»offå¼€å§‹çš„ä½ç½®ä¸Šï¼Œ è‹¥è¯»å–åˆ°æœ«å°¾åˆ™è¿”å›-1ï¼Œå¦åˆ™è¿”å›å®é™…è¯»å–åˆ°çš„å­—ç¬¦ä¸ªæ•° int read(char[] cbuf) ä»è¾“å…¥æµä¸­è¯»æ»¡æ•´ä¸ªæ•°ç»„cbuf String readLine() è¯»å–ä¸€è¡Œå­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œè¿”å›nullè¡¨ç¤ºè¯»å–åˆ°æœ«å°¾ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.9 PrintStreamç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.PrintStreamç±»ä¸»è¦ç”¨äºæ›´åŠ æ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®å†…å®¹ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» PrintStream(OutputStream out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ void print(String s) ç”¨äºå°†å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²å†…å®¹æ‰“å°å‡ºæ¥ void println(String x) ç”¨äºæ‰“å°å­—ç¬¦ä¸²åå¹¶ç»ˆæ­¢è¯¥è¡Œ void flush() åˆ·æ–°æµ void close() ç”¨äºå…³é—­è¾“å‡ºæµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.10 PrintWriterç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.PrintWriterç±»ä¸»è¦ç”¨äºå°†å¯¹è±¡çš„æ ¼å¼åŒ–å½¢å¼æ‰“å°åˆ°æ–‡æœ¬è¾“å‡ºæµã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» PrintWriter(Writer out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ void print(String s) å°†å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²å†…å®¹æ‰“å°å‡ºæ¥ void println(String x) æ‰“å°å­—ç¬¦ä¸²åå¹¶ç»ˆæ­¢è¯¥è¡Œ void flush() åˆ·æ–°æµ void close() å…³é—­æµå¯¹è±¡å¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº æ¡ˆä¾‹é¢˜ç›® ä¸æ–­åœ°æç¤ºç”¨æˆ·è¾“å…¥è¦å‘é€çš„å†…å®¹ï¼Œè‹¥å‘é€çš„å†…å®¹æ˜¯â€byeâ€åˆ™èŠå¤©ç»“æŸï¼Œå¦åˆ™å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹å†™ å…¥åˆ°æ–‡ä»¶d:&#x2F;a.txtä¸­ã€‚ è¦æ±‚ä½¿ç”¨BufferedReaderç±»æ¥è¯»å–é”®ç›˜çš„è¾“å…¥ System.inä»£è¡¨é”®ç›˜è¾“å…¥ è¦æ±‚ ä½¿ç”¨PrintStreamç±»è´Ÿè´£å°†æ•°æ®å†™å…¥æ–‡ä»¶ 2.11 OutputStreamWriterç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.OutputStreamWriterç±»ä¸»è¦ç”¨äºå®ç°ä»å­—ç¬¦æµåˆ°å­—èŠ‚æµçš„è½¬æ¢ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» OutputStreamWriter(OutputStream out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ OutputStreamWriter(OutputStream out, String charsetName) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨å’Œç¼–ç æ„é€  å¯¹è±¡ void write(String str) å°†å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²å†™å…¥ void flush() åˆ·æ–°æµ void close() ç”¨äºå…³é—­è¾“å‡ºæµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„ æº 2.12 InputStreamReaderç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.InputStreamReaderç±»ä¸»è¦ç”¨äºå®ç°ä»å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„è½¬æ¢ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» InputStreamReader(InputStream in) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ InputStreamReader(InputStream in, String charsetName) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨å’Œç¼–ç æ¥æ„é€ å¯¹ è±¡ int read(char[] cbuf) è¯»å–å­—ç¬¦æ•°æ®åˆ°å‚æ•°æŒ‡å®šçš„æ•°ç»„ void close() ç”¨äºå…³é—­è¾“å‡ºæµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.13 DataOutputStreamç±»ï¼ˆäº†è§£ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.DataOutputStreamç±»ä¸»è¦ç”¨äºä»¥é€‚å½“çš„æ–¹å¼å°†åŸºæœ¬æ•°æ®ç±»å‹å†™å…¥è¾“å‡ºæµä¸­ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» DataOutputStream(OutputStream out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ„é€ å¯¹è±¡ OutputStreamç±»æ˜¯ä¸ªæŠ½è±¡ ç±»ï¼Œå®å‚éœ€è¦ä¼ é€’å­ç±»å¯¹è±¡ void writeInt(int v) ç”¨äºå°†å‚æ•°æŒ‡å®šçš„æ•´æ•°ä¸€æ¬¡æ€§å†™å…¥è¾“å‡ºæµï¼Œä¼˜å…ˆå†™å…¥é«˜å­— èŠ‚ void close() ç”¨äºå…³é—­æ–‡ä»¶è¾“å‡ºæµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.14 DataInputStreamç±»ï¼ˆäº†è§£ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.DataInputStreamç±»ä¸»è¦ç”¨äºä»è¾“å…¥æµä¸­è¯»å–åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» DataInputStream(InputStream in) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ InputStreamç±»æ˜¯æŠ½è±¡ç±»ï¼Œ å®å‚éœ€è¦ä¼ é€’å­ç±»å¯¹è±¡ int readInt() ç”¨äºä»è¾“å…¥æµä¸­ä¸€æ¬¡æ€§è¯»å–ä¸€ä¸ªæ•´æ•°æ•°æ®å¹¶è¿”å› void close() ç”¨äºå…³é—­æ–‡ä»¶è¾“å‡ºæµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.15 ObjectOutputStreamç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.ObjectOutputStreamç±»ä¸»è¦ç”¨äºå°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å†…å®¹æ•´ä½“å†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚ åªèƒ½å°†æ”¯æŒ java.io.Serializable æ¥å£çš„å¯¹è±¡å†™å…¥æµä¸­ã€‚ ç±»é€šè¿‡å®ç° java.io.Serializable æ¥å£ä»¥å¯ç”¨å…¶åºåˆ—åŒ–åŠŸèƒ½ã€‚ æ‰€è°“åºåˆ—åŒ–ä¸»è¦æŒ‡å°†ä¸€ä¸ªå¯¹è±¡éœ€è¦å­˜å‚¨çš„ç›¸å…³ä¿¡æ¯æœ‰æ•ˆç»„ç»‡æˆå­—èŠ‚åºåˆ—çš„è½¬åŒ–è¿‡ç¨‹ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» ObjectOutputStream(OutputStream out) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ void writeObject(Object obj) ç”¨äºå°†å‚æ•°æŒ‡å®šçš„å¯¹è±¡æ•´ä½“å†™å…¥åˆ°è¾“å‡ºæµä¸­ void close() ç”¨äºå…³é—­è¾“å‡ºæµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 2.16 ObjectInputStreamç±»ï¼ˆé‡ç‚¹ï¼‰ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.ObjectInputStreamç±»ä¸»è¦ç”¨äºä»è¾“å…¥æµä¸­ä¸€æ¬¡æ€§å°†å¯¹è±¡æ•´ä½“è¯»å–å‡ºæ¥ã€‚ æ‰€è°“ååºåˆ—åŒ–ä¸»è¦æŒ‡å°†æœ‰æ•ˆç»„ç»‡çš„å­—èŠ‚åºåˆ—æ¢å¤ä¸ºä¸€ä¸ªå¯¹è±¡åŠç›¸å…³ä¿¡æ¯çš„è½¬åŒ–è¿‡ç¨‹ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» ObjectInputStream(InputStream in) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ Object readObject() ä¸»è¦ç”¨äºä»è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªå¯¹è±¡å¹¶è¿”å› æ— æ³•é€šè¿‡è¿”å›å€¼ æ¥åˆ¤æ–­æ˜¯å¦è¯»å–åˆ°æ–‡ä»¶çš„æœ«å°¾ void close() ç”¨äºå…³é—­è¾“å…¥æµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº ï¼ˆ3ï¼‰åºåˆ—åŒ–ç‰ˆæœ¬å· åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶åˆ¤æ–­ç±»çš„serialVersionUIDæ¥éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œ JVMä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„serialVersionUIDä¸æœ¬åœ°ç›¸åº”å®ä½“ç±»çš„serialVersionUIDè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸ (InvalidCastException)ã€‚ ï¼ˆ4ï¼‰transientå…³é”®å­— transientæ˜¯Javaè¯­è¨€çš„å…³é”®å­—ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªåŸŸä¸æ˜¯è¯¥å¯¹è±¡ä¸²è¡ŒåŒ–çš„ä¸€éƒ¨åˆ†ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ä¸²è¡Œ åŒ–çš„æ—¶å€™ï¼Œtransientå‹å˜é‡çš„å€¼ä¸åŒ…æ‹¬åœ¨ä¸²è¡ŒåŒ–çš„è¡¨ç¤ºä¸­ï¼Œç„¶è€Œétransientå‹çš„å˜é‡æ˜¯è¢«åŒ…æ‹¬è¿›å»çš„ã€‚ ï¼ˆ5ï¼‰ç»éªŒçš„åˆ†äº« å½“å¸Œæœ›å°†å¤šä¸ªå¯¹è±¡å†™å…¥æ–‡ä»¶æ—¶ï¼Œé€šå¸¸å»ºè®®å°†å¤šä¸ªå¯¹è±¡æ”¾å…¥ä¸€ä¸ªé›†åˆä¸­ï¼Œç„¶åå°†é›†åˆè¿™ä¸ªæ•´ä½“çœ‹åšä¸€ ä¸ªå¯¹è±¡å†™å…¥è¾“å‡ºæµä¸­ï¼Œæ­¤æ—¶åªéœ€è¦è°ƒç”¨ä¸€æ¬¡readObjectæ–¹æ³•å°±å¯ä»¥å°†æ•´ä¸ªé›†åˆçš„æ•°æ®è¯»å–å‡ºæ¥ï¼Œ ä»è€Œé¿å…äº†é€šè¿‡è¿”å›å€¼è¿›è¡Œæ˜¯å¦è¾¾åˆ°æ–‡ä»¶æœ«å°¾çš„åˆ¤æ–­ã€‚ 2.17 RandomAccessFileç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.io.RandomAccessFileç±»ä¸»è¦æ”¯æŒå¯¹éšæœºè®¿é—®æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» RandomAccessFile(String name, String mode) æ ¹æ®å‚æ•°æŒ‡å®šçš„åç§°å’Œæ¨¡å¼æ„é€ å¯¹è±¡ r: ä»¥åªè¯»æ–¹å¼æ‰“å¼€ rwï¼šæ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ rwd:æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ï¼ŒåŒæ­¥æ–‡ä»¶å†…å®¹çš„æ›´æ–° rws:æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ï¼ŒåŒæ­¥æ–‡ä»¶å†…å®¹å’Œå…ƒæ•°æ® çš„æ›´æ–° int read() è¯»å–å•ä¸ªå­—èŠ‚çš„æ•°æ® void seek(long pos) ç”¨äºè®¾ç½®ä»æ­¤æ–‡ä»¶çš„å¼€å¤´å¼€å§‹æµ‹é‡çš„æ–‡ä»¶æŒ‡é’ˆåç§» é‡ void write(int b) å°†å‚æ•°æŒ‡å®šçš„å•ä¸ªå­—èŠ‚å†™å…¥ void close() ç”¨äºå…³é—­æµå¹¶é‡Šæ”¾æœ‰å…³çš„èµ„æº 3. å­—ç¬¦ç¼–ç ï¼ˆ1ï¼‰ç¼–ç è¡¨çš„ç”±æ¥ è®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶æ•°æ®ï¼Œæ—©æœŸå°±æ˜¯ç”µä¿¡å·ã€‚ä¸ºäº†æ–¹ä¾¿è®¡ç®—æœºå¯ä»¥è¯†åˆ«å„ä¸ªå›½å®¶çš„æ–‡å­—ï¼Œå°±éœ€è¦ å°†å„ä¸ªå›½å®¶çš„æ–‡å­—é‡‡ç”¨æ•°å­—ç¼–å·çš„æ–¹å¼è¿›è¡Œæè¿°å¹¶å»ºç«‹å¯¹åº”çš„å…³ç³»è¡¨ï¼Œè¯¥è¡¨å°±å«åšç¼–ç è¡¨ã€‚ ï¼ˆ2ï¼‰å¸¸è§çš„ç¼–ç è¡¨ ASCIIï¼šç¾å›½æ ‡å‡†ä¿¡æ¯äº¤æ¢ç ï¼Œ ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½7ä½äºŒä½è¿›åˆ¶è¿›è¡Œè¡¨ç¤ºã€‚ ISO8859-1ï¼šæ‹‰ä¸ç è¡¨ï¼Œæ¬§æ´²ç è¡¨ï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„8ä½äºŒè¿›åˆ¶è¿›è¡Œè¡¨ç¤ºã€‚ GB2312ï¼šä¸­å›½çš„ä¸­æ–‡ç¼–ç è¡¨ï¼Œæœ€å¤šä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚16ä½äºŒè¿›åˆ¶ä¸ºè¿›è¡Œè¡¨ç¤ºã€‚ GBKï¼šä¸­å›½çš„ä¸­æ–‡ç¼–ç è¡¨å‡çº§ï¼Œèåˆäº†æ›´å¤šçš„ä¸­æ–‡æ–‡å­—ç¬¦å·ï¼Œæœ€å¤šä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚16ä½äºŒè¿›åˆ¶ä½è¡¨ ç¤ºã€‚ Unicodeï¼šå›½é™…æ ‡å‡†ç ï¼Œèåˆäº†ç›®å‰äººç±»ä½¿ç”¨çš„æ‰€æœ‰å­—ç¬¦ï¼Œä¸ºæ¯ä¸ªå­—ç¬¦åˆ†é…å”¯ä¸€çš„å­—ç¬¦ç ã€‚æ‰€æœ‰çš„ æ–‡å­—éƒ½ç”¨ä¸¤ä¸ªå­—èŠ‚16ä½äºŒè¿›åˆ¶ä½æ¥è¡¨ç¤ºã€‚ ï¼ˆ3ï¼‰ç¼–ç çš„å‘å±• é¢å‘ä¼ è¾“çš„ä¼—å¤š UTFï¼ˆUCS Transfer Formatï¼‰æ ‡å‡†å‡ºç°äº†ï¼ŒUTF-8å°±æ˜¯æ¯æ¬¡8ä¸ªä½ä¼ è¾“æ•°æ®ï¼Œè€Œ UTF-16å°±æ˜¯æ¯æ¬¡16ä¸ªä½ã€‚è¿™æ˜¯ä¸ºä¼ è¾“è€Œè®¾è®¡çš„ç¼–ç å¹¶ä½¿ç¼–ç æ— å›½ç•Œï¼Œè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºå…¨ä¸–ç•Œä¸Šæ‰€ æœ‰æ–‡åŒ–çš„å­—ç¬¦äº†ã€‚ Unicodeåªæ˜¯å®šä¹‰äº†ä¸€ä¸ªåºå¤§çš„ã€å…¨çƒé€šç”¨çš„å­—ç¬¦é›†ï¼Œå¹¶ä¸ºæ¯ä¸ªå­—ç¬¦è§„å®šäº†å”¯ä¸€ç¡®å®šçš„ç¼–å·ï¼Œå…·ä½“ å­˜å‚¨æˆä»€ä¹ˆæ ·çš„å­—èŠ‚æµï¼Œå–å†³äºå­—ç¬¦ç¼–ç æ–¹æ¡ˆã€‚æ¨èçš„Unicodeç¼–ç æ˜¯UTF-8å’ŒUTF-16ã€‚ UTF-8ï¼šå˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œå¯ç”¨1-4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"XML","slug":"XML","date":"2019-03-03T03:57:54.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2019/03/03/XML/","link":"","permalink":"http://yournotes.cn/2019/03/03/XML/","excerpt":"1. XMLåŸºæœ¬ä»‹ç»1.1 æ¦‚è¿°XMLå³å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆExtensible Markup Languageï¼‰","text":"1. XMLåŸºæœ¬ä»‹ç»1.1 æ¦‚è¿°XMLå³å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆExtensible Markup Languageï¼‰ W3Cåœ¨1998å¹´2æœˆå‘å¸ƒ1.0ç‰ˆæœ¬ï¼Œ2004å¹´2æœˆåˆå‘å¸ƒ1.1ç‰ˆæœ¬ï¼Œä½†å› ä¸º1.1ç‰ˆæœ¬ä¸èƒ½å‘ä¸‹å…¼å®¹1.0ç‰ˆ æœ¬ï¼Œæ‰€ä»¥1.1æ²¡æœ‰äººç”¨ã€‚åŒæ—¶ï¼Œåœ¨2004å¹´2æœˆW3Cåˆå‘å¸ƒäº†1.0ç‰ˆæœ¬çš„ç¬¬ä¸‰ç‰ˆã€‚æˆ‘ä»¬è¦å­¦ä¹ çš„è¿˜æ˜¯ 1.0ç‰ˆæœ¬ ! ç‰¹ç‚¹ å¯æ‰©å±•çš„, æ ‡ç­¾éƒ½æ˜¯è‡ªå®šä¹‰çš„ è¯­æ³•ååˆ†ä¸¥æ ¼ 1.2 XMLçš„ä½œç”¨XMLèƒ½åšä»€ä¹ˆï¼Ÿ åŠŸèƒ½ è¯´æ˜ å­˜å‚¨æ•°æ®&emsp;&emsp;&emsp;&emsp; é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­å­˜å‚¨æ•°æ®ã€‚ä¸è¿‡ï¼Œå¦‚æœå¸Œæœ›æ•°æ®çš„å¯ç§»æ¤æ€§æ›´å¼ºï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®å­˜å‚¨ XML æ–‡ä»¶ä¸­ é…ç½®æ–‡ä»¶&emsp;&emsp;&emsp;&emsp; ä½œä¸ºå„ç§æŠ€æœ¯æ¡†æ¶çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ (æœ€å¤š) åœ¨ç½‘ç»œä¸­&emsp;&emsp;&emsp;&emsp; å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨XMLæ ¼å¼å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®,æœåŠ¡å™¨æ¥æ”¶åˆ°xmlæ ¼å¼æ•°æ®,è¿›è¡Œè§£æ 2. XMLè¯­æ³•2.1 XMLæ–‡æ¡£å£°æ˜æ ¼å¼ æ–‡æ¡£å£°æ˜å¿…é¡»ä¸ºç»“æŸ æ–‡æ¡£å£°æ˜å¿…é¡»å†™åœ¨ç¬¬ä¸€è¡Œ 1ï¼‰è¯­æ³•æ ¼å¼ 1&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; 2ï¼‰å±æ€§è¯´æ˜ versioinï¼šæŒ‡å®šXMLæ–‡æ¡£ç‰ˆæœ¬ã€‚å¿…é¡»å±æ€§ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä¼šé€‰æ‹©1.1ï¼Œåªä¼šé€‰æ‹©1.0 encodingï¼šæŒ‡å®šå½“å‰æ–‡æ¡£çš„ç¼–ç ã€‚å¯é€‰å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯utf-8ï¼› 2.2 å…ƒç´ Element å…ƒç´ : æ˜¯XMLæ–‡æ¡£ä¸­æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ† å…ƒç´ çš„å‘½åè§„åˆ™ï¼š ä¸èƒ½ä½¿ç”¨ç©ºæ ¼ï¼Œä¸èƒ½ä½¿ç”¨å†’å· xml æ ‡ç­¾åç§°åŒºåˆ†å¤§å°å†™ XML å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´  è¯­æ³•æ ¼å¼ï¼š 1&lt;users&gt;&lt;/users&gt; 1ï¼‰XML å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œå®ƒæ˜¯æ‰€æœ‰å…¶ä»–å…ƒç´ çš„çˆ¶å…ƒç´ ï¼Œæ¯”å¦‚ä»¥ä¸‹å®ä¾‹ä¸­ users å°±æ˜¯æ ¹å…ƒç´ ï¼š 12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;users&gt;&lt;/users&gt; 2ï¼‰æ™®é€šå…ƒç´ çš„ç»“æ„å¼€å§‹æ ‡ç­¾ã€å…ƒç´ ä½“ã€ç»“æŸæ ‡ç­¾ç»„æˆã€‚ 1&lt;hello&gt; å¤§å®¶å¥½ &lt;/hello&gt; 3ï¼‰å…ƒç´ ä½“ï¼šå…ƒç´ ä½“å¯ä»¥æ˜¯å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡æœ¬ 123&lt;hello&gt; &lt;a&gt;ä½ å¥½&lt;/a&gt; &lt;/hello&gt; 4ï¼‰ç©ºå…ƒç´ ï¼šç©ºå…ƒç´ åªæœ‰å¼€å§‹æ ‡ç­¾ï¼Œè€Œæ²¡æœ‰ç»“æŸæ ‡ç­¾ï¼Œä½†å…ƒç´ å¿…é¡»è‡ªå·±é—­åˆ 1&lt;close/&gt; 2.3 å±æ€§1&lt;bean id=&quot;&quot; class=&quot;&quot;&gt; &lt;/bean&gt; 2.4 æ³¨é‡Š XMLçš„æ³¨é‡Šï¼Œä»¥â€œ â€ç»“æŸã€‚æ³¨é‡Šå†…å®¹ä¼šè¢«XMLè§£æå™¨å¿½ç•¥ï¼ 2.5 ä½¿ç”¨XMLæè¿°æ•°æ®è¡¨ä¸­çš„æ•°æ® 12345678910111213141516&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;employees&gt; &lt;employee eid=&quot;2&quot;&gt; &lt;ename&gt;æ—é»›ç‰&lt;/ename&gt; &lt;age&gt;20&lt;/age&gt; &lt;sex&gt;å¥³&lt;/sex&gt; &lt;salary&gt;5000&lt;/salary&gt; &lt;empdate&gt;2019-03-14&lt;/empdate&gt; &lt;/employee&gt; &lt;employee eid=&quot;3&quot;&gt; &lt;ename&gt;æœç”«&lt;/ename&gt; &lt;age&gt;40&lt;/age&gt; &lt;sex&gt;ç”·&lt;/sex&gt; &lt;salary&gt;15000&lt;/salary&gt; &lt;empdate&gt;2010-01-01&lt;/empdate&gt; &lt;/employee&gt; &lt;/employees&gt; 3. XMLçº¦æŸ åœ¨XMLæŠ€æœ¯é‡Œï¼Œå¯ä»¥ç¼–å†™ä¸€ä¸ªæ–‡æ¡£æ¥çº¦æŸä¸€ä¸ªXMLæ–‡æ¡£çš„ä¹¦å†™è§„èŒƒï¼Œè¿™ç§°ä¹‹ä¸ºXMLçº¦æŸã€‚ å¸¸è§çš„xmlçº¦æŸï¼š DTD Schema ä½œä¸ºç¨‹åºå‘˜åªè¦æŒæ¡ä¸¤ç‚¹ ä¼šé˜…è¯» ä¼šå¼•å…¥ ä¸ç”¨è‡ªå·±ç¼–å†™ 3.1 DTDçº¦æŸDTDï¼ˆDocument Type Defifinitionï¼‰ï¼Œæ–‡æ¡£ç±»å‹å®šä¹‰ï¼Œç”¨æ¥çº¦æŸXMLæ–‡æ¡£ã€‚è§„å®šXMLæ–‡æ¡£ä¸­å…ƒç´ çš„åç§°ï¼Œå­å…ƒç´ çš„åç§°åŠé¡ºåºï¼Œå…ƒç´ çš„å±æ€§ç­‰ã€‚ 3.1.1 ç¼–å†™DTD å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šè‡ªå·±ç¼–å†™DTDçº¦æŸæ–‡æ¡£ å¸¸æƒ…å†µæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡æ¡†æ¶æä¾›çš„DTDçº¦æŸæ–‡æ¡£ï¼Œç¼–å†™å¯¹åº”çš„XMLæ–‡æ¡£ã€‚å¸¸è§æ¡†æ¶ä½¿ç”¨DTDçº¦æŸæœ‰ï¼šStruts2ã€hibernateç­‰ã€‚ åˆ›å»ºçº¦æŸæ–‡ä»¶ student.dtd 1234567891011121314151617181920212223&lt;!ELEMENT students (student+) &gt; &lt;!ELEMENT student (name,age,sex)&gt; &lt;!ELEMENT name (#PCDATA)&gt; &lt;!ELEMENT age (#PCDATA)&gt; &lt;!ELEMENT sex (#PCDATA)&gt; &lt;!ATTLIST student number ID #REQUIRED&gt; &lt;!-- ELEMENT: ç”¨æ¥å®šä¹‰å…ƒç´  students (student+) : ä»£è¡¨æ ¹å…ƒç´  å¿…é¡»æ˜¯ &lt;students&gt; student+ : æ ¹æ ‡ç­¾ä¸­è‡³å°‘æœ‰ä¸€ä¸ª studentå­å…ƒç´ , + ä»£è¡¨è‡³å°‘ä¸€ä¸ª student (name,age,sex): student æ ‡ç­¾ä¸­åŒ…å«çš„å­å…ƒç´ ,æŒ‰é¡ºåºå‡ºç° #PCDATA: æ˜¯æ™®é€šæ–‡æœ¬å†…å®¹ ATTLIST: ç”¨æ¥å®šä¹‰å±æ€§ student number ID #REQUIRED studentå­å…ƒç´ ä¸­ æœ‰ä¸€ä¸ªIDå±æ€§å«åš number,æ˜¯å¿…é¡»å¡«å†™çš„ ID: å”¯ä¸€ å€¼åªèƒ½æ˜¯å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿å¼€å¤´ --&gt; 3.2 Schemaçº¦æŸ3.2.1 ä»€ä¹ˆæ˜¯Schemaçº¦æŸ Schemaæ˜¯æ–°çš„XMLæ–‡æ¡£çº¦æŸ, æ¯”DTDå¼ºå¤§å¾ˆå¤šï¼Œæ˜¯DTD æ›¿ä»£è€…ï¼› Schemaæœ¬èº«ä¹Ÿæ˜¯XMLæ–‡æ¡£ï¼Œä½†Schemaæ–‡æ¡£çš„æ‰©å±•åä¸ºxsdï¼Œè€Œä¸æ˜¯xmlã€‚ Schema åŠŸèƒ½æ›´å¼ºå¤§ï¼Œå†…ç½®å¤šç§ç®€å•å’Œå¤æ‚çš„æ•°æ®ç±»å‹ Schema æ”¯æŒå‘½åç©ºé—´ (ä¸€ä¸ªXMLä¸­å¯ä»¥å¼•å…¥å¤šä¸ªçº¦æŸæ–‡æ¡£) 3.2.2 Schemaçº¦æŸç¤ºä¾‹student.xsd 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?xml version=&quot;1.0&quot;?&gt; &lt;xsd:schema xmlns=&quot;http://www.jasper.com/xml&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; targetNamespace=&quot;http://www.jasper.com/xml&quot; elementFormDefault=&quot;qualified&quot;&gt; &lt;xsd:element name=&quot;students&quot; type=&quot;studentsType&quot;/&gt; &lt;xsd:complexType name=&quot;studentsType&quot;&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=&quot;student&quot; type=&quot;studentType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt; &lt;/xsd:sequence&gt; &lt;/xsd:complexType&gt; &lt;xsd:complexType name=&quot;studentType&quot;&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=&quot;name&quot; type=&quot;xsd:string&quot;/&gt; &lt;xsd:element name=&quot;age&quot; type=&quot;ageType&quot; /&gt; &lt;xsd:element name=&quot;sex&quot; type=&quot;sexType&quot; /&gt; &lt;/xsd:sequence&gt; &lt;xsd:attribute name=&quot;number&quot; type=&quot;numberType&quot; use=&quot;required&quot;/&gt; &lt;/xsd:complexType&gt; &lt;xsd:simpleType name=&quot;sexType&quot;&gt; &lt;xsd:restriction base=&quot;xsd:string&quot;&gt; &lt;xsd:enumeration value=&quot;male&quot;/&gt; &lt;xsd:enumeration value=&quot;female&quot;/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;xsd:simpleType name=&quot;ageType&quot;&gt; &lt;xsd:restriction base=&quot;xsd:integer&quot;&gt; &lt;xsd:minInclusive value=&quot;0&quot;/&gt; &lt;xsd:maxInclusive value=&quot;200&quot;/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;xsd:simpleType name=&quot;numberType&quot;&gt; &lt;xsd:restriction base=&quot;xsd:string&quot;&gt; &lt;xsd:pattern value=&quot;hehe_\\d&#123;4&#125;&quot;/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;/xsd:schema&gt; Xml Schemaå…ƒç´  3.2.3 XMLå¼•å…¥Schemaçº¦æŸxmlä¸­å¼•å…¥schemaæ–‡æ¡£çº¦æŸçš„æ­¥éª¤ æŸ¥çœ‹schemaæ–‡æ¡£ï¼Œæ‰¾åˆ°æ ¹å…ƒç´ ï¼Œåœ¨xmlä¸­å†™å‡ºæ¥ 1234&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;students&gt; &lt;/students&gt; æ ¹å…ƒç´ æ¥è‡ªå“ªä¸ªå‘½åç©ºé—´ã€‚ä½¿ç”¨xmlnsæŒ‡ä»¤æ¥å£°æ˜ 123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;students xmlns=&quot;http://www.jasper.com/xml&quot;&gt; &lt;/students&gt; å¼•å…¥ w3cçš„æ ‡å‡†å‘½åç©ºé—´, å¤åˆ¶å³å¯ 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;students xmlns=&quot;http://www.lagou.com/xml&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt; &lt;/students&gt; å¼•å…¥çš„å‘½åç©ºé—´è·Ÿå“ªä¸ªxsdæ–‡ä»¶å¯¹åº”ï¼Ÿ ä½¿ç”¨schemaLocationæ¥æŒ‡å®šï¼šä¸¤ä¸ªå–å€¼ï¼šç¬¬ä¸€ä¸ªä¸ºå‘½åç©ºé—´ ç¬¬äºŒä¸ªä¸ºxsdæ–‡ä»¶çš„è·¯å¾„ 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;students xmlns=&quot;http://www.lagou.com/xml&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.jasper.com/xml student.xsd&quot;&gt; &lt;/students&gt; å‘½åç©ºé—´ 1æŒ‡çš„æ˜¯ä¸€ä¸ªç¯å¢ƒ,æ‰€ç”¨çš„æ ‡ç­¾æ¥è‡ªäºå“ªä¸ªç¯å¢ƒå®šä¹‰çš„ã€‚ student.xml 1234567891011121314151617&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;students xmlns=&quot;http://www.lagou.com/xml&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.lagou.com/xml student.xsd&quot; &gt; &lt;student number=&quot;hehe_1234&quot;&gt; &lt;name&gt;å¼ ç™¾ä¸‡&lt;/name&gt; &lt;age&gt;25&lt;/age&gt; &lt;sex&gt;female&lt;/sex&gt; &lt;/student&gt; &lt;student number=&quot;hehe_0000&quot;&gt; &lt;name&gt;å°æ–Œ&lt;/name&gt; &lt;age&gt;20&lt;/age&gt; &lt;sex&gt;male&lt;/sex&gt; &lt;/student&gt; &lt;/students&gt; 4. XMLè§£æ4.1 è§£ææ¦‚è¿°â€‹ å½“å°†æ•°æ®å­˜å‚¨åœ¨XMLåï¼Œæˆ‘ä»¬å°±å¸Œæœ›é€šè¿‡ç¨‹åºè·å¾—XMLçš„å†…å®¹ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨JavaåŸºç¡€æ‰€å­¦ä¹ çš„IOçŸ¥è¯†æ˜¯å¯ä»¥å®Œæˆçš„ï¼Œä¸è¿‡ä½ éœ€è¦éå¸¸ç¹ççš„æ“ä½œæ‰å¯ä»¥å®Œæˆï¼Œä¸”å¼€å‘ä¸­ä¼šé‡åˆ°ä¸åŒé—®é¢˜ï¼ˆåªè¯»ã€è¯»å†™ï¼‰ã€‚äººä»¬ä¸ºä¸åŒé—®é¢˜æä¾›ä¸åŒçš„è§£ææ–¹å¼ï¼Œå¹¶æäº¤å¯¹åº”çš„è§£æå™¨ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜æ“ä½œXMLã€‚ 4.2 XMLè§£ææ–¹å¼å¼€å‘ä¸­æ¯”è¾ƒå¸¸è§çš„è§£ææ–¹å¼æœ‰ä¸¤ç§ï¼Œå¦‚ä¸‹ï¼š DOMï¼šè¦æ±‚è§£æå™¨æŠŠæ•´ä¸ªXMLæ–‡æ¡£è£…è½½åˆ°å†…å­˜ï¼Œå¹¶è§£ææˆä¸€ä¸ªDocumentå¯¹è±¡ã€‚ ä¼˜ç‚¹ï¼šå…ƒç´ ä¸å…ƒç´ ä¹‹é—´ä¿ç•™ç»“æ„å…³ç³»ï¼Œæ•…å¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œã€‚ ç¼ºç‚¹ï¼šXMLæ–‡æ¡£è¿‡å¤§ï¼Œå¯èƒ½å‡ºç°å†…å­˜æº¢å‡ºæ˜¾ç°ã€‚ SAXï¼šæ˜¯ä¸€ç§é€Ÿåº¦æ›´å¿«ï¼Œæ›´æœ‰æ•ˆçš„æ–¹æ³•ã€‚å®ƒé€è¡Œæ‰«ææ–‡æ¡£ï¼Œä¸€è¾¹æ‰«æä¸€è¾¹è§£æã€‚å¹¶ä»¥äº‹ä»¶é©±åŠ¨çš„æ–¹å¼è¿›è¡Œå…·ä½“è§£æï¼Œæ¯æ‰§è¡Œä¸€è¡Œï¼Œéƒ½å°†è§¦å‘å¯¹åº”çš„äº‹ä»¶ã€‚ï¼ˆäº†è§£ï¼‰ ä¼˜ç‚¹ï¼šå ç”¨å†…å­˜å°‘ å¤„ç†é€Ÿåº¦å¿«ï¼Œå¯ä»¥å¤„ç†å¤§æ–‡ä»¶ ç¼ºç‚¹ï¼šåªèƒ½è¯»ï¼Œé€è¡Œåå°†é‡Šæ”¾èµ„æºã€‚ 4.3 XMLå¸¸è§çš„è§£æå™¨è§£æå™¨ï¼šå°±æ˜¯æ ¹æ®ä¸åŒçš„è§£ææ–¹å¼æä¾›çš„å…·ä½“å®ç°ã€‚æœ‰çš„è§£æå™¨æ“ä½œè¿‡äºç¹çï¼Œä¸ºäº†æ–¹ä¾¿å¼€å‘äººå‘˜ï¼Œæœ‰æä¾›æ˜“äºæ“ä½œçš„è§£æå¼€å‘åŒ… JAXPï¼šsunå…¬å¸æä¾›çš„è§£æå™¨ï¼Œæ”¯æŒDOMå’ŒSAXä¸¤ç§æ€æƒ³ DOM4Jï¼šä¸€æ¬¾éå¸¸ä¼˜ç§€çš„è§£æå™¨ , Dom4jæ˜¯ä¸€ä¸ªæ˜“ç”¨çš„ã€å¼€æºçš„åº“ï¼Œç”¨äºXMLï¼ŒXPathå’ŒXSLTã€‚å®ƒåº”ç”¨äºJavaå¹³å°ï¼Œé‡‡ç”¨äº†Javaé›†åˆæ¡†æ¶å¹¶å®Œå…¨æ”¯æŒDOMï¼ŒSAXå’ŒJAXPã€‚ Jsoupï¼šjsoup æ˜¯ä¸€æ¬¾Java çš„HTMLè§£æå™¨ ,ä¹Ÿå¯ä»¥è§£æXML PULLï¼šAndroidå†…ç½®çš„XMLè§£ææ–¹å¼ï¼Œç±»ä¼¼SAXã€‚ 4.4 dom4jçš„ä½¿ç”¨4.4.1 å¯¼å…¥JARåŒ… 4.4.2 APIä»‹ç»ä½¿ç”¨æ ¸å¿ƒç±»SaxReaderåŠ è½½xmlæ–‡æ¡£è·å¾—Documentï¼Œé€šè¿‡Document å¯¹è±¡è·å¾—æ–‡æ¡£çš„æ ¹å…ƒç´ ï¼Œç„¶åå°±å¯ä»¥æ“ä½œäº† å¸¸ç”¨APIå¦‚ä¸‹ï¼š SaxReaderå¯¹è±¡ read(â€¦) åŠ è½½æ‰§è¡Œxmlæ–‡æ¡£ Documentå¯¹è±¡ getRootElement() è·å¾—æ ¹å…ƒç´  Elementå¯¹è±¡ elements(â€¦) è·å¾—æŒ‡å®šåç§°çš„æ‰€æœ‰å­å…ƒç´ ã€‚å¯ä»¥ä¸æŒ‡å®šåç§° element(â€¦) è·å¾—æŒ‡å®šåç§°çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚å¯ä»¥ä¸æŒ‡å®šåç§° getName() è·å¾—å½“å‰å…ƒç´ çš„å…ƒç´ å attributeValue(â€¦) è·å¾—æŒ‡å®šå±æ€§åçš„å±æ€§å€¼ elementText(â€¦) è·å¾—æŒ‡å®šåç§°å­å…ƒç´ çš„æ–‡æœ¬å€¼ getText() è·å¾—å½“å‰å…ƒç´ çš„æ–‡æœ¬å†…å®¹ 4.4.3 å‡†å¤‡xmlæ–‡ä»¶ç¼–å†™user.xsd schemaçº¦æŸ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;xsd:schema xmlns=&quot;http://www.lagou.com/xml&quot; xmlns: xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; targetNamespace=&quot;http://www.lagou.com/xml&quot; elementFormDefault=&quot;qualified&quot;&gt; &lt;xsd:element name=&quot;users&quot; type=&quot;usersType&quot;/&gt; &lt;xsd:complexType name=&quot;usersType&quot;&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=&quot;user&quot; type=&quot;userType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt; &lt;/xsd:sequence&gt; &lt;/xsd:complexType&gt; &lt;xsd:complexType name=&quot;userType&quot;&gt; &lt;xsd:sequence&gt; &lt;xsd:element name=&quot;name&quot; type=&quot;xsd:string&quot;/&gt; &lt;xsd:element name=&quot;age&quot; type=&quot;ageType&quot; /&gt; &lt;xsd:element name=&quot;hobby&quot; type=&quot;hobbyType&quot; /&gt; &lt;/xsd:sequence&gt; &lt;xsd:attribute name=&quot;id&quot; type=&quot;numberType&quot; use=&quot;required&quot;/&gt; &lt;/xsd:complexType&gt; &lt;xsd:simpleType name=&quot;ageType&quot;&gt; &lt;xsd:restriction base=&quot;xsd:integer&quot;&gt; &lt;xsd:minInclusive value=&quot;0&quot;/&gt; &lt;xsd:maxInclusive value=&quot;100&quot;/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;xsd:simpleType name=&quot;hobbyType&quot;&gt; &lt;xsd:restriction base=&quot;xsd:string&quot;&gt; &lt;xsd:enumeration value=&quot;æŠ½çƒŸ&quot;/&gt; &lt;xsd:enumeration value=&quot;å–é…’&quot;/&gt; &lt;xsd:enumeration value=&quot;çƒ«å¤´&quot;/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;xsd:simpleType name=&quot;numberType&quot;&gt; &lt;xsd:restriction base=&quot;xsd:string&quot;&gt; &lt;xsd:pattern value=&quot;\\d&quot;/&gt; &lt;/xsd:restriction&gt; &lt;/xsd:simpleType&gt; &lt;/xsd:schema&gt; ç¼–å†™user.xml å¼•å…¥çº¦æŸ 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;users xmlns=&quot;http://www.lagou.com/xml&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.lagou.com/xml user.xsd&quot; &gt; &lt;user id=&quot;1&quot;&gt; &lt;name&gt;å¼ ç™¾ä¸‡&lt;/name&gt; &lt;age&gt;20&lt;/age&gt; &lt;hobby&gt;æŠ½çƒŸ&lt;/hobby&gt; &lt;/user&gt; &lt;user id=&quot;2&quot;&gt; &lt;name&gt;äºè°¦&lt;/name&gt; &lt;age&gt;50&lt;/age&gt; &lt;hobby&gt;å–é…’&lt;/hobby&gt; &lt;/user&gt; &lt;user id=&quot;3&quot;&gt; &lt;name&gt;åˆ˜èƒ½&lt;/name&gt; &lt;age&gt;40&lt;/age&gt; &lt;hobby&gt;çƒ«å¤´&lt;/hobby&gt; &lt;/user&gt; &lt;/users&gt; 4.4.4 è¯»å–XML12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class TestDOM4j &#123; //è·å–XMLæ–‡ä»¶ä¸­çš„ æ‰€æœ‰çš„å…ƒç´ åç§°(æ ‡ç­¾) @Test public void test1() throws DocumentException &#123; //1.è·å–XMLè§£æå¯¹è±¡ SAXReader reader = new SAXReader(); //2.è§£æXML è·å– æ–‡æ¡£å¯¹è±¡ document Document document = reader.read(&quot;H:\\\\jdbc_work\\\\xml_task03\\\\src\\\\com\\\\lagou\\\\xml03\\\\user.xml&quot;); //3.è·å–æ ¹å…ƒç´  Element rootElement = document.getRootElement(); //è·å–æ ¹å…ƒç´ åç§° System.out.println(rootElement.getName()); //è·å– æ ¹å…ƒç´ ä¸‹çš„æ ‡ç­¾ List&lt;Element&gt; elements = rootElement.elements(); for (Element element : elements) &#123; System.out.println(&quot;æ ¹æ ‡ç­¾ä¸‹çš„å­èŠ‚ç‚¹: &quot; + element.getName()); List&lt;Element&gt; eList = element.elements(); for (Element e : eList) &#123; System.out.println(&quot;useræ ‡ç­¾ä¸‹çš„å­èŠ‚ç‚¹&quot; + e.getName()); &#125; break; &#125; &#125; /** * è·å–å…·ä½“çš„èŠ‚ç‚¹å†…å®¹ è·å–å¼ ç™¾ä¸‡çš„æ‰€æœ‰ä¿¡æ¯ */ @Test public void test2() throws DocumentException &#123; //1.åˆ›å»ºXMLæ–‡æ¡£è§£æå¯¹è±¡ SAXReader sr = new SAXReader(); //2.è¯»å–XMLè·å–åˆ°documentå¯¹è±¡ Document document = sr.read(&quot;src\\\\com\\\\lagou\\\\xml02\\\\user.xml&quot;); //3.è·å–æ ¹èŠ‚ç‚¹ Element rootElement = document.getRootElement(); //4.å¾—åˆ°å½“å‰èŠ‚ç‚¹çš„ æ‰€æœ‰å­èŠ‚ç‚¹ List&lt;Element&gt; elements = rootElement.elements(); //5.è·å–ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ Element user = elements.get(0); //6.è·å–æ‰€æœ‰ä¿¡æ¯ String id = user.attributeValue(&quot;id&quot;); String name = user.elementText(&quot;name&quot;); String age = user.elementText(&quot;age&quot;); //ä½¿ç”¨getTextè·å–å½“å‰å…ƒç´ çš„æ–‡æœ¬å†…å®¹ String hobby = user.element(&quot;hobby&quot;).getText(); //æ‰“å° System.out.println(id+&quot; &quot; + name +&quot; &quot; + age +&quot; &quot; + hobby); &#125; &#125; 4.5 xpathæ–¹å¼è¯»å–xml4.5.1 xpathä»‹ç»XPath æ˜¯ä¸€é—¨åœ¨ XML æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚ å¯ä»¥æ˜¯ä½¿ç”¨xpathæŸ¥æ‰¾xmlä¸­çš„å†…å®¹ã€‚ XPath çš„å¥½å¤„ ç”±äºDOM4Jåœ¨è§£æXMLæ—¶åªèƒ½ä¸€å±‚ä¸€å±‚è§£æï¼Œæ‰€ä»¥å½“XMLæ–‡ä»¶å±‚æ•°è¿‡å¤šæ—¶ä½¿ç”¨ä¼šå¾ˆä¸æ–¹ä¾¿ï¼Œç»“åˆXPATHå°±å¯ä»¥ç›´æ¥è·å–åˆ°æŸä¸ªå…ƒç´  1ï¼‰éœ€è¦å†å¯¼å…¥ jaxen-1.1-beta-6.jar 4.5.2 XPathåŸºæœ¬è¯­æ³•ä»‹ç»2ï¼‰ä½¿ç”¨dom4jæ”¯æŒxpathçš„æ“ä½œçš„å‡ ç§ä¸»è¦å½¢å¼ è¯­æ³• è¯´æ˜ &#x2F;AAA&#x2F;DDD&#x2F;BBB è¡¨ç¤ºä¸€å±‚ä¸€å±‚çš„ï¼ŒAAAä¸‹é¢ DDDä¸‹é¢çš„BBB &#x2F;&#x2F;BBB è¡¨ç¤ºå’Œè¿™ä¸ªåç§°ç›¸åŒï¼Œè¡¨ç¤ºåªè¦åç§°æ˜¯BBBï¼Œéƒ½å¾—åˆ° &#x2F;&#x2F;* æ‰€æœ‰å…ƒç´  BBB[1] , BBB[last()] ç¬¬ä¸€ç§è¡¨ç¤ºç¬¬ä¸€ä¸ªBBBå…ƒç´ , ç¬¬äºŒç§è¡¨ç¤ºæœ€åä¸€ä¸ªBBBå…ƒç´  &#x2F;&#x2F;BBB[@id] è¡¨ç¤ºåªè¦BBBå…ƒç´ ä¸Šé¢æœ‰idå±æ€§ï¼Œéƒ½å¾—åˆ° &#x2F;&#x2F;BBB[@id&#x3D;â€™b1â€™] è¡¨ç¤ºå…ƒç´ åç§°æ˜¯BBB,åœ¨BBBä¸Šé¢æœ‰idå±æ€§ï¼Œå¹¶ä¸”idçš„å±æ€§å€¼æ˜¯b1 4.5.3 APIä»‹ç» å¸¸ç”¨æ–¹æ³• æè¿° selectSingleNode(query) æŸ¥æ‰¾å’Œ XPath æŸ¥è¯¢åŒ¹é…çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‚æ•°æ˜¯Xpath æŸ¥è¯¢ä¸²ã€‚ selectNodes(query) å¾—åˆ°çš„æ˜¯xmlæ ¹èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰æ»¡è¶³ xpath çš„èŠ‚ç‚¹ 4.5.4 Xpathè¯»å–XML3ï¼‰æ•°æ®å‡†å¤‡book.xml 12345678910111213141516&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;bookstore&gt; &lt;book id=&quot;book1&quot;&gt; &lt;name&gt;é‡‘ç“¶æ¢…&lt;/name&gt; &lt;author&gt;é‡‘åœ£å¹&lt;/author&gt; &lt;price&gt;99&lt;/price&gt; &lt;/book&gt; &lt;book id=&quot;book2&quot;&gt; &lt;name&gt;çº¢æ¥¼æ¢¦&lt;/name&gt; &lt;author&gt;æ›¹é›ªèŠ¹&lt;/author&gt; &lt;price&gt;69&lt;/price&gt; &lt;/book&gt; &lt;book id=&quot;book3&quot;&gt; &lt;name&gt;Javaç¼–ç¨‹æ€æƒ³&lt;/name&gt; &lt;author&gt;åŸƒå…‹å°”&lt;/author&gt; &lt;price&gt;59&lt;/price&gt; &lt;/book&gt; &lt;/bookstore&gt; 4ï¼‰ä»£ç ç¤ºä¾‹ ä½¿ç”¨selectSingleNodeæ–¹æ³• æŸ¥è¯¢æŒ‡å®šèŠ‚ç‚¹ä¸­çš„å†…å®¹ 12345678910111213141516171819/* * 1. ä½¿ç”¨selectSingleNodeæ–¹æ³• æŸ¥è¯¢æŒ‡å®šèŠ‚ç‚¹ä¸­çš„å†…å®¹ * */ @Test public void test1() throws DocumentException &#123; //1.åˆ›å»ºè§£æå™¨å¯¹è±¡ SAXReader sr = new SAXReader(); //2.è·å–æ–‡æ¡£å¯¹è±¡ Document document = sr.read(&quot;H:\\\\jdbc_work\\\\xml_task03\\\\src\\\\com\\\\lagou\\\\xml03\\\\book.xml&quot;); //3.è°ƒç”¨ selectSingleNode() æ–¹æ³•,è·å–nameèŠ‚ç‚¹å¯¹è±¡ Node node1 = document.selectSingleNode(&quot;/bookstore/book/name&quot;); System.out.println(&quot;èŠ‚ç‚¹: &quot; + node1.getName()); System.out.println(&quot;ä¹¦å: &quot; + node1.getText()); //4.è·å–ç¬¬äºŒæœ¬ä¹¦çš„åç§° Node node2 = document.selectSingleNode(&quot;/bookstore/book[2]/name&quot;); System.out.println(&quot;ç¬¬äºŒæœ¬ä¹¦çš„ä¹¦åä¸º: &quot; + node2.getText()); &#125; ä½¿ç”¨selectSingleNodeæ–¹æ³• è·å–å±æ€§å€¼,æˆ–è€…å±æ€§å€¼å¯¹åº”çš„èŠ‚ç‚¹ 1234567891011121314151617181920212223/* * 2.ä½¿ç”¨selectSingleNodeæ–¹æ³• è·å–å±æ€§å€¼,æˆ–è€…å±æ€§å€¼å¯¹åº”çš„èŠ‚ç‚¹ * */ @Test public void test2() throws DocumentException &#123; //1.åˆ›å»ºè§£æå™¨å¯¹è±¡ SAXReader sr = new SAXReader(); //2.è·å–æ–‡æ¡£å¯¹è±¡ Document document = sr.read(&quot;H:\\\\jdbc_work\\\\xml_task03\\\\src\\\\com\\\\lagou\\\\xml03\\\\book.xml&quot;); //3.è·å–ç¬¬ä¸€ä¸ªbookèŠ‚ç‚¹çš„ idå±æ€§çš„å€¼ Node node1 = document.selectSingleNode(&quot;/bookstore/book/attribute::id&quot;); System.out.println(&quot;ç¬¬ä¸€ä¸ªbookçš„idå€¼ä¸º: &quot; + node1.getText()); //4.è·å–æœ€åä¸€ä¸ªbookèŠ‚ç‚¹çš„ idå±æ€§çš„å€¼ Node node2 = document.selectSingleNode(&quot;/bookstore/book[last()]/attribute::id&quot;); System.out.println(&quot;æœ€åä¸€ä¸ªbookèŠ‚ç‚¹çš„idå€¼ä¸º: &quot; + node2.getText()); //5.è·å–idå±æ€§å€¼ä¸º book2çš„ ä¹¦å Node node3 = document.selectSingleNode(&quot;/bookstore/book[@id=&#x27;book2&#x27;]&quot;); String name = node3.selectSingleNode(&quot;name&quot;).getText(); System.out.println(&quot;idä¸ºbook2çš„ä¹¦åæ˜¯: &quot; + name); &#125; ä½¿ç”¨ selectNodes()æ–¹æ³• è·å–å¯¹åº”åç§°çš„æ‰€æœ‰èŠ‚ç‚¹ 123456789101112131415161718192021222324252627282930/* * 3.ä½¿ç”¨ selectNodes()æ–¹æ³• è·å–å¯¹åº”åç§°çš„æ‰€æœ‰èŠ‚ç‚¹ * * */ @Test public void test3() throws DocumentException &#123; //1.åˆ›å»ºè§£æå™¨å¯¹è±¡ SAXReader sr = new SAXReader(); //2.è·å–æ–‡æ¡£å¯¹è±¡ Document document = sr.read(&quot;H:\\\\jdbc_work\\\\xml_task03\\\\src\\\\com\\\\lagou\\\\xml03\\\\book.xml&quot;); //3.è·å–æ‰€æœ‰èŠ‚ç‚¹,æ‰“å°èŠ‚ç‚¹å List&lt;Node&gt; list = document.selectNodes(&quot;//*&quot;); for (Node node : list) &#123; System.out.println(&quot;èŠ‚ç‚¹å: &quot; + node.getName()); &#125; //4.è·å–æ‰€æœ‰çš„ä¹¦å List&lt;Node&gt; names = document.selectNodes(&quot;//name&quot;); for (Node name : names) &#123; System.out.println(name.getText()); &#125; //5.è·å–æŒ‡å®š idå€¼ä¸ºbook1çš„èŠ‚ç‚¹çš„æ‰€æœ‰ å†…å®¹ List&lt;Node&gt; book1 = document.selectNodes(&quot;/bookstore/book[@id=&#x27;book1&#x27;]//*&quot;); for (Node node : book1) &#123; System.out.println(node.getName()+&quot; = &quot; + node.getText()); &#125; &#125; 5. JDBCè‡ªå®šä¹‰XML5.1 å®šä¹‰é…ç½®æ–‡ä»¶1ï¼‰åˆ›å»ºè‡ªå®šä¹‰xmlæ–‡ä»¶ï¼Œä¿å­˜æ•°æ®åº“è¿æ¥ä¿¡æ¯ jdbc-config.xml 12345678&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;jdbc&gt; &lt;property name=&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt; &lt;property name=&quot;jdbcUrl&quot;&gt;jdbc:mysql://localhost:3306/db5? characterEncoding=UTF-8&lt;/property&gt; &lt;property name=&quot;user&quot;&gt;root&lt;/property&gt; &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt; &lt;/jdbc&gt; 5.2 ç¼–å†™å·¥å…·ç±»ï¼ˆé…ç½®å¼ï¼‰2ï¼‰ç¼–å†™å·¥å…·ç±» ,ä½¿ç”¨xpath è¯»å–æ•°æ®åº“ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031323334353637public class JDBCUtils &#123; //1. å®šä¹‰å­—ç¬¦ä¸²å˜é‡, è®°å½•è·å–è¿æ¥æ‰€éœ€è¦çš„ä¿¡æ¯ public static String DRIVERNAME; public static String URL; public static String USER; public static String PASSWORD; //2.é™æ€ä»£ç å— static &#123; try &#123; //ä½¿ç”¨ xpathè¯»å– xmlä¸­çš„é…ç½®ä¿¡æ¯ SAXReader sr = new SAXReader(); Document document = sr.read(&quot;H:\\\\workspace01\\\\JDBC_day02\\\\src\\\\com\\\\lagou\\\\xml03\\\\jdbc-config.xml&quot;); Node node = document.selectSingleNode(&quot;/jdbc/property[@name=&#x27;driverClass&#x27;]&quot;); //System.out.println(node.getText()); DRIVERNAME = node.getText(); URL = document.selectSingleNode(&quot;/jdbc/property[@name=&#x27;jdbcUrl&#x27;]&quot;).getText(); USER = document.selectSingleNode(&quot;/jdbc/property[@name=&#x27;user&#x27;]&quot;).getText(); PASSWORD = document.selectSingleNode(&quot;/jdbc/property[@name=&#x27;password&#x27;]&quot;).getText(); //æ³¨å†Œé©±åŠ¨ Class.forName(DRIVERNAME); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; //3.è·å–è¿æ¥çš„é™æ€æ–¹æ³• public static Connection getConnection()&#123; try &#123; //è·å–è¿æ¥å¯¹è±¡ Connection connection = DriverManager.getConnection(URL, USER, PASSWORD); //è¿”å›è¿æ¥å¯¹è±¡ return connection; &#125; catch (SQLException e) &#123; e.printStackTrace(); return null; &#125; &#125; &#125; 5.3 æµ‹è¯•å·¥å…·ç±»3ï¼‰æµ‹è¯•ï¼šè·å–æ‰€æœ‰å‘˜å·¥çš„å§“å 1234567891011121314151617181920//è·å–æ‰€æœ‰å‘˜å·¥çš„å§“å public static void main(String[] args) &#123; try &#123; //1.è·å–è¿æ¥ Connection connection = JDBCUtils.getConnection(); //2.è·å– statement ,æ‰§è¡ŒSQL Statement statement = connection.createStatement(); String sql = &quot;select * from employee&quot;; //3.å¤„ç†ç»“æœé›† ResultSet resultSet = statement.executeQuery(sql); while(resultSet.next())&#123; String ename = resultSet.getString(&quot;ename&quot;); System.out.println(ename); &#125; &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125;","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"åå°„æœºåˆ¶","slug":"åå°„æœºåˆ¶","date":"2019-01-24T12:16:22.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2019/01/24/åå°„æœºåˆ¶/","link":"","permalink":"http://yournotes.cn/2019/01/24/%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/","excerpt":"1 åŸºæœ¬æ¦‚å¿µ é€šå¸¸æƒ…å†µä¸‹ç¼–å†™ä»£ç éƒ½æ˜¯å›ºå®šçš„ï¼Œæ— è®ºè¿è¡Œå¤šå°‘æ¬¡æ‰§è¡Œçš„ç»“æœä¹Ÿæ˜¯å›ºå®šçš„ï¼Œåœ¨æŸäº›ç‰¹æ®Šåœºåˆä¸­ç¼–å†™ ä»£ç æ—¶ä¸ç¡®å®šè¦åˆ›å»ºä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œä¹Ÿä¸ç¡®å®šè¦è°ƒç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Œ","text":"1 åŸºæœ¬æ¦‚å¿µ é€šå¸¸æƒ…å†µä¸‹ç¼–å†™ä»£ç éƒ½æ˜¯å›ºå®šçš„ï¼Œæ— è®ºè¿è¡Œå¤šå°‘æ¬¡æ‰§è¡Œçš„ç»“æœä¹Ÿæ˜¯å›ºå®šçš„ï¼Œåœ¨æŸäº›ç‰¹æ®Šåœºåˆä¸­ç¼–å†™ ä»£ç æ—¶ä¸ç¡®å®šè¦åˆ›å»ºä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œä¹Ÿä¸ç¡®å®šè¦è°ƒç”¨ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Œè¿™äº›éƒ½å¸Œæœ›é€šè¿‡è¿è¡Œæ—¶ä¼ é€’ çš„å‚æ•°æ¥å†³å®šï¼Œè¯¥æœºåˆ¶å«åšåŠ¨æ€ç¼–ç¨‹æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯åå°„æœºåˆ¶ã€‚ é€šä¿—æ¥è¯´ï¼Œåå°„æœºåˆ¶å°±æ˜¯ç”¨äºåŠ¨æ€åˆ›å»ºå¯¹è±¡å¹¶ä¸”åŠ¨æ€è°ƒç”¨æ–¹æ³•çš„æœºåˆ¶ã€‚ ç›®å‰ä¸»æµçš„æ¡†æ¶åº•å±‚éƒ½æ˜¯é‡‡ç”¨åå°„æœºåˆ¶å®ç°çš„ã€‚ å¦‚ï¼š 1234//è¡¨ç¤ºå£°æ˜Personç±»å‹çš„å¼•ç”¨æŒ‡å‘Personç±»å‹çš„å¯¹è±¡Person p = new Person();//è¡¨ç¤ºè°ƒç”¨Personç±»ä¸­çš„æˆå‘˜æ–¹æ³•showp.show(); 2 Classç±»2.1 åŸºæœ¬æ¦‚å¿µ java.lang.Classç±»çš„å®ä¾‹å¯ä»¥ç”¨äºæè¿°Javaåº”ç”¨ç¨‹åºä¸­çš„ç±»å’Œæ¥å£ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§æ•°æ®ç±»å‹ã€‚ è¯¥ç±»æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ï¼Œè¯¥ç±»çš„å®ä¾‹ç”±Javaè™šæ‹Ÿæœºå’Œç±»åŠ è½½å™¨è‡ªåŠ¨æ„é€ å®Œæˆï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åŠ è½½åˆ°å†… å­˜ä¸­çš„è¿è¡Œæ—¶ç±»ã€‚ 2.2 è·å–Classå¯¹è±¡çš„æ–¹å¼ ä½¿ç”¨æ•°æ®ç±»å‹.classçš„æ–¹å¼å¯ä»¥è·å–å¯¹åº”ç±»å‹çš„Classå¯¹è±¡ï¼ˆæŒæ¡ï¼‰ã€‚ ä½¿ç”¨å¼•ç”¨&#x2F;å¯¹è±¡.getClass()çš„æ–¹å¼å¯ä»¥è·å–å¯¹åº”ç±»å‹çš„Classå¯¹è±¡ã€‚ ä½¿ç”¨åŒ…è£…ç±».TYPEçš„æ–¹å¼å¯ä»¥è·å–å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹çš„Classå¯¹è±¡ã€‚ ä½¿ç”¨Class.forName()çš„æ–¹å¼æ¥è·å–å‚æ•°æŒ‡å®šç±»å‹çš„Classå¯¹è±¡ï¼ˆæŒæ¡ï¼‰ã€‚ ä½¿ç”¨ç±»åŠ è½½å™¨ClassLoaderçš„æ–¹å¼è·å–æŒ‡å®šç±»å‹çš„Classå¯¹è±¡ã€‚ 2.3 å¸¸ç”¨çš„æ–¹æ³•ï¼ˆæŒæ¡ï¼‰ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static Class forName(String className) ç”¨äºè·å–å‚æ•°æŒ‡å®šç±»å‹å¯¹åº”çš„Classå¯¹è±¡å¹¶è¿”å› T newInstance() ç”¨äºåˆ›å»ºè¯¥Classå¯¹è±¡æ‰€è¡¨ç¤ºç±»çš„æ–°å®ä¾‹ 3 Constructorç±»3.1 åŸºæœ¬æ¦‚å¿µ java.lang.reflect.Constructorç±»ä¸»è¦ç”¨äºæè¿°è·å–åˆ°çš„æ„é€ æ–¹æ³•ä¿¡æ¯ 3.2 Classç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Constructor getConstructor(Classâ€¦ parameterTypes) ç”¨äºè·å–æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºç±»å‹ä¸­å‚æ•°æŒ‡å®šçš„ å…¬å…±æ„é€ æ–¹æ³• Constructor[] getConstructors() ç”¨äºè·å–æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºç±»å‹ä¸­æ‰€æœ‰çš„å…¬å…± æ„é€ æ–¹æ³• 3.3 Constructorç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» T newInstance(Objectâ€¦ initargs) ä½¿ç”¨æ­¤Constructorå¯¹è±¡æè¿°çš„æ„é€ æ–¹æ³•æ¥æ„é€ Classå¯¹è±¡ä»£è¡¨ç±» å‹çš„æ–°å®ä¾‹ int getModifiers() è·å–æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ String getName() è·å–æ–¹æ³•çš„åç§° Class[] getParameterTypes() è·å–æ–¹æ³•æ‰€æœ‰å‚æ•°çš„ç±»å‹ 4 Fieldç±»4.1 åŸºæœ¬æ¦‚å¿µ java.lang.reflect.Fieldç±»ä¸»è¦ç”¨äºæè¿°è·å–åˆ°çš„å•ä¸ªæˆå‘˜å˜é‡ä¿¡æ¯ã€‚ 4.2 Classç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Field getDeclaredField(String name) ç”¨äºè·å–æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºç±»ä¸­å‚æ•°æŒ‡å®šçš„å•ä¸ªæˆå‘˜å˜é‡ ä¿¡æ¯ Field[] getDeclaredFields() ç”¨äºè·å–æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºç±»ä¸­æ‰€æœ‰æˆå‘˜å˜é‡ä¿¡æ¯ 4.3 Fieldç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Object get(Object obj) è·å–å‚æ•°å¯¹è±¡objä¸­æ­¤Fieldå¯¹è±¡æ‰€è¡¨ç¤ºæˆå‘˜å˜é‡çš„æ•°å€¼ void set(Object obj, Object value) å°†å‚æ•°å¯¹è±¡objä¸­æ­¤Fieldå¯¹è±¡è¡¨ç¤ºæˆå‘˜å˜é‡çš„æ•°å€¼ä¿®æ”¹ä¸ºå‚æ•° valueçš„æ•°å€¼ void setAccessible(boolean flag) å½“å®å‚ä¼ é€’trueæ—¶ï¼Œåˆ™åå°„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶åº”è¯¥å–æ¶ˆ Java è¯­è¨€è®¿ é—®æ£€æŸ¥ int getModifiers() è·å–æˆå‘˜å˜é‡çš„è®¿é—®ä¿®é¥°ç¬¦ Class getType() è·å–æˆå‘˜å˜é‡çš„æ•°æ®ç±»å‹ String getName() è·å–æˆå‘˜å˜é‡çš„åç§° 5 Methodç±»5.1 åŸºæœ¬æ¦‚å¿µ java.lang.reflect.Methodç±»ä¸»è¦ç”¨äºæè¿°è·å–åˆ°çš„å•ä¸ªæˆå‘˜æ–¹æ³•ä¿¡æ¯ 5.2 Classç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Method getMethod(String name, Class&lt;?&gt;â€¦ parameterTypes) ç”¨äºè·å–è¯¥Classå¯¹è±¡è¡¨ç¤ºç±»ä¸­åå­—ä¸ºnameå‚æ•°ä¸º parameterTypesçš„æŒ‡å®šå…¬å…±æˆå‘˜æ–¹æ³• Method[] getMethods() ç”¨äºè·å–è¯¥Classå¯¹è±¡è¡¨ç¤ºç±»ä¸­æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³• 5.3 Methodç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Object invoke(Object obj, Objectâ€¦ args) ä½¿ç”¨å¯¹è±¡objæ¥è°ƒç”¨æ­¤Methodå¯¹è±¡æ‰€è¡¨ç¤ºçš„æˆå‘˜æ–¹æ³•ï¼Œå® å‚ä¼ é€’args int getModifiers() è·å–æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ Class getReturnType() è·å–æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ String getName() è·å–æ–¹æ³•çš„åç§° Class[] getParameterTypes() è· è·å–æ–¹æ³•æ‰€æœ‰å‚æ•°çš„ç±»å‹ Class[] getExceptionTypes() è·å–æ–¹æ³•çš„å¼‚å¸¸ä¿¡æ¯ 6 è·å–å…¶å®ƒç»“æ„ä¿¡æ¯ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Package getPackage() è·å–æ‰€åœ¨çš„åŒ…ä¿¡æ¯ Class getSuperclass() è·å–ç»§æ‰¿çš„çˆ¶ç±»ä¿¡æ¯ Class[] getInterfaces( è·å–å®ç°çš„æ‰€æœ‰æ¥å£ Annotation[] getAnnotations() è·å–æ³¨è§£ä¿¡æ¯ Type[] getGenericInterfaces() è·å–æ³›å‹ä¿¡æ¯","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"ç½‘ç»œç¼–ç¨‹","slug":"ç½‘ç»œç¼–ç¨‹","date":"2019-01-23T14:49:34.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2019/01/23/ç½‘ç»œç¼–ç¨‹/","link":"","permalink":"http://yournotes.cn/2019/01/23/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/","excerpt":"1 ç½‘ç»œç¼–ç¨‹çš„å¸¸è¯† ç›®å‰ä¸»æµçš„ç½‘ç»œé€šè®¯è½¯ä»¶æœ‰ï¼šå¾®ä¿¡ã€QQã€é£ä¿¡ã€é˜¿é‡Œæ—ºæ—ºã€é™Œé™Œã€æ¢æ¢ã€â€¦","text":"1 ç½‘ç»œç¼–ç¨‹çš„å¸¸è¯† ç›®å‰ä¸»æµçš„ç½‘ç»œé€šè®¯è½¯ä»¶æœ‰ï¼šå¾®ä¿¡ã€QQã€é£ä¿¡ã€é˜¿é‡Œæ—ºæ—ºã€é™Œé™Œã€æ¢æ¢ã€â€¦ 1.1 ä¸ƒå±‚ç½‘ç»œæ¨¡å‹ OSIï¼ˆOpen System Interconnectï¼‰ï¼Œå³å¼€æ”¾å¼ç³»ç»Ÿäº’è”ï¼Œæ˜¯ISOï¼ˆå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼‰ç»„ç»‡åœ¨1985 å¹´ç ”ç©¶çš„ç½‘ç»œäº’è¿æ¨¡å‹ã€‚ OSIä¸ƒå±‚æ¨¡å‹å’ŒTCP&#x2F;IPäº”å±‚æ¨¡å‹çš„åˆ’åˆ†å¦‚ä¸‹ï¼š å½“å‘é€æ•°æ®æ—¶ï¼Œéœ€è¦å¯¹å‘é€çš„å†…å®¹æŒ‰ç…§ä¸Šè¿°ä¸ƒå±‚æ¨¡å‹è¿›è¡Œå±‚å±‚åŠ åŒ…åå‘é€å‡ºå»ã€‚ å½“æ¥æ”¶æ•°æ®æ—¶ï¼Œéœ€è¦å¯¹æ¥æ”¶çš„å†…å®¹æŒ‰ç…§ä¸Šè¿°ä¸ƒå±‚æ¨¡å‹ç›¸åçš„æ¬¡åºå±‚å±‚æ‹†åŒ…å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚ 1.2 ç›¸å…³çš„åè®®ï¼ˆç¬”è¯•é¢˜ï¼‰ï¼ˆ1ï¼‰åè®®çš„æ¦‚å¿µ è®¡ç®—æœºåœ¨ç½‘ç»œä¸­å®ç°é€šä¿¡å°±å¿…é¡»æœ‰ä¸€äº›çº¦å®šæˆ–è€…è§„åˆ™ï¼Œè¿™ç§çº¦å®šå’Œè§„åˆ™å°±å«åšé€šä¿¡åè®®ï¼Œé€šä¿¡åè®® å¯ä»¥å¯¹é€Ÿç‡ã€ä¼ è¾“ä»£ç ã€ä»£ç ç»“æ„ã€ä¼ è¾“æ§åˆ¶æ­¥éª¤ã€å‡ºé”™æ§åˆ¶ç­‰åˆ¶å®šç»Ÿä¸€çš„æ ‡å‡†ã€‚ ï¼ˆ2ï¼‰TCPåè®® ä¼ è¾“æ§åˆ¶åè®®(Transmission Control Protocol)ï¼Œæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ï¼Œç±»ä¼¼äºæ‰“ç”µè¯ã€‚ å»ºç«‹è¿æ¥ &#x3D;&gt; è¿›è¡Œé€šä¿¡ &#x3D;&gt; æ–­å¼€è¿æ¥ åœ¨ä¼ è¾“å‰é‡‡ç”¨â€ä¸‰æ¬¡æ¡æ‰‹â€æ–¹å¼ã€‚ åœ¨é€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ä¸­å…¨ç¨‹ä¿æŒè¿æ¥ï¼Œå½¢æˆæ•°æ®ä¼ è¾“é€šé“ã€‚ ä¿è¯äº†æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œæœ‰åºæ€§ã€‚ æ˜¯ä¸€ç§å…¨åŒå·¥çš„å­—èŠ‚æµé€šä¿¡æ–¹å¼ï¼Œå¯ä»¥è¿›è¡Œå¤§æ•°æ®é‡çš„ä¼ è¾“ã€‚ ä¼ è¾“å®Œæ¯•åéœ€è¦é‡Šæ”¾å·²å»ºç«‹çš„è¿æ¥ï¼Œå‘é€æ•°æ®çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚ ï¼ˆ3ï¼‰UDPåè®® ç”¨æˆ·æ•°æ®æŠ¥åè®®(User Datagram Protocol)ï¼Œæ˜¯ä¸€ç§éé¢å‘è¿æ¥çš„åè®®ï¼Œç±»ä¼¼äºå†™ä¿¡ã€‚ åœ¨é€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ä¸éœ€è¦ä¿æŒè¿æ¥ï¼Œå…¶å®æ˜¯ä¸éœ€è¦å»ºç«‹è¿æ¥ã€‚ ä¸ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œæœ‰åºæ€§ã€‚ æ˜¯ä¸€ç§å…¨åŒå·¥çš„æ•°æ®æŠ¥é€šä¿¡æ–¹å¼ï¼Œæ¯ä¸ªæ•°æ®æŠ¥çš„å¤§å°é™åˆ¶åœ¨64Kå†…ã€‚ å‘é€æ•°æ®å®Œæ¯•åæ— éœ€é‡Šæ”¾èµ„æºï¼Œå¼€é”€å°ï¼Œå‘é€æ•°æ®çš„æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œé€Ÿåº¦å¿«ã€‚ 1.3 IPåœ°å€ï¼ˆé‡ç‚¹ï¼‰ 192.168.1.1 - æ˜¯ç»å¤§å¤šæ•°è·¯ç”±å™¨çš„ç™»å½•åœ°å€ï¼Œä¸»è¦é…ç½®ç”¨æˆ·åå’Œå¯†ç ä»¥åŠMacè¿‡æ»¤ã€‚ IPåœ°å€æ˜¯äº’è”ç½‘ä¸­çš„å”¯ä¸€åœ°å€æ ‡è¯†ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”±32ä½äºŒè¿›åˆ¶ç»„æˆçš„æ•´æ•°ï¼Œå«åšIPv4ï¼Œå½“ç„¶ä¹Ÿæœ‰128 ä½äºŒè¿›åˆ¶ç»„æˆçš„æ•´æ•°ï¼Œå«åšIPv6ï¼Œç›®å‰ä¸»æµçš„è¿˜æ˜¯IPv4ã€‚ æ—¥å¸¸ç”Ÿæ´»ä¸­é‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•æ¥è¿›è¡ŒIPåœ°å€çš„æè¿°ï¼Œå°†æ¯ä¸ªå­—èŠ‚çš„äºŒè¿›åˆ¶è½¬åŒ–ä¸ºä¸€ä¸ªåè¿›åˆ¶æ•´ æ•°ï¼Œä¸åŒçš„æ•´æ•°ä¹‹é—´é‡‡ç”¨å°æ•°ç‚¹éš”å¼€ã€‚ å¦‚ï¼š 0x01020304 &#x3D;&gt; 1.2.3.4 æŸ¥çœ‹IPåœ°å€çš„æ–¹å¼ï¼š Windowsç³»ç»Ÿï¼šåœ¨dosçª—å£ä¸­ä½¿ç”¨ipconfigæˆ–ipconfig&#x2F;allå‘½ä»¤å³å¯ Unix&#x2F;linuxç³»ç»Ÿï¼šåœ¨ç»ˆç«¯çª—å£ä¸­ä½¿ç”¨ifconfigæˆ–&#x2F;sbin&#x2F;ifconfigå‘½ä»¤å³å¯ ç‰¹æ®Šçš„åœ°å€ æœ¬åœ°å›ç¯åœ°å€(hostAddress)ï¼š127.0.0.1 ä¸»æœºå(hostName)ï¼šlocalhost 1.4 ç«¯å£å·ï¼ˆé‡ç‚¹ï¼‰ IPåœ°å€ - å¯ä»¥å®šä½åˆ°å…·ä½“æŸä¸€å°è®¾å¤‡ã€‚ ç«¯å£å· - å¯ä»¥å®šä½åˆ°è¯¥è®¾å¤‡ä¸­å…·ä½“æŸä¸€ä¸ªè¿›ç¨‹ã€‚ ç«¯å£å·æœ¬è´¨ä¸Šæ˜¯16ä½äºŒè¿›åˆ¶ç»„æˆçš„æ•´æ•°ï¼Œè¡¨ç¤ºèŒƒå›´æ˜¯ï¼š0 ~ 65535ï¼Œå…¶ä¸­0 ~ 1024ä¹‹é—´çš„ç«¯å£å·é€š å¸¸è¢«ç³»ç»Ÿå ç”¨ï¼Œå»ºè®®ç¼–ç¨‹ä»1025å¼€å§‹ä½¿ç”¨ã€‚ ç‰¹æ®Šçš„ç«¯å£ï¼š HTTP:80 FTP:21 Oracle:1521 MySQL:3306 Tomcat:8080 ç½‘ç»œç¼–ç¨‹éœ€è¦æä¾›ï¼šIPåœ°å€ + ç«¯å£å·ï¼Œç»„åˆåœ¨ä¸€èµ·å«åšç½‘ç»œå¥—æ¥å­—ï¼šSocketã€‚ 2 åŸºäºtcpåè®®çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆé‡ç‚¹ï¼‰2.1 C&#x2F;Sæ¶æ„çš„ç®€ä»‹ åœ¨C&#x2F;Sæ¨¡å¼ä¸‹å®¢æˆ·å‘æœåŠ¡å™¨å‘å‡ºæœåŠ¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åæä¾›æœåŠ¡ã€‚ ä¾‹å¦‚ï¼šåœ¨ä¸€ä¸ªé…’åº—ä¸­ï¼Œé¡¾å®¢æ‰¾æœåŠ¡å‘˜ç‚¹èœ,æœåŠ¡å‘˜æŠŠç‚¹èœå•é€šçŸ¥å¨å¸ˆï¼Œå¨å¸ˆæŒ‰ç‚¹èœå•åšå¥½èœåè®©æœ åŠ¡å‘˜ç«¯ç»™å®¢æˆ·ï¼Œè¿™å°±æ˜¯ä¸€ç§C&#x2F;Så·¥ä½œæ–¹å¼ã€‚å¦‚æœæŠŠé…’åº—çœ‹ä½œä¸€ä¸ªç³»ç»Ÿï¼ŒæœåŠ¡å‘˜å°±æ˜¯å®¢æˆ·ç«¯ï¼Œå¨å¸ˆå°± æ˜¯æœåŠ¡å™¨ã€‚è¿™ç§ç³»ç»Ÿåˆ†å·¥å’ŒååŒå·¥ä½œçš„æ–¹å¼å°±æ˜¯C&#x2F;Sçš„å·¥ä½œæ–¹å¼ã€‚ å®¢æˆ·ç«¯éƒ¨åˆ†ï¼šä¸ºæ¯ä¸ªç”¨æˆ·æ‰€ä¸“æœ‰çš„ï¼Œè´Ÿè´£æ‰§è¡Œå‰å°åŠŸèƒ½ã€‚ æœåŠ¡å™¨éƒ¨åˆ†ï¼šç”±å¤šä¸ªç”¨æˆ·å…±äº«çš„ä¿¡æ¯ä¸åŠŸèƒ½ï¼Œæ‹›å¾…åå°æœåŠ¡ã€‚ 2.2 ç¼–ç¨‹æ¨¡å‹ æœåŠ¡å™¨ï¼š ï¼ˆ1ï¼‰åˆ›å»ºServerSocketç±»å‹çš„å¯¹è±¡å¹¶æä¾›ç«¯å£å·ï¼› ï¼ˆ2ï¼‰ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œè°ƒç”¨accept()æ–¹æ³•ï¼› ï¼ˆ3ï¼‰ä½¿ç”¨è¾“å…¥è¾“å‡ºæµè¿›è¡Œé€šä¿¡ï¼› ï¼ˆ4ï¼‰å…³é—­Socketï¼› å®¢æˆ·ç«¯ï¼š ï¼ˆ1ï¼‰åˆ›å»ºSocketç±»å‹çš„å¯¹è±¡å¹¶æä¾›æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£å·ï¼› ï¼ˆ2ï¼‰ä½¿ç”¨è¾“å…¥è¾“å‡ºæµè¿›è¡Œé€šä¿¡ï¼› ï¼ˆ3ï¼‰å…³é—­Socketï¼› 2.3 ç›¸å…³ç±»å’Œæ–¹æ³•çš„è§£æï¼ˆ1ï¼‰ServerSocketç±» java.net.ServerSocketç±»ä¸»è¦ç”¨äºæè¿°æœåŠ¡å™¨å¥—æ¥å­—ä¿¡æ¯ï¼ˆå¤§æ’æ’ï¼‰ã€‚ å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» ServerSocket(int port) æ ¹æ®å‚æ•°æŒ‡å®šçš„ç«¯å£å·æ¥æ„é€ å¯¹è±¡ Socket accept() ä¾¦å¬å¹¶æ¥æ”¶åˆ°æ­¤å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚ void close() ç”¨äºå…³é—­å¥—æ¥å­— ï¼ˆ2ï¼‰Socketç±» java.net.Socketç±»ä¸»è¦ç”¨äºæè¿°å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œæ˜¯ä¸¤å°æœºå™¨é—´é€šä¿¡çš„ç«¯ç‚¹ï¼ˆå°æ’æ’ï¼‰ã€‚ å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Socket(String host, int port) æ ¹æ®æŒ‡å®šä¸»æœºåå’Œç«¯å£æ¥æ„é€ å¯¹è±¡ InputStream getInputStream() ç”¨äºè·å–å½“å‰å¥—æ¥å­—çš„è¾“å…¥æµ OutputStream getOutputStream() ç”¨äºè·å–å½“å‰å¥—æ¥å­—çš„è¾“å‡ºæµ void close() ç”¨äºå…³é—­å¥—æ¥å­— ï¼ˆ3ï¼‰æ³¨æ„äº‹é¡¹ å®¢æˆ·ç«¯ Socket ä¸æœåŠ¡å™¨ç«¯ Socket å¯¹åº”, éƒ½åŒ…å«è¾“å…¥å’Œè¾“å‡ºæµã€‚ å®¢æˆ·ç«¯çš„socket.getInputStream() è¿æ¥äºæœåŠ¡å™¨socket.getOutputStream()ã€‚ å®¢æˆ·ç«¯çš„socket.getOutputStream()è¿æ¥äºæœåŠ¡å™¨socket.getInputStream() 3 åŸºäºudpåè®®çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆç†Ÿæ‚‰ï¼‰3.1 ç¼–ç¨‹æ¨¡å‹ æ¥æ”¶æ–¹ï¼š ï¼ˆ1ï¼‰åˆ›å»ºDatagramSocketç±»å‹çš„å¯¹è±¡å¹¶æä¾›ç«¯å£å·ï¼› ï¼ˆ2ï¼‰åˆ›å»ºDatagramPacketç±»å‹çš„å¯¹è±¡å¹¶æä¾›ç¼“å†²åŒºï¼› ï¼ˆ3ï¼‰é€šè¿‡Socketæ¥æ”¶æ•°æ®å†…å®¹å­˜æ”¾åˆ°Packetä¸­ï¼Œè°ƒç”¨receiveæ–¹æ³•ï¼› ï¼ˆ4ï¼‰å…³é—­Socketï¼› å‘é€æ–¹ï¼š ï¼ˆ1ï¼‰åˆ›å»ºDatagramSocketç±»å‹çš„å¯¹è±¡ï¼› ï¼ˆ2ï¼‰åˆ›å»ºDatagramPacketç±»å‹çš„å¯¹è±¡å¹¶æä¾›æ¥æ”¶æ–¹çš„é€šä¿¡åœ°å€ï¼› ï¼ˆ3ï¼‰é€šè¿‡Socketå°†Packetä¸­çš„æ•°æ®å†…å®¹å‘é€å‡ºå»ï¼Œè°ƒç”¨sendæ–¹æ³•ï¼› ï¼ˆ4ï¼‰å…³é—­Socketï¼› 3.2 ç›¸å…³ç±»å’Œæ–¹æ³•çš„è§£æï¼ˆ1ï¼‰DatagramSocketç±» java.net.DatagramSocketç±»ä¸»è¦ç”¨äºæè¿°å‘é€å’Œæ¥æ”¶æ•°æ®æŠ¥çš„å¥—æ¥å­—(é‚®å±€)ã€‚ æ¢å¥è¯è¯´ï¼Œè¯¥ç±»å°±æ˜¯åŒ…è£¹æŠ•é€’æœåŠ¡çš„å‘é€æˆ–æ¥æ”¶ç‚¹ã€‚ å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» DatagramSocket() ä½¿ç”¨æ— å‚çš„æ–¹å¼æ„é€ å¯¹è±¡ DatagramSocket(int port) æ ¹æ®å‚æ•°æŒ‡å®šçš„ç«¯å£å·æ¥æ„é€ å¯¹è±¡ void receive(DatagramPacket p) ç”¨äºæ¥æ”¶æ•°æ®æŠ¥å­˜æ”¾åˆ°å‚æ•°æŒ‡å®šçš„ä½ç½® void send(DatagramPacket p) ç”¨äºå°†å‚æ•°æŒ‡å®šçš„æ•°æ®æŠ¥å‘é€å‡ºå» void close() å…³é—­Socketå¹¶é‡Šæ”¾ç›¸å…³èµ„æº ï¼ˆ2ï¼‰DatagramPacketç±» java.net.DatagramPacketç±»ä¸»è¦ç”¨äºæè¿°æ•°æ®æŠ¥ï¼Œæ•°æ®æŠ¥ç”¨æ¥å®ç°æ— è¿æ¥åŒ…è£¹æŠ•é€’æœåŠ¡ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» DatagramPacket(byte[] buf, int length) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ•°ç»„æ¥æ„é€ å¯¹è±¡ï¼Œç”¨äºæ¥ æ”¶é•¿åº¦ä¸ºlengthçš„æ•°æ®æŠ¥ DatagramPacket(byte[] buf, int length, InetAddress address, int port) æ ¹æ®å‚æ•°æŒ‡å®šæ•°ç»„æ¥æ„é€ å¯¹è±¡ï¼Œå°†æ•°æ®æŠ¥ å‘é€åˆ°æŒ‡å®šåœ°å€å’Œç«¯å£ InetAddress getAddress() ç”¨äºè·å–å‘é€æ–¹æˆ–æ¥æ”¶æ–¹çš„é€šä¿¡åœ°å€ int getPort() ç”¨äºè·å–å‘é€æ–¹æˆ–æ¥æ”¶æ–¹çš„ç«¯å£å· int getLength() ç”¨äºè·å–å‘é€æ•°æ®æˆ–æ¥æ”¶æ•°æ®çš„é•¿åº¦ ï¼ˆ3ï¼‰InetAddressç±» java.net.InetAddressç±»ä¸»è¦ç”¨äºæè¿°äº’è”ç½‘é€šä¿¡åœ°å€ä¿¡æ¯ã€‚ å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static InetAddress getLocalHost() ç”¨äºè·å–å½“å‰ä¸»æœºçš„é€šä¿¡åœ°å€ static InetAddress getByName(String host) æ ¹æ®å‚æ•°æŒ‡å®šçš„ä¸»æœºåè·å–é€šä¿¡åœ°å€ 4 URLç±»ï¼ˆç†Ÿæ‚‰ï¼‰4.1 åŸºæœ¬æ¦‚å¿µ java.net.URLï¼ˆUniform Resource Identifierï¼‰ç±»ä¸»è¦ç”¨äºè¡¨ç¤ºç»Ÿä¸€çš„èµ„æºå®šä½å™¨ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘ä¸‡ ç»´ç½‘ä¸Šâ€œèµ„æºâ€çš„æŒ‡é’ˆã€‚è¿™ä¸ªèµ„æºå¯ä»¥æ˜¯ç®€å•çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹å¤æ‚å¯¹è±¡çš„å¼•ç”¨ï¼Œä¾‹å¦‚å¯¹æ•° æ®åº“æˆ–æœç´¢å¼•æ“çš„æŸ¥è¯¢ç­‰ã€‚ é€šè¿‡URLå¯ä»¥è®¿é—®ä¸‡ç»´ç½‘ä¸Šçš„ç½‘ç»œèµ„æºï¼Œæœ€å¸¸è§çš„å°±æ˜¯wwwå’Œftpç«™ç‚¹ï¼Œæµè§ˆå™¨é€šè¿‡è§£æç»™å®šçš„ URLå¯ä»¥åœ¨ç½‘ç»œä¸ŠæŸ¥æ‰¾ç›¸åº”çš„èµ„æºã€‚ URLçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š &lt;ä¼ è¾“åè®®&gt;://&lt;ä¸»æœºå&gt;:&lt;ç«¯å£å·&gt;/&lt;èµ„æºåœ°å€&gt; 4.2 å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» URL(String spec) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ä¿¡æ¯æ„é€ å¯¹è±¡ String getProtocol() è·å–åè®®åç§° String getHost() è·å–ä¸»æœºåç§° int getPort() è·å–ç«¯å£å· String getPath() è·å–è·¯å¾„ä¿¡æ¯ String getFile() è·å–æ–‡ä»¶å URLConnection openConnection() è·å–URLConnectionç±»çš„å®ä¾‹ 4.3 URLConnectionç±»ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.net.URLConnectionç±»æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œè¯¥ç±»è¡¨ç¤ºåº”ç”¨ç¨‹åºå’ŒURLä¹‹é—´çš„é€šä¿¡é“¾æ¥çš„æ‰€æœ‰ç±»çš„è¶… ç±»ï¼Œä¸»è¦å®ç°ç±»æœ‰æ”¯æŒHTTPç‰¹æœ‰åŠŸèƒ½çš„HttpURLConnectionç±»ã€‚ ï¼ˆ2ï¼‰HttpURLConnectionç±»çš„å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» InputStream getInputStream() è·å–è¾“å…¥æµ void disconnect() æ–­å¼€è¿æ¥","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","date":"2019-01-20T11:28:43.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2019/01/20/å¤šçº¿ç¨‹/","link":"","permalink":"http://yournotes.cn/2019/01/20/%E5%A4%9A%E7%BA%BF%E7%A8%8B/","excerpt":"1 åŸºæœ¬æ¦‚å¿µ1.1 ç¨‹åºå’Œè¿›ç¨‹çš„æ¦‚å¿µ ç¨‹åº - æ•°æ®ç»“æ„ + ç®—æ³•ï¼Œä¸»è¦æŒ‡å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚","text":"1 åŸºæœ¬æ¦‚å¿µ1.1 ç¨‹åºå’Œè¿›ç¨‹çš„æ¦‚å¿µ ç¨‹åº - æ•°æ®ç»“æ„ + ç®—æ³•ï¼Œä¸»è¦æŒ‡å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ è¿›ç¨‹ - ä¸»è¦æŒ‡è¿è¡Œåœ¨å†…å­˜ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ç›®å‰ä¸»æµçš„æ“ä½œç³»ç»Ÿéƒ½æ”¯æŒå¤šè¿›ç¨‹ï¼Œä¸ºäº†è®©æ“ä½œç³»ç»ŸåŒæ—¶å¯ä»¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä½†è¿›ç¨‹æ˜¯é‡é‡çº§çš„ï¼Œ ä¹Ÿå°±æ˜¯æ–°å»ºä¸€ä¸ªè¿›ç¨‹ä¼šæ¶ˆè€—CPUå’Œå†…å­˜ç©ºé—´ç­‰ç³»ç»Ÿèµ„æºï¼Œå› æ­¤è¿›ç¨‹çš„æ•°é‡æ¯”è¾ƒå±€é™ã€‚ 1.2 çº¿ç¨‹çš„æ¦‚å¿µ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜å°±æå‡ºçº¿ç¨‹çš„æ¦‚å¿µï¼Œçº¿ç¨‹å°±æ˜¯è¿›ç¨‹å†…éƒ¨çš„ç¨‹åºæµï¼Œä¹Ÿå°±æ˜¯è¯´æ“ä½œç³»ç»Ÿå†…éƒ¨æ”¯æŒå¤š è¿›ç¨‹çš„ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹çš„å†…éƒ¨åˆæ˜¯æ”¯æŒå¤šçº¿ç¨‹çš„ï¼Œçº¿ç¨‹æ˜¯è½»é‡çš„ï¼Œæ–°å»ºçº¿ç¨‹ä¼šå…±äº«æ‰€åœ¨è¿›ç¨‹çš„ç³»ç»Ÿèµ„ æºï¼Œå› æ­¤ç›®å‰ä¸»æµçš„å¼€å‘éƒ½æ˜¯é‡‡ç”¨å¤šçº¿ç¨‹ã€‚ å¤šçº¿ç¨‹æ˜¯é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬æ³•æ¥ä¿è¯å¤šä¸ªçº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œï¼Œæ‰€è°“å¹¶å‘å°±æ˜¯æŒ‡å®è§‚å¹¶è¡Œå¾®è§‚ä¸²è¡Œçš„æœº åˆ¶ã€‚ 2 çº¿ç¨‹çš„åˆ›å»ºï¼ˆé‡ä¸­ä¹‹é‡ï¼‰2.1 Threadç±»çš„æ¦‚å¿µ java.lang.Threadç±»ä»£è¡¨çº¿ç¨‹ï¼Œä»»ä½•çº¿ç¨‹å¯¹è±¡éƒ½æ˜¯Threadç±»ï¼ˆå­ç±»ï¼‰çš„å®ä¾‹ã€‚ Threadç±»æ˜¯çº¿ç¨‹çš„æ¨¡æ¿ï¼Œå°è£…äº†å¤æ‚çš„çº¿ç¨‹å¼€å¯ç­‰æ“ä½œï¼Œå°è£…äº†æ“ä½œç³»ç»Ÿçš„å·®å¼‚æ€§ã€‚ 2.2 åˆ›å»ºæ–¹å¼ è‡ªå®šä¹‰ç±»ç»§æ‰¿Threadç±»å¹¶é‡å†™runæ–¹æ³•ï¼Œç„¶ååˆ›å»ºè¯¥ç±»çš„å¯¹è±¡è°ƒç”¨startæ–¹æ³•ã€‚ è‡ªå®šä¹‰ç±»å®ç°Runnableæ¥å£å¹¶é‡å†™runæ–¹æ³•ï¼Œåˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ä½œä¸ºå®å‚æ¥æ„é€ Threadç±»å‹çš„å¯¹ è±¡ï¼Œç„¶åä½¿ç”¨Threadç±»å‹çš„å¯¹è±¡è°ƒç”¨startæ–¹æ³•ã€‚ 2.3 ç›¸å…³çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Thread() ä½¿ç”¨æ— å‚çš„æ–¹å¼æ„é€ å¯¹è±¡ Thread(String name) æ ¹æ®å‚æ•°æŒ‡å®šçš„åç§°æ¥æ„é€ å¯¹è±¡ Thread(Runnable target) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥æ„é€ å¯¹è±¡ï¼Œå…¶ä¸­Runnableæ˜¯ä¸ªæ¥å£ç±» å‹ Thread(Runnable target, String name) æ ¹æ®å‚æ•°æŒ‡å®šå¼•ç”¨å’Œåç§°æ¥æ„é€ å¯¹è±¡ void run() è‹¥ä½¿ç”¨Runnableå¼•ç”¨æ„é€ äº†çº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶æœ€ç»ˆè°ƒ ç”¨æ¥å£ä¸­çš„ç‰ˆæœ¬ è‹¥æ²¡æœ‰ä½¿ç”¨Runnableå¼•ç”¨æ„é€ çº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶åˆ™å•¥ ä¹Ÿä¸åš void start() ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼ŒJavaè™šæ‹Ÿæœºä¼šè‡ªåŠ¨è°ƒç”¨è¯¥çº¿ç¨‹çš„runæ–¹æ³• 2.4 æ‰§è¡Œæµç¨‹ æ‰§è¡Œmainæ–¹æ³•çš„çº¿ç¨‹å«åšä¸»çº¿ç¨‹ï¼Œæ‰§è¡Œrunæ–¹æ³•çš„çº¿ç¨‹å«åšæ–°çº¿ç¨‹&#x2F;å­çº¿ç¨‹ã€‚ mainæ–¹æ³•æ˜¯ç¨‹åºçš„å…¥å£ï¼Œå¯¹äºstartæ–¹æ³•ä¹‹å‰çš„ä»£ç æ¥è¯´ï¼Œç”±ä¸»çº¿ç¨‹æ‰§è¡Œä¸€æ¬¡ï¼Œå½“startæ–¹æ³•è°ƒç”¨æˆ åŠŸåçº¿ç¨‹çš„ä¸ªæ•°ç”±1ä¸ªå˜æˆäº†2ä¸ªï¼Œæ–°å¯åŠ¨çš„çº¿ç¨‹å»æ‰§è¡Œrunæ–¹æ³•çš„ä»£ç ï¼Œä¸»çº¿ç¨‹ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œä¸¤ ä¸ªçº¿ç¨‹å„è‡ªç‹¬ç«‹è¿è¡Œäº’ä¸å½±å“ã€‚ å½“runæ–¹æ³•æ‰§è¡Œå®Œæ¯•åå­çº¿ç¨‹ç»“æŸï¼Œå½“mainæ–¹æ³•æ‰§è¡Œå®Œæ¯•åä¸»çº¿ç¨‹ç»“æŸã€‚ ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œæ²¡æœ‰æ˜ç¡®çš„å…ˆåæ‰§è¡Œæ¬¡åºï¼Œç”±æ“ä½œç³»ç»Ÿè°ƒåº¦ç®—æ³•æ¥å†³å®šã€‚ 2.5 æ–¹å¼çš„æ¯”è¾ƒ ç»§æ‰¿Threadç±»çš„æ–¹å¼ä»£ç ç®€å•ï¼Œä½†æ˜¯è‹¥è¯¥ç±»ç»§æ‰¿Threadç±»ååˆ™æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œè€Œå®ç° Runnableæ¥å£çš„æ–¹å¼ä»£ç å¤æ‚ï¼Œä½†ä¸å½±å“è¯¥ç±»ç»§æ‰¿å…¶å®ƒç±»ä»¥åŠå®ç°å…¶å®ƒæ¥å£ï¼Œå› æ­¤ä»¥åçš„å¼€å‘ä¸­ æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚ 2.6 åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼ ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼æ¥åˆ›å»ºå’Œå¯åŠ¨çº¿ç¨‹ã€‚ 3 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆç†Ÿæ‚‰ï¼‰ æ–°å»ºçŠ¶æ€ - ä½¿ç”¨newå…³é”®å­—åˆ›å»ºä¹‹åè¿›å…¥çš„çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹å¹¶æ²¡æœ‰å¼€å§‹æ‰§è¡Œã€‚ å°±ç»ªçŠ¶æ€ - è°ƒç”¨startæ–¹æ³•åè¿›å…¥çš„çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹è¿˜æ˜¯æ²¡æœ‰å¼€å§‹æ‰§è¡Œã€‚ è¿è¡ŒçŠ¶æ€ - ä½¿ç”¨çº¿ç¨‹è°ƒåº¦å™¨è°ƒç”¨è¯¥çº¿ç¨‹åè¿›å…¥çš„çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼Œå½“çº¿ç¨‹çš„æ—¶é—´ç‰‡æ‰§è¡Œå®Œ æ¯•åä»»åŠ¡æ²¡æœ‰å®Œæˆæ—¶å›åˆ°å°±ç»ªçŠ¶æ€ã€‚ æ¶ˆäº¡çŠ¶æ€ - å½“çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆåè¿›å…¥çš„çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹å·²ç»ç»ˆæ­¢ã€‚ é˜»å¡çŠ¶æ€ - å½“çº¿ç¨‹æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é˜»å¡äº‹ä»¶è¿›å…¥çš„çŠ¶æ€ï¼Œå¦‚ï¼šsleepæ–¹æ³•ã€‚ é˜»å¡çŠ¶æ€è§£é™¤åè¿›å…¥å°±ç»ªçŠ¶æ€ã€‚ 4 çº¿ç¨‹çš„ç¼–å·å’Œåç§°ï¼ˆç†Ÿæ‚‰ï¼‰ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» long getId() è·å–è°ƒç”¨å¯¹è±¡æ‰€è¡¨ç¤ºçº¿ç¨‹çš„ç¼–å· String getName() è·å–è°ƒç”¨å¯¹è±¡æ‰€è¡¨ç¤ºçº¿ç¨‹çš„åç§° void setName(String name) è®¾ç½®&#x2F;ä¿®æ”¹çº¿ç¨‹çš„åç§°ä¸ºå‚æ•°æŒ‡å®šçš„æ•°å€¼ static Thread currentThread() è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçº¿ç¨‹çš„å¼•ç”¨ æ¡ˆä¾‹é¢˜ç›® è‡ªå®šä¹‰ç±»ç»§æ‰¿Threadç±»å¹¶é‡å†™runæ–¹æ³•ï¼Œåœ¨runæ–¹æ³•ä¸­å…ˆæ‰“å°å½“å‰çº¿ç¨‹çš„ç¼–å·å’Œåç§°ï¼Œç„¶åå°†çº¿ç¨‹ çš„åç§°ä¿®æ”¹ä¸ºâ€zhangfeiâ€åå†æ¬¡æ‰“å°ç¼–å·å’Œåç§°ã€‚ è¦æ±‚åœ¨mainæ–¹æ³•ä¸­ä¹Ÿè¦æ‰“å°ä¸»çº¿ç¨‹çš„ç¼–å·å’Œåç§°ã€‚ 5 å¸¸ç”¨çš„æ–¹æ³•ï¼ˆé‡ç‚¹ï¼‰ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static void yield() å½“å‰çº¿ç¨‹è®©å‡ºå¤„ç†å™¨ï¼ˆç¦»å¼€RunningçŠ¶æ€ï¼‰ï¼Œä½¿å½“å‰çº¿ç¨‹è¿›å…¥Runnable çŠ¶æ€ç­‰å¾… static void sleep(times) ä½¿å½“å‰çº¿ç¨‹ä» Running æ”¾å¼ƒå¤„ç†å™¨è¿›å…¥BlockçŠ¶æ€, ä¼‘çœ timesæ¯«ç§’, å†è¿” å›åˆ°Runnableå¦‚æœå…¶ä»–çº¿ç¨‹æ‰“æ–­å½“å‰çº¿ç¨‹çš„Block(sleep), å°±ä¼šå‘ç”Ÿ InterruptedExceptionã€‚ int getPriority() è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§ void setPriority(int newPriority) ä¿®æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚ ä¼˜å…ˆçº§è¶Šé«˜çš„çº¿ç¨‹ä¸ä¸€å®šå…ˆæ‰§è¡Œï¼Œä½†è¯¥çº¿ç¨‹è·å–åˆ°æ—¶é—´ç‰‡çš„æœºä¼šä¼šæ›´å¤š ä¸€äº› void join() ç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢ void join(long millis) ç­‰å¾…å‚æ•°æŒ‡å®šçš„æ¯«ç§’æ•° boolean isDaemon() ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ void setDaemon(boolean on) ç”¨äºè®¾ç½®çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ æ¡ˆä¾‹é¢˜ç›® ç¼–ç¨‹åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€è´Ÿè´£æ‰“å°1 ~ 100ä¹‹é—´çš„æ‰€æœ‰å¥‡æ•°ï¼Œå…¶ä¸­çº¿ç¨‹äºŒè´Ÿè´£æ‰“å°1 ~ 100ä¹‹é—´çš„ æ‰€æœ‰å¶æ•°ã€‚ åœ¨mainæ–¹æ³•å¯åŠ¨ä¸Šè¿°ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ,ä¸»çº¿ç¨‹ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹ç»ˆæ­¢ã€‚ 6 çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼ˆé‡ç‚¹ï¼‰6.1 åŸºæœ¬æ¦‚å¿µ å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ç§å…±äº«èµ„æºæ—¶ï¼Œå¯èƒ½ä¼šé€ æˆæ•°æ®çš„è¦†ç›–ç­‰ä¸ä¸€è‡´æ€§é—®é¢˜ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹çº¿ ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡å’Œåè°ƒï¼Œè¯¥æœºåˆ¶å°±å«åšçº¿ç¨‹çš„åŒæ­¥æœºåˆ¶ã€‚ å¤šä¸ªçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªä¸´ç•Œèµ„æºæ—¶ä¼šå‘ç”Ÿçº¿ç¨‹å¹¶å‘å®‰å…¨é—®é¢˜ã€‚ å¼‚æ­¥æ“ä½œ:å¤šçº¿ç¨‹å¹¶å‘çš„æ“ä½œï¼Œå„è‡ªç‹¬ç«‹è¿è¡Œã€‚ åŒæ­¥æ“ä½œ:å¤šçº¿ç¨‹ä¸²è¡Œçš„æ“ä½œï¼Œå…ˆåæ‰§è¡Œçš„é¡ºåºã€‚ 6.2 è§£å†³æ–¹æ¡ˆ ç”±ç¨‹åºç»“æœå¯çŸ¥ï¼šå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªè´¦æˆ·è¿›è¡Œå–æ¬¾æ—¶ï¼Œå¯¼è‡´æœ€ç»ˆçš„è´¦æˆ·ä½™é¢ä¸åˆç†ã€‚ å¼•å‘åŸå› ï¼šçº¿ç¨‹ä¸€æ‰§è¡Œå–æ¬¾æ—¶è¿˜æ²¡æ¥å¾—åŠå°†å–æ¬¾åçš„ä½™é¢å†™å…¥åå°ï¼Œçº¿ç¨‹äºŒå°±å·²ç»å¼€å§‹å–æ¬¾ã€‚ è§£å†³æ–¹æ¡ˆï¼šè®©çº¿ç¨‹ä¸€æ‰§è¡Œå®Œæ¯•å–æ¬¾æ“ä½œåï¼Œå†è®©çº¿ç¨‹äºŒæ‰§è¡Œå³å¯ï¼Œå°†çº¿ç¨‹çš„å¹¶å‘æ“ä½œæ”¹ä¸ºä¸²è¡Œæ“ ä½œã€‚ ç»éªŒåˆ†äº«ï¼šåœ¨ä»¥åçš„å¼€å‘å°½é‡å‡å°‘ä¸²è¡Œæ“ä½œçš„èŒƒå›´ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚ 6.3 å®ç°æ–¹å¼ åœ¨Javaè¯­è¨€ä¸­ä½¿ç”¨synchronizedå…³é”®å­—æ¥å®ç°åŒæ­¥&#x2F;å¯¹è±¡é”æœºåˆ¶ä»è€Œä¿è¯çº¿ç¨‹æ‰§è¡Œçš„åŸå­æ€§ï¼Œå…·ä½“ æ–¹å¼å¦‚ä¸‹ï¼š 12345678//ä½¿ç”¨åŒæ­¥ä»£ç å—çš„æ–¹å¼å®ç°éƒ¨åˆ†ä»£ç çš„é”å®šï¼Œæ ¼å¼å¦‚ä¸‹ï¼š synchronized(ç±»ç±»å‹çš„å¼•ç”¨) &#123; ç¼–å†™æ‰€æœ‰éœ€è¦é”å®šçš„ä»£ç ï¼› &#125; //ä½¿ç”¨åŒæ­¥æ–¹æ³•çš„æ–¹å¼å®ç°æ‰€æœ‰ä»£ç çš„é”å®šã€‚ ç›´æ¥ä½¿ç”¨synchronizedå…³é”®å­—æ¥ä¿®é¥°æ•´ä¸ªæ–¹æ³•å³å¯ è¯¥æ–¹å¼ç­‰ä»·äº:synchronized(this) &#123; æ•´ä¸ªæ–¹æ³•ä½“çš„ä»£ç  &#125; 6.4 é™æ€æ–¹æ³•çš„é”å®š å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªé™æ€æ–¹æ³•åŠ é”ï¼Œå¦‚: public synchronized static void xxx()&#123;â€¦.&#125; é‚£ä¹ˆè¯¥æ–¹æ³•é”çš„å¯¹è±¡æ˜¯ç±»å¯¹è±¡ã€‚æ¯ä¸ªç±»éƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªç±»å¯¹è±¡ã€‚è·å–ç±»å¯¹è±¡çš„æ–¹å¼:ç±»å.classã€‚ é™æ€æ–¹æ³•ä¸éé™æ€æ–¹æ³•åŒæ—¶ä½¿ç”¨äº†synchronizedåå®ƒä»¬ä¹‹é—´æ˜¯éäº’æ–¥å…³ç³»çš„ã€‚ åŸå› åœ¨äºï¼šé™æ€æ–¹æ³•é”çš„æ˜¯ç±»å¯¹è±¡è€Œéé™æ€æ–¹æ³•é”çš„æ˜¯å½“å‰æ–¹æ³•æ‰€å±å¯¹è±¡ã€‚ 6.5 æ³¨æ„äº‹é¡¹ ä½¿ç”¨synchronizedä¿è¯çº¿ç¨‹åŒæ­¥åº”å½“æ³¨æ„: å¤šä¸ªéœ€è¦åŒæ­¥çš„çº¿ç¨‹åœ¨è®¿é—®åŒæ­¥å—æ—¶ï¼Œçœ‹åˆ°çš„åº”è¯¥æ˜¯åŒä¸€ä¸ªé”å¯¹è±¡å¼•ç”¨ã€‚ åœ¨ä½¿ç”¨åŒæ­¥å—æ—¶åº”å½“å°½é‡å‡å°‘åŒæ­¥èŒƒå›´ä»¥æé«˜å¹¶å‘çš„æ‰§è¡Œæ•ˆç‡ã€‚ 6.6 çº¿ç¨‹å®‰å…¨ç±»å’Œä¸å®‰å…¨ç±» StringBufferç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œä½†StringBuilderç±»ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»ã€‚ Vectorç±»å’Œ Hashtableç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œä½†ArrayListç±»å’ŒHashMapç±»ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ç±»ã€‚ Collections.synchronizedList() å’Œ Collections.synchronizedMap()ç­‰æ–¹æ³•å®ç°å®‰å…¨ã€‚ 6.7 æ­»é”çš„æ¦‚å¿µ çº¿ç¨‹ä¸€æ‰§è¡Œçš„ä»£ç ï¼š 1234567public void run()&#123; synchronized(a)&#123; //æŒæœ‰å¯¹è±¡é”aï¼Œç­‰å¾…å¯¹è±¡é”b synchronized(b)&#123; ç¼–å†™é”å®šçš„ä»£ç ; &#125; &#125;&#125; çº¿ç¨‹äºŒæ‰§è¡Œçš„ä»£ç ï¼š 1234567public void run()&#123; synchronized(b)&#123; //æŒæœ‰å¯¹è±¡é”bï¼Œç­‰å¾…å¯¹è±¡é”a synchronized(a)&#123; ç¼–å†™é”å®šçš„ä»£ç ; &#125; &#125;&#125; æ³¨æ„ï¼š åœ¨ä»¥åçš„å¼€å‘ä¸­å°½é‡å‡å°‘åŒæ­¥çš„èµ„æºï¼Œå‡å°‘åŒæ­¥ä»£ç å—çš„åµŒå¥—ç»“æ„çš„ä½¿ç”¨ï¼ 6.8 ä½¿ç”¨Lockï¼ˆé”ï¼‰å®ç°çº¿ç¨‹åŒæ­¥ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ ä»Java5å¼€å§‹æä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶â€”ä½¿ç”¨æ˜¾å¼å®šä¹‰çš„åŒæ­¥é”å¯¹è±¡æ¥å®ç°ã€‚ java.util.concurrent.locks.Lockæ¥å£æ˜¯æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·ã€‚ è¯¥æ¥å£çš„ä¸»è¦å®ç°ç±»æ˜¯ReentrantLockç±»ï¼Œè¯¥ç±»æ‹¥æœ‰ä¸synchronizedç›¸åŒçš„å¹¶å‘æ€§ï¼Œåœ¨ä»¥åçš„çº¿ç¨‹ å®‰å…¨æ§åˆ¶ä¸­ï¼Œç»å¸¸ä½¿ç”¨ReentrantLockç±»æ˜¾å¼åŠ é”å’Œé‡Šæ”¾é”ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» ReentrantLock() ä½¿ç”¨æ— å‚æ–¹å¼æ„é€ å¯¹è±¡ void lock() è·å–é” void unlock() é‡Šæ”¾é” ï¼ˆ3ï¼‰ä¸synchronizedæ–¹å¼çš„æ¯”è¾ƒ Lockæ˜¯æ˜¾å¼é”ï¼Œéœ€è¦æ‰‹åŠ¨å®ç°å¼€å¯å’Œå…³é—­æ“ä½œï¼Œè€Œsynchronizedæ˜¯éšå¼é”ï¼Œæ‰§è¡Œé”å®šä»£ç åè‡ªåŠ¨ é‡Šæ”¾ã€‚ Lockåªæœ‰åŒæ­¥ä»£ç å—æ–¹å¼çš„é”ï¼Œè€Œsynchronizedæœ‰åŒæ­¥ä»£ç å—æ–¹å¼å’ŒåŒæ­¥æ–¹æ³•ä¸¤ç§é”ã€‚ ä½¿ç”¨Locké”æ–¹å¼æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œå› æ­¤æ€§èƒ½æ›´å¥½ã€‚ 6.9 Objectç±»å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void wait() ç”¨äºä½¿å¾—çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å…¶å®ƒçº¿ç¨‹è°ƒç”¨notify()æˆ–notifyAll()æ–¹ æ³• void wait(long timeout) ç”¨äºè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å…¶å®ƒçº¿ç¨‹è°ƒç”¨æ–¹æ³•æˆ–å‚æ•°æŒ‡å®šçš„æ¯«ç§’æ•°å·²ç»è¿‡ å»ä¸ºæ­¢ void notify() ç”¨äºå”¤é†’ç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ void notifyAll() ç”¨äºå”¤é†’ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ 6.10 çº¿ç¨‹æ± ï¼ˆç†Ÿæ‚‰ï¼‰ï¼ˆ1ï¼‰å®ç°Callableæ¥å£ ä»Java5å¼€å§‹æ–°å¢åŠ åˆ›å»ºçº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ä¸ºå®ç°java.util.concurrent.Callableæ¥å£ã€‚ å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» V call() è®¡ç®—ç»“æœå¹¶è¿”å› ï¼ˆ2ï¼‰FutureTaskç±» java.util.concurrent.FutureTaskç±»ç”¨äºæè¿°å¯å–æ¶ˆçš„å¼‚æ­¥è®¡ç®—ï¼Œè¯¥ç±»æä¾›äº†Futureæ¥å£çš„åŸºæœ¬å® ç°ï¼ŒåŒ…æ‹¬å¯åŠ¨å’Œå–æ¶ˆè®¡ç®—ã€æŸ¥è¯¢è®¡ç®—æ˜¯å¦å®Œæˆä»¥åŠæ£€ç´¢è®¡ç®—ç»“æœçš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨äºè·å–æ–¹æ³•è°ƒç”¨ åçš„è¿”å›ç»“æœã€‚ å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» FutureTask(Callable callable) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¼•ç”¨æ¥åˆ›å»ºä¸€ä¸ªæœªæ¥ä»»åŠ¡ V get() è·å–callæ–¹æ³•è®¡ç®—çš„ç»“æœ ï¼ˆ3ï¼‰çº¿ç¨‹æ± çš„ç”±æ¥ åœ¨æœåŠ¡å™¨ç¼–ç¨‹æ¨¡å‹çš„åŸç†ï¼Œæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ç”¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸ºä¹‹æœåŠ¡ï¼Œå½“ä¸å®¢æˆ·ç«¯çš„ä¼šè¯ç»“æŸ æ—¶ï¼Œçº¿ç¨‹ä¹Ÿå°±ç»“æŸäº†ï¼Œå³æ¯æ¥ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯å°±è¦åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ã€‚ å¦‚æœè®¿é—®æœåŠ¡å™¨çš„å®¢æˆ·ç«¯å¾ˆå¤šï¼Œé‚£ä¹ˆæœåŠ¡å™¨è¦ä¸æ–­åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œè¿™å°†ä¸¥é‡å½±å“æœåŠ¡å™¨çš„æ€§ èƒ½ ï¼ˆ4ï¼‰æ¦‚å¿µå’ŒåŸç† çº¿ç¨‹æ± çš„æ¦‚å¿µï¼šé¦–å…ˆåˆ›å»ºä¸€äº›çº¿ç¨‹ï¼Œå®ƒä»¬çš„é›†åˆç§°ä¸ºçº¿ç¨‹æ± ï¼Œå½“æœåŠ¡å™¨æ¥å—åˆ°ä¸€ä¸ªå®¢æˆ·è¯·æ±‚åï¼Œå°± ä»çº¿ç¨‹æ± ä¸­å–å‡ºä¸€ä¸ªç©ºé—²çš„çº¿ç¨‹ä¸ºä¹‹æœåŠ¡ï¼ŒæœåŠ¡å®Œåä¸å…³é—­è¯¥çº¿ç¨‹ï¼Œè€Œæ˜¯å°†è¯¥çº¿ç¨‹è¿˜å›åˆ°çº¿ç¨‹æ±  ä¸­ã€‚ åœ¨çº¿ç¨‹æ± çš„ç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œä»»åŠ¡æ˜¯æäº¤ç»™æ•´ä¸ªçº¿ç¨‹æ± ï¼Œè€Œä¸æ˜¯ç›´æ¥äº¤ç»™æŸä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ± åœ¨æ‹¿åˆ°ä»»åŠ¡ åï¼Œå®ƒå°±åœ¨å†…éƒ¨æ‰¾æœ‰æ— ç©ºé—²çš„çº¿ç¨‹ï¼Œå†æŠŠä»»åŠ¡äº¤ç»™å†…éƒ¨æŸä¸ªç©ºé—²çš„çº¿ç¨‹ï¼Œä»»åŠ¡æ˜¯æäº¤ç»™æ•´ä¸ªçº¿ç¨‹ æ± ï¼Œä¸€ä¸ªçº¿ç¨‹åŒæ—¶åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä½†å¯ä»¥åŒæ—¶å‘ä¸€ä¸ªçº¿ç¨‹æ± æäº¤å¤šä¸ªä»»åŠ¡ã€‚ ï¼ˆ5ï¼‰ç›¸å…³ç±»å’Œæ–¹æ³• ä»Java5å¼€å§‹æä¾›äº†çº¿ç¨‹æ± çš„ç›¸å…³ç±»å’Œæ¥å£ï¼šjava.util.concurrent.Executorsç±»å’Œ java.util.concurrent.ExecutorServiceæ¥å£ã€‚ å…¶ä¸­Executorsæ˜¯ä¸ªå·¥å…·ç±»å’Œçº¿ç¨‹æ± çš„å·¥å‚ç±»ï¼Œå¯ä»¥åˆ›å»ºå¹¶è¿”å›ä¸åŒç±»å‹çš„çº¿ç¨‹æ± ï¼Œå¸¸ç”¨æ–¹æ³•å¦‚ ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static ExecutorService newCachedThreadPool() åˆ›å»ºä¸€ä¸ªå¯æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹æ±  static ExecutorService newFixedThreadPool(int nThreads) åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ±  static ExecutorService newSingleThreadExecutor() åˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ±  å…¶ä¸­ExecutorServiceæ¥å£æ˜¯çœŸæ­£çš„çº¿ç¨‹æ± æ¥å£ï¼Œä¸»è¦å®ç°ç±»æ˜¯ThreadPoolExecutorï¼Œå¸¸ç”¨æ–¹æ³• å¦‚ä¸‹ï¼š æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void execute(Runnable command) æ‰§è¡Œä»»åŠ¡å’Œå‘½ä»¤ï¼Œé€šå¸¸ç”¨äºæ‰§è¡ŒRunnable Future submit(Callable task) æ‰§è¡Œä»»åŠ¡å’Œå‘½ä»¤ï¼Œé€šå¸¸ç”¨äºæ‰§è¡ŒCallable void shutdown() å¯åŠ¨æœ‰åºå…³é—­","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"å¼‚å¸¸æœºåˆ¶å’ŒFileç±»","slug":"å¼‚å¸¸æœºåˆ¶å’ŒFileç±»","date":"2019-01-17T11:39:42.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2019/01/17/å¼‚å¸¸æœºåˆ¶å’ŒFileç±»/","link":"","permalink":"http://yournotes.cn/2019/01/17/%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6%E5%92%8CFile%E7%B1%BB/","excerpt":"1. å¼‚å¸¸æœºåˆ¶ï¼ˆé‡ç‚¹ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ å¼‚å¸¸å°±æ˜¯â€ä¸æ­£å¸¸â€çš„å«ä¹‰ï¼Œåœ¨Javaè¯­è¨€ä¸­ä¸»è¦æŒ‡ç¨‹åºæ‰§è¡Œä¸­å‘ç”Ÿçš„ä¸æ­£å¸¸æƒ…å†µã€‚","text":"1. å¼‚å¸¸æœºåˆ¶ï¼ˆé‡ç‚¹ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ å¼‚å¸¸å°±æ˜¯â€ä¸æ­£å¸¸â€çš„å«ä¹‰ï¼Œåœ¨Javaè¯­è¨€ä¸­ä¸»è¦æŒ‡ç¨‹åºæ‰§è¡Œä¸­å‘ç”Ÿçš„ä¸æ­£å¸¸æƒ…å†µã€‚ java.lang.Throwableç±»æ˜¯Javaè¯­è¨€ä¸­é”™è¯¯(Error)å’Œå¼‚å¸¸(Exception)çš„è¶…ç±»ã€‚ å…¶ä¸­Errorç±»ä¸»è¦ç”¨äºæè¿°Javaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é”™è¯¯ï¼Œé€šå¸¸æ— æ³•ç¼–ç è§£å†³ï¼Œå¦‚ï¼šJVMæŒ‚æ‰äº† ç­‰ã€‚ å…¶ä¸­Exceptionç±»ä¸»è¦ç”¨äºæè¿°å› ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶å¤–åœ¨å› ç´ å¯¼è‡´çš„è½»å¾®é”™è¯¯ï¼Œé€šå¸¸å¯ä»¥ç¼–ç è§£å†³ï¼Œ å¦‚ï¼š0ä½œä¸ºé™¤æ•°ç­‰ã€‚ 1.2 å¼‚å¸¸çš„åˆ†ç±» java.lang.Exceptionç±»æ˜¯æ‰€æœ‰å¼‚å¸¸çš„è¶…ç±»ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š RuntimeException - è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä¹Ÿå«ä½œéæ£€æµ‹æ€§å¼‚å¸¸ IOExceptionå’Œå…¶å®ƒå¼‚å¸¸ - å…¶å®ƒå¼‚å¸¸ï¼Œä¹Ÿå«ä½œæ£€æµ‹æ€§å¼‚å¸¸ï¼Œæ‰€è°“æ£€æµ‹æ€§å¼‚å¸¸å°±æ˜¯æŒ‡åœ¨ç¼–è¯‘é˜¶æ®µéƒ½èƒ½ è¢«ç¼–è¯‘å™¨æ£€æµ‹å‡ºæ¥çš„å¼‚å¸¸ã€‚ å…¶ä¸­RuntimeExceptionç±»çš„ä¸»è¦å­ç±»ï¼š ArithmeticExceptionç±» - ç®—æœ¯å¼‚å¸¸ ArrayIndexOutOfBoundsExceptionç±» - æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸ NullPointerException - ç©ºæŒ‡é’ˆå¼‚å¸¸ ClassCastException - ç±»å‹è½¬æ¢å¼‚å¸¸ NumberFormatException - æ•°å­—æ ¼å¼å¼‚å¸¸ æ³¨æ„ï¼š å½“ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ä½†åˆæ²¡æœ‰æ‰‹åŠ¨å¤„ç†æ—¶ï¼Œåˆ™ç”±Javaè™šæ‹Ÿæœºé‡‡ç”¨é»˜è®¤æ–¹å¼å¤„ç†å¼‚å¸¸ï¼Œè€Œé»˜è®¤ å¤„ç†æ–¹å¼å°±æ˜¯ï¼šæ‰“å°å¼‚å¸¸çš„åç§°ã€å¼‚å¸¸å‘ç”Ÿçš„åŸå› ã€å¼‚å¸¸å‘ç”Ÿçš„ä½ç½®ä»¥åŠç»ˆæ­¢ç¨‹åºã€‚ 1.3 å¼‚å¸¸çš„é¿å… åœ¨ä»¥åçš„å¼€å‘ä¸­å°½é‡ä½¿ç”¨ifæ¡ä»¶åˆ¤æ–­æ¥é¿å…å¼‚å¸¸çš„å‘ç”Ÿã€‚ ä½†æ˜¯è¿‡å¤šçš„ifæ¡ä»¶åˆ¤æ–­ä¼šå¯¼è‡´ç¨‹åºçš„ä»£ç åŠ é•¿ã€è‡ƒè‚¿ï¼Œå¯è¯»æ€§å·®ã€‚ 1.4 å¼‚å¸¸çš„æ•è· è¯­æ³•æ ¼å¼ 12345678910try &#123; ç¼–å†™å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç ;&#125;catch(å¼‚å¸¸ç±»å‹ å¼•ç”¨å˜é‡å) &#123; ç¼–å†™é’ˆå¯¹è¯¥ç±»å¼‚å¸¸çš„å¤„ç†ä»£ç ï¼›&#125;...finally &#123; ç¼–å†™æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½è¦æ‰§è¡Œçš„ä»£ç ï¼›&#125; æ³¨æ„äº‹é¡¹ å½“éœ€è¦ç¼–å†™å¤šä¸ªcatchåˆ†æ”¯æ—¶ï¼Œåˆ‡è®°å°ç±»å‹åº”è¯¥æ”¾åœ¨å¤§ç±»å‹çš„å‰é¢ æ‡’äººçš„å†™æ³•ï¼š catch(Exception e) {} finallyé€šå¸¸ç”¨äºè¿›è¡Œå–„åå¤„ç†ï¼Œå¦‚ï¼šå…³é—­å·²ç»æ‰“å¼€çš„æ–‡ä»¶ç­‰ã€‚ æ‰§è¡Œæµç¨‹ 123456789try &#123; a; b; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„è¯­å¥ c;&#125;catch(Exception ex) &#123; d;&#125;finally &#123; e;&#125; å½“æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸æ—¶çš„æ‰§è¡Œæµç¨‹ï¼ša b c e å½“å‘ç”Ÿå¼‚å¸¸æ—¶çš„æ‰§è¡Œæµç¨‹ï¼ša b d e 1.5 å¼‚å¸¸çš„æŠ›å‡º åŸºæœ¬æ¦‚å¿µ åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹æœ‰äº›å¼‚å¸¸ä¸èƒ½å¤„ç†æˆ–è€…ä¸ä¾¿äºå¤„ç†æ—¶ï¼Œå°±å¯ä»¥å°†è¯¥å¼‚å¸¸è½¬ç§»ç»™è¯¥æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œ è¿™ç§æ–¹æ³•å°±å«å¼‚å¸¸çš„æŠ›å‡ºã€‚å½“æ–¹æ³•æ‰§è¡Œæ—¶å‡ºç°å¼‚å¸¸ï¼Œåˆ™åº•å±‚ç”Ÿæˆä¸€ä¸ªå¼‚å¸¸ç±»å¯¹è±¡æŠ›å‡ºï¼Œæ­¤æ—¶å¼‚å¸¸ä»£ ç åç»­çš„ä»£ç å°±ä¸å†æ‰§è¡Œã€‚ è¯­æ³•æ ¼å¼ è®¿é—®æƒé™ è¿”å›å€¼ç±»å‹ æ–¹æ³•åç§°(å½¢å‚åˆ—è¡¨) throws å¼‚å¸¸ç±»å‹1,å¼‚å¸¸ç±»å‹2,â€¦{ æ–¹æ³•ä½“; } å¦‚ï¼š public void show() throws IOException&#123;&#125; æ–¹æ³•é‡å†™çš„åŸåˆ™ è¦æ±‚æ–¹æ³•åç›¸åŒã€å‚æ•°åˆ—è¡¨ç›¸åŒä»¥åŠè¿”å›å€¼ç±»å‹ç›¸åŒï¼Œä»jdk1.5å¼€å§‹æ”¯æŒè¿”å›å­ç±»ç±»å‹ è¦æ±‚æ–¹æ³•çš„è®¿é—®æƒé™ä¸èƒ½å˜å°ï¼Œå¯ä»¥ç›¸åŒæˆ–è€…å˜å¤§ è¦æ±‚æ–¹æ³•ä¸èƒ½æŠ›å‡ºæ›´å¤§çš„å¼‚å¸¸ï¼› æ³¨æ„ï¼š å­ç±»é‡å†™çš„æ–¹æ³•ä¸èƒ½æŠ›å‡ºæ›´å¤§çš„å¼‚å¸¸ã€ä¸èƒ½æŠ›å‡ºå¹³çº§ä¸ä¸€æ ·çš„å¼‚å¸¸ï¼Œä½†å¯ä»¥æŠ›å‡ºä¸€æ ·çš„å¼‚å¸¸ã€æ›´å° çš„å¼‚å¸¸ä»¥åŠä¸æŠ›å‡ºå¼‚å¸¸ã€‚ ç»éªŒåˆ†äº« è‹¥çˆ¶ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œåˆ™å­ç±»ä¸­é‡å†™çš„æ–¹æ³•åªèƒ½è¿›è¡Œå¼‚å¸¸çš„æ•è·å¤„ç†ã€‚ è‹¥ä¸€ä¸ªæ–¹æ³•å†…éƒ¨åˆä»¥é€’è¿›æ–¹å¼åˆ†åˆ«è°ƒç”¨äº†å¥½å‡ ä¸ªå…¶å®ƒæ–¹æ³•ï¼Œåˆ™å»ºè®®è¿™äº›æ–¹æ³•å†…å¯ä»¥ä½¿ç”¨æŠ›å‡º çš„æ–¹æ³•å¤„ç†åˆ°æœ€åä¸€å±‚è¿›è¡Œæ•è·æ–¹å¼å¤„ç†ã€‚ 1.6 è‡ªå®šä¹‰å¼‚å¸¸ åŸºæœ¬æ¦‚å¿µ å½“éœ€è¦åœ¨ç¨‹åºä¸­è¡¨è¾¾å¹´é¾„ä¸åˆç†çš„æƒ…å†µæ—¶ï¼Œè€ŒJavaå®˜æ–¹åˆæ²¡æœ‰æä¾›è¿™ç§é’ˆå¯¹æ€§çš„å¼‚å¸¸ï¼Œæ­¤æ—¶å°±éœ€è¦ ç¨‹åºå‘˜è‡ªå®šä¹‰å¼‚å¸¸åŠ ä»¥æè¿°ã€‚ å®ç°æµç¨‹ è‡ªå®šä¹‰xxxExceptionå¼‚å¸¸ç±»ç»§æ‰¿Exceptionç±»æˆ–è€…å…¶å­ç±»ã€‚ æä¾›ä¸¤ä¸ªç‰ˆæœ¬çš„æ„é€ æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯æ— å‚æ„é€ æ–¹æ³•ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°çš„æ„é€ æ–¹æ³•ã€‚ å¼‚å¸¸çš„äº§ç”Ÿ throw new å¼‚å¸¸ç±»å‹(å®å‚); å¦‚ï¼š throw new AgeException(&quot;å¹´é¾„ä¸åˆç†ï¼ï¼ï¼&quot;); Javaé‡‡ç”¨çš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ˜¯å°†å¼‚å¸¸å¤„ç†çš„ç¨‹åºä»£ç é›†ä¸­åœ¨ä¸€èµ·ï¼Œä¸æ­£å¸¸çš„ç¨‹åºä»£ç åˆ†å¼€ï¼Œä½¿å¾—ç¨‹åº ç®€æ´ã€ä¼˜é›…ï¼Œå¹¶æ˜“äºç»´æŠ¤ã€‚ 2 Fileç±»ï¼ˆé‡ç‚¹ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ java.io.Fileç±»ä¸»è¦ç”¨äºæè¿°æ–‡ä»¶æˆ–ç›®å½•è·¯å¾„çš„æŠ½è±¡è¡¨ç¤ºä¿¡æ¯ï¼Œå¯ä»¥è·å–æ–‡ä»¶æˆ–ç›®å½•çš„ç‰¹å¾ä¿¡æ¯ï¼Œ å¦‚ï¼šå¤§å°ç­‰ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½æ¦‚è¿° File(String pathname) æ ¹æ®å‚æ•°æŒ‡å®šçš„è·¯å¾„åæ¥æ„é€ å¯¹è±¡ File(String parent, String child) æ ¹æ®å‚æ•°æŒ‡å®šçš„çˆ¶è·¯å¾„å’Œå­è·¯å¾„ä¿¡æ¯æ„é€ å¯¹è±¡ File(File parent, String child) æ ¹æ®å‚æ•°æŒ‡å®šçš„çˆ¶æŠ½è±¡è·¯å¾„å’Œå­è·¯å¾„ä¿¡æ¯æ„é€ å¯¹è±¡ boolean exists() æµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ String getName() ç”¨äºè·å–æ–‡ä»¶çš„åç§° long length() è¿”å›ç”±æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶çš„é•¿åº¦ long lastModified() ç”¨äºè·å–æ–‡ä»¶çš„æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ String getAbsolutePath() ç”¨äºè·å–ç»å¯¹è·¯å¾„ä¿¡æ¯ boolean delete() ç”¨äºåˆ é™¤æ–‡ä»¶ï¼Œå½“åˆ é™¤ç›®å½•æ—¶è¦æ±‚æ˜¯ç©ºç›®å½• boolean createNewFile() ç”¨äºåˆ›å»ºæ–°çš„ç©ºæ–‡ä»¶ boolean mkdir() ç”¨äºåˆ›å»ºç›®å½• boolean mkdirs() ç”¨äºåˆ›å»ºå¤šçº§ç›®å½• File[] listFiles() è·å–è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ boolean isFile() åˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶ boolean isDirectory() åˆ¤æ–­æ˜¯å¦ä¸ºç›®å½• File[] listFiles(FileFilter filter) è·å–ç›®å½•ä¸‹æ»¡è¶³ç­›é€‰å™¨çš„æ‰€æœ‰å†…å®¹ æ¡ˆä¾‹é¢˜ç›® : éå†æŒ‡å®šç›®å½•ä»¥åŠå­ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹å¹¶æ‰“å°å‡ºæ¥ã€‚","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"å¸¸ç”¨è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼","slug":"å¸¸ç”¨è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼","date":"2019-01-17T11:02:50.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2019/01/17/å¸¸ç”¨è®¾è®¡åŸåˆ™å’Œè®¾è®¡æ¨¡å¼/","link":"","permalink":"http://yournotes.cn/2019/01/17/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"1. å¸¸ç”¨çš„è®¾è®¡åŸåˆ™ï¼ˆè®°ä½ï¼‰1.1 è½¯ä»¶å¼€å‘çš„æµç¨‹ éœ€æ±‚åˆ†ææ–‡æ¡£ã€æ¦‚è¦è®¾è®¡æ–‡æ¡£ã€è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€ç¼–ç å’Œæµ‹è¯•ã€å®‰è£…å’Œè°ƒè¯•ã€ç»´æŠ¤å’Œå‡çº§","text":"1. å¸¸ç”¨çš„è®¾è®¡åŸåˆ™ï¼ˆè®°ä½ï¼‰1.1 è½¯ä»¶å¼€å‘çš„æµç¨‹ éœ€æ±‚åˆ†ææ–‡æ¡£ã€æ¦‚è¦è®¾è®¡æ–‡æ¡£ã€è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€ç¼–ç å’Œæµ‹è¯•ã€å®‰è£…å’Œè°ƒè¯•ã€ç»´æŠ¤å’Œå‡çº§ 1.2 å¸¸ç”¨çš„è®¾è®¡åŸåˆ™ å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰ å¯¹æ‰©å±•å¼€æ”¾å¯¹ä¿®æ”¹å…³é—­ï¼Œä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ ä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ï¼Œå¤šä½¿ç”¨å¤šæ€çš„æ–¹å¼ã€‚ ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ å°½é‡å¤šä¾èµ–äºæŠ½è±¡ç±»æˆ–æ¥å£è€Œä¸æ˜¯å…·ä½“å®ç°ç±»ï¼Œå¯¹å­ç±»å…·æœ‰å¼ºåˆ¶æ€§å’Œè§„èŒƒæ€§ æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ å°½é‡å¤šä½¿ç”¨å°æ¥å£è€Œä¸æ˜¯å¤§æ¥å£ï¼Œé¿å…æ¥å£çš„æ±¡æŸ“ï¼Œé™ä½ç±»ä¹‹é—´è€¦åˆåº¦ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰ ä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ é«˜å†…èšï¼Œä½è€¦åˆã€‚ åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰ å°½é‡å¤šä½¿ç”¨åˆæˆ&#x2F;èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ç»§æ‰¿çš„æ–¹å¼ã€‚ 2. å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼2.1 åŸºæœ¬æ¦‚å¿µ è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒ çš„æ€»ç»“ã€‚ è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ç§ç”¨äºå›ºå®šåœºåˆçš„å›ºå®šå¥—è·¯ã€‚ 2.2 åŸºæœ¬åˆ†ç±» åˆ›å»ºå‹æ¨¡å¼ - å•ä¾‹è®¾è®¡æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€â€¦ ç»“æ„å‹æ¨¡å¼ - è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€â€¦ è¡Œä¸ºå‹æ¨¡å¼ - æ¨¡æ¿è®¾è®¡æ¨¡å¼ã€â€¦ 3 è®¾è®¡æ¨¡å¼è¯¦è§£ï¼ˆé‡ç‚¹ï¼‰3.1 å•ä¾‹è®¾è®¡æ¨¡å¼ å•ä¾‹è®¾è®¡æ¨¡å¼ä¸»è¦åˆ†ä¸ºï¼šé¥¿æ±‰å¼ å’Œ æ‡’æ±‰å¼ï¼Œæ‡’æ±‰å¼éœ€è¦å¯¹å¤šçº¿ç¨‹è¿›è¡ŒåŒæ­¥å¤„ç†ã€‚ 3.2 æ™®é€šå·¥å‚æ¨¡å¼ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼å°±æ˜¯å»ºç«‹ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯¹å®ç°äº†åŒä¸€æ¥å£çš„ä¸åŒå®ç°ç±»è¿›è¡Œå®ä¾‹çš„åˆ›å»ºã€‚ ï¼ˆ2ï¼‰ç±»å›¾ç»“æ„ ï¼ˆ3ï¼‰ä¸»è¦ç¼ºç‚¹ åœ¨æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²å‡ºé”™ï¼Œåˆ™ä¸èƒ½æ­£ç¡®åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”å¯èƒ½å‡ºç°ç©ºæŒ‡é’ˆå¼‚ å¸¸ã€‚ 3.3 å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆ1ï¼‰ç±»å›¾ç»“æ„ ï¼ˆ2ï¼‰ä¸»è¦ç¼ºç‚¹ åœ¨å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œä¸ºäº†èƒ½å¤Ÿæ­£ç¡®åˆ›å»ºå¯¹è±¡ï¼Œå…ˆéœ€è¦åˆ›å»ºå·¥å‚ç±»çš„å¯¹è±¡æ‰èƒ½è°ƒç”¨å·¥å‚ç±»ä¸­çš„ç”Ÿ äº§æ–¹æ³•ã€‚ 3.4 é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆ1ï¼‰ç±»å›¾ç»“æ„ ï¼ˆ2ï¼‰å®é™…æ„ä¹‰ å·¥å‚æ–¹æ³•æ¨¡å¼é€‚åˆï¼šå‡¡æ˜¯å‡ºç°äº†å¤§é‡çš„äº§å“éœ€è¦åˆ›å»ºä¸”å…·æœ‰å…±åŒçš„æ¥å£æ—¶ï¼Œå¯ä»¥é€šè¿‡å·¥å‚æ–¹æ³•æ¨¡å¼ è¿›è¡Œåˆ›å»ºã€‚ ï¼ˆ3ï¼‰ä¸»è¦ç¼ºç‚¹ å·¥å‚æ–¹æ³•æ¨¡å¼æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç±»çš„åˆ›å»ºä¾èµ–å·¥å‚ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¦æ‹“å±•ç¨‹åºç”Ÿäº§æ–°çš„äº§ å“ï¼Œå°±å¿…é¡»å¯¹å·¥å‚ç±»çš„ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œè¿™å°±è¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚ 3.5 æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆ1ï¼‰ç±»å›¾ç»“æ„ 3.6 è£…é¥°å™¨æ¨¡å¼ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ è£…é¥°å™¨æ¨¡å¼å°±æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡åŠ¨æ€çš„å¢åŠ ä¸€äº›æ–°åŠŸèƒ½ï¼Œè¦æ±‚è£…é¥°å¯¹è±¡å’Œè¢«è£…é¥°å¯¹è±¡å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œ è£…é¥°å¯¹è±¡æŒæœ‰è¢«è£…é¥°å¯¹è±¡çš„å®ä¾‹ã€‚ ï¼ˆ2ï¼‰ç±»å›¾ç»“æ„ ï¼ˆ3ï¼‰å®é™…æ„ä¹‰ å¯ä»¥å®ç°ä¸€ä¸ªç±»åŠŸèƒ½çš„æ‰©å±•ã€‚ å¯ä»¥åŠ¨æ€çš„å¢åŠ åŠŸèƒ½ï¼Œè€Œä¸”è¿˜èƒ½åŠ¨æ€æ’¤é”€ï¼ˆç»§æ‰¿ä¸è¡Œï¼‰ã€‚ ç¼ºç‚¹ï¼šäº§ç”Ÿè¿‡å¤šç›¸ä¼¼çš„å¯¹è±¡ï¼Œä¸æ˜“æ’é”™ã€‚ 3.7 ä»£ç†æ¨¡å¼ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ ä»£ç†æ¨¡å¼å°±æ˜¯æ‰¾ä¸€ä¸ªä»£ç†ç±»æ›¿åŸå¯¹è±¡è¿›è¡Œä¸€äº›æ“ä½œã€‚ æ¯”å¦‚æˆ‘ä»¬åœ¨ç§Ÿæˆ¿å­çš„æ—¶å€™æ‰¾ä¸­ä»‹ï¼Œå†å¦‚æˆ‘ä»¬æ‰“å®˜å¸éœ€è¦è¯·å¾‹å¸ˆï¼Œä¸­ä»‹å’Œå¾‹å¸ˆåœ¨è¿™é‡Œå°±æ˜¯æˆ‘ä»¬çš„ä»£ ç†ã€‚ ï¼ˆ2ï¼‰ç±»å›¾ç»“æ„ ï¼ˆ3ï¼‰å®é™…æ„ä¹‰ å¦‚æœåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å¯¹åŸæœ‰çš„æ–¹æ³•è¿›è¡Œæ”¹è¿›ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸ªä»£ç†ç±»è°ƒç”¨åŸæœ‰æ–¹æ³•ï¼Œå¹¶ä¸”å¯¹äº§ç”Ÿçš„ ç»“æœè¿›è¡Œæ§åˆ¶ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚ ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œå¯ä»¥å°†åŠŸèƒ½åˆ’åˆ†çš„æ›´åŠ æ¸…æ™°ï¼Œæœ‰åŠ©äºåæœŸç»´æŠ¤ ï¼ˆ4ï¼‰ä»£ç†æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼çš„æ¯”è¾ƒ è£…é¥°å™¨æ¨¡å¼é€šå¸¸çš„åšæ³•æ˜¯å°†åŸå§‹å¯¹è±¡ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ ç»™è£…é¥°è€…çš„æ„é€ å™¨ï¼Œè€Œä»£ç†æ¨¡å¼é€šå¸¸åœ¨ä¸€ä¸ªä»£ ç†ç±»ä¸­åˆ›å»ºä¸€ä¸ªè¢«ä»£ç†ç±»çš„å¯¹è±¡ã€‚ è£…é¥°å™¨æ¨¡å¼å…³æ³¨äºåœ¨ä¸€ä¸ªå¯¹è±¡ä¸ŠåŠ¨æ€çš„æ·»åŠ æ–¹æ³•ï¼Œç„¶è€Œä»£ç†æ¨¡å¼å…³æ³¨äºæ§åˆ¶å¯¹å¯¹è±¡çš„è®¿é—®ã€‚ 3.8 æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸»è¦æŒ‡ä¸€ä¸ªæŠ½è±¡ç±»ä¸­å°è£…äº†ä¸€ä¸ªå›ºå®šæµç¨‹ï¼Œæµç¨‹ä¸­çš„å…·ä½“æ­¥éª¤å¯ä»¥ç”±ä¸åŒå­ç±»è¿›è¡Œä¸ åŒçš„å®ç°ï¼Œé€šè¿‡æŠ½è±¡ç±»è®©å›ºå®šçš„æµç¨‹äº§ç”Ÿä¸åŒçš„ç»“æœã€‚ ï¼ˆ2ï¼‰ç±»å›¾ç»“æ„ ï¼ˆ3ï¼‰å®é™…æ„ä¹‰ å°†å¤šä¸ªå­ç±»å…±æœ‰ä¸”é€»è¾‘åŸºæœ¬ç›¸åŒçš„å†…å®¹æå–å‡ºæ¥å®ç°ä»£ç å¤ç”¨ã€‚ ä¸åŒçš„å­ç±»å®ç°ä¸åŒçš„æ•ˆæœå½¢æˆå¤šæ€ï¼Œæœ‰åŠ©äºåæœŸç»´æŠ¤ã€‚","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"é›†åˆç±»åº“ï¼ˆä¸‹ï¼‰","slug":"é›†åˆç±»åº“ï¼ˆä¸‹ï¼‰","date":"2019-01-16T11:36:20.000Z","updated":"2025-04-17T08:34:52.025Z","comments":true,"path":"2019/01/16/é›†åˆç±»åº“ï¼ˆä¸‹ï¼‰/","link":"","permalink":"http://yournotes.cn/2019/01/16/%E9%9B%86%E5%90%88%E7%B1%BB%E5%BA%93%EF%BC%88%E4%B8%8B%EF%BC%89/","excerpt":"1. æ³›å‹æœºåˆ¶ï¼ˆç†Ÿæ‚‰ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ é€šå¸¸æƒ…å†µä¸‹é›†åˆä¸­å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæ˜¯å› ä¸ºå°†æ‰€æœ‰å¯¹è±¡éƒ½çœ‹åšObjectç±»å‹æ”¾å…¥çš„","text":"1. æ³›å‹æœºåˆ¶ï¼ˆç†Ÿæ‚‰ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ é€šå¸¸æƒ…å†µä¸‹é›†åˆä¸­å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œæ˜¯å› ä¸ºå°†æ‰€æœ‰å¯¹è±¡éƒ½çœ‹åšObjectç±»å‹æ”¾å…¥çš„ï¼Œå› æ­¤ ä»é›†åˆä¸­å–å‡ºå…ƒç´ æ—¶ä¹Ÿæ˜¯Objectç±»å‹ï¼Œä¸ºäº†è¡¨è¾¾è¯¥å…ƒç´ çœŸå®çš„æ•°æ®ç±»å‹ï¼Œåˆ™éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œ è€Œå¼ºåˆ¶ç±»å‹è½¬æ¢å¯èƒ½ä¼šå¼•å‘ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚ ä¸ºäº†é¿å…ä¸Šè¿°é”™è¯¯çš„å‘ç”Ÿï¼Œä»Java5å¼€å§‹å¢åŠ æ³›å‹æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯åœ¨é›†åˆåç§°çš„å³ä¾§ä½¿ç”¨&lt;æ•°æ®ç±»å‹&gt; çš„æ–¹å¼æ¥æ˜ç¡®è¦æ±‚è¯¥é›†åˆä¸­å¯ä»¥å­˜æ”¾çš„å…ƒç´ ç±»å‹ï¼Œè‹¥æ”¾å…¥å…¶å®ƒç±»å‹çš„å…ƒç´ åˆ™ç¼–è¯‘æŠ¥é”™ã€‚ æ³›å‹åªåœ¨ç¼–è¯‘æ—¶æœŸæœ‰æ•ˆï¼Œåœ¨è¿è¡Œæ—¶æœŸä¸åŒºåˆ†æ˜¯ä»€ä¹ˆç±»å‹ã€‚ 1.2 åº•å±‚åŸç† æ³›å‹çš„æœ¬è´¨å°±æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è®©æ•°æ®ç±»å‹ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå…¶ä¸­Eç›¸å½“äºå½¢å¼å‚æ•°è´Ÿè´£å ä½ï¼Œ è€Œä½¿ç”¨é›†åˆæ—¶&lt;&gt;ä¸­çš„æ•°æ®ç±»å‹ç›¸å½“äºå®é™…å‚æ•°ï¼Œç”¨äºç»™å½¢å¼å‚æ•°Eè¿›è¡Œåˆå§‹åŒ–ï¼Œä»è€Œä½¿å¾—é›†åˆä¸­æ‰€ æœ‰çš„Eè¢«å®é™…å‚æ•°æ›¿æ¢ï¼Œç”±äºå®é™…å‚æ•°å¯ä»¥ä¼ é€’å„ç§å„æ ·å¹¿æ³›çš„æ•°æ®ç±»å‹ï¼Œå› æ­¤å¾—åä¸ºæ³›å‹ã€‚ å¦‚ï¼š 12345678910111213141516171819//å…¶ä¸­iå«åšå½¢å¼å‚æ•°ï¼Œè´Ÿè´£å ä½//int i = 10;//int i = 20;public static void show(int i) &#123; ... &#125;//å…¶ä¸­10æˆ–20å«åšå®é™…å‚æ•°ï¼Œè´Ÿè´£ç»™å½¢å¼å‚æ•°åˆå§‹åŒ–show(10);show(20);//å…¶ä¸­Eå«åšå½¢å¼å‚æ•°ï¼Œè´Ÿè´£å ä½//E = String; //E = Integer; public interface List &#123; ... &#125; //å…¶ä¸­Stringæˆ–è€…Integerå«åšå®é™…å‚æ•°List lt1 = ...; List lt2 = ...; 1.3 è‡ªå®šä¹‰æ³›å‹æ¥å£ æ³›å‹æ¥å£å’Œæ™®é€šæ¥å£çš„åŒºåˆ«å°±æ˜¯åé¢æ·»åŠ äº†ç±»å‹å‚æ•°åˆ—è¡¨ï¼Œå¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œå¦‚ï¼š ç­‰ã€‚ 1.4 è‡ªå®šä¹‰æ³›å‹ç±» æ³›å‹ç±»å’Œæ™®é€šç±»çš„åŒºåˆ«å°±æ˜¯ç±»ååé¢æ·»åŠ äº†ç±»å‹å‚æ•°åˆ—è¡¨ï¼Œå¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ï¼Œå¦‚ï¼š ç­‰ã€‚ å®ä¾‹åŒ–æ³›å‹ç±»æ—¶åº”è¯¥æŒ‡å®šå…·ä½“çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”æ˜¯å¼•ç”¨æ•°æ®ç±»å‹è€Œä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚ çˆ¶ç±»æœ‰æ³›å‹ï¼Œå­ç±»å¯ä»¥é€‰æ‹©ä¿ç•™æ³›å‹ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šæ³›å‹ç±»å‹ã€‚ å­ç±»å¿…é¡»æ˜¯â€œå¯ŒäºŒä»£â€ï¼Œå­ç±»é™¤äº†æŒ‡å®šæˆ–ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼Œè¿˜å¯ä»¥å¢åŠ è‡ªå·±çš„æ³›å‹ã€‚ 1.5 è‡ªå®šä¹‰æ³›å‹æ–¹æ³• æ³›å‹æ–¹æ³•å°±æ˜¯æˆ‘ä»¬è¾“å…¥å‚æ•°çš„æ—¶å€™ï¼Œè¾“å…¥çš„æ˜¯æ³›å‹å‚æ•°ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å‚æ•°ã€‚æˆ‘ä»¬åœ¨è°ƒç”¨è¿™ä¸ªæ³›å‹ æ–¹æ³•çš„æ—¶éœ€è¦å¯¹æ³›å‹å‚æ•°è¿›è¡Œå®ä¾‹åŒ–ã€‚ æ³›å‹æ–¹æ³•çš„æ ¼å¼ï¼š [è®¿é—®æƒé™] &lt;æ³›å‹&gt; è¿”å›å€¼ç±»å‹ æ–¹æ³•å([æ³›å‹æ ‡è¯† å‚æ•°åç§°]) { æ–¹æ³•ä½“; } åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹å‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦æˆ‘ä»¬æŠŠé™æ€æ–¹æ³•å®šä¹‰ä¸ºæ³›å‹æ–¹æ³•ã€‚ 1.6 æ³›å‹åœ¨ç»§æ‰¿ä¸Šçš„ä½“ç° å¦‚æœBæ˜¯Açš„ä¸€ä¸ªå­ç±»æˆ–å­æ¥å£ï¼Œè€ŒGæ˜¯å…·æœ‰æ³›å‹å£°æ˜çš„ç±»æˆ–æ¥å£ï¼Œåˆ™Gå¹¶ä¸æ˜¯Gçš„å­ç±»å‹ï¼ æ¯”å¦‚ï¼šStringæ˜¯Objectçš„å­ç±»ï¼Œä½†æ˜¯Listå¹¶ä¸æ˜¯Listçš„å­ç±»ã€‚ 1.7 é€šé…ç¬¦çš„ä½¿ç”¨ æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¼ å…¥çš„ç±»å‹åœ¨ä¸€ä¸ªæŒ‡å®šçš„èŒƒå›´å†…ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨æ³›å‹é€šé…ç¬¦äº†ã€‚ å¦‚ï¼šä¹‹å‰ä¼ å…¥çš„ç±»å‹è¦æ±‚ä¸ºIntegerç±»å‹ï¼Œä½†æ˜¯åæ¥ä¸šåŠ¡éœ€è¦Integerçš„çˆ¶ç±»Numberç±»ä¹Ÿå¯ä»¥ä¼  å…¥ã€‚ æ³›å‹ä¸­æœ‰ä¸‰ç§é€šé…ç¬¦å½¢å¼ï¼š æ— é™åˆ¶é€šé…ç¬¦ï¼šè¡¨ç¤ºæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä»»æ„ç±»å‹çš„å‚æ•°ã€‚ è¡¨ç¤ºç±»å‹çš„ä¸Šç•Œæ˜¯Eï¼Œåªèƒ½æ˜¯Eæˆ–è€…æ˜¯Eçš„å­ç±»ã€‚ è¡¨ç¤ºç±»å‹çš„ä¸‹ç•Œæ˜¯Eï¼Œåªèƒ½æ˜¯Eæˆ–è€…æ˜¯Eçš„çˆ¶ç±»ã€‚ 2. Seté›†åˆï¼ˆç†Ÿæ‚‰ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ java.util.Seté›†åˆæ˜¯Collectioné›†åˆçš„å­é›†åˆï¼Œä¸Listé›†åˆå¹³çº§ã€‚ è¯¥é›†åˆä¸­å…ƒç´ æ²¡æœ‰å…ˆåæ”¾å…¥æ¬¡åºï¼Œä¸”ä¸å…è®¸é‡å¤ã€‚ è¯¥é›†åˆçš„ä¸»è¦å®ç°ç±»æ˜¯ï¼šHashSetç±» å’Œ TreeSetç±»ä»¥åŠLinkedHashSetç±»ã€‚ å…¶ä¸­HashSetç±»çš„åº•å±‚æ˜¯é‡‡ç”¨å“ˆå¸Œè¡¨è¿›è¡Œæ•°æ®ç®¡ç†çš„ã€‚ å…¶ä¸­TreeSetç±»çš„åº•å±‚æ˜¯é‡‡ç”¨çº¢é»‘æ ‘è¿›è¡Œæ•°æ®ç®¡ç†çš„ã€‚ å…¶ä¸­LinkedHashSetç±»ä¸HashSetç±»çš„ä¸åŒä¹‹å¤„åœ¨äºå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œé“¾è¡¨ä¸­è®°å½•äº†å…ƒ ç´ çš„è¿­ä»£é¡ºåºï¼Œä¹Ÿå°±æ˜¯å…ƒç´ æ’å…¥é›†åˆä¸­çš„å…ˆåé¡ºåºï¼Œå› æ­¤ä¾¿äºè¿­ä»£ã€‚ 2.2 å¸¸ç”¨çš„æ–¹æ³• å‚è€ƒCollectioné›†åˆä¸­çš„æ–¹æ³•å³å¯ï¼ æ¡ˆä¾‹é¢˜ç›® å‡†å¤‡ä¸€ä¸ªSeté›†åˆæŒ‡å‘HashSetå¯¹è±¡ï¼Œå‘è¯¥é›†åˆä¸­æ·»åŠ å…ƒç´ â€twoâ€å¹¶æ‰“å°ï¼Œå†å‘é›†åˆä¸­æ·»åŠ å…ƒ ç´ â€oneâ€å¹¶æ‰“å°ï¼Œå†å‘é›†åˆä¸­æ·»åŠ å…ƒç´ â€threeâ€å¹¶æ‰“å°ï¼Œå†å‘é›†åˆä¸­æ·»åŠ â€oneâ€å¹¶æ‰“å°ã€‚ 2.3 å…ƒç´ æ”¾å…¥HashSeté›†åˆçš„åŸç† ä½¿ç”¨å…ƒç´ è°ƒç”¨hashCodeæ–¹æ³•è·å–å¯¹åº”çš„å“ˆå¸Œç å€¼ï¼Œå†ç”±æŸç§å“ˆå¸Œç®—æ³•è®¡ç®—å‡ºè¯¥å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢ å¼•ä½ç½®ã€‚ è‹¥è¯¥ä½ç½®æ²¡æœ‰å…ƒç´ ï¼Œåˆ™å°†è¯¥å…ƒç´ ç›´æ¥æ”¾å…¥å³å¯ã€‚ è‹¥è¯¥ä½ç½®æœ‰å…ƒç´ ï¼Œåˆ™ä½¿ç”¨æ–°å…ƒç´ ä¸å·²æœ‰å…ƒç´ ä¾æ¬¡æ¯”è¾ƒå“ˆå¸Œå€¼ï¼Œè‹¥å“ˆå¸Œå€¼ä¸ç›¸åŒï¼Œåˆ™å°†è¯¥å…ƒç´ ç›´æ¥æ”¾ å…¥ã€‚ è‹¥æ–°å…ƒç´ ä¸å·²æœ‰å…ƒç´ çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œåˆ™ä½¿ç”¨æ–°å…ƒç´ è°ƒç”¨equalsæ–¹æ³•ä¸å·²æœ‰å…ƒç´ ä¾æ¬¡æ¯”è¾ƒã€‚ è‹¥ç›¸ç­‰åˆ™æ·»åŠ å…ƒç´ å¤±è´¥ï¼Œå¦åˆ™å°†å…ƒç´ ç›´æ¥æ”¾å…¥å³å¯ã€‚ æ€è€ƒï¼šä¸ºä»€ä¹ˆè¦æ±‚é‡å†™equalsæ–¹æ³•åè¦é‡å†™hashCodeæ–¹æ³•å‘¢ï¼Ÿ è§£æï¼š å½“ä¸¤ä¸ªå…ƒç´ è°ƒç”¨equalsæ–¹æ³•ç›¸ç­‰æ—¶è¯æ˜è¿™ä¸¤ä¸ªå…ƒç´ ç›¸åŒï¼Œé‡å†™hashCodeæ–¹æ³•åä¿è¯è¿™ä¸¤ä¸ªå…ƒ ç´ å¾—åˆ°çš„å“ˆå¸Œç å€¼ç›¸åŒï¼Œç”±åŒä¸€ä¸ªå“ˆå¸Œç®—æ³•ç”Ÿæˆçš„ç´¢å¼•ä½ç½®ç›¸åŒï¼Œæ­¤æ—¶åªéœ€è¦ä¸è¯¥ç´¢å¼•ä½ç½®å·²æœ‰å…ƒ ç´ æ¯”è¾ƒå³å¯ï¼Œä»è€Œæé«˜æ•ˆç‡å¹¶é¿å…é‡å¤å…ƒç´ çš„å‡ºç°ã€‚ 2.4 TreeSeté›†åˆçš„æ¦‚å¿µ äºŒå‰æ ‘ä¸»è¦æŒ‡æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æ ‘å½¢ç»“æ„ã€‚ æ»¡è¶³ä»¥ä¸‹3ä¸ªç‰¹å¾çš„äºŒå‰æ ‘å«åšæœ‰åºäºŒå‰æ ‘ã€‚ å·¦å­æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹å…ƒç´ éƒ½å°äºæ ¹èŠ‚ç‚¹å…ƒç´ å€¼ å³å­æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹å…ƒç´ éƒ½å¤§äºæ ¹èŠ‚ç‚¹å…ƒç´ å€¼ å·¦å­æ ‘å’Œå³å­æ ‘çš„å†…éƒ¨ä¹Ÿéµå®ˆä¸Šè¿°è§„åˆ™ ç”±äºTreeSeté›†åˆçš„åº•å±‚é‡‡ç”¨çº¢é»‘æ ‘è¿›è¡Œæ•°æ®çš„ç®¡ç†ï¼Œå½“æœ‰æ–°å…ƒç´ æ’å…¥åˆ°TreeSeté›†åˆæ—¶ï¼Œéœ€è¦ä½¿ ç”¨æ–°å…ƒç´ ä¸é›†åˆä¸­å·²æœ‰çš„å…ƒç´ ä¾æ¬¡æ¯”è¾ƒæ¥ç¡®å®šæ–°å…ƒç´ çš„åˆç†ä½ç½®ã€‚ æ¯”è¾ƒå…ƒç´ å¤§å°çš„è§„åˆ™æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨å…ƒç´ çš„è‡ªç„¶æ’åºè§„åˆ™è¿›è¡Œæ¯”è¾ƒå¹¶æ’åºï¼Œè®©å…ƒç´ ç±»å‹å®ç°java.lang.Comparableæ¥å£ ä½¿ç”¨æ¯”è¾ƒå™¨è§„åˆ™è¿›è¡Œæ¯”è¾ƒå¹¶æ’åºï¼Œæ„é€ TreeSeté›†åˆæ—¶ä¼ å…¥java.util.Comparatoræ¥å£ è‡ªç„¶æ’åºçš„è§„åˆ™æ¯”è¾ƒå•ä¸€ï¼Œè€Œæ¯”è¾ƒå™¨çš„è§„åˆ™æ¯”è¾ƒå¤šå…ƒåŒ–ï¼Œè€Œä¸”æ¯”è¾ƒå™¨ä¼˜å…ˆäºè‡ªç„¶æ’åºï¼› 3. Mapé›†åˆï¼ˆé‡ç‚¹ï¼‰3.1 åŸºæœ¬æ¦‚å¿µ java.util.Mapé›†åˆä¸­å­˜å–å…ƒç´ çš„åŸºæœ¬å•ä½æ˜¯ï¼šå•å¯¹å…ƒç´ ï¼Œå…¶ä¸­ç±»å‹å‚æ•°å¦‚ä¸‹ï¼š K - æ­¤æ˜ å°„æ‰€ç»´æŠ¤çš„é”®(Key)çš„ç±»å‹ï¼Œç›¸å½“äºç›®å½•ã€‚ V - æ˜ å°„å€¼(Value)çš„ç±»å‹ï¼Œç›¸å½“äºå†…å®¹ã€‚ è¯¥é›†åˆä¸­keyæ˜¯ä¸å…è®¸é‡å¤çš„ï¼Œè€Œä¸”ä¸€ä¸ªkeyåªèƒ½å¯¹åº”ä¸€ä¸ªvalueã€‚ è¯¥é›†åˆçš„ä¸»è¦å®ç°ç±»æœ‰ï¼šHashMapç±»ã€TreeMapç±»ã€LinkedHashMapç±»ã€Hashtableç±»ã€ Propertiesç±»ã€‚ å…¶ä¸­HashMapç±»çš„åº•å±‚æ˜¯é‡‡ç”¨å“ˆå¸Œè¡¨è¿›è¡Œæ•°æ®ç®¡ç†çš„ã€‚ å…¶ä¸­TreeMapç±»çš„åº•å±‚æ˜¯é‡‡ç”¨çº¢é»‘æ ‘è¿›è¡Œæ•°æ®ç®¡ç†çš„ã€‚ å…¶ä¸­LinkedHashMapç±»ä¸HashMapç±»çš„ä¸åŒä¹‹å¤„åœ¨äºå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œé“¾è¡¨ä¸­è®°å½•äº† å…ƒç´ çš„è¿­ä»£é¡ºåºï¼Œä¹Ÿå°±æ˜¯å…ƒç´ æ’å…¥é›†åˆä¸­çš„å…ˆåé¡ºåºï¼Œå› æ­¤ä¾¿äºè¿­ä»£ã€‚ å…¶ä¸­Hashtableç±»æ˜¯å¤è€çš„Mapå®ç°ç±»ï¼Œä¸HashMapç±»ç›¸æ¯”å±äºçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œä¸”ä¸å…è®¸nullä½œ ä¸ºkeyæˆ–è€…valueçš„æ•°å€¼ã€‚ å…¶ä¸­Propertiesç±»æ˜¯Hashtableç±»çš„å­ç±»ï¼Œè¯¥å¯¹è±¡ç”¨äºå¤„ç†å±æ€§æ–‡ä»¶ï¼Œkeyå’Œvalueéƒ½æ˜¯Stringç±» å‹çš„ã€‚ Mapé›†åˆæ˜¯é¢å‘æŸ¥è¯¢ä¼˜åŒ–çš„æ•°æ®ç»“æ„, åœ¨å¤§æ•°æ®é‡æƒ…å†µä¸‹æœ‰ç€ä¼˜è‰¯çš„æŸ¥è¯¢æ€§èƒ½ã€‚ ç»å¸¸ç”¨äºæ ¹æ®keyæ£€ç´¢valueçš„ä¸šåŠ¡åœºæ™¯ã€‚ 3.2 å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» V put(K key, V value) å°†Key-Valueå¯¹å­˜å…¥Mapï¼Œè‹¥é›†åˆä¸­å·²ç»åŒ…å«è¯¥Keyï¼Œåˆ™æ›¿æ¢è¯¥Keyæ‰€å¯¹ åº”çš„Valueï¼Œè¿”å›å€¼ä¸ºè¯¥KeyåŸæ¥æ‰€å¯¹åº”çš„Valueï¼Œè‹¥æ²¡æœ‰åˆ™è¿”å›null V get(Object key) è¿”å›ä¸å‚æ•°Keyæ‰€å¯¹åº”çš„Valueå¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null boolean containsKey(Object key) åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„Key boolean containsValue (Object value) åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„Value V remove(Object key) æ ¹æ®å‚æ•°æŒ‡å®šçš„keyè¿›è¡Œåˆ é™¤ Set keySet() è¿”å›æ­¤æ˜ å°„ä¸­åŒ…å«çš„é”®çš„Setè§†å›¾ Collection values() è¿”å›æ­¤æ˜ å°„ä¸­åŒ…å«çš„å€¼çš„Setè§†å›¾ Set&gt; entrySet() è¿”å›æ­¤æ˜ å°„ä¸­åŒ…å«çš„æ˜ å°„çš„Setè§†å›¾ 3.3 å…ƒç´ æ”¾å…¥HashMapé›†åˆçš„åŸç† ä½¿ç”¨å…ƒç´ çš„keyè°ƒç”¨hashCodeæ–¹æ³•è·å–å¯¹åº”çš„å“ˆå¸Œç å€¼ï¼Œå†ç”±æŸç§å“ˆå¸Œç®—æ³•è®¡ç®—åœ¨æ•°ç»„ä¸­çš„ç´¢å¼• ä½ç½®ã€‚ è‹¥è¯¥ä½ç½®æ²¡æœ‰å…ƒç´ ï¼Œåˆ™å°†è¯¥é”®å€¼å¯¹ç›´æ¥æ”¾å…¥å³å¯ã€‚ è‹¥è¯¥ä½ç½®æœ‰å…ƒç´ ï¼Œåˆ™ä½¿ç”¨keyä¸å·²æœ‰å…ƒç´ ä¾æ¬¡æ¯”è¾ƒå“ˆå¸Œå€¼ï¼Œè‹¥å“ˆå¸Œå€¼ä¸ç›¸åŒï¼Œåˆ™å°†è¯¥å…ƒç´ ç›´æ¥æ”¾ å…¥ã€‚ è‹¥keyä¸å·²æœ‰å…ƒç´ çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œåˆ™ä½¿ç”¨keyè°ƒç”¨equalsæ–¹æ³•ä¸å·²æœ‰å…ƒç´ ä¾æ¬¡æ¯”è¾ƒã€‚ è‹¥ç›¸ç­‰åˆ™å°†å¯¹åº”çš„valueä¿®æ”¹ï¼Œå¦åˆ™å°†é”®å€¼å¯¹ç›´æ¥æ”¾å…¥å³å¯ã€‚ 3.4 ç›¸å…³çš„å¸¸é‡ å±æ€§ å±æ€§ä»‹ç» DEFAULT_INITIAL_CAPACITY HashMapçš„é»˜è®¤å®¹é‡æ˜¯16 DEFAULT_LOAD_FACTOR HashMapçš„é»˜è®¤åŠ è½½å› å­æ˜¯0.75 threshold æ‰©å®¹çš„ä¸´ç•Œå€¼ï¼Œè¯¥æ•°å€¼ä¸ºï¼šå®¹é‡*å¡«å……å› å­ï¼Œä¹Ÿå°±æ˜¯12 TREEIFY_THRESHOLD è‹¥Bucketä¸­é“¾è¡¨é•¿åº¦å¤§äºè¯¥é»˜è®¤å€¼åˆ™è½¬åŒ–ä¸ºçº¢é»‘æ ‘å­˜å‚¨ï¼Œè¯¥æ•°å€¼æ˜¯8 MIN_TREEIFY_CAPACITY æ¡¶ä¸­çš„Nodeè¢«æ ‘åŒ–æ—¶æœ€å°çš„hashè¡¨å®¹é‡ï¼Œè¯¥æ•°å€¼æ˜¯64 4. Collectionsç±»4.1 åŸºæœ¬æ¦‚å¿µ java.util.Collectionsç±»ä¸»è¦æä¾›äº†å¯¹é›†åˆæ“ä½œæˆ–è€…è¿”å›é›†åˆçš„é™æ€æ–¹æ³•ã€‚ 4.2 å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static &gt; T max(Collection coll) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºè¿”å›ç»™å®šé›† åˆçš„æœ€å¤§å…ƒç´  static T max(Collection coll, Comparator comp) æ ¹æ®æŒ‡å®šæ¯”è¾ƒå™¨å¼•å‘çš„é¡ºåºè¿”å› ç»™å®šé›†åˆçš„æœ€å¤§å…ƒç´  static &gt; T min(Collection coll) æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºè¿”å›ç»™å®šé›† åˆçš„æœ€å°å…ƒç´  static T min(Collection coll, Comparator comp) æ ¹æ®æŒ‡å®šæ¯”è¾ƒå™¨å¼•å‘çš„é¡ºåºè¿”å› ç»™å®šé›†åˆçš„æœ€å°å…ƒç´  static void copy(List dest, List src) å°†ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ å¤åˆ¶åˆ° å¦ä¸€ä¸ªåˆ—è¡¨ä¸­ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static void reverse(List list) åè½¬æŒ‡å®šåˆ—è¡¨ä¸­å…ƒç´ çš„é¡ºåº static void shuffle(List list) ä½¿ç”¨é»˜è®¤çš„éšæœºæºéšæœºç½®æ¢æŒ‡å®šçš„åˆ—è¡¨ static &gt; void sort(List list) æ ¹æ®å…¶å…ƒç´ çš„è‡ªç„¶é¡ºåºå°†æŒ‡å®šåˆ—è¡¨æŒ‰å‡ åºæ’åº static void sort(List list, Comparator c) æ ¹æ®æŒ‡å®šæ¯”è¾ƒå™¨æŒ‡å®šçš„é¡ºåºå¯¹æŒ‡å®šåˆ—è¡¨ è¿›è¡Œæ’åº static void swap(List list, int i, int j) äº¤æ¢æŒ‡å®šåˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"é›†åˆç±»åº“ï¼ˆä¸Šï¼‰","slug":"é›†åˆç±»åº“ï¼ˆä¸Šï¼‰","date":"2019-01-16T11:04:40.000Z","updated":"2025-04-17T08:34:52.024Z","comments":true,"path":"2019/01/16/é›†åˆç±»åº“ï¼ˆä¸Šï¼‰/","link":"","permalink":"http://yournotes.cn/2019/01/16/%E9%9B%86%E5%90%88%E7%B1%BB%E5%BA%93%EF%BC%88%E4%B8%8A%EF%BC%89/","excerpt":"1. é›†åˆçš„æ¦‚è¿°ï¼ˆé‡ç‚¹ï¼‰1.1 é›†åˆçš„ç”±æ¥ å½“éœ€è¦åœ¨Javaç¨‹åºä¸­è®°å½•å•ä¸ªæ•°æ®å†…å®¹æ—¶ï¼Œåˆ™å£°æ˜ä¸€ä¸ªå˜é‡ã€‚","text":"1. é›†åˆçš„æ¦‚è¿°ï¼ˆé‡ç‚¹ï¼‰1.1 é›†åˆçš„ç”±æ¥ å½“éœ€è¦åœ¨Javaç¨‹åºä¸­è®°å½•å•ä¸ªæ•°æ®å†…å®¹æ—¶ï¼Œåˆ™å£°æ˜ä¸€ä¸ªå˜é‡ã€‚ å½“éœ€è¦åœ¨Javaç¨‹åºä¸­è®°å½•å¤šä¸ªç±»å‹ç›¸åŒçš„æ•°æ®å†…å®¹æ—¶ï¼Œå£°æ˜ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚ å½“éœ€è¦åœ¨Javaç¨‹åºä¸­è®°å½•å¤šä¸ªç±»å‹ä¸åŒçš„æ•°æ®å†…å®¹æ—¶ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚ å½“éœ€è¦åœ¨Javaç¨‹åºä¸­è®°å½•å¤šä¸ªç±»å‹ç›¸åŒçš„å¯¹è±¡æ•°æ®æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡æ•°ç»„ã€‚ å½“éœ€è¦åœ¨Javaç¨‹åºä¸­è®°å½•å¤šä¸ªç±»å‹ä¸åŒçš„å¯¹è±¡æ•°æ®æ—¶ï¼Œåˆ™å‡†å¤‡ä¸€ä¸ªé›†åˆã€‚ 1.2 é›†åˆçš„æ¡†æ¶ç»“æ„ Javaä¸­é›†åˆæ¡†æ¶é¡¶å±‚æ¡†æ¶æ˜¯ï¼šjava.util.Collectioné›†åˆ å’Œ java.util.Mapé›†åˆã€‚ å…¶ä¸­Collectioné›†åˆä¸­å­˜å–å…ƒç´ çš„åŸºæœ¬å•ä½æ˜¯ï¼šå•ä¸ªå…ƒç´ ã€‚ å…¶ä¸­Mapé›†åˆä¸­å­˜å–å…ƒç´ çš„åŸºæœ¬å•ä½æ˜¯ï¼šå•å¯¹å…ƒç´ ã€‚ 2. Collectioné›†åˆï¼ˆé‡ç‚¹ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ java.util.Collectionæ¥å£æ˜¯Listæ¥å£ã€Queue æ¥å£ä»¥åŠSetæ¥å£çš„çˆ¶æ¥å£ï¼Œå› æ­¤è¯¥æ¥å£é‡Œå®šä¹‰çš„æ–¹æ³• æ—¢å¯ç”¨äºæ“ä½œListé›†åˆï¼Œä¹Ÿå¯ç”¨äºæ“ä½œQueueé›†åˆå’ŒSeté›†åˆã€‚ 2.2 å¸¸ç”¨çš„æ–¹æ³•ï¼ˆç»ƒç†Ÿã€è®°ä½ï¼‰ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean add(E e) å‘é›†åˆä¸­æ·»åŠ å¯¹è±¡ boolean addAll(Collection c) ç”¨äºå°†å‚æ•°æŒ‡å®šé›†åˆcä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°å½“å‰é›†åˆä¸­ boolean contains(Object o) åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šå¯¹è±¡ boolean containsAll(Collection c) åˆ¤æ–­æ˜¯å¦åŒ…å«å‚æ•°æŒ‡å®šçš„æ‰€æœ‰å¯¹è±¡ boolean retainAll(Collection c) ä¿ç•™å½“å‰é›†åˆä¸­å­˜åœ¨ä¸”å‚æ•°é›†åˆä¸­å­˜åœ¨çš„æ‰€æœ‰å¯¹è±¡ boolean remove(Object o); ä»é›†åˆä¸­åˆ é™¤å¯¹è±¡ boolean removeAll(Collection c) ä»é›†åˆä¸­åˆ é™¤å‚æ•°æŒ‡å®šçš„æ‰€æœ‰å¯¹è±¡ void clear() æ¸…ç©ºé›†åˆ int size() è¿”å›åŒ…å«å¯¹è±¡çš„ä¸ªæ•° boolean isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º boolean equals(Object o) åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ int hashCode() è·å–å½“å‰é›†åˆçš„å“ˆå¸Œç å€¼ Object[] toArray() å°†é›†åˆè½¬æ¢ä¸ºæ•°ç»„ Iterator iterator() è·å–å½“å‰é›†åˆçš„è¿­ä»£å™¨ 3. Iteratoræ¥å£ï¼ˆé‡ç‚¹ï¼‰3.1 åŸºæœ¬æ¦‚å¿µ java.util.Iteratoræ¥å£ä¸»è¦ç”¨äºæè¿°è¿­ä»£å™¨å¯¹è±¡ï¼Œå¯ä»¥éå†Collectioné›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ java.util.Collectionæ¥å£ç»§æ‰¿Iteratoræ¥å£ï¼Œå› æ­¤æ‰€æœ‰å®ç°Collectionæ¥å£çš„å®ç°ç±»éƒ½å¯ä»¥ä½¿ç”¨è¯¥è¿­ ä»£å™¨å¯¹è±¡ã€‚ 3.2 å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean hasNext() åˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰å¯ä»¥è¿­ä»£&#x2F;è®¿é—®çš„å…ƒç´  E next() ç”¨äºå–å‡ºä¸€ä¸ªå…ƒç´ å¹¶æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´  void remove() ç”¨äºåˆ é™¤è®¿é—®åˆ°çš„æœ€åä¸€ä¸ªå…ƒç´  æ¡ˆä¾‹é¢˜ç›®ï¼š å¦‚ä½•ä½¿ç”¨è¿­ä»£å™¨å®ç°toStringæ–¹æ³•çš„æ‰“å°æ•ˆæœï¼Ÿ 4. for eachå¾ªç¯ï¼ˆé‡ç‚¹ï¼‰4.1 åŸºæœ¬æ¦‚å¿µ Java5æ¨å‡ºäº†å¢å¼ºå‹forå¾ªç¯è¯­å¥ï¼Œå¯ä»¥åº”ç”¨æ•°ç»„å’Œé›†åˆçš„éå†ã€‚ æ˜¯ç»å…¸è¿­ä»£çš„â€œç®€åŒ–ç‰ˆâ€ã€‚ 4.2 è¯­æ³•æ ¼å¼ 123for(å…ƒç´ ç±»å‹ å˜é‡å : æ•°ç»„/é›†åˆåç§°) &#123; å¾ªç¯ä½“;&#125; 4.3 æ‰§è¡Œæµç¨‹ ä¸æ–­åœ°ä»æ•°ç»„&#x2F;é›†åˆä¸­å–å‡ºä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™å˜é‡åå¹¶æ‰§è¡Œå¾ªç¯ä½“ï¼Œç›´åˆ°å–å®Œæ‰€æœ‰å…ƒç´ ä¸ºæ­¢ã€‚ 5. Listé›†åˆï¼ˆé‡ä¸­ä¹‹é‡ï¼‰5.1 åŸºæœ¬æ¦‚å¿µ java.util.Listé›†åˆæ˜¯Collectioné›†åˆçš„å­é›†åˆï¼Œè¯¥é›†åˆä¸­å…è®¸æœ‰é‡å¤çš„å…ƒç´ å¹¶ä¸”æœ‰å…ˆåæ”¾å…¥æ¬¡åºã€‚ è¯¥é›†åˆçš„ä¸»è¦å®ç°ç±»æœ‰ï¼šArrayListç±»ã€LinkedListç±»ã€Stackç±»ã€Vectorç±»ã€‚ å…¶ä¸­ArrayListç±»çš„åº•å±‚æ˜¯é‡‡ç”¨åŠ¨æ€æ•°ç»„è¿›è¡Œæ•°æ®ç®¡ç†çš„ï¼Œæ”¯æŒä¸‹æ ‡è®¿é—®ï¼Œå¢åˆ å…ƒç´ ä¸æ–¹ä¾¿ã€‚ å…¶ä¸­LinkedListç±»çš„åº•å±‚æ˜¯é‡‡ç”¨åŒå‘é“¾è¡¨è¿›è¡Œæ•°æ®ç®¡ç†çš„ï¼Œè®¿é—®ä¸æ–¹ä¾¿ï¼Œå¢åˆ å…ƒç´ æ–¹ä¾¿ã€‚ å¯ä»¥è®¤ä¸ºArrayListå’ŒLinkedListçš„æ–¹æ³•åœ¨é€»è¾‘ä¸Šå®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯åœ¨æ€§èƒ½ä¸Šæœ‰ä¸€å®šçš„å·®åˆ«ï¼ŒArrayList æ›´é€‚åˆäºè®¿é—®è€ŒLinkedListæ›´é€‚åˆäºæ’å…¥å’Œåˆ é™¤åœ¨æ€§èƒ½è¦æ±‚ä¸æ˜¯ç‰¹åˆ«è‹›åˆ»çš„æƒ…å½¢ä¸‹å¯ä»¥å¿½ç•¥è¿™ä¸ªå·®åˆ«ã€‚ å…¶ä¸­Stackç±»çš„åº•å±‚æ˜¯é‡‡ç”¨åŠ¨æ€æ•°ç»„è¿›è¡Œæ•°æ®ç®¡ç†çš„ï¼Œè¯¥ç±»ä¸»è¦ç”¨äºæè¿°ä¸€ç§å…·æœ‰åè¿›å…ˆå‡ºç‰¹å¾çš„ æ•°æ®ç»“æ„ï¼Œå«åšæ ˆ(last in first out LIFO)ã€‚ å…¶ä¸­Vectorç±»çš„åº•å±‚æ˜¯é‡‡ç”¨åŠ¨æ€æ•°ç»„è¿›è¡Œæ•°æ®ç®¡ç†çš„ï¼Œè¯¥ç±»ä¸ArrayListç±»ç›¸æ¯”å±äºçº¿ç¨‹å®‰å…¨çš„ ç±»ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œä»¥åå¼€å‘ä¸­åŸºæœ¬ä¸ç”¨ã€‚ 5.2 å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» void add(int index, E element) å‘é›†åˆä¸­æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´  boolean addAll(int index, Collection c) å‘é›†åˆä¸­æ·»åŠ æ‰€æœ‰å…ƒç´  E get(int index) ä»é›†åˆä¸­è·å–æŒ‡å®šä½ç½®å…ƒç´  int indexOf(Object o) æŸ¥æ‰¾å‚æ•°æŒ‡å®šçš„å¯¹è±¡ int lastIndexOf(Object o) åå‘æŸ¥æ‰¾å‚æ•°æŒ‡å®šçš„å¯¹è±¡ E set(int index, E element) ä¿®æ”¹æŒ‡å®šä½ç½®çš„å…ƒç´  E remove(int index) åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´  List subList(int fromIndex, int toIndex) ç”¨äºè·å–å­List æ¡ˆä¾‹é¢˜ç›® å‡†å¤‡ä¸€ä¸ªStacké›†åˆï¼Œå°†æ•°æ®11ã€22ã€33ã€44ã€55ä¾æ¬¡å…¥æ ˆå¹¶æ‰“å°ï¼Œç„¶åæŸ¥çœ‹æ ˆé¡¶å…ƒç´ å¹¶æ‰“å°ï¼Œ ç„¶åå°†æ ˆä¸­æ‰€æœ‰æ•°æ®ä¾æ¬¡å‡ºæ ˆå¹¶æ‰“å°ã€‚ å†å‡†å¤‡ä¸€ä¸ªStackå¯¹è±¡ï¼Œå°†æ•°æ®ä»ç¬¬ä¸€ä¸ªæ ˆä¸­å–å‡ºæ¥æ”¾å…¥ç¬¬äºŒä¸ªæ ˆä¸­ï¼Œç„¶åå†ä»ç¬¬äºŒä¸ªæ ˆä¸­å–å‡ºå¹¶ æ‰“å°ã€‚ 6. Queueé›†åˆï¼ˆé‡ç‚¹ï¼‰6.1 åŸºæœ¬æ¦‚å¿µ java.util.Queueé›†åˆæ˜¯Collectioné›†åˆçš„å­é›†åˆï¼Œä¸Listé›†åˆå±äºå¹³çº§å…³ç³»ã€‚ è¯¥é›†åˆçš„ä¸»è¦ç”¨äºæè¿°å…·æœ‰å…ˆè¿›å…ˆå‡ºç‰¹å¾çš„æ•°æ®ç»“æ„ï¼Œå«åšé˜Ÿåˆ—(first in first out FIFO)ã€‚ è¯¥é›†åˆçš„ä¸»è¦å®ç°ç±»æ˜¯LinkedListç±»ï¼Œå› ä¸ºè¯¥ç±»åœ¨å¢åˆ æ–¹é¢æ¯”è¾ƒæœ‰ä¼˜åŠ¿ã€‚ 6.2 å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean offer(E e) å°†ä¸€ä¸ªå¯¹è±¡æ·»åŠ è‡³é˜Ÿå°¾ï¼Œè‹¥æ·»åŠ æˆåŠŸåˆ™è¿”å›true E poll() ä»é˜Ÿé¦–åˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´  E peek() è¿”å›é˜Ÿé¦–çš„å…ƒç´ ï¼ˆä½†å¹¶ä¸åˆ é™¤ï¼‰ æ¡ˆä¾‹é¢˜ç›® å‡†å¤‡ä¸€ä¸ªQueueé›†åˆï¼Œå°†æ•°æ®11ã€22ã€33ã€44ã€55ä¾æ¬¡å…¥é˜Ÿå¹¶æ‰“å°ï¼Œç„¶åæŸ¥çœ‹é˜Ÿé¦–å…ƒç´ å¹¶æ‰“å°ï¼Œ ç„¶åå°†é˜Ÿåˆ—ä¸­æ‰€æœ‰æ•°æ®ä¾æ¬¡å‡ºé˜Ÿå¹¶æ‰“å°ã€‚","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"å¸¸ç”¨ç±»çš„æ¦‚è¿°å’Œä½¿ç”¨","slug":"å¸¸ç”¨ç±»çš„æ¦‚è¿°å’Œä½¿ç”¨","date":"2019-01-11T16:00:00.000Z","updated":"2025-04-17T08:34:52.022Z","comments":true,"path":"2019/01/12/å¸¸ç”¨ç±»çš„æ¦‚è¿°å’Œä½¿ç”¨/","link":"","permalink":"http://yournotes.cn/2019/01/12/%E5%B8%B8%E7%94%A8%E7%B1%BB%E7%9A%84%E6%A6%82%E8%BF%B0%E5%92%8C%E4%BD%BF%E7%94%A8/","excerpt":"1. å¸¸ç”¨çš„åŒ…ï¼ˆç†Ÿæ‚‰ï¼‰1.1 åŒ…çš„åç§°å’ŒåŠŸèƒ½ java.langåŒ… ï¼š è¯¥åŒ…æ˜¯Javaè¯­è¨€çš„æ ¸å¿ƒåŒ…ï¼Œå¹¶ä¸”è¯¥åŒ…ä¸­çš„æ‰€æœ‰å†…å®¹ç”±Javaè™šæ‹Ÿæœºè‡ªåŠ¨å¯¼å…¥ã€‚","text":"1. å¸¸ç”¨çš„åŒ…ï¼ˆç†Ÿæ‚‰ï¼‰1.1 åŒ…çš„åç§°å’ŒåŠŸèƒ½ java.langåŒ… ï¼š è¯¥åŒ…æ˜¯Javaè¯­è¨€çš„æ ¸å¿ƒåŒ…ï¼Œå¹¶ä¸”è¯¥åŒ…ä¸­çš„æ‰€æœ‰å†…å®¹ç”±Javaè™šæ‹Ÿæœºè‡ªåŠ¨å¯¼å…¥ã€‚å¦‚ï¼šSystemç±»ã€Stringç±»ã€â€¦ java.utilåŒ… - è¯¥åŒ…æ˜¯Javaè¯­è¨€çš„å·¥å…·åŒ…ï¼Œé‡Œé¢æä¾›äº†å¤§é‡å·¥å…·ç±»ä»¥åŠé›†åˆç±»ç­‰ã€‚ å¦‚ï¼šScannerç±»ã€Randomç±»ã€Listé›†åˆã€â€¦ java.ioåŒ… - è¯¥åŒ…æ˜¯Javaè¯­è¨€ä¸­çš„è¾“å…¥è¾“å‡ºåŒ…ï¼Œé‡Œé¢æä¾›äº†å¤§é‡è¯»å†™æ–‡ä»¶ç›¸å…³çš„ç±»ç­‰ã€‚ å¦‚ï¼šFileInputStreamç±»ã€FileOutputStreamç±»ã€â€¦ java.netåŒ… - è¯¥åŒ…æ˜¯Javaè¯­è¨€ä¸­çš„ç½‘ç»œåŒ…ï¼Œé‡Œé¢æä¾›äº†å¤§é‡ç½‘ç»œç¼–ç¨‹ç›¸å…³çš„ç±»ç­‰ã€‚ å¦‚ï¼šServerSocketç±»ã€Socketç±»ã€â€¦ java.sql åŒ… - è¯¥åŒ…æ˜¯Javaè¯­è¨€ä¸­çš„æ•°æ®åŒ…ï¼Œé‡Œé¢æä¾›äº†å¤§é‡æ“ä½œæ•°æ®åº“çš„ç±»å’Œæ¥å£ç­‰ã€‚ å¦‚ï¼šDriverManagerç±»ã€Connectionæ¥å£ã€â€¦ â€¦ â€¦ Javaç¨‹åºå‘˜åœ¨ç¼–ç¨‹æ—¶å¯ä»¥ä½¿ç”¨å¤§é‡ç±»åº“ï¼Œå› æ­¤Javaç¼–ç¨‹æ—¶éœ€è¦è®°çš„å¾ˆå¤šï¼Œå¯¹ç¼–ç¨‹èƒ½åŠ›æœ¬èº«è¦æ±‚ä¸æ˜¯ ç‰¹åˆ«çš„é«˜ã€‚ 2. Objectç±»çš„æ¦‚è¿°ï¼ˆé‡ç‚¹ï¼‰2.1 åŸºæœ¬æ¦‚å¿µ java.lang.Objectç±»æ˜¯Javaè¯­è¨€ä¸­ç±»å±‚æ¬¡ç»“æ„çš„æ ¹ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•ä¸€ä¸ªç±»éƒ½æ˜¯è¯¥ç±»çš„ç›´æ¥æˆ–è€…é—´ æ¥å­ç±»ã€‚ å¦‚æœå®šä¹‰ä¸€ä¸ªJavaç±»æ—¶æ²¡æœ‰ä½¿ç”¨extendså…³é”®å­—å£°æ˜å…¶çˆ¶ç±»ï¼Œåˆ™å…¶çˆ¶ç±»ä¸º java.lang.Object ç±»ã€‚ Objectç±»å®šä¹‰äº†â€œå¯¹è±¡â€çš„åŸºæœ¬è¡Œä¸º, è¢«å­ç±»é»˜è®¤ç»§æ‰¿ã€‚ 2.2 å¸¸ç”¨æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Object() ä½¿ç”¨æ— å‚æ–¹å¼æ„é€ å¯¹è±¡ boolean equals(Object obj) ç”¨äºåˆ¤æ–­è°ƒç”¨å¯¹è±¡æ˜¯å¦ä¸å‚æ•°å¯¹è±¡ç›¸ç­‰ã€‚ è¯¥æ–¹æ³•é»˜è®¤æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œä¸ &#x3D;&#x3D; è¿ç®—ç¬¦çš„ç»“æœä¸€è‡´è‹¥å¸Œæœ›æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹åˆ™éœ€è¦é‡å†™è¯¥æ–¹æ³•ã€‚è‹¥è¯¥æ–¹æ³•è¢«é‡å†™åï¼Œåˆ™åº”è¯¥é‡å†™hashCodeæ–¹æ³•æ¥ä¿è¯ç»“æœçš„ä¸€è‡´æ€§ã€‚ int hashCode() ç”¨äºè·å–è°ƒç”¨å¯¹è±¡çš„å“ˆå¸Œç å€¼(å†…å­˜åœ°å€çš„ç¼–å·)ã€‚ è‹¥ä¸¤ä¸ªå¯¹è±¡è°ƒç”¨equalsæ–¹æ³•ç›¸ç­‰ï¼Œåˆ™å„è‡ªè°ƒç”¨è¯¥æ–¹æ³•çš„ç»“æœå¿…é¡»ç›¸ åŒ è‹¥ä¸¤ä¸ªè°ƒç”¨å¯¹è±¡equalsæ–¹æ³•ä¸ç›¸ç­‰ï¼Œåˆ™å„è‡ªè°ƒç”¨è¯¥æ–¹æ³•çš„ç»“æœåº”è¯¥ ä¸ç›¸åŒã€‚ ä¸ºäº†ä½¿å¾—è¯¥æ–¹æ³•ä¸equalsæ–¹æ³•ä¿æŒä¸€è‡´ï¼Œéœ€è¦é‡å†™è¯¥æ–¹æ³•ã€‚ String toString() ç”¨äºè·å–è°ƒç”¨å¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼ è¯¥æ–¹æ³•é»˜è®¤è¿”å›çš„å­—ç¬¦ä¸²ä¸ºï¼šåŒ…å.ç±»å@å“ˆå¸Œç å€¼çš„åå…­è¿›åˆ¶ ä¸ºäº†è¿”å›æ›´æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œéœ€è¦é‡å†™è¯¥æ–¹æ³• ä½¿ç”¨printæˆ–printlnæ‰“å°å¼•ç”¨æˆ–å­—ç¬¦ä¸²æ‹¼æ¥å¼•ç”¨éƒ½ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³• Class getClass() ç”¨äºè¿”å›è°ƒç”¨å¯¹è±¡æ‰§è¡Œæ—¶çš„Classå®ä¾‹ï¼Œåå°„æœºåˆ¶ä½¿ç”¨ æ¡ˆä¾‹é¢˜ç›®ï¼š â€‹ ç¼–ç¨‹å®ç°Studentç±»çš„å°è£…ï¼Œç‰¹å¾ï¼šå­¦å·(id)å’Œå§“åï¼Œè¦æ±‚æä¾›æ‰“å°æ‰€æœ‰ç‰¹å¾çš„æ–¹æ³•ã€‚ â€‹ ç¼–ç¨‹å®ç°StudentTestç±»ï¼Œåœ¨mainæ–¹æ³•ä¸­ä½¿ç”¨æœ‰å‚æ–¹å¼æ„é€ ä¸¤ä¸ªStudentç±»å‹çš„å¯¹è±¡å¹¶æ‰“å°ç‰¹å¾ã€‚ é¢˜ç›®æ‰©å±•: â€‹ å¦‚ä½•å®ç°ä»¥å§“åä½œä¸ºåŸºå‡†åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Ÿä»¥åŠä»¥å­¦å·å’Œå§“ååŒæ—¶ä½œä¸ºåŸºå‡†åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ å¦ç›¸ç­‰ï¼Ÿ 3. åŒ…è£…ç±»ï¼ˆç†Ÿæ‚‰ï¼‰3.1 åŒ…è£…ç±»çš„æ¦‚å¿µâ€‹ é€šå¸¸æƒ…å†µä¸‹åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ä¸æ˜¯å¯¹è±¡ï¼Œä¸ºäº†æ»¡è¶³ä¸‡ç‰©çš†å¯¹è±¡çš„ç†å¿µå°±éœ€è¦å¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„å˜ é‡è¿›è¡Œæ‰“åŒ…å°è£…å¤„ç†å˜æˆå¯¹è±¡ï¼Œè€Œè´Ÿè´£å°†è¿™äº›å˜é‡å£°æ˜ä¸ºæˆå‘˜å˜é‡è¿›è¡Œå¯¹è±¡åŒ–å¤„ç†çš„ç›¸å…³ç±»ï¼Œå«åšåŒ…è£… ç±»ã€‚ å¦‚ï¼š 12Person p = new Person(); int num = 10; 3.2 åŒ…è£…ç±»çš„åˆ†ç±» åŒ…è£…ç±» å¯¹åº”çš„åŸºæœ¬ç±»å‹ java.lang.Byte byte java.lang.Short short java.lang.Integer int java.lang.Long long java.lang.Float float java.lang.Double double java.lang.Boolean boolean java.lang.Character char 3.3 Integerç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.lang.Integerç±»å†…éƒ¨åŒ…è£…äº†ä¸€ä¸ªintç±»å‹çš„å˜é‡ä½œä¸ºæˆå‘˜å˜é‡ï¼Œä¸»è¦ç”¨äºå®ç°å¯¹intç±»å‹çš„åŒ…è£…å¹¶ æä¾›intç±»å‹åˆ°Stringç±»ä¹‹é—´çš„è½¬æ¢ç­‰æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„å¸¸é‡ å¸¸é‡ç±»å‹å’Œåç§° åŠŸèƒ½ä»‹ç» public static final int MAX_VALUE è¡¨ç¤ºintç±»å‹å¯ä»¥æè¿°çš„æœ€å¤§å€¼ï¼Œå³2^31-1 public static final int MIN_VALUE è¡¨ç¤ºintç±»å‹å¯ä»¥æè¿°çš„æœ€å°å€¼ï¼Œå³-2^31 public static final int SIZE è¡¨ç¤ºintç±»å‹é‡‡ç”¨äºŒè¿›åˆ¶è¡¥ç å½¢å¼çš„ä½æ•° public static final int BYTES è¡¨ç¤ºintç±»å‹æ‰€å çš„å­—èŠ‚ä¸ªæ•° public static final Class TYPE è¡¨ç¤ºintç±»å‹çš„Classå®ä¾‹ ï¼ˆ3ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Integer(int value) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ•´æ•°æ¥æ„é€ å¯¹è±¡ï¼ˆå·²è¿‡æ—¶ï¼‰ Integer(String s) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡ ï¼ˆå·²è¿‡æ—¶ï¼‰ int intValue() è·å–è°ƒç”¨å¯¹è±¡ä¸­çš„æ•´æ•°å€¼å¹¶è¿”å› static Integer valueOf(int i) æ ¹æ®å‚æ•°æŒ‡å®šæ•´æ•°å€¼å¾—åˆ°Integerç±»å‹å¯¹è±¡ boolean equals(Object obj) æ¯”è¾ƒè°ƒç”¨å¯¹è±¡ä¸å‚æ•°æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ç›¸ç­‰ String toString() è¿”å›æè¿°è°ƒç”¨å¯¹è±¡æ•°å€¼çš„å­—ç¬¦ä¸²å½¢å¼ static int parseInt(String s) å°†å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ä¸ºintç±»å‹å¹¶è¿”å› static String toString(int i) è·å–å‚æ•°æŒ‡å®šæ•´æ•°çš„åè¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼ static String toBinaryString(int i) è·å–å‚æ•°æŒ‡å®šæ•´æ•°çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼ static String toHexString(int i) è·å–å‚æ•°æŒ‡å®šæ•´æ•°çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼ static String toOctalString(int i) è·å–å‚æ•°æŒ‡å®šæ•´æ•°çš„å…«è¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼ ï¼ˆ4ï¼‰å¸¸ç”¨çš„æ–¹æ³• â€‹ åœ¨Java5å‘å¸ƒä¹‹å‰ä½¿ç”¨åŒ…è£…ç±»å¯¹è±¡è¿›è¡Œè¿ç®—æ—¶ï¼Œéœ€è¦è¾ƒä¸ºç¹ççš„â€œæ‹†ç®±â€å’Œâ€œè£…ç®±â€æ“ä½œï¼›å³è¿ç®—å‰å…ˆå°† åŒ…è£…ç±»å¯¹è±¡æ‹†åˆ†ä¸ºåŸºæœ¬ç±»å‹æ•°æ®ï¼Œè¿ç®—åå†å°†ç»“æœå°è£…æˆåŒ…è£…ç±»å¯¹è±¡ã€‚ ä»Java5å¼€å§‹å¢åŠ äº†è‡ªåŠ¨æ‹†ç®±å’Œè‡ªåŠ¨è£…ç®±çš„åŠŸèƒ½ã€‚ ï¼ˆ5ï¼‰å¸¸ç”¨çš„æ–¹æ³• â€‹ åœ¨Integerç±»çš„å†…éƒ¨æä¾›äº†è‡ªåŠ¨è£…ç®±æ± æŠ€æœ¯ï¼Œå°†-128åˆ°127ä¹‹é—´çš„æ•´æ•°å·²ç»è£…ç®±å®Œæ¯•ï¼Œå½“ç¨‹åºä¸­ä½¿ç”¨ è¯¥èŒƒå›´ä¹‹é—´çš„æ•´æ•°æ—¶ï¼Œæ— éœ€è£…ç®±ç›´æ¥å–ç”¨è‡ªåŠ¨è£…ç®±æ± ä¸­çš„å¯¹è±¡å³å¯ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚ 3.4 Doubleç±»æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ â€‹ java.lang.Doubleç±»å‹å†…éƒ¨åŒ…è£…äº†ä¸€ä¸ªdoubleç±»å‹çš„å˜é‡ä½œä¸ºæˆå‘˜å˜é‡ï¼Œä¸»è¦ç”¨äºå®ç°å¯¹double ç±»å‹çš„åŒ…è£…å¹¶æä¾›doubleç±»å‹åˆ°Stringç±»ä¹‹é—´çš„è½¬æ¢ç­‰æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„å¸¸é‡ å¸¸é‡ç±»å‹å’Œåç§° åŠŸèƒ½ä»‹ç» public static final int SIZE è¡¨ç¤ºdoubleç±»å‹çš„äºŒè¿›åˆ¶ä½æ•° public static final int BYTES è¡¨ç¤ºdoubleç±»å‹çš„å­—èŠ‚ä¸ªæ•° public static final Class TYPE è¡¨ç¤ºdoubleç±»å‹çš„Classå®ä¾‹ ï¼ˆ3ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Double(double value) æ ¹æ®å‚æ•°æŒ‡å®šçš„æµ®ç‚¹æ•°æ®æ¥æ„é€ å¯¹è±¡ï¼ˆå·²è¿‡æ—¶ï¼‰ Double(String s) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡ ï¼ˆå·²è¿‡æ—¶ï¼‰ double doubleValue() è·å–è°ƒç”¨å¯¹è±¡ä¸­çš„æµ®ç‚¹æ•°æ®å¹¶è¿”å› static Double valueOf(double d) æ ¹æ®å‚æ•°æŒ‡å®šæµ®ç‚¹æ•°æ®å¾—åˆ°Doubleç±»å‹å¯¹è±¡ boolean equals(Object obj) æ¯”è¾ƒè°ƒç”¨å¯¹è±¡ä¸å‚æ•°æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ç›¸ç­‰ String toString() è¿”å›æè¿°è°ƒç”¨å¯¹è±¡æ•°å€¼çš„å­—ç¬¦ä¸²å½¢å¼ static double parseDouble(String s) å°†å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ä¸ºdoubleç±»å‹å¹¶è¿”å› boolean isNaN() åˆ¤æ–­è°ƒç”¨å¯¹è±¡çš„æ•°å€¼æ˜¯å¦ä¸ºéæ•°å­— æ‰©å±•ï¼š â€‹ java.lang.Numberç±»æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œæ˜¯ä¸Šè¿°ç±»çš„çˆ¶ç±»æ¥æè¿°æ‰€æœ‰ç±»å…±æœ‰çš„æˆå‘˜ã€‚ 3.5 Booleanç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ â€‹ java.lang.Booleanç±»å‹å†…éƒ¨åŒ…è£…äº†ä¸€ä¸ªbooleanç±»å‹çš„å˜é‡ä½œä¸ºæˆå‘˜å˜é‡ï¼Œä¸»è¦ç”¨äºå®ç°å¯¹ booleanç±»å‹çš„åŒ…è£…å¹¶æä¾›booleanç±»å‹åˆ°Stringç±»ä¹‹é—´çš„è½¬æ¢ç­‰æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„å¸¸é‡ å¸¸é‡ç±»å‹å’Œåç§° åŠŸèƒ½ä»‹ç» public static final Boolean FALSE å¯¹åº”åŸºå€¼ä¸ºfalseçš„å¯¹è±¡ public static final Boolean TRUE å¯¹åº”åŸºå€¼ä¸ºtrueçš„å¯¹è±¡ public static final Class TYPE è¡¨ç¤ºbooleanç±»å‹çš„Classå®ä¾‹ ï¼ˆ3ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Boolean(boolean value) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¸ƒå°”æ•°å€¼æ¥æ„é€ å¯¹è±¡ï¼ˆå·²è¿‡æ—¶ï¼‰ Boolean(String s) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡ ï¼ˆå·²è¿‡æ—¶ï¼‰ boolean booleanValue() è·å–è°ƒç”¨å¯¹è±¡ä¸­çš„å¸ƒå°”æ•°å€¼å¹¶è¿”å› static Boolean valueOf(boolean b) ) æ ¹æ®å‚æ•°æŒ‡å®šå¸ƒå°”æ•°å€¼å¾—åˆ°Booleanç±»å‹å¯¹è±¡ boolean equals(Object obj) æ¯”è¾ƒè°ƒç”¨å¯¹è±¡ä¸å‚æ•°æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ç›¸ç­‰ String toString() è¿”å›æè¿°è°ƒç”¨å¯¹è±¡æ•°å€¼çš„å­—ç¬¦ä¸²å½¢å¼ static boolean parseBoolean(String s) å°†å­—ç¬¦ä¸²ç±»å‹è½¬æ¢ä¸ºbooleanç±»å‹å¹¶è¿”å› 3.6 Characterç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ â€‹ java.lang.Characterç±»å‹å†…éƒ¨åŒ…è£…äº†ä¸€ä¸ªcharç±»å‹çš„å˜é‡ä½œä¸ºæˆå‘˜å˜é‡ï¼Œä¸»è¦ç”¨äºå®ç°å¯¹charç±»å‹ çš„åŒ…è£…å¹¶æä¾›å­—ç¬¦ç±»åˆ«çš„åˆ¤æ–­å’Œè½¬æ¢ç­‰æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„å¸¸é‡ å¸¸é‡ç±»å‹å’Œåç§° åŠŸèƒ½ä»‹ç» public static final int SIZE è¡¨ç¤ºcharç±»å‹çš„äºŒè¿›åˆ¶ä½æ•° public static final int BYTES è¡¨ç¤ºcharç±»å‹çš„å­—èŠ‚ä¸ªæ•° public static final Class TYPE è¡¨ç¤ºcharç±»å‹çš„Classå®ä¾‹ ï¼ˆ3ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Character(char value) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦æ•°æ®æ¥æ„é€ å¯¹è±¡ï¼ˆå·²è¿‡æ—¶ï¼‰ char charValue() è·å–è°ƒç”¨å¯¹è±¡ä¸­çš„å­—ç¬¦æ•°æ®å¹¶è¿”å› static Character valueOf(char c) æ ¹æ®å‚æ•°æŒ‡å®šå­—ç¬¦æ•°æ®å¾—åˆ°Characterç±»å‹å¯¹è±¡ boolean equals(Object obj) æ¯”è¾ƒè°ƒç”¨å¯¹è±¡ä¸å‚æ•°æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ç›¸ç­‰ String toString() è¿”å›æè¿°è°ƒç”¨å¯¹è±¡æ•°å€¼çš„å­—ç¬¦ä¸²å½¢å¼ static boolean isUpperCase(char ch) åˆ¤æ–­å‚æ•°æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºå¤§å†™å­—ç¬¦ static boolean isLowerCase(char ch) åˆ¤æ–­å‚æ•°æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºå°å†™å­—ç¬¦ static boolean isDigit(char ch) åˆ¤æ–­å‚æ•°æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºæ•°å­—å­—ç¬¦ static char toUpperCase(char ch) å°†å‚æ•°æŒ‡å®šçš„å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦ static char toLowerCase(char ch) å°†å‚æ•°æŒ‡å®šçš„å­—ç¬¦è½¬æ¢ä¸ºå°å†™å­—ç¬¦ 3.7 åŒ…è£…ç±»ï¼ˆWrapperï¼‰çš„ä½¿ç”¨æ€»ç»“ åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¯¹åº”åŒ…è£…ç±»çš„æ–¹å¼ ï¼šè°ƒç”¨åŒ…è£…ç±»çš„æ„é€ æ–¹æ³•æˆ–é™æ€æ–¹æ³•å³å¯ è·å–åŒ…è£…ç±»å¯¹è±¡ä¸­åŸºæœ¬æ•°æ®ç±»å‹å˜é‡æ•°å€¼çš„æ–¹å¼ï¼šè°ƒç”¨åŒ…è£…ç±»ä¸­çš„xxxValueæ–¹æ³•å³å¯ å­—ç¬¦ä¸²è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ–¹å¼ï¼šè°ƒç”¨åŒ…è£…ç±»ä¸­çš„parseXxxæ–¹æ³•å³å¯ 4. æ•°å­¦å¤„ç†ç±»ï¼ˆç†Ÿæ‚‰ï¼‰4.1 Mathç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ â€‹ java.lang.Mathç±»ä¸»è¦ç”¨äºæä¾›æ‰§è¡Œæ•°å­¦è¿ç®—çš„æ–¹æ³•ï¼Œå¦‚ï¼šå¯¹æ•°ï¼Œå¹³æ–¹æ ¹ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static int max(int a, int b) è¿”å›ä¸¤ä¸ªå‚æ•°ä¸­çš„æœ€å¤§å€¼ static int min(int a, int b) è¿”å›ä¸¤ä¸ªå‚æ•°ä¸­çš„æœ€å°å€¼ static double pow(double a, double b) è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å¹‚ static int abs(int a) è¿”å›å‚æ•°æŒ‡å®šæ•°å€¼çš„ç»å¯¹å€¼ static long round(double a) è¿”å›å‚æ•°å››èˆäº”å…¥çš„ç»“æœ static double sqrt(double a) è¿”å›å‚æ•°çš„å¹³æ–¹æ ¹ static double random() è¿”å›0.0åˆ°1.0çš„éšæœºæ•° 4.2 BigDecimalç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ â€‹ ç”±äºfloatç±»å‹å’Œdoubleç±»å‹åœ¨è¿ç®—æ—¶å¯èƒ½ä¼šæœ‰è¯¯å·®ï¼Œè‹¥å¸Œæœ›å®ç°ç²¾ç¡®è¿ç®—åˆ™å€ŸåŠ© java.math.BigDecimalç±»å‹åŠ ä»¥æè¿°ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» BigDecimal(String val) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡ BigDecimal add(BigDecimal augend) ç”¨äºå®ç°åŠ æ³•è¿ç®— BigDecimal subtract(BigDecimal subtrahend) ç”¨äºå®ç°å‡æ³•è¿ç®— BigDecimal multiply(BigDecimal multiplicand) ç”¨äºå®ç°ä¹˜æ³•è¿ç®— BigDecimal divide(BigDecimal divisor) ç”¨äºå®ç°é™¤æ³•è¿ç®— 4.3 BigIntegerç±»çš„æ¦‚å¿µï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ â€‹ è‹¥å¸Œæœ›è¡¨ç¤ºæ¯”longç±»å‹èŒƒå›´è¿˜å¤§çš„æ•´æ•°æ•°æ®ï¼Œåˆ™éœ€è¦å€ŸåŠ©java.math.BigIntegerç±»å‹æè¿°ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» BigInteger(String val) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡ BigInteger add(BigInteger val) ç”¨äºå®ç°åŠ æ³•è¿ç®— BigInteger subtract(BigInteger val) ç”¨äºå®ç°å‡æ³•è¿ç®— BigInteger multiply(BigInteger val) ç”¨äºå®ç°ä¹˜æ³•è¿ç®— BigInteger divide(BigInteger val) ç”¨äºå®ç°é™¤æ³•è¿ç®— BigInteger remainder(BigInteger val) ç”¨äºå®ç°å–ä½™è¿ç®— BigInteger[] divideAndRemainder(BigInteger val) ç”¨äºå®ç°å–å•†å’Œä½™æ•°çš„è¿ç®—","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"Stringç±»çš„æ¦‚è¿°å’Œä½¿ç”¨","slug":"Stringç±»çš„æ¦‚è¿°å’Œä½¿ç”¨","date":"2019-01-11T09:23:14.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2019/01/11/Stringç±»çš„æ¦‚è¿°å’Œä½¿ç”¨/","link":"","permalink":"http://yournotes.cn/2019/01/11/String%E7%B1%BB%E7%9A%84%E6%A6%82%E8%BF%B0%E5%92%8C%E4%BD%BF%E7%94%A8/","excerpt":"1 Stringç±»çš„æ¦‚å¿µï¼ˆé‡ç‚¹ï¼‰ java.lang.Stringç±»ç”¨äºæè¿°å­—ç¬¦ä¸²ï¼ŒJavaç¨‹åºä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²å­—é¢å€¼éƒ½å¯ä»¥ä½¿ç”¨è¯¥ç±»çš„å¯¹è±¡åŠ ä»¥æ è¿°ï¼Œå¦‚ï¼šâ€abcâ€ã€‚ è¯¥ç±»ç”±finalå…³é”®å­—ä¿®é¥°ï¼Œè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚ ä»jdk1.9å¼€å§‹è¯¥ç±»çš„åº•å±‚ä¸ä½¿ç”¨char[]æ¥å­˜å‚¨","text":"1 Stringç±»çš„æ¦‚å¿µï¼ˆé‡ç‚¹ï¼‰ java.lang.Stringç±»ç”¨äºæè¿°å­—ç¬¦ä¸²ï¼ŒJavaç¨‹åºä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²å­—é¢å€¼éƒ½å¯ä»¥ä½¿ç”¨è¯¥ç±»çš„å¯¹è±¡åŠ ä»¥æ è¿°ï¼Œå¦‚ï¼šâ€abcâ€ã€‚ è¯¥ç±»ç”±finalå…³é”®å­—ä¿®é¥°ï¼Œè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚ ä»jdk1.9å¼€å§‹è¯¥ç±»çš„åº•å±‚ä¸ä½¿ç”¨char[]æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯æ”¹æˆ byte[]åŠ ä¸Šç¼–ç æ ‡è®°ï¼Œä»è€ŒèŠ‚çº¦äº†ä¸€ äº›ç©ºé—´ã€‚ è¯¥ç±»æè¿°çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ä¸ªå¸¸é‡ä¸å¯æ›´æ”¹ï¼Œå› æ­¤å¯ä»¥è¢«å…±äº«ä½¿ç”¨ã€‚ å¦‚ï¼š â€‹ String str1 &#x3D; â€œabcâ€; - å…¶ä¸­â€abcâ€è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸ªå¸¸é‡ä¸å¯æ”¹å˜ â€‹ str1 &#x3D; â€œ123â€; - å°†â€œ123â€å­—ç¬¦ä¸²çš„åœ°å€èµ‹å€¼ç»™å˜é‡str1ã€‚ â€‹ æ”¹å˜str1çš„æŒ‡å‘å¹¶æ²¡æœ‰æ”¹å˜æŒ‡å‘çš„å†…å®¹ 2 å¸¸é‡æ± çš„æ¦‚å¿µï¼ˆåŸç†ï¼‰â€‹ ç”±äºStringç±»å‹æè¿°çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯å¸¸é‡ä¸å¯æ”¹å˜ï¼Œå› æ­¤Javaè™šæ‹Ÿæœºå°†é¦–æ¬¡å‡ºç°çš„å­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡ æ± ä¸­ï¼Œè‹¥åç»­ä»£ç ä¸­å‡ºç°äº†ç›¸åŒå­—ç¬¦ä¸²å†…å®¹åˆ™ç›´æ¥ä½¿ç”¨æ± ä¸­å·²æœ‰çš„å­—ç¬¦ä¸²å¯¹è±¡è€Œæ— éœ€ç”³è¯·å†…å­˜åŠåˆ›å»ºå¯¹ è±¡ï¼Œä»è€Œæé«˜äº†æ€§èƒ½ã€‚ 3 å¸¸ç”¨çš„æ„é€ æ–¹æ³•ï¼ˆç»ƒç†Ÿã€è®°ä½ï¼‰ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String() ä½¿ç”¨æ— å‚æ–¹å¼æ„é€ å¯¹è±¡å¾—åˆ°ç©ºå­—ç¬¦åºåˆ— String(byte[] bytes, int offset, int length) ä½¿ç”¨bytesæ•°ç»„ä¸­ä¸‹æ ‡ä»offsetä½ç½®å¼€å§‹çš„lengthä¸ªå­—èŠ‚æ¥ æ„é€ å¯¹è±¡ String(byte[] bytes) ä½¿ç”¨bytesæ•°ç»„ä¸­çš„æ‰€æœ‰å†…å®¹æ„é€ å¯¹è±¡ String(char[] value, int offset, int count) ä½¿ç”¨valueæ•°ç»„ä¸­ä¸‹æ ‡ä»offsetä½ç½®å¼€å§‹çš„countä¸ªå­—ç¬¦æ¥æ„ é€ å¯¹è±¡ String(char[] value) ä½¿ç”¨valueæ•°ç»„ä¸­çš„æ‰€æœ‰å†…å®¹æ„é€ å¯¹è±¡ String(String original) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²å†…å®¹æ¥æ„é€ å¯¹è±¡ï¼Œæ–°åˆ›å»ºå¯¹è±¡ä¸ºå‚ æ•°å¯¹è±¡çš„å‰¯æœ¬ 4 å¸¸ç”¨çš„æˆå‘˜æ–¹æ³•ï¼ˆç»ƒç†Ÿã€è®°ä½ï¼‰ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String toString() è¿”å›å­—ç¬¦ä¸²æœ¬èº« byte[] getBytes() å°†å½“å‰å­—ç¬¦ä¸²å†…å®¹è½¬æ¢ä¸ºbyteæ•°ç»„å¹¶è¿”å› char[] toCharArray() ç”¨äºå°†å½“å‰å­—ç¬¦ä¸²å†…å®¹è½¬æ¢ä¸ºcharæ•°ç»„å¹¶è¿”å› æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» char charAt(int index) æ–¹æ³•charAtç”¨äºè¿”å›å­—ç¬¦ä¸²æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚ int length() è¿”å›å­—ç¬¦ä¸²å­—ç¬¦åºåˆ—çš„é•¿åº¦ boolean isEmpty() åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º æ¡ˆä¾‹é¢˜ç›® åˆ¤æ–­å­—ç¬¦ä¸²â€œä¸Šæµ·è‡ªæ¥æ°´æ¥è‡ªæµ·ä¸Šâ€æ˜¯å¦ä¸ºå›æ–‡å¹¶æ‰“å°ï¼Œæ‰€è°“å›æ–‡æ˜¯æŒ‡ä¸€ä¸ªå­—ç¬¦åºåˆ—æ— è®ºä»å·¦å‘å³è¯» è¿˜æ˜¯ä»å³å‘å·¦è¯»éƒ½æ˜¯ç›¸åŒçš„å¥å­ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» int compareTo(String anotherString) ç”¨äºæ¯”è¾ƒè°ƒç”¨å¯¹è±¡å’Œå‚æ•°å¯¹è±¡çš„å¤§å°å…³ç³» int compareToIgnoreCase(String str) ä¸è€ƒè™‘å¤§å°å†™ï¼Œä¹Ÿå°±æ˜¯â€™aâ€™å’Œâ€™Aâ€™æ˜¯ç›¸ç­‰çš„å…³ç³» æ¡ˆä¾‹é¢˜ç›® ç¼–ç¨‹å®ç°å­—ç¬¦ä¸²ä¹‹é—´å¤§å°çš„æ¯”è¾ƒå¹¶æ‰“å° æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String concat(String str) ç”¨äºå®ç°å­—ç¬¦ä¸²çš„æ‹¼æ¥ boolean contains(CharSequence s) ç”¨äºåˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å‚æ•°æŒ‡å®šçš„å†…å®¹ String toLowerCase() è¿”å›å­—ç¬¦ä¸²çš„å°å†™å½¢å¼ String toUpperCase() è¿”å›å­—ç¬¦ä¸²çš„å¤§å†™å½¢å¼ String trim() è¿”å›å»æ‰å‰å¯¼å’Œåç»§ç©ºç™½çš„å­—ç¬¦ä¸² boolean startsWith(String prefix) åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥å‚æ•°å­—ç¬¦ä¸²å¼€å¤´ boolean startsWith(String prefix, int toffset) ä»æŒ‡å®šä½ç½®å¼€å§‹æ˜¯å¦ä»¥å‚æ•°å­—ç¬¦ä¸²å¼€å¤´ boolean endsWith(String suffix) åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥å‚æ•°å­—ç¬¦ä¸²ç»“å°¾ æ¡ˆä¾‹é¢˜ç›® ç¼–ç¨‹å®ç°ä¸Šè¿°æ–¹æ³•çš„ä½¿ç”¨ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» boolean equals(Object anObject) ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰å¹¶è¿”å› int hashCode() è·å–è°ƒç”¨å¯¹è±¡çš„å“ˆå¸Œç å€¼ boolean equalsIgnoreCase(String anotherString) ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰å¹¶è¿”å›ï¼Œä¸è€ƒè™‘å¤§å°å†™ï¼Œ å¦‚ï¼šâ€™Aâ€™å’Œâ€™aâ€™æ˜¯ç›¸ç­‰ æ¡ˆä¾‹é¢˜ç›® æç¤ºç”¨æˆ·ä»é”®ç›˜è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ï¼Œè‹¥è¾“å…¥â€adminâ€å’Œâ€123456â€åˆ™æç¤ºâ€œç™»å½•æˆåŠŸï¼Œæ¬¢è¿ä½¿ ç”¨â€ï¼Œå¦åˆ™æç¤ºâ€œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œæ‚¨è¿˜æœ‰næ¬¡æœºä¼šâ€ï¼Œè‹¥ç”¨æˆ·è¾“å…¥ä¸‰æ¬¡åä¾ç„¶é”™è¯¯åˆ™æç¤ºâ€œè´¦æˆ·å·² å†»ç»“ï¼Œè¯·è”ç³»å®¢æœäººå‘˜ï¼â€ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» int indexOf(int ch) ç”¨äºè¿”å›å½“å‰å­—ç¬¦ä¸²ä¸­å‚æ•°chæŒ‡å®šçš„å­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ ä¸‹æ ‡ int indexOf(int ch, int fromIndex) ç”¨äºä»fromIndexä½ç½®å¼€å§‹æŸ¥æ‰¾chæŒ‡å®šçš„å­—ç¬¦ int indexOf(String str) åœ¨å­—ç¬¦ä¸²ä¸­æ£€ç´¢strè¿”å›å…¶ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè‹¥æ‰¾ä¸åˆ° è¿”å›-1 int indexOf(String str, int fromIndex) è¡¨ç¤ºä»å­—ç¬¦ä¸²çš„fromIndexä½ç½®å¼€å§‹æ£€ç´¢strç¬¬ä¸€æ¬¡å‡ºç° çš„ä½ç½® int lastIndexOf(int ch) ç”¨äºè¿”å›å‚æ•°chæŒ‡å®šçš„å­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ int lastIndexOf(int ch, int fromIndex) ç”¨äºä»fromIndexä½ç½®å¼€å§‹æŸ¥æ‰¾chæŒ‡å®šå­—ç¬¦å‡ºç°çš„ä¸‹æ ‡ int lastIndexOf(String str) è¿”å›stræŒ‡å®šå­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ int lastIndexOf(String str, int fromIndex) ç”¨äºä»fromIndexä½ç½®å¼€å§‹åå‘æœç´¢çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ã€‚ æ¡ˆä¾‹é¢˜ç›® ç¼–å†™é€šç”¨çš„ä»£ç å¯ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²â€Good Good Study, Day Day Up!â€ä¸­æ‰€æœ‰â€Dayâ€å‡ºç°çš„ç´¢å¼•ä½ç½®å¹¶ æ‰“å°å‡ºæ¥ã€‚ æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» String substring(int beginIndex, int endIndex) è¿”å›å­—ç¬¦ä¸²ä¸­ä»ä¸‹æ ‡beginIndexï¼ˆåŒ…æ‹¬ï¼‰å¼€å§‹åˆ° endIndexï¼ˆä¸åŒ…æ‹¬ï¼‰ç»“æŸçš„å­å­—ç¬¦ä¸² String substring(int beginIndex) è¿”å›å­—ç¬¦ä¸²ä¸­ä»ä¸‹æ ‡beginIndexï¼ˆåŒ…æ‹¬ï¼‰å¼€å§‹åˆ°å­—ç¬¦ä¸²ç»“å°¾ çš„å­å­—ç¬¦ä¸² æ¡ˆä¾‹é¢˜ç›® æç¤ºç”¨æˆ·ä»é”®ç›˜è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªå­—ç¬¦ï¼Œè¾“å‡ºè¯¥å­—ç¬¦(ä¸å«)åé¢çš„æ‰€æœ‰å­å­—ç¬¦ä¸²ã€‚ 5 æ­£åˆ™è¡¨è¾¾å¼çš„æ¦‚å¿µï¼ˆäº†è§£ï¼‰â€‹ æ­£åˆ™è¡¨è¾¾å¼æœ¬è´¨å°±æ˜¯ä¸€ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ï¼Œå¯ä»¥ç”¨äºå¯¹å­—ç¬¦ä¸²æ•°æ®çš„æ ¼å¼è¿›è¡ŒéªŒè¯ï¼Œä»¥åŠåŒ¹é…ã€æŸ¥ æ‰¾ã€æ›¿æ¢ç­‰æ“ä½œã€‚è¯¥å­—ç¬¦ä¸²é€šå¸¸ä½¿ç”¨^è¿ç®—ç¬¦ä½œä¸ºå¼€å¤´æ ‡å¿—ï¼Œä½¿ç”¨$è¿ç®—ç¬¦ä½œä¸ºç»“å°¾æ ‡å¿—ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥çœ ç•¥ã€‚ 6 æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™ï¼ˆäº†è§£ï¼‰ æ­£åˆ™è¡¨è¾¾å¼ è¯´æ˜ [abc] å¯ä»¥å‡ºç°aã€bã€cä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ [^abc] å¯ä»¥å‡ºç°ä»»ä½•å­—ç¬¦ï¼Œé™¤äº†aã€bã€cçš„ä»»æ„å­—ç¬¦ [a-z] å¯ä»¥å‡ºç°aã€bã€cã€â€¦â€¦ã€zä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [a-zA-Z0-9] å¯ä»¥å‡ºç°azã€AZã€0~9ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼ è¯´æ˜ . ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆé€šå¸¸ä¸åŒ…å«æ¢è¡Œç¬¦ï¼‰ \\d ä»»æ„ä¸€ä¸ªæ•°å­—å­—ç¬¦ï¼Œç›¸å½“äº[0-9] \\D ä»»æ„ä¸€ä¸ªéæ•°å­—å­—ç¬¦ \\s ç©ºç™½å­—ç¬¦ï¼Œç›¸å½“äº[\\t\\n\\x0B\\f\\r] \\S éç©ºç™½å­—ç¬¦ \\w ä»»æ„ä¸€ä¸ªå•è¯å­—ç¬¦ï¼Œç›¸å½“äº[a-zA-Z_0-9] \\W ä»»æ„ä¸€ä¸ªéå•è¯å­—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼ è¯´æ˜ X? è¡¨ç¤ºXå¯ä»¥å‡ºç°ä¸€æ¬¡æˆ–ä¸€æ¬¡ä¹Ÿæ²¡æœ‰ï¼Œä¹Ÿå°±æ˜¯0 ~ 1æ¬¡ X* è¡¨ç¤ºXå¯ä»¥å‡ºç°é›¶æ¬¡æˆ–å¤šæ¬¡ï¼Œä¹Ÿå°±æ˜¯0 ~ næ¬¡ X+ è¡¨ç¤ºXå¯ä»¥å‡ºç°ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œä¹Ÿå°±æ˜¯1 ~ næ¬¡ X{n} è¡¨ç¤ºXå¯ä»¥å‡ºç°æ°å¥½ n æ¬¡ X{nï¼Œ} è¡¨ç¤ºXå¯ä»¥å‡ºç°è‡³å°‘ n æ¬¡ï¼Œä¹Ÿå°±æ˜¯&gt;&#x3D;næ¬¡ X{nï¼Œm} è¡¨ç¤ºXå¯ä»¥å‡ºç°è‡³å°‘ n æ¬¡ï¼Œä½†æ˜¯ä¸è¶…è¿‡ m æ¬¡ï¼Œä¹Ÿå°±æ˜¯&gt;&#x3D;nå¹¶ä¸”&lt;&#x3D;mæ¬¡ 7 æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„æ–¹æ³•ï¼ˆç†Ÿæ‚‰ï¼‰ æ–¹æ³•åç§° æ–¹æ³•è¯´æ˜ boolean matches(String regex) åˆ¤æ–­å½“å‰æ­£åœ¨è°ƒç”¨çš„å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…å‚æ•°æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼è§„ åˆ™ æ¡ˆä¾‹é¢˜ç›® ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æè¿°ä¸€ä¸‹é“¶è¡Œå¡å¯†ç çš„è§„åˆ™ï¼šè¦æ±‚æ˜¯ç”±6ä½æ•°å­—ç»„æˆã€‚ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æè¿°ä¸€ä¸‹QQå·ç çš„è§„åˆ™ï¼šè¦æ±‚æ˜¯ç”±é0å¼€å¤´çš„5~15ä½æ•°ç»„æˆã€‚ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æè¿°ä¸€ä¸‹æ‰‹æœºå·ç çš„è§„åˆ™ï¼šè¦æ±‚æ˜¯ç”±1å¼€å¤´ï¼Œç¬¬äºŒä½æ•°æ˜¯3ã€4ã€5ã€7ã€8ä¸­çš„ä¸€ ä½ï¼Œæ€»å…±11ä½ æè¿°èº«ä»½è¯å·ç çš„è§„åˆ™ï¼šæ€»å…±18ä½ï¼Œ6ä½æ•°å­—ä»£è¡¨åœ°åŒºï¼Œ4ä½æ•°å­—ä»£è¡¨å¹´ï¼Œ2ä½æ•°å­—ä»£è¡¨æœˆï¼Œ2ä½æ•° å­—ä»£è¡¨æ—¥æœŸï¼Œ3ä½æ•°å­—ä»£è¡¨ä¸ªäººï¼Œæœ€åä¸€ä½å¯èƒ½æ•°å­—ä¹Ÿå¯èƒ½æ˜¯Xã€‚ æ–¹æ³•åç§° æ–¹æ³•è¯´æ˜ String[] split(String regex) å‚æ•°regexä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥regexæ‰€è¡¨ç¤ºçš„å­—ç¬¦ä¸²ä¸ºåˆ†éš” ç¬¦ï¼Œå°†å­—ç¬¦ä¸²æ‹†åˆ†æˆå­—ç¬¦ä¸²æ•°ç»„ String replace(char oldChar, char newChar) ä½¿ç”¨å‚æ•°newCharæ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰å‚æ•° oldChar String replaceFirst(String regex, String replacement) æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸² String replaceAll(String regex, String replacement) å°†å­—ç¬¦ä¸²ä¸­åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼regexçš„å­—ç¬¦ä¸²æ›¿æ¢æˆ replacement","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"å¯å˜å­—ç¬¦ä¸²ç±»å’Œæ—¥æœŸç›¸å…³ç±»","slug":"å¯å˜å­—ç¬¦ä¸²ç±»å’Œæ—¥æœŸç›¸å…³ç±»","date":"2018-01-13T12:10:57.000Z","updated":"2025-04-17T08:34:52.021Z","comments":true,"path":"2018/01/13/å¯å˜å­—ç¬¦ä¸²ç±»å’Œæ—¥æœŸç›¸å…³ç±»/","link":"","permalink":"http://yournotes.cn/2018/01/13/%E5%8F%AF%E5%8F%98%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%92%8C%E6%97%A5%E6%9C%9F%E7%9B%B8%E5%85%B3%E7%B1%BB/","excerpt":"1. å¯å˜å­—ç¬¦ä¸²ç±»ï¼ˆé‡ç‚¹ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ ç”±äºStringç±»æè¿°çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ä¸ªå¸¸é‡ä¸å¯æ”¹å˜ï¼Œå½“éœ€è¦åœ¨Javaä»£ç ä¸­æè¿°å¤§é‡ç±»ä¼¼çš„å­—ç¬¦ä¸²æ—¶ï¼Œåªèƒ½å•ç‹¬ç”³è¯·å’Œå­˜å‚¨ï¼Œæ­¤æ—¶ä¼šé€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹ã€‚","text":"1. å¯å˜å­—ç¬¦ä¸²ç±»ï¼ˆé‡ç‚¹ï¼‰1.1 åŸºæœ¬æ¦‚å¿µ ç”±äºStringç±»æè¿°çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ä¸ªå¸¸é‡ä¸å¯æ”¹å˜ï¼Œå½“éœ€è¦åœ¨Javaä»£ç ä¸­æè¿°å¤§é‡ç±»ä¼¼çš„å­—ç¬¦ä¸²æ—¶ï¼Œåªèƒ½å•ç‹¬ç”³è¯·å’Œå­˜å‚¨ï¼Œæ­¤æ—¶ä¼šé€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹ã€‚ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨java.lang.StringBuilderç±»å’Œjava.lang.StringBufferç±»æ¥æè¿°å­—ç¬¦åºåˆ—å¯ä»¥æ”¹å˜çš„å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šâ€abâ€ã€‚ StringBufferç±»æ˜¯ä»jdk1.0å¼€å§‹å­˜åœ¨ï¼Œå±äºçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œå› æ­¤æ•ˆç‡æ¯”è¾ƒä½ã€‚ StringBuilderç±»æ˜¯ä»jdk1.5å¼€å§‹å­˜åœ¨ï¼Œå±äºéçº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚ 1.2 StringBuilderç±»å¸¸ç”¨çš„æ„é€ æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» StringBuilder() ä½¿ç”¨æ— å‚æ–¹å¼æ„é€ å¯¹è±¡ï¼Œå®¹é‡ä¸º16 StringBuilder(int capacity) æ ¹æ®å‚æ•°æŒ‡å®šçš„å®¹é‡æ¥æ„é€ å¯¹è±¡ï¼Œå®¹é‡ä¸ºå‚æ•°æŒ‡å®šå¤§å° StringBuilder(String str) æ ¹æ®å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡ï¼Œå®¹é‡ä¸ºï¼š16+å­—ç¬¦ä¸²é•¿åº¦ 1.3 StringBuilderç±»å¸¸ç”¨çš„æˆå‘˜æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» int capacity() ç”¨äºè¿”å›è°ƒç”¨å¯¹è±¡çš„å®¹é‡ int length() ç”¨äºè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦çš„ä¸ªæ•° StringBuilder insert(int offset, String str) æ’å…¥å­—ç¬¦ä¸²å¹¶è¿”å›è°ƒç”¨å¯¹è±¡çš„å¼•ç”¨ï¼Œå°±æ˜¯è‡ª å·±ã€‚ StringBuilder append(String str) è¿½åŠ å­—ç¬¦ä¸² StringBuilder deleteCharAt(int index) å°†å½“å‰å­—ç¬¦ä¸²ä¸­ä¸‹æ ‡ä¸ºindexä½ç½®çš„å•ä¸ªå­—ç¬¦ åˆ é™¤ StringBuilder delete(int startï¼Œint end) åˆ é™¤å­—ç¬¦ä¸² StringBuilder replace(int startï¼Œint endï¼Œ String str) æ›¿æ¢å­—ç¬¦ä¸² StringBuilder reverse() å­—ç¬¦ä¸²åè½¬ æ³¨æ„ ä½œä¸ºå‚æ•°ä¼ é€’çš„è¯ï¼Œæ–¹æ³•å†…éƒ¨Stringä¸ä¼šæ”¹å˜å…¶å€¼ï¼ŒStringBufferå’ŒStringBuilderä¼šæ”¹å˜å…¶å€¼ã€‚ è¿”å›å€¼çš„è®¾è®¡ StringBuilderçš„å¾ˆå¤šæ–¹æ³•çš„è¿”å›å€¼å‡ä¸ºStringBuilderç±»å‹ã€‚è¿™äº›æ–¹æ³•çš„è¿”å›è¯­å¥å‡ä¸ºï¼šreturn thisã€‚ ç”±æ­¤å¯è§ï¼Œè¿™äº›æ–¹æ³•åœ¨å¯¹StringBuilderæ‰€å°è£…çš„å­—ç¬¦åºåˆ—è¿›è¡Œæ”¹å˜ååˆè¿”å›äº†è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚åŸº äºè¿™æ ·è®¾è®¡çš„ç›®çš„åœ¨äºå¯ä»¥è¿ç»­è°ƒç”¨ã€‚ 2. Java8ä¹‹å‰çš„æ—¥æœŸç›¸å…³ç±»ï¼ˆç†Ÿæ‚‰ï¼‰2.1 Systemç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ Java.lang.Systemç±»ä¸­æä¾›äº†ä¸€äº›æœ‰ç”¨çš„ç±»å­—æ®µå’Œæ–¹æ³•ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» Date() ä½¿ç”¨æ— å‚çš„æ–¹å¼æ„é€ å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç³»ç»Ÿæ—¶é—´ Date(long date) æ ¹æ®å‚æ•°æŒ‡å®šæ¯«ç§’æ•°æ„é€ å¯¹è±¡ï¼Œ å‚æ•°ä¸ºè·ç¦»1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ çš„æ¯«ç§’æ•° long getTime() è·å–è°ƒç”¨å¯¹è±¡è·ç¦»1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’çš„æ¯«ç§’æ•° void setTime(long time) è®¾ç½®è°ƒç”¨å¯¹è±¡ä¸ºè·ç¦»åŸºå‡†æ—¶é—´timeæ¯«ç§’çš„æ—¶é—´ç‚¹ 2.2 SimpleDateFormatç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.text.SimpleDateFormatç±»ä¸»è¦ç”¨äºå®ç°æ—¥æœŸå’Œæ–‡æœ¬ä¹‹é—´çš„è½¬æ¢ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» SimpleDateFormat() ä½¿ç”¨æ— å‚æ–¹å¼æ„é€ å¯¹è±¡ SimpleDateFormat(String pattern) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ¨¡å¼æ¥æ„é€ å¯¹è±¡ï¼Œæ¨¡å¼ä¸»è¦æœ‰: y-å¹´ M-æœˆ d-æ—¥ H-æ—¶ m-åˆ† s-ç§’ final String format(Date date) ç”¨äºå°†æ—¥æœŸç±»å‹è½¬æ¢ä¸ºæ–‡æœ¬ç±»å‹ Date parse(String source) ç”¨äºå°†æ–‡æœ¬ç±»å‹è½¬æ¢ä¸ºæ—¥æœŸç±»å‹ 2.3 Calendarç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.util.Calenderç±»ä¸»è¦ç”¨äºæè¿°ç‰¹å®šçš„ç¬é—´ï¼Œå–ä»£Dateç±»ä¸­çš„è¿‡æ—¶æ–¹æ³•å®ç°å…¨çƒåŒ–ã€‚ è¯¥ç±»æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå› æ­¤ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ï¼Œå…¶å…·ä½“å­ç±»é’ˆå¯¹ä¸åŒå›½å®¶çš„æ—¥å†ç³»ç»Ÿï¼Œå…¶ä¸­åº”ç”¨æœ€å¹¿æ³›çš„ æ˜¯GregorianCalendarï¼ˆæ ¼é‡Œé«˜åˆ©å†ï¼‰ï¼Œå¯¹åº”ä¸–ç•Œä¸Šç»å¤§å¤šæ•°å›½å®¶&#x2F;åœ°åŒºä½¿ç”¨çš„æ ‡å‡†æ—¥å†ç³»ç»Ÿã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static Calendar getInstance() ç”¨äºè·å–Calendarç±»å‹çš„å¼• ç”¨ void set(int year, int month, int date, int hourOfDay, int minute, int second) ç”¨äºè®¾ç½®å¹´æœˆæ—¥æ—¶åˆ†ç§’ä¿¡æ¯ Date getTime() ç”¨äºå°†Calendarç±»å‹è½¬æ¢ä¸º Dateç±»å‹ void set(int field, int value) è®¾ç½®æŒ‡å®šå­—æ®µçš„æ•°å€¼ void add(int field, int amount) å‘æŒ‡å®šå­—æ®µå¢åŠ æ•°å€¼ ï¼ˆ2ï¼‰å¤šæ€çš„ä½¿ç”¨åœºåˆ é€šè¿‡æ–¹æ³•çš„å‚æ•°ä¼ é€’å½¢æˆå¤šæ€ 1234public static void draw(Shape s)&#123; s.show(); &#125; draw(new Rect(1, 2, 3, 4)); åœ¨æ–¹æ³•ä½“ä¸­ç›´æ¥ä½¿ç”¨å¤šæ€çš„è¯­æ³•æ ¼å¼ 1Account acc = new FixedAccount(); é€šè¿‡æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å½¢æˆå¤šæ€ 123Calender getInstance()&#123; return new GregorianCalendar(zone, aLocale); &#125; 3. Java8ä¸­çš„æ—¥æœŸç›¸å…³ç±»ï¼ˆç†Ÿæ‚‰ï¼‰3.1 Java8æ—¥æœŸç±»çš„ç”±æ¥ â€‹ JDK 1.0ä¸­åŒ…å«äº†ä¸€ä¸ªjava.util.Dateç±»ï¼Œä½†æ˜¯å®ƒçš„å¤§å¤šæ•°æ–¹æ³•å·²ç»åœ¨JDK 1.1å¼•å…¥Calendarç±»ä¹‹åè¢« å¼ƒç”¨ äº†ã€‚è€ŒCalendarå¹¶ä¸æ¯”Dateå¥½å¤šå°‘ã€‚å®ƒä»¬é¢ä¸´çš„é—®é¢˜æ˜¯ï¼š Dateç±»ä¸­çš„å¹´ä»½æ˜¯ä»1900å¼€å§‹çš„ï¼Œè€Œæœˆä»½éƒ½ä»0å¼€å§‹ã€‚ æ ¼å¼åŒ–åªå¯¹Dateç±»æœ‰ç”¨ï¼Œå¯¹Calendarç±»åˆ™ä¸èƒ½ä½¿ç”¨ã€‚ éçº¿ç¨‹å®‰å…¨ç­‰ã€‚ 3.2 Java8æ—¥æœŸç±»çš„æ¦‚è¿° Java 8é€šè¿‡å‘å¸ƒæ–°çš„Date-Time APIæ¥è¿›ä¸€æ­¥åŠ å¼ºå¯¹ æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†ã€‚ java.timeåŒ…ï¼šè¯¥åŒ…æ—¥æœŸ&#x2F;æ—¶é—´APIçš„åŸºç¡€åŒ…ã€‚ java.time.chronoåŒ…ï¼šè¯¥åŒ…æä¾›å¯¹ä¸åŒæ—¥å†ç³»ç»Ÿçš„è®¿é—®ã€‚ java.time.formatåŒ…ï¼šè¯¥åŒ…èƒ½å¤Ÿæ ¼å¼åŒ–å’Œè§£ææ—¥æœŸæ—¶é—´å¯¹è±¡ã€‚ java.time.temporalåŒ…ï¼šè¯¥åŒ…åŒ…å«åº•å±‚æ¡†æ¶å’Œæ‰©å±•ç‰¹æ€§ã€‚ java.time.zoneåŒ…ï¼šè¯¥åŒ…æ”¯æŒä¸åŒæ—¶åŒºä»¥åŠç›¸å…³è§„åˆ™çš„ç±»ã€‚ 3.3 LocalDateç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.time.LocalDateç±»ä¸»è¦ç”¨äºæè¿°å¹´-æœˆ-æ—¥æ ¼å¼çš„æ—¥æœŸä¿¡æ¯ï¼Œè¯¥ç±»ä¸è¡¨ç¤ºæ—¶é—´å’Œæ—¶åŒºä¿¡æ¯ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static LocalDate now() åœ¨é»˜è®¤æ—¶åŒºä¸­ä»ç³»ç»Ÿæ—¶é’Ÿè·å–å½“å‰æ—¥æœŸ 3.4 LocalTimeç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.time.LocalTime ç±»ä¸»è¦ç”¨äºæè¿°æ—¶é—´ä¿¡æ¯ï¼Œå¯ä»¥æè¿°æ—¶åˆ†ç§’ä»¥åŠçº³ç§’ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static LocalTime now() ä»é»˜è®¤æ—¶åŒºçš„ç³»ç»Ÿæ—¶é—´ä¸­è·å–å½“å‰æ—¶é—´ static LocalTime now(ZoneId zone) è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¶é—´ 3.5 LocalDateTimeç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.time.LocalDateTimeç±»ä¸»è¦ç”¨äºæè¿°ISO-8601æ—¥å†ç³»ç»Ÿä¸­æ²¡æœ‰æ—¶åŒºçš„æ—¥æœŸæ—¶é—´ï¼Œå¦‚2007-12- 03T10:15:30ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static LocalDateTime now() ä»é»˜è®¤æ—¶åŒºçš„ç³»ç»Ÿæ—¶é—´ä¸­è·å–å½“å‰æ—¶é—´ static LocalDateTime of(int year, int month, int dayOfMonth, int hour, int minute, int second) æ ¹æ®å‚æ•°æŒ‡å®šçš„å¹´æœˆæ—¥æ—¶åˆ†ç§’ ä¿¡æ¯æ¥è®¾ç½®æ—¥æœŸæ—¶é—´ int getYear() è·å–å¹´ä»½å­—æ®µçš„æ•°å€¼ int getMonthValue() è·å–1åˆ°12ä¹‹é—´çš„æœˆä»½å­—æ®µ int getDayOfMonth() è·å–æ—¥æœŸå­—æ®µ int getHour() è·å–å°æ—¶æ•° int getMinute() è·å–åˆ†é’Ÿæ•° int getSecond() è·å–ç§’æ•° LocalDateTime withYear(int year) è®¾ç½®ä¸ºå‚æ•°æŒ‡å®šçš„å¹´ LocalDateTime withMonth(int month) è®¾ç½®ä¸ºå‚æ•°æŒ‡å®šçš„æœˆ LocalDateTime withDayOfMonth(int dayOfMonth) è®¾ç½®ä¸ºå‚æ•°æŒ‡å®šçš„æ—¥ LocalDateTime withHour(int hour) è®¾ç½®ä¸ºå‚æ•°æŒ‡å®šçš„æ—¶ LocalDateTime withMinute(int minute) è®¾ç½®ä¸ºå‚æ•°æŒ‡å®šçš„åˆ† LocalDateTime withSecond(int second) è®¾ç½®ä¸ºå‚æ•°æŒ‡å®šçš„ç§’ LocalDateTime plusYears(long years) åŠ ä¸Šå‚æ•°æŒ‡å®šçš„å¹´ LocalDateTime plusMonths(long months) åŠ ä¸Šå‚æ•°æŒ‡å®šçš„æœˆ LocalDateTime plusDays(long days) åŠ ä¸Šå‚æ•°æŒ‡å®šçš„æ—¥ LocalDateTime plusHours(long hours) åŠ ä¸Šå‚æ•°æŒ‡å®šçš„æ—¶ LocalDateTime plusMinutes(long minutes) åŠ ä¸Šå‚æ•°æŒ‡å®šçš„åˆ† LocalDateTime plusSeconds(long seconds) åŠ ä¸Šå‚æ•°æŒ‡å®šçš„ç§’ LocalDateTime minusYears(long years) å‡å»å‚æ•°æŒ‡å®šçš„å¹´ LocalDateTime minusMonths(long months) å‡å»å‚æ•°æŒ‡å®šçš„æœˆ LocalDateTime minusDays(long days) å‡å»å‚æ•°æŒ‡å®šçš„æ—¥ LocalDateTime minusHours(long hours) å‡å»å‚æ•°æŒ‡å®šçš„æ—¶ LocalDateTime minusMinutes(long minutes) å‡å»å‚æ•°æŒ‡å®šçš„åˆ† LocalDateTime minusSeconds(long seconds) å‡å»å‚æ•°æŒ‡å®šçš„ç§’ 3.6 Instantç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.time.Instantç±»ä¸»è¦ç”¨äºæè¿°ç¬é—´çš„æ—¶é—´ç‚¹ä¿¡æ¯ã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static Instant now() ä»ç³»ç»Ÿæ—¶é’Ÿä¸Šè·å–å½“å‰æ—¶é—´ OffsetDateTime atOffset(ZoneOffset offset) å°†æ­¤ç¬é—´ä¸åç§»é‡ç»„åˆä»¥åˆ›å»ºåç§»æ—¥æœŸæ—¶é—´ static Instant ofEpochMilli(long epochMilli) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ¯«ç§’æ•°æ¥æ„é€ å¯¹è±¡ï¼Œå‚æ•°ä¸ºè·ç¦»1970å¹´1æœˆ1 æ—¥0æ—¶0åˆ†0ç§’çš„æ¯«ç§’æ•° long toEpochMilli() è·å–è·ç¦»1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’çš„æ¯«ç§’æ•° 3.7 DateTimeFormatterç±»çš„æ¦‚è¿°ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ java.time.format.DateTimeFormatterç±»ä¸»è¦ç”¨äºæ ¼å¼åŒ–å’Œè§£ææ—¥æœŸã€‚ ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–¹æ³• æ–¹æ³•å£°æ˜ åŠŸèƒ½ä»‹ç» static DateTimeFormatter ofPattern(String pattern) æ ¹æ®å‚æ•°æŒ‡å®šçš„æ¨¡å¼æ¥è·å–å¯¹è±¡ String format(TemporalAccessor temporal) å°†å‚æ•°æŒ‡å®šæ—¥æœŸæ—¶é—´è½¬æ¢ä¸ºå­—ç¬¦ä¸² TemporalAccessor parse(CharSequence text) å°†å‚æ•°æŒ‡å®šå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸæ—¶é—´","categories":[{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]},{"title":"HTMLè¯¦è§£","slug":"html","date":"2017-01-04T01:51:59.000Z","updated":"2025-04-17T08:34:52.019Z","comments":true,"path":"2017/01/04/html/","link":"","permalink":"http://yournotes.cn/2017/01/04/html/","excerpt":"1. HTMLä»‹ç»&amp;è§„èŒƒ1.1 ä»‹ç»HTML æŒ‡çš„æ˜¯è¶…æ–‡æœ¬æ ‡è®°&#x2F;æ ‡ç­¾è¯­è¨€ (Hyper Text Markup Language)ä¸“é—¨åˆ¶ä½œç½‘é¡µçš„è®¡ç®—æœºè¯­è¨€","text":"1. HTMLä»‹ç»&amp;è§„èŒƒ1.1 ä»‹ç»HTML æŒ‡çš„æ˜¯è¶…æ–‡æœ¬æ ‡è®°&#x2F;æ ‡ç­¾è¯­è¨€ (Hyper Text Markup Language)ä¸“é—¨åˆ¶ä½œç½‘é¡µçš„è®¡ç®—æœºè¯­è¨€ æ™®é€šçš„æ–‡æœ¬å°±æ˜¯è‹±æ–‡å•è¯ï¼Œè‹±æ–‡å­—æ¯ä¸€æ ·çš„å­˜åœ¨ã€‚è¶…æ–‡æœ¬çš„æ„æ€æ˜¯æœ‰ä¸€äº›å•è¯æˆ–å­—æ¯ï¼Œåœ¨ç½‘é¡µæµè§ˆå™¨çš„ä¸–ç•Œä¸­è¢«èµ‹äºˆäº†ç‰¹æ®Šçš„æƒåˆ©ã€‚ æ¯”å¦‚ï¼šæˆ‘ä»¬éƒ½æ˜¯æ™®é€šäººï¼Œä½†æ˜¯æœ‰äº›äººç»è¿‡å›½å®¶çš„é€‰æ‹”ï¼Œç©¿ä¸Šè­¦æœä¹‹åï¼Œä»–å°±è¢«èµ‹äºˆäº†æ‰§æ³•çš„ç‰¹æ®Šæƒåˆ©ï¼Œæ™®é€šäººæ˜¯æ²¡æœ‰æ‰§æ³•æƒçš„ã€‚å­—æ¯imgåªæ˜¯æ™®é€šçš„å­—æ¯ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šçš„å«ä¹‰ã€‚è€Œè¢«åŠ ä¸Šå°–æ‹¬å·åï¼Œåœ¨ç½‘é¡µçš„ä¸–ç•Œä¸­ï¼Œå°±å…·å¤‡äº†æ˜¾ç¤ºå›¾ç‰‡çš„ä½œç”¨ã€‚ 1.2 ä½¿ç”¨è®°äº‹æœ¬å¼€å‘ç¬¬ä¸€ä¸ªç½‘é¡µåœ¨è®¡ç®—æœºä»»æ„çš„ä½ç½®ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç™½çš„è®°äº‹æœ¬ é‡ç‚¹ï¼šæ–‡ä»¶çš„åç¼€åå¿…é¡»æ˜¯ â€œhtmâ€ æˆ– â€œhtmlâ€ é¼ æ ‡å³é”®æ–‡ä»¶ï¼Œé€‰æ‹©æ‰“å¼€æ–¹å¼ä¸ºâ€è®°äº‹æœ¬â€ï¼Œè¾“å…¥ä¸‹é¢ä»£ç  123456&lt;html&gt; &lt;head&gt; &lt;title&gt;Jasper&lt;/title&gt; &lt;/head&gt; &lt;body&gt;æœ¨ç“œç…²é¸¡è„š&lt;/body&gt; &lt;/html&gt; ä¿å­˜æ–‡ä»¶ï¼ŒåŒå‡»æ–‡ä»¶ä¼šä»¥è®¡ç®—æœºé»˜è®¤çš„æµè§ˆå™¨è¿è¡Œï¼Œä½ çš„ç¬¬ä¸€ä¸ªç½‘é¡µå°±åˆ¶ä½œå®Œæˆäº†ï¼ æ³¨æ„ï¼š &lt;html&gt;æ ‡ç­¾å®ƒä»£è¡¨å½“å‰é¡µé¢æ˜¯ä¸€ä¸ªHTML &lt;head&gt;æ ‡ç­¾ä¸­å¯ä»¥å£°æ˜HTMLé¡µé¢çš„ç›¸å…³ä¿¡æ¯ &lt;body&gt;æ ‡ç­¾è¦æœ‰å¼€å§‹ï¼Œæœ‰ä»‹ç»ï¼ŒæˆåŒæˆå¯¹ å¼€å§‹æ ‡ç­¾ä¸ç»“æŸæ ‡ç­¾ä¸­çš„å†…å®¹æ˜¯æ ‡ç­¾çš„å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰æ ‡ç­¾å†…å®¹ï¼Œå¯ä»¥è®©æ ‡ç­¾è‡ªå…³é—­&lt;br/&gt; å¤§å¤šæ•°æ ‡ç­¾å®ƒå…·æœ‰å±æ€§,å±æ€§å€¼è¦ä½¿ç”¨å¼•å·å¼•èµ·æ¥ã€‚ HTMLå®ƒæœ¬èº«æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ 1.3 ä¸‹è½½å®‰è£…VSCodeè®°äº‹æœ¬ç¼–å†™ç½‘é¡µä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æ¨èä¸€æ¬¾ç¼–å†™ç½‘é¡µçš„ç¥å™¨ï¼ 1.3.1 ä¸‹è½½åœ°å€https://code.visualstudio.com/ 1.3.2 åˆå§‹ä¸­æ–‡è®¾ç½®å®‰è£…vscodeä¹‹åï¼Œåœ¨ç•Œé¢çš„å·¦ä¾§ï¼Œé€‰æ‹©å®‰è£…ä¸­æ–‡æ’ä»¶ã€‚ ç‚¹å‡»å®‰è£…åï¼Œå³ä¸‹è§’ä¼šå¼¹å‡ºé‡å¯çš„çª—å£ é‡å¯å°±å¯ä»¥äº† 1.3.3 åˆ›å»ºé¡¹ç›®vscodeæœ¬èº«æ²¡æœ‰æ–°å»ºé¡¹ç›®çš„é€‰é¡¹ï¼Œæ‰€ä»¥è¦å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ï¼Œå¦‚: vscodeç›®å½• ç„¶åæ‰“å¼€vscodeè½¯ä»¶ï¼Œåœ¨vscodeè½¯ä»¶ä¸­é€‰æ‹© File -&gt; Open Folder æ‰“å¼€åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶å¤¹ å³é”®ç›®å½•ï¼Œåˆ›å»ºå­ç›®å½•my-htmlï¼Œåœ¨my-htmlç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œè¾“å…¥Test1.html åœ¨ä»£ç ç¼–è¾‘åŒºï¼Œæœ€ä¸Šé¢è¾“å…¥ï¼å›è½¦ï¼Œå°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ» 1.3.4 è¿è¡Œé¡µé¢éœ€è¦å®‰è£…æ’ä»¶ â€œopen in browser â€ å®‰è£…å®Œæ’ä»¶ï¼Œå³é”®æƒ³è¦è¿è¡Œçš„é¡µé¢æ–‡ä»¶ï¼Œæˆ–è€… ä½¿ç”¨å¿«æ·é”® alt+b è¿™é‡Œæ¨èä½¿ç”¨chromeè°·æ­Œæµè§ˆå™¨ï¼Œç²¾ç®€ï¼Œé€Ÿåº¦å¿«ã€‚ å…ˆå®‰è£…å¥½chromeæµè§ˆå™¨ ä¿®æ”¹é»˜è®¤çš„æµè§ˆå™¨ï¼šé¦–é¡µçš„è®¾ç½® æ·»åŠ ä»£ç  1&quot;open-in-browser.default&quot;:&quot;chrome&quot; 2. HTMLçš„ä½¿ç”¨2.1 æ–‡ä»¶æ ‡ç­¾&lt;html&gt; æ ‡ç­¾ï¼š ä»£è¡¨å½“å‰ä¹¦å†™çš„æ˜¯ä¸€ä¸ªHTMLæ–‡æ¡£ &lt;head&gt; æ ‡ç­¾ï¼šå­˜å‚¨çš„æœ¬é¡µé¢çš„ä¸€äº›é‡è¦çš„ä¿¡æ¯ï¼Œå®ƒä¸ä¼šæ˜¾ç¤º &lt;head&gt; æ ‡ç­¾ï¼šæœ‰ä¸€ä¸ªå­æ ‡ç­¾&lt;title&gt;å®ƒæ˜¯ç”¨äºå®šä¹‰é¡µé¢çš„æ ‡é¢˜çš„ &lt;body&gt; æ ‡ç­¾ï¼šä¹¦å†™çš„å†…å®¹ä¼šæ˜¾ç¤ºå‡ºæ¥ &lt;body&gt;æ ‡ç­¾çš„å±æ€§ï¼š text ç”¨äºè®¾ç½®æ–‡å­—é¢œè‰² bgcolor ç”¨äºè®¾ç½®é¡µé¢çš„èƒŒæ™¯è‰² background ç”¨äºè®¾ç½®é¡µé¢çš„èƒŒæ™¯å›¾ç‰‡ 2.2 æ’ç‰ˆæ ‡ç­¾2.2.1 HTMLæ³¨é‡Š 2.2.2æ¢è¡Œæ ‡ç­¾&lt;br/&gt; æ ‡ç­¾å°±æ˜¯ä¸€ä¸ªæ¢è¡Œï¼ˆå›è½¦ï¼‰åŠŸèƒ½æ ‡ç­¾ï¼Œæ ‡ç­¾ä¸­çš„ &#x2F; å¯æœ‰å¯æ— çš„ã€‚ æœ‰&#x2F;æ˜¯htmlè¯­è¨€çš„æ ‡å‡†åŒ–ï¼Œä½†æ˜¯htmlè¯­è¨€æ˜¯ä¸€é—¨ä¸é‚£ä¹ˆä¸¥è°¨çš„è¯­è¨€ 2.2.3 æ®µè½æ ‡ç­¾åœ¨&lt;p&gt;æ ‡ç­¾ä¸­çš„å†…å®¹,ä¼šåœ¨å¼€å§‹ä¸ç»“æŸä¹‹é—´äº§ç”Ÿä¸€ä¸ªç©ºç™½è¡Œï¼Œå¹¶ä¸”å®ƒä¼šè‡ªåŠ¨æ¢è¡Œ. å¸¸ç”¨å±æ€§ align å®ƒçš„ä½œç”¨æ˜¯è®¾ç½®æ®µè½ä¸­çš„å†…å®¹å¯¹é½æ–¹å¼ å¯å–å€¼æœ‰ left right center 2.2.4 æ°´å¹³çº¿æ ‡ç­¾&lt;hr&gt;æ ‡ç­¾ä¼šåœ¨é¡µé¢ä¸Šäº§ç”Ÿä¸€ä¸ªæ°´å¹³çº¿ å¯¹äºhræ ‡ç­¾å®ƒæœ‰å¸¸ç”¨å±æ€§: alignï¼šå¯å–å€¼æœ‰left right center ä»£è¡¨æ°´å¹³çº¿ä½ç½® sizeï¼šä»£è¡¨æ°´å¹³çº¿åšåº¦ï¼ˆç²—ç»†ï¼‰ widthï¼šä»£è¡¨æ°´å¹³çº¿å®½åº¦ colorï¼šæ°´å¹³çº¿çš„é¢œè‰² å•ä½ï¼šsize&#x3D;â€5â€ï¼Œ5æ˜¯é»˜è®¤çš„å•ä½ï¼Œä¸ºâ€åƒç´ â€&#x2F;â€œåƒç´ ç‚¹â€ï¼Œåƒç´ å°±æ˜¯æ„æˆè®¡ç®—æœºå›¾ç‰‡çš„æœ€å°å•ä½ï¼ä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”ï¼Œsize&#x3D;â€50%â€ 2.2.5 åˆ†åŒºæ ‡ç­¾divæ˜¯ä¸€ä¸ªå—æ ‡ç­¾ï¼Œç”¨æ¥è¿›è¡Œå¸ƒå±€çš„ æ™®é€šçš„divå¹¶æ²¡æœ‰ä»€ä¹ˆæ•ˆæœï¼Œè‚‰çœ¼ä¹Ÿçœ‹ä¸è§ï¼Œä½†divä¸CSSç»“åˆï¼Œå°±ä¼šæ›´å¥½å¯¹é¡µé¢è¿›è¡Œæ’ç‰ˆ divä¸spanéƒ½æ˜¯â€œå®¹å™¨â€çš„ä½œç”¨ï¼Œå…·ä½“åŒºåˆ«: divä¼šè‡ªåŠ¨æ¢è¡Œï¼Œæˆ‘ä»¬ä¹Ÿå«è¿™æ ·çš„æ ‡ç­¾ä¸ºå—çº§å…ƒç´  spanæ ‡ç­¾å®ƒä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œæˆ‘ä»¬ä¹Ÿå«å®ƒä¸ºè¡Œå†…å…ƒç´  divï¼šæ•´ä½“åˆ’åˆ†åŒºå— spanï¼šå±€éƒ¨åˆ’åˆ† ä¸¤ä¸ªdivçš„åŒºåˆ«æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œåé¢æˆ‘ä»¬å†å…·ä½“å­¦ä¹ cssè¯­æ³• 2.3 å­—ä½“æ ‡ç­¾2.3.1 å­—ä½“æ ‡ç­¾&lt;font&gt;æ ‡ç­¾å¯ä»¥è®¾ç½®å­—ä½“ï¼Œå­—çš„å¤§å°åŠé¢œè‰²ï¼Œå¸¸ç”¨å±æ€§ï¼š face:ç”¨äºè®¾ç½®å­—ä½“ï¼Œä¾‹å¦‚ å®‹ä½“ éš¶ä¹¦ æ¥·ä½“ size:ç”¨äºè®¾ç½®å­—çš„å¤§å°ï¼ˆå¤§å°é»˜è®¤è®¾ç½®1-7ï¼Œ7æœ€å¤§ï¼Œæƒ³æ›´å¤§ï¼Œå¾€åå­¦csså³å¯ï¼‰ color:ç”¨äºè®¾ç½®å­—çš„é¢œè‰² æ³¨ï¼š æˆ‘ä»¬æ‰€çœ‹åˆ°çš„å±å¹•ä¸Šæ‰€æœ‰çš„é¢œè‰²éƒ½æ˜¯ç”±çº¢ã€ç»¿ã€è“è¿™ä¸‰ç§åŸºè‰²è°ƒæ··åˆè€Œæˆçš„ã€‚ æ¯ä¸€ç§é¢œè‰²çš„é¥±å’Œåº¦å’Œé€æ˜åº¦éƒ½æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œç”¨0ï½255çš„æ•°å€¼æ¥è¡¨ç¤ºã€‚å¦‚çº¯çº¢è‰²è¡¨ç¤ºä¸ºï¼ˆ255ï¼Œ0ï¼Œ 0ï¼‰ï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºä¸º#FF0000ã€‚ æŒ‰è¿™ç§è¡¨è¾¾æ–¹å¼ï¼Œç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥å¾—åˆ°256 * 256 * 256 &#x3D; 16777216ç§é¢œè‰²ã€‚ ä½¿ç”¨åå…­è¿›åˆ¶æ–¹å¼ï¼Œå–å€¼èŒƒå›´ #000000 ~ #FFFFFF ï¼ˆé»‘è‰²åˆ°ç™½è‰²ï¼‰ã€‚å½“é¢œè‰²å€¼ä¸º#cc3300 æ—¶ï¼Œå¯ç®€åŒ–æˆ #c30 è¿™ç§æ–¹å¼ 1&lt;body bgcolor=&quot;#666&quot;&gt; RGBé¢œè‰²è¡¨ç¤ºæ³•ï¼šRGBï¼ˆx,y,zï¼‰ã€‚xã€yã€zæ˜¯0 ï½ 255ä¹‹é—´çš„æ•´æ•°ã€‚rgbå­—æ¯å¤§å°å†™æ— æ‰€è°“ 1&lt;body bgcolor=&quot;rgb(11,11,11)&quot;&gt; ï¼ˆåœ¨çº¿é¢œè‰²é€‰æ‹©å™¨ï¼š http://www.86y.org/code/colorpicker/color.html ï¼‰ æŸ¥çœ‹ç”µè„‘å·²æœ‰çš„å­—ä½“æ‰èƒ½æ˜¾ç¤ºï¼Œè¿™é‡Œä½¿ç”¨ä»¿å®‹ ä¹Ÿå¯ä¸‹è½½åˆ«çš„ï¼Œç™¾åº¦æœç´¢ï¼šå­—é­‚ç½‘ï¼Œä¸‹è½½ä¸€ä¸ªå…è´¹çš„å­—ä½“ï¼Œå¹¶å®‰è£…åˆ°è®¡ç®—æœºä¸­ã€‚åœ¨æˆ‘ä»¬çš„ç½‘é¡µä¸­æ˜¾ç¤ºå‡ºæ¥ï¼ 2.3.2 æ ‡é¢˜æ ‡è®°ç»™ä¸€æ®µæ–‡å­—èµ·ä¸€ä¸ªæ ‡é¢˜ &lt;h1&gt; ----- &lt;h6&gt; h1æœ€å¤§ h6æœ€å°ï¼Œå®ƒä»¬ä»£è¡¨çš„æ˜¯æ ‡é¢˜ï¼ˆå’Œwordæ–‡æ¡£æ˜¯ä¸€æ ·çš„ï¼‰ è‡ªåŠ¨æ¢è¡Œï¼Œå­—ä½“åŠ ç²—ï¼Œæ ‡é¢˜ä¸æ ‡é¢˜ä¹‹é—´äº§ç”Ÿä¸€å®šçš„è·ç¦» æ³¨æ„:åœ¨HTMLä¸­å…è®¸æ ‡ç­¾è¿›è¡ŒåµŒå¥—çš„ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½åŒ…è£¹åµŒå¥—ï¼Œè€Œä¸å¯ä»¥è¿›è¡Œäº¤å‰åµŒå¥— 2.3.3 æ ¼å¼åŒ–æ ‡ç­¾ &lt;br&gt;ï¼šå­—ä½“åŠ ç²— &lt;i&gt;ï¼šå­—ä½“å€¾æ–œ &lt;del&gt;ï¼šåˆ é™¤çº¿ &lt;u&gt;ï¼šä¸‹åˆ’çº¿ 2.4 åˆ—è¡¨æ ‡è®° olï¼šæœ‰åºåˆ—è¡¨ type&#x3D;â€™Aâ€™ï¼šå­—æ¯æ’åº type&#x3D;â€™Iâ€™ï¼šç½—é©¬æ’åº start&#x3D;â€œ3â€ åºåˆ—ä»å‡ å¼€å§‹ ulï¼šæ— åºåˆ—è¡¨ type&#x3D;â€discâ€ï¼šé»˜è®¤ï¼Œå®å¿ƒåœ† type&#x3D;â€squareâ€ï¼šæ–¹å— type&#x3D;â€circleâ€ï¼šç©ºå¿ƒåœ† liï¼šåˆ—è¡¨é¡¹ 2.5 å›¾åƒæ ‡ç­¾&lt;img&gt;å®ƒå¯ä»¥è®©æˆ‘ä»¬åœ¨ç½‘é¡µå¼•å…¥ä¸€å¼ å›¾ç‰‡ï¼Œå¸¸ç”¨å±æ€§ï¼š src ä»£è¡¨çš„å›¾ç‰‡çš„è·¯å¾„ width å›¾ç‰‡çš„å®½åº¦ height å›¾ç‰‡çš„é«˜åº¦ border ç”¨äºè®¾ç½®å›¾ç‰‡çš„è¾¹æ¡† alt å¦‚æœå›¾ç‰‡ä¸å¯ä»¥æ˜¾ç¤ºæ—¶ï¼Œé»˜è®¤æ˜¾ç¤ºçš„æ–‡æœ¬ä¿¡æ¯ titleé¼ æ ‡æ‚¬åœå›¾ç‰‡ä¸Šï¼Œé»˜è®¤æ˜¾ç¤ºçš„æ–‡æœ¬ä¿¡æ¯ align å›¾ç‰‡é™„ä»¶æ–‡å­—çš„å¯¹é½æ–¹å¼ï¼Œå¯å–å€¼æœ‰ leftï¼šæŠŠå›¾åƒå¯¹é½åˆ°å·¦è¾¹ rightï¼šæŠŠå›¾åƒå¯¹é½åˆ°å³è¾¹ middleï¼šæŠŠå›¾åƒä¸ä¸­å¤®å¯¹é½ topï¼šæŠŠå›¾åƒä¸é¡¶éƒ¨å¯¹é½ bottomï¼šæŠŠå›¾åƒä¸åº•éƒ¨å¯¹é½ï¼ˆé»˜è®¤ï¼‰ 2.6 è¶…é“¾æ¥æ ‡ç­¾&lt;a&gt;æ ‡ç­¾,å¯ä»¥å®ç°è·³è½¬åˆ°å…¶å®ƒé¡µé¢æ“ä½œ. è¶…é“¾æ¥å†…å®¹ä¸ä»…å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯å›¾ç‰‡ç­‰ä¿¡æ¯ å¸¸ç”¨å±æ€§: href ä»£è¡¨çš„æˆ‘ä»¬è¦è·³è½¬çš„è·¯å¾„ target è¿™ä¸ªå±æ€§è§„å®šåœ¨ä½•å¤„æ‰“å¼€è¿™ä¸ªé“¾æ¥æ–‡æ¡£ï¼Œå¯å–å€¼ï¼š _blankåœ¨æ–°çª—å£ä¸­æ‰“å¼€é¡µé¢ _self é»˜è®¤ã€‚åœ¨æœ¬çª—å£æ‰“å¼€é¡µé¢ åŠŸèƒ½æ€§è¿æ¥ï¼š 1.å‘é‚®ä»¶ 1&lt;a href=&quot;mailto:1839646816@qq.com&quot;&gt;è”ç³»ç«™é•¿&lt;/a&gt; 2.QQèŠå¤©çª—å£ 123&lt;a href=&quot;tencent://message/?uin=1839646816&amp;Menu=yes&quot;&gt; &lt;img border=&quot;0&quot; src=&quot;http://wpa.qq.com/pa?p=1:615050000:7&quot;/&gt; &lt;/a&gt; 2.7 è¡¨æ ¼&lt;table&gt;ï¼šå®šä¹‰ä¸€ä¸ªè¡¨æ ¼ borderï¼šè¾¹æ¡†ï¼Œå–å€¼æ˜¯åƒç´ ä¸ºå•ä½ width ä»£è¡¨çš„è¡¨æ ¼çš„å®½åº¦ align ä»£è¡¨è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼›å–å€¼ left å·¦å¯¹é½è¡¨æ ¼ right å³å¯¹é½è¡¨æ ¼ center å±…ä¸­å¯¹é½è¡¨æ ¼ cellspacingï¼šå•å…ƒæ ¼é—´è·ï¼ˆé€šå¸¸è®¾ç½®0è¡¨ç¤ºå•çº¿è¡¨æ ¼ï¼‰ &lt;tr&gt;ï¼šè¡¨æ ¼ä¸­çš„è¡Œ ï¼ˆTable Rowï¼‰ align ä»£è¡¨è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼›å–å€¼ &lt;td&gt;ï¼šè¡¨æ ¼ä¸­çš„æ•°æ®å•å…ƒæ ¼ ï¼ˆTable DataCellï¼‰ colspan æŒ‡ç¤ºåˆ—çš„åˆå¹¶ rowspan æŒ‡ç¤ºè¡Œçš„åˆå¹¶ è®¡åˆ’ç»Ÿè®¡è¡¨ æ”¶å…¥é‡‘é¢ 5 6 8 9 11 12 123456789101112131415161718192021&lt;table border=&quot;1&quot; width=&quot;400px&quot; align=&quot;center&quot; cellspacing=&quot;0&quot;&gt; &lt;tr align=&quot;center&quot;&gt; &lt;td colspan=&quot;3&quot;&gt;è®¡åˆ’ç»Ÿè®¡è¡¨&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td rowspan=&quot;3&quot;&gt;æ”¶å…¥é‡‘é¢&lt;/td&gt; &lt;td&gt;5&lt;/td&gt; &lt;td&gt;6&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;8&lt;/td&gt; &lt;td&gt;9&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;11&lt;/td&gt; &lt;td&gt;12&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; 2.8 è¡¨å•æ ‡ç­¾è¡¨å•å¯ä»¥è®©æˆ‘ä»¬å°†å½•å…¥ä¿¡æ¯æºå¸¦åˆ°æœåŠ¡å™¨ç«¯ã€‚ ç®€å•è¯´ï¼Œé€šè¿‡è¡¨å•å¯ä»¥å°†è¦æäº¤çš„æ•°æ®æäº¤åˆ°æŒ‡å®šçš„ä½ç½®ã€‚ ä½†ä¸€ä¸ªä¸€ä¸ªçš„æäº¤ï¼Œä¸æ–¹ä¾¿ã€‚è¡¨å•æ­£å¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå°†æ‰€æœ‰çš„æ•°æ®å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œä¸€èµ·æäº¤ç»™æœåŠ¡å™¨ã€‚ å¸¸è§çš„ ç™»å½•é¡µé¢ã€æ³¨å†Œé¡µé¢ éƒ½ç¦»ä¸å¼€è¡¨å•çš„åº”ç”¨ 2.8.1 formå±æ€§actionï¼šæ•´ä¸ªè¡¨å•æäº¤çš„ç›®çš„åœ° methodï¼šè¡¨å•æäº¤çš„æ–¹å¼ getï¼šæäº¤æ—¶ï¼Œä¼ è¾“æ•°æ®é‡å°‘ï¼ˆä¼ é€’æ™®é€šæ–‡å­—ä¿¡æ¯ï¼Œä¼ é€’ç…§ç‰‡ä¼šå¤±è´¥ï¼‰ï¼Œæ˜æ–‡æäº¤ï¼ˆåœ¨æµè§ˆå™¨çš„urlåé¢ä¼šæ˜¾ç¤ºæäº¤çš„æ•°æ®ï¼Œä¸é€‚åˆç”¨äºç™»å½•ï¼‰ postï¼šæäº¤æ—¶ï¼Œä¼ è¾“æ•°æ®é‡å¤§ï¼ˆä¼ é€’æ–‡å­—å’Œå›¾ç‰‡éƒ½è¡Œï¼‰ï¼Œå¯†æ–‡æäº¤ï¼ˆæµè§ˆå™¨çš„urlåé¢çœ‹ä¸åˆ°æäº¤çš„æ•°æ®ï¼‰ 2.8.2 è¡¨å•ä¸­çš„å…ƒç´ ï¼ˆç©ºé—´ï¼‰&lt;input&gt;å…ƒç´ çš„typeå±æ€§ textï¼šé»˜è®¤å€¼ï¼Œæ™®é€šçš„æ–‡æœ¬è¾“å…¥æ¡† placeholderå±æ€§ï¼šæç¤ºæ–‡æœ¬ maxlengthå±æ€§ï¼šæœ€å¤šèƒ½è¾“å…¥å­—ç¬¦æ•°é‡ passwordï¼šå¯†ç è¾“å…¥æ¡† checkboxï¼šå¤šé€‰æ¡†&#x2F;å¤é€‰æ¡† checkedï¼šè¢«é€‰ä¸­ radioï¼šå•é€‰æŒ‰é’® fileï¼šä¸Šä¼ æ–‡ä»¶ resetï¼šé‡ç½®æŒ‰é’® submitï¼šæäº¤æŒ‰é’® buttonï¼šæ™®é€šæŒ‰é’® &lt;select&gt;ï¼šä¸‹æ‹‰åˆ—è¡¨&#x2F;ä¸‹æ‹‰æ¡† &lt;option&gt;ï¼šåˆ—è¡¨ä¸­çš„é¡¹ selectedï¼šè¢«é€‰ä¸­ &lt;textarea&gt;ï¼šæ–‡æœ¬åŸŸï¼ˆå¤šè¡Œæ–‡æœ¬æ¡†ï¼‰ å¯ä»¥é€šè¿‡ cols å’Œ rows å±æ€§æ¥è§„å®š textarea çš„å°ºå¯¸ï¼Œä¸è¿‡æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ CSS çš„heightå’Œ width å±æ€§ã€‚ &lt;button&gt;ï¼šæŒ‰é’® åœ¨formè¡¨å•ä¸­ï¼Œä½œç”¨å’Œsubmitä¸€æ · ä¸åœ¨formè¡¨å•ä¸­ï¼Œå°±æ˜¯æ™®é€šæŒ‰é’®ï¼ˆé…åˆåæœŸçš„javascriptï¼Œå¯æ‰©å±•æ€§æ›´é«˜ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;form action=&quot;baidu&quot; method=&quot;GET&quot;&gt; &lt;p&gt;å¸å·ï¼š&lt;input name=&quot;a&quot; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å¸å·...&quot; maxlength=&quot;5&quot; &gt;&lt;/p&gt; &lt;p&gt; å¯†ç ï¼š &lt;input name=&quot;b&quot; type=&quot;password&quot;&gt; &lt;/p&gt; &lt;p&gt; çˆ±å¥½ï¼š &lt;input name=&quot;hobby&quot; type=&quot;checkbox&quot;&gt; æŠ½çƒŸ &lt;input name=&quot;hobby&quot; type=&quot;checkbox&quot; checked=&quot;checked&quot;&gt; å–é…’ &lt;input name=&quot;hobby&quot; type=&quot;checkbox&quot;&gt; çƒ«å¤´ &lt;input name=&quot;hobby&quot; type=&quot;checkbox&quot;&gt; æ³¡æ¾¡ &lt;/p&gt; &lt;p&gt; æ€§åˆ«ï¼š &lt;input type=&quot;radio&quot; name=&quot;sex&quot;&gt; ç”· &lt;input type=&quot;radio&quot; name=&quot;sex&quot; checked=&quot;checked&quot;&gt; å¥³ &lt;/p&gt; &lt;p&gt; èº«ä»½ï¼š &lt;input type=&quot;radio&quot; name=&quot;role&quot;&gt; ceo &lt;input type=&quot;radio&quot; name=&quot;role&quot;&gt; cto &lt;input type=&quot;radio&quot; name=&quot;role&quot;&gt; coo &lt;input type=&quot;radio&quot; name=&quot;role&quot; checked=&quot;checked&quot;&gt; ufo &lt;/p&gt; &lt;p&gt; å¤´åƒï¼š &lt;input type=&quot;file&quot;&gt; &lt;/p&gt; &lt;p&gt; è¡€å‹ï¼š &lt;select&gt; &lt;option&gt;Aå‹&lt;/option&gt; &lt;option&gt;Bå‹&lt;/option&gt; &lt;option&gt;Cå‹&lt;/option&gt; &lt;option selected=&quot;selected&quot;&gt;Oå‹&lt;/option&gt; &lt;/select&gt; &lt;/p&gt; &lt;p&gt; ä¸ªäººç®€ä»‹ï¼š &lt;textarea cols=&quot;10&quot; rows=&quot;5&quot;&gt;&lt;/textarea&gt; &lt;/p&gt; &lt;p&gt; &lt;input type=&quot;reset&quot; value=&quot;æ¸…ç©º&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;å–æ¶ˆ&quot;&gt; &lt;button&gt;ä¿å­˜&lt;/button&gt; &lt;/p&gt; &lt;/form&gt; &lt;button&gt;æµ‹è¯•&lt;/button&gt; æ³¨æ„äº‹é¡¹ï¼š æ‰€æœ‰è¡¨å•ä¸­çš„å…ƒç´ éƒ½è¦å…·æœ‰åç§°ï¼ˆå¦åˆ™æäº¤åˆ°æœåŠ¡å™¨ä¹‹åï¼ŒæœåŠ¡å™¨æ— æ³•åŒºè¯†åˆ«å¤šä¸ªå…ƒç´ ä¹‹é—´çš„ä¸åŒï¼‰ å•é€‰æ¡†è¦æƒ³å¯ä»¥ä¸€æ¬¡åªé€‰æ‹©ä¸€ä¸ªï¼Œè¦å…·æœ‰ç›¸åŒçš„nameå€¼ æ‰€æœ‰çš„å¤é€‰æ¡†ä»¥ç»„ä¸ºå•ä½ï¼Œç»„å†…çš„æ¯ä¸ªå¤é€‰æ¡†éƒ½åº”è¯¥å…·æœ‰ç›¸åŒçš„nameå€¼ 2.9 æ¡†æ¶æ ‡ç­¾é€šè¿‡&lt;frameset&gt;å’Œ&lt;frame&gt;æ¡†æ¶æ ‡ç­¾å¯ä»¥å®šåˆ¶HTMLé¡µé¢å¸ƒå±€ã€‚å¯ä»¥ç†è§£ä¸ºï¼šç”¨å¤šä¸ªé¡µé¢æ‹¼è£…æˆä¸€ä¸ªé¡µé¢ã€‚ æ³¨æ„ï¼šæ¡†æ¶æ ‡ç­¾å’Œbodyæ ‡ç­¾ä¸å…±å­˜ã€‚â€œæœ‰ä½ æ²¡æˆ‘ï¼Œæœ‰æˆ‘æ²¡ä½ â€ 12345678910111213141516171819202122&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;frameset rows=&quot;10%,*,13%&quot;&gt; &lt;frame src=&quot;top.html&quot;&gt;&lt;/frame&gt; &lt;frameset cols=&quot;15%,*&quot;&gt; &lt;frame src=&quot;left.html&quot;&gt;&lt;/frame&gt; &lt;frame src=&quot;right.html&quot;&gt;&lt;/frime&gt; &lt;/frameset&gt; &lt;frame src=&quot;foot.html&quot;&gt;&lt;/frame&gt; &lt;/frameset&gt;&lt;/html&gt; top.htmlã€left.htmlã€right.htmlã€foot.html å››ä¸ªé¡µé¢å†…å®¹ä¸€æ ·ï¼Œç¨å¾®æ”¹ä¸‹æ–‡å­—è€Œå·²ï¼Œä»¥top.htmlä¸ºä¾‹ 123456789101112&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;é¡¶éƒ¨å¯¼èˆªåŒºåŸŸ&lt;/h1&gt; &lt;/body&gt; &lt;/html&gt; 2.10 å…¶ä»–æ ‡ç­¾ä¸ç‰¹æ®Šå­—ç¬¦2.10.1 &lt;meta&gt;æ ‡ç­¾&lt;meta&gt;æ ‡ç­¾å¿…é¡»å†™åœ¨&lt;head&gt;æ ‡ç­¾ä¹‹é—´. 123&lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; å½“å‰é¡µé¢çš„å­—ç¬¦ç¼–ç  gbkï¼šä¸­æ–‡ç®€ä½“ è¿™é‡Œ çš„ åå­— æ˜¯ viewport ï¼ˆæ˜¾ç¤ºçª—å£ï¼‰æ•°æ® æ˜¯ æ–‡æœ¬ å†…å®¹ content&#x3D;â€width&#x3D;device-width, initial-scale&#x3D;1.0â€ä¹Ÿå°±æ˜¯ æ˜¾ç¤ºçª—å£ å®½åº¦ æ˜¯ å®¢æˆ·ç«¯çš„ å±å¹• å®½åº¦ ï¼ˆå°±æ˜¯ æ»¡å± ï¼ï¼‰ï¼Œæ˜¾ç¤ºçš„æ–‡å­—å’Œå›¾å½¢çš„åˆå§‹æ¯”ä¾‹ æ˜¯1.0 æ¯ä¸ªç”µè„‘å†…ç½®çš„IEç‰ˆæœ¬æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸ºäº†å…¼å®¹æ‰€æœ‰çš„ç‰ˆæœ¬ä»¥æœ€é«˜çº§æ¨¡å¼æ¸²æŸ“æ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯ä»»ä½•IEç‰ˆæœ¬éƒ½ä»¥å½“å‰ç‰ˆæœ¬æ‰€æ”¯æŒçš„æœ€é«˜çº§æ ‡å‡†æ¨¡å¼æ¸²æŸ“ 1&lt;meta http-equiv=&quot;refresh&quot; content=&quot;5; url=http://yournotes.cn&quot;&gt; æ³¨æ„ï¼šåœ¨htmlä¸­å¦‚æœè·³è½¬çš„äº’è”ç½‘ä¸Šçš„ç½‘ç«™èµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¹¦å†™è·¯å¾„æ—¶ï¼Œä¸€å®šè¦å¸¦åè®®çš„è·¯å¾„ã€‚ 2.10.2 &lt;link&gt;æ ‡ç­¾åé¢æˆ‘ä»¬ä¼šä½¿ç”¨linkæ ‡ç­¾æ¥å¯¼å…¥css æ³¨æ„:linkæ ‡ç­¾ä¹Ÿå¿…é¡»å†™åœ¨&lt;head&gt;æ ‡ç­¾ä¸­ã€‚ 2.10.3 ç‰¹æ®Šå­—ç¬¦ 3. HTML5 æ–°ç‰¹æ€§3.1 HTML5ä¸HTML4çš„åŒºåˆ«H5åŒ…å«H4 1.å¤§å°å†™ä¸æ•æ„Ÿ æ ‡ç­¾ å±æ€§ å±æ€§çš„å€¼ 1&lt;inPUT tYPe=&quot;pasSWord&quot;/&gt; 2.å¼•å·å¯ä»¥çœç•¥ 12&lt;input type=&quot;password&quot;&gt; &lt;input type=password&gt; 3.ç»“å°¾æ ‡ç­¾ä¹Ÿå¯çœç•¥ 12&lt;p&gt;å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ &lt;p&gt;å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ 3.2 æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾æ–°å¢è®¸å¤šè¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œè®©divâ€œè§åçŸ¥æ„â€ sectionæ ‡ç­¾ï¼šè¡¨ç¤ºé¡µé¢ä¸­çš„å†…å®¹åŒºåŸŸï¼Œéƒ¨åˆ†ï¼Œé¡µé¢çš„ä¸»ä½“éƒ¨åˆ† articleæ ‡ç­¾ï¼šæ–‡ç«  asideæ ‡ç­¾ï¼šæ–‡ç« å†…å®¹ä¹‹å¤–çš„ï¼Œæ ‡é¢˜ headeræ ‡ç­¾ï¼šå¤´éƒ¨ï¼Œé¡µçœ‰ï¼Œé¡µé¢çš„é¡¶éƒ¨ hgroupæ ‡ç­¾ï¼šå†…å®¹ä¸æ ‡é¢˜çš„ç»„åˆ navæ ‡ç­¾ï¼šå¯¼èˆª figureæ ‡ç­¾ï¼šå›¾æ–‡å¹¶èŒ‚ footï¼šé¡µè„šï¼Œé¡µé¢çš„åº•éƒ¨ 3.3 åª’ä½“æ ‡ç­¾æƒ³åœ¨ç½‘é¡µä¸Šæ’­æ”¾è§†é¢‘ï¼Œå°±è¦ä½¿ç”¨&lt;video&gt;ï¼Œå±æ€§æœ‰ï¼š srcï¼šåª’ä½“èµ„æºæ–‡ä»¶çš„ä½ç½® controlsï¼šæ§åˆ¶é¢æ¿ autoplayï¼šè‡ªåŠ¨æ’­æ”¾ï¼ˆè°·æ­Œå¤±æ•ˆï¼Œ360æµè§ˆå™¨å¯ä»¥ï¼‰ loopï¼šå¾ªç¯æ’­æ”¾ 1&lt;video src=&quot;img/html-css-jsä¹‹é—´çš„å…³ç³».mp4&quot; controls loop autoplay&gt;&lt;/video&gt; 3.4 æ–°å¢è¡¨å•ç©ºé—´è¡¨å•çš„æ§ä»¶æ›´åŠ ä¸°å¯Œäº† &lt;input&gt; å¢åŠ äº†typeå±æ€§ï¼š colorï¼šè°ƒè‰²æ¿ dateï¼šæ—¥å† monthï¼šæœˆå† weekï¼šå‘¨å† numberï¼šæ•°å€¼åŸŸ minï¼šæœ€å°å€¼ï¼ˆé»˜è®¤å€¼æ˜¯1ï¼‰ maxï¼šæœ€å¤§å€¼ï¼ˆé»˜è®¤å€¼æ— ä¸Šé™ï¼‰ stepï¼šé€’å¢é‡ rangeï¼šæ»‘å— searchï¼šæœç´¢æ¡†ï¼ˆå¸¦Ã—å·ï¼Œå¯ä¸€é”®åˆ é™¤æ¡†ä¸­å†…å®¹ï¼‰ è¿›åº¦æ¡&lt;progress/&gt; é«˜äº®&lt;mark&gt; è”æƒ³è¾“å…¥æ¡†&lt;datalist&gt; ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ é€‰é¡¹&lt;option&gt;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"HTML","slug":"å‰ç«¯/HTML","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/HTML/"}],"tags":[{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"}]}],"categories":[{"name":"ç‹¬ç«‹åº”ç”¨","slug":"ç‹¬ç«‹åº”ç”¨","permalink":"http://yournotes.cn/categories/%E7%8B%AC%E7%AB%8B%E5%BA%94%E7%94%A8/"},{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/categories/LLM/"},{"name":"è®°å½•æ–‡æ¡£","slug":"è®°å½•æ–‡æ¡£","permalink":"http://yournotes.cn/categories/%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"ç®—æ³•/LeetCode","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/LeetCode/"},{"name":"ä¹è°±","slug":"ä¹è°±","permalink":"http://yournotes.cn/categories/%E4%B9%90%E8%B0%B1/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/"},{"name":"é—®é¢˜","slug":"æ—¥å¸¸/é—®é¢˜","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E9%97%AE%E9%A2%98/"},{"name":"æŠ˜è…¾","slug":"æ—¥å¸¸/æŠ˜è…¾","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E6%8A%98%E8%85%BE/"},{"name":"åšå®¢ç³»ç»Ÿ","slug":"åšå®¢ç³»ç»Ÿ","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"},{"name":"Hexo","slug":"åšå®¢ç³»ç»Ÿ/Hexo","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/Hexo/"},{"name":"hexo","slug":"åšå®¢ç³»ç»Ÿ/hexo","permalink":"http://yournotes.cn/categories/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/hexo/"},{"name":"è®°å½•","slug":"æ—¥å¸¸/è®°å½•","permalink":"http://yournotes.cn/categories/%E6%97%A5%E5%B8%B8/%E8%AE%B0%E5%BD%95/"},{"name":"JAVA","slug":"JAVA","permalink":"http://yournotes.cn/categories/JAVA/"},{"name":"Spring","slug":"JAVA/Spring","permalink":"http://yournotes.cn/categories/JAVA/Spring/"},{"name":"ä¹è°±","slug":"ç®—æ³•/ä¹è°±","permalink":"http://yournotes.cn/categories/%E7%AE%97%E6%B3%95/%E4%B9%90%E8%B0%B1/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å‰ç«¯/JavaScript","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/JavaScript/"},{"name":"HTML","slug":"å‰ç«¯/HTML","permalink":"http://yournotes.cn/categories/%E5%89%8D%E7%AB%AF/HTML/"}],"tags":[{"name":"PennyCooking","slug":"PennyCooking","permalink":"http://yournotes.cn/tags/PennyCooking/"},{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"http://yournotes.cn/tags/%E9%A3%9F%E8%B0%B1/"},{"name":"çƒ¹é¥ª","slug":"çƒ¹é¥ª","permalink":"http://yournotes.cn/tags/%E7%83%B9%E9%A5%AA/"},{"name":"PennyNote","slug":"PennyNote","permalink":"http://yournotes.cn/tags/PennyNote/"},{"name":"è®°è´¦","slug":"è®°è´¦","permalink":"http://yournotes.cn/tags/%E8%AE%B0%E8%B4%A6/"},{"name":"LLM","slug":"LLM","permalink":"http://yournotes.cn/tags/LLM/"},{"name":"æ—¥å¸¸é—®é¢˜","slug":"æ—¥å¸¸é—®é¢˜","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"},{"name":"æ€»ç»“æ–‡æ¡£","slug":"æ€»ç»“æ–‡æ¡£","permalink":"http://yournotes.cn/tags/%E6%80%BB%E7%BB%93%E6%96%87%E6%A1%A3/"},{"name":"LeetCodeæ—¥å¸¸","slug":"LeetCodeæ—¥å¸¸","permalink":"http://yournotes.cn/tags/LeetCode%E6%97%A5%E5%B8%B8/"},{"name":"å‰ä»–è°±","slug":"å‰ä»–è°±","permalink":"http://yournotes.cn/tags/%E5%90%89%E4%BB%96%E8%B0%B1/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yournotes.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yournotes.cn/tags/%E9%9A%8F%E7%AC%94/"},{"name":"æ—¥å¸¸æŠ˜è…¾","slug":"æ—¥å¸¸æŠ˜è…¾","permalink":"http://yournotes.cn/tags/%E6%97%A5%E5%B8%B8%E6%8A%98%E8%85%BE/"},{"name":"Hexo","slug":"Hexo","permalink":"http://yournotes.cn/tags/Hexo/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yournotes.cn/tags/%E9%9D%A2%E8%AF%95/"},{"name":"javaæ¡†æ¶","slug":"javaæ¡†æ¶","permalink":"http://yournotes.cn/tags/java%E6%A1%86%E6%9E%B6/"},{"name":"Java","slug":"Java","permalink":"http://yournotes.cn/tags/Java/"}]}